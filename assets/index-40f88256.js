import{s as Tt,a as Ue,b as R0}from"./Error-57322e92.js";import{e as v,l as Ju,n as Ae,m as dt,y as b,u as OL,s as ii,t as si,a as j5,b as q5,x as ZT,A as $p,v as K5,o as Y5,c as lc,d as j_,f as XT,g as QT,h as PL,r as AS,i as Ih}from"./cast-a534ae90.js";import{s as JT,x as Ap}from"./Basemap-59ed9516.js";import{_ as Fe}from"./preload-helper-41c905a7.js";import{l as cn}from"./Color-af6e0c66.js";import{j as Ht}from"./Collection-7c37b74e.js";import{n as Z5}from"./collectionUtils-0365f48b.js";import{o as X5,n as RL}from"./compilerUtils-fefa73ae.js";import{y as hr,n as Lp,h as Ts}from"./string-480f3e3f.js";import{m as Wu}from"./Loadable-46524a7e.js";import{n as Q5}from"./loadAll-01cdf0a9.js";import{f as xs,E as Ni,i as ec,g as cc,U as LS,j as gc,b as J5,L as VL,A as FL,a as Op,v as $y,p as OS,C as e8,t as xb,x as Mb,D as PS,y as Zf}from"./promiseUtils-32d9c228.js";import{T as eI,b as DL,a as Kl,t as kg,r as Xh,n as Ym,e as tI}from"./ensureType-25b8cc06.js";import{r as NL,w as Kt,o as t8,R as RS,E as vc,a as ol,k as yc,I as BL,p as n8,b as VS,c as zL,d as i8,M as s8,e as o8,f as ic,j as HL,P as UL,s as WL,g as nI,h as iI,S as xh}from"./Extent-a1a1de42.js";import{t as ke,r as q,s as sn,i as Xf,u as r8,o as Ha,f as $b,c as FS,e as zt,h as Bi,p as Kr,q as Ay,C as V0,v as a8,a as Ly,l as l8,y as c8,A as u8,b as d8,m as p8}from"./typedArrayUtil-d9bc5fbd.js";import{r as h8}from"./enumeration-61a13175.js";import{r as f8,n as m8}from"./opacityUtils-1333f803.js";import{l as Oy}from"./CollectionFlattener-f43a0fce.js";import{n as Ii}from"./Evented-cbf5f368.js";import{F as g8,U as go,s as sI,B as v8,o as y8}from"./request-24011425.js";import{l as b8,d as _8,t as w8}from"./TablesMixin-55858fba.js";import{g as Ls}from"./Graphic-6c08e65d.js";import{i as GL}from"./Clonable-9b34e760.js";import{s as jL}from"./Cyclical-078b4564.js";import{a as bc,b as qL,g as Yr,m as Qh,j as C8,A as S8,D as E8}from"./mathUtils-57aba1ea.js";import{i as k8}from"./geometry-eec1b371.js";import{v as F0}from"./jsonUtils-c6684c52.js";import{l as ge,h as gt,a as Dn,f as ji,U as _c,j as na,w as us,P as T8}from"./reactiveUtils-5869e41a.js";import{c as hi,e as Ru,i as Qf,u as is}from"./screenUtils-90993e16.js";import{l as I8}from"./workers-af024c50.js";import{e as Gu,A as lh,r as fr,t as ch,i as Ys,d as x8,a as M8,_ as $8,R as DS}from"./projection-acd73147.js";import{p as A8,j as wf}from"./TileInfo-c5c8c8d2.js";import{i as Py,e as rn,M as kn,n as M,v as Ry,h as oI,f as yo,p as Kd,k as KL,a as Pp,t as YL,w as L8,b as ZL,r as rI,c as XL,o as aI}from"./widget-4abc68df.js";import{c as NS,a as Li,d as Zm}from"./HandleOwner-2edbba46.js";import{s as Si}from"./intl-7d39a8c0.js";import{s as lI}from"./byteSizeEstimations-90c5a50d.js";import{E as Ds,O as QL,J as JL,K as eO,R as tO,A as O8,T as P8,$ as Vy,Y as R8,u as nO}from"./unitUtils-dd6fb8ee.js";import{m as rl,L as Fy,u as V8,S as iO}from"./number-2ab8ca0d.js";import{a as F8,s as q_}from"./executeQueryJSON-29279a46.js";import{c as cI,d as D0}from"./RelationshipQuery-c27267ab.js";import{x as D8,h as N8,i as Ev,T as B8,t as uI,r as N0,s as dI,n as z8,f as H8,C as U8,R as W8,e as pI,o as G8,a as sO,c as oO,E as j8}from"./fieldUtils-b2df74c4.js";import{u as q8,i as K8,c as rO,a as Y8,I as Z8,b as aO,d as X8,e as Q8,f as uh,g as BS,h as lO,k as J8}from"./PopupTemplate-f97bb051.js";import{i as zS}from"./arcadeOnDemand-a976a73c.js";import{a as Ab}from"./assets-cd44347b.js";import"./LegendOptions-2e7b3d70.js";import{j as ad,q as Jf,x as K_,M as eB,N as tB,y as B0,g as nB,h as iB,d as Lb,a as cO,b as sB,f as oB,w as rB,I as uO}from"./utils-4469bf65.js";import{m as em,S as tm,y as lr,j as Vc,d as aB,a as lB,c as dO}from"./symbols-9fcb6cc2.js";import{a as cB,t as uB}from"./jsonUtils-1c5cdf77.js";import{m as dB,x as kv}from"./Query-13124a97.js";import"./featureConversionUtils-d2229ed4.js";import{i as pB,v as cp,m as up,r as Rp,h as hI}from"./Polyline-b571c705.js";import{M as hB}from"./normalizeUtils-0f537694.js";import"./pbf-8b0546e8.js";import fB from"./FeatureSet-deb2029d.js";import"./TopFeaturesQuery-9aca00bf.js";import{l as z0,s as pO}from"./locale-30120714.js";import Dr from"./FeatureLayer-534ff006.js";import{s as dh,i as HS}from"./Identifiable-093f90a8.js";import{b as fI}from"./Layer-cea228f0.js";import{y as US,p as hO}from"./colorUtils-82440b70.js";import{n as H0,o as Mh,i as nm,a as WS,c as GS,e as Ob,h as mB,f as fO,M as gB,r as jS}from"./mat2d-d0b91e3e.js";import{e as mI}from"./Queue-275a6362.js";import{t as vB,I as Pb,y as qS}from"./Scheduler-5e6ccc87.js";import{T as yB}from"./TimeExtent-2004eecf.js";import{j as mO,b as bB}from"./asyncUtils-087555fc.js";import{m as KS,_ as _B}from"./Promise-368b703a.js";import{l as wB,i as gO,a as gI,h as YS}from"./GraphicsLayer-b332f442.js";import{v as Rb}from"./HeightModelInfo-34f16d74.js";import{m as Tv}from"./arcgisLayerUrl-bed3cba1.js";import{l as mr,a as vI}from"./ViewingMode-915d19cb.js";import{t as U0,r as CB}from"./unitBezier-881ac1eb.js";import{r as vO}from"./common-c186b691.js";import{o as di,v as W0,y as yO,j as Ic,q as G0,C as ZS,l as Xm,r as Ji,z as Va,g as SB,a as im,s as bO,m as Qm,d as Zr,p as Vp,k as _O,b as yI,A as XS,L as EB,w as bI}from"./vec2-ab9f47bf.js";import{r as Cf,n as Jt,t as kB,e as TB}from"./vec2f64-30dc1443.js";import{s as IB,r as xB,M as _I,h as MB,i as $B}from"./mat3-9a8d9db7.js";import{e as Y_}from"./mat3f32-d3d088e8.js";import{t as wI}from"./vec2f32-461e65a9.js";import"./TileStrategy-a5366189.js";import{d as AB,h as LB}from"./TileStore-8f580dbf.js";import"./TileKey-9cae9369.js";import{g as Vb,p as sm,o as ia,J as ds,P as Hi,q as ph,_ as uc,Z as j0,e as dp,s as OB,x as QS,Y as CI,r as sc,u as du,A as PB,G as q0,H as SI,j as EI,z as Jh,E as kI}from"./vec3-1863987c.js";import{l as RB}from"./capabilities-d08b6e58.js";import{r as VB}from"./context-util-d4c193b5.js";import{y as FB}from"./FeatureLayerBase-c0aa3674.js";import{c as TI}from"./Subtype-a3103d84.js";import{t as DB,D as da}from"./datetime-4f774298.js";import{u as NB}from"./Field-1d4f9ca4.js";import{u as BB}from"./messages-28bf3b89.js";import{r as zB}from"./deprecate-0d93948c.js";import{n as II}from"./uuid-73213768.js";import{m as HB}from"./diffUtils-8a8cb5bc.js";import{m as UB}from"./lengthUtils-92fed992.js";import{a as WB,i as GB}from"./sizeVariableUtils-d4870b0d.js";import{m as jB,y as qB,j as KB,a as YB}from"./UniqueValueRenderer-73d567ad.js";import{S as Fp,a as ZB}from"./jsonUtils-8c02ff16.js";import{l as JS,c as eE,x as XB,h as Dp,E as Gn,g as tE,d as K0,s as wO}from"./elevationInfoUtils-c3025fae.js";import{n as ht,r as wo,t as om,e as QB}from"./vec3f64-6cd30318.js";import{q as xI}from"./QueryEngineResult-92e13fe4.js";import{c as JB,t as ez,e as MI}from"./layerUtils-68eea656.js";import{e as CO}from"./Util-289ce3b5.js";import{u as Np,b as tz,q as nz,c as iz}from"./aaBoundingRect-b340cf8c.js";import{j as SO}from"./Portal-c6e03126.js";import{s as sz}from"./jsonMap-190c5593.js";import{a as oz}from"./EffectView-dffeb0bc.js";import{i as rz}from"./BlendLayer-813950f9.js";import{c as az}from"./ExportImageParameters-ba01802d.js";import{resolveWebStyleSymbol as lz}from"./webStyleSymbolUtils-0b165621.js";import{v as Fb}from"./dehydratedFeatures-3dcd65f1.js";import{U as cz,w as uz}from"./enums-4b2a86a0.js";import{d as nE}from"./CIMSymbol-72a9d286.js";import{j as dz,a as pz,E as hz}from"./vec4-46a9b36d.js";import{n as fz,r as Z_,e as mz}from"./vec4f64-939de194.js";import{p as $I,_ as gz,R as Tg,A as X_,z as vz,Y as Q_,V as yz}from"./plane-46a8c767.js";import{a as bz,f as AI,n as J_}from"./sphere-622880b9.js";import{Q as _z,O as wz}from"./quat-ec16a584.js";import{e as LI}from"./quatf64-c94bd656.js";import"./nextTick-3ee5a785.js";import"./PortalItem-e4ba4b94.js";import"./writeUtils-3bde6e49.js";import"./colorUtils-639f4d25.js";import"./SimpleObservable-8e532943.js";import"./typeUtils-cd52dc20.js";import"./Connection-b591250e.js";import"./mat4-7dde83b1.js";import"./zscale-48bab05e.js";import"./dom-5b7af1bf.js";import"./query-b7b3a76b.js";import"./pbfQueryUtils-c922ef32.js";import"./OptimizedFeature-73582c6e.js";import"./OptimizedFeatureSet-1d1ac4b9.js";import"./queryZScale-3c8de33a.js";import"./ItemCache-bf1028d4.js";import"./MemCache-1d2f56ee.js";import"./utils-c81a5c52.js";import"./Symbol-8266348e.js";import"./symbolLayerUtils3D-c8c40895.js";import"./aaBoundingBox-4a83dbbc.js";import"./persistableUrlUtils-d0777bec.js";import"./DictionaryLoader-2a334243.js";import"./LRUCache-b9228ca3.js";import"./heatmapUtils-3d7c22c5.js";import"./MultiOriginJSONSupport-b8792dfa.js";import"./LayerFloorInfo-f184c8f5.js";import"./editsZScale-12d81957.js";import"./APIKeyMixin-b6e4f897.js";import"./ArcGISService-aada3b5d.js";import"./CustomParametersMixin-a5d06ccc.js";import"./EditBusLayer-b5dc3689.js";import"./FeatureReductionLayer-fcaeb34a.js";import"./OperationalLayer-9c50475b.js";import"./ElevationInfo-80227ecc.js";import"./labelingInfo-c70ad911.js";import"./labelUtils-4f4b54c6.js";import"./defaultsJSON-59981e75.js";import"./OrderedLayer-9623e905.js";import"./PortalLayer-12f4a535.js";import"./PortalUser-1016c43c.js";import"./PortalGroup-d495847c.js";import"./RefreshableLayer-49182ab8.js";import"./ScaleRangeLayer-c072e266.js";import"./TemporalLayer-c74d13d4.js";import"./TimeInfo-f76d6c20.js";import"./FeatureTemplate-c4496b93.js";import"./FeatureType-0be9420b.js";import"./fieldProperties-4207e953.js";import"./FieldsIndex-02142c8a.js";import"./versionUtils-fabd8b3a.js";import"./styleUtils-08eaa4d2.js";import"./popupUtils-1ecc877c.js";import"./rbush-8e36784a.js";import"./quickselect-322ec8e1.js";import"./fieldType-b34e5d2d.js";import"./colorRamps-8d7efc14.js";import"./styleUtils-391927cf.js";import"./utils-52ad3c09.js";import"./generateRendererUtils-2f0b667c.js";import"./WhereClause-6c9440a1.js";import"./utils-44a68fd6.js";import"./json-48e3ea08.js";import"./parser-01f6451e.js";import"./mat4f32-77b3d8ac.js";import"./sublayerUtils-eea48c01.js";import"./devEnvironmentUtils-5002a058.js";import"./mat4f64-fbeb2cd1.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function iE(t,e){const n=Object.create(null),i=t.split(",");for(let s=0;s<i.length;s++)n[i[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}function Ke(t){if(ze(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],s=at(i)?kz(i):Ke(i);if(s)for(const o in s)e[o]=s[o]}return e}else{if(at(t))return t;if(Et(t))return t}}const Cz=/;(?![^(]*\))/g,Sz=/:([^]+)/,Ez=/\/\*.*?\*\//gs;function kz(t){const e={};return t.replace(Ez,"").split(Cz).forEach(n=>{if(n){const i=n.split(Sz);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function x(t){let e="";if(at(t))e=t;else if(ze(t))for(let n=0;n<t.length;n++){const i=x(t[n]);i&&(e+=i+" ")}else if(Et(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function or(t){if(!t)return null;let{class:e,style:n}=t;return e&&!at(e)&&(t.class=x(e)),n&&(t.style=Ke(n)),t}const Tz="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Iz=iE(Tz);function EO(t){return!!t||t===""}function xz(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=Bp(t[i],e[i]);return n}function Bp(t,e){if(t===e)return!0;let n=ju(t),i=ju(e);if(n||i)return n&&i?t.getTime()===e.getTime():!1;if(n=rm(t),i=rm(e),n||i)return t===e;if(n=ze(t),i=ze(e),n||i)return n&&i?xz(t,e):!1;if(n=Et(t),i=Et(e),n||i){if(!n||!i)return!1;const s=Object.keys(t).length,o=Object.keys(e).length;if(s!==o)return!1;for(const r in t){const a=t.hasOwnProperty(r),l=e.hasOwnProperty(r);if(a&&!l||!a&&l||!Bp(t[r],e[r]))return!1}}return String(t)===String(e)}function kO(t,e){return t.findIndex(n=>Bp(n,e))}const Re=t=>at(t)?t:t==null?"":ze(t)||Et(t)&&(t.toString===IO||!ot(t.toString))?JSON.stringify(t,TO,2):String(t),TO=(t,e)=>e&&e.__v_isRef?TO(t,e.value):hp(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,s])=>(n[`${i} =>`]=s,n),{})}:Nb(e)?{[`Set(${e.size})`]:[...e.values()]}:Et(e)&&!ze(e)&&!xO(e)?String(e):e,Wn={},pp=[],nn=()=>{},Mz=()=>!1,$z=/^on[^a-z]/,Db=t=>$z.test(t),sE=t=>t.startsWith("onUpdate:"),qi=Object.assign,oE=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Az=Object.prototype.hasOwnProperty,Pt=(t,e)=>Az.call(t,e),ze=Array.isArray,hp=t=>Jm(t)==="[object Map]",Nb=t=>Jm(t)==="[object Set]",ju=t=>Jm(t)==="[object Date]",ot=t=>typeof t=="function",at=t=>typeof t=="string",rm=t=>typeof t=="symbol",Et=t=>t!==null&&typeof t=="object",am=t=>Et(t)&&ot(t.then)&&ot(t.catch),IO=Object.prototype.toString,Jm=t=>IO.call(t),Iv=t=>Jm(t).slice(8,-1),xO=t=>Jm(t)==="[object Object]",rE=t=>at(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,xv=iE(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Bb=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Lz=/-(\w)/g,Go=Bb(t=>t.replace(Lz,(e,n)=>n?n.toUpperCase():"")),Oz=/\B([A-Z])/g,xc=Bb(t=>t.replace(Oz,"-$1").toLowerCase()),eg=Bb(t=>t.charAt(0).toUpperCase()+t.slice(1)),Mv=Bb(t=>t?`on${eg(t)}`:""),lm=(t,e)=>!Object.is(t,e),$v=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Dy=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},cm=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let OI;const Pz=()=>OI||(OI=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let mo;class MO{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=mo,!e&&mo&&(this.index=(mo.scopes||(mo.scopes=[])).push(this)-1)}run(e){if(this.active){const n=mo;try{return mo=this,e()}finally{mo=n}}}on(){mo=this}off(){mo=this.parent}stop(e){if(this.active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this.active=!1}}}function Rz(t){return new MO(t)}function Vz(t,e=mo){e&&e.active&&e.effects.push(t)}function Fz(){return mo}function $O(t){mo&&mo.cleanups.push(t)}const aE=t=>{const e=new Set(t);return e.w=0,e.n=0,e},AO=t=>(t.w&wc)>0,LO=t=>(t.n&wc)>0,Dz=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=wc},Nz=t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const s=e[i];AO(s)&&!LO(s)?s.delete(t):e[n++]=s,s.w&=~wc,s.n&=~wc}e.length=n}},Y0=new WeakMap;let ef=0,wc=1;const Z0=30;let sr;const Vu=Symbol(""),X0=Symbol("");class lE{constructor(e,n=null,i){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Vz(this,i)}run(){if(!this.active)return this.fn();let e=sr,n=dc;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=sr,sr=this,dc=!0,wc=1<<++ef,ef<=Z0?Dz(this):PI(this),this.fn()}finally{ef<=Z0&&Nz(this),wc=1<<--ef,sr=this.parent,dc=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){sr===this?this.deferStop=!0:this.active&&(PI(this),this.onStop&&this.onStop(),this.active=!1)}}function PI(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let dc=!0;const OO=[];function hh(){OO.push(dc),dc=!1}function fh(){const t=OO.pop();dc=t===void 0?!0:t}function Eo(t,e,n){if(dc&&sr){let i=Y0.get(t);i||Y0.set(t,i=new Map);let s=i.get(n);s||i.set(n,s=aE()),PO(s)}}function PO(t,e){let n=!1;ef<=Z0?LO(t)||(t.n|=wc,n=!AO(t)):n=!t.has(sr),n&&(t.add(sr),sr.deps.push(t))}function Ka(t,e,n,i,s,o){const r=Y0.get(t);if(!r)return;let a=[];if(e==="clear")a=[...r.values()];else if(n==="length"&&ze(t)){const l=cm(i);r.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(r.get(n)),e){case"add":ze(t)?rE(n)&&a.push(r.get("length")):(a.push(r.get(Vu)),hp(t)&&a.push(r.get(X0)));break;case"delete":ze(t)||(a.push(r.get(Vu)),hp(t)&&a.push(r.get(X0)));break;case"set":hp(t)&&a.push(r.get(Vu));break}if(a.length===1)a[0]&&Q0(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);Q0(aE(l))}}function Q0(t,e){const n=ze(t)?t:[...t];for(const i of n)i.computed&&RI(i);for(const i of n)i.computed||RI(i)}function RI(t,e){(t!==sr||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Bz=iE("__proto__,__v_isRef,__isVue"),RO=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(rm)),zz=cE(),Hz=cE(!1,!0),Uz=cE(!0),VI=Wz();function Wz(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const i=en(this);for(let o=0,r=this.length;o<r;o++)Eo(i,"get",o+"");const s=i[e](...n);return s===-1||s===!1?i[e](...n.map(en)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){hh();const i=en(this)[e].apply(this,n);return fh(),i}}),t}function cE(t=!1,e=!1){return function(i,s,o){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&o===(t?e?rH:BO:e?NO:DO).get(i))return i;const r=ze(i);if(!t&&r&&Pt(VI,s))return Reflect.get(VI,s,o);const a=Reflect.get(i,s,o);return(rm(s)?RO.has(s):Bz(s))||(t||Eo(i,"get",s),e)?a:pn(a)?r&&rE(s)?a:a.value:Et(a)?t?mh(a):Yt(a):a}}const Gz=VO(),jz=VO(!0);function VO(t=!1){return function(n,i,s,o){let r=n[i];if(zp(r)&&pn(r)&&!pn(s))return!1;if(!t&&(!Ny(s)&&!zp(s)&&(r=en(r),s=en(s)),!ze(n)&&pn(r)&&!pn(s)))return r.value=s,!0;const a=ze(n)&&rE(i)?Number(i)<n.length:Pt(n,i),l=Reflect.set(n,i,s,o);return n===en(o)&&(a?lm(s,r)&&Ka(n,"set",i,s):Ka(n,"add",i,s)),l}}function qz(t,e){const n=Pt(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&n&&Ka(t,"delete",e,void 0),i}function Kz(t,e){const n=Reflect.has(t,e);return(!rm(e)||!RO.has(e))&&Eo(t,"has",e),n}function Yz(t){return Eo(t,"iterate",ze(t)?"length":Vu),Reflect.ownKeys(t)}const FO={get:zz,set:Gz,deleteProperty:qz,has:Kz,ownKeys:Yz},Zz={get:Uz,set(t,e){return!0},deleteProperty(t,e){return!0}},Xz=qi({},FO,{get:Hz,set:jz}),uE=t=>t,zb=t=>Reflect.getPrototypeOf(t);function Ig(t,e,n=!1,i=!1){t=t.__v_raw;const s=en(t),o=en(e);n||(e!==o&&Eo(s,"get",e),Eo(s,"get",o));const{has:r}=zb(s),a=i?uE:n?hE:um;if(r.call(s,e))return a(t.get(e));if(r.call(s,o))return a(t.get(o));t!==s&&t.get(e)}function xg(t,e=!1){const n=this.__v_raw,i=en(n),s=en(t);return e||(t!==s&&Eo(i,"has",t),Eo(i,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function Mg(t,e=!1){return t=t.__v_raw,!e&&Eo(en(t),"iterate",Vu),Reflect.get(t,"size",t)}function FI(t){t=en(t);const e=en(this);return zb(e).has.call(e,t)||(e.add(t),Ka(e,"add",t,t)),this}function DI(t,e){e=en(e);const n=en(this),{has:i,get:s}=zb(n);let o=i.call(n,t);o||(t=en(t),o=i.call(n,t));const r=s.call(n,t);return n.set(t,e),o?lm(e,r)&&Ka(n,"set",t,e):Ka(n,"add",t,e),this}function NI(t){const e=en(this),{has:n,get:i}=zb(e);let s=n.call(e,t);s||(t=en(t),s=n.call(e,t)),i&&i.call(e,t);const o=e.delete(t);return s&&Ka(e,"delete",t,void 0),o}function BI(){const t=en(this),e=t.size!==0,n=t.clear();return e&&Ka(t,"clear",void 0,void 0),n}function $g(t,e){return function(i,s){const o=this,r=o.__v_raw,a=en(r),l=e?uE:t?hE:um;return!t&&Eo(a,"iterate",Vu),r.forEach((c,u)=>i.call(s,l(c),l(u),o))}}function Ag(t,e,n){return function(...i){const s=this.__v_raw,o=en(s),r=hp(o),a=t==="entries"||t===Symbol.iterator&&r,l=t==="keys"&&r,c=s[t](...i),u=n?uE:e?hE:um;return!e&&Eo(o,"iterate",l?X0:Vu),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function vl(t){return function(...e){return t==="delete"?!1:this}}function Qz(){const t={get(o){return Ig(this,o)},get size(){return Mg(this)},has:xg,add:FI,set:DI,delete:NI,clear:BI,forEach:$g(!1,!1)},e={get(o){return Ig(this,o,!1,!0)},get size(){return Mg(this)},has:xg,add:FI,set:DI,delete:NI,clear:BI,forEach:$g(!1,!0)},n={get(o){return Ig(this,o,!0)},get size(){return Mg(this,!0)},has(o){return xg.call(this,o,!0)},add:vl("add"),set:vl("set"),delete:vl("delete"),clear:vl("clear"),forEach:$g(!0,!1)},i={get(o){return Ig(this,o,!0,!0)},get size(){return Mg(this,!0)},has(o){return xg.call(this,o,!0)},add:vl("add"),set:vl("set"),delete:vl("delete"),clear:vl("clear"),forEach:$g(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=Ag(o,!1,!1),n[o]=Ag(o,!0,!1),e[o]=Ag(o,!1,!0),i[o]=Ag(o,!0,!0)}),[t,n,e,i]}const[Jz,eH,tH,nH]=Qz();function dE(t,e){const n=e?t?nH:tH:t?eH:Jz;return(i,s,o)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?i:Reflect.get(Pt(n,s)&&s in i?n:i,s,o)}const iH={get:dE(!1,!1)},sH={get:dE(!1,!0)},oH={get:dE(!0,!1)},DO=new WeakMap,NO=new WeakMap,BO=new WeakMap,rH=new WeakMap;function aH(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function lH(t){return t.__v_skip||!Object.isExtensible(t)?0:aH(Iv(t))}function Yt(t){return zp(t)?t:pE(t,!1,FO,iH,DO)}function zO(t){return pE(t,!1,Xz,sH,NO)}function mh(t){return pE(t,!0,Zz,oH,BO)}function pE(t,e,n,i,s){if(!Et(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=s.get(t);if(o)return o;const r=lH(t);if(r===0)return t;const a=new Proxy(t,r===2?i:n);return s.set(t,a),a}function fp(t){return zp(t)?fp(t.__v_raw):!!(t&&t.__v_isReactive)}function zp(t){return!!(t&&t.__v_isReadonly)}function Ny(t){return!!(t&&t.__v_isShallow)}function HO(t){return fp(t)||zp(t)}function en(t){const e=t&&t.__v_raw;return e?en(e):t}function Fu(t){return Dy(t,"__v_skip",!0),t}const um=t=>Et(t)?Yt(t):t,hE=t=>Et(t)?mh(t):t;function UO(t){dc&&sr&&(t=en(t),PO(t.dep||(t.dep=aE())))}function fE(t,e){t=en(t),t.dep&&Q0(t.dep)}function pn(t){return!!(t&&t.__v_isRef===!0)}function F(t){return WO(t,!1)}function yn(t){return WO(t,!0)}function WO(t,e){return pn(t)?t:new cH(t,e)}class cH{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:en(e),this._value=n?e:um(e)}get value(){return UO(this),this._value}set value(e){const n=this.__v_isShallow||Ny(e)||zp(e);e=n?e:en(e),lm(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:um(e),fE(this))}}function $h(t){fE(t)}function p(t){return pn(t)?t.value:t}const uH={get:(t,e,n)=>p(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const s=t[e];return pn(s)&&!pn(n)?(s.value=n,!0):Reflect.set(t,e,n,i)}};function GO(t){return fp(t)?t:new Proxy(t,uH)}function Ei(t){const e=ze(t)?new Array(t.length):{};for(const n in t)e[n]=On(t,n);return e}class dH{constructor(e,n,i){this._object=e,this._key=n,this._defaultValue=i,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function On(t,e,n){const i=t[e];return pn(i)?i:new dH(t,e,n)}var jO;class pH{constructor(e,n,i,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[jO]=!1,this._dirty=!0,this.effect=new lE(e,()=>{this._dirty||(this._dirty=!0,fE(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const e=en(this);return UO(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}jO="__v_isReadonly";function qO(t,e,n=!1){let i,s;const o=ot(t);return o?(i=t,s=nn):(i=t.get,s=t.set),new pH(i,s,o||!s,n)}function hH(t,...e){}function pc(t,e,n,i){let s;try{s=i?t(...i):t()}catch(o){Hb(o,e,n)}return s}function Uo(t,e,n,i){if(ot(t)){const o=pc(t,e,n,i);return o&&am(o)&&o.catch(r=>{Hb(r,e,n)}),o}const s=[];for(let o=0;o<t.length;o++)s.push(Uo(t[o],e,n,i));return s}function Hb(t,e,n,i=!0){const s=e?e.vnode:null;if(e){let o=e.parent;const r=e.proxy,a=n;for(;o;){const c=o.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,r,a)===!1)return}o=o.parent}const l=e.appContext.config.errorHandler;if(l){pc(l,null,10,[t,r,a]);return}}fH(t,n,s,i)}function fH(t,e,n,i=!0){console.error(t)}let dm=!1,J0=!1;const ps=[];let Hr=0;const mp=[];let La=null,pu=0;const KO=Promise.resolve();let mE=null;function je(t){const e=mE||KO;return t?e.then(this?t.bind(this):t):e}function mH(t){let e=Hr+1,n=ps.length;for(;e<n;){const i=e+n>>>1;pm(ps[i])<t?e=i+1:n=i}return e}function gE(t){(!ps.length||!ps.includes(t,dm&&t.allowRecurse?Hr+1:Hr))&&(t.id==null?ps.push(t):ps.splice(mH(t.id),0,t),YO())}function YO(){!dm&&!J0&&(J0=!0,mE=KO.then(XO))}function gH(t){const e=ps.indexOf(t);e>Hr&&ps.splice(e,1)}function vH(t){ze(t)?mp.push(...t):(!La||!La.includes(t,t.allowRecurse?pu+1:pu))&&mp.push(t),YO()}function zI(t,e=dm?Hr+1:0){for(;e<ps.length;e++){const n=ps[e];n&&n.pre&&(ps.splice(e,1),e--,n())}}function ZO(t){if(mp.length){const e=[...new Set(mp)];if(mp.length=0,La){La.push(...e);return}for(La=e,La.sort((n,i)=>pm(n)-pm(i)),pu=0;pu<La.length;pu++)La[pu]();La=null,pu=0}}const pm=t=>t.id==null?1/0:t.id,yH=(t,e)=>{const n=pm(t)-pm(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function XO(t){J0=!1,dm=!0,ps.sort(yH);const e=nn;try{for(Hr=0;Hr<ps.length;Hr++){const n=ps[Hr];n&&n.active!==!1&&pc(n,null,14)}}finally{Hr=0,ps.length=0,ZO(),dm=!1,mE=null,(ps.length||mp.length)&&XO()}}function bH(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||Wn;let s=n;const o=e.startsWith("update:"),r=o&&e.slice(7);if(r&&r in i){const u=`${r==="modelValue"?"model":r}Modifiers`,{number:d,trim:h}=i[u]||Wn;h&&(s=n.map(f=>at(f)?f.trim():f)),d&&(s=n.map(cm))}let a,l=i[a=Mv(e)]||i[a=Mv(Go(e))];!l&&o&&(l=i[a=Mv(xc(e))]),l&&Uo(l,t,6,s);const c=i[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Uo(c,t,6,s)}}function QO(t,e,n=!1){const i=e.emitsCache,s=i.get(t);if(s!==void 0)return s;const o=t.emits;let r={},a=!1;if(!ot(t)){const l=c=>{const u=QO(c,e,!0);u&&(a=!0,qi(r,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!o&&!a?(Et(t)&&i.set(t,null),null):(ze(o)?o.forEach(l=>r[l]=null):qi(r,o),Et(t)&&i.set(t,r),r)}function Ub(t,e){return!t||!Db(e)?!1:(e=e.slice(2).replace(/Once$/,""),Pt(t,e[0].toLowerCase()+e.slice(1))||Pt(t,xc(e))||Pt(t,e))}let ts=null,Wb=null;function By(t){const e=ts;return ts=t,Wb=t&&t.type.__scopeId||null,e}function _H(t){Wb=t}function wH(){Wb=null}function ee(t,e=ts,n){if(!e||t._n)return t;const i=(...s)=>{i._d&&QI(-1);const o=By(e);let r;try{r=t(...s)}finally{By(o),i._d&&QI(1)}return r};return i._n=!0,i._c=!0,i._d=!0,i}function ew(t){const{type:e,vnode:n,proxy:i,withProxy:s,props:o,propsOptions:[r],slots:a,attrs:l,emit:c,render:u,renderCache:d,data:h,setupState:f,ctx:m,inheritAttrs:g}=t;let y,_;const C=By(t);try{if(n.shapeFlag&4){const S=s||i;y=Br(u.call(S,S,d,o,f,h,m)),_=l}else{const S=e;y=Br(S.length>1?S(o,{attrs:l,slots:a,emit:c}):S(o,null)),_=e.props?l:CH(l)}}catch(S){If.length=0,Hb(S,t,1),y=Z(Ms)}let w=y;if(_&&g!==!1){const S=Object.keys(_),{shapeFlag:E}=w;S.length&&E&7&&(r&&S.some(sE)&&(_=SH(_,r)),w=Za(w,_))}return n.dirs&&(w=Za(w),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&(w.transition=n.transition),y=w,By(C),y}const CH=t=>{let e;for(const n in t)(n==="class"||n==="style"||Db(n))&&((e||(e={}))[n]=t[n]);return e},SH=(t,e)=>{const n={};for(const i in t)(!sE(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function EH(t,e,n){const{props:i,children:s,component:o}=t,{props:r,children:a,patchFlag:l}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?HI(i,r,c):!!r;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(r[h]!==i[h]&&!Ub(c,h))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===r?!1:i?r?HI(i,r,c):!0:!!r;return!1}function HI(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let s=0;s<i.length;s++){const o=i[s];if(e[o]!==t[o]&&!Ub(n,o))return!0}return!1}function kH({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const TH=t=>t.__isSuspense;function IH(t,e){e&&e.pendingBranch?ze(t)?e.effects.push(...t):e.effects.push(t):vH(t)}function xt(t,e){if(zi){let n=zi.provides;const i=zi.parent&&zi.parent.provides;i===n&&(n=zi.provides=Object.create(i)),n[t]=e}}function qe(t,e,n=!1){const i=zi||ts;if(i){const s=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&ot(e)?e.call(i.proxy):e}}function Co(t,e){return Gb(t,null,e)}function xH(t,e){return Gb(t,null,{flush:"post"})}const Lg={};function Ce(t,e,n){return Gb(t,e,n)}function Gb(t,e,{immediate:n,deep:i,flush:s,onTrack:o,onTrigger:r}=Wn){const a=zi;let l,c=!1,u=!1;if(pn(t)?(l=()=>t.value,c=Ny(t)):fp(t)?(l=()=>t,i=!0):ze(t)?(u=!0,c=t.some(w=>fp(w)||Ny(w)),l=()=>t.map(w=>{if(pn(w))return w.value;if(fp(w))return ku(w);if(ot(w))return pc(w,a,2)})):ot(t)?e?l=()=>pc(t,a,2):l=()=>{if(!(a&&a.isUnmounted))return d&&d(),Uo(t,a,3,[h])}:l=nn,e&&i){const w=l;l=()=>ku(w())}let d,h=w=>{d=_.onStop=()=>{pc(w,a,4)}},f;if(vm)if(h=nn,e?n&&Uo(e,a,3,[l(),u?[]:void 0,h]):l(),s==="sync"){const w=g6();f=w.__watcherHandles||(w.__watcherHandles=[])}else return nn;let m=u?new Array(t.length).fill(Lg):Lg;const g=()=>{if(_.active)if(e){const w=_.run();(i||c||(u?w.some((S,E)=>lm(S,m[E])):lm(w,m)))&&(d&&d(),Uo(e,a,3,[w,m===Lg?void 0:u&&m[0]===Lg?[]:m,h]),m=w)}else _.run()};g.allowRecurse=!!e;let y;s==="sync"?y=g:s==="post"?y=()=>qs(g,a&&a.suspense):(g.pre=!0,a&&(g.id=a.uid),y=()=>gE(g));const _=new lE(l,y);e?n?g():m=_.run():s==="post"?qs(_.run.bind(_),a&&a.suspense):_.run();const C=()=>{_.stop(),a&&a.scope&&oE(a.scope.effects,_)};return f&&f.push(C),C}function MH(t,e,n){const i=this.proxy,s=at(t)?t.includes(".")?JO(i,t):()=>i[t]:t.bind(i,i);let o;ot(e)?o=e:(o=e.handler,n=e);const r=zi;Hp(this);const a=Gb(s,o.bind(i),n);return r?Hp(r):Du(),a}function JO(t,e){const n=e.split(".");return()=>{let i=t;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}function ku(t,e){if(!Et(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),pn(t))ku(t.value,e);else if(ze(t))for(let n=0;n<t.length;n++)ku(t[n],e);else if(Nb(t)||hp(t))t.forEach(n=>{ku(n,e)});else if(xO(t))for(const n in t)ku(t[n],e);return t}function eP(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ft(()=>{t.isMounted=!0}),Pn(()=>{t.isUnmounting=!0}),t}const To=[Function,Array],$H={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:To,onEnter:To,onAfterEnter:To,onEnterCancelled:To,onBeforeLeave:To,onLeave:To,onAfterLeave:To,onLeaveCancelled:To,onBeforeAppear:To,onAppear:To,onAfterAppear:To,onAppearCancelled:To},setup(t,{slots:e}){const n=vt(),i=eP();let s;return()=>{const o=e.default&&vE(e.default(),!0);if(!o||!o.length)return;let r=o[0];if(o.length>1){for(const g of o)if(g.type!==Ms){r=g;break}}const a=en(t),{mode:l}=a;if(i.isLeaving)return tw(r);const c=UI(r);if(!c)return tw(r);const u=hm(c,a,i,n);fm(c,u);const d=n.subTree,h=d&&UI(d);let f=!1;const{getTransitionKey:m}=c.type;if(m){const g=m();s===void 0?s=g:g!==s&&(s=g,f=!0)}if(h&&h.type!==Ms&&(!hu(c,h)||f)){const g=hm(h,a,i,n);if(fm(h,g),l==="out-in")return i.isLeaving=!0,g.afterLeave=()=>{i.isLeaving=!1,n.update.active!==!1&&n.update()},tw(r);l==="in-out"&&c.type!==Ms&&(g.delayLeave=(y,_,C)=>{const w=nP(i,h);w[String(h.key)]=h,y._leaveCb=()=>{_(),y._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=C})}return r}}},tP=$H;function nP(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function hm(t,e,n,i){const{appear:s,mode:o,persisted:r=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:d,onLeave:h,onAfterLeave:f,onLeaveCancelled:m,onBeforeAppear:g,onAppear:y,onAfterAppear:_,onAppearCancelled:C}=e,w=String(t.key),S=nP(n,t),E=($,L)=>{$&&Uo($,i,9,L)},k=($,L)=>{const O=L[1];E($,L),ze($)?$.every(B=>B.length<=1)&&O():$.length<=1&&O()},A={mode:o,persisted:r,beforeEnter($){let L=a;if(!n.isMounted)if(s)L=g||a;else return;$._leaveCb&&$._leaveCb(!0);const O=S[w];O&&hu(t,O)&&O.el._leaveCb&&O.el._leaveCb(),E(L,[$])},enter($){let L=l,O=c,B=u;if(!n.isMounted)if(s)L=y||l,O=_||c,B=C||u;else return;let V=!1;const P=$._enterCb=z=>{V||(V=!0,z?E(B,[$]):E(O,[$]),A.delayedLeave&&A.delayedLeave(),$._enterCb=void 0)};L?k(L,[$,P]):P()},leave($,L){const O=String(t.key);if($._enterCb&&$._enterCb(!0),n.isUnmounting)return L();E(d,[$]);let B=!1;const V=$._leaveCb=P=>{B||(B=!0,L(),P?E(m,[$]):E(f,[$]),$._leaveCb=void 0,S[O]===t&&delete S[O])};S[O]=t,h?k(h,[$,V]):V()},clone($){return hm($,e,n,i)}};return A}function tw(t){if(jb(t))return t=Za(t),t.children=null,t}function UI(t){return jb(t)?t.children?t.children[0]:void 0:t}function fm(t,e){t.shapeFlag&6&&t.component?fm(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function vE(t,e=!1,n){let i=[],s=0;for(let o=0;o<t.length;o++){let r=t[o];const a=n==null?r.key:String(n)+String(r.key!=null?r.key:o);r.type===Ye?(r.patchFlag&128&&s++,i=i.concat(vE(r.children,e,a))):(e||r.type!==Ms)&&i.push(a!=null?Za(r,{key:a}):r)}if(s>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}function J(t){return ot(t)?{setup:t,name:t.name}:t}const Sf=t=>!!t.type.__asyncLoader,jb=t=>t.type.__isKeepAlive;function AH(t,e){sP(t,"a",e)}function iP(t,e){sP(t,"da",e)}function sP(t,e,n=zi){const i=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(qb(e,i,n),n){let s=n.parent;for(;s&&s.parent;)jb(s.parent.vnode)&&LH(i,e,n,s),s=s.parent}}function LH(t,e,n,i){const s=qb(e,t,i,!0);Mc(()=>{oE(i[e],s)},n)}function qb(t,e,n=zi,i=!1){if(n){const s=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;hh(),Hp(n);const a=Uo(e,n,t,r);return Du(),fh(),a});return i?s.unshift(o):s.push(o),o}}const al=t=>(e,n=zi)=>(!vm||t==="sp")&&qb(t,(...i)=>e(...i),n),Kb=al("bm"),ft=al("m"),oP=al("bu"),ll=al("u"),Pn=al("bum"),Mc=al("um"),OH=al("sp"),PH=al("rtg"),RH=al("rtc");function VH(t,e=zi){qb("ec",t,e)}function ct(t,e){const n=ts;if(n===null)return t;const i=Xb(n)||n.proxy,s=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[r,a,l,c=Wn]=e[o];r&&(ot(r)&&(r={mounted:r,updated:r}),r.deep&&ku(a),s.push({dir:r,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c}))}return t}function Fc(t,e,n,i){const s=t.dirs,o=e&&e.dirs;for(let r=0;r<s.length;r++){const a=s[r];o&&(a.oldValue=o[r].value);let l=a.dir[i];l&&(hh(),Uo(l,n,8,[t.el,a,t,e]),fh())}}const yE="components",FH="directives";function pt(t,e){return bE(yE,t,!0,e)||t}const rP=Symbol();function It(t){return at(t)?bE(yE,t,!1)||t:t||rP}function mm(t){return bE(FH,t)}function bE(t,e,n=!0,i=!1){const s=ts||zi;if(s){const o=s.type;if(t===yE){const a=h6(o,!1);if(a&&(a===e||a===Go(e)||a===eg(Go(e))))return o}const r=WI(s[t]||o[t],e)||WI(s.appContext[t],e);return!r&&i?o:r}}function WI(t,e){return t&&(t[e]||t[Go(e)]||t[eg(Go(e))])}function Ot(t,e,n,i){let s;const o=n&&n[i];if(ze(t)||at(t)){s=new Array(t.length);for(let r=0,a=t.length;r<a;r++)s[r]=e(t[r],r,void 0,o&&o[r])}else if(typeof t=="number"){s=new Array(t);for(let r=0;r<t;r++)s[r]=e(r+1,r,void 0,o&&o[r])}else if(Et(t))if(t[Symbol.iterator])s=Array.from(t,(r,a)=>e(r,a,void 0,o&&o[a]));else{const r=Object.keys(t);s=new Array(r.length);for(let a=0,l=r.length;a<l;a++){const c=r[a];s[a]=e(t[c],c,a,o&&o[a])}}else s=[];return n&&(n[i]=s),s}function Ya(t,e){for(let n=0;n<e.length;n++){const i=e[n];if(ze(i))for(let s=0;s<i.length;s++)t[i[s].name]=i[s].fn;else i&&(t[i.name]=i.key?(...s)=>{const o=i.fn(...s);return o&&(o.key=i.key),o}:i.fn)}return t}function me(t,e,n={},i,s){if(ts.isCE||ts.parent&&Sf(ts.parent)&&ts.parent.isCE)return e!=="default"&&(n.name=e),Z("slot",n,i&&i());let o=t[e];o&&o._c&&(o._d=!1),I();const r=o&&aP(o(n)),a=ce(Ye,{key:n.key||r&&r.key||`_${e}`},r||(i?i():[]),r&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function aP(t){return t.some(e=>$n(e)?!(e.type===Ms||e.type===Ye&&!aP(e.children)):!0)?t:null}function DH(t,e){const n={};for(const i in t)n[e&&/[A-Z]/.test(i)?`on:${i}`:Mv(i)]=t[i];return n}const e1=t=>t?yP(t)?Xb(t)||t.proxy:e1(t.parent):null,Ef=qi(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>e1(t.parent),$root:t=>e1(t.root),$emit:t=>t.emit,$options:t=>_E(t),$forceUpdate:t=>t.f||(t.f=()=>gE(t.update)),$nextTick:t=>t.n||(t.n=je.bind(t.proxy)),$watch:t=>MH.bind(t)}),nw=(t,e)=>t!==Wn&&!t.__isScriptSetup&&Pt(t,e),NH={get({_:t},e){const{ctx:n,setupState:i,data:s,props:o,accessCache:r,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const f=r[e];if(f!==void 0)switch(f){case 1:return i[e];case 2:return s[e];case 4:return n[e];case 3:return o[e]}else{if(nw(i,e))return r[e]=1,i[e];if(s!==Wn&&Pt(s,e))return r[e]=2,s[e];if((c=t.propsOptions[0])&&Pt(c,e))return r[e]=3,o[e];if(n!==Wn&&Pt(n,e))return r[e]=4,n[e];t1&&(r[e]=0)}}const u=Ef[e];let d,h;if(u)return e==="$attrs"&&Eo(t,"get",e),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==Wn&&Pt(n,e))return r[e]=4,n[e];if(h=l.config.globalProperties,Pt(h,e))return h[e]},set({_:t},e,n){const{data:i,setupState:s,ctx:o}=t;return nw(s,e)?(s[e]=n,!0):i!==Wn&&Pt(i,e)?(i[e]=n,!0):Pt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:s,propsOptions:o}},r){let a;return!!n[r]||t!==Wn&&Pt(t,r)||nw(e,r)||(a=o[0])&&Pt(a,r)||Pt(i,r)||Pt(Ef,r)||Pt(s.config.globalProperties,r)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Pt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let t1=!0;function BH(t){const e=_E(t),n=t.proxy,i=t.ctx;t1=!1,e.beforeCreate&&GI(e.beforeCreate,t,"bc");const{data:s,computed:o,methods:r,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:m,activated:g,deactivated:y,beforeDestroy:_,beforeUnmount:C,destroyed:w,unmounted:S,render:E,renderTracked:k,renderTriggered:A,errorCaptured:$,serverPrefetch:L,expose:O,inheritAttrs:B,components:V,directives:P,filters:z}=e;if(c&&zH(c,i,null,t.appContext.config.unwrapInjectedRef),r)for(const R in r){const D=r[R];ot(D)&&(i[R]=D.bind(n))}if(s){const R=s.call(n,n);Et(R)&&(t.data=Yt(R))}if(t1=!0,o)for(const R in o){const D=o[R],N=ot(D)?D.bind(n,n):ot(D.get)?D.get.bind(n,n):nn,K=!ot(D)&&ot(D.set)?D.set.bind(n):nn,ie=T({get:N,set:K});Object.defineProperty(i,R,{enumerable:!0,configurable:!0,get:()=>ie.value,set:Y=>ie.value=Y})}if(a)for(const R in a)lP(a[R],i,n,R);if(l){const R=ot(l)?l.call(n):l;Reflect.ownKeys(R).forEach(D=>{xt(D,R[D])})}u&&GI(u,t,"c");function W(R,D){ze(D)?D.forEach(N=>R(N.bind(n))):D&&R(D.bind(n))}if(W(Kb,d),W(ft,h),W(oP,f),W(ll,m),W(AH,g),W(iP,y),W(VH,$),W(RH,k),W(PH,A),W(Pn,C),W(Mc,S),W(OH,L),ze(O))if(O.length){const R=t.exposed||(t.exposed={});O.forEach(D=>{Object.defineProperty(R,D,{get:()=>n[D],set:N=>n[D]=N})})}else t.exposed||(t.exposed={});E&&t.render===nn&&(t.render=E),B!=null&&(t.inheritAttrs=B),V&&(t.components=V),P&&(t.directives=P)}function zH(t,e,n=nn,i=!1){ze(t)&&(t=n1(t));for(const s in t){const o=t[s];let r;Et(o)?"default"in o?r=qe(o.from||s,o.default,!0):r=qe(o.from||s):r=qe(o),pn(r)&&i?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):e[s]=r}}function GI(t,e,n){Uo(ze(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function lP(t,e,n,i){const s=i.includes(".")?JO(n,i):()=>n[i];if(at(t)){const o=e[t];ot(o)&&Ce(s,o)}else if(ot(t))Ce(s,t.bind(n));else if(Et(t))if(ze(t))t.forEach(o=>lP(o,e,n,i));else{const o=ot(t.handler)?t.handler.bind(n):e[t.handler];ot(o)&&Ce(s,o,t)}}function _E(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:r}}=t.appContext,a=o.get(e);let l;return a?l=a:!s.length&&!n&&!i?l=e:(l={},s.length&&s.forEach(c=>zy(l,c,r,!0)),zy(l,e,r)),Et(e)&&o.set(e,l),l}function zy(t,e,n,i=!1){const{mixins:s,extends:o}=e;o&&zy(t,o,n,!0),s&&s.forEach(r=>zy(t,r,n,!0));for(const r in e)if(!(i&&r==="expose")){const a=HH[r]||n&&n[r];t[r]=a?a(t[r],e[r]):e[r]}return t}const HH={data:jI,props:Gc,emits:Gc,methods:Gc,computed:Gc,beforeCreate:bs,created:bs,beforeMount:bs,mounted:bs,beforeUpdate:bs,updated:bs,beforeDestroy:bs,beforeUnmount:bs,destroyed:bs,unmounted:bs,activated:bs,deactivated:bs,errorCaptured:bs,serverPrefetch:bs,components:Gc,directives:Gc,watch:WH,provide:jI,inject:UH};function jI(t,e){return e?t?function(){return qi(ot(t)?t.call(this,this):t,ot(e)?e.call(this,this):e)}:e:t}function UH(t,e){return Gc(n1(t),n1(e))}function n1(t){if(ze(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function bs(t,e){return t?[...new Set([].concat(t,e))]:e}function Gc(t,e){return t?qi(qi(Object.create(null),t),e):e}function WH(t,e){if(!t)return e;if(!e)return t;const n=qi(Object.create(null),t);for(const i in e)n[i]=bs(t[i],e[i]);return n}function GH(t,e,n,i=!1){const s={},o={};Dy(o,Yb,1),t.propsDefaults=Object.create(null),cP(t,e,s,o);for(const r in t.propsOptions[0])r in s||(s[r]=void 0);n?t.props=i?s:zO(s):t.type.props?t.props=s:t.props=o,t.attrs=o}function jH(t,e,n,i){const{props:s,attrs:o,vnode:{patchFlag:r}}=t,a=en(s),[l]=t.propsOptions;let c=!1;if((i||r>0)&&!(r&16)){if(r&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(Ub(t.emitsOptions,h))continue;const f=e[h];if(l)if(Pt(o,h))f!==o[h]&&(o[h]=f,c=!0);else{const m=Go(h);s[m]=i1(l,a,m,f,t,!1)}else f!==o[h]&&(o[h]=f,c=!0)}}}else{cP(t,e,s,o)&&(c=!0);let u;for(const d in a)(!e||!Pt(e,d)&&((u=xc(d))===d||!Pt(e,u)))&&(l?n&&(n[d]!==void 0||n[u]!==void 0)&&(s[d]=i1(l,a,d,void 0,t,!0)):delete s[d]);if(o!==a)for(const d in o)(!e||!Pt(e,d))&&(delete o[d],c=!0)}c&&Ka(t,"set","$attrs")}function cP(t,e,n,i){const[s,o]=t.propsOptions;let r=!1,a;if(e)for(let l in e){if(xv(l))continue;const c=e[l];let u;s&&Pt(s,u=Go(l))?!o||!o.includes(u)?n[u]=c:(a||(a={}))[u]=c:Ub(t.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,r=!0)}if(o){const l=en(n),c=a||Wn;for(let u=0;u<o.length;u++){const d=o[u];n[d]=i1(s,l,d,c[d],t,!Pt(c,d))}}return r}function i1(t,e,n,i,s,o){const r=t[n];if(r!=null){const a=Pt(r,"default");if(a&&i===void 0){const l=r.default;if(r.type!==Function&&ot(l)){const{propsDefaults:c}=s;n in c?i=c[n]:(Hp(s),i=c[n]=l.call(null,e),Du())}else i=l}r[0]&&(o&&!a?i=!1:r[1]&&(i===""||i===xc(n))&&(i=!0))}return i}function uP(t,e,n=!1){const i=e.propsCache,s=i.get(t);if(s)return s;const o=t.props,r={},a=[];let l=!1;if(!ot(t)){const u=d=>{l=!0;const[h,f]=uP(d,e,!0);qi(r,h),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!o&&!l)return Et(t)&&i.set(t,pp),pp;if(ze(o))for(let u=0;u<o.length;u++){const d=Go(o[u]);qI(d)&&(r[d]=Wn)}else if(o)for(const u in o){const d=Go(u);if(qI(d)){const h=o[u],f=r[d]=ze(h)||ot(h)?{type:h}:Object.assign({},h);if(f){const m=ZI(Boolean,f.type),g=ZI(String,f.type);f[0]=m>-1,f[1]=g<0||m<g,(m>-1||Pt(f,"default"))&&a.push(d)}}}const c=[r,a];return Et(t)&&i.set(t,c),c}function qI(t){return t[0]!=="$"}function KI(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function YI(t,e){return KI(t)===KI(e)}function ZI(t,e){return ze(e)?e.findIndex(n=>YI(n,t)):ot(e)&&YI(e,t)?0:-1}const dP=t=>t[0]==="_"||t==="$stable",wE=t=>ze(t)?t.map(Br):[Br(t)],qH=(t,e,n)=>{if(e._n)return e;const i=ee((...s)=>wE(e(...s)),n);return i._c=!1,i},pP=(t,e,n)=>{const i=t._ctx;for(const s in t){if(dP(s))continue;const o=t[s];if(ot(o))e[s]=qH(s,o,i);else if(o!=null){const r=wE(o);e[s]=()=>r}}},hP=(t,e)=>{const n=wE(e);t.slots.default=()=>n},KH=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=en(e),Dy(e,"_",n)):pP(e,t.slots={})}else t.slots={},e&&hP(t,e);Dy(t.slots,Yb,1)},YH=(t,e,n)=>{const{vnode:i,slots:s}=t;let o=!0,r=Wn;if(i.shapeFlag&32){const a=e._;a?n&&a===1?o=!1:(qi(s,e),!n&&a===1&&delete s._):(o=!e.$stable,pP(e,s)),r=e}else e&&(hP(t,e),r={default:1});if(o)for(const a in s)!dP(a)&&!(a in r)&&delete s[a]};function fP(){return{app:null,config:{isNativeTag:Mz,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ZH=0;function XH(t,e){return function(i,s=null){ot(i)||(i=Object.assign({},i)),s!=null&&!Et(s)&&(s=null);const o=fP(),r=new Set;let a=!1;const l=o.app={_uid:ZH++,_component:i,_props:s,_container:null,_context:o,_instance:null,version:v6,get config(){return o.config},set config(c){},use(c,...u){return r.has(c)||(c&&ot(c.install)?(r.add(c),c.install(l,...u)):ot(c)&&(r.add(c),c(l,...u))),l},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),l},component(c,u){return u?(o.components[c]=u,l):o.components[c]},directive(c,u){return u?(o.directives[c]=u,l):o.directives[c]},mount(c,u,d){if(!a){const h=Z(i,s);return h.appContext=o,u&&e?e(h,c):t(h,c,d),a=!0,l._container=c,c.__vue_app__=l,Xb(h.component)||h.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return o.provides[c]=u,l}};return l}}function s1(t,e,n,i,s=!1){if(ze(t)){t.forEach((h,f)=>s1(h,e&&(ze(e)?e[f]:e),n,i,s));return}if(Sf(i)&&!s)return;const o=i.shapeFlag&4?Xb(i.component)||i.component.proxy:i.el,r=s?null:o,{i:a,r:l}=t,c=e&&e.r,u=a.refs===Wn?a.refs={}:a.refs,d=a.setupState;if(c!=null&&c!==l&&(at(c)?(u[c]=null,Pt(d,c)&&(d[c]=null)):pn(c)&&(c.value=null)),ot(l))pc(l,a,12,[r,u]);else{const h=at(l),f=pn(l);if(h||f){const m=()=>{if(t.f){const g=h?Pt(d,l)?d[l]:u[l]:l.value;s?ze(g)&&oE(g,o):ze(g)?g.includes(o)||g.push(o):h?(u[l]=[o],Pt(d,l)&&(d[l]=u[l])):(l.value=[o],t.k&&(u[t.k]=l.value))}else h?(u[l]=r,Pt(d,l)&&(d[l]=r)):f&&(l.value=r,t.k&&(u[t.k]=r))};r?(m.id=-1,qs(m,n)):m()}}}const qs=IH;function QH(t){return JH(t)}function JH(t,e){const n=Pz();n.__VUE__=!0;const{insert:i,remove:s,patchProp:o,createElement:r,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=nn,insertStaticContent:m}=t,g=(Q,se,fe,Me=null,Oe=null,pe=null,Le=!1,be=null,Pe=!!se.dynamicChildren)=>{if(Q===se)return;Q&&!hu(Q,se)&&(Me=le(Q),Y(Q,Oe,pe,!0),Q=null),se.patchFlag===-2&&(Pe=!1,se.dynamicChildren=null);const{type:Ee,ref:he,shapeFlag:Ne}=se;switch(Ee){case gh:y(Q,se,fe,Me);break;case Ms:_(Q,se,fe,Me);break;case Tf:Q==null&&C(se,fe,Me,Le);break;case Ye:V(Q,se,fe,Me,Oe,pe,Le,be,Pe);break;default:Ne&1?E(Q,se,fe,Me,Oe,pe,Le,be,Pe):Ne&6?P(Q,se,fe,Me,Oe,pe,Le,be,Pe):(Ne&64||Ne&128)&&Ee.process(Q,se,fe,Me,Oe,pe,Le,be,Pe,de)}he!=null&&Oe&&s1(he,Q&&Q.ref,pe,se||Q,!se)},y=(Q,se,fe,Me)=>{if(Q==null)i(se.el=a(se.children),fe,Me);else{const Oe=se.el=Q.el;se.children!==Q.children&&c(Oe,se.children)}},_=(Q,se,fe,Me)=>{Q==null?i(se.el=l(se.children||""),fe,Me):se.el=Q.el},C=(Q,se,fe,Me)=>{[Q.el,Q.anchor]=m(Q.children,se,fe,Me,Q.el,Q.anchor)},w=({el:Q,anchor:se},fe,Me)=>{let Oe;for(;Q&&Q!==se;)Oe=h(Q),i(Q,fe,Me),Q=Oe;i(se,fe,Me)},S=({el:Q,anchor:se})=>{let fe;for(;Q&&Q!==se;)fe=h(Q),s(Q),Q=fe;s(se)},E=(Q,se,fe,Me,Oe,pe,Le,be,Pe)=>{Le=Le||se.type==="svg",Q==null?k(se,fe,Me,Oe,pe,Le,be,Pe):L(Q,se,Oe,pe,Le,be,Pe)},k=(Q,se,fe,Me,Oe,pe,Le,be)=>{let Pe,Ee;const{type:he,props:Ne,shapeFlag:Be,transition:Qe,dirs:ut}=Q;if(Pe=Q.el=r(Q.type,pe,Ne&&Ne.is,Ne),Be&8?u(Pe,Q.children):Be&16&&$(Q.children,Pe,null,Me,Oe,pe&&he!=="foreignObject",Le,be),ut&&Fc(Q,null,Me,"created"),Ne){for(const it in Ne)it!=="value"&&!xv(it)&&o(Pe,it,null,Ne[it],pe,Q.children,Me,Oe,Te);"value"in Ne&&o(Pe,"value",null,Ne.value),(Ee=Ne.onVnodeBeforeMount)&&xr(Ee,Me,Q)}A(Pe,Q,Q.scopeId,Le,Me),ut&&Fc(Q,null,Me,"beforeMount");const bt=(!Oe||Oe&&!Oe.pendingBranch)&&Qe&&!Qe.persisted;bt&&Qe.beforeEnter(Pe),i(Pe,se,fe),((Ee=Ne&&Ne.onVnodeMounted)||bt||ut)&&qs(()=>{Ee&&xr(Ee,Me,Q),bt&&Qe.enter(Pe),ut&&Fc(Q,null,Me,"mounted")},Oe)},A=(Q,se,fe,Me,Oe)=>{if(fe&&f(Q,fe),Me)for(let pe=0;pe<Me.length;pe++)f(Q,Me[pe]);if(Oe){let pe=Oe.subTree;if(se===pe){const Le=Oe.vnode;A(Q,Le,Le.scopeId,Le.slotScopeIds,Oe.parent)}}},$=(Q,se,fe,Me,Oe,pe,Le,be,Pe=0)=>{for(let Ee=Pe;Ee<Q.length;Ee++){const he=Q[Ee]=be?Yl(Q[Ee]):Br(Q[Ee]);g(null,he,se,fe,Me,Oe,pe,Le,be)}},L=(Q,se,fe,Me,Oe,pe,Le)=>{const be=se.el=Q.el;let{patchFlag:Pe,dynamicChildren:Ee,dirs:he}=se;Pe|=Q.patchFlag&16;const Ne=Q.props||Wn,Be=se.props||Wn;let Qe;fe&&Dc(fe,!1),(Qe=Be.onVnodeBeforeUpdate)&&xr(Qe,fe,se,Q),he&&Fc(se,Q,fe,"beforeUpdate"),fe&&Dc(fe,!0);const ut=Oe&&se.type!=="foreignObject";if(Ee?O(Q.dynamicChildren,Ee,be,fe,Me,ut,pe):Le||D(Q,se,be,null,fe,Me,ut,pe,!1),Pe>0){if(Pe&16)B(be,se,Ne,Be,fe,Me,Oe);else if(Pe&2&&Ne.class!==Be.class&&o(be,"class",null,Be.class,Oe),Pe&4&&o(be,"style",Ne.style,Be.style,Oe),Pe&8){const bt=se.dynamicProps;for(let it=0;it<bt.length;it++){const X=bt[it],ue=Ne[X],$e=Be[X];($e!==ue||X==="value")&&o(be,X,ue,$e,Oe,Q.children,fe,Me,Te)}}Pe&1&&Q.children!==se.children&&u(be,se.children)}else!Le&&Ee==null&&B(be,se,Ne,Be,fe,Me,Oe);((Qe=Be.onVnodeUpdated)||he)&&qs(()=>{Qe&&xr(Qe,fe,se,Q),he&&Fc(se,Q,fe,"updated")},Me)},O=(Q,se,fe,Me,Oe,pe,Le)=>{for(let be=0;be<se.length;be++){const Pe=Q[be],Ee=se[be],he=Pe.el&&(Pe.type===Ye||!hu(Pe,Ee)||Pe.shapeFlag&70)?d(Pe.el):fe;g(Pe,Ee,he,null,Me,Oe,pe,Le,!0)}},B=(Q,se,fe,Me,Oe,pe,Le)=>{if(fe!==Me){if(fe!==Wn)for(const be in fe)!xv(be)&&!(be in Me)&&o(Q,be,fe[be],null,Le,se.children,Oe,pe,Te);for(const be in Me){if(xv(be))continue;const Pe=Me[be],Ee=fe[be];Pe!==Ee&&be!=="value"&&o(Q,be,Ee,Pe,Le,se.children,Oe,pe,Te)}"value"in Me&&o(Q,"value",fe.value,Me.value)}},V=(Q,se,fe,Me,Oe,pe,Le,be,Pe)=>{const Ee=se.el=Q?Q.el:a(""),he=se.anchor=Q?Q.anchor:a("");let{patchFlag:Ne,dynamicChildren:Be,slotScopeIds:Qe}=se;Qe&&(be=be?be.concat(Qe):Qe),Q==null?(i(Ee,fe,Me),i(he,fe,Me),$(se.children,fe,he,Oe,pe,Le,be,Pe)):Ne>0&&Ne&64&&Be&&Q.dynamicChildren?(O(Q.dynamicChildren,Be,fe,Oe,pe,Le,be),(se.key!=null||Oe&&se===Oe.subTree)&&CE(Q,se,!0)):D(Q,se,fe,he,Oe,pe,Le,be,Pe)},P=(Q,se,fe,Me,Oe,pe,Le,be,Pe)=>{se.slotScopeIds=be,Q==null?se.shapeFlag&512?Oe.ctx.activate(se,fe,Me,Le,Pe):z(se,fe,Me,Oe,pe,Le,Pe):U(Q,se,Pe)},z=(Q,se,fe,Me,Oe,pe,Le)=>{const be=Q.component=c6(Q,Me,Oe);if(jb(Q)&&(be.ctx.renderer=de),u6(be),be.asyncDep){if(Oe&&Oe.registerDep(be,W),!Q.el){const Pe=be.subTree=Z(Ms);_(null,Pe,se,fe)}return}W(be,Q,se,fe,Oe,pe,Le)},U=(Q,se,fe)=>{const Me=se.component=Q.component;if(EH(Q,se,fe))if(Me.asyncDep&&!Me.asyncResolved){R(Me,se,fe);return}else Me.next=se,gH(Me.update),Me.update();else se.el=Q.el,Me.vnode=se},W=(Q,se,fe,Me,Oe,pe,Le)=>{const be=()=>{if(Q.isMounted){let{next:he,bu:Ne,u:Be,parent:Qe,vnode:ut}=Q,bt=he,it;Dc(Q,!1),he?(he.el=ut.el,R(Q,he,Le)):he=ut,Ne&&$v(Ne),(it=he.props&&he.props.onVnodeBeforeUpdate)&&xr(it,Qe,he,ut),Dc(Q,!0);const X=ew(Q),ue=Q.subTree;Q.subTree=X,g(ue,X,d(ue.el),le(ue),Q,Oe,pe),he.el=X.el,bt===null&&kH(Q,X.el),Be&&qs(Be,Oe),(it=he.props&&he.props.onVnodeUpdated)&&qs(()=>xr(it,Qe,he,ut),Oe)}else{let he;const{el:Ne,props:Be}=se,{bm:Qe,m:ut,parent:bt}=Q,it=Sf(se);if(Dc(Q,!1),Qe&&$v(Qe),!it&&(he=Be&&Be.onVnodeBeforeMount)&&xr(he,bt,se),Dc(Q,!0),Ne&&He){const X=()=>{Q.subTree=ew(Q),He(Ne,Q.subTree,Q,Oe,null)};it?se.type.__asyncLoader().then(()=>!Q.isUnmounted&&X()):X()}else{const X=Q.subTree=ew(Q);g(null,X,fe,Me,Q,Oe,pe),se.el=X.el}if(ut&&qs(ut,Oe),!it&&(he=Be&&Be.onVnodeMounted)){const X=se;qs(()=>xr(he,bt,X),Oe)}(se.shapeFlag&256||bt&&Sf(bt.vnode)&&bt.vnode.shapeFlag&256)&&Q.a&&qs(Q.a,Oe),Q.isMounted=!0,se=fe=Me=null}},Pe=Q.effect=new lE(be,()=>gE(Ee),Q.scope),Ee=Q.update=()=>Pe.run();Ee.id=Q.uid,Dc(Q,!0),Ee()},R=(Q,se,fe)=>{se.component=Q;const Me=Q.vnode.props;Q.vnode=se,Q.next=null,jH(Q,se.props,Me,fe),YH(Q,se.children,fe),hh(),zI(),fh()},D=(Q,se,fe,Me,Oe,pe,Le,be,Pe=!1)=>{const Ee=Q&&Q.children,he=Q?Q.shapeFlag:0,Ne=se.children,{patchFlag:Be,shapeFlag:Qe}=se;if(Be>0){if(Be&128){K(Ee,Ne,fe,Me,Oe,pe,Le,be,Pe);return}else if(Be&256){N(Ee,Ne,fe,Me,Oe,pe,Le,be,Pe);return}}Qe&8?(he&16&&Te(Ee,Oe,pe),Ne!==Ee&&u(fe,Ne)):he&16?Qe&16?K(Ee,Ne,fe,Me,Oe,pe,Le,be,Pe):Te(Ee,Oe,pe,!0):(he&8&&u(fe,""),Qe&16&&$(Ne,fe,Me,Oe,pe,Le,be,Pe))},N=(Q,se,fe,Me,Oe,pe,Le,be,Pe)=>{Q=Q||pp,se=se||pp;const Ee=Q.length,he=se.length,Ne=Math.min(Ee,he);let Be;for(Be=0;Be<Ne;Be++){const Qe=se[Be]=Pe?Yl(se[Be]):Br(se[Be]);g(Q[Be],Qe,fe,null,Oe,pe,Le,be,Pe)}Ee>he?Te(Q,Oe,pe,!0,!1,Ne):$(se,fe,Me,Oe,pe,Le,be,Pe,Ne)},K=(Q,se,fe,Me,Oe,pe,Le,be,Pe)=>{let Ee=0;const he=se.length;let Ne=Q.length-1,Be=he-1;for(;Ee<=Ne&&Ee<=Be;){const Qe=Q[Ee],ut=se[Ee]=Pe?Yl(se[Ee]):Br(se[Ee]);if(hu(Qe,ut))g(Qe,ut,fe,null,Oe,pe,Le,be,Pe);else break;Ee++}for(;Ee<=Ne&&Ee<=Be;){const Qe=Q[Ne],ut=se[Be]=Pe?Yl(se[Be]):Br(se[Be]);if(hu(Qe,ut))g(Qe,ut,fe,null,Oe,pe,Le,be,Pe);else break;Ne--,Be--}if(Ee>Ne){if(Ee<=Be){const Qe=Be+1,ut=Qe<he?se[Qe].el:Me;for(;Ee<=Be;)g(null,se[Ee]=Pe?Yl(se[Ee]):Br(se[Ee]),fe,ut,Oe,pe,Le,be,Pe),Ee++}}else if(Ee>Be)for(;Ee<=Ne;)Y(Q[Ee],Oe,pe,!0),Ee++;else{const Qe=Ee,ut=Ee,bt=new Map;for(Ee=ut;Ee<=Be;Ee++){const Ie=se[Ee]=Pe?Yl(se[Ee]):Br(se[Ee]);Ie.key!=null&&bt.set(Ie.key,Ee)}let it,X=0;const ue=Be-ut+1;let $e=!1,j=0;const te=new Array(ue);for(Ee=0;Ee<ue;Ee++)te[Ee]=0;for(Ee=Qe;Ee<=Ne;Ee++){const Ie=Q[Ee];if(X>=ue){Y(Ie,Oe,pe,!0);continue}let Ct;if(Ie.key!=null)Ct=bt.get(Ie.key);else for(it=ut;it<=Be;it++)if(te[it-ut]===0&&hu(Ie,se[it])){Ct=it;break}Ct===void 0?Y(Ie,Oe,pe,!0):(te[Ct-ut]=Ee+1,Ct>=j?j=Ct:$e=!0,g(Ie,se[Ct],fe,null,Oe,pe,Le,be,Pe),X++)}const ye=$e?e6(te):pp;for(it=ye.length-1,Ee=ue-1;Ee>=0;Ee--){const Ie=ut+Ee,Ct=se[Ie],an=Ie+1<he?se[Ie+1].el:Me;te[Ee]===0?g(null,Ct,fe,an,Oe,pe,Le,be,Pe):$e&&(it<0||Ee!==ye[it]?ie(Ct,fe,an,2):it--)}}},ie=(Q,se,fe,Me,Oe=null)=>{const{el:pe,type:Le,transition:be,children:Pe,shapeFlag:Ee}=Q;if(Ee&6){ie(Q.component.subTree,se,fe,Me);return}if(Ee&128){Q.suspense.move(se,fe,Me);return}if(Ee&64){Le.move(Q,se,fe,de);return}if(Le===Ye){i(pe,se,fe);for(let Ne=0;Ne<Pe.length;Ne++)ie(Pe[Ne],se,fe,Me);i(Q.anchor,se,fe);return}if(Le===Tf){w(Q,se,fe);return}if(Me!==2&&Ee&1&&be)if(Me===0)be.beforeEnter(pe),i(pe,se,fe),qs(()=>be.enter(pe),Oe);else{const{leave:Ne,delayLeave:Be,afterLeave:Qe}=be,ut=()=>i(pe,se,fe),bt=()=>{Ne(pe,()=>{ut(),Qe&&Qe()})};Be?Be(pe,ut,bt):bt()}else i(pe,se,fe)},Y=(Q,se,fe,Me=!1,Oe=!1)=>{const{type:pe,props:Le,ref:be,children:Pe,dynamicChildren:Ee,shapeFlag:he,patchFlag:Ne,dirs:Be}=Q;if(be!=null&&s1(be,null,fe,Q,!0),he&256){se.ctx.deactivate(Q);return}const Qe=he&1&&Be,ut=!Sf(Q);let bt;if(ut&&(bt=Le&&Le.onVnodeBeforeUnmount)&&xr(bt,se,Q),he&6)Se(Q.component,fe,Me);else{if(he&128){Q.suspense.unmount(fe,Me);return}Qe&&Fc(Q,null,se,"beforeUnmount"),he&64?Q.type.remove(Q,se,fe,Oe,de,Me):Ee&&(pe!==Ye||Ne>0&&Ne&64)?Te(Ee,se,fe,!1,!0):(pe===Ye&&Ne&384||!Oe&&he&16)&&Te(Pe,se,fe),Me&&ne(Q)}(ut&&(bt=Le&&Le.onVnodeUnmounted)||Qe)&&qs(()=>{bt&&xr(bt,se,Q),Qe&&Fc(Q,null,se,"unmounted")},fe)},ne=Q=>{const{type:se,el:fe,anchor:Me,transition:Oe}=Q;if(se===Ye){we(fe,Me);return}if(se===Tf){S(Q);return}const pe=()=>{s(fe),Oe&&!Oe.persisted&&Oe.afterLeave&&Oe.afterLeave()};if(Q.shapeFlag&1&&Oe&&!Oe.persisted){const{leave:Le,delayLeave:be}=Oe,Pe=()=>Le(fe,pe);be?be(Q.el,pe,Pe):Pe()}else pe()},we=(Q,se)=>{let fe;for(;Q!==se;)fe=h(Q),s(Q),Q=fe;s(se)},Se=(Q,se,fe)=>{const{bum:Me,scope:Oe,update:pe,subTree:Le,um:be}=Q;Me&&$v(Me),Oe.stop(),pe&&(pe.active=!1,Y(Le,Q,se,fe)),be&&qs(be,se),qs(()=>{Q.isUnmounted=!0},se),se&&se.pendingBranch&&!se.isUnmounted&&Q.asyncDep&&!Q.asyncResolved&&Q.suspenseId===se.pendingId&&(se.deps--,se.deps===0&&se.resolve())},Te=(Q,se,fe,Me=!1,Oe=!1,pe=0)=>{for(let Le=pe;Le<Q.length;Le++)Y(Q[Le],se,fe,Me,Oe)},le=Q=>Q.shapeFlag&6?le(Q.component.subTree):Q.shapeFlag&128?Q.suspense.next():h(Q.anchor||Q.el),oe=(Q,se,fe)=>{Q==null?se._vnode&&Y(se._vnode,null,null,!0):g(se._vnode||null,Q,se,null,null,null,fe),zI(),ZO(),se._vnode=Q},de={p:g,um:Y,m:ie,r:ne,mt:z,mc:$,pc:D,pbc:O,n:le,o:t};let ve,He;return e&&([ve,He]=e(de)),{render:oe,hydrate:ve,createApp:XH(oe,ve)}}function Dc({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function CE(t,e,n=!1){const i=t.children,s=e.children;if(ze(i)&&ze(s))for(let o=0;o<i.length;o++){const r=i[o];let a=s[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[o]=Yl(s[o]),a.el=r.el),n||CE(r,a)),a.type===gh&&(a.el=r.el)}}function e6(t){const e=t.slice(),n=[0];let i,s,o,r,a;const l=t.length;for(i=0;i<l;i++){const c=t[i];if(c!==0){if(s=n[n.length-1],t[s]<c){e[i]=s,n.push(i);continue}for(o=0,r=n.length-1;o<r;)a=o+r>>1,t[n[a]]<c?o=a+1:r=a;c<t[n[o]]&&(o>0&&(e[i]=n[o-1]),n[o]=i)}}for(o=n.length,r=n[o-1];o-- >0;)n[o]=r,r=e[r];return n}const t6=t=>t.__isTeleport,kf=t=>t&&(t.disabled||t.disabled===""),XI=t=>typeof SVGElement<"u"&&t instanceof SVGElement,o1=(t,e)=>{const n=t&&t.to;return at(n)?e?e(n):null:n},n6={__isTeleport:!0,process(t,e,n,i,s,o,r,a,l,c){const{mc:u,pc:d,pbc:h,o:{insert:f,querySelector:m,createText:g,createComment:y}}=c,_=kf(e.props);let{shapeFlag:C,children:w,dynamicChildren:S}=e;if(t==null){const E=e.el=g(""),k=e.anchor=g("");f(E,n,i),f(k,n,i);const A=e.target=o1(e.props,m),$=e.targetAnchor=g("");A&&(f($,A),r=r||XI(A));const L=(O,B)=>{C&16&&u(w,O,B,s,o,r,a,l)};_?L(n,k):A&&L(A,$)}else{e.el=t.el;const E=e.anchor=t.anchor,k=e.target=t.target,A=e.targetAnchor=t.targetAnchor,$=kf(t.props),L=$?n:k,O=$?E:A;if(r=r||XI(k),S?(h(t.dynamicChildren,S,L,s,o,r,a),CE(t,e,!0)):l||d(t,e,L,O,s,o,r,a,!1),_)$||Og(e,n,E,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const B=e.target=o1(e.props,m);B&&Og(e,B,null,c,0)}else $&&Og(e,k,A,c,1)}mP(e)},remove(t,e,n,i,{um:s,o:{remove:o}},r){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:d,props:h}=t;if(d&&o(u),(r||!kf(h))&&(o(c),a&16))for(let f=0;f<l.length;f++){const m=l[f];s(m,e,n,!0,!!m.dynamicChildren)}},move:Og,hydrate:i6};function Og(t,e,n,{o:{insert:i},m:s},o=2){o===0&&i(t.targetAnchor,e,n);const{el:r,anchor:a,shapeFlag:l,children:c,props:u}=t,d=o===2;if(d&&i(r,e,n),(!d||kf(u))&&l&16)for(let h=0;h<c.length;h++)s(c[h],e,n,2);d&&i(a,e,n)}function i6(t,e,n,i,s,o,{o:{nextSibling:r,parentNode:a,querySelector:l}},c){const u=e.target=o1(e.props,l);if(u){const d=u._lpa||u.firstChild;if(e.shapeFlag&16)if(kf(e.props))e.anchor=c(r(t),e,a(t),n,i,s,o),e.targetAnchor=d;else{e.anchor=r(t);let h=d;for(;h;)if(h=r(h),h&&h.nodeType===8&&h.data==="teleport anchor"){e.targetAnchor=h,u._lpa=e.targetAnchor&&r(e.targetAnchor);break}c(d,e,u,n,i,s,o)}mP(e)}return e.anchor&&r(e.anchor)}const tg=n6;function mP(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const Ye=Symbol(void 0),gh=Symbol(void 0),Ms=Symbol(void 0),Tf=Symbol(void 0),If=[];let rr=null;function I(t=!1){If.push(rr=t?null:[])}function s6(){If.pop(),rr=If[If.length-1]||null}let gm=1;function QI(t){gm+=t}function gP(t){return t.dynamicChildren=gm>0?rr||pp:null,s6(),gm>0&&rr&&rr.push(t),t}function H(t,e,n,i,s,o){return gP(G(t,e,n,i,s,o,!0))}function ce(t,e,n,i,s){return gP(Z(t,e,n,i,s,!0))}function $n(t){return t?t.__v_isVNode===!0:!1}function hu(t,e){return t.type===e.type&&t.key===e.key}const Yb="__vInternal",vP=({key:t})=>t??null,Av=({ref:t,ref_key:e,ref_for:n})=>t!=null?at(t)||pn(t)||ot(t)?{i:ts,r:t,k:e,f:!!n}:t:null;function G(t,e=null,n=null,i=0,s=null,o=t===Ye?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&vP(e),ref:e&&Av(e),scopeId:Wb,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ts};return a?(SE(l,n),o&128&&t.normalize(l)):n&&(l.shapeFlag|=at(n)?8:16),gm>0&&!r&&rr&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&rr.push(l),l}const Z=o6;function o6(t,e=null,n=null,i=0,s=null,o=!1){if((!t||t===rP)&&(t=Ms),$n(t)){const a=Za(t,e,!0);return n&&SE(a,n),gm>0&&!o&&rr&&(a.shapeFlag&6?rr[rr.indexOf(t)]=a:rr.push(a)),a.patchFlag|=-2,a}if(f6(t)&&(t=t.__vccOpts),e){e=Zb(e);let{class:a,style:l}=e;a&&!at(a)&&(e.class=x(a)),Et(l)&&(HO(l)&&!ze(l)&&(l=qi({},l)),e.style=Ke(l))}const r=at(t)?1:TH(t)?128:t6(t)?64:Et(t)?4:ot(t)?2:0;return G(t,e,n,i,s,r,o,!0)}function Zb(t){return t?HO(t)||Yb in t?qi({},t):t:null}function Za(t,e,n=!1){const{props:i,ref:s,patchFlag:o,children:r}=t,a=e?kt(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&vP(a),ref:e&&e.ref?n&&s?ze(s)?s.concat(Av(e)):[s,Av(e)]:Av(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:r,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ye?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Za(t.ssContent),ssFallback:t.ssFallback&&Za(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx}}function Ut(t=" ",e=0){return Z(gh,null,t,e)}function r6(t,e){const n=Z(Tf,null,t);return n.staticCount=e,n}function re(t="",e=!1){return e?(I(),ce(Ms,null,t)):Z(Ms,null,t)}function Br(t){return t==null||typeof t=="boolean"?Z(Ms):ze(t)?Z(Ye,null,t.slice()):typeof t=="object"?Yl(t):Z(gh,null,String(t))}function Yl(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Za(t)}function SE(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(ze(e))n=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),SE(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(Yb in e)?e._ctx=ts:s===3&&ts&&(ts.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ot(e)?(e={default:e,_ctx:ts},n=32):(e=String(e),i&64?(n=16,e=[Ut(e)]):n=8);t.children=e,t.shapeFlag|=n}function kt(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=x([e.class,i.class]));else if(s==="style")e.style=Ke([e.style,i.style]);else if(Db(s)){const o=e[s],r=i[s];r&&o!==r&&!(ze(o)&&o.includes(r))&&(e[s]=o?[].concat(o,r):r)}else s!==""&&(e[s]=i[s])}return e}function xr(t,e,n,i=null){Uo(t,e,7,[n,i])}const a6=fP();let l6=0;function c6(t,e,n){const i=t.type,s=(e?e.appContext:t.appContext)||a6,o={uid:l6++,vnode:t,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new MO(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:uP(i,s),emitsOptions:QO(i,s),emit:null,emitted:null,propsDefaults:Wn,inheritAttrs:i.inheritAttrs,ctx:Wn,data:Wn,props:Wn,attrs:Wn,slots:Wn,refs:Wn,setupState:Wn,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=bH.bind(null,o),t.ce&&t.ce(o),o}let zi=null;const vt=()=>zi||ts,Hp=t=>{zi=t,t.scope.on()},Du=()=>{zi&&zi.scope.off(),zi=null};function yP(t){return t.vnode.shapeFlag&4}let vm=!1;function u6(t,e=!1){vm=e;const{props:n,children:i}=t.vnode,s=yP(t);GH(t,n,s,e),KH(t,i);const o=s?d6(t,e):void 0;return vm=!1,o}function d6(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Fu(new Proxy(t.ctx,NH));const{setup:i}=n;if(i){const s=t.setupContext=i.length>1?_P(t):null;Hp(t),hh();const o=pc(i,t,0,[t.props,s]);if(fh(),Du(),am(o)){if(o.then(Du,Du),e)return o.then(r=>{JI(t,r,e)}).catch(r=>{Hb(r,t,0)});t.asyncDep=o}else JI(t,o,e)}else bP(t,e)}function JI(t,e,n){ot(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Et(e)&&(t.setupState=GO(e)),bP(t,n)}let ex;function bP(t,e,n){const i=t.type;if(!t.render){if(!e&&ex&&!i.render){const s=i.template||_E(t).template;if(s){const{isCustomElement:o,compilerOptions:r}=t.appContext.config,{delimiters:a,compilerOptions:l}=i,c=qi(qi({isCustomElement:o,delimiters:a},r),l);i.render=ex(s,c)}}t.render=i.render||nn}Hp(t),hh(),BH(t),fh(),Du()}function p6(t){return new Proxy(t.attrs,{get(e,n){return Eo(t,"get","$attrs"),e[n]}})}function _P(t){const e=i=>{t.exposed=i||{}};let n;return{get attrs(){return n||(n=p6(t))},slots:t.slots,emit:t.emit,expose:e}}function Xb(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(GO(Fu(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ef)return Ef[n](t)},has(e,n){return n in e||n in Ef}}))}function h6(t,e=!0){return ot(t)?t.displayName||t.name:t.name||e&&t.__name}function f6(t){return ot(t)&&"__vccOpts"in t}const T=(t,e)=>qO(t,e,vm);function Ki(){return wP().slots}function vh(){return wP().attrs}function wP(){const t=vt();return t.setupContext||(t.setupContext=_P(t))}function Ze(t,e,n){const i=arguments.length;return i===2?Et(e)&&!ze(e)?$n(e)?Z(t,null,[e]):Z(t,e):Z(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&$n(n)&&(n=[n]),Z(t,e,n))}const m6=Symbol(""),g6=()=>qe(m6),v6="3.2.45",y6="http://www.w3.org/2000/svg",fu=typeof document<"u"?document:null,tx=fu&&fu.createElement("template"),b6={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const s=e?fu.createElementNS(y6,t):fu.createElement(t,n?{is:n}:void 0);return t==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:t=>fu.createTextNode(t),createComment:t=>fu.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>fu.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,s,o){const r=n?n.previousSibling:e.lastChild;if(s&&(s===o||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===o||!(s=s.nextSibling)););else{tx.innerHTML=i?`<svg>${t}</svg>`:t;const a=tx.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[r?r.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function _6(t,e,n){const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function w6(t,e,n){const i=t.style,s=at(n);if(n&&!s){for(const o in n)r1(i,o,n[o]);if(e&&!at(e))for(const o in e)n[o]==null&&r1(i,o,"")}else{const o=i.display;s?e!==n&&(i.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=o)}}const nx=/\s*!important$/;function r1(t,e,n){if(ze(n))n.forEach(i=>r1(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=C6(t,e);nx.test(n)?t.setProperty(xc(i),n.replace(nx,""),"important"):t[i]=n}}const ix=["Webkit","Moz","ms"],iw={};function C6(t,e){const n=iw[e];if(n)return n;let i=Go(e);if(i!=="filter"&&i in t)return iw[e]=i;i=eg(i);for(let s=0;s<ix.length;s++){const o=ix[s]+i;if(o in t)return iw[e]=o}return e}const sx="http://www.w3.org/1999/xlink";function S6(t,e,n,i,s){if(i&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(sx,e.slice(6,e.length)):t.setAttributeNS(sx,e,n);else{const o=Iz(e);n==null||o&&!EO(n)?t.removeAttribute(e):t.setAttribute(e,o?"":n)}}function E6(t,e,n,i,s,o,r){if(e==="innerHTML"||e==="textContent"){i&&r(i,s,o),t[e]=n??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const l=n??"";(t.value!==l||t.tagName==="OPTION")&&(t.value=l),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=EO(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}function tc(t,e,n,i){t.addEventListener(e,n,i)}function k6(t,e,n,i){t.removeEventListener(e,n,i)}function T6(t,e,n,i,s=null){const o=t._vei||(t._vei={}),r=o[e];if(i&&r)r.value=i;else{const[a,l]=I6(e);if(i){const c=o[e]=$6(i,s);tc(t,a,c,l)}else r&&(k6(t,a,r,l),o[e]=void 0)}}const ox=/(?:Once|Passive|Capture)$/;function I6(t){let e;if(ox.test(t)){e={};let i;for(;i=t.match(ox);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):xc(t.slice(2)),e]}let sw=0;const x6=Promise.resolve(),M6=()=>sw||(x6.then(()=>sw=0),sw=Date.now());function $6(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Uo(A6(i,n.value),e,5,[i])};return n.value=t,n.attached=M6(),n}function A6(t,e){if(ze(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const rx=/^on[a-z]/,L6=(t,e,n,i,s=!1,o,r,a,l)=>{e==="class"?_6(t,i,s):e==="style"?w6(t,n,i):Db(e)?sE(e)||T6(t,e,n,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):O6(t,e,i,s))?E6(t,e,i,o,r,a,l):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),S6(t,e,i,s))};function O6(t,e,n,i){return i?!!(e==="innerHTML"||e==="textContent"||e in t&&rx.test(e)&&ot(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||rx.test(e)&&at(n)?!1:e in t}function P6(t){const e=vt();if(!e)return;const n=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(o=>l1(o,s))},i=()=>{const s=t(e.proxy);a1(e.subTree,s),n(s)};xH(i),ft(()=>{const s=new MutationObserver(i);s.observe(e.subTree.el.parentNode,{childList:!0}),Mc(()=>s.disconnect())})}function a1(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{a1(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)l1(t.el,e);else if(t.type===Ye)t.children.forEach(n=>a1(n,e));else if(t.type===Tf){let{el:n,anchor:i}=t;for(;n&&(l1(n,e),n!==i);)n=n.nextSibling}}function l1(t,e){if(t.nodeType===1){const n=t.style;for(const i in e)n.setProperty(`--${i}`,e[i])}}const yl="transition",Ah="animation",oi=(t,{slots:e})=>Ze(tP,SP(t),e);oi.displayName="Transition";const CP={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},R6=oi.props=qi({},tP.props,CP),Nc=(t,e=[])=>{ze(t)?t.forEach(n=>n(...e)):t&&t(...e)},ax=t=>t?ze(t)?t.some(e=>e.length>1):t.length>1:!1;function SP(t){const e={};for(const V in t)V in CP||(e[V]=t[V]);if(t.css===!1)return e;const{name:n="v",type:i,duration:s,enterFromClass:o=`${n}-enter-from`,enterActiveClass:r=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=o,appearActiveClass:c=r,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,m=V6(s),g=m&&m[0],y=m&&m[1],{onBeforeEnter:_,onEnter:C,onEnterCancelled:w,onLeave:S,onLeaveCancelled:E,onBeforeAppear:k=_,onAppear:A=C,onAppearCancelled:$=w}=e,L=(V,P,z)=>{kl(V,P?u:a),kl(V,P?c:r),z&&z()},O=(V,P)=>{V._isLeaving=!1,kl(V,d),kl(V,f),kl(V,h),P&&P()},B=V=>(P,z)=>{const U=V?A:C,W=()=>L(P,V,z);Nc(U,[P,W]),lx(()=>{kl(P,V?l:o),Ca(P,V?u:a),ax(U)||cx(P,i,g,W)})};return qi(e,{onBeforeEnter(V){Nc(_,[V]),Ca(V,o),Ca(V,r)},onBeforeAppear(V){Nc(k,[V]),Ca(V,l),Ca(V,c)},onEnter:B(!1),onAppear:B(!0),onLeave(V,P){V._isLeaving=!0;const z=()=>O(V,P);Ca(V,d),kP(),Ca(V,h),lx(()=>{V._isLeaving&&(kl(V,d),Ca(V,f),ax(S)||cx(V,i,y,z))}),Nc(S,[V,z])},onEnterCancelled(V){L(V,!1),Nc(w,[V])},onAppearCancelled(V){L(V,!0),Nc($,[V])},onLeaveCancelled(V){O(V),Nc(E,[V])}})}function V6(t){if(t==null)return null;if(Et(t))return[ow(t.enter),ow(t.leave)];{const e=ow(t);return[e,e]}}function ow(t){return cm(t)}function Ca(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function kl(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function lx(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let F6=0;function cx(t,e,n,i){const s=t._endId=++F6,o=()=>{s===t._endId&&i()};if(n)return setTimeout(o,n);const{type:r,timeout:a,propCount:l}=EP(t,e);if(!r)return i();const c=r+"end";let u=0;const d=()=>{t.removeEventListener(c,h),o()},h=f=>{f.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),t.addEventListener(c,h)}function EP(t,e){const n=window.getComputedStyle(t),i=m=>(n[m]||"").split(", "),s=i(`${yl}Delay`),o=i(`${yl}Duration`),r=ux(s,o),a=i(`${Ah}Delay`),l=i(`${Ah}Duration`),c=ux(a,l);let u=null,d=0,h=0;e===yl?r>0&&(u=yl,d=r,h=o.length):e===Ah?c>0&&(u=Ah,d=c,h=l.length):(d=Math.max(r,c),u=d>0?r>c?yl:Ah:null,h=u?u===yl?o.length:l.length:0);const f=u===yl&&/\b(transform|all)(,|$)/.test(i(`${yl}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function ux(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,i)=>dx(n)+dx(t[i])))}function dx(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function kP(){return document.body.offsetHeight}const TP=new WeakMap,IP=new WeakMap,D6={name:"TransitionGroup",props:qi({},R6,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=vt(),i=eP();let s,o;return ll(()=>{if(!s.length)return;const r=t.moveClass||`${t.name||"v"}-move`;if(!U6(s[0].el,n.vnode.el,r))return;s.forEach(B6),s.forEach(z6);const a=s.filter(H6);kP(),a.forEach(l=>{const c=l.el,u=c.style;Ca(c,r),u.transform=u.webkitTransform=u.transitionDuration="";const d=c._moveCb=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",d),c._moveCb=null,kl(c,r))};c.addEventListener("transitionend",d)})}),()=>{const r=en(t),a=SP(r);let l=r.tag||Ye;s=o,o=e.default?vE(e.default()):[];for(let c=0;c<o.length;c++){const u=o[c];u.key!=null&&fm(u,hm(u,a,i,n))}if(s)for(let c=0;c<s.length;c++){const u=s[c];fm(u,hm(u,a,i,n)),TP.set(u,u.el.getBoundingClientRect())}return Z(l,null,o)}}},N6=D6;function B6(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function z6(t){IP.set(t,t.el.getBoundingClientRect())}function H6(t){const e=TP.get(t),n=IP.get(t),i=e.left-n.left,s=e.top-n.top;if(i||s){const o=t.el.style;return o.transform=o.webkitTransform=`translate(${i}px,${s}px)`,o.transitionDuration="0s",t}}function U6(t,e,n){const i=t.cloneNode();t._vtc&&t._vtc.forEach(r=>{r.split(/\s+/).forEach(a=>a&&i.classList.remove(a))}),n.split(/\s+/).forEach(r=>r&&i.classList.add(r)),i.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(i);const{hasTransform:o}=EP(i);return s.removeChild(i),o}const Up=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ze(e)?n=>$v(e,n):e};function W6(t){t.target.composing=!0}function px(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const EE={created(t,{modifiers:{lazy:e,trim:n,number:i}},s){t._assign=Up(s);const o=i||s.props&&s.props.type==="number";tc(t,e?"change":"input",r=>{if(r.target.composing)return;let a=t.value;n&&(a=a.trim()),o&&(a=cm(a)),t._assign(a)}),n&&tc(t,"change",()=>{t.value=t.value.trim()}),e||(tc(t,"compositionstart",W6),tc(t,"compositionend",px),tc(t,"change",px))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:i,number:s}},o){if(t._assign=Up(o),t.composing||document.activeElement===t&&t.type!=="range"&&(n||i&&t.value.trim()===e||(s||t.type==="number")&&cm(t.value)===e))return;const r=e??"";t.value!==r&&(t.value=r)}},Hy={deep:!0,created(t,e,n){t._assign=Up(n),tc(t,"change",()=>{const i=t._modelValue,s=MP(t),o=t.checked,r=t._assign;if(ze(i)){const a=kO(i,s),l=a!==-1;if(o&&!l)r(i.concat(s));else if(!o&&l){const c=[...i];c.splice(a,1),r(c)}}else if(Nb(i)){const a=new Set(i);o?a.add(s):a.delete(s),r(a)}else r($P(t,o))})},mounted:hx,beforeUpdate(t,e,n){t._assign=Up(n),hx(t,e,n)}};function hx(t,{value:e,oldValue:n},i){t._modelValue=e,ze(e)?t.checked=kO(e,i.props.value)>-1:Nb(e)?t.checked=e.has(i.props.value):e!==n&&(t.checked=Bp(e,$P(t,!0)))}const xP={created(t,{value:e},n){t.checked=Bp(e,n.props.value),t._assign=Up(n),tc(t,"change",()=>{t._assign(MP(t))})},beforeUpdate(t,{value:e,oldValue:n},i){t._assign=Up(i),e!==n&&(t.checked=Bp(e,i.props.value))}};function MP(t){return"_value"in t?t._value:t.value}function $P(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const G6=["ctrl","shift","alt","meta"],j6={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>G6.some(n=>t[`${n}Key`]&&!e.includes(n))},rt=(t,e)=>(n,...i)=>{for(let s=0;s<e.length;s++){const o=j6[e[s]];if(o&&o(n,e))return}return t(n,...i)},q6={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Bt=(t,e)=>n=>{if(!("key"in n))return;const i=xc(n.key);if(e.some(s=>s===i||q6[s]===i))return t(n)},Vt={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Lh(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:i}){!e!=!n&&(i?e?(i.beforeEnter(t),Lh(t,!0),i.enter(t)):i.leave(t,()=>{Lh(t,!1)}):Lh(t,e))},beforeUnmount(t,{value:e}){Lh(t,e)}};function Lh(t,e){t.style.display=e?t._vod:"none"}const K6=qi({patchProp:L6},b6);let fx;function AP(){return fx||(fx=QH(K6))}const Wp=(...t)=>{AP().render(...t)},LP=(...t)=>{const e=AP().createApp(...t),{mount:n}=e;return e.mount=i=>{const s=Y6(i);if(!s)return;const o=e._component;!ot(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.innerHTML="";const r=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),r},e};function Y6(t){return at(t)?document.querySelector(t):t}var Z6=typeof global=="object"&&global&&global.Object===Object&&global;const OP=Z6;var X6=typeof self=="object"&&self&&self.Object===Object&&self,Q6=OP||X6||Function("return this")();const wr=Q6;var J6=wr.Symbol;const jo=J6;var PP=Object.prototype,eU=PP.hasOwnProperty,tU=PP.toString,Oh=jo?jo.toStringTag:void 0;function nU(t){var e=eU.call(t,Oh),n=t[Oh];try{t[Oh]=void 0;var i=!0}catch{}var s=tU.call(t);return i&&(e?t[Oh]=n:delete t[Oh]),s}var iU=Object.prototype,sU=iU.toString;function oU(t){return sU.call(t)}var rU="[object Null]",aU="[object Undefined]",mx=jo?jo.toStringTag:void 0;function ed(t){return t==null?t===void 0?aU:rU:mx&&mx in Object(t)?nU(t):oU(t)}function sa(t){return t!=null&&typeof t=="object"}var lU="[object Symbol]";function Qb(t){return typeof t=="symbol"||sa(t)&&ed(t)==lU}function RP(t,e){for(var n=-1,i=t==null?0:t.length,s=Array(i);++n<i;)s[n]=e(t[n],n,t);return s}var cU=Array.isArray;const Os=cU;var uU=1/0,gx=jo?jo.prototype:void 0,vx=gx?gx.toString:void 0;function VP(t){if(typeof t=="string")return t;if(Os(t))return RP(t,VP)+"";if(Qb(t))return vx?vx.call(t):"";var e=t+"";return e=="0"&&1/t==-uU?"-0":e}var dU=/\s/;function pU(t){for(var e=t.length;e--&&dU.test(t.charAt(e)););return e}var hU=/^\s+/;function fU(t){return t&&t.slice(0,pU(t)+1).replace(hU,"")}function Ps(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var yx=0/0,mU=/^[-+]0x[0-9a-f]+$/i,gU=/^0b[01]+$/i,vU=/^0o[0-7]+$/i,yU=parseInt;function bx(t){if(typeof t=="number")return t;if(Qb(t))return yx;if(Ps(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Ps(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=fU(t);var n=gU.test(t);return n||vU.test(t)?yU(t.slice(2),n?2:8):mU.test(t)?yx:+t}function kE(t){return t}var bU="[object AsyncFunction]",_U="[object Function]",wU="[object GeneratorFunction]",CU="[object Proxy]";function TE(t){if(!Ps(t))return!1;var e=ed(t);return e==_U||e==wU||e==bU||e==CU}var SU=wr["__core-js_shared__"];const rw=SU;var _x=function(){var t=/[^.]+$/.exec(rw&&rw.keys&&rw.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function EU(t){return!!_x&&_x in t}var kU=Function.prototype,TU=kU.toString;function td(t){if(t!=null){try{return TU.call(t)}catch{}try{return t+""}catch{}}return""}var IU=/[\\^$.*+?()[\]{}|]/g,xU=/^\[object .+?Constructor\]$/,MU=Function.prototype,$U=Object.prototype,AU=MU.toString,LU=$U.hasOwnProperty,OU=RegExp("^"+AU.call(LU).replace(IU,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function PU(t){if(!Ps(t)||EU(t))return!1;var e=TE(t)?OU:xU;return e.test(td(t))}function RU(t,e){return t==null?void 0:t[e]}function nd(t,e){var n=RU(t,e);return PU(n)?n:void 0}var VU=nd(wr,"WeakMap");const c1=VU;var wx=Object.create,FU=function(){function t(){}return function(e){if(!Ps(e))return{};if(wx)return wx(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const DU=FU;function NU(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function BU(){}function FP(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}var zU=800,HU=16,UU=Date.now;function WU(t){var e=0,n=0;return function(){var i=UU(),s=HU-(i-n);if(n=i,s>0){if(++e>=zU)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function GU(t){return function(){return t}}var jU=function(){try{var t=nd(Object,"defineProperty");return t({},"",{}),t}catch{}}();const Uy=jU;var qU=Uy?function(t,e){return Uy(t,"toString",{configurable:!0,enumerable:!1,value:GU(e),writable:!0})}:kE;const KU=qU;var YU=WU(KU);const DP=YU;function ZU(t,e){for(var n=-1,i=t==null?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function XU(t,e,n,i){for(var s=t.length,o=n+(i?1:-1);i?o--:++o<s;)if(e(t[o],o,t))return o;return-1}function QU(t){return t!==t}function JU(t,e,n){for(var i=n-1,s=t.length;++i<s;)if(t[i]===e)return i;return-1}function eW(t,e,n){return e===e?JU(t,e,n):XU(t,QU,n)}function tW(t,e){var n=t==null?0:t.length;return!!n&&eW(t,e,0)>-1}var nW=9007199254740991,iW=/^(?:0|[1-9]\d*)$/;function Jb(t,e){var n=typeof t;return e=e??nW,!!e&&(n=="number"||n!="symbol"&&iW.test(t))&&t>-1&&t%1==0&&t<e}function IE(t,e,n){e=="__proto__"&&Uy?Uy(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ng(t,e){return t===e||t!==t&&e!==e}var sW=Object.prototype,oW=sW.hasOwnProperty;function xE(t,e,n){var i=t[e];(!(oW.call(t,e)&&ng(i,n))||n===void 0&&!(e in t))&&IE(t,e,n)}function ig(t,e,n,i){var s=!n;n||(n={});for(var o=-1,r=e.length;++o<r;){var a=e[o],l=i?i(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),s?IE(n,a,l):xE(n,a,l)}return n}var Cx=Math.max;function NP(t,e,n){return e=Cx(e===void 0?t.length-1:e,0),function(){for(var i=arguments,s=-1,o=Cx(i.length-e,0),r=Array(o);++s<o;)r[s]=i[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=i[s];return a[e]=n(r),NU(t,this,a)}}function BP(t,e){return DP(NP(t,e,kE),t+"")}var rW=9007199254740991;function ME(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=rW}function yh(t){return t!=null&&ME(t.length)&&!TE(t)}function aW(t,e,n){if(!Ps(n))return!1;var i=typeof e;return(i=="number"?yh(n)&&Jb(e,n.length):i=="string"&&e in n)?ng(n[e],t):!1}function lW(t){return BP(function(e,n){var i=-1,s=n.length,o=s>1?n[s-1]:void 0,r=s>2?n[2]:void 0;for(o=t.length>3&&typeof o=="function"?(s--,o):void 0,r&&aW(n[0],n[1],r)&&(o=s<3?void 0:o,s=1),e=Object(e);++i<s;){var a=n[i];a&&t(e,a,i,o)}return e})}var cW=Object.prototype;function $E(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||cW;return t===n}function uW(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}var dW="[object Arguments]";function Sx(t){return sa(t)&&ed(t)==dW}var zP=Object.prototype,pW=zP.hasOwnProperty,hW=zP.propertyIsEnumerable,fW=Sx(function(){return arguments}())?Sx:function(t){return sa(t)&&pW.call(t,"callee")&&!hW.call(t,"callee")};const ym=fW;function mW(){return!1}var HP=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ex=HP&&typeof module=="object"&&module&&!module.nodeType&&module,gW=Ex&&Ex.exports===HP,kx=gW?wr.Buffer:void 0,vW=kx?kx.isBuffer:void 0,yW=vW||mW;const bm=yW;var bW="[object Arguments]",_W="[object Array]",wW="[object Boolean]",CW="[object Date]",SW="[object Error]",EW="[object Function]",kW="[object Map]",TW="[object Number]",IW="[object Object]",xW="[object RegExp]",MW="[object Set]",$W="[object String]",AW="[object WeakMap]",LW="[object ArrayBuffer]",OW="[object DataView]",PW="[object Float32Array]",RW="[object Float64Array]",VW="[object Int8Array]",FW="[object Int16Array]",DW="[object Int32Array]",NW="[object Uint8Array]",BW="[object Uint8ClampedArray]",zW="[object Uint16Array]",HW="[object Uint32Array]",Un={};Un[PW]=Un[RW]=Un[VW]=Un[FW]=Un[DW]=Un[NW]=Un[BW]=Un[zW]=Un[HW]=!0;Un[bW]=Un[_W]=Un[LW]=Un[wW]=Un[OW]=Un[CW]=Un[SW]=Un[EW]=Un[kW]=Un[TW]=Un[IW]=Un[xW]=Un[MW]=Un[$W]=Un[AW]=!1;function UW(t){return sa(t)&&ME(t.length)&&!!Un[ed(t)]}function AE(t){return function(e){return t(e)}}var UP=typeof exports=="object"&&exports&&!exports.nodeType&&exports,xf=UP&&typeof module=="object"&&module&&!module.nodeType&&module,WW=xf&&xf.exports===UP,aw=WW&&OP.process,GW=function(){try{var t=xf&&xf.require&&xf.require("util").types;return t||aw&&aw.binding&&aw.binding("util")}catch{}}();const Gp=GW;var Tx=Gp&&Gp.isTypedArray,jW=Tx?AE(Tx):UW;const LE=jW;var qW=Object.prototype,KW=qW.hasOwnProperty;function WP(t,e){var n=Os(t),i=!n&&ym(t),s=!n&&!i&&bm(t),o=!n&&!i&&!s&&LE(t),r=n||i||s||o,a=r?uW(t.length,String):[],l=a.length;for(var c in t)(e||KW.call(t,c))&&!(r&&(c=="length"||s&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Jb(c,l)))&&a.push(c);return a}function GP(t,e){return function(n){return t(e(n))}}var YW=GP(Object.keys,Object);const ZW=YW;var XW=Object.prototype,QW=XW.hasOwnProperty;function JW(t){if(!$E(t))return ZW(t);var e=[];for(var n in Object(t))QW.call(t,n)&&n!="constructor"&&e.push(n);return e}function sg(t){return yh(t)?WP(t):JW(t)}function e7(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var t7=Object.prototype,n7=t7.hasOwnProperty;function i7(t){if(!Ps(t))return e7(t);var e=$E(t),n=[];for(var i in t)i=="constructor"&&(e||!n7.call(t,i))||n.push(i);return n}function og(t){return yh(t)?WP(t,!0):i7(t)}var s7=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o7=/^\w*$/;function OE(t,e){if(Os(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Qb(t)?!0:o7.test(t)||!s7.test(t)||e!=null&&t in Object(e)}var r7=nd(Object,"create");const _m=r7;function a7(){this.__data__=_m?_m(null):{},this.size=0}function l7(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var c7="__lodash_hash_undefined__",u7=Object.prototype,d7=u7.hasOwnProperty;function p7(t){var e=this.__data__;if(_m){var n=e[t];return n===c7?void 0:n}return d7.call(e,t)?e[t]:void 0}var h7=Object.prototype,f7=h7.hasOwnProperty;function m7(t){var e=this.__data__;return _m?e[t]!==void 0:f7.call(e,t)}var g7="__lodash_hash_undefined__";function v7(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=_m&&e===void 0?g7:e,this}function qu(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}qu.prototype.clear=a7;qu.prototype.delete=l7;qu.prototype.get=p7;qu.prototype.has=m7;qu.prototype.set=v7;function y7(){this.__data__=[],this.size=0}function e_(t,e){for(var n=t.length;n--;)if(ng(t[n][0],e))return n;return-1}var b7=Array.prototype,_7=b7.splice;function w7(t){var e=this.__data__,n=e_(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():_7.call(e,n,1),--this.size,!0}function C7(t){var e=this.__data__,n=e_(e,t);return n<0?void 0:e[n][1]}function S7(t){return e_(this.__data__,t)>-1}function E7(t,e){var n=this.__data__,i=e_(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}function cl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}cl.prototype.clear=y7;cl.prototype.delete=w7;cl.prototype.get=C7;cl.prototype.has=S7;cl.prototype.set=E7;var k7=nd(wr,"Map");const wm=k7;function T7(){this.size=0,this.__data__={hash:new qu,map:new(wm||cl),string:new qu}}function I7(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function t_(t,e){var n=t.__data__;return I7(e)?n[typeof e=="string"?"string":"hash"]:n.map}function x7(t){var e=t_(this,t).delete(t);return this.size-=e?1:0,e}function M7(t){return t_(this,t).get(t)}function $7(t){return t_(this,t).has(t)}function A7(t,e){var n=t_(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function ul(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}ul.prototype.clear=T7;ul.prototype.delete=x7;ul.prototype.get=M7;ul.prototype.has=$7;ul.prototype.set=A7;var L7="Expected a function";function n_(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(L7);var n=function(){var i=arguments,s=e?e.apply(this,i):i[0],o=n.cache;if(o.has(s))return o.get(s);var r=t.apply(this,i);return n.cache=o.set(s,r)||o,r};return n.cache=new(n_.Cache||ul),n}n_.Cache=ul;var O7=500;function P7(t){var e=n_(t,function(i){return n.size===O7&&n.clear(),i}),n=e.cache;return e}var R7=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,V7=/\\(\\)?/g,F7=P7(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(R7,function(n,i,s,o){e.push(s?o.replace(V7,"$1"):i||n)}),e});const D7=F7;function N7(t){return t==null?"":VP(t)}function i_(t,e){return Os(t)?t:OE(t,e)?[t]:D7(N7(t))}var B7=1/0;function rg(t){if(typeof t=="string"||Qb(t))return t;var e=t+"";return e=="0"&&1/t==-B7?"-0":e}function PE(t,e){e=i_(e,t);for(var n=0,i=e.length;t!=null&&n<i;)t=t[rg(e[n++])];return n&&n==i?t:void 0}function xn(t,e,n){var i=t==null?void 0:PE(t,e);return i===void 0?n:i}function RE(t,e){for(var n=-1,i=e.length,s=t.length;++n<i;)t[s+n]=e[n];return t}var Ix=jo?jo.isConcatSpreadable:void 0;function z7(t){return Os(t)||ym(t)||!!(Ix&&t&&t[Ix])}function ag(t,e,n,i,s){var o=-1,r=t.length;for(n||(n=z7),s||(s=[]);++o<r;){var a=t[o];e>0&&n(a)?e>1?ag(a,e-1,n,i,s):RE(s,a):i||(s[s.length]=a)}return s}function jP(t){var e=t==null?0:t.length;return e?ag(t,1):[]}function H7(t){return DP(NP(t,void 0,jP),t+"")}var U7=GP(Object.getPrototypeOf,Object);const VE=U7;var W7="[object Object]",G7=Function.prototype,j7=Object.prototype,qP=G7.toString,q7=j7.hasOwnProperty,K7=qP.call(Object);function Y7(t){if(!sa(t)||ed(t)!=W7)return!1;var e=VE(t);if(e===null)return!0;var n=q7.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&qP.call(n)==K7}function jp(){if(!arguments.length)return[];var t=arguments[0];return Os(t)?t:[t]}function Z7(){this.__data__=new cl,this.size=0}function X7(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Q7(t){return this.__data__.get(t)}function J7(t){return this.__data__.has(t)}var eG=200;function tG(t,e){var n=this.__data__;if(n instanceof cl){var i=n.__data__;if(!wm||i.length<eG-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new ul(i)}return n.set(t,e),this.size=n.size,this}function cr(t){var e=this.__data__=new cl(t);this.size=e.size}cr.prototype.clear=Z7;cr.prototype.delete=X7;cr.prototype.get=Q7;cr.prototype.has=J7;cr.prototype.set=tG;function nG(t,e){return t&&ig(e,sg(e),t)}function iG(t,e){return t&&ig(e,og(e),t)}var KP=typeof exports=="object"&&exports&&!exports.nodeType&&exports,xx=KP&&typeof module=="object"&&module&&!module.nodeType&&module,sG=xx&&xx.exports===KP,Mx=sG?wr.Buffer:void 0,$x=Mx?Mx.allocUnsafe:void 0;function YP(t,e){if(e)return t.slice();var n=t.length,i=$x?$x(n):new t.constructor(n);return t.copy(i),i}function oG(t,e){for(var n=-1,i=t==null?0:t.length,s=0,o=[];++n<i;){var r=t[n];e(r,n,t)&&(o[s++]=r)}return o}function ZP(){return[]}var rG=Object.prototype,aG=rG.propertyIsEnumerable,Ax=Object.getOwnPropertySymbols,lG=Ax?function(t){return t==null?[]:(t=Object(t),oG(Ax(t),function(e){return aG.call(t,e)}))}:ZP;const FE=lG;function cG(t,e){return ig(t,FE(t),e)}var uG=Object.getOwnPropertySymbols,dG=uG?function(t){for(var e=[];t;)RE(e,FE(t)),t=VE(t);return e}:ZP;const XP=dG;function pG(t,e){return ig(t,XP(t),e)}function QP(t,e,n){var i=e(t);return Os(t)?i:RE(i,n(t))}function u1(t){return QP(t,sg,FE)}function hG(t){return QP(t,og,XP)}var fG=nd(wr,"DataView");const d1=fG;var mG=nd(wr,"Promise");const p1=mG;var gG=nd(wr,"Set");const gp=gG;var Lx="[object Map]",vG="[object Object]",Ox="[object Promise]",Px="[object Set]",Rx="[object WeakMap]",Vx="[object DataView]",yG=td(d1),bG=td(wm),_G=td(p1),wG=td(gp),CG=td(c1),jc=ed;(d1&&jc(new d1(new ArrayBuffer(1)))!=Vx||wm&&jc(new wm)!=Lx||p1&&jc(p1.resolve())!=Ox||gp&&jc(new gp)!=Px||c1&&jc(new c1)!=Rx)&&(jc=function(t){var e=ed(t),n=e==vG?t.constructor:void 0,i=n?td(n):"";if(i)switch(i){case yG:return Vx;case bG:return Lx;case _G:return Ox;case wG:return Px;case CG:return Rx}return e});const Cm=jc;var SG=Object.prototype,EG=SG.hasOwnProperty;function kG(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&EG.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var TG=wr.Uint8Array;const Wy=TG;function DE(t){var e=new t.constructor(t.byteLength);return new Wy(e).set(new Wy(t)),e}function IG(t,e){var n=e?DE(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var xG=/\w*$/;function MG(t){var e=new t.constructor(t.source,xG.exec(t));return e.lastIndex=t.lastIndex,e}var Fx=jo?jo.prototype:void 0,Dx=Fx?Fx.valueOf:void 0;function $G(t){return Dx?Object(Dx.call(t)):{}}function JP(t,e){var n=e?DE(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var AG="[object Boolean]",LG="[object Date]",OG="[object Map]",PG="[object Number]",RG="[object RegExp]",VG="[object Set]",FG="[object String]",DG="[object Symbol]",NG="[object ArrayBuffer]",BG="[object DataView]",zG="[object Float32Array]",HG="[object Float64Array]",UG="[object Int8Array]",WG="[object Int16Array]",GG="[object Int32Array]",jG="[object Uint8Array]",qG="[object Uint8ClampedArray]",KG="[object Uint16Array]",YG="[object Uint32Array]";function ZG(t,e,n){var i=t.constructor;switch(e){case NG:return DE(t);case AG:case LG:return new i(+t);case BG:return IG(t,n);case zG:case HG:case UG:case WG:case GG:case jG:case qG:case KG:case YG:return JP(t,n);case OG:return new i;case PG:case FG:return new i(t);case RG:return MG(t);case VG:return new i;case DG:return $G(t)}}function eR(t){return typeof t.constructor=="function"&&!$E(t)?DU(VE(t)):{}}var XG="[object Map]";function QG(t){return sa(t)&&Cm(t)==XG}var Nx=Gp&&Gp.isMap,JG=Nx?AE(Nx):QG;const e9=JG;var t9="[object Set]";function n9(t){return sa(t)&&Cm(t)==t9}var Bx=Gp&&Gp.isSet,i9=Bx?AE(Bx):n9;const s9=i9;var o9=1,r9=2,a9=4,tR="[object Arguments]",l9="[object Array]",c9="[object Boolean]",u9="[object Date]",d9="[object Error]",nR="[object Function]",p9="[object GeneratorFunction]",h9="[object Map]",f9="[object Number]",iR="[object Object]",m9="[object RegExp]",g9="[object Set]",v9="[object String]",y9="[object Symbol]",b9="[object WeakMap]",_9="[object ArrayBuffer]",w9="[object DataView]",C9="[object Float32Array]",S9="[object Float64Array]",E9="[object Int8Array]",k9="[object Int16Array]",T9="[object Int32Array]",I9="[object Uint8Array]",x9="[object Uint8ClampedArray]",M9="[object Uint16Array]",$9="[object Uint32Array]",Vn={};Vn[tR]=Vn[l9]=Vn[_9]=Vn[w9]=Vn[c9]=Vn[u9]=Vn[C9]=Vn[S9]=Vn[E9]=Vn[k9]=Vn[T9]=Vn[h9]=Vn[f9]=Vn[iR]=Vn[m9]=Vn[g9]=Vn[v9]=Vn[y9]=Vn[I9]=Vn[x9]=Vn[M9]=Vn[$9]=!0;Vn[d9]=Vn[nR]=Vn[b9]=!1;function Mf(t,e,n,i,s,o){var r,a=e&o9,l=e&r9,c=e&a9;if(n&&(r=s?n(t,i,s,o):n(t)),r!==void 0)return r;if(!Ps(t))return t;var u=Os(t);if(u){if(r=kG(t),!a)return FP(t,r)}else{var d=Cm(t),h=d==nR||d==p9;if(bm(t))return YP(t,a);if(d==iR||d==tR||h&&!s){if(r=l||h?{}:eR(t),!a)return l?pG(t,iG(r,t)):cG(t,nG(r,t))}else{if(!Vn[d])return s?t:{};r=ZG(t,d,a)}}o||(o=new cr);var f=o.get(t);if(f)return f;o.set(t,r),s9(t)?t.forEach(function(y){r.add(Mf(y,e,n,y,t,o))}):e9(t)&&t.forEach(function(y,_){r.set(_,Mf(y,e,n,_,t,o))});var m=c?l?hG:u1:l?og:sg,g=u?void 0:m(t);return ZU(g||t,function(y,_){g&&(_=y,y=t[_]),xE(r,_,Mf(y,e,n,_,t,o))}),r}var A9=4;function zx(t){return Mf(t,A9)}var L9=1,O9=4;function sR(t){return Mf(t,L9|O9)}var P9="__lodash_hash_undefined__";function R9(t){return this.__data__.set(t,P9),this}function V9(t){return this.__data__.has(t)}function Sm(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new ul;++e<n;)this.add(t[e])}Sm.prototype.add=Sm.prototype.push=R9;Sm.prototype.has=V9;function F9(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function oR(t,e){return t.has(e)}var D9=1,N9=2;function rR(t,e,n,i,s,o){var r=n&D9,a=t.length,l=e.length;if(a!=l&&!(r&&l>a))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var d=-1,h=!0,f=n&N9?new Sm:void 0;for(o.set(t,e),o.set(e,t);++d<a;){var m=t[d],g=e[d];if(i)var y=r?i(g,m,d,e,t,o):i(m,g,d,t,e,o);if(y!==void 0){if(y)continue;h=!1;break}if(f){if(!F9(e,function(_,C){if(!oR(f,C)&&(m===_||s(m,_,n,i,o)))return f.push(C)})){h=!1;break}}else if(!(m===g||s(m,g,n,i,o))){h=!1;break}}return o.delete(t),o.delete(e),h}function B9(t){var e=-1,n=Array(t.size);return t.forEach(function(i,s){n[++e]=[s,i]}),n}function NE(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=i}),n}var z9=1,H9=2,U9="[object Boolean]",W9="[object Date]",G9="[object Error]",j9="[object Map]",q9="[object Number]",K9="[object RegExp]",Y9="[object Set]",Z9="[object String]",X9="[object Symbol]",Q9="[object ArrayBuffer]",J9="[object DataView]",Hx=jo?jo.prototype:void 0,lw=Hx?Hx.valueOf:void 0;function ej(t,e,n,i,s,o,r){switch(n){case J9:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Q9:return!(t.byteLength!=e.byteLength||!o(new Wy(t),new Wy(e)));case U9:case W9:case q9:return ng(+t,+e);case G9:return t.name==e.name&&t.message==e.message;case K9:case Z9:return t==e+"";case j9:var a=B9;case Y9:var l=i&z9;if(a||(a=NE),t.size!=e.size&&!l)return!1;var c=r.get(t);if(c)return c==e;i|=H9,r.set(t,e);var u=rR(a(t),a(e),i,s,o,r);return r.delete(t),u;case X9:if(lw)return lw.call(t)==lw.call(e)}return!1}var tj=1,nj=Object.prototype,ij=nj.hasOwnProperty;function sj(t,e,n,i,s,o){var r=n&tj,a=u1(t),l=a.length,c=u1(e),u=c.length;if(l!=u&&!r)return!1;for(var d=l;d--;){var h=a[d];if(!(r?h in e:ij.call(e,h)))return!1}var f=o.get(t),m=o.get(e);if(f&&m)return f==e&&m==t;var g=!0;o.set(t,e),o.set(e,t);for(var y=r;++d<l;){h=a[d];var _=t[h],C=e[h];if(i)var w=r?i(C,_,h,e,t,o):i(_,C,h,t,e,o);if(!(w===void 0?_===C||s(_,C,n,i,o):w)){g=!1;break}y||(y=h=="constructor")}if(g&&!y){var S=t.constructor,E=e.constructor;S!=E&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof E=="function"&&E instanceof E)&&(g=!1)}return o.delete(t),o.delete(e),g}var oj=1,Ux="[object Arguments]",Wx="[object Array]",Pg="[object Object]",rj=Object.prototype,Gx=rj.hasOwnProperty;function aj(t,e,n,i,s,o){var r=Os(t),a=Os(e),l=r?Wx:Cm(t),c=a?Wx:Cm(e);l=l==Ux?Pg:l,c=c==Ux?Pg:c;var u=l==Pg,d=c==Pg,h=l==c;if(h&&bm(t)){if(!bm(e))return!1;r=!0,u=!1}if(h&&!u)return o||(o=new cr),r||LE(t)?rR(t,e,n,i,s,o):ej(t,e,l,n,i,s,o);if(!(n&oj)){var f=u&&Gx.call(t,"__wrapped__"),m=d&&Gx.call(e,"__wrapped__");if(f||m){var g=f?t.value():t,y=m?e.value():e;return o||(o=new cr),s(g,y,n,i,o)}}return h?(o||(o=new cr),sj(t,e,n,i,s,o)):!1}function s_(t,e,n,i,s){return t===e?!0:t==null||e==null||!sa(t)&&!sa(e)?t!==t&&e!==e:aj(t,e,n,i,s_,s)}var lj=1,cj=2;function uj(t,e,n,i){var s=n.length,o=s,r=!i;if(t==null)return!o;for(t=Object(t);s--;){var a=n[s];if(r&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++s<o;){a=n[s];var l=a[0],c=t[l],u=a[1];if(r&&a[2]){if(c===void 0&&!(l in t))return!1}else{var d=new cr;if(i)var h=i(c,u,l,t,e,d);if(!(h===void 0?s_(u,c,lj|cj,i,d):h))return!1}}return!0}function aR(t){return t===t&&!Ps(t)}function dj(t){for(var e=sg(t),n=e.length;n--;){var i=e[n],s=t[i];e[n]=[i,s,aR(s)]}return e}function lR(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function pj(t){var e=dj(t);return e.length==1&&e[0][2]?lR(e[0][0],e[0][1]):function(n){return n===t||uj(n,t,e)}}function hj(t,e){return t!=null&&e in Object(t)}function fj(t,e,n){e=i_(e,t);for(var i=-1,s=e.length,o=!1;++i<s;){var r=rg(e[i]);if(!(o=t!=null&&n(t,r)))break;t=t[r]}return o||++i!=s?o:(s=t==null?0:t.length,!!s&&ME(s)&&Jb(r,s)&&(Os(t)||ym(t)))}function cR(t,e){return t!=null&&fj(t,e,hj)}var mj=1,gj=2;function vj(t,e){return OE(t)&&aR(e)?lR(rg(t),e):function(n){var i=xn(n,t);return i===void 0&&i===e?cR(n,t):s_(e,i,mj|gj)}}function yj(t){return function(e){return e==null?void 0:e[t]}}function bj(t){return function(e){return PE(e,t)}}function _j(t){return OE(t)?yj(rg(t)):bj(t)}function wj(t){return typeof t=="function"?t:t==null?kE:typeof t=="object"?Os(t)?vj(t[0],t[1]):pj(t):_j(t)}function Cj(t){return function(e,n,i){for(var s=-1,o=Object(e),r=i(e),a=r.length;a--;){var l=r[t?a:++s];if(n(o[l],l,o)===!1)break}return e}}var Sj=Cj();const uR=Sj;function Ej(t,e){return t&&uR(t,e,sg)}function kj(t,e){return function(n,i){if(n==null)return n;if(!yh(n))return t(n,i);for(var s=n.length,o=e?s:-1,r=Object(n);(e?o--:++o<s)&&i(r[o],o,r)!==!1;);return n}}var Tj=kj(Ej);const Ij=Tj;var xj=function(){return wr.Date.now()};const cw=xj;var Mj="Expected a function",$j=Math.max,Aj=Math.min;function Rs(t,e,n){var i,s,o,r,a,l,c=0,u=!1,d=!1,h=!0;if(typeof t!="function")throw new TypeError(Mj);e=bx(e)||0,Ps(n)&&(u=!!n.leading,d="maxWait"in n,o=d?$j(bx(n.maxWait)||0,e):o,h="trailing"in n?!!n.trailing:h);function f(k){var A=i,$=s;return i=s=void 0,c=k,r=t.apply($,A),r}function m(k){return c=k,a=setTimeout(_,e),u?f(k):r}function g(k){var A=k-l,$=k-c,L=e-A;return d?Aj(L,o-$):L}function y(k){var A=k-l,$=k-c;return l===void 0||A>=e||A<0||d&&$>=o}function _(){var k=cw();if(y(k))return C(k);a=setTimeout(_,g(k))}function C(k){return a=void 0,h&&i?f(k):(i=s=void 0,r)}function w(){a!==void 0&&clearTimeout(a),c=0,i=l=s=a=void 0}function S(){return a===void 0?r:C(cw())}function E(){var k=cw(),A=y(k);if(i=arguments,s=this,l=k,A){if(a===void 0)return m(l);if(d)return clearTimeout(a),a=setTimeout(_,e),f(l)}return a===void 0&&(a=setTimeout(_,e)),r}return E.cancel=w,E.flush=S,E}function h1(t,e,n){(n!==void 0&&!ng(t[e],n)||n===void 0&&!(e in t))&&IE(t,e,n)}function dR(t){return sa(t)&&yh(t)}function f1(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function Lj(t){return ig(t,og(t))}function Oj(t,e,n,i,s,o,r){var a=f1(t,n),l=f1(e,n),c=r.get(l);if(c){h1(t,n,c);return}var u=o?o(a,l,n+"",t,e,r):void 0,d=u===void 0;if(d){var h=Os(l),f=!h&&bm(l),m=!h&&!f&&LE(l);u=l,h||f||m?Os(a)?u=a:dR(a)?u=FP(a):f?(d=!1,u=YP(l,!0)):m?(d=!1,u=JP(l,!0)):u=[]:Y7(l)||ym(l)?(u=a,ym(a)?u=Lj(a):(!Ps(a)||TE(a))&&(u=eR(l))):d=!1}d&&(r.set(l,u),s(u,l,i,o,r),r.delete(l)),h1(t,n,u)}function pR(t,e,n,i,s){t!==e&&uR(e,function(o,r){if(s||(s=new cr),Ps(o))Oj(t,e,r,n,pR,i,s);else{var a=i?i(f1(t,r),o,r+"",t,e,s):void 0;a===void 0&&(a=o),h1(t,r,a)}},og)}function Pj(t,e,n){for(var i=-1,s=t==null?0:t.length;++i<s;)if(n(e,t[i]))return!0;return!1}function Rj(t,e){var n=-1,i=yh(t)?Array(t.length):[];return Ij(t,function(s,o,r){i[++n]=e(s,o,r)}),i}function Vj(t,e){var n=Os(t)?RP:Rj;return n(t,wj(e))}function Fj(t,e){return ag(Vj(t,e),1)}var Dj=1/0;function Nj(t){var e=t==null?0:t.length;return e?ag(t,Dj):[]}function hR(t){for(var e=-1,n=t==null?0:t.length,i={};++e<n;){var s=t[e];i[s[0]]=s[1]}return i}function So(t,e){return s_(t,e)}function Gi(t){return t==null}var Bj=lW(function(t,e,n){pR(t,e,n)});const fR=Bj;function mR(t,e,n,i){if(!Ps(t))return t;e=i_(e,t);for(var s=-1,o=e.length,r=o-1,a=t;a!=null&&++s<o;){var l=rg(e[s]),c=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(s!=r){var u=a[l];c=i?i(u,l,a):void 0,c===void 0&&(c=Ps(u)?u:Jb(e[s+1])?[]:{})}xE(a,l,c),a=a[l]}return t}function zj(t,e,n){for(var i=-1,s=e.length,o={};++i<s;){var r=e[i],a=PE(t,r);n(a,r)&&mR(o,i_(r,t),a)}return o}function Hj(t,e){return zj(t,e,function(n,i){return cR(t,i)})}var Uj=H7(function(t,e){return t==null?{}:Hj(t,e)});const Ua=Uj;function Wj(t,e,n){return t==null?t:mR(t,e,n)}var Gj="Expected a function";function Nu(t,e,n){var i=!0,s=!0;if(typeof t!="function")throw new TypeError(Gj);return Ps(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),Rs(t,e,{leading:i,maxWait:e,trailing:s})}var jj=1/0,qj=gp&&1/NE(new gp([,-0]))[1]==jj?function(t){return new gp(t)}:BU;const Kj=qj;var Yj=200;function Zj(t,e,n){var i=-1,s=tW,o=t.length,r=!0,a=[],l=a;if(n)r=!1,s=Pj;else if(o>=Yj){var c=e?null:Kj(t);if(c)return NE(c);r=!1,s=oR,l=new Sm}else l=e?[]:a;e:for(;++i<o;){var u=t[i],d=e?e(u):u;if(u=n||u!==0?u:0,r&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;e&&l.push(d),a.push(u)}else s(l,d,n)||(l!==a&&l.push(d),a.push(u))}return a}var Xj=BP(function(t){return Zj(ag(t,1,dR,!0))});const uw=Xj,Qj='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',Jj=t=>getComputedStyle(t).position==="fixed"?!1:t.offsetParent!==null,jx=t=>Array.from(t.querySelectorAll(Qj)).filter(e=>eq(e)&&Jj(e)),eq=t=>{if(t.tabIndex>0||t.tabIndex===0&&t.getAttribute("tabIndex")!==null)return!0;if(t.disabled)return!1;switch(t.nodeName){case"A":return!!t.href&&t.rel!=="ignore";case"INPUT":return!(t.type==="hidden"||t.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},Lv=function(t,e,...n){let i;e.includes("mouse")||e.includes("click")?i="MouseEvents":e.includes("key")?i="KeyboardEvent":i="HTMLEvents";const s=document.createEvent(i);return s.initEvent(e,...n),t.dispatchEvent(s),t},gR=t=>!t.getAttribute("aria-owns"),vR=(t,e,n)=>{const{parentNode:i}=t;if(!i)return null;const s=i.querySelectorAll(n),o=Array.prototype.indexOf.call(s,t);return s[o+e]||null},Ov=t=>{t&&(t.focus(),!gR(t)&&t.click())},Fn=(t,e,{checkForDefaultPrevented:n=!0}={})=>s=>{const o=t==null?void 0:t(s);if(n===!1||!o)return e==null?void 0:e(s)},qx=t=>e=>e.pointerType==="mouse"?t(e):void 0;var tq=Object.defineProperty,nq=Object.defineProperties,iq=Object.getOwnPropertyDescriptors,Kx=Object.getOwnPropertySymbols,sq=Object.prototype.hasOwnProperty,oq=Object.prototype.propertyIsEnumerable,Yx=(t,e,n)=>e in t?tq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rq=(t,e)=>{for(var n in e||(e={}))sq.call(e,n)&&Yx(t,n,e[n]);if(Kx)for(var n of Kx(e))oq.call(e,n)&&Yx(t,n,e[n]);return t},aq=(t,e)=>nq(t,iq(e));function Zx(t,e){var n;const i=yn();return Co(()=>{i.value=t()},aq(rq({},e),{flush:(n=e==null?void 0:e.flush)!=null?n:"sync"})),mh(i)}var Xx;const Nt=typeof window<"u",lq=t=>typeof t<"u",fi=t=>typeof t=="boolean",cq=t=>typeof t=="function",st=t=>typeof t=="number",uq=t=>typeof t=="string",Em=()=>{};Nt&&((Xx=window==null?void 0:window.navigator)!=null&&Xx.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Ku(t){return typeof t=="function"?t():p(t)}function yR(t,e){function n(...i){return new Promise((s,o)=>{Promise.resolve(t(()=>e.apply(this,i),{fn:e,thisArg:this,args:i})).then(s).catch(o)})}return n}function dq(t,e={}){let n,i,s=Em;const o=a=>{clearTimeout(a),s(),s=Em};return a=>{const l=Ku(t),c=Ku(e.maxWait);return n&&o(n),l<=0||c!==void 0&&c<=0?(i&&(o(i),i=null),Promise.resolve(a())):new Promise((u,d)=>{s=e.rejectOnCancel?d:u,c&&!i&&(i=setTimeout(()=>{n&&o(n),i=null,u(a())},c)),n=setTimeout(()=>{i&&o(i),i=null,u(a())},l)})}}function pq(t,e=!0,n=!0,i=!1){let s=0,o,r=!0,a=Em,l;const c=()=>{o&&(clearTimeout(o),o=void 0,a(),a=Em)};return d=>{const h=Ku(t),f=Date.now()-s,m=()=>l=d();if(c(),h<=0)return s=Date.now(),m();if(f>h&&(n||!r))s=Date.now(),m();else if(e)return new Promise((g,y)=>{a=i?y:g,o=setTimeout(()=>{s=Date.now(),r=!0,g(m()),c()},h-f)});return!n&&!o&&(o=setTimeout(()=>r=!0,h)),r=!1,l}}function hq(t){return t}function o_(t){return Fz()?($O(t),!0):!1}function fq(t,e=200,n={}){return yR(dq(e,n),t)}function mq(t,e=200,n={}){const i=F(t.value),s=fq(()=>{i.value=t.value},e,n);return Ce(t,()=>s()),i}function bR(t,e=200,n=!1,i=!0,s=!1){return yR(pq(e,n,i,s),t)}function BE(t,e=!0){vt()?ft(t):e?t():je(t)}function Yu(t,e,n={}){const{immediate:i=!0}=n,s=F(!1);let o=null;function r(){o&&(clearTimeout(o),o=null)}function a(){s.value=!1,r()}function l(...c){r(),s.value=!0,o=setTimeout(()=>{s.value=!1,o=null,t(...c)},Ku(e))}return i&&(s.value=!0,Nt&&l()),o_(a),{isPending:mh(s),start:l,stop:a}}function bo(t){var e;const n=Ku(t);return(e=n==null?void 0:n.$el)!=null?e:n}const bh=Nt?window:void 0,gq=Nt?window.document:void 0;function En(...t){let e,n,i,s;if(uq(t[0])||Array.isArray(t[0])?([n,i,s]=t,e=bh):[e,n,i,s]=t,!e)return Em;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const o=[],r=()=>{o.forEach(u=>u()),o.length=0},a=(u,d,h)=>(u.addEventListener(d,h,s),()=>u.removeEventListener(d,h,s)),l=Ce(()=>bo(e),u=>{r(),u&&o.push(...n.flatMap(d=>i.map(h=>a(u,d,h))))},{immediate:!0,flush:"post"}),c=()=>{l(),r()};return o_(c),c}function zE(t,e,n={}){const{window:i=bh,ignore:s=[],capture:o=!0,detectIframe:r=!1}=n;if(!i)return;let a=!0,l;const c=f=>s.some(m=>{if(typeof m=="string")return Array.from(i.document.querySelectorAll(m)).some(g=>g===f.target||f.composedPath().includes(g));{const g=bo(m);return g&&(f.target===g||f.composedPath().includes(g))}}),u=f=>{i.clearTimeout(l);const m=bo(t);if(!(!m||m===f.target||f.composedPath().includes(m))){if(f.detail===0&&(a=!c(f)),!a){a=!0;return}e(f)}},d=[En(i,"click",u,{passive:!0,capture:o}),En(i,"pointerdown",f=>{const m=bo(t);m&&(a=!f.composedPath().includes(m)&&!c(f))},{passive:!0}),En(i,"pointerup",f=>{if(f.button===0){const m=f.composedPath();f.composedPath=()=>m,l=i.setTimeout(()=>u(f),50)}},{passive:!0}),r&&En(i,"blur",f=>{var m;const g=bo(t);((m=i.document.activeElement)==null?void 0:m.tagName)==="IFRAME"&&!(g!=null&&g.contains(i.document.activeElement))&&e(f)})].filter(Boolean);return()=>d.forEach(f=>f())}function vq(t,e=!1){const n=F(),i=()=>n.value=Boolean(t());return i(),BE(i,e),n}function yq(t){return JSON.parse(JSON.stringify(t))}const m1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},g1="__vueuse_ssr_handlers__";m1[g1]=m1[g1]||{};m1[g1];function bq(t,e,{window:n=bh,initialValue:i=""}={}){const s=F(i),o=T(()=>{var r;return bo(e)||((r=n==null?void 0:n.document)==null?void 0:r.documentElement)});return Ce([o,()=>Ku(t)],([r,a])=>{var l;if(r&&n){const c=(l=n.getComputedStyle(r).getPropertyValue(a))==null?void 0:l.trim();s.value=c||i}},{immediate:!0}),Ce(s,r=>{var a;(a=o.value)!=null&&a.style&&o.value.style.setProperty(Ku(t),r)}),s}function _q({document:t=gq}={}){if(!t)return F("visible");const e=F(t.visibilityState);return En(t,"visibilitychange",()=>{e.value=t.visibilityState}),e}var Qx=Object.getOwnPropertySymbols,wq=Object.prototype.hasOwnProperty,Cq=Object.prototype.propertyIsEnumerable,Sq=(t,e)=>{var n={};for(var i in t)wq.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&Qx)for(var i of Qx(t))e.indexOf(i)<0&&Cq.call(t,i)&&(n[i]=t[i]);return n};function ms(t,e,n={}){const i=n,{window:s=bh}=i,o=Sq(i,["window"]);let r;const a=vq(()=>s&&"ResizeObserver"in s),l=()=>{r&&(r.disconnect(),r=void 0)},c=Ce(()=>bo(t),d=>{l(),a.value&&s&&d&&(r=new ResizeObserver(e),r.observe(d,o))},{immediate:!0,flush:"post"}),u=()=>{l(),c()};return o_(u),{isSupported:a,stop:u}}function Jx(t,e={}){const{reset:n=!0,windowResize:i=!0,windowScroll:s=!0,immediate:o=!0}=e,r=F(0),a=F(0),l=F(0),c=F(0),u=F(0),d=F(0),h=F(0),f=F(0);function m(){const g=bo(t);if(!g){n&&(r.value=0,a.value=0,l.value=0,c.value=0,u.value=0,d.value=0,h.value=0,f.value=0);return}const y=g.getBoundingClientRect();r.value=y.height,a.value=y.bottom,l.value=y.left,c.value=y.right,u.value=y.top,d.value=y.width,h.value=y.x,f.value=y.y}return ms(t,m),Ce(()=>bo(t),g=>!g&&m()),s&&En("scroll",m,{capture:!0,passive:!0}),i&&En("resize",m,{passive:!0}),BE(()=>{o&&m()}),{height:r,bottom:a,left:l,right:c,top:u,width:d,x:h,y:f,update:m}}var eM;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(eM||(eM={}));var Eq=Object.defineProperty,tM=Object.getOwnPropertySymbols,kq=Object.prototype.hasOwnProperty,Tq=Object.prototype.propertyIsEnumerable,nM=(t,e,n)=>e in t?Eq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Iq=(t,e)=>{for(var n in e||(e={}))kq.call(e,n)&&nM(t,n,e[n]);if(tM)for(var n of tM(e))Tq.call(e,n)&&nM(t,n,e[n]);return t};const xq={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Iq({linear:hq},xq);function Mq(t,e,n,i={}){var s,o,r;const{clone:a=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:d}=i,h=vt(),f=n||(h==null?void 0:h.emit)||((s=h==null?void 0:h.$emit)==null?void 0:s.bind(h))||((r=(o=h==null?void 0:h.proxy)==null?void 0:o.$emit)==null?void 0:r.bind(h==null?void 0:h.proxy));let m=c;e||(e="modelValue"),m=c||m||`update:${e.toString()}`;const g=_=>a?cq(a)?a(_):yq(_):_,y=()=>lq(t[e])?g(t[e]):d;if(l){const _=y(),C=F(_);return Ce(()=>t[e],w=>C.value=g(w)),Ce(C,w=>{(w!==t[e]||u)&&f(m,w)},{deep:u}),C}else return T({get(){return y()},set(_){f(m,_)}})}function $q({window:t=bh}={}){if(!t)return F(!1);const e=F(t.document.hasFocus());return En(t,"blur",()=>{e.value=!1}),En(t,"focus",()=>{e.value=!0}),e}function Aq(t={}){const{window:e=bh,initialWidth:n=1/0,initialHeight:i=1/0,listenOrientation:s=!0,includeScrollbar:o=!0}=t,r=F(n),a=F(i),l=()=>{e&&(o?(r.value=e.innerWidth,a.value=e.innerHeight):(r.value=e.document.documentElement.clientWidth,a.value=e.document.documentElement.clientHeight))};return l(),BE(l),En("resize",l,{passive:!0}),s&&En("orientationchange",l,{passive:!0}),{width:r,height:a}}const Lq=(t,e)=>{if(!Nt||!t||!e)return!1;const n=t.getBoundingClientRect();let i;return e instanceof Element?i=e.getBoundingClientRect():i={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<i.bottom&&n.bottom>i.top&&n.right>i.left&&n.left<i.right},iM=t=>{let e=0,n=t;for(;n;)e+=n.offsetTop,n=n.offsetParent;return e},Oq=(t,e)=>Math.abs(iM(t)-iM(e)),HE=t=>{let e,n;return t.type==="touchend"?(n=t.changedTouches[0].clientY,e=t.changedTouches[0].clientX):t.type.startsWith("touch")?(n=t.touches[0].clientY,e=t.touches[0].clientX):(n=t.clientY,e=t.clientX),{clientX:e,clientY:n}},Ui=t=>t===void 0,No=t=>!t&&t!==0||ze(t)&&t.length===0||Et(t)&&!Object.keys(t).length,gr=t=>typeof Element>"u"?!1:t instanceof Element,Pq=t=>Gi(t),Rq=t=>at(t)?!Number.isNaN(Number(t)):!1,_R=(t="")=>t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),Ur=t=>eg(t),km=t=>Object.keys(t),Vq=t=>Object.entries(t),Pv=(t,e,n)=>({get value(){return xn(t,e,n)},set value(i){Wj(t,e,i)}});class Fq extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function ki(t,e){throw new Fq(`[${t}] ${e}`)}const wR=(t="")=>t.split(" ").filter(e=>!!e.trim()),ur=(t,e)=>{if(!t||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return t.classList.contains(e)},Wr=(t,e)=>{!t||!e.trim()||t.classList.add(...wR(e))},Zs=(t,e)=>{!t||!e.trim()||t.classList.remove(...wR(e))},Ba=(t,e)=>{var n;if(!Nt||!t||!e)return"";let i=Go(e);i==="float"&&(i="cssFloat");try{const s=t.style[i];if(s)return s;const o=(n=document.defaultView)==null?void 0:n.getComputedStyle(t,"");return o?o[i]:""}catch{return t.style[i]}};function mi(t,e="px"){if(!t)return"";if(st(t)||Rq(t))return`${t}${e}`;if(at(t))return t}const Dq=(t,e)=>{if(!Nt)return!1;const n={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(e)],i=Ba(t,n);return["scroll","auto","overlay"].some(s=>i.includes(s))},UE=(t,e)=>{if(!Nt)return;let n=t;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(Dq(n,e))return n;n=n.parentNode}return n};let Rg;const CR=t=>{var e;if(!Nt)return 0;if(Rg!==void 0)return Rg;const n=document.createElement("div");n.className=`${t}-scrollbar__wrap`,n.style.visibility="hidden",n.style.width="100px",n.style.position="absolute",n.style.top="-9999px",document.body.appendChild(n);const i=n.offsetWidth;n.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",n.appendChild(s);const o=s.offsetWidth;return(e=n.parentNode)==null||e.removeChild(n),Rg=i-o,Rg};function SR(t,e){if(!Nt)return;if(!e){t.scrollTop=0;return}const n=[];let i=e.offsetParent;for(;i!==null&&t!==i&&t.contains(i);)n.push(i),i=i.offsetParent;const s=e.offsetTop+n.reduce((l,c)=>l+c.offsetTop,0),o=s+e.offsetHeight,r=t.scrollTop,a=r+t.clientHeight;s<r?t.scrollTop=s:o>a&&(t.scrollTop=o-t.clientHeight)}/*! Element Plus Icons Vue v2.0.10 */var Zt=(t,e)=>{let n=t.__vccOpts||t;for(let[i,s]of e)n[i]=s;return n},Nq={name:"ArrowDown"},Bq={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},zq=G("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"},null,-1),Hq=[zq];function Uq(t,e,n,i,s,o){return I(),H("svg",Bq,Hq)}var $c=Zt(Nq,[["render",Uq],["__file","arrow-down.vue"]]),Wq={name:"ArrowLeft"},Gq={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},jq=G("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"},null,-1),qq=[jq];function Kq(t,e,n,i,s,o){return I(),H("svg",Gq,qq)}var Cc=Zt(Wq,[["render",Kq],["__file","arrow-left.vue"]]),Yq={name:"ArrowRight"},Zq={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Xq=G("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"},null,-1),Qq=[Xq];function Jq(t,e,n,i,s,o){return I(),H("svg",Zq,Qq)}var $s=Zt(Yq,[["render",Jq],["__file","arrow-right.vue"]]),eK={name:"ArrowUp"},tK={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},nK=G("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z"},null,-1),iK=[nK];function sK(t,e,n,i,s,o){return I(),H("svg",tK,iK)}var r_=Zt(eK,[["render",sK],["__file","arrow-up.vue"]]),oK={name:"Back"},rK={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},aK=G("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"},null,-1),lK=G("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z"},null,-1),cK=[aK,lK];function uK(t,e,n,i,s,o){return I(),H("svg",rK,cK)}var dK=Zt(oK,[["render",uK],["__file","back.vue"]]),pK={name:"Calendar"},hK={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},fK=G("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64H128zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0v32zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64z"},null,-1),mK=[fK];function gK(t,e,n,i,s,o){return I(),H("svg",hK,mK)}var vK=Zt(pK,[["render",gK],["__file","calendar.vue"]]),yK={name:"CaretRight"},bK={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},_K=G("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"},null,-1),wK=[_K];function CK(t,e,n,i,s,o){return I(),H("svg",bK,wK)}var ER=Zt(yK,[["render",CK],["__file","caret-right.vue"]]),SK={name:"CaretTop"},EK={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},kK=G("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"},null,-1),TK=[kK];function IK(t,e,n,i,s,o){return I(),H("svg",EK,TK)}var xK=Zt(SK,[["render",IK],["__file","caret-top.vue"]]),MK={name:"Check"},$K={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},AK=G("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1),LK=[AK];function OK(t,e,n,i,s,o){return I(),H("svg",$K,LK)}var lg=Zt(MK,[["render",OK],["__file","check.vue"]]),PK={name:"CircleCheckFilled"},RK={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},VK=G("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),FK=[VK];function DK(t,e,n,i,s,o){return I(),H("svg",RK,FK)}var NK=Zt(PK,[["render",DK],["__file","circle-check-filled.vue"]]),BK={name:"CircleCheck"},zK={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},HK=G("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),UK=G("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"},null,-1),WK=[HK,UK];function GK(t,e,n,i,s,o){return I(),H("svg",zK,WK)}var WE=Zt(BK,[["render",GK],["__file","circle-check.vue"]]),jK={name:"CircleCloseFilled"},qK={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},KK=G("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336L512 457.664z"},null,-1),YK=[KK];function ZK(t,e,n,i,s,o){return I(),H("svg",qK,YK)}var GE=Zt(jK,[["render",ZK],["__file","circle-close-filled.vue"]]),XK={name:"CircleClose"},QK={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},JK=G("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248L466.752 512z"},null,-1),eY=G("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),tY=[JK,eY];function nY(t,e,n,i,s,o){return I(),H("svg",QK,tY)}var Ac=Zt(XK,[["render",nY],["__file","circle-close.vue"]]),iY={name:"Clock"},sY={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},oY=G("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),rY=G("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32z"},null,-1),aY=G("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32z"},null,-1),lY=[oY,rY,aY];function cY(t,e,n,i,s,o){return I(),H("svg",sY,lY)}var kR=Zt(iY,[["render",cY],["__file","clock.vue"]]),uY={name:"Close"},dY={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},pY=G("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),hY=[pY];function fY(t,e,n,i,s,o){return I(),H("svg",dY,hY)}var vr=Zt(uY,[["render",fY],["__file","close.vue"]]),mY={name:"DArrowLeft"},gY={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},vY=G("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"},null,-1),yY=[vY];function bY(t,e,n,i,s,o){return I(),H("svg",gY,yY)}var qp=Zt(mY,[["render",bY],["__file","d-arrow-left.vue"]]),_Y={name:"DArrowRight"},wY={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},CY=G("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688zm-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"},null,-1),SY=[CY];function EY(t,e,n,i,s,o){return I(),H("svg",wY,SY)}var Kp=Zt(_Y,[["render",EY],["__file","d-arrow-right.vue"]]),kY={name:"Delete"},TY={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},IY=G("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"},null,-1),xY=[IY];function MY(t,e,n,i,s,o){return I(),H("svg",TY,xY)}var $Y=Zt(kY,[["render",MY],["__file","delete.vue"]]),AY={name:"Document"},LY={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},OY=G("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640V384zm-26.496-64L640 154.496V320h165.504zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32zm160 448h384v64H320v-64zm0-192h160v64H320v-64zm0 384h384v64H320v-64z"},null,-1),PY=[OY];function RY(t,e,n,i,s,o){return I(),H("svg",LY,PY)}var VY=Zt(AY,[["render",RY],["__file","document.vue"]]),FY={name:"FullScreen"},DY={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},NY=G("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64l-192 .192zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64v-.064z"},null,-1),BY=[NY];function zY(t,e,n,i,s,o){return I(),H("svg",DY,BY)}var HY=Zt(FY,[["render",zY],["__file","full-screen.vue"]]),UY={name:"Hide"},WY={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},GY=G("path",{d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2L371.2 588.8ZM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z",fill:"currentColor"},null,-1),jY=G("path",{d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z",fill:"currentColor"},null,-1),qY=[GY,jY];function KY(t,e,n,i,s,o){return I(),H("svg",WY,qY)}var YY=Zt(UY,[["render",KY],["__file","hide.vue"]]),ZY={name:"InfoFilled"},XY={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},QY=G("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1),JY=[QY];function eZ(t,e,n,i,s,o){return I(),H("svg",XY,JY)}var jE=Zt(ZY,[["render",eZ],["__file","info-filled.vue"]]),tZ={name:"Loading"},nZ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},iZ=G("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"},null,-1),sZ=[iZ];function oZ(t,e,n,i,s,o){return I(),H("svg",nZ,sZ)}var Lc=Zt(tZ,[["render",oZ],["__file","loading.vue"]]),rZ={name:"Minus"},aZ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},lZ=G("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64z"},null,-1),cZ=[lZ];function uZ(t,e,n,i,s,o){return I(),H("svg",aZ,cZ)}var dZ=Zt(rZ,[["render",uZ],["__file","minus.vue"]]),pZ={name:"MoreFilled"},hZ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},fZ=G("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224z"},null,-1),mZ=[fZ];function gZ(t,e,n,i,s,o){return I(),H("svg",hZ,mZ)}var sM=Zt(pZ,[["render",gZ],["__file","more-filled.vue"]]),vZ={name:"More"},yZ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},bZ=G("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96zm336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96zm336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96z"},null,-1),_Z=[bZ];function wZ(t,e,n,i,s,o){return I(),H("svg",yZ,_Z)}var CZ=Zt(vZ,[["render",wZ],["__file","more.vue"]]),SZ={name:"PictureFilled"},EZ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},kZ=G("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32H96zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112zM256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384z"},null,-1),TZ=[kZ];function IZ(t,e,n,i,s,o){return I(),H("svg",EZ,TZ)}var xZ=Zt(SZ,[["render",IZ],["__file","picture-filled.vue"]]),MZ={name:"Plus"},$Z={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},AZ=G("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1),LZ=[AZ];function OZ(t,e,n,i,s,o){return I(),H("svg",$Z,LZ)}var TR=Zt(MZ,[["render",OZ],["__file","plus.vue"]]),PZ={name:"QuestionFilled"},RZ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},VZ=G("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"},null,-1),FZ=[VZ];function DZ(t,e,n,i,s,o){return I(),H("svg",RZ,FZ)}var NZ=Zt(PZ,[["render",DZ],["__file","question-filled.vue"]]),BZ={name:"RefreshLeft"},zZ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},HZ=G("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"},null,-1),UZ=[HZ];function WZ(t,e,n,i,s,o){return I(),H("svg",zZ,UZ)}var GZ=Zt(BZ,[["render",WZ],["__file","refresh-left.vue"]]),jZ={name:"RefreshRight"},qZ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},KZ=G("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"},null,-1),YZ=[KZ];function ZZ(t,e,n,i,s,o){return I(),H("svg",qZ,YZ)}var XZ=Zt(jZ,[["render",ZZ],["__file","refresh-right.vue"]]),QZ={name:"ScaleToOriginal"},JZ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},eX=G("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zM512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412zM512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512z"},null,-1),tX=[eX];function nX(t,e,n,i,s,o){return I(),H("svg",JZ,tX)}var iX=Zt(QZ,[["render",nX],["__file","scale-to-original.vue"]]),sX={name:"Search"},oX={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},rX=G("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1),aX=[rX];function lX(t,e,n,i,s,o){return I(),H("svg",oX,aX)}var cX=Zt(sX,[["render",lX],["__file","search.vue"]]),uX={name:"SortDown"},dX={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},pX=G("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0z"},null,-1),hX=[pX];function fX(t,e,n,i,s,o){return I(),H("svg",dX,hX)}var mX=Zt(uX,[["render",fX],["__file","sort-down.vue"]]),gX={name:"SortUp"},vX={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},yX=G("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248z"},null,-1),bX=[yX];function _X(t,e,n,i,s,o){return I(),H("svg",vX,bX)}var wX=Zt(gX,[["render",_X],["__file","sort-up.vue"]]),CX={name:"StarFilled"},SX={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},EX=G("path",{fill:"currentColor",d:"M283.84 867.84 512 747.776l228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72z"},null,-1),kX=[EX];function TX(t,e,n,i,s,o){return I(),H("svg",SX,kX)}var Vg=Zt(CX,[["render",TX],["__file","star-filled.vue"]]),IX={name:"Star"},xX={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},MX=G("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72L512 747.84zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"},null,-1),$X=[MX];function AX(t,e,n,i,s,o){return I(),H("svg",xX,$X)}var LX=Zt(IX,[["render",AX],["__file","star.vue"]]),OX={name:"SuccessFilled"},PX={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},RX=G("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),VX=[RX];function FX(t,e,n,i,s,o){return I(),H("svg",PX,VX)}var IR=Zt(OX,[["render",FX],["__file","success-filled.vue"]]),DX={name:"View"},NX={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},BX=G("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352zm0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448zm0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160z"},null,-1),zX=[BX];function HX(t,e,n,i,s,o){return I(),H("svg",NX,zX)}var UX=Zt(DX,[["render",HX],["__file","view.vue"]]),WX={name:"WarningFilled"},GX={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},jX=G("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256zm0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4z"},null,-1),qX=[jX];function KX(t,e,n,i,s,o){return I(),H("svg",GX,qX)}var a_=Zt(WX,[["render",KX],["__file","warning-filled.vue"]]),YX={name:"ZoomIn"},ZX={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},XX=G("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zm-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64h96z"},null,-1),QX=[XX];function JX(t,e,n,i,s,o){return I(),H("svg",ZX,QX)}var xR=Zt(YX,[["render",JX],["__file","zoom-in.vue"]]),eQ={name:"ZoomOut"},tQ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},nQ=G("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zM352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64z"},null,-1),iQ=[nQ];function sQ(t,e,n,i,s,o){return I(),H("svg",tQ,iQ)}var oQ=Zt(eQ,[["render",sQ],["__file","zoom-out.vue"]]);const MR="__epPropKey",ae=t=>t,rQ=t=>Et(t)&&!!t[MR],Cr=(t,e)=>{if(!Et(t)||rQ(t))return t;const{values:n,required:i,default:s,type:o,validator:r}=t,l={type:o,required:!!i,validator:n||r?c=>{let u=!1,d=[];if(n&&(d=Array.from(n),Pt(t,"default")&&d.push(s),u||(u=d.includes(c))),r&&(u||(u=r(c))),!u&&d.length>0){const h=[...new Set(d)].map(f=>JSON.stringify(f)).join(", ");hH(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${h}], got value ${JSON.stringify(c)}.`)}return u}:void 0,[MR]:!0};return Pt(t,"default")&&(l.default=s),l},De=t=>hR(Object.entries(t).map(([e,n])=>[e,Cr(n,e)])),gn=ae([String,Object,Function]),$R={Close:vr},qE={Close:vr,SuccessFilled:IR,InfoFilled:jE,WarningFilled:a_,CircleCloseFilled:GE},Sc={success:IR,warning:a_,error:GE,info:jE},AR={validating:Lc,success:WE,error:Ac},yt=(t,e)=>{if(t.install=n=>{for(const i of[t,...Object.values(e??{})])n.component(i.name,i)},e)for(const[n,i]of Object.entries(e))t[n]=i;return t},LR=(t,e)=>(t.install=n=>{t._context=n._context,n.config.globalProperties[e]=t},t),aQ=(t,e)=>(t.install=n=>{n.directive(e,t)},t),Nn=t=>(t.install=nn,t),l_=(...t)=>e=>{t.forEach(n=>{ot(n)?n(e):n.value=e})},Xe={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},lQ=["year","month","date","dates","week","datetime","datetimerange","daterange","monthrange"],dw=["sun","mon","tue","wed","thu","fri","sat"],wt="update:modelValue",bn="change",As="input",oM=Symbol("INSTALLED_KEY"),dl=["","default","small","large"],cQ={large:40,default:32,small:24},uQ=t=>cQ[t||"default"],cg=t=>["",...dl].includes(t);var Fo=(t=>(t[t.TEXT=1]="TEXT",t[t.CLASS=2]="CLASS",t[t.STYLE=4]="STYLE",t[t.PROPS=8]="PROPS",t[t.FULL_PROPS=16]="FULL_PROPS",t[t.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",t[t.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",t[t.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",t[t.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",t[t.NEED_PATCH=512]="NEED_PATCH",t[t.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",t[t.HOISTED=-1]="HOISTED",t[t.BAIL=-2]="BAIL",t))(Fo||{});function v1(t){return $n(t)&&t.type===Ye}function dQ(t){return $n(t)&&t.type===Ms}function pQ(t){return $n(t)&&!v1(t)&&!dQ(t)}const hQ=t=>{if(!$n(t))return{};const e=t.props||{},n=($n(t.type)?t.type.props:void 0)||{},i={};return Object.keys(n).forEach(s=>{Pt(n[s],"default")&&(i[s]=n[s].default)}),Object.keys(e).forEach(s=>{i[Go(s)]=e[s]}),i},fQ=t=>{if(!ze(t)||t.length>1)throw new Error("expect to receive a single Vue element child");return t[0]},vp=t=>{const e=ze(t)?t:[t],n=[];return e.forEach(i=>{var s;ze(i)?n.push(...vp(i)):$n(i)&&ze(i.children)?n.push(...vp(i.children)):(n.push(i),$n(i)&&((s=i.component)!=null&&s.subTree)&&n.push(...vp(i.component.subTree)))}),n},rM=t=>t**3,mQ=t=>t<.5?rM(t*2)/2:1-rM((1-t)*2)/2,aM=t=>[...new Set(t)],Ga=t=>!t&&t!==0?[]:Array.isArray(t)?t:[t],KE=()=>Nt&&/firefox/i.test(window.navigator.userAgent),c_=t=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(t),Tm=t=>Nt?window.requestAnimationFrame(t):setTimeout(t,16),u_=t=>Nt?window.cancelAnimationFrame(t):clearTimeout(t),d_=()=>Math.floor(Math.random()*1e4),Mn=t=>t,gQ=["class","style"],vQ=/^on[A-Z]/,YE=(t={})=>{const{excludeListeners:e=!1,excludeKeys:n}=t,i=T(()=>((n==null?void 0:n.value)||[]).concat(gQ)),s=vt();return T(s?()=>{var o;return hR(Object.entries((o=s.proxy)==null?void 0:o.$attrs).filter(([r])=>!i.value.includes(r)&&!(e&&vQ.test(r))))}:()=>({}))},OR=Symbol("breadcrumbKey"),PR=Symbol("buttonGroupContextKey"),RR=Symbol("carouselContextKey"),_h=Symbol("checkboxGroupContextKey"),VR=Symbol("collapseContextKey"),FR=Symbol(),DR=Symbol("dialogInjectionKey"),id=Symbol("formContextKey"),oa=Symbol("formItemContextKey"),NR=Symbol("elPaginationKey"),BR=Symbol("radioGroupKey"),zR=Symbol("rowContextKey"),HR=Symbol("scrollbarContextKey"),UR=Symbol("sliderContextKey"),p_=Symbol("tabsRootContextKey"),WR=Symbol("uploadContextKey"),ZE=Symbol("popper"),GR=Symbol("popperContent"),h_=Symbol("elTooltip"),f_=Symbol("tooltipV2"),jR=Symbol("tooltipV2Content"),pw="tooltip_v2.open",XE=Symbol(),qR=t=>{const e=vt();return T(()=>{var n,i;return(i=((n=e.proxy)==null?void 0:n.$props)[t])!=null?i:void 0})},Gy=F();function pl(t,e=void 0){const n=vt()?qe(FR,Gy):Gy;return t?T(()=>{var i,s;return(s=(i=n.value)==null?void 0:i[t])!=null?s:e}):n}const KR=(t,e,n=!1)=>{var i;const s=!!vt(),o=s?pl():void 0,r=(i=e==null?void 0:e.provide)!=null?i:s?xt:void 0;if(!r)return;const a=T(()=>{const l=p(t);return o!=null&&o.value?yQ(o.value,l):l});return r(FR,a),(n||!Gy.value)&&(Gy.value=a.value),a},yQ=(t,e)=>{var n;const i=[...new Set([...km(t),...km(e)])],s={};for(const o of i)s[o]=(n=e[o])!=null?n:t[o];return s},Vs=Cr({type:String,values:dl,required:!1}),gi=(t,e={})=>{const n=F(void 0),i=e.prop?n:qR("size"),s=e.global?n:pl("size"),o=e.form?{size:void 0}:qe(id,void 0),r=e.formItem?{size:void 0}:qe(oa,void 0);return T(()=>i.value||p(t)||(r==null?void 0:r.size)||(o==null?void 0:o.size)||s.value||"")},eo=t=>{const e=qR("disabled"),n=qe(id,void 0);return T(()=>e.value||p(t)||(n==null?void 0:n.disabled)||!1)},Xa=({from:t,replacement:e,scope:n,version:i,ref:s,type:o="API"},r)=>{Ce(()=>p(r),a=>{},{immediate:!0})},YR=(t,e,n)=>{let i={offsetX:0,offsetY:0};const s=a=>{const l=a.clientX,c=a.clientY,{offsetX:u,offsetY:d}=i,h=t.value.getBoundingClientRect(),f=h.left,m=h.top,g=h.width,y=h.height,_=document.documentElement.clientWidth,C=document.documentElement.clientHeight,w=-f+u,S=-m+d,E=_-f-g+u,k=C-m-y+d,A=L=>{const O=Math.min(Math.max(u+L.clientX-l,w),E),B=Math.min(Math.max(d+L.clientY-c,S),k);i={offsetX:O,offsetY:B},t.value.style.transform=`translate(${mi(O)}, ${mi(B)})`},$=()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",$)};document.addEventListener("mousemove",A),document.addEventListener("mouseup",$)},o=()=>{e.value&&t.value&&e.value.addEventListener("mousedown",s)},r=()=>{e.value&&t.value&&e.value.removeEventListener("mousedown",s)};ft(()=>{Co(()=>{n.value?o():r()})}),Pn(()=>{r()})},bQ=t=>({focus:()=>{var e,n;(n=(e=t.value)==null?void 0:e.focus)==null||n.call(e)}}),m_="el",_Q="is-",Bc=(t,e,n,i,s)=>{let o=`${t}-${e}`;return n&&(o+=`-${n}`),i&&(o+=`__${i}`),s&&(o+=`--${s}`),o},_e=t=>{const e=pl("namespace",m_);return{namespace:e,b:(m="")=>Bc(e.value,t,m,"",""),e:m=>m?Bc(e.value,t,"",m,""):"",m:m=>m?Bc(e.value,t,"","",m):"",be:(m,g)=>m&&g?Bc(e.value,t,m,g,""):"",em:(m,g)=>m&&g?Bc(e.value,t,"",m,g):"",bm:(m,g)=>m&&g?Bc(e.value,t,m,"",g):"",bem:(m,g,y)=>m&&g&&y?Bc(e.value,t,m,g,y):"",is:(m,...g)=>{const y=g.length>=1?g[0]:!0;return m&&y?`${_Q}${m}`:""},cssVar:m=>{const g={};for(const y in m)m[y]&&(g[`--${e.value}-${y}`]=m[y]);return g},cssVarName:m=>`--${e.value}-${m}`,cssVarBlock:m=>{const g={};for(const y in m)m[y]&&(g[`--${e.value}-${t}-${y}`]=m[y]);return g},cssVarBlockName:m=>`--${e.value}-${t}-${m}`}},lM={prefix:Math.floor(Math.random()*1e4),current:0},wQ=Symbol("elIdInjection"),ZR=()=>vt()?qe(wQ,lM):lM,yr=t=>{const e=ZR(),n=pl("namespace",m_);return T(()=>p(t)||`${n.value}-id-${e.prefix}-${e.current++}`)},Ns=()=>{const t=qe(id,void 0),e=qe(oa,void 0);return{form:t,formItem:e}},Oc=(t,{formItemContext:e,disableIdGeneration:n,disableIdManagement:i})=>{n||(n=F(!1)),i||(i=F(!1));const s=F();let o;const r=T(()=>{var a;return!!(!t.label&&e&&e.inputIds&&((a=e.inputIds)==null?void 0:a.length)<=1)});return ft(()=>{o=Ce([On(t,"id"),n],([a,l])=>{const c=a??(l?void 0:yr().value);c!==s.value&&(e!=null&&e.removeInputId&&(s.value&&e.removeInputId(s.value),!(i!=null&&i.value)&&!l&&c&&e.addInputId(c)),s.value=c)},{immediate:!0})}),Mc(()=>{o&&o(),e!=null&&e.removeInputId&&s.value&&e.removeInputId(s.value)}),{isLabeledByFormItem:r,inputId:s}};var CQ={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const SQ=t=>(e,n)=>EQ(e,n,p(t)),EQ=(t,e,n)=>xn(n,t,t).replace(/\{(\w+)\}/g,(i,s)=>{var o;return`${(o=e==null?void 0:e[s])!=null?o:`{${s}}`}`}),kQ=t=>{const e=T(()=>p(t).name),n=pn(t)?t:F(t);return{lang:e,locale:n,t:SQ(t)}},Gt=()=>{const t=pl("locale");return kQ(T(()=>t.value||CQ))},XR=t=>{pn(t)||ki("[useLockscreen]","You need to pass a ref param to this function");const e=_e("popup"),n=qO(()=>e.bm("parent","hidden"));if(!Nt||ur(document.body,n.value))return;let i=0,s=!1,o="0";const r=()=>{setTimeout(()=>{Zs(document.body,n.value),s&&(document.body.style.width=o)},200)};Ce(t,a=>{if(!a){r();return}s=!ur(document.body,n.value),s&&(o=document.body.style.width),i=CR(e.namespace.value);const l=document.documentElement.clientHeight<document.body.scrollHeight,c=Ba(document.body,"overflowY");i>0&&(l||c==="scroll")&&s&&(document.body.style.width=`calc(100% - ${i}px)`),Wr(document.body,n.value)}),$O(()=>r())},TQ=Cr({type:ae(Boolean),default:null}),IQ=Cr({type:ae(Function)}),xQ=t=>{const e=`update:${t}`,n=`onUpdate:${t}`,i=[e],s={[t]:TQ,[n]:IQ};return{useModelToggle:({indicator:r,toggleReason:a,shouldHideWhenRouteChanges:l,shouldProceed:c,onShow:u,onHide:d})=>{const h=vt(),{emit:f}=h,m=h.props,g=T(()=>ot(m[n])),y=T(()=>m[t]===null),_=A=>{r.value!==!0&&(r.value=!0,a&&(a.value=A),ot(u)&&u(A))},C=A=>{r.value!==!1&&(r.value=!1,a&&(a.value=A),ot(d)&&d(A))},w=A=>{if(m.disabled===!0||ot(c)&&!c())return;const $=g.value&&Nt;$&&f(e,!0),(y.value||!$)&&_(A)},S=A=>{if(m.disabled===!0||!Nt)return;const $=g.value&&Nt;$&&f(e,!1),(y.value||!$)&&C(A)},E=A=>{fi(A)&&(m.disabled&&A?g.value&&f(e,!1):r.value!==A&&(A?_():C()))},k=()=>{r.value?S():w()};return Ce(()=>m[t],E),l&&h.appContext.config.globalProperties.$route!==void 0&&Ce(()=>({...h.proxy.$route}),()=>{l.value&&r.value&&S()}),ft(()=>{E(m[t])}),{hide:S,show:w,toggle:k,hasUpdateHandler:g}},useModelToggleProps:s,useModelToggleEmits:i}};var Xs="top",qo="bottom",Ko="right",Qs="left",QE="auto",ug=[Xs,qo,Ko,Qs],Yp="start",Im="end",MQ="clippingParents",QR="viewport",Ph="popper",$Q="reference",cM=ug.reduce(function(t,e){return t.concat([e+"-"+Yp,e+"-"+Im])},[]),sd=[].concat(ug,[QE]).reduce(function(t,e){return t.concat([e,e+"-"+Yp,e+"-"+Im])},[]),AQ="beforeRead",LQ="read",OQ="afterRead",PQ="beforeMain",RQ="main",VQ="afterMain",FQ="beforeWrite",DQ="write",NQ="afterWrite",BQ=[AQ,LQ,OQ,PQ,RQ,VQ,FQ,DQ,NQ];function ra(t){return t?(t.nodeName||"").toLowerCase():null}function Sr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Zp(t){var e=Sr(t).Element;return t instanceof e||t instanceof Element}function Wo(t){var e=Sr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function JE(t){if(typeof ShadowRoot>"u")return!1;var e=Sr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function zQ(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},s=e.attributes[n]||{},o=e.elements[n];!Wo(o)||!ra(o)||(Object.assign(o.style,i),Object.keys(s).forEach(function(r){var a=s[r];a===!1?o.removeAttribute(r):o.setAttribute(r,a===!0?"":a)}))})}function HQ(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var s=e.elements[i],o=e.attributes[i]||{},r=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),a=r.reduce(function(l,c){return l[c]="",l},{});!Wo(s)||!ra(s)||(Object.assign(s.style,a),Object.keys(o).forEach(function(l){s.removeAttribute(l)}))})}}var JR={name:"applyStyles",enabled:!0,phase:"write",fn:zQ,effect:HQ,requires:["computeStyles"]};function Xr(t){return t.split("-")[0]}var Bu=Math.max,jy=Math.min,Xp=Math.round;function Qp(t,e){e===void 0&&(e=!1);var n=t.getBoundingClientRect(),i=1,s=1;if(Wo(t)&&e){var o=t.offsetHeight,r=t.offsetWidth;r>0&&(i=Xp(n.width)/r||1),o>0&&(s=Xp(n.height)/o||1)}return{width:n.width/i,height:n.height/s,top:n.top/s,right:n.right/i,bottom:n.bottom/s,left:n.left/i,x:n.left/i,y:n.top/s}}function ek(t){var e=Qp(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function eV(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&JE(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Qa(t){return Sr(t).getComputedStyle(t)}function UQ(t){return["table","td","th"].indexOf(ra(t))>=0}function Pc(t){return((Zp(t)?t.ownerDocument:t.document)||window.document).documentElement}function g_(t){return ra(t)==="html"?t:t.assignedSlot||t.parentNode||(JE(t)?t.host:null)||Pc(t)}function uM(t){return!Wo(t)||Qa(t).position==="fixed"?null:t.offsetParent}function WQ(t){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&Wo(t)){var i=Qa(t);if(i.position==="fixed")return null}var s=g_(t);for(JE(s)&&(s=s.host);Wo(s)&&["html","body"].indexOf(ra(s))<0;){var o=Qa(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function dg(t){for(var e=Sr(t),n=uM(t);n&&UQ(n)&&Qa(n).position==="static";)n=uM(n);return n&&(ra(n)==="html"||ra(n)==="body"&&Qa(n).position==="static")?e:n||WQ(t)||e}function tk(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function $f(t,e,n){return Bu(t,jy(e,n))}function GQ(t,e,n){var i=$f(t,e,n);return i>n?n:i}function tV(){return{top:0,right:0,bottom:0,left:0}}function nV(t){return Object.assign({},tV(),t)}function iV(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var jQ=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,nV(typeof t!="number"?t:iV(t,ug))};function qQ(t){var e,n=t.state,i=t.name,s=t.options,o=n.elements.arrow,r=n.modifiersData.popperOffsets,a=Xr(n.placement),l=tk(a),c=[Qs,Ko].indexOf(a)>=0,u=c?"height":"width";if(!(!o||!r)){var d=jQ(s.padding,n),h=ek(o),f=l==="y"?Xs:Qs,m=l==="y"?qo:Ko,g=n.rects.reference[u]+n.rects.reference[l]-r[l]-n.rects.popper[u],y=r[l]-n.rects.reference[l],_=dg(o),C=_?l==="y"?_.clientHeight||0:_.clientWidth||0:0,w=g/2-y/2,S=d[f],E=C-h[u]-d[m],k=C/2-h[u]/2+w,A=$f(S,k,E),$=l;n.modifiersData[i]=(e={},e[$]=A,e.centerOffset=A-k,e)}}function KQ(t){var e=t.state,n=t.options,i=n.element,s=i===void 0?"[data-popper-arrow]":i;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||!eV(e.elements.popper,s)||(e.elements.arrow=s))}var YQ={name:"arrow",enabled:!0,phase:"main",fn:qQ,effect:KQ,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Jp(t){return t.split("-")[1]}var ZQ={top:"auto",right:"auto",bottom:"auto",left:"auto"};function XQ(t){var e=t.x,n=t.y,i=window,s=i.devicePixelRatio||1;return{x:Xp(e*s)/s||0,y:Xp(n*s)/s||0}}function dM(t){var e,n=t.popper,i=t.popperRect,s=t.placement,o=t.variation,r=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=r.x,f=h===void 0?0:h,m=r.y,g=m===void 0?0:m,y=typeof u=="function"?u({x:f,y:g}):{x:f,y:g};f=y.x,g=y.y;var _=r.hasOwnProperty("x"),C=r.hasOwnProperty("y"),w=Qs,S=Xs,E=window;if(c){var k=dg(n),A="clientHeight",$="clientWidth";if(k===Sr(n)&&(k=Pc(n),Qa(k).position!=="static"&&a==="absolute"&&(A="scrollHeight",$="scrollWidth")),k=k,s===Xs||(s===Qs||s===Ko)&&o===Im){S=qo;var L=d&&k===E&&E.visualViewport?E.visualViewport.height:k[A];g-=L-i.height,g*=l?1:-1}if(s===Qs||(s===Xs||s===qo)&&o===Im){w=Ko;var O=d&&k===E&&E.visualViewport?E.visualViewport.width:k[$];f-=O-i.width,f*=l?1:-1}}var B=Object.assign({position:a},c&&ZQ),V=u===!0?XQ({x:f,y:g}):{x:f,y:g};if(f=V.x,g=V.y,l){var P;return Object.assign({},B,(P={},P[S]=C?"0":"",P[w]=_?"0":"",P.transform=(E.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",P))}return Object.assign({},B,(e={},e[S]=C?g+"px":"",e[w]=_?f+"px":"",e.transform="",e))}function QQ(t){var e=t.state,n=t.options,i=n.gpuAcceleration,s=i===void 0?!0:i,o=n.adaptive,r=o===void 0?!0:o,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Xr(e.placement),variation:Jp(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,dM(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:r,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,dM(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var sV={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:QQ,data:{}},Fg={passive:!0};function JQ(t){var e=t.state,n=t.instance,i=t.options,s=i.scroll,o=s===void 0?!0:s,r=i.resize,a=r===void 0?!0:r,l=Sr(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach(function(u){u.addEventListener("scroll",n.update,Fg)}),a&&l.addEventListener("resize",n.update,Fg),function(){o&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Fg)}),a&&l.removeEventListener("resize",n.update,Fg)}}var oV={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:JQ,data:{}},eJ={left:"right",right:"left",bottom:"top",top:"bottom"};function Rv(t){return t.replace(/left|right|bottom|top/g,function(e){return eJ[e]})}var tJ={start:"end",end:"start"};function pM(t){return t.replace(/start|end/g,function(e){return tJ[e]})}function nk(t){var e=Sr(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function ik(t){return Qp(Pc(t)).left+nk(t).scrollLeft}function nJ(t){var e=Sr(t),n=Pc(t),i=e.visualViewport,s=n.clientWidth,o=n.clientHeight,r=0,a=0;return i&&(s=i.width,o=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(r=i.offsetLeft,a=i.offsetTop)),{width:s,height:o,x:r+ik(t),y:a}}function iJ(t){var e,n=Pc(t),i=nk(t),s=(e=t.ownerDocument)==null?void 0:e.body,o=Bu(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),r=Bu(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-i.scrollLeft+ik(t),l=-i.scrollTop;return Qa(s||n).direction==="rtl"&&(a+=Bu(n.clientWidth,s?s.clientWidth:0)-o),{width:o,height:r,x:a,y:l}}function sk(t){var e=Qa(t),n=e.overflow,i=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+i)}function rV(t){return["html","body","#document"].indexOf(ra(t))>=0?t.ownerDocument.body:Wo(t)&&sk(t)?t:rV(g_(t))}function Af(t,e){var n;e===void 0&&(e=[]);var i=rV(t),s=i===((n=t.ownerDocument)==null?void 0:n.body),o=Sr(i),r=s?[o].concat(o.visualViewport||[],sk(i)?i:[]):i,a=e.concat(r);return s?a:a.concat(Af(g_(r)))}function y1(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function sJ(t){var e=Qp(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function hM(t,e){return e===QR?y1(nJ(t)):Zp(e)?sJ(e):y1(iJ(Pc(t)))}function oJ(t){var e=Af(g_(t)),n=["absolute","fixed"].indexOf(Qa(t).position)>=0,i=n&&Wo(t)?dg(t):t;return Zp(i)?e.filter(function(s){return Zp(s)&&eV(s,i)&&ra(s)!=="body"}):[]}function rJ(t,e,n){var i=e==="clippingParents"?oJ(t):[].concat(e),s=[].concat(i,[n]),o=s[0],r=s.reduce(function(a,l){var c=hM(t,l);return a.top=Bu(c.top,a.top),a.right=jy(c.right,a.right),a.bottom=jy(c.bottom,a.bottom),a.left=Bu(c.left,a.left),a},hM(t,o));return r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}function aV(t){var e=t.reference,n=t.element,i=t.placement,s=i?Xr(i):null,o=i?Jp(i):null,r=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(s){case Xs:l={x:r,y:e.y-n.height};break;case qo:l={x:r,y:e.y+e.height};break;case Ko:l={x:e.x+e.width,y:a};break;case Qs:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=s?tk(s):null;if(c!=null){var u=c==="y"?"height":"width";switch(o){case Yp:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Im:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function xm(t,e){e===void 0&&(e={});var n=e,i=n.placement,s=i===void 0?t.placement:i,o=n.boundary,r=o===void 0?MQ:o,a=n.rootBoundary,l=a===void 0?QR:a,c=n.elementContext,u=c===void 0?Ph:c,d=n.altBoundary,h=d===void 0?!1:d,f=n.padding,m=f===void 0?0:f,g=nV(typeof m!="number"?m:iV(m,ug)),y=u===Ph?$Q:Ph,_=t.rects.popper,C=t.elements[h?y:u],w=rJ(Zp(C)?C:C.contextElement||Pc(t.elements.popper),r,l),S=Qp(t.elements.reference),E=aV({reference:S,element:_,strategy:"absolute",placement:s}),k=y1(Object.assign({},_,E)),A=u===Ph?k:S,$={top:w.top-A.top+g.top,bottom:A.bottom-w.bottom+g.bottom,left:w.left-A.left+g.left,right:A.right-w.right+g.right},L=t.modifiersData.offset;if(u===Ph&&L){var O=L[s];Object.keys($).forEach(function(B){var V=[Ko,qo].indexOf(B)>=0?1:-1,P=[Xs,qo].indexOf(B)>=0?"y":"x";$[B]+=O[P]*V})}return $}function aJ(t,e){e===void 0&&(e={});var n=e,i=n.placement,s=n.boundary,o=n.rootBoundary,r=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?sd:l,u=Jp(i),d=u?a?cM:cM.filter(function(m){return Jp(m)===u}):ug,h=d.filter(function(m){return c.indexOf(m)>=0});h.length===0&&(h=d);var f=h.reduce(function(m,g){return m[g]=xm(t,{placement:g,boundary:s,rootBoundary:o,padding:r})[Xr(g)],m},{});return Object.keys(f).sort(function(m,g){return f[m]-f[g]})}function lJ(t){if(Xr(t)===QE)return[];var e=Rv(t);return[pM(t),e,pM(e)]}function cJ(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var s=n.mainAxis,o=s===void 0?!0:s,r=n.altAxis,a=r===void 0?!0:r,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,m=f===void 0?!0:f,g=n.allowedAutoPlacements,y=e.options.placement,_=Xr(y),C=_===y,w=l||(C||!m?[Rv(y)]:lJ(y)),S=[y].concat(w).reduce(function(we,Se){return we.concat(Xr(Se)===QE?aJ(e,{placement:Se,boundary:u,rootBoundary:d,padding:c,flipVariations:m,allowedAutoPlacements:g}):Se)},[]),E=e.rects.reference,k=e.rects.popper,A=new Map,$=!0,L=S[0],O=0;O<S.length;O++){var B=S[O],V=Xr(B),P=Jp(B)===Yp,z=[Xs,qo].indexOf(V)>=0,U=z?"width":"height",W=xm(e,{placement:B,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),R=z?P?Ko:Qs:P?qo:Xs;E[U]>k[U]&&(R=Rv(R));var D=Rv(R),N=[];if(o&&N.push(W[V]<=0),a&&N.push(W[R]<=0,W[D]<=0),N.every(function(we){return we})){L=B,$=!1;break}A.set(B,N)}if($)for(var K=m?3:1,ie=function(we){var Se=S.find(function(Te){var le=A.get(Te);if(le)return le.slice(0,we).every(function(oe){return oe})});if(Se)return L=Se,"break"},Y=K;Y>0;Y--){var ne=ie(Y);if(ne==="break")break}e.placement!==L&&(e.modifiersData[i]._skip=!0,e.placement=L,e.reset=!0)}}var uJ={name:"flip",enabled:!0,phase:"main",fn:cJ,requiresIfExists:["offset"],data:{_skip:!1}};function fM(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function mM(t){return[Xs,Ko,qo,Qs].some(function(e){return t[e]>=0})}function dJ(t){var e=t.state,n=t.name,i=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,r=xm(e,{elementContext:"reference"}),a=xm(e,{altBoundary:!0}),l=fM(r,i),c=fM(a,s,o),u=mM(l),d=mM(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}var pJ={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:dJ};function hJ(t,e,n){var i=Xr(t),s=[Qs,Xs].indexOf(i)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,r=o[0],a=o[1];return r=r||0,a=(a||0)*s,[Qs,Ko].indexOf(i)>=0?{x:a,y:r}:{x:r,y:a}}function fJ(t){var e=t.state,n=t.options,i=t.name,s=n.offset,o=s===void 0?[0,0]:s,r=sd.reduce(function(u,d){return u[d]=hJ(d,e.rects,o),u},{}),a=r[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=r}var mJ={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:fJ};function gJ(t){var e=t.state,n=t.name;e.modifiersData[n]=aV({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var lV={name:"popperOffsets",enabled:!0,phase:"read",fn:gJ,data:{}};function vJ(t){return t==="x"?"y":"x"}function yJ(t){var e=t.state,n=t.options,i=t.name,s=n.mainAxis,o=s===void 0?!0:s,r=n.altAxis,a=r===void 0?!1:r,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,f=h===void 0?!0:h,m=n.tetherOffset,g=m===void 0?0:m,y=xm(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),_=Xr(e.placement),C=Jp(e.placement),w=!C,S=tk(_),E=vJ(S),k=e.modifiersData.popperOffsets,A=e.rects.reference,$=e.rects.popper,L=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,O=typeof L=="number"?{mainAxis:L,altAxis:L}:Object.assign({mainAxis:0,altAxis:0},L),B=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,V={x:0,y:0};if(k){if(o){var P,z=S==="y"?Xs:Qs,U=S==="y"?qo:Ko,W=S==="y"?"height":"width",R=k[S],D=R+y[z],N=R-y[U],K=f?-$[W]/2:0,ie=C===Yp?A[W]:$[W],Y=C===Yp?-$[W]:-A[W],ne=e.elements.arrow,we=f&&ne?ek(ne):{width:0,height:0},Se=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:tV(),Te=Se[z],le=Se[U],oe=$f(0,A[W],we[W]),de=w?A[W]/2-K-oe-Te-O.mainAxis:ie-oe-Te-O.mainAxis,ve=w?-A[W]/2+K+oe+le+O.mainAxis:Y+oe+le+O.mainAxis,He=e.elements.arrow&&dg(e.elements.arrow),Q=He?S==="y"?He.clientTop||0:He.clientLeft||0:0,se=(P=B==null?void 0:B[S])!=null?P:0,fe=R+de-se-Q,Me=R+ve-se,Oe=$f(f?jy(D,fe):D,R,f?Bu(N,Me):N);k[S]=Oe,V[S]=Oe-R}if(a){var pe,Le=S==="x"?Xs:Qs,be=S==="x"?qo:Ko,Pe=k[E],Ee=E==="y"?"height":"width",he=Pe+y[Le],Ne=Pe-y[be],Be=[Xs,Qs].indexOf(_)!==-1,Qe=(pe=B==null?void 0:B[E])!=null?pe:0,ut=Be?he:Pe-A[Ee]-$[Ee]-Qe+O.altAxis,bt=Be?Pe+A[Ee]+$[Ee]-Qe-O.altAxis:Ne,it=f&&Be?GQ(ut,Pe,bt):$f(f?ut:he,Pe,f?bt:Ne);k[E]=it,V[E]=it-Pe}e.modifiersData[i]=V}}var bJ={name:"preventOverflow",enabled:!0,phase:"main",fn:yJ,requiresIfExists:["offset"]};function _J(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function wJ(t){return t===Sr(t)||!Wo(t)?nk(t):_J(t)}function CJ(t){var e=t.getBoundingClientRect(),n=Xp(e.width)/t.offsetWidth||1,i=Xp(e.height)/t.offsetHeight||1;return n!==1||i!==1}function SJ(t,e,n){n===void 0&&(n=!1);var i=Wo(e),s=Wo(e)&&CJ(e),o=Pc(e),r=Qp(t,s),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((ra(e)!=="body"||sk(o))&&(a=wJ(e)),Wo(e)?(l=Qp(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=ik(o))),{x:r.left+a.scrollLeft-l.x,y:r.top+a.scrollTop-l.y,width:r.width,height:r.height}}function EJ(t){var e=new Map,n=new Set,i=[];t.forEach(function(o){e.set(o.name,o)});function s(o){n.add(o.name);var r=[].concat(o.requires||[],o.requiresIfExists||[]);r.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&s(l)}}),i.push(o)}return t.forEach(function(o){n.has(o.name)||s(o)}),i}function kJ(t){var e=EJ(t);return BQ.reduce(function(n,i){return n.concat(e.filter(function(s){return s.phase===i}))},[])}function TJ(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function IJ(t){var e=t.reduce(function(n,i){var s=n[i.name];return n[i.name]=s?Object.assign({},s,i,{options:Object.assign({},s.options,i.options),data:Object.assign({},s.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var gM={placement:"bottom",modifiers:[],strategy:"absolute"};function vM(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function ok(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,s=e.defaultOptions,o=s===void 0?gM:s;return function(r,a,l){l===void 0&&(l=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},gM,o),modifiersData:{},elements:{reference:r,popper:a},attributes:{},styles:{}},u=[],d=!1,h={state:c,setOptions:function(g){var y=typeof g=="function"?g(c.options):g;m(),c.options=Object.assign({},o,c.options,y),c.scrollParents={reference:Zp(r)?Af(r):r.contextElement?Af(r.contextElement):[],popper:Af(a)};var _=kJ(IJ([].concat(i,c.options.modifiers)));return c.orderedModifiers=_.filter(function(C){return C.enabled}),f(),h.update()},forceUpdate:function(){if(!d){var g=c.elements,y=g.reference,_=g.popper;if(vM(y,_)){c.rects={reference:SJ(y,dg(_),c.options.strategy==="fixed"),popper:ek(_)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function($){return c.modifiersData[$.name]=Object.assign({},$.data)});for(var C=0;C<c.orderedModifiers.length;C++){if(c.reset===!0){c.reset=!1,C=-1;continue}var w=c.orderedModifiers[C],S=w.fn,E=w.options,k=E===void 0?{}:E,A=w.name;typeof S=="function"&&(c=S({state:c,options:k,name:A,instance:h})||c)}}}},update:TJ(function(){return new Promise(function(g){h.forceUpdate(),g(c)})}),destroy:function(){m(),d=!0}};if(!vM(r,a))return h;h.setOptions(l).then(function(g){!d&&l.onFirstUpdate&&l.onFirstUpdate(g)});function f(){c.orderedModifiers.forEach(function(g){var y=g.name,_=g.options,C=_===void 0?{}:_,w=g.effect;if(typeof w=="function"){var S=w({state:c,name:y,instance:h,options:C}),E=function(){};u.push(S||E)}})}function m(){u.forEach(function(g){return g()}),u=[]}return h}}ok();var xJ=[oV,lV,sV,JR];ok({defaultModifiers:xJ});var MJ=[oV,lV,sV,JR,mJ,uJ,bJ,YQ,pJ],cV=ok({defaultModifiers:MJ});const $J=(t,e)=>{let n;Ce(()=>t.value,i=>{var s,o;i?(n=document.activeElement,pn(e)&&((o=(s=e.value).focus)==null||o.call(s))):n.focus()})},rk=t=>{if(!t)return{onClick:nn,onMousedown:nn,onMouseup:nn};let e=!1,n=!1;return{onClick:r=>{e&&n&&t(r),e=n=!1},onMousedown:r=>{e=r.target===r.currentTarget},onMouseup:r=>{n=r.target===r.currentTarget}}},AJ=(t,e=0)=>{if(e===0)return t;const n=F(!1);let i=0;const s=()=>{i&&clearTimeout(i),i=window.setTimeout(()=>{n.value=t.value},e)};return ft(s),Ce(()=>t.value,o=>{o?s():n.value=o}),n};function LJ(){let t;const e=(i,s)=>{n(),t=window.setTimeout(i,s)},n=()=>window.clearTimeout(t);return o_(()=>n()),{registerTimeout:e,cancelTimeout:n}}let Td=[];const yM=t=>{const e=t;e.key===Xe.esc&&Td.forEach(n=>n(e))},OJ=t=>{ft(()=>{Td.length===0&&document.addEventListener("keydown",yM),Nt&&Td.push(t)}),Pn(()=>{Td=Td.filter(e=>e!==t),Td.length===0&&Nt&&document.removeEventListener("keydown",yM)})};let bM;const uV=()=>{const t=pl("namespace",m_),e=ZR(),n=T(()=>`${t.value}-popper-container-${e.prefix}`),i=T(()=>`#${n.value}`);return{id:n,selector:i}},PJ=t=>{const e=document.createElement("div");return e.id=t,document.body.appendChild(e),e},RJ=()=>{Kb(()=>{if(!Nt)return;const{id:t,selector:e}=uV();!bM&&!document.body.querySelector(e.value)&&(bM=PJ(t.value))})},VJ=De({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200}}),dV=({showAfter:t,hideAfter:e,open:n,close:i})=>{const{registerTimeout:s}=LJ();return{onOpen:a=>{s(()=>{n(a)},p(t))},onClose:a=>{s(()=>{i(a)},p(e))}}},pV=Symbol("elForwardRef"),FJ=t=>{xt(pV,{setForwardRef:n=>{t.value=n}})},DJ=t=>({mounted(e){t(e)},updated(e){t(e)},unmounted(){t(null)}}),_M=F(0),hl=()=>{const t=pl("zIndex",2e3),e=T(()=>t.value+_M.value);return{initialZIndex:t,currentZIndex:e,nextZIndex:()=>(_M.value++,e.value)}};function ak(t){return t.split("-")[1]}function hV(t){return t==="y"?"height":"width"}function lk(t){return t.split("-")[0]}function ck(t){return["top","bottom"].includes(lk(t))?"x":"y"}function wM(t,e,n){let{reference:i,floating:s}=t;const o=i.x+i.width/2-s.width/2,r=i.y+i.height/2-s.height/2,a=ck(e),l=hV(a),c=i[l]/2-s[l]/2,u=lk(e),d=a==="x";let h;switch(u){case"top":h={x:o,y:i.y-s.height};break;case"bottom":h={x:o,y:i.y+i.height};break;case"right":h={x:i.x+i.width,y:r};break;case"left":h={x:i.x-s.width,y:r};break;default:h={x:i.x,y:i.y}}switch(ak(e)){case"start":h[a]-=c*(n&&d?-1:1);break;case"end":h[a]+=c*(n&&d?-1:1);break}return h}const NJ=async(t,e,n)=>{const{placement:i="bottom",strategy:s="absolute",middleware:o=[],platform:r}=n,a=o.filter(Boolean),l=await(r.isRTL==null?void 0:r.isRTL(e));let c=await r.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:d}=wM(c,i,l),h=i,f={},m=0;for(let g=0;g<a.length;g++){const{name:y,fn:_}=a[g],{x:C,y:w,data:S,reset:E}=await _({x:u,y:d,initialPlacement:i,placement:h,strategy:s,middlewareData:f,rects:c,platform:r,elements:{reference:t,floating:e}});if(u=C??u,d=w??d,f={...f,[y]:{...f[y],...S}},E&&m<=50){m++,typeof E=="object"&&(E.placement&&(h=E.placement),E.rects&&(c=E.rects===!0?await r.getElementRects({reference:t,floating:e,strategy:s}):E.rects),{x:u,y:d}=wM(c,h,l)),g=-1;continue}}return{x:u,y:d,placement:h,strategy:s,middlewareData:f}};function BJ(t){return{top:0,right:0,bottom:0,left:0,...t}}function zJ(t){return typeof t!="number"?BJ(t):{top:t,right:t,bottom:t,left:t}}function hw(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}const HJ=Math.min,UJ=Math.max;function WJ(t,e,n){return UJ(t,HJ(e,n))}const GJ=t=>({name:"arrow",options:t,async fn(e){const{element:n,padding:i=0}=t||{},{x:s,y:o,placement:r,rects:a,platform:l}=e;if(n==null)return{};const c=zJ(i),u={x:s,y:o},d=ck(r),h=hV(d),f=await l.getDimensions(n),m=d==="y"?"top":"left",g=d==="y"?"bottom":"right",y=a.reference[h]+a.reference[d]-u[d]-a.floating[h],_=u[d]-a.reference[d],C=await(l.getOffsetParent==null?void 0:l.getOffsetParent(n));let w=C?d==="y"?C.clientHeight||0:C.clientWidth||0:0;w===0&&(w=a.floating[h]);const S=y/2-_/2,E=c[m],k=w-f[h]-c[g],A=w/2-f[h]/2+S,$=WJ(E,A,k),O=ak(r)!=null&&A!=$&&a.reference[h]/2-(A<E?c[m]:c[g])-f[h]/2<0?A<E?E-A:k-A:0;return{[d]:u[d]-O,data:{[d]:$,centerOffset:A-$}}}});async function jJ(t,e){const{placement:n,platform:i,elements:s}=t,o=await(i.isRTL==null?void 0:i.isRTL(s.floating)),r=lk(n),a=ak(n),l=ck(n)==="x",c=["left","top"].includes(r)?-1:1,u=o&&l?-1:1,d=typeof e=="function"?e(t):e;let{mainAxis:h,crossAxis:f,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof m=="number"&&(f=a==="end"?m*-1:m),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}const qJ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:i}=e,s=await jJ(e,t);return{x:n+s.x,y:i+s.y,data:s}}}};function Bo(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function aa(t){return Bo(t).getComputedStyle(t)}const CM=Math.min,Lf=Math.max,qy=Math.round;function fV(t){const e=aa(t);let n=parseFloat(e.width),i=parseFloat(e.height);const s=t.offsetWidth,o=t.offsetHeight,r=qy(n)!==s||qy(i)!==o;return r&&(n=s,i=o),{width:n,height:i,fallback:r}}function Ec(t){return gV(t)?(t.nodeName||"").toLowerCase():""}let Dg;function mV(){if(Dg)return Dg;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(Dg=t.brands.map(e=>e.brand+"/"+e.version).join(" "),Dg):navigator.userAgent}function la(t){return t instanceof Bo(t).HTMLElement}function kc(t){return t instanceof Bo(t).Element}function gV(t){return t instanceof Bo(t).Node}function SM(t){if(typeof ShadowRoot>"u")return!1;const e=Bo(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function v_(t){const{overflow:e,overflowX:n,overflowY:i,display:s}=aa(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(s)}function KJ(t){return["table","td","th"].includes(Ec(t))}function uk(t){const e=/firefox/i.test(mV()),n=aa(t),i=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||(i?i!=="none":!1)||e&&n.willChange==="filter"||e&&(n.filter?n.filter!=="none":!1)||["transform","perspective"].some(s=>n.willChange.includes(s))||["paint","layout","strict","content"].some(s=>{const o=n.contain;return o!=null?o.includes(s):!1})}function vV(){return!/^((?!chrome|android).)*safari/i.test(mV())}function dk(t){return["html","body","#document"].includes(Ec(t))}function yV(t){return kc(t)?t:t.contextElement}const bV={x:1,y:1};function yp(t){const e=yV(t);if(!la(e))return bV;const n=e.getBoundingClientRect(),{width:i,height:s,fallback:o}=fV(e);let r=(o?qy(n.width):n.width)/i,a=(o?qy(n.height):n.height)/s;return(!r||!Number.isFinite(r))&&(r=1),(!a||!Number.isFinite(a))&&(a=1),{x:r,y:a}}function Mm(t,e,n,i){var s,o;e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),a=yV(t);let l=bV;e&&(i?kc(i)&&(l=yp(i)):l=yp(t));const c=a?Bo(a):window,u=!vV()&&n;let d=(r.left+(u&&((s=c.visualViewport)==null?void 0:s.offsetLeft)||0))/l.x,h=(r.top+(u&&((o=c.visualViewport)==null?void 0:o.offsetTop)||0))/l.y,f=r.width/l.x,m=r.height/l.y;if(a){const g=Bo(a),y=i&&kc(i)?Bo(i):i;let _=g.frameElement;for(;_&&i&&y!==g;){const C=yp(_),w=_.getBoundingClientRect(),S=getComputedStyle(_);w.x+=(_.clientLeft+parseFloat(S.paddingLeft))*C.x,w.y+=(_.clientTop+parseFloat(S.paddingTop))*C.y,d*=C.x,h*=C.y,f*=C.x,m*=C.y,d+=w.x,h+=w.y,_=Bo(_).frameElement}}return{width:f,height:m,top:h,right:d+f,bottom:h+m,left:d,x:d,y:h}}function Rc(t){return((gV(t)?t.ownerDocument:t.document)||window.document).documentElement}function y_(t){return kc(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function YJ(t){let{rect:e,offsetParent:n,strategy:i}=t;const s=la(n),o=Rc(n);if(n===o)return e;let r={scrollLeft:0,scrollTop:0},a={x:1,y:1};const l={x:0,y:0};if((s||!s&&i!=="fixed")&&((Ec(n)!=="body"||v_(o))&&(r=y_(n)),la(n))){const c=Mm(n);a=yp(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-r.scrollLeft*a.x+l.x,y:e.y*a.y-r.scrollTop*a.y+l.y}}function _V(t){return Mm(Rc(t)).left+y_(t).scrollLeft}function ZJ(t){const e=Rc(t),n=y_(t),i=t.ownerDocument.body,s=Lf(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),o=Lf(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let r=-n.scrollLeft+_V(t);const a=-n.scrollTop;return aa(i).direction==="rtl"&&(r+=Lf(e.clientWidth,i.clientWidth)-s),{width:s,height:o,x:r,y:a}}function $m(t){if(Ec(t)==="html")return t;const e=t.assignedSlot||t.parentNode||SM(t)&&t.host||Rc(t);return SM(e)?e.host:e}function wV(t){const e=$m(t);return dk(e)?e.ownerDocument.body:la(e)&&v_(e)?e:wV(e)}function CV(t,e){var n;e===void 0&&(e=[]);const i=wV(t),s=i===((n=t.ownerDocument)==null?void 0:n.body),o=Bo(i);return s?e.concat(o,o.visualViewport||[],v_(i)?i:[]):e.concat(i,CV(i))}function XJ(t,e){const n=Bo(t),i=Rc(t),s=n.visualViewport;let o=i.clientWidth,r=i.clientHeight,a=0,l=0;if(s){o=s.width,r=s.height;const c=vV();(c||!c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:r,x:a,y:l}}function QJ(t,e){const n=Mm(t,!0,e==="fixed"),i=n.top+t.clientTop,s=n.left+t.clientLeft,o=la(t)?yp(t):{x:1,y:1},r=t.clientWidth*o.x,a=t.clientHeight*o.y,l=s*o.x,c=i*o.y;return{width:r,height:a,x:l,y:c}}function EM(t,e,n){return e==="viewport"?hw(XJ(t,n)):kc(e)?hw(QJ(e,n)):hw(ZJ(Rc(t)))}function JJ(t,e){const n=e.get(t);if(n)return n;let i=CV(t).filter(a=>kc(a)&&Ec(a)!=="body"),s=null;const o=aa(t).position==="fixed";let r=o?$m(t):t;for(;kc(r)&&!dk(r);){const a=aa(r),l=uk(r);(o?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position))?i=i.filter(u=>u!==r):s=a,r=$m(r)}return e.set(t,i),i}function eee(t){let{element:e,boundary:n,rootBoundary:i,strategy:s}=t;const r=[...n==="clippingAncestors"?JJ(e,this._c):[].concat(n),i],a=r[0],l=r.reduce((c,u)=>{const d=EM(e,u,s);return c.top=Lf(d.top,c.top),c.right=CM(d.right,c.right),c.bottom=CM(d.bottom,c.bottom),c.left=Lf(d.left,c.left),c},EM(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function tee(t){return la(t)?fV(t):t.getBoundingClientRect()}function kM(t){return!la(t)||aa(t).position==="fixed"?null:t.offsetParent}function nee(t){let e=$m(t);for(;la(e)&&!dk(e);){if(uk(e))return e;e=$m(e)}return null}function TM(t){const e=Bo(t);let n=kM(t);for(;n&&KJ(n)&&aa(n).position==="static";)n=kM(n);return n&&(Ec(n)==="html"||Ec(n)==="body"&&aa(n).position==="static"&&!uk(n))?e:n||nee(t)||e}function iee(t,e,n){const i=la(e),s=Rc(e),o=Mm(t,!0,n==="fixed",e);let r={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(i||!i&&n!=="fixed")if((Ec(e)!=="body"||v_(s))&&(r=y_(e)),la(e)){const l=Mm(e,!0);a.x=l.x+e.clientLeft,a.y=l.y+e.clientTop}else s&&(a.x=_V(s));return{x:o.left+r.scrollLeft-a.x,y:o.top+r.scrollTop-a.y,width:o.width,height:o.height}}const see={getClippingRect:eee,convertOffsetParentRelativeRectToViewportRelativeRect:YJ,isElement:kc,getDimensions:tee,getOffsetParent:TM,getDocumentElement:Rc,getScale:yp,async getElementRects(t){let{reference:e,floating:n,strategy:i}=t;const s=this.getOffsetParent||TM,o=this.getDimensions;return{reference:iee(e,await s(n),i),floating:{x:0,y:0,...await o(n)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>aa(t).direction==="rtl"},oee=(t,e,n)=>{const i=new Map,s={platform:see,...n},o={...s.platform,_c:i};return NJ(t,e,{...s,platform:o})};De({});const ree=t=>{if(!Nt)return;if(!t)return t;const e=bo(t);return e||(pn(t)?e:t)},aee=({middleware:t,placement:e,strategy:n})=>{const i=F(),s=F(),o=F(),r=F(),a=F({}),l={x:o,y:r,placement:e,strategy:n,middlewareData:a},c=async()=>{if(!Nt)return;const u=ree(i),d=bo(s);if(!u||!d)return;const h=await oee(u,d,{placement:p(e),strategy:p(n),middleware:p(t)});km(l).forEach(f=>{l[f].value=h[f]})};return ft(()=>{Co(()=>{c()})}),{...l,update:c,referenceRef:i,contentRef:s}},lee=({arrowRef:t,padding:e})=>({name:"arrow",options:{element:t,padding:e},fn(n){const i=p(t);return i?GJ({element:i,padding:e}).fn(n):{}}});function cee(t){const e=F();function n(){if(t.value==null)return;const{selectionStart:s,selectionEnd:o,value:r}=t.value;if(s==null||o==null)return;const a=r.slice(0,Math.max(0,s)),l=r.slice(Math.max(0,o));e.value={selectionStart:s,selectionEnd:o,value:r,beforeTxt:a,afterTxt:l}}function i(){if(t.value==null||e.value==null)return;const{value:s}=t.value,{beforeTxt:o,afterTxt:r,selectionStart:a}=e.value;if(o==null||r==null||a==null)return;let l=s.length;if(s.endsWith(r))l=s.length-r.length;else if(s.startsWith(o))l=o.length;else{const c=o[a-1],u=s.indexOf(c,a-1);u!==-1&&(l=u+1)}t.value.setSelectionRange(l,l)}return[n,i]}const uee=(t,e,n)=>vp(t.subTree).filter(o=>{var r;return $n(o)&&((r=o.type)==null?void 0:r.name)===e&&!!o.component}).map(o=>o.component.uid).map(o=>n[o]).filter(o=>!!o),SV=(t,e)=>{const n={},i=yn([]);return{children:i,addChild:r=>{n[r.uid]=r,i.value=uee(t,e,n)},removeChild:r=>{delete n[r],i.value=i.value.filter(a=>a.uid!==r)}}},dee="2.2.28",pee=(t=[])=>({version:dee,install:(n,i)=>{n[oM]||(n[oM]=!0,t.forEach(s=>n.use(s)),i&&KR(i,n,!0))}}),hee=De({zIndex:{type:ae([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),fee={scroll:({scrollTop:t,fixed:e})=>st(t)&&fi(e),[bn]:t=>fi(t)};var Ve=(t,e)=>{const n=t.__vccOpts||t;for(const[i,s]of e)n[i]=s;return n};const EV="ElAffix",mee=J({name:EV}),gee=J({...mee,props:hee,emits:fee,setup(t,{expose:e,emit:n}){const i=t,s=_e("affix"),o=yn(),r=yn(),a=yn(),{height:l}=Aq(),{height:c,width:u,top:d,bottom:h,update:f}=Jx(r,{windowScroll:!1}),m=Jx(o),g=F(!1),y=F(0),_=F(0),C=T(()=>({height:g.value?`${c.value}px`:"",width:g.value?`${u.value}px`:""})),w=T(()=>{if(!g.value)return{};const k=i.offset?mi(i.offset):0;return{height:`${c.value}px`,width:`${u.value}px`,top:i.position==="top"?k:"",bottom:i.position==="bottom"?k:"",transform:_.value?`translateY(${_.value}px)`:"",zIndex:i.zIndex}}),S=()=>{if(a.value)if(y.value=a.value instanceof Window?document.documentElement.scrollTop:a.value.scrollTop||0,i.position==="top")if(i.target){const k=m.bottom.value-i.offset-c.value;g.value=i.offset>d.value&&m.bottom.value>0,_.value=k<0?k:0}else g.value=i.offset>d.value;else if(i.target){const k=l.value-m.top.value-i.offset-c.value;g.value=l.value-i.offset<h.value&&l.value>m.top.value,_.value=k<0?-k:0}else g.value=l.value-i.offset<h.value},E=()=>{f(),n("scroll",{scrollTop:y.value,fixed:g.value})};return Ce(g,k=>n("change",k)),ft(()=>{var k;i.target?(o.value=(k=document.querySelector(i.target))!=null?k:void 0,o.value||ki(EV,`Target is not existed: ${i.target}`)):o.value=document.documentElement,a.value=UE(r.value,!0),f()}),En(a,"scroll",E),Co(S),e({update:S,updateRoot:f}),(k,A)=>(I(),H("div",{ref_key:"root",ref:r,class:x(p(s).b()),style:Ke(p(C))},[G("div",{class:x({[p(s).m("fixed")]:g.value}),style:Ke(p(w))},[me(k.$slots,"default")],6)],6))}});var vee=Ve(gee,[["__file","/home/runner/work/element-plus/element-plus/packages/components/affix/src/affix.vue"]]);const yee=yt(vee),bee=De({size:{type:ae([Number,String])},color:{type:String}}),_ee=J({name:"ElIcon",inheritAttrs:!1}),wee=J({..._ee,props:bee,setup(t){const e=t,n=_e("icon"),i=T(()=>{const{size:s,color:o}=e;return!s&&!o?{}:{fontSize:Ui(s)?void 0:mi(s),"--color":o}});return(s,o)=>(I(),H("i",kt({class:p(n).b(),style:p(i)},s.$attrs),[me(s.$slots,"default")],16))}});var Cee=Ve(wee,[["__file","/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue"]]);const Ge=yt(Cee),See=["light","dark"],Eee=De({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:km(Sc),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:See,default:"light"}}),kee={close:t=>t instanceof MouseEvent},Tee=J({name:"ElAlert"}),Iee=J({...Tee,props:Eee,emits:kee,setup(t,{emit:e}){const n=t,{Close:i}=qE,s=Ki(),o=_e("alert"),r=F(!0),a=T(()=>Sc[n.type]),l=T(()=>[o.e("icon"),{[o.is("big")]:!!n.description||!!s.default}]),c=T(()=>({[o.is("bold")]:n.description||s.default})),u=d=>{r.value=!1,e("close",d)};return(d,h)=>(I(),ce(oi,{name:p(o).b("fade"),persisted:""},{default:ee(()=>[ct(G("div",{class:x([p(o).b(),p(o).m(d.type),p(o).is("center",d.center),p(o).is(d.effect)]),role:"alert"},[d.showIcon&&p(a)?(I(),ce(p(Ge),{key:0,class:x(p(l))},{default:ee(()=>[(I(),ce(It(p(a))))]),_:1},8,["class"])):re("v-if",!0),G("div",{class:x(p(o).e("content"))},[d.title||d.$slots.title?(I(),H("span",{key:0,class:x([p(o).e("title"),p(c)])},[me(d.$slots,"title",{},()=>[Ut(Re(d.title),1)])],2)):re("v-if",!0),d.$slots.default||d.description?(I(),H("p",{key:1,class:x(p(o).e("description"))},[me(d.$slots,"default",{},()=>[Ut(Re(d.description),1)])],2)):re("v-if",!0),d.closable?(I(),H(Ye,{key:2},[d.closeText?(I(),H("div",{key:0,class:x([p(o).e("close-btn"),p(o).is("customed")]),onClick:u},Re(d.closeText),3)):(I(),ce(p(Ge),{key:1,class:x(p(o).e("close-btn")),onClick:u},{default:ee(()=>[Z(p(i))]),_:1},8,["class"]))],64)):re("v-if",!0)],2)],2),[[Vt,r.value]])]),_:3},8,["name"]))}});var xee=Ve(Iee,[["__file","/home/runner/work/element-plus/element-plus/packages/components/alert/src/alert.vue"]]);const Mee=yt(xee);let Zo;const $ee=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Aee=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Lee(t){const e=window.getComputedStyle(t),n=e.getPropertyValue("box-sizing"),i=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),s=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:Aee.map(r=>`${r}:${e.getPropertyValue(r)}`).join(";"),paddingSize:i,borderSize:s,boxSizing:n}}function IM(t,e=1,n){var i;Zo||(Zo=document.createElement("textarea"),document.body.appendChild(Zo));const{paddingSize:s,borderSize:o,boxSizing:r,contextStyle:a}=Lee(t);Zo.setAttribute("style",`${a};${$ee}`),Zo.value=t.value||t.placeholder||"";let l=Zo.scrollHeight;const c={};r==="border-box"?l=l+o:r==="content-box"&&(l=l-s),Zo.value="";const u=Zo.scrollHeight-s;if(st(e)){let d=u*e;r==="border-box"&&(d=d+s+o),l=Math.max(d,l),c.minHeight=`${d}px`}if(st(n)){let d=u*n;r==="border-box"&&(d=d+s+o),l=Math.min(d,l)}return c.height=`${l}px`,(i=Zo.parentNode)==null||i.removeChild(Zo),Zo=void 0,c}const Oee=De({id:{type:String,default:void 0},size:Vs,disabled:Boolean,modelValue:{type:ae([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:ae([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:gn},prefixIcon:{type:gn},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:ae([Object,Array,String]),default:()=>Mn({})}}),Pee={[wt]:t=>at(t),input:t=>at(t),change:t=>at(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof Event,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},Ree=["role"],Vee=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],Fee=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],Dee=J({name:"ElInput",inheritAttrs:!1}),Nee=J({...Dee,props:Oee,emits:Pee,setup(t,{expose:e,emit:n}){const i=t,s=vh(),o=Ki(),r=T(()=>{const he={};return i.containerRole==="combobox"&&(he["aria-haspopup"]=s["aria-haspopup"],he["aria-owns"]=s["aria-owns"],he["aria-expanded"]=s["aria-expanded"]),he}),a=T(()=>[i.type==="textarea"?y.b():g.b(),g.m(f.value),g.is("disabled",m.value),g.is("exceed",ie.value),{[g.b("group")]:o.prepend||o.append,[g.bm("group","append")]:o.append,[g.bm("group","prepend")]:o.prepend,[g.m("prefix")]:o.prefix||i.prefixIcon,[g.m("suffix")]:o.suffix||i.suffixIcon||i.clearable||i.showPassword,[g.bm("suffix","password-clear")]:R.value&&D.value},s.class]),l=T(()=>[g.e("wrapper"),g.is("focus",w.value)]),c=YE({excludeKeys:T(()=>Object.keys(r.value))}),{form:u,formItem:d}=Ns(),{inputId:h}=Oc(i,{formItemContext:d}),f=gi(),m=eo(),g=_e("input"),y=_e("textarea"),_=yn(),C=yn(),w=F(!1),S=F(!1),E=F(!1),k=F(!1),A=F(),$=yn(i.inputStyle),L=T(()=>_.value||C.value),O=T(()=>{var he;return(he=u==null?void 0:u.statusIcon)!=null?he:!1}),B=T(()=>(d==null?void 0:d.validateState)||""),V=T(()=>B.value&&AR[B.value]),P=T(()=>k.value?UX:YY),z=T(()=>[s.style,i.inputStyle]),U=T(()=>[i.inputStyle,$.value,{resize:i.resize}]),W=T(()=>Gi(i.modelValue)?"":String(i.modelValue)),R=T(()=>i.clearable&&!m.value&&!i.readonly&&!!W.value&&(w.value||S.value)),D=T(()=>i.showPassword&&!m.value&&!i.readonly&&!!W.value&&(!!W.value||w.value)),N=T(()=>i.showWordLimit&&!!c.value.maxlength&&(i.type==="text"||i.type==="textarea")&&!m.value&&!i.readonly&&!i.showPassword),K=T(()=>Array.from(W.value).length),ie=T(()=>!!N.value&&K.value>Number(c.value.maxlength)),Y=T(()=>!!o.suffix||!!i.suffixIcon||R.value||i.showPassword||N.value||!!B.value&&O.value),[ne,we]=cee(_);ms(C,he=>{if(!N.value||i.resize!=="both")return;const Ne=he[0],{width:Be}=Ne.contentRect;A.value={right:`calc(100% - ${Be+15+6}px)`}});const Se=()=>{const{type:he,autosize:Ne}=i;if(!(!Nt||he!=="textarea"))if(Ne){const Be=Et(Ne)?Ne.minRows:void 0,Qe=Et(Ne)?Ne.maxRows:void 0;$.value={...IM(C.value,Be,Qe)}}else $.value={minHeight:IM(C.value).minHeight}},Te=()=>{const he=L.value;!he||he.value===W.value||(he.value=W.value)},le=async he=>{ne();let{value:Ne}=he.target;if(i.formatter&&(Ne=i.parser?i.parser(Ne):Ne,Ne=i.formatter(Ne)),!E.value){if(Ne===W.value){Te();return}n(wt,Ne),n("input",Ne),await je(),Te(),we()}},oe=he=>{n("change",he.target.value)},de=he=>{n("compositionstart",he),E.value=!0},ve=he=>{var Ne;n("compositionupdate",he);const Be=(Ne=he.target)==null?void 0:Ne.value,Qe=Be[Be.length-1]||"";E.value=!c_(Qe)},He=he=>{n("compositionend",he),E.value&&(E.value=!1,le(he))},Q=()=>{k.value=!k.value,se()},se=async()=>{var he;await je(),(he=L.value)==null||he.focus()},fe=()=>{var he;return(he=L.value)==null?void 0:he.blur()},Me=he=>{w.value=!0,n("focus",he)},Oe=he=>{var Ne;w.value=!1,n("blur",he),i.validateEvent&&((Ne=d==null?void 0:d.validate)==null||Ne.call(d,"blur").catch(Be=>void 0))},pe=he=>{S.value=!1,n("mouseleave",he)},Le=he=>{S.value=!0,n("mouseenter",he)},be=he=>{n("keydown",he)},Pe=()=>{var he;(he=L.value)==null||he.select()},Ee=()=>{n(wt,""),n("change",""),n("clear"),n("input","")};return Ce(()=>i.modelValue,()=>{var he;je(()=>Se()),i.validateEvent&&((he=d==null?void 0:d.validate)==null||he.call(d,"change").catch(Ne=>void 0))}),Ce(W,()=>Te()),Ce(()=>i.type,async()=>{await je(),Te(),Se()}),ft(()=>{!i.formatter&&i.parser,Te(),je(Se)}),e({input:_,textarea:C,ref:L,textareaStyle:U,autosize:On(i,"autosize"),focus:se,blur:fe,select:Pe,clear:Ee,resizeTextarea:Se}),(he,Ne)=>ct((I(),H("div",kt(p(r),{class:p(a),style:p(z),role:he.containerRole,onMouseenter:Le,onMouseleave:pe}),[re(" input "),he.type!=="textarea"?(I(),H(Ye,{key:0},[re(" prepend slot "),he.$slots.prepend?(I(),H("div",{key:0,class:x(p(g).be("group","prepend"))},[me(he.$slots,"prepend")],2)):re("v-if",!0),G("div",{class:x(p(l))},[re(" prefix slot "),he.$slots.prefix||he.prefixIcon?(I(),H("span",{key:0,class:x(p(g).e("prefix"))},[G("span",{class:x(p(g).e("prefix-inner")),onClick:se},[me(he.$slots,"prefix"),he.prefixIcon?(I(),ce(p(Ge),{key:0,class:x(p(g).e("icon"))},{default:ee(()=>[(I(),ce(It(he.prefixIcon)))]),_:1},8,["class"])):re("v-if",!0)],2)],2)):re("v-if",!0),G("input",kt({id:p(h),ref_key:"input",ref:_,class:p(g).e("inner")},p(c),{type:he.showPassword?k.value?"text":"password":he.type,disabled:p(m),formatter:he.formatter,parser:he.parser,readonly:he.readonly,autocomplete:he.autocomplete,tabindex:he.tabindex,"aria-label":he.label,placeholder:he.placeholder,style:he.inputStyle,form:i.form,onCompositionstart:de,onCompositionupdate:ve,onCompositionend:He,onInput:le,onFocus:Me,onBlur:Oe,onChange:oe,onKeydown:be}),null,16,Vee),re(" suffix slot "),p(Y)?(I(),H("span",{key:1,class:x(p(g).e("suffix"))},[G("span",{class:x(p(g).e("suffix-inner")),onClick:se},[!p(R)||!p(D)||!p(N)?(I(),H(Ye,{key:0},[me(he.$slots,"suffix"),he.suffixIcon?(I(),ce(p(Ge),{key:0,class:x(p(g).e("icon"))},{default:ee(()=>[(I(),ce(It(he.suffixIcon)))]),_:1},8,["class"])):re("v-if",!0)],64)):re("v-if",!0),p(R)?(I(),ce(p(Ge),{key:1,class:x([p(g).e("icon"),p(g).e("clear")]),onMousedown:rt(p(nn),["prevent"]),onClick:Ee},{default:ee(()=>[Z(p(Ac))]),_:1},8,["class","onMousedown"])):re("v-if",!0),p(D)?(I(),ce(p(Ge),{key:2,class:x([p(g).e("icon"),p(g).e("password")]),onClick:Q},{default:ee(()=>[(I(),ce(It(p(P))))]),_:1},8,["class"])):re("v-if",!0),p(N)?(I(),H("span",{key:3,class:x(p(g).e("count"))},[G("span",{class:x(p(g).e("count-inner"))},Re(p(K))+" / "+Re(p(c).maxlength),3)],2)):re("v-if",!0),p(B)&&p(V)&&p(O)?(I(),ce(p(Ge),{key:4,class:x([p(g).e("icon"),p(g).e("validateIcon"),p(g).is("loading",p(B)==="validating")])},{default:ee(()=>[(I(),ce(It(p(V))))]),_:1},8,["class"])):re("v-if",!0)],2)],2)):re("v-if",!0)],2),re(" append slot "),he.$slots.append?(I(),H("div",{key:1,class:x(p(g).be("group","append"))},[me(he.$slots,"append")],2)):re("v-if",!0)],64)):(I(),H(Ye,{key:1},[re(" textarea "),G("textarea",kt({id:p(h),ref_key:"textarea",ref:C,class:p(y).e("inner")},p(c),{tabindex:he.tabindex,disabled:p(m),readonly:he.readonly,autocomplete:he.autocomplete,style:p(U),"aria-label":he.label,placeholder:he.placeholder,form:i.form,onCompositionstart:de,onCompositionupdate:ve,onCompositionend:He,onInput:le,onFocus:Me,onBlur:Oe,onChange:oe,onKeydown:be}),null,16,Fee),p(N)?(I(),H("span",{key:0,style:Ke(A.value),class:x(p(g).e("count"))},Re(p(K))+" / "+Re(p(c).maxlength),7)):re("v-if",!0)],64))],16,Ree)),[[Vt,he.type!=="hidden"]])}});var Bee=Ve(Nee,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const hs=yt(Bee),Yd=4,kV={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},zee=({move:t,size:e,bar:n})=>({[n.size]:e,transform:`translate${n.axis}(${t}%)`}),Hee=De({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Uee="Thumb",Wee=J({__name:"thumb",props:Hee,setup(t){const e=t,n=qe(HR),i=_e("scrollbar");n||ki(Uee,"can not inject scrollbar context");const s=F(),o=F(),r=F({}),a=F(!1);let l=!1,c=!1,u=Nt?document.onselectstart:null;const d=T(()=>kV[e.vertical?"vertical":"horizontal"]),h=T(()=>zee({size:e.size,move:e.move,bar:d.value})),f=T(()=>s.value[d.value.offset]**2/n.wrapElement[d.value.scrollSize]/e.ratio/o.value[d.value.offset]),m=k=>{var A;if(k.stopPropagation(),k.ctrlKey||[1,2].includes(k.button))return;(A=window.getSelection())==null||A.removeAllRanges(),y(k);const $=k.currentTarget;$&&(r.value[d.value.axis]=$[d.value.offset]-(k[d.value.client]-$.getBoundingClientRect()[d.value.direction]))},g=k=>{if(!o.value||!s.value||!n.wrapElement)return;const A=Math.abs(k.target.getBoundingClientRect()[d.value.direction]-k[d.value.client]),$=o.value[d.value.offset]/2,L=(A-$)*100*f.value/s.value[d.value.offset];n.wrapElement[d.value.scroll]=L*n.wrapElement[d.value.scrollSize]/100},y=k=>{k.stopImmediatePropagation(),l=!0,document.addEventListener("mousemove",_),document.addEventListener("mouseup",C),u=document.onselectstart,document.onselectstart=()=>!1},_=k=>{if(!s.value||!o.value||l===!1)return;const A=r.value[d.value.axis];if(!A)return;const $=(s.value.getBoundingClientRect()[d.value.direction]-k[d.value.client])*-1,L=o.value[d.value.offset]-A,O=($-L)*100*f.value/s.value[d.value.offset];n.wrapElement[d.value.scroll]=O*n.wrapElement[d.value.scrollSize]/100},C=()=>{l=!1,r.value[d.value.axis]=0,document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",C),E(),c&&(a.value=!1)},w=()=>{c=!1,a.value=!!e.size},S=()=>{c=!0,a.value=l};Pn(()=>{E(),document.removeEventListener("mouseup",C)});const E=()=>{document.onselectstart!==u&&(document.onselectstart=u)};return En(On(n,"scrollbarElement"),"mousemove",w),En(On(n,"scrollbarElement"),"mouseleave",S),(k,A)=>(I(),ce(oi,{name:p(i).b("fade"),persisted:""},{default:ee(()=>[ct(G("div",{ref_key:"instance",ref:s,class:x([p(i).e("bar"),p(i).is(p(d).key)]),onMousedown:g},[G("div",{ref_key:"thumb",ref:o,class:x(p(i).e("thumb")),style:Ke(p(h)),onMousedown:m},null,38)],34),[[Vt,k.always||a.value]])]),_:1},8,["name"]))}});var xM=Ve(Wee,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Gee=De({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),jee=J({__name:"bar",props:Gee,setup(t,{expose:e}){const n=t,i=F(0),s=F(0);return e({handleScroll:r=>{if(r){const a=r.offsetHeight-Yd,l=r.offsetWidth-Yd;s.value=r.scrollTop*100/a*n.ratioY,i.value=r.scrollLeft*100/l*n.ratioX}}}),(r,a)=>(I(),H(Ye,null,[Z(xM,{move:i.value,ratio:r.ratioX,size:r.width,always:r.always},null,8,["move","ratio","size","always"]),Z(xM,{move:s.value,ratio:r.ratioY,size:r.height,vertical:"",always:r.always},null,8,["move","ratio","size","always"])],64))}});var qee=Ve(jee,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Kee=De({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:ae([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),Yee={scroll:({scrollTop:t,scrollLeft:e})=>[t,e].every(st)},Zee="ElScrollbar",Xee=J({name:Zee}),Qee=J({...Xee,props:Kee,emits:Yee,setup(t,{expose:e,emit:n}){const i=t,s=_e("scrollbar");let o,r;const a=F(),l=F(),c=F(),u=F("0"),d=F("0"),h=F(),f=F(1),m=F(1),g=T(()=>{const A={};return i.height&&(A.height=mi(i.height)),i.maxHeight&&(A.maxHeight=mi(i.maxHeight)),[i.wrapStyle,A]}),y=T(()=>[i.wrapClass,s.e("wrap"),{[s.em("wrap","hidden-default")]:!i.native}]),_=T(()=>[s.e("view"),i.viewClass]),C=()=>{var A;l.value&&((A=h.value)==null||A.handleScroll(l.value),n("scroll",{scrollTop:l.value.scrollTop,scrollLeft:l.value.scrollLeft}))};function w(A,$){Et(A)?l.value.scrollTo(A):st(A)&&st($)&&l.value.scrollTo(A,$)}const S=A=>{st(A)&&(l.value.scrollTop=A)},E=A=>{st(A)&&(l.value.scrollLeft=A)},k=()=>{if(!l.value)return;const A=l.value.offsetHeight-Yd,$=l.value.offsetWidth-Yd,L=A**2/l.value.scrollHeight,O=$**2/l.value.scrollWidth,B=Math.max(L,i.minSize),V=Math.max(O,i.minSize);f.value=L/(A-L)/(B/(A-B)),m.value=O/($-O)/(V/($-V)),d.value=B+Yd<A?`${B}px`:"",u.value=V+Yd<$?`${V}px`:""};return Ce(()=>i.noresize,A=>{A?(o==null||o(),r==null||r()):({stop:o}=ms(c,k),r=En("resize",k))},{immediate:!0}),Ce(()=>[i.maxHeight,i.height],()=>{i.native||je(()=>{var A;k(),l.value&&((A=h.value)==null||A.handleScroll(l.value))})}),xt(HR,Yt({scrollbarElement:a,wrapElement:l})),ft(()=>{i.native||je(()=>{k()})}),ll(()=>k()),e({wrapRef:l,update:k,scrollTo:w,setScrollTop:S,setScrollLeft:E,handleScroll:C}),(A,$)=>(I(),H("div",{ref_key:"scrollbarRef",ref:a,class:x(p(s).b())},[G("div",{ref_key:"wrapRef",ref:l,class:x(p(y)),style:Ke(p(g)),onScroll:C},[(I(),ce(It(A.tag),{ref_key:"resizeRef",ref:c,class:x(p(_)),style:Ke(A.viewStyle)},{default:ee(()=>[me(A.$slots,"default")]),_:3},8,["class","style"]))],38),A.native?re("v-if",!0):(I(),ce(qee,{key:0,ref_key:"barRef",ref:h,height:d.value,width:u.value,always:A.always,"ratio-x":m.value,"ratio-y":f.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Jee=Ve(Qee,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const fl=yt(Jee),ete=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],TV=De({role:{type:String,values:ete,default:"tooltip"}}),tte=J({name:"ElPopperRoot",inheritAttrs:!1}),nte=J({...tte,props:TV,setup(t,{expose:e}){const n=t,i=F(),s=F(),o=F(),r=F(),a=T(()=>n.role),l={triggerRef:i,popperInstanceRef:s,contentRef:o,referenceRef:r,role:a};return e(l),xt(ZE,l),(c,u)=>me(c.$slots,"default")}});var ite=Ve(nte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/popper.vue"]]);const IV=De({arrowOffset:{type:Number,default:5}}),ste=J({name:"ElPopperArrow",inheritAttrs:!1}),ote=J({...ste,props:IV,setup(t,{expose:e}){const n=t,i=_e("popper"),{arrowOffset:s,arrowRef:o}=qe(GR,void 0);return Ce(()=>n.arrowOffset,r=>{s.value=r}),Pn(()=>{o.value=void 0}),e({arrowRef:o}),(r,a)=>(I(),H("span",{ref_key:"arrowRef",ref:o,class:x(p(i).e("arrow")),"data-popper-arrow":""},null,2))}});var rte=Ve(ote,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/arrow.vue"]]);const ate="ElOnlyChild",xV=J({name:ate,setup(t,{slots:e,attrs:n}){var i;const s=qe(pV),o=DJ((i=s==null?void 0:s.setForwardRef)!=null?i:nn);return()=>{var r;const a=(r=e.default)==null?void 0:r.call(e,n);if(!a||a.length>1)return null;const l=MV(a);return l?ct(Za(l,n),[[o]]):null}}});function MV(t){if(!t)return null;const e=t;for(const n of e){if(Et(n))switch(n.type){case Ms:continue;case gh:case"svg":return MM(n);case Ye:return MV(n.children);default:return n}return MM(n)}return null}function MM(t){const e=_e("only-child");return Z("span",{class:e.e("content")},[t])}const $V=De({virtualRef:{type:ae(Object)},virtualTriggering:Boolean,onMouseenter:{type:ae(Function)},onMouseleave:{type:ae(Function)},onClick:{type:ae(Function)},onKeydown:{type:ae(Function)},onFocus:{type:ae(Function)},onBlur:{type:ae(Function)},onContextmenu:{type:ae(Function)},id:String,open:Boolean}),lte=J({name:"ElPopperTrigger",inheritAttrs:!1}),cte=J({...lte,props:$V,setup(t,{expose:e}){const n=t,{role:i,triggerRef:s}=qe(ZE,void 0);FJ(s);const o=T(()=>a.value?n.id:void 0),r=T(()=>{if(i&&i.value==="tooltip")return n.open&&n.id?n.id:void 0}),a=T(()=>{if(i&&i.value!=="tooltip")return i.value}),l=T(()=>a.value?`${n.open}`:void 0);let c;return ft(()=>{Ce(()=>n.virtualRef,u=>{u&&(s.value=bo(u))},{immediate:!0}),Ce(s,(u,d)=>{c==null||c(),c=void 0,gr(u)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(h=>{var f;const m=n[h];m&&(u.addEventListener(h.slice(2).toLowerCase(),m),(f=d==null?void 0:d.removeEventListener)==null||f.call(d,h.slice(2).toLowerCase(),m))}),c=Ce([o,r,a,l],h=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((f,m)=>{Gi(h[m])?u.removeAttribute(f):u.setAttribute(f,h[m])})},{immediate:!0})),gr(d)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(h=>d.removeAttribute(h))},{immediate:!0})}),Pn(()=>{c==null||c(),c=void 0}),e({triggerRef:s}),(u,d)=>u.virtualTriggering?re("v-if",!0):(I(),ce(p(xV),kt({key:0},u.$attrs,{"aria-controls":p(o),"aria-describedby":p(r),"aria-expanded":p(l),"aria-haspopup":p(a)}),{default:ee(()=>[me(u.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var ute=Ve(cte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/trigger.vue"]]);const fw="focus-trap.focus-after-trapped",mw="focus-trap.focus-after-released",dte="focus-trap.focusout-prevented",$M={cancelable:!0,bubbles:!1},pte={cancelable:!0,bubbles:!1},AM="focusAfterTrapped",LM="focusAfterReleased",pk=Symbol("elFocusTrap"),hk=F(),b_=F(0),fk=F(0);let Ng=0;const AV=t=>{const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const s=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||s?NodeFilter.FILTER_SKIP:i.tabIndex>=0||i===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e},OM=(t,e)=>{for(const n of t)if(!hte(n,e))return n},hte=(t,e)=>{if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1},fte=t=>{const e=AV(t),n=OM(e,t),i=OM(e.reverse(),t);return[n,i]},mte=t=>t instanceof HTMLInputElement&&"select"in t,Tl=(t,e)=>{if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),fk.value=window.performance.now(),t!==n&&mte(t)&&e&&t.select()}};function PM(t,e){const n=[...t],i=t.indexOf(e);return i!==-1&&n.splice(i,1),n}const gte=()=>{let t=[];return{push:i=>{const s=t[0];s&&i!==s&&s.pause(),t=PM(t,i),t.unshift(i)},remove:i=>{var s,o;t=PM(t,i),(o=(s=t[0])==null?void 0:s.resume)==null||o.call(s)}}},vte=(t,e=!1)=>{const n=document.activeElement;for(const i of t)if(Tl(i,e),document.activeElement!==n)return},RM=gte(),yte=()=>b_.value>fk.value,Bg=()=>{hk.value="pointer",b_.value=window.performance.now()},VM=()=>{hk.value="keyboard",b_.value=window.performance.now()},bte=()=>(ft(()=>{Ng===0&&(document.addEventListener("mousedown",Bg),document.addEventListener("touchstart",Bg),document.addEventListener("keydown",VM)),Ng++}),Pn(()=>{Ng--,Ng<=0&&(document.removeEventListener("mousedown",Bg),document.removeEventListener("touchstart",Bg),document.removeEventListener("keydown",VM))}),{focusReason:hk,lastUserFocusTimestamp:b_,lastAutomatedFocusTimestamp:fk}),zg=t=>new CustomEvent(dte,{...pte,detail:t}),_te=J({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[AM,LM,"focusin","focusout","focusout-prevented","release-requested"],setup(t,{emit:e}){const n=F();let i,s;const{focusReason:o}=bte();OJ(m=>{t.trapped&&!r.paused&&e("release-requested",m)});const r={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},a=m=>{if(!t.loop&&!t.trapped||r.paused)return;const{key:g,altKey:y,ctrlKey:_,metaKey:C,currentTarget:w,shiftKey:S}=m,{loop:E}=t,k=g===Xe.tab&&!y&&!_&&!C,A=document.activeElement;if(k&&A){const $=w,[L,O]=fte($);if(L&&O){if(!S&&A===O){const V=zg({focusReason:o.value});e("focusout-prevented",V),V.defaultPrevented||(m.preventDefault(),E&&Tl(L,!0))}else if(S&&[L,$].includes(A)){const V=zg({focusReason:o.value});e("focusout-prevented",V),V.defaultPrevented||(m.preventDefault(),E&&Tl(O,!0))}}else if(A===$){const V=zg({focusReason:o.value});e("focusout-prevented",V),V.defaultPrevented||m.preventDefault()}}};xt(pk,{focusTrapRef:n,onKeydown:a}),Ce(()=>t.focusTrapEl,m=>{m&&(n.value=m)},{immediate:!0}),Ce([n],([m],[g])=>{m&&(m.addEventListener("keydown",a),m.addEventListener("focusin",u),m.addEventListener("focusout",d)),g&&(g.removeEventListener("keydown",a),g.removeEventListener("focusin",u),g.removeEventListener("focusout",d))});const l=m=>{e(AM,m)},c=m=>e(LM,m),u=m=>{const g=p(n);if(!g)return;const y=m.target,_=m.relatedTarget,C=y&&g.contains(y);t.trapped||_&&g.contains(_)||(i=_),C&&e("focusin",m),!r.paused&&t.trapped&&(C?s=y:Tl(s,!0))},d=m=>{const g=p(n);if(!(r.paused||!g))if(t.trapped){const y=m.relatedTarget;!Gi(y)&&!g.contains(y)&&setTimeout(()=>{if(!r.paused&&t.trapped){const _=zg({focusReason:o.value});e("focusout-prevented",_),_.defaultPrevented||Tl(s,!0)}},0)}else{const y=m.target;y&&g.contains(y)||e("focusout",m)}};async function h(){await je();const m=p(n);if(m){RM.push(r);const g=m.contains(document.activeElement)?i:document.activeElement;if(i=g,!m.contains(g)){const _=new Event(fw,$M);m.addEventListener(fw,l),m.dispatchEvent(_),_.defaultPrevented||je(()=>{let C=t.focusStartEl;at(C)||(Tl(C),document.activeElement!==C&&(C="first")),C==="first"&&vte(AV(m),!0),(document.activeElement===g||C==="container")&&Tl(m)})}}}function f(){const m=p(n);if(m){m.removeEventListener(fw,l);const g=new CustomEvent(mw,{...$M,detail:{focusReason:o.value}});m.addEventListener(mw,c),m.dispatchEvent(g),!g.defaultPrevented&&(o.value=="keyboard"||!yte())&&Tl(i??document.body),m.removeEventListener(mw,l),RM.remove(r)}}return ft(()=>{t.trapped&&h(),Ce(()=>t.trapped,m=>{m?h():f()})}),Pn(()=>{t.trapped&&f()}),{onKeydown:a}}});function wte(t,e,n,i,s,o){return me(t.$slots,"default",{handleKeydown:t.onKeydown})}var __=Ve(_te,[["render",wte],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);const Cte=["fixed","absolute"],Ste=De({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:ae(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:sd,default:"bottom"},popperOptions:{type:ae(Object),default:()=>({})},strategy:{type:String,values:Cte,default:"absolute"}}),LV=De({...Ste,id:String,style:{type:ae([String,Array,Object])},className:{type:ae([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:ae([String,Array,Object])},popperStyle:{type:ae([String,Array,Object])},referenceEl:{type:ae(Object)},triggerTargetEl:{type:ae(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},ariaLabel:{type:String,default:void 0},virtualTriggering:Boolean,zIndex:Number}),Ete={mouseenter:t=>t instanceof MouseEvent,mouseleave:t=>t instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},FM=(t,e)=>{const{placement:n,strategy:i,popperOptions:s}=t,o={placement:n,strategy:i,...s,modifiers:Tte(t)};return Ite(o,e),xte(o,s==null?void 0:s.modifiers),o},kte=t=>{if(Nt)return bo(t)};function Tte(t){const{offset:e,gpuAcceleration:n,fallbackPlacements:i}=t;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:i}},{name:"computeStyles",options:{gpuAcceleration:n}}]}function Ite(t,{arrowEl:e,arrowOffset:n}){t.modifiers.push({name:"arrow",options:{element:e,padding:n??5}})}function xte(t,e){e&&(t.modifiers=[...t.modifiers,...e??[]])}const Mte=J({name:"ElPopperContent"}),$te=J({...Mte,props:LV,emits:Ete,setup(t,{expose:e,emit:n}){const i=t,{popperInstanceRef:s,contentRef:o,triggerRef:r,role:a}=qe(ZE,void 0),l=qe(oa,void 0),{nextZIndex:c}=hl(),u=_e("popper"),d=F(),h=F("first"),f=F(),m=F();xt(GR,{arrowRef:f,arrowOffset:m}),l&&(l.addInputId||l.removeInputId)&&xt(oa,{...l,addInputId:nn,removeInputId:nn});const g=F(i.zIndex||c()),y=F(!1);let _;const C=T(()=>kte(i.referenceEl)||p(r)),w=T(()=>[{zIndex:p(g)},i.popperStyle]),S=T(()=>[u.b(),u.is("pure",i.pure),u.is(i.effect),i.popperClass]),E=T(()=>a&&a.value==="dialog"?"false":void 0),k=({referenceEl:z,popperContentEl:U,arrowEl:W})=>{const R=FM(i,{arrowEl:W,arrowOffset:p(m)});return cV(z,U,R)},A=(z=!0)=>{var U;(U=p(s))==null||U.update(),z&&(g.value=i.zIndex||c())},$=()=>{var z,U;const W={name:"eventListeners",enabled:i.visible};(U=(z=p(s))==null?void 0:z.setOptions)==null||U.call(z,R=>({...R,modifiers:[...R.modifiers||[],W]})),A(!1),i.visible&&i.focusOnShow?y.value=!0:i.visible===!1&&(y.value=!1)},L=()=>{n("focus")},O=z=>{var U;((U=z.detail)==null?void 0:U.focusReason)!=="pointer"&&(h.value="first",n("blur"))},B=z=>{i.visible&&!y.value&&(z.target&&(h.value=z.target),y.value=!0)},V=z=>{i.trapping||(z.detail.focusReason==="pointer"&&z.preventDefault(),y.value=!1)},P=()=>{y.value=!1,n("close")};return ft(()=>{let z;Ce(C,U=>{var W;z==null||z();const R=p(s);if((W=R==null?void 0:R.destroy)==null||W.call(R),U){const D=p(d);o.value=D,s.value=k({referenceEl:U,popperContentEl:D,arrowEl:p(f)}),z=Ce(()=>U.getBoundingClientRect(),()=>A(),{immediate:!0})}else s.value=void 0},{immediate:!0}),Ce(()=>i.triggerTargetEl,(U,W)=>{_==null||_(),_=void 0;const R=p(U||d.value),D=p(W||d.value);gr(R)&&(_=Ce([a,()=>i.ariaLabel,E,()=>i.id],N=>{["role","aria-label","aria-modal","id"].forEach((K,ie)=>{Gi(N[ie])?R.removeAttribute(K):R.setAttribute(K,N[ie])})},{immediate:!0})),D!==R&&gr(D)&&["role","aria-label","aria-modal","id"].forEach(N=>{D.removeAttribute(N)})},{immediate:!0}),Ce(()=>i.visible,$,{immediate:!0}),Ce(()=>FM(i,{arrowEl:p(f),arrowOffset:p(m)}),U=>{var W;return(W=s.value)==null?void 0:W.setOptions(U)})}),Pn(()=>{_==null||_(),_=void 0}),e({popperContentRef:d,popperInstanceRef:s,updatePopper:A,contentStyle:w}),(z,U)=>(I(),H("div",{ref_key:"popperContentRef",ref:d,style:Ke(p(w)),class:x(p(S)),tabindex:"-1",onMouseenter:U[0]||(U[0]=W=>z.$emit("mouseenter",W)),onMouseleave:U[1]||(U[1]=W=>z.$emit("mouseleave",W))},[Z(p(__),{trapped:y.value,"trap-on-focus-in":!0,"focus-trap-el":d.value,"focus-start-el":h.value,onFocusAfterTrapped:L,onFocusAfterReleased:O,onFocusin:B,onFocusoutPrevented:V,onReleaseRequested:P},{default:ee(()=>[me(z.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el"])],38))}});var Ate=Ve($te,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/content.vue"]]);const OV=yt(ite),Lte=_e("tooltip"),Di=De({...VJ,...LV,appendTo:{type:ae([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:ae(Boolean),default:null},transition:{type:String,default:`${Lte.namespace.value}-fade-in-linear`},teleported:{type:Boolean,default:!0},disabled:{type:Boolean}}),Am=De({...$V,disabled:Boolean,trigger:{type:ae([String,Array]),default:"hover"},triggerKeys:{type:ae(Array),default:()=>[Xe.enter,Xe.space]}}),{useModelToggleProps:Ote,useModelToggleEmits:Pte,useModelToggle:Rte}=xQ("visible"),Vte=De({...TV,...Ote,...Di,...Am,...IV,showArrow:{type:Boolean,default:!0}}),Fte=[...Pte,"before-show","before-hide","show","hide","open","close"],Dte=(t,e)=>ze(t)?t.includes(e):t===e,ld=(t,e,n)=>i=>{Dte(p(t),e)&&n(i)},Nte=J({name:"ElTooltipTrigger"}),Bte=J({...Nte,props:Am,setup(t,{expose:e}){const n=t,i=_e("tooltip"),{controlled:s,id:o,open:r,onOpen:a,onClose:l,onToggle:c}=qe(h_,void 0),u=F(null),d=()=>{if(p(s)||n.disabled)return!0},h=On(n,"trigger"),f=Fn(d,ld(h,"hover",a)),m=Fn(d,ld(h,"hover",l)),g=Fn(d,ld(h,"click",S=>{S.button===0&&c(S)})),y=Fn(d,ld(h,"focus",a)),_=Fn(d,ld(h,"focus",l)),C=Fn(d,ld(h,"contextmenu",S=>{S.preventDefault(),c(S)})),w=Fn(d,S=>{const{code:E}=S;n.triggerKeys.includes(E)&&(S.preventDefault(),c(S))});return e({triggerRef:u}),(S,E)=>(I(),ce(p(ute),{id:p(o),"virtual-ref":S.virtualRef,open:p(r),"virtual-triggering":S.virtualTriggering,class:x(p(i).e("trigger")),onBlur:p(_),onClick:p(g),onContextmenu:p(C),onFocus:p(y),onMouseenter:p(f),onMouseleave:p(m),onKeydown:p(w)},{default:ee(()=>[me(S.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var zte=Ve(Bte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue"]]);const Hte=J({name:"ElTooltipContent",inheritAttrs:!1}),Ute=J({...Hte,props:Di,setup(t,{expose:e}){const n=t,{selector:i}=uV(),s=F(null),o=F(!1),{controlled:r,id:a,open:l,trigger:c,onClose:u,onOpen:d,onShow:h,onHide:f,onBeforeShow:m,onBeforeHide:g}=qe(h_,void 0),y=T(()=>n.persistent);Pn(()=>{o.value=!0});const _=T(()=>p(y)?!0:p(l)),C=T(()=>n.disabled?!1:p(l)),w=T(()=>n.appendTo||i.value),S=T(()=>{var U;return(U=n.style)!=null?U:{}}),E=T(()=>!p(l)),k=()=>{f()},A=()=>{if(p(r))return!0},$=Fn(A,()=>{n.enterable&&p(c)==="hover"&&d()}),L=Fn(A,()=>{p(c)==="hover"&&u()}),O=()=>{var U,W;(W=(U=s.value)==null?void 0:U.updatePopper)==null||W.call(U),m==null||m()},B=()=>{g==null||g()},V=()=>{h(),z=zE(T(()=>{var U;return(U=s.value)==null?void 0:U.popperContentRef}),()=>{if(p(r))return;p(c)!=="hover"&&u()})},P=()=>{n.virtualTriggering||u()};let z;return Ce(()=>p(l),U=>{U||z==null||z()},{flush:"post"}),Ce(()=>n.content,()=>{var U,W;(W=(U=s.value)==null?void 0:U.updatePopper)==null||W.call(U)}),e({contentRef:s}),(U,W)=>(I(),ce(tg,{disabled:!U.teleported,to:p(w)},[Z(oi,{name:U.transition,onAfterLeave:k,onBeforeEnter:O,onAfterEnter:V,onBeforeLeave:B},{default:ee(()=>[p(_)?ct((I(),ce(p(Ate),kt({key:0,id:p(a),ref_key:"contentRef",ref:s},U.$attrs,{"aria-label":U.ariaLabel,"aria-hidden":p(E),"boundaries-padding":U.boundariesPadding,"fallback-placements":U.fallbackPlacements,"gpu-acceleration":U.gpuAcceleration,offset:U.offset,placement:U.placement,"popper-options":U.popperOptions,strategy:U.strategy,effect:U.effect,enterable:U.enterable,pure:U.pure,"popper-class":U.popperClass,"popper-style":[U.popperStyle,p(S)],"reference-el":U.referenceEl,"trigger-target-el":U.triggerTargetEl,visible:p(C),"z-index":U.zIndex,onMouseenter:p($),onMouseleave:p(L),onBlur:P,onClose:p(u)}),{default:ee(()=>[o.value?re("v-if",!0):me(U.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[Vt,p(C)]]):re("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var Wte=Ve(Ute,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/content.vue"]]);const Gte=["innerHTML"],jte={key:1},qte=J({name:"ElTooltip"}),Kte=J({...qte,props:Vte,emits:Fte,setup(t,{expose:e,emit:n}){const i=t;RJ();const s=yr(),o=F(),r=F(),a=()=>{var _;const C=p(o);C&&((_=C.popperInstanceRef)==null||_.update())},l=F(!1),c=F(),{show:u,hide:d,hasUpdateHandler:h}=Rte({indicator:l,toggleReason:c}),{onOpen:f,onClose:m}=dV({showAfter:On(i,"showAfter"),hideAfter:On(i,"hideAfter"),open:u,close:d}),g=T(()=>fi(i.visible)&&!h.value);xt(h_,{controlled:g,id:s,open:mh(l),trigger:On(i,"trigger"),onOpen:_=>{f(_)},onClose:_=>{m(_)},onToggle:_=>{p(l)?m(_):f(_)},onShow:()=>{n("show",c.value)},onHide:()=>{n("hide",c.value)},onBeforeShow:()=>{n("before-show",c.value)},onBeforeHide:()=>{n("before-hide",c.value)},updatePopper:a}),Ce(()=>i.disabled,_=>{_&&l.value&&(l.value=!1)});const y=()=>{var _,C;const w=(C=(_=r.value)==null?void 0:_.contentRef)==null?void 0:C.popperContentRef;return w&&w.contains(document.activeElement)};return iP(()=>l.value&&d()),e({popperRef:o,contentRef:r,isFocusInsideContent:y,updatePopper:a,onOpen:f,onClose:m,hide:d}),(_,C)=>(I(),ce(p(OV),{ref_key:"popperRef",ref:o,role:_.role},{default:ee(()=>[Z(zte,{disabled:_.disabled,trigger:_.trigger,"trigger-keys":_.triggerKeys,"virtual-ref":_.virtualRef,"virtual-triggering":_.virtualTriggering},{default:ee(()=>[_.$slots.default?me(_.$slots,"default",{key:0}):re("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),Z(Wte,{ref_key:"contentRef",ref:r,"aria-label":_.ariaLabel,"boundaries-padding":_.boundariesPadding,content:_.content,disabled:_.disabled,effect:_.effect,enterable:_.enterable,"fallback-placements":_.fallbackPlacements,"hide-after":_.hideAfter,"gpu-acceleration":_.gpuAcceleration,offset:_.offset,persistent:_.persistent,"popper-class":_.popperClass,"popper-style":_.popperStyle,placement:_.placement,"popper-options":_.popperOptions,pure:_.pure,"raw-content":_.rawContent,"reference-el":_.referenceEl,"trigger-target-el":_.triggerTargetEl,"show-after":_.showAfter,strategy:_.strategy,teleported:_.teleported,transition:_.transition,"virtual-triggering":_.virtualTriggering,"z-index":_.zIndex,"append-to":_.appendTo},{default:ee(()=>[me(_.$slots,"content",{},()=>[_.rawContent?(I(),H("span",{key:0,innerHTML:_.content},null,8,Gte)):(I(),H("span",jte,Re(_.content),1))]),_.showArrow?(I(),ce(p(rte),{key:0,"arrow-offset":_.arrowOffset},null,8,["arrow-offset"])):re("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Yte=Ve(Kte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue"]]);const Fs=yt(Yte),Zte=De({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:ae(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:ae([Function,Array]),default:nn},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:Di.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1}}),Xte={[wt]:t=>at(t),[As]:t=>at(t),[bn]:t=>at(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,select:t=>Et(t)},Qte=["aria-expanded","aria-owns"],Jte={key:0},ene=["id","aria-selected","onClick"],PV="ElAutocomplete",tne=J({name:PV,inheritAttrs:!1}),nne=J({...tne,props:Zte,emits:Xte,setup(t,{expose:e,emit:n}){const i=t,s=YE(),o=vh(),r=eo(),a=_e("autocomplete"),l=F(),c=F(),u=F(),d=F();let h=!1,f=!1;const m=F([]),g=F(-1),y=F(""),_=F(!1),C=F(!1),w=F(!1),S=T(()=>a.b(String(d_()))),E=T(()=>o.style),k=T(()=>(m.value.length>0||w.value)&&_.value),A=T(()=>!i.hideLoading&&w.value),$=T(()=>l.value?Array.from(l.value.$el.querySelectorAll("input")):[]),L=async()=>{await je(),k.value&&(y.value=`${l.value.$el.offsetWidth}px`)},O=()=>{f=!0},B=()=>{f=!1,g.value=-1},P=Rs(async le=>{if(C.value)return;const oe=de=>{w.value=!1,!C.value&&(ze(de)?(m.value=de,g.value=i.highlightFirstItem?0:-1):ki(PV,"autocomplete suggestions must be an array"))};if(w.value=!0,ze(i.fetchSuggestions))oe(i.fetchSuggestions);else{const de=await i.fetchSuggestions(le,oe);ze(de)&&oe(de)}},i.debounce),z=le=>{const oe=!!le;if(n(As,le),n(wt,le),C.value=!1,_.value||(_.value=oe),!i.triggerOnFocus&&!le){C.value=!0,m.value=[];return}P(le)},U=le=>{var oe;r.value||(((oe=le.target)==null?void 0:oe.tagName)!=="INPUT"||$.value.includes(document.activeElement))&&(_.value=!0)},W=le=>{n(bn,le)},R=le=>{f||(_.value=!0,n("focus",le),i.triggerOnFocus&&!h&&P(String(i.modelValue)))},D=le=>{f||n("blur",le)},N=()=>{_.value=!1,n(wt,""),n("clear")},K=async()=>{k.value&&g.value>=0&&g.value<m.value.length?Se(m.value[g.value]):i.selectWhenUnmatched&&(n("select",{value:i.modelValue}),m.value=[],g.value=-1)},ie=le=>{k.value&&(le.preventDefault(),le.stopPropagation(),Y())},Y=()=>{_.value=!1},ne=()=>{var le;(le=l.value)==null||le.focus()},we=()=>{var le;(le=l.value)==null||le.blur()},Se=async le=>{n(As,le[i.valueKey]),n(wt,le[i.valueKey]),n("select",le),m.value=[],g.value=-1},Te=le=>{if(!k.value||w.value)return;if(le<0){g.value=-1;return}le>=m.value.length&&(le=m.value.length-1);const oe=c.value.querySelector(`.${a.be("suggestion","wrap")}`),ve=oe.querySelectorAll(`.${a.be("suggestion","list")} li`)[le],He=oe.scrollTop,{offsetTop:Q,scrollHeight:se}=ve;Q+se>He+oe.clientHeight&&(oe.scrollTop+=se),Q<He&&(oe.scrollTop-=se),g.value=le,l.value.ref.setAttribute("aria-activedescendant",`${S.value}-item-${g.value}`)};return zE(d,()=>{k.value&&Y()}),ft(()=>{l.value.ref.setAttribute("role","textbox"),l.value.ref.setAttribute("aria-autocomplete","list"),l.value.ref.setAttribute("aria-controls","id"),l.value.ref.setAttribute("aria-activedescendant",`${S.value}-item-${g.value}`),h=l.value.ref.hasAttribute("readonly")}),e({highlightedIndex:g,activated:_,loading:w,inputRef:l,popperRef:u,suggestions:m,handleSelect:Se,handleKeyEnter:K,focus:ne,blur:we,close:Y,highlight:Te}),(le,oe)=>(I(),ce(p(Fs),{ref_key:"popperRef",ref:u,visible:p(k),placement:le.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[p(a).e("popper"),le.popperClass],teleported:le.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${p(a).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:L,onShow:O,onHide:B},{content:ee(()=>[G("div",{ref_key:"regionRef",ref:c,class:x([p(a).b("suggestion"),p(a).is("loading",p(A))]),style:Ke({[le.fitInputWidth?"width":"minWidth"]:y.value,outline:"none"}),role:"region"},[Z(p(fl),{id:p(S),tag:"ul","wrap-class":p(a).be("suggestion","wrap"),"view-class":p(a).be("suggestion","list"),role:"listbox"},{default:ee(()=>[p(A)?(I(),H("li",Jte,[Z(p(Ge),{class:x(p(a).is("loading"))},{default:ee(()=>[Z(p(Lc))]),_:1},8,["class"])])):(I(!0),H(Ye,{key:1},Ot(m.value,(de,ve)=>(I(),H("li",{id:`${p(S)}-item-${ve}`,key:ve,class:x({highlighted:g.value===ve}),role:"option","aria-selected":g.value===ve,onClick:He=>Se(de)},[me(le.$slots,"default",{item:de},()=>[Ut(Re(de[le.valueKey]),1)])],10,ene))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:ee(()=>[G("div",{ref_key:"listboxRef",ref:d,class:x([p(a).b(),le.$attrs.class]),style:Ke(p(E)),role:"combobox","aria-haspopup":"listbox","aria-expanded":p(k),"aria-owns":p(S)},[Z(p(hs),kt({ref_key:"inputRef",ref:l},p(s),{"model-value":le.modelValue,onInput:z,onChange:W,onFocus:R,onBlur:D,onClear:N,onKeydown:[oe[0]||(oe[0]=Bt(rt(de=>Te(g.value-1),["prevent"]),["up"])),oe[1]||(oe[1]=Bt(rt(de=>Te(g.value+1),["prevent"]),["down"])),Bt(K,["enter"]),Bt(Y,["tab"]),Bt(ie,["esc"])],onMousedown:U}),Ya({_:2},[le.$slots.prepend?{name:"prepend",fn:ee(()=>[me(le.$slots,"prepend")])}:void 0,le.$slots.append?{name:"append",fn:ee(()=>[me(le.$slots,"append")])}:void 0,le.$slots.prefix?{name:"prefix",fn:ee(()=>[me(le.$slots,"prefix")])}:void 0,le.$slots.suffix?{name:"suffix",fn:ee(()=>[me(le.$slots,"suffix")])}:void 0]),1040,["model-value","onKeydown"])],14,Qte)]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var ine=Ve(nne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]);const sne=yt(ine),one=De({size:{type:[Number,String],values:dl,default:"",validator:t=>st(t)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:gn},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:ae(String),default:"cover"}}),rne={error:t=>t instanceof Event},ane=["src","alt","srcset"],lne=J({name:"ElAvatar"}),cne=J({...lne,props:one,emits:rne,setup(t,{emit:e}){const n=t,i=_e("avatar"),s=F(!1),o=T(()=>{const{size:c,icon:u,shape:d}=n,h=[i.b()];return at(c)&&h.push(i.m(c)),u&&h.push(i.m("icon")),d&&h.push(i.m(d)),h}),r=T(()=>{const{size:c}=n;return st(c)?i.cssVarBlock({size:mi(c)||""}):void 0}),a=T(()=>({objectFit:n.fit}));Ce(()=>n.src,()=>s.value=!1);function l(c){s.value=!0,e("error",c)}return(c,u)=>(I(),H("span",{class:x(p(o)),style:Ke(p(r))},[(c.src||c.srcSet)&&!s.value?(I(),H("img",{key:0,src:c.src,alt:c.alt,srcset:c.srcSet,style:Ke(p(a)),onError:l},null,44,ane)):c.icon?(I(),ce(p(Ge),{key:1},{default:ee(()=>[(I(),ce(It(c.icon)))]),_:1})):me(c.$slots,"default",{key:2})],6))}});var une=Ve(cne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/avatar/src/avatar.vue"]]);const dne=yt(une),pne={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},hne={click:t=>t instanceof MouseEvent},fne=(t,e,n)=>{const i=yn(),s=yn(),o=F(!1),r=()=>{if(!i.value)return;const u=Date.now(),d=i.value.scrollTop,h=()=>{if(!i.value)return;const f=(Date.now()-u)/500;f<1?(i.value.scrollTop=d*(1-mQ(f)),requestAnimationFrame(h)):i.value.scrollTop=0};requestAnimationFrame(h)},a=()=>{i.value&&(o.value=i.value.scrollTop>=t.visibilityHeight)},l=u=>{r(),e("click",u)},c=bR(a,300,!0);return En(s,"scroll",c),ft(()=>{var u;s.value=document,i.value=document.documentElement,t.target&&(i.value=(u=document.querySelector(t.target))!=null?u:void 0,i.value||ki(n,`target does not exist: ${t.target}`),s.value=i.value)}),{visible:o,handleClick:l}},RV="ElBacktop",mne=J({name:RV}),gne=J({...mne,props:pne,emits:hne,setup(t,{emit:e}){const n=t,i=_e("backtop"),{handleClick:s,visible:o}=fne(n,e,RV),r=T(()=>({right:`${n.right}px`,bottom:`${n.bottom}px`}));return(a,l)=>(I(),ce(oi,{name:`${p(i).namespace.value}-fade-in`},{default:ee(()=>[p(o)?(I(),H("div",{key:0,style:Ke(p(r)),class:x(p(i).b()),onClick:l[0]||(l[0]=rt((...c)=>p(s)&&p(s)(...c),["stop"]))},[me(a.$slots,"default",{},()=>[Z(p(Ge),{class:x(p(i).e("icon"))},{default:ee(()=>[Z(p(xK))]),_:1},8,["class"])])],6)):re("v-if",!0)]),_:3},8,["name"]))}});var vne=Ve(gne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/backtop/src/backtop.vue"]]);const yne=yt(vne),bne=De({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),_ne=["textContent"],wne=J({name:"ElBadge"}),Cne=J({...wne,props:bne,setup(t,{expose:e}){const n=t,i=_e("badge"),s=T(()=>n.isDot?"":st(n.value)&&st(n.max)?n.max<n.value?`${n.max}+`:`${n.value}`:`${n.value}`);return e({content:s}),(o,r)=>(I(),H("div",{class:x(p(i).b())},[me(o.$slots,"default"),Z(oi,{name:`${p(i).namespace.value}-zoom-in-center`,persisted:""},{default:ee(()=>[ct(G("sup",{class:x([p(i).e("content"),p(i).em("content",o.type),p(i).is("fixed",!!o.$slots.default),p(i).is("dot",o.isDot)]),textContent:Re(p(s))},null,10,_ne),[[Vt,!o.hidden&&(p(s)||o.isDot)]])]),_:1},8,["name"])],2))}});var Sne=Ve(Cne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const VV=yt(Sne),Ene=De({separator:{type:String,default:"/"},separatorIcon:{type:gn}}),kne=J({name:"ElBreadcrumb"}),Tne=J({...kne,props:Ene,setup(t){const e=t,n=_e("breadcrumb"),i=F();return xt(OR,e),ft(()=>{const s=i.value.querySelectorAll(`.${n.e("item")}`);s.length&&s[s.length-1].setAttribute("aria-current","page")}),(s,o)=>(I(),H("div",{ref_key:"breadcrumb",ref:i,class:x(p(n).b()),"aria-label":"Breadcrumb",role:"navigation"},[me(s.$slots,"default")],2))}});var Ine=Ve(Tne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb.vue"]]);const xne=De({to:{type:ae([String,Object]),default:""},replace:{type:Boolean,default:!1}}),Mne=J({name:"ElBreadcrumbItem"}),$ne=J({...Mne,props:xne,setup(t){const e=t,n=vt(),i=qe(OR,void 0),s=_e("breadcrumb"),{separator:o,separatorIcon:r}=Ei(i),a=n.appContext.config.globalProperties.$router,l=F(),c=()=>{!e.to||!a||(e.replace?a.replace(e.to):a.push(e.to))};return(u,d)=>(I(),H("span",{class:x(p(s).e("item"))},[G("span",{ref_key:"link",ref:l,class:x([p(s).e("inner"),p(s).is("link",!!u.to)]),role:"link",onClick:c},[me(u.$slots,"default")],2),p(r)?(I(),ce(p(Ge),{key:0,class:x(p(s).e("separator"))},{default:ee(()=>[(I(),ce(It(p(r))))]),_:1},8,["class"])):(I(),H("span",{key:1,class:x(p(s).e("separator")),role:"presentation"},Re(p(o)),3))],2))}});var FV=Ve($ne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb-item.vue"]]);const Ane=yt(Ine,{BreadcrumbItem:FV}),Lne=Nn(FV),One=(t,e)=>{Xa({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},T(()=>t.type==="text"));const n=qe(PR,void 0),i=pl("button"),{form:s}=Ns(),o=gi(T(()=>n==null?void 0:n.size)),r=eo(),a=F(),l=Ki(),c=T(()=>t.type||(n==null?void 0:n.type)||""),u=T(()=>{var f,m,g;return(g=(m=t.autoInsertSpace)!=null?m:(f=i.value)==null?void 0:f.autoInsertSpace)!=null?g:!1}),d=T(()=>{var f;const m=(f=l.default)==null?void 0:f.call(l);if(u.value&&(m==null?void 0:m.length)===1){const g=m[0];if((g==null?void 0:g.type)===gh){const y=g.children;return/^\p{Unified_Ideograph}{2}$/u.test(y.trim())}}return!1});return{_disabled:r,_size:o,_type:c,_ref:a,shouldAddSpace:d,handleClick:f=>{t.nativeType==="reset"&&(s==null||s.resetFields()),e("click",f)}}},b1=["default","primary","success","warning","info","danger","text",""],Pne=["button","submit","reset"],_1=De({size:Vs,disabled:Boolean,type:{type:String,values:b1,default:""},icon:{type:gn},nativeType:{type:String,values:Pne,default:"button"},loading:Boolean,loadingIcon:{type:gn,default:()=>Lc},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0}}),Rne={click:t=>t instanceof MouseEvent};function ss(t,e){Vne(t)&&(t="100%");var n=Fne(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function Hg(t){return Math.min(1,Math.max(0,t))}function Vne(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function Fne(t){return typeof t=="string"&&t.indexOf("%")!==-1}function DV(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Ug(t){return t<=1?"".concat(Number(t)*100,"%"):t}function Tu(t){return t.length===1?"0"+t:String(t)}function Dne(t,e,n){return{r:ss(t,255)*255,g:ss(e,255)*255,b:ss(n,255)*255}}function DM(t,e,n){t=ss(t,255),e=ss(e,255),n=ss(n,255);var i=Math.max(t,e,n),s=Math.min(t,e,n),o=0,r=0,a=(i+s)/2;if(i===s)r=0,o=0;else{var l=i-s;switch(r=a>.5?l/(2-i-s):l/(i+s),i){case t:o=(e-n)/l+(e<n?6:0);break;case e:o=(n-t)/l+2;break;case n:o=(t-e)/l+4;break}o/=6}return{h:o,s:r,l:a}}function gw(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*(6*n):n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Nne(t,e,n){var i,s,o;if(t=ss(t,360),e=ss(e,100),n=ss(n,100),e===0)s=n,o=n,i=n;else{var r=n<.5?n*(1+e):n+e-n*e,a=2*n-r;i=gw(a,r,t+1/3),s=gw(a,r,t),o=gw(a,r,t-1/3)}return{r:i*255,g:s*255,b:o*255}}function NM(t,e,n){t=ss(t,255),e=ss(e,255),n=ss(n,255);var i=Math.max(t,e,n),s=Math.min(t,e,n),o=0,r=i,a=i-s,l=i===0?0:a/i;if(i===s)o=0;else{switch(i){case t:o=(e-n)/a+(e<n?6:0);break;case e:o=(n-t)/a+2;break;case n:o=(t-e)/a+4;break}o/=6}return{h:o,s:l,v:r}}function Bne(t,e,n){t=ss(t,360)*6,e=ss(e,100),n=ss(n,100);var i=Math.floor(t),s=t-i,o=n*(1-e),r=n*(1-s*e),a=n*(1-(1-s)*e),l=i%6,c=[n,r,o,o,a,n][l],u=[a,n,n,r,o,o][l],d=[o,o,a,n,n,r][l];return{r:c*255,g:u*255,b:d*255}}function BM(t,e,n,i){var s=[Tu(Math.round(t).toString(16)),Tu(Math.round(e).toString(16)),Tu(Math.round(n).toString(16))];return i&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function zne(t,e,n,i,s){var o=[Tu(Math.round(t).toString(16)),Tu(Math.round(e).toString(16)),Tu(Math.round(n).toString(16)),Tu(Hne(i))];return s&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))&&o[3].startsWith(o[3].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function Hne(t){return Math.round(parseFloat(t)*255).toString(16)}function zM(t){return so(t)/255}function so(t){return parseInt(t,16)}function Une(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var w1={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Wne(t){var e={r:0,g:0,b:0},n=1,i=null,s=null,o=null,r=!1,a=!1;return typeof t=="string"&&(t=qne(t)),typeof t=="object"&&(pa(t.r)&&pa(t.g)&&pa(t.b)?(e=Dne(t.r,t.g,t.b),r=!0,a=String(t.r).substr(-1)==="%"?"prgb":"rgb"):pa(t.h)&&pa(t.s)&&pa(t.v)?(i=Ug(t.s),s=Ug(t.v),e=Bne(t.h,i,s),r=!0,a="hsv"):pa(t.h)&&pa(t.s)&&pa(t.l)&&(i=Ug(t.s),o=Ug(t.l),e=Nne(t.h,i,o),r=!0,a="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(n=t.a)),n=DV(n),{ok:r,format:t.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}var Gne="[-\\+]?\\d+%?",jne="[-\\+]?\\d*\\.\\d+%?",oc="(?:".concat(jne,")|(?:").concat(Gne,")"),vw="[\\s|\\(]+(".concat(oc,")[,|\\s]+(").concat(oc,")[,|\\s]+(").concat(oc,")\\s*\\)?"),yw="[\\s|\\(]+(".concat(oc,")[,|\\s]+(").concat(oc,")[,|\\s]+(").concat(oc,")[,|\\s]+(").concat(oc,")\\s*\\)?"),Jo={CSS_UNIT:new RegExp(oc),rgb:new RegExp("rgb"+vw),rgba:new RegExp("rgba"+yw),hsl:new RegExp("hsl"+vw),hsla:new RegExp("hsla"+yw),hsv:new RegExp("hsv"+vw),hsva:new RegExp("hsva"+yw),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function qne(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(w1[t])t=w1[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=Jo.rgb.exec(t);return n?{r:n[1],g:n[2],b:n[3]}:(n=Jo.rgba.exec(t),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Jo.hsl.exec(t),n?{h:n[1],s:n[2],l:n[3]}:(n=Jo.hsla.exec(t),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Jo.hsv.exec(t),n?{h:n[1],s:n[2],v:n[3]}:(n=Jo.hsva.exec(t),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Jo.hex8.exec(t),n?{r:so(n[1]),g:so(n[2]),b:so(n[3]),a:zM(n[4]),format:e?"name":"hex8"}:(n=Jo.hex6.exec(t),n?{r:so(n[1]),g:so(n[2]),b:so(n[3]),format:e?"name":"hex"}:(n=Jo.hex4.exec(t),n?{r:so(n[1]+n[1]),g:so(n[2]+n[2]),b:so(n[3]+n[3]),a:zM(n[4]+n[4]),format:e?"name":"hex8"}:(n=Jo.hex3.exec(t),n?{r:so(n[1]+n[1]),g:so(n[2]+n[2]),b:so(n[3]+n[3]),format:e?"name":"hex"}:!1)))))))))}function pa(t){return Boolean(Jo.CSS_UNIT.exec(String(t)))}var NV=function(){function t(e,n){e===void 0&&(e=""),n===void 0&&(n={});var i;if(e instanceof t)return e;typeof e=="number"&&(e=Une(e)),this.originalInput=e;var s=Wne(e);this.originalInput=e,this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=n.format)!==null&&i!==void 0?i:s.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=s.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),n,i,s,o=e.r/255,r=e.g/255,a=e.b/255;return o<=.03928?n=o/12.92:n=Math.pow((o+.055)/1.055,2.4),r<=.03928?i=r/12.92:i=Math.pow((r+.055)/1.055,2.4),a<=.03928?s=a/12.92:s=Math.pow((a+.055)/1.055,2.4),.2126*n+.7152*i+.0722*s},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=DV(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},t.prototype.toHsv=function(){var e=NM(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=NM(this.r,this.g,this.b),n=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.v*100);return this.a===1?"hsv(".concat(n,", ").concat(i,"%, ").concat(s,"%)"):"hsva(".concat(n,", ").concat(i,"%, ").concat(s,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=DM(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=DM(this.r,this.g,this.b),n=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.l*100);return this.a===1?"hsl(".concat(n,", ").concat(i,"%, ").concat(s,"%)"):"hsla(".concat(n,", ").concat(i,"%, ").concat(s,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),BM(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),zne(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),n=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(n,", ").concat(i,")"):"rgba(".concat(e,", ").concat(n,", ").concat(i,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(n){return"".concat(Math.round(ss(n,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(n){return Math.round(ss(n,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+BM(this.r,this.g,this.b,!1),n=0,i=Object.entries(w1);n<i.length;n++){var s=i[n],o=s[0],r=s[1];if(e===r)return o}return!1},t.prototype.toString=function(e){var n=Boolean(e);e=e??this.format;var i=!1,s=this.a<1&&this.a>=0,o=!n&&s&&(e.startsWith("hex")||e==="name");return o?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l+=e/100,n.l=Hg(n.l),new t(n)},t.prototype.brighten=function(e){e===void 0&&(e=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),new t(n)},t.prototype.darken=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l-=e/100,n.l=Hg(n.l),new t(n)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s-=e/100,n.s=Hg(n.s),new t(n)},t.prototype.saturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s+=e/100,n.s=Hg(n.s),new t(n)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var n=this.toHsl(),i=(n.h+e)%360;return n.h=i<0?360+i:i,new t(n)},t.prototype.mix=function(e,n){n===void 0&&(n=50);var i=this.toRgb(),s=new t(e).toRgb(),o=n/100,r={r:(s.r-i.r)*o+i.r,g:(s.g-i.g)*o+i.g,b:(s.b-i.b)*o+i.b,a:(s.a-i.a)*o+i.a};return new t(r)},t.prototype.analogous=function(e,n){e===void 0&&(e=6),n===void 0&&(n=30);var i=this.toHsl(),s=360/n,o=[this];for(i.h=(i.h-(s*e>>1)+720)%360;--e;)i.h=(i.h+s)%360,o.push(new t(i));return o},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var n=this.toHsv(),i=n.h,s=n.s,o=n.v,r=[],a=1/e;e--;)r.push(new t({h:i,s,v:o})),o=(o+a)%1;return r},t.prototype.splitcomplement=function(){var e=this.toHsl(),n=e.h;return[this,new t({h:(n+72)%360,s:e.s,l:e.l}),new t({h:(n+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var n=this.toRgb(),i=new t(e).toRgb();return new t({r:i.r+(n.r-i.r)*n.a,g:i.g+(n.g-i.g)*n.a,b:i.b+(n.b-i.b)*n.a})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var n=this.toHsl(),i=n.h,s=[this],o=360/e,r=1;r<e;r++)s.push(new t({h:(i+r*o)%360,s:n.s,l:n.l}));return s},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();function bl(t,e=20){return t.mix("#141414",e).toString()}function Kne(t){const e=eo(),n=_e("button");return T(()=>{let i={};const s=t.color;if(s){const o=new NV(s),r=t.dark?o.tint(20).toString():bl(o,20);if(t.plain)i=n.cssVarBlock({"bg-color":t.dark?bl(o,90):o.tint(90).toString(),"text-color":s,"border-color":t.dark?bl(o,50):o.tint(50).toString(),"hover-text-color":`var(${n.cssVarName("color-white")})`,"hover-bg-color":s,"hover-border-color":s,"active-bg-color":r,"active-text-color":`var(${n.cssVarName("color-white")})`,"active-border-color":r}),e.value&&(i[n.cssVarBlockName("disabled-bg-color")]=t.dark?bl(o,90):o.tint(90).toString(),i[n.cssVarBlockName("disabled-text-color")]=t.dark?bl(o,50):o.tint(50).toString(),i[n.cssVarBlockName("disabled-border-color")]=t.dark?bl(o,80):o.tint(80).toString());else{const a=t.dark?bl(o,30):o.tint(30).toString(),l=o.isDark()?`var(${n.cssVarName("color-white")})`:`var(${n.cssVarName("color-black")})`;if(i=n.cssVarBlock({"bg-color":s,"text-color":l,"border-color":s,"hover-bg-color":a,"hover-text-color":l,"hover-border-color":a,"active-bg-color":r,"active-border-color":r}),e.value){const c=t.dark?bl(o,50):o.tint(50).toString();i[n.cssVarBlockName("disabled-bg-color")]=c,i[n.cssVarBlockName("disabled-text-color")]=t.dark?"rgba(255, 255, 255, 0.5)":`var(${n.cssVarName("color-white")})`,i[n.cssVarBlockName("disabled-border-color")]=c}}}return i})}const Yne=["aria-disabled","disabled","autofocus","type"],Zne=J({name:"ElButton"}),Xne=J({...Zne,props:_1,emits:Rne,setup(t,{expose:e,emit:n}){const i=t,s=Kne(i),o=_e("button"),{_ref:r,_size:a,_type:l,_disabled:c,shouldAddSpace:u,handleClick:d}=One(i,n);return e({ref:r,size:a,type:l,disabled:c,shouldAddSpace:u}),(h,f)=>(I(),H("button",{ref_key:"_ref",ref:r,class:x([p(o).b(),p(o).m(p(l)),p(o).m(p(a)),p(o).is("disabled",p(c)),p(o).is("loading",h.loading),p(o).is("plain",h.plain),p(o).is("round",h.round),p(o).is("circle",h.circle),p(o).is("text",h.text),p(o).is("link",h.link),p(o).is("has-bg",h.bg)]),"aria-disabled":p(c)||h.loading,disabled:p(c)||h.loading,autofocus:h.autofocus,type:h.nativeType,style:Ke(p(s)),onClick:f[0]||(f[0]=(...m)=>p(d)&&p(d)(...m))},[h.loading?(I(),H(Ye,{key:0},[h.$slots.loading?me(h.$slots,"loading",{key:0}):(I(),ce(p(Ge),{key:1,class:x(p(o).is("loading"))},{default:ee(()=>[(I(),ce(It(h.loadingIcon)))]),_:1},8,["class"]))],64)):h.icon||h.$slots.icon?(I(),ce(p(Ge),{key:1},{default:ee(()=>[h.icon?(I(),ce(It(h.icon),{key:0})):me(h.$slots,"icon",{key:1})]),_:3})):re("v-if",!0),h.$slots.default?(I(),H("span",{key:2,class:x({[p(o).em("text","expand")]:p(u)})},[me(h.$slots,"default")],2)):re("v-if",!0)],14,Yne))}});var Qne=Ve(Xne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button.vue"]]);const Jne={size:_1.size,type:_1.type},eie=J({name:"ElButtonGroup"}),tie=J({...eie,props:Jne,setup(t){const e=t;xt(PR,Yt({size:On(e,"size"),type:On(e,"type")}));const n=_e("button");return(i,s)=>(I(),H("div",{class:x(`${p(n).b("group")}`)},[me(i.$slots,"default")],2))}});var BV=Ve(tie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button-group.vue"]]);const os=yt(Qne,{ButtonGroup:BV}),zV=Nn(BV);var ml=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},C1={},nie={get exports(){return C1},set exports(t){C1=t}};(function(t,e){(function(n,i){t.exports=i()})(ml,function(){var n=1e3,i=6e4,s=36e5,o="millisecond",r="second",a="minute",l="hour",c="day",u="week",d="month",h="quarter",f="year",m="date",g="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,C={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(P){var z=["th","st","nd","rd"],U=P%100;return"["+P+(z[(U-20)%10]||z[U]||z[0])+"]"}},w=function(P,z,U){var W=String(P);return!W||W.length>=z?P:""+Array(z+1-W.length).join(U)+P},S={s:w,z:function(P){var z=-P.utcOffset(),U=Math.abs(z),W=Math.floor(U/60),R=U%60;return(z<=0?"+":"-")+w(W,2,"0")+":"+w(R,2,"0")},m:function P(z,U){if(z.date()<U.date())return-P(U,z);var W=12*(U.year()-z.year())+(U.month()-z.month()),R=z.clone().add(W,d),D=U-R<0,N=z.clone().add(W+(D?-1:1),d);return+(-(W+(U-R)/(D?R-N:N-R))||0)},a:function(P){return P<0?Math.ceil(P)||0:Math.floor(P)},p:function(P){return{M:d,y:f,w:u,d:c,D:m,h:l,m:a,s:r,ms:o,Q:h}[P]||String(P||"").toLowerCase().replace(/s$/,"")},u:function(P){return P===void 0}},E="en",k={};k[E]=C;var A=function(P){return P instanceof B},$=function P(z,U,W){var R;if(!z)return E;if(typeof z=="string"){var D=z.toLowerCase();k[D]&&(R=D),U&&(k[D]=U,R=D);var N=z.split("-");if(!R&&N.length>1)return P(N[0])}else{var K=z.name;k[K]=z,R=K}return!W&&R&&(E=R),R||!W&&E},L=function(P,z){if(A(P))return P.clone();var U=typeof z=="object"?z:{};return U.date=P,U.args=arguments,new B(U)},O=S;O.l=$,O.i=A,O.w=function(P,z){return L(P,{locale:z.$L,utc:z.$u,x:z.$x,$offset:z.$offset})};var B=function(){function P(U){this.$L=$(U.locale,null,!0),this.parse(U)}var z=P.prototype;return z.parse=function(U){this.$d=function(W){var R=W.date,D=W.utc;if(R===null)return new Date(NaN);if(O.u(R))return new Date;if(R instanceof Date)return new Date(R);if(typeof R=="string"&&!/Z$/i.test(R)){var N=R.match(y);if(N){var K=N[2]-1||0,ie=(N[7]||"0").substring(0,3);return D?new Date(Date.UTC(N[1],K,N[3]||1,N[4]||0,N[5]||0,N[6]||0,ie)):new Date(N[1],K,N[3]||1,N[4]||0,N[5]||0,N[6]||0,ie)}}return new Date(R)}(U),this.$x=U.x||{},this.init()},z.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},z.$utils=function(){return O},z.isValid=function(){return this.$d.toString()!==g},z.isSame=function(U,W){var R=L(U);return this.startOf(W)<=R&&R<=this.endOf(W)},z.isAfter=function(U,W){return L(U)<this.startOf(W)},z.isBefore=function(U,W){return this.endOf(W)<L(U)},z.$g=function(U,W,R){return O.u(U)?this[W]:this.set(R,U)},z.unix=function(){return Math.floor(this.valueOf()/1e3)},z.valueOf=function(){return this.$d.getTime()},z.startOf=function(U,W){var R=this,D=!!O.u(W)||W,N=O.p(U),K=function(oe,de){var ve=O.w(R.$u?Date.UTC(R.$y,de,oe):new Date(R.$y,de,oe),R);return D?ve:ve.endOf(c)},ie=function(oe,de){return O.w(R.toDate()[oe].apply(R.toDate("s"),(D?[0,0,0,0]:[23,59,59,999]).slice(de)),R)},Y=this.$W,ne=this.$M,we=this.$D,Se="set"+(this.$u?"UTC":"");switch(N){case f:return D?K(1,0):K(31,11);case d:return D?K(1,ne):K(0,ne+1);case u:var Te=this.$locale().weekStart||0,le=(Y<Te?Y+7:Y)-Te;return K(D?we-le:we+(6-le),ne);case c:case m:return ie(Se+"Hours",0);case l:return ie(Se+"Minutes",1);case a:return ie(Se+"Seconds",2);case r:return ie(Se+"Milliseconds",3);default:return this.clone()}},z.endOf=function(U){return this.startOf(U,!1)},z.$set=function(U,W){var R,D=O.p(U),N="set"+(this.$u?"UTC":""),K=(R={},R[c]=N+"Date",R[m]=N+"Date",R[d]=N+"Month",R[f]=N+"FullYear",R[l]=N+"Hours",R[a]=N+"Minutes",R[r]=N+"Seconds",R[o]=N+"Milliseconds",R)[D],ie=D===c?this.$D+(W-this.$W):W;if(D===d||D===f){var Y=this.clone().set(m,1);Y.$d[K](ie),Y.init(),this.$d=Y.set(m,Math.min(this.$D,Y.daysInMonth())).$d}else K&&this.$d[K](ie);return this.init(),this},z.set=function(U,W){return this.clone().$set(U,W)},z.get=function(U){return this[O.p(U)]()},z.add=function(U,W){var R,D=this;U=Number(U);var N=O.p(W),K=function(ne){var we=L(D);return O.w(we.date(we.date()+Math.round(ne*U)),D)};if(N===d)return this.set(d,this.$M+U);if(N===f)return this.set(f,this.$y+U);if(N===c)return K(1);if(N===u)return K(7);var ie=(R={},R[a]=i,R[l]=s,R[r]=n,R)[N]||1,Y=this.$d.getTime()+U*ie;return O.w(Y,this)},z.subtract=function(U,W){return this.add(-1*U,W)},z.format=function(U){var W=this,R=this.$locale();if(!this.isValid())return R.invalidDate||g;var D=U||"YYYY-MM-DDTHH:mm:ssZ",N=O.z(this),K=this.$H,ie=this.$m,Y=this.$M,ne=R.weekdays,we=R.months,Se=function(de,ve,He,Q){return de&&(de[ve]||de(W,D))||He[ve].slice(0,Q)},Te=function(de){return O.s(K%12||12,de,"0")},le=R.meridiem||function(de,ve,He){var Q=de<12?"AM":"PM";return He?Q.toLowerCase():Q},oe={YY:String(this.$y).slice(-2),YYYY:this.$y,M:Y+1,MM:O.s(Y+1,2,"0"),MMM:Se(R.monthsShort,Y,we,3),MMMM:Se(we,Y),D:this.$D,DD:O.s(this.$D,2,"0"),d:String(this.$W),dd:Se(R.weekdaysMin,this.$W,ne,2),ddd:Se(R.weekdaysShort,this.$W,ne,3),dddd:ne[this.$W],H:String(K),HH:O.s(K,2,"0"),h:Te(1),hh:Te(2),a:le(K,ie,!0),A:le(K,ie,!1),m:String(ie),mm:O.s(ie,2,"0"),s:String(this.$s),ss:O.s(this.$s,2,"0"),SSS:O.s(this.$ms,3,"0"),Z:N};return D.replace(_,function(de,ve){return ve||oe[de]||N.replace(":","")})},z.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},z.diff=function(U,W,R){var D,N=O.p(W),K=L(U),ie=(K.utcOffset()-this.utcOffset())*i,Y=this-K,ne=O.m(this,K);return ne=(D={},D[f]=ne/12,D[d]=ne,D[h]=ne/3,D[u]=(Y-ie)/6048e5,D[c]=(Y-ie)/864e5,D[l]=Y/s,D[a]=Y/i,D[r]=Y/n,D)[N]||Y,R?ne:O.a(ne)},z.daysInMonth=function(){return this.endOf(d).$D},z.$locale=function(){return k[this.$L]},z.locale=function(U,W){if(!U)return this.$L;var R=this.clone(),D=$(U,W,!0);return D&&(R.$L=D),R},z.clone=function(){return O.w(this.$d,this)},z.toDate=function(){return new Date(this.valueOf())},z.toJSON=function(){return this.isValid()?this.toISOString():null},z.toISOString=function(){return this.$d.toISOString()},z.toString=function(){return this.$d.toUTCString()},P}(),V=B.prototype;return L.prototype=V,[["$ms",o],["$s",r],["$m",a],["$H",l],["$W",c],["$M",d],["$y",f],["$D",m]].forEach(function(P){V[P[1]]=function(z){return this.$g(z,P[0],P[1])}}),L.extend=function(P,z){return P.$i||(P(z,B,L),P.$i=!0),L},L.locale=$,L.isDayjs=A,L.unix=function(P){return L(1e3*P)},L.en=k[E],L.Ls=k,L.p={},L})})(nie);const mt=C1;var S1={},iie={get exports(){return S1},set exports(t){S1=t}};(function(t,e){(function(n,i){t.exports=i()})(ml,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,s=/\d\d/,o=/\d\d?/,r=/\d*[^-_:/,()\s\d]+/,a={},l=function(g){return(g=+g)+(g>68?1900:2e3)},c=function(g){return function(y){this[g]=+y}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(g){(this.zone||(this.zone={})).offset=function(y){if(!y||y==="Z")return 0;var _=y.match(/([+-]|\d\d)/g),C=60*_[1]+(+_[2]||0);return C===0?0:_[0]==="+"?-C:C}(g)}],d=function(g){var y=a[g];return y&&(y.indexOf?y:y.s.concat(y.f))},h=function(g,y){var _,C=a.meridiem;if(C){for(var w=1;w<=24;w+=1)if(g.indexOf(C(w,0,y))>-1){_=w>12;break}}else _=g===(y?"pm":"PM");return _},f={A:[r,function(g){this.afternoon=h(g,!1)}],a:[r,function(g){this.afternoon=h(g,!0)}],S:[/\d/,function(g){this.milliseconds=100*+g}],SS:[s,function(g){this.milliseconds=10*+g}],SSS:[/\d{3}/,function(g){this.milliseconds=+g}],s:[o,c("seconds")],ss:[o,c("seconds")],m:[o,c("minutes")],mm:[o,c("minutes")],H:[o,c("hours")],h:[o,c("hours")],HH:[o,c("hours")],hh:[o,c("hours")],D:[o,c("day")],DD:[s,c("day")],Do:[r,function(g){var y=a.ordinal,_=g.match(/\d+/);if(this.day=_[0],y)for(var C=1;C<=31;C+=1)y(C).replace(/\[|\]/g,"")===g&&(this.day=C)}],M:[o,c("month")],MM:[s,c("month")],MMM:[r,function(g){var y=d("months"),_=(d("monthsShort")||y.map(function(C){return C.slice(0,3)})).indexOf(g)+1;if(_<1)throw new Error;this.month=_%12||_}],MMMM:[r,function(g){var y=d("months").indexOf(g)+1;if(y<1)throw new Error;this.month=y%12||y}],Y:[/[+-]?\d+/,c("year")],YY:[s,function(g){this.year=l(g)}],YYYY:[/\d{4}/,c("year")],Z:u,ZZ:u};function m(g){var y,_;y=g,_=a&&a.formats;for(var C=(g=y.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(L,O,B){var V=B&&B.toUpperCase();return O||_[B]||n[B]||_[V].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(P,z,U){return z||U.slice(1)})})).match(i),w=C.length,S=0;S<w;S+=1){var E=C[S],k=f[E],A=k&&k[0],$=k&&k[1];C[S]=$?{regex:A,parser:$}:E.replace(/^\[|\]$/g,"")}return function(L){for(var O={},B=0,V=0;B<w;B+=1){var P=C[B];if(typeof P=="string")V+=P.length;else{var z=P.regex,U=P.parser,W=L.slice(V),R=z.exec(W)[0];U.call(O,R),L=L.replace(R,"")}}return function(D){var N=D.afternoon;if(N!==void 0){var K=D.hours;N?K<12&&(D.hours+=12):K===12&&(D.hours=0),delete D.afternoon}}(O),O}}return function(g,y,_){_.p.customParseFormat=!0,g&&g.parseTwoDigitYear&&(l=g.parseTwoDigitYear);var C=y.prototype,w=C.parse;C.parse=function(S){var E=S.date,k=S.utc,A=S.args;this.$u=k;var $=A[1];if(typeof $=="string"){var L=A[2]===!0,O=A[3]===!0,B=L||O,V=A[2];O&&(V=A[2]),a=this.$locale(),!L&&V&&(a=_.Ls[V]),this.$d=function(W,R,D){try{if(["x","X"].indexOf(R)>-1)return new Date((R==="X"?1e3:1)*W);var N=m(R)(W),K=N.year,ie=N.month,Y=N.day,ne=N.hours,we=N.minutes,Se=N.seconds,Te=N.milliseconds,le=N.zone,oe=new Date,de=Y||(K||ie?1:oe.getDate()),ve=K||oe.getFullYear(),He=0;K&&!ie||(He=ie>0?ie-1:oe.getMonth());var Q=ne||0,se=we||0,fe=Se||0,Me=Te||0;return le?new Date(Date.UTC(ve,He,de,Q,se,fe,Me+60*le.offset*1e3)):D?new Date(Date.UTC(ve,He,de,Q,se,fe,Me)):new Date(ve,He,de,Q,se,fe,Me)}catch{return new Date("")}}(E,$,k),this.init(),V&&V!==!0&&(this.$L=this.locale(V).$L),B&&E!=this.format($)&&(this.$d=new Date("")),a={}}else if($ instanceof Array)for(var P=$.length,z=1;z<=P;z+=1){A[1]=$[z-1];var U=_.apply(this,A);if(U.isValid()){this.$d=U.$d,this.$L=U.$L,this.init();break}z===P&&(this.$d=new Date(""))}else w.call(this,S)}}})})(iie);const mk=S1,HM=["hours","minutes","seconds"],E1="HH:mm:ss",Id="YYYY-MM-DD",sie={date:Id,dates:Id,week:"gggg[w]ww",year:"YYYY",month:"YYYY-MM",datetime:`${Id} ${E1}`,monthrange:"YYYY-MM",daterange:Id,datetimerange:`${Id} ${E1}`},bw=(t,e)=>[t>0?t-1:void 0,t,t<e?t+1:void 0],hc=t=>Array.from(Array.from({length:t}).keys()),HV=t=>t.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),UV=t=>t.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),UM=function(t,e){const n=ju(t),i=ju(e);return n&&i?t.getTime()===e.getTime():!n&&!i?t===e:!1},WM=function(t,e){const n=ze(t),i=ze(e);return n&&i?t.length!==e.length?!1:t.every((s,o)=>UM(s,e[o])):!n&&!i?UM(t,e):!1},GM=function(t,e,n){const i=No(e)||e==="x"?mt(t).locale(n):mt(t,e).locale(n);return i.isValid()?i:void 0},jM=function(t,e,n){return No(e)?t:e==="x"?+t:mt(t).locale(n).format(e)},_w=(t,e)=>{var n;const i=[],s=e==null?void 0:e();for(let o=0;o<t;o++)i.push((n=s==null?void 0:s.includes(o))!=null?n:!1);return i},WV=De({disabledHours:{type:ae(Function)},disabledMinutes:{type:ae(Function)},disabledSeconds:{type:ae(Function)}}),GV=De({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),gk=De({id:{type:ae([Array,String])},name:{type:ae([Array,String]),default:""},popperClass:{type:String,default:""},format:String,valueFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:ae([String,Object]),default:Ac},editable:{type:Boolean,default:!0},prefixIcon:{type:ae([String,Object]),default:""},size:Vs,readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""},popperOptions:{type:ae(Object),default:()=>({})},modelValue:{type:ae([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:ae([Date,Array])},defaultTime:{type:ae([Date,Array])},isRange:{type:Boolean,default:!1},...WV,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:{type:Boolean,default:!1},label:{type:String,default:void 0},tabindex:{type:ae([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean}),oie=["id","name","placeholder","value","disabled","readonly"],rie=["id","name","placeholder","value","disabled","readonly"],aie=J({name:"Picker"}),lie=J({...aie,props:gk,emits:["update:modelValue","change","focus","blur","calendar-change","panel-change","visible-change","keydown"],setup(t,{expose:e,emit:n}){const i=t,{lang:s}=Gt(),o=_e("date"),r=_e("input"),a=_e("range"),{form:l,formItem:c}=Ns(),u=qe("ElPopperOptions",{}),d=F(),h=F(),f=F(!1),m=F(!1),g=F(null);let y=!1,_=!1;Ce(f,j=>{j?je(()=>{j&&(g.value=i.modelValue)}):(pe.value=null,je(()=>{C(i.modelValue)}))});const C=(j,te)=>{(te||!WM(j,g.value))&&(n("change",j),i.validateEvent&&(c==null||c.validate("change").catch(ye=>void 0)))},w=j=>{if(!WM(i.modelValue,j)){let te;ze(j)?te=j.map(ye=>jM(ye,i.valueFormat,s.value)):j&&(te=jM(j,i.valueFormat,s.value)),n("update:modelValue",j&&te,s.value)}},S=j=>{n("keydown",j)},E=T(()=>{if(h.value){const j=se.value?h.value:h.value.$el;return Array.from(j.querySelectorAll("input"))}return[]}),k=(j,te,ye)=>{const Ie=E.value;Ie.length&&(!ye||ye==="min"?(Ie[0].setSelectionRange(j,te),Ie[0].focus()):ye==="max"&&(Ie[1].setSelectionRange(j,te),Ie[1].focus()))},A=()=>{U(!0,!0),je(()=>{_=!1})},$=(j="",te=!1)=>{te||(_=!0),f.value=te;let ye;ze(j)?ye=j.map(Ie=>Ie.toDate()):ye=j&&j.toDate(),pe.value=null,w(ye)},L=()=>{m.value=!0},O=()=>{n("visible-change",!0)},B=j=>{(j==null?void 0:j.key)===Xe.esc&&U(!0,!0)},V=()=>{m.value=!1,f.value=!1,_=!1,n("visible-change",!1)},P=()=>{f.value=!0},z=()=>{f.value=!1},U=(j=!0,te=!1)=>{_=te;const[ye,Ie]=p(E);let Ct=ye;!j&&se.value&&(Ct=Ie),Ct&&Ct.focus()},W=j=>{i.readonly||N.value||f.value||_||(f.value=!0,n("focus",j))};let R;const D=j=>{const te=async()=>{setTimeout(()=>{var ye;R===te&&(!((ye=d.value)!=null&&ye.isFocusInsideContent()&&!y)&&E.value.filter(Ie=>Ie.contains(document.activeElement)).length===0&&(Le(),f.value=!1,n("blur",j),i.validateEvent&&(c==null||c.validate("blur").catch(Ie=>void 0))),y=!1)},0)};R=te,te()},N=T(()=>i.disabled||(l==null?void 0:l.disabled)),K=T(()=>{let j;if(oe.value?it.value.getDefaultValue&&(j=it.value.getDefaultValue()):ze(i.modelValue)?j=i.modelValue.map(te=>GM(te,i.valueFormat,s.value)):j=GM(i.modelValue,i.valueFormat,s.value),it.value.getRangeAvailableTime){const te=it.value.getRangeAvailableTime(j);So(te,j)||(j=te,w(ze(j)?j.map(ye=>ye.toDate()):j.toDate()))}return ze(j)&&j.some(te=>!te)&&(j=[]),j}),ie=T(()=>{if(!it.value.panelReady)return"";const j=Pe(K.value);return ze(pe.value)?[pe.value[0]||j&&j[0]||"",pe.value[1]||j&&j[1]||""]:pe.value!==null?pe.value:!ne.value&&oe.value||!f.value&&oe.value?"":j?we.value?j.join(", "):j:""}),Y=T(()=>i.type.includes("time")),ne=T(()=>i.type.startsWith("time")),we=T(()=>i.type==="dates"),Se=T(()=>i.prefixIcon||(Y.value?kR:vK)),Te=F(!1),le=j=>{i.readonly||N.value||Te.value&&(j.stopPropagation(),A(),w(null),C(null,!0),Te.value=!1,f.value=!1,it.value.handleClear&&it.value.handleClear())},oe=T(()=>{const{modelValue:j}=i;return!j||ze(j)&&!j.filter(Boolean).length}),de=async j=>{var te;i.readonly||N.value||(((te=j.target)==null?void 0:te.tagName)!=="INPUT"||E.value.includes(document.activeElement))&&(f.value=!0)},ve=()=>{i.readonly||N.value||!oe.value&&i.clearable&&(Te.value=!0)},He=()=>{Te.value=!1},Q=j=>{var te;i.readonly||N.value||(((te=j.touches[0].target)==null?void 0:te.tagName)!=="INPUT"||E.value.includes(document.activeElement))&&(f.value=!0)},se=T(()=>i.type.includes("range")),fe=gi(),Me=T(()=>{var j,te;return(te=(j=p(d))==null?void 0:j.popperRef)==null?void 0:te.contentRef}),Oe=T(()=>{var j;return p(se)?p(h):(j=p(h))==null?void 0:j.$el});zE(Oe,j=>{const te=p(Me),ye=p(Oe);te&&(j.target===te||j.composedPath().includes(te))||j.target===ye||j.composedPath().includes(ye)||(f.value=!1)});const pe=F(null),Le=()=>{if(pe.value){const j=be(ie.value);j&&Ee(j)&&(w(ze(j)?j.map(te=>te.toDate()):j.toDate()),pe.value=null)}pe.value===""&&(w(null),C(null),pe.value=null)},be=j=>j?it.value.parseUserInput(j):null,Pe=j=>j?it.value.formatToString(j):null,Ee=j=>it.value.isValidValue(j),he=async j=>{if(i.readonly||N.value)return;const{code:te}=j;if(S(j),te===Xe.esc){f.value===!0&&(f.value=!1,j.preventDefault(),j.stopPropagation());return}if(te===Xe.down&&(it.value.handleFocusPicker&&(j.preventDefault(),j.stopPropagation()),f.value===!1&&(f.value=!0,await je()),it.value.handleFocusPicker)){it.value.handleFocusPicker();return}if(te===Xe.tab){y=!0;return}if(te===Xe.enter||te===Xe.numpadEnter){(pe.value===null||pe.value===""||Ee(be(ie.value)))&&(Le(),f.value=!1),j.stopPropagation();return}if(pe.value){j.stopPropagation();return}it.value.handleKeydownInput&&it.value.handleKeydownInput(j)},Ne=j=>{pe.value=j,f.value||(f.value=!0)},Be=j=>{const te=j.target;pe.value?pe.value=[te.value,pe.value[1]]:pe.value=[te.value,null]},Qe=j=>{const te=j.target;pe.value?pe.value=[pe.value[0],te.value]:pe.value=[null,te.value]},ut=()=>{var j;const te=pe.value,ye=be(te&&te[0]),Ie=p(K);if(ye&&ye.isValid()){pe.value=[Pe(ye),((j=ie.value)==null?void 0:j[1])||null];const Ct=[ye,Ie&&(Ie[1]||null)];Ee(Ct)&&(w(Ct),pe.value=null)}},bt=()=>{var j;const te=p(pe),ye=be(te&&te[1]),Ie=p(K);if(ye&&ye.isValid()){pe.value=[((j=p(ie))==null?void 0:j[0])||null,Pe(ye)];const Ct=[Ie&&Ie[0],ye];Ee(Ct)&&(w(Ct),pe.value=null)}},it=F({}),X=j=>{it.value[j[0]]=j[1],it.value.panelReady=!0},ue=j=>{n("calendar-change",j)},$e=(j,te,ye)=>{n("panel-change",j,te,ye)};return xt("EP_PICKER_BASE",{props:i}),e({focus:U,handleFocusInput:W,handleBlurInput:D,handleOpen:P,handleClose:z,onPick:$}),(j,te)=>(I(),ce(p(Fs),kt({ref_key:"refPopper",ref:d,visible:f.value,effect:"light",pure:"",trigger:"click"},j.$attrs,{role:"dialog",teleported:"",transition:`${p(o).namespace.value}-zoom-in-top`,"popper-class":[`${p(o).namespace.value}-picker__popper`,j.popperClass],"popper-options":p(u),"fallback-placements":["bottom","top","right","left"],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:L,onShow:O,onHide:V}),{default:ee(()=>[p(se)?(I(),H("div",{key:1,ref_key:"inputRef",ref:h,class:x([p(o).b("editor"),p(o).bm("editor",j.type),p(r).e("wrapper"),p(o).is("disabled",p(N)),p(o).is("active",f.value),p(a).b("editor"),p(fe)?p(a).bm("editor",p(fe)):"",j.$attrs.class]),style:Ke(j.$attrs.style),onClick:W,onMouseenter:ve,onMouseleave:He,onTouchstart:Q,onKeydown:he},[p(Se)?(I(),ce(p(Ge),{key:0,class:x([p(r).e("icon"),p(a).e("icon")]),onMousedown:rt(de,["prevent"]),onTouchstart:Q},{default:ee(()=>[(I(),ce(It(p(Se))))]),_:1},8,["class","onMousedown"])):re("v-if",!0),G("input",{id:j.id&&j.id[0],autocomplete:"off",name:j.name&&j.name[0],placeholder:j.startPlaceholder,value:p(ie)&&p(ie)[0],disabled:p(N),readonly:!j.editable||j.readonly,class:x(p(a).b("input")),onMousedown:de,onInput:Be,onChange:ut,onFocus:W,onBlur:D},null,42,oie),me(j.$slots,"range-separator",{},()=>[G("span",{class:x(p(a).b("separator"))},Re(j.rangeSeparator),3)]),G("input",{id:j.id&&j.id[1],autocomplete:"off",name:j.name&&j.name[1],placeholder:j.endPlaceholder,value:p(ie)&&p(ie)[1],disabled:p(N),readonly:!j.editable||j.readonly,class:x(p(a).b("input")),onMousedown:de,onFocus:W,onBlur:D,onInput:Qe,onChange:bt},null,42,rie),j.clearIcon?(I(),ce(p(Ge),{key:1,class:x([p(r).e("icon"),p(a).e("close-icon"),{[p(a).e("close-icon--hidden")]:!Te.value}]),onClick:le},{default:ee(()=>[(I(),ce(It(j.clearIcon)))]),_:1},8,["class"])):re("v-if",!0)],38)):(I(),ce(p(hs),{key:0,id:j.id,ref_key:"inputRef",ref:h,"container-role":"combobox","model-value":p(ie),name:j.name,size:p(fe),disabled:p(N),placeholder:j.placeholder,class:x([p(o).b("editor"),p(o).bm("editor",j.type),j.$attrs.class]),style:Ke(j.$attrs.style),readonly:!j.editable||j.readonly||p(we)||j.type==="week",label:j.label,tabindex:j.tabindex,"validate-event":!1,onInput:Ne,onFocus:W,onBlur:D,onKeydown:he,onChange:Le,onMousedown:de,onMouseenter:ve,onMouseleave:He,onTouchstart:Q,onClick:te[0]||(te[0]=rt(()=>{},["stop"]))},{prefix:ee(()=>[p(Se)?(I(),ce(p(Ge),{key:0,class:x(p(r).e("icon")),onMousedown:rt(de,["prevent"]),onTouchstart:Q},{default:ee(()=>[(I(),ce(It(p(Se))))]),_:1},8,["class","onMousedown"])):re("v-if",!0)]),suffix:ee(()=>[Te.value&&j.clearIcon?(I(),ce(p(Ge),{key:0,class:x(`${p(r).e("icon")} clear-icon`),onClick:rt(le,["stop"])},{default:ee(()=>[(I(),ce(It(j.clearIcon)))]),_:1},8,["class","onClick"])):re("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","label","tabindex","onKeydown"]))]),content:ee(()=>[me(j.$slots,"default",{visible:f.value,actualVisible:m.value,parsedValue:p(K),format:j.format,unlinkPanels:j.unlinkPanels,type:j.type,defaultValue:j.defaultValue,onPick:$,onSelectRange:k,onSetPickerOption:X,onCalendarChange:ue,onPanelChange:$e,onKeydown:B,onMousedown:te[1]||(te[1]=rt(()=>{},["stop"]))})]),_:3},16,["visible","transition","popper-class","popper-options"]))}});var jV=Ve(lie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/common/picker.vue"]]);const cie=De({...GV,datetimeRole:String,parsedValue:{type:ae(Object)}}),qV=({getAvailableHours:t,getAvailableMinutes:e,getAvailableSeconds:n})=>{const i=(r,a,l,c)=>{const u={hour:t,minute:e,second:n};let d=r;return["hour","minute","second"].forEach(h=>{if(u[h]){let f;const m=u[h];switch(h){case"minute":{f=m(d.hour(),a,c);break}case"second":{f=m(d.hour(),d.minute(),a,c);break}default:{f=m(a,c);break}}if(f!=null&&f.length&&!f.includes(d[h]())){const g=l?0:f.length-1;d=d[h](f[g])}}}),d},s={};return{timePickerOptions:s,getAvailableTime:i,onSetOption:([r,a])=>{s[r]=a}}},ww=t=>{const e=(i,s)=>i||s,n=i=>i!==!0;return t.map(e).filter(n)},KV=(t,e,n)=>({getHoursList:(r,a)=>_w(24,t&&(()=>t==null?void 0:t(r,a))),getMinutesList:(r,a,l)=>_w(60,e&&(()=>e==null?void 0:e(r,a,l))),getSecondsList:(r,a,l,c)=>_w(60,n&&(()=>n==null?void 0:n(r,a,l,c)))}),YV=(t,e,n)=>{const{getHoursList:i,getMinutesList:s,getSecondsList:o}=KV(t,e,n);return{getAvailableHours:(c,u)=>ww(i(c,u)),getAvailableMinutes:(c,u,d)=>ww(s(c,u,d)),getAvailableSeconds:(c,u,d,h)=>ww(o(c,u,d,h))}},ZV=t=>{const e=F(t.parsedValue);return Ce(()=>t.visible,n=>{n||(e.value=t.parsedValue)}),e},Il=new Map;let qM;Nt&&(document.addEventListener("mousedown",t=>qM=t),document.addEventListener("mouseup",t=>{for(const e of Il.values())for(const{documentHandler:n}of e)n(t,qM)}));function KM(t,e){let n=[];return Array.isArray(e.arg)?n=e.arg:gr(e.arg)&&n.push(e.arg),function(i,s){const o=e.instance.popperRef,r=i.target,a=s==null?void 0:s.target,l=!e||!e.instance,c=!r||!a,u=t.contains(r)||t.contains(a),d=t===r,h=n.length&&n.some(m=>m==null?void 0:m.contains(r))||n.length&&n.includes(a),f=o&&(o.contains(r)||o.contains(a));l||c||u||d||h||f||e.value(i,s)}}const Tc={beforeMount(t,e){Il.has(t)||Il.set(t,[]),Il.get(t).push({documentHandler:KM(t,e),bindingFn:e.value})},updated(t,e){Il.has(t)||Il.set(t,[]);const n=Il.get(t),i=n.findIndex(o=>o.bindingFn===e.oldValue),s={documentHandler:KM(t,e),bindingFn:e.value};i>=0?n.splice(i,1,s):n.push(s)},unmounted(t){Il.delete(t)}},uie=100,die=600,Ky={beforeMount(t,e){const n=e.value,{interval:i=uie,delay:s=die}=ot(n)?{}:n;let o,r;const a=()=>ot(n)?n():n.handler(),l=()=>{r&&(clearTimeout(r),r=void 0),o&&(clearInterval(o),o=void 0)};t.addEventListener("mousedown",c=>{c.button===0&&(l(),a(),document.addEventListener("mouseup",()=>l(),{once:!0}),r=setTimeout(()=>{o=setInterval(()=>{a()},i)},s))})}},k1="_trap-focus-children",Iu=[],YM=t=>{if(Iu.length===0)return;const e=Iu[Iu.length-1][k1];if(e.length>0&&t.code===Xe.tab){if(e.length===1){t.preventDefault(),document.activeElement!==e[0]&&e[0].focus();return}const n=t.shiftKey,i=t.target===e[0],s=t.target===e[e.length-1];i&&n&&(t.preventDefault(),e[e.length-1].focus()),s&&!n&&(t.preventDefault(),e[0].focus())}},pie={beforeMount(t){t[k1]=jx(t),Iu.push(t),Iu.length<=1&&document.addEventListener("keydown",YM)},updated(t){je(()=>{t[k1]=jx(t)})},unmounted(){Iu.shift(),Iu.length===0&&document.removeEventListener("keydown",YM)}};var ZM=!1,mu,T1,I1,Vv,Fv,XV,Dv,x1,M1,$1,QV,A1,L1,JV,eF;function Bs(){if(!ZM){ZM=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),n=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(A1=/\b(iPhone|iP[ao]d)/.exec(t),L1=/\b(iP[ao]d)/.exec(t),$1=/Android/i.exec(t),JV=/FBAN\/\w+;/i.exec(t),eF=/Mobile/i.exec(t),QV=!!/Win64/.exec(t),e){mu=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,mu&&document&&document.documentMode&&(mu=document.documentMode);var i=/(?:Trident\/(\d+.\d+))/.exec(t);XV=i?parseFloat(i[1])+4:mu,T1=e[2]?parseFloat(e[2]):NaN,I1=e[3]?parseFloat(e[3]):NaN,Vv=e[4]?parseFloat(e[4]):NaN,Vv?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),Fv=e&&e[1]?parseFloat(e[1]):NaN):Fv=NaN}else mu=T1=I1=Fv=Vv=NaN;if(n){if(n[1]){var s=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);Dv=s?parseFloat(s[1].replace("_",".")):!0}else Dv=!1;x1=!!n[2],M1=!!n[3]}else Dv=x1=M1=!1}}var O1={ie:function(){return Bs()||mu},ieCompatibilityMode:function(){return Bs()||XV>mu},ie64:function(){return O1.ie()&&QV},firefox:function(){return Bs()||T1},opera:function(){return Bs()||I1},webkit:function(){return Bs()||Vv},safari:function(){return O1.webkit()},chrome:function(){return Bs()||Fv},windows:function(){return Bs()||x1},osx:function(){return Bs()||Dv},linux:function(){return Bs()||M1},iphone:function(){return Bs()||A1},mobile:function(){return Bs()||A1||L1||$1||eF},nativeApp:function(){return Bs()||JV},android:function(){return Bs()||$1},ipad:function(){return Bs()||L1}},hie=O1,Wg=!!(typeof window<"u"&&window.document&&window.document.createElement),fie={canUseDOM:Wg,canUseWorkers:typeof Worker<"u",canUseEventListeners:Wg&&!!(window.addEventListener||window.attachEvent),canUseViewport:Wg&&!!window.screen,isInWorker:!Wg},tF=fie,nF;tF.canUseDOM&&(nF=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function mie(t,e){if(!tF.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,i=n in document;if(!i){var s=document.createElement("div");s.setAttribute(n,"return;"),i=typeof s[n]=="function"}return!i&&nF&&t==="wheel"&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var gie=mie,XM=10,QM=40,JM=800;function iF(t){var e=0,n=0,i=0,s=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),i=e*XM,s=n*XM,"deltaY"in t&&(s=t.deltaY),"deltaX"in t&&(i=t.deltaX),(i||s)&&t.deltaMode&&(t.deltaMode==1?(i*=QM,s*=QM):(i*=JM,s*=JM)),i&&!e&&(e=i<1?-1:1),s&&!n&&(n=s<1?-1:1),{spinX:e,spinY:n,pixelX:i,pixelY:s}}iF.getEventType=function(){return hie.firefox()?"DOMMouseScroll":gie("wheel")?"wheel":"mousewheel"};var vie=iF;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const yie=function(t,e){if(t&&t.addEventListener){const n=function(i){const s=vie(i);e&&Reflect.apply(e,this,[i,s])};t.addEventListener("wheel",n,{passive:!0})}},bie={beforeMount(t,e){yie(t,e.value)}},_ie=De({role:{type:String,required:!0},spinnerDate:{type:ae(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:ae(String),default:""},...WV}),wie=["onClick"],Cie=["onMouseenter"],Sie=J({__name:"basic-time-spinner",props:_ie,emits:["change","select-range","set-option"],setup(t,{emit:e}){const n=t,i=_e("time"),{getHoursList:s,getMinutesList:o,getSecondsList:r}=KV(n.disabledHours,n.disabledMinutes,n.disabledSeconds);let a=!1;const l=F(),c=F(),u=F(),d=F(),h={hours:c,minutes:u,seconds:d},f=T(()=>n.showSeconds?HM:HM.slice(0,2)),m=T(()=>{const{spinnerDate:N}=n,K=N.hour(),ie=N.minute(),Y=N.second();return{hours:K,minutes:ie,seconds:Y}}),g=T(()=>{const{hours:N,minutes:K}=p(m);return{hours:s(n.role),minutes:o(N,n.role),seconds:r(N,K,n.role)}}),y=T(()=>{const{hours:N,minutes:K,seconds:ie}=p(m);return{hours:bw(N,23),minutes:bw(K,59),seconds:bw(ie,59)}}),_=Rs(N=>{a=!1,S(N)},200),C=N=>{if(!!!n.amPmMode)return"";const ie=n.amPmMode==="A";let Y=N<12?" am":" pm";return ie&&(Y=Y.toUpperCase()),Y},w=N=>{let K;switch(N){case"hours":K=[0,2];break;case"minutes":K=[3,5];break;case"seconds":K=[6,8];break}const[ie,Y]=K;e("select-range",ie,Y),l.value=N},S=N=>{A(N,p(m)[N])},E=()=>{S("hours"),S("minutes"),S("seconds")},k=N=>N.querySelector(`.${i.namespace.value}-scrollbar__wrap`),A=(N,K)=>{if(n.arrowControl)return;const ie=p(h[N]);ie&&ie.$el&&(k(ie.$el).scrollTop=Math.max(0,K*$(N)))},$=N=>{const K=p(h[N]);return(K==null?void 0:K.$el.querySelector("li").offsetHeight)||0},L=()=>{B(1)},O=()=>{B(-1)},B=N=>{l.value||w("hours");const K=l.value,ie=p(m)[K],Y=l.value==="hours"?24:60,ne=V(K,ie,N,Y);P(K,ne),A(K,ne),je(()=>w(K))},V=(N,K,ie,Y)=>{let ne=(K+ie+Y)%Y;const we=p(g)[N];for(;we[ne]&&ne!==K;)ne=(ne+ie+Y)%Y;return ne},P=(N,K)=>{if(p(g)[N][K])return;const{hours:ne,minutes:we,seconds:Se}=p(m);let Te;switch(N){case"hours":Te=n.spinnerDate.hour(K).minute(we).second(Se);break;case"minutes":Te=n.spinnerDate.hour(ne).minute(K).second(Se);break;case"seconds":Te=n.spinnerDate.hour(ne).minute(we).second(K);break}e("change",Te)},z=(N,{value:K,disabled:ie})=>{ie||(P(N,K),w(N),A(N,K))},U=N=>{a=!0,_(N);const K=Math.min(Math.round((k(p(h[N]).$el).scrollTop-(W(N)*.5-10)/$(N)+3)/$(N)),N==="hours"?23:59);P(N,K)},W=N=>p(h[N]).$el.offsetHeight,R=()=>{const N=K=>{const ie=p(h[K]);ie&&ie.$el&&(k(ie.$el).onscroll=()=>{U(K)})};N("hours"),N("minutes"),N("seconds")};ft(()=>{je(()=>{!n.arrowControl&&R(),E(),n.role==="start"&&w("hours")})});const D=(N,K)=>{h[K].value=N};return e("set-option",[`${n.role}_scrollDown`,B]),e("set-option",[`${n.role}_emitSelectRange`,w]),Ce(()=>n.spinnerDate,()=>{a||E()}),(N,K)=>(I(),H("div",{class:x([p(i).b("spinner"),{"has-seconds":N.showSeconds}])},[N.arrowControl?re("v-if",!0):(I(!0),H(Ye,{key:0},Ot(p(f),ie=>(I(),ce(p(fl),{key:ie,ref_for:!0,ref:Y=>D(Y,ie),class:x(p(i).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":p(i).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:Y=>w(ie),onMousemove:Y=>S(ie)},{default:ee(()=>[(I(!0),H(Ye,null,Ot(p(g)[ie],(Y,ne)=>(I(),H("li",{key:ne,class:x([p(i).be("spinner","item"),p(i).is("active",ne===p(m)[ie]),p(i).is("disabled",Y)]),onClick:we=>z(ie,{value:ne,disabled:Y})},[ie==="hours"?(I(),H(Ye,{key:0},[Ut(Re(("0"+(N.amPmMode?ne%12||12:ne)).slice(-2))+Re(C(ne)),1)],64)):(I(),H(Ye,{key:1},[Ut(Re(("0"+ne).slice(-2)),1)],64))],10,wie))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),N.arrowControl?(I(!0),H(Ye,{key:1},Ot(p(f),ie=>(I(),H("div",{key:ie,class:x([p(i).be("spinner","wrapper"),p(i).is("arrow")]),onMouseenter:Y=>w(ie)},[ct((I(),ce(p(Ge),{class:x(["arrow-up",p(i).be("spinner","arrow")])},{default:ee(()=>[Z(p(r_))]),_:1},8,["class"])),[[p(Ky),O]]),ct((I(),ce(p(Ge),{class:x(["arrow-down",p(i).be("spinner","arrow")])},{default:ee(()=>[Z(p($c))]),_:1},8,["class"])),[[p(Ky),L]]),G("ul",{class:x(p(i).be("spinner","list"))},[(I(!0),H(Ye,null,Ot(p(y)[ie],(Y,ne)=>(I(),H("li",{key:ne,class:x([p(i).be("spinner","item"),p(i).is("active",Y===p(m)[ie]),p(i).is("disabled",p(g)[ie][Y])])},[typeof Y=="number"?(I(),H(Ye,{key:0},[ie==="hours"?(I(),H(Ye,{key:0},[Ut(Re(("0"+(N.amPmMode?Y%12||12:Y)).slice(-2))+Re(C(Y)),1)],64)):(I(),H(Ye,{key:1},[Ut(Re(("0"+Y).slice(-2)),1)],64))],64)):re("v-if",!0)],2))),128))],2)],42,Cie))),128)):re("v-if",!0)],2))}});var P1=Ve(Sie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/basic-time-spinner.vue"]]);const Eie=J({__name:"panel-time-pick",props:cie,emits:["pick","select-range","set-picker-option"],setup(t,{emit:e}){const n=t,i=qe("EP_PICKER_BASE"),{arrowControl:s,disabledHours:o,disabledMinutes:r,disabledSeconds:a,defaultValue:l}=i.props,{getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}=YV(o,r,a),h=_e("time"),{t:f,lang:m}=Gt(),g=F([0,2]),y=ZV(n),_=T(()=>Ui(n.actualVisible)?`${h.namespace.value}-zoom-in-top`:""),C=T(()=>n.format.includes("ss")),w=T(()=>n.format.includes("A")?"A":n.format.includes("a")?"a":""),S=D=>{const N=mt(D).locale(m.value),K=z(N);return N.isSame(K)},E=()=>{e("pick",y.value,!1)},k=(D=!1,N=!1)=>{N||e("pick",n.parsedValue,D)},A=D=>{if(!n.visible)return;const N=z(D).millisecond(0);e("pick",N,!0)},$=(D,N)=>{e("select-range",D,N),g.value=[D,N]},L=D=>{const N=[0,3].concat(C.value?[6]:[]),K=["hours","minutes"].concat(C.value?["seconds"]:[]),Y=(N.indexOf(g.value[0])+D+N.length)%N.length;B.start_emitSelectRange(K[Y])},O=D=>{const N=D.code,{left:K,right:ie,up:Y,down:ne}=Xe;if([K,ie].includes(N)){L(N===K?-1:1),D.preventDefault();return}if([Y,ne].includes(N)){const we=N===Y?-1:1;B.start_scrollDown(we),D.preventDefault();return}},{timePickerOptions:B,onSetOption:V,getAvailableTime:P}=qV({getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}),z=D=>P(D,n.datetimeRole||"",!0),U=D=>D?mt(D,n.format).locale(m.value):null,W=D=>D?D.format(n.format):null,R=()=>mt(l).locale(m.value);return e("set-picker-option",["isValidValue",S]),e("set-picker-option",["formatToString",W]),e("set-picker-option",["parseUserInput",U]),e("set-picker-option",["handleKeydownInput",O]),e("set-picker-option",["getRangeAvailableTime",z]),e("set-picker-option",["getDefaultValue",R]),(D,N)=>(I(),ce(oi,{name:p(_)},{default:ee(()=>[D.actualVisible||D.visible?(I(),H("div",{key:0,class:x(p(h).b("panel"))},[G("div",{class:x([p(h).be("panel","content"),{"has-seconds":p(C)}])},[Z(P1,{ref:"spinner",role:D.datetimeRole||"start","arrow-control":p(s),"show-seconds":p(C),"am-pm-mode":p(w),"spinner-date":D.parsedValue,"disabled-hours":p(o),"disabled-minutes":p(r),"disabled-seconds":p(a),onChange:A,onSetOption:p(V),onSelectRange:$},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),G("div",{class:x(p(h).be("panel","footer"))},[G("button",{type:"button",class:x([p(h).be("panel","btn"),"cancel"]),onClick:E},Re(p(f)("el.datepicker.cancel")),3),G("button",{type:"button",class:x([p(h).be("panel","btn"),"confirm"]),onClick:N[0]||(N[0]=K=>k())},Re(p(f)("el.datepicker.confirm")),3)],2)],2)):re("v-if",!0)]),_:1},8,["name"]))}});var Yy=Ve(Eie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-pick.vue"]]);const kie=De({...GV,parsedValue:{type:ae(Array)}}),Tie=["disabled"],Iie=J({__name:"panel-time-range",props:kie,emits:["pick","select-range","set-picker-option"],setup(t,{emit:e}){const n=t,i=(de,ve)=>{const He=[];for(let Q=de;Q<=ve;Q++)He.push(Q);return He},{t:s,lang:o}=Gt(),r=_e("time"),a=_e("picker"),l=qe("EP_PICKER_BASE"),{arrowControl:c,disabledHours:u,disabledMinutes:d,disabledSeconds:h,defaultValue:f}=l.props,m=T(()=>n.parsedValue[0]),g=T(()=>n.parsedValue[1]),y=ZV(n),_=()=>{e("pick",y.value,!1)},C=T(()=>n.format.includes("ss")),w=T(()=>n.format.includes("A")?"A":n.format.includes("a")?"a":""),S=(de=!1)=>{e("pick",[m.value,g.value],de)},E=de=>{$(de.millisecond(0),g.value)},k=de=>{$(m.value,de.millisecond(0))},A=de=>{const ve=de.map(Q=>mt(Q).locale(o.value)),He=N(ve);return ve[0].isSame(He[0])&&ve[1].isSame(He[1])},$=(de,ve)=>{e("pick",[de,ve],!0)},L=T(()=>m.value>g.value),O=F([0,2]),B=(de,ve)=>{e("select-range",de,ve,"min"),O.value=[de,ve]},V=T(()=>C.value?11:8),P=(de,ve)=>{e("select-range",de,ve,"max");const He=p(V);O.value=[de+He,ve+He]},z=de=>{const ve=C.value?[0,3,6,11,14,17]:[0,3,8,11],He=["hours","minutes"].concat(C.value?["seconds"]:[]),se=(ve.indexOf(O.value[0])+de+ve.length)%ve.length,fe=ve.length/2;se<fe?ne.start_emitSelectRange(He[se]):ne.end_emitSelectRange(He[se-fe])},U=de=>{const ve=de.code,{left:He,right:Q,up:se,down:fe}=Xe;if([He,Q].includes(ve)){z(ve===He?-1:1),de.preventDefault();return}if([se,fe].includes(ve)){const Me=ve===se?-1:1,Oe=O.value[0]<V.value?"start":"end";ne[`${Oe}_scrollDown`](Me),de.preventDefault();return}},W=(de,ve)=>{const He=u?u(de):[],Q=de==="start",fe=(ve||(Q?g.value:m.value)).hour(),Me=Q?i(fe+1,23):i(0,fe-1);return uw(He,Me)},R=(de,ve,He)=>{const Q=d?d(de,ve):[],se=ve==="start",fe=He||(se?g.value:m.value),Me=fe.hour();if(de!==Me)return Q;const Oe=fe.minute(),pe=se?i(Oe+1,59):i(0,Oe-1);return uw(Q,pe)},D=(de,ve,He,Q)=>{const se=h?h(de,ve,He):[],fe=He==="start",Me=Q||(fe?g.value:m.value),Oe=Me.hour(),pe=Me.minute();if(de!==Oe||ve!==pe)return se;const Le=Me.second(),be=fe?i(Le+1,59):i(0,Le-1);return uw(se,be)},N=([de,ve])=>[we(de,"start",!0,ve),we(ve,"end",!1,de)],{getAvailableHours:K,getAvailableMinutes:ie,getAvailableSeconds:Y}=YV(W,R,D),{timePickerOptions:ne,getAvailableTime:we,onSetOption:Se}=qV({getAvailableHours:K,getAvailableMinutes:ie,getAvailableSeconds:Y}),Te=de=>de?ze(de)?de.map(ve=>mt(ve,n.format).locale(o.value)):mt(de,n.format).locale(o.value):null,le=de=>de?ze(de)?de.map(ve=>ve.format(n.format)):de.format(n.format):null,oe=()=>{if(ze(f))return f.map(ve=>mt(ve).locale(o.value));const de=mt(f).locale(o.value);return[de,de.add(60,"m")]};return e("set-picker-option",["formatToString",le]),e("set-picker-option",["parseUserInput",Te]),e("set-picker-option",["isValidValue",A]),e("set-picker-option",["handleKeydownInput",U]),e("set-picker-option",["getDefaultValue",oe]),e("set-picker-option",["getRangeAvailableTime",N]),(de,ve)=>de.actualVisible?(I(),H("div",{key:0,class:x([p(r).b("range-picker"),p(a).b("panel")])},[G("div",{class:x(p(r).be("range-picker","content"))},[G("div",{class:x(p(r).be("range-picker","cell"))},[G("div",{class:x(p(r).be("range-picker","header"))},Re(p(s)("el.datepicker.startTime")),3),G("div",{class:x([p(r).be("range-picker","body"),p(r).be("panel","content"),p(r).is("arrow",p(c)),{"has-seconds":p(C)}])},[Z(P1,{ref:"minSpinner",role:"start","show-seconds":p(C),"am-pm-mode":p(w),"arrow-control":p(c),"spinner-date":p(m),"disabled-hours":W,"disabled-minutes":R,"disabled-seconds":D,onChange:E,onSetOption:p(Se),onSelectRange:B},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),G("div",{class:x(p(r).be("range-picker","cell"))},[G("div",{class:x(p(r).be("range-picker","header"))},Re(p(s)("el.datepicker.endTime")),3),G("div",{class:x([p(r).be("range-picker","body"),p(r).be("panel","content"),p(r).is("arrow",p(c)),{"has-seconds":p(C)}])},[Z(P1,{ref:"maxSpinner",role:"end","show-seconds":p(C),"am-pm-mode":p(w),"arrow-control":p(c),"spinner-date":p(g),"disabled-hours":W,"disabled-minutes":R,"disabled-seconds":D,onChange:k,onSetOption:p(Se),onSelectRange:P},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),G("div",{class:x(p(r).be("panel","footer"))},[G("button",{type:"button",class:x([p(r).be("panel","btn"),"cancel"]),onClick:ve[0]||(ve[0]=He=>_())},Re(p(s)("el.datepicker.cancel")),3),G("button",{type:"button",class:x([p(r).be("panel","btn"),"confirm"]),disabled:p(L),onClick:ve[1]||(ve[1]=He=>S())},Re(p(s)("el.datepicker.confirm")),11,Tie)],2)],2)):re("v-if",!0)}});var xie=Ve(Iie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);mt.extend(mk);var Mie=J({name:"ElTimePicker",install:null,props:{...gk,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,e){const n=F(),[i,s]=t.isRange?["timerange",xie]:["time",Yy],o=r=>e.emit("update:modelValue",r);return xt("ElPopperOptions",t.popperOptions),e.expose({focus:r=>{var a;(a=n.value)==null||a.handleFocusInput(r)},blur:r=>{var a;(a=n.value)==null||a.handleBlurInput(r)},handleOpen:()=>{var r;(r=n.value)==null||r.handleOpen()},handleClose:()=>{var r;(r=n.value)==null||r.handleClose()}}),()=>{var r;const a=(r=t.format)!=null?r:E1;return Z(jV,kt(t,{ref:n,type:i,format:a,"onUpdate:modelValue":o}),{default:l=>Z(s,l,null)})}}});const Nv=Mie;Nv.install=t=>{t.component(Nv.name,Nv)};const $ie=Nv,Aie=(t,e)=>{const n=t.subtract(1,"month").endOf("month").date();return hc(e).map((i,s)=>n-(e-s-1))},Lie=t=>{const e=t.daysInMonth();return hc(e).map((n,i)=>i+1)},Oie=t=>hc(t.length/7).map(e=>{const n=e*7;return t.slice(n,n+7)}),Pie=De({selectedDay:{type:ae(Object)},range:{type:ae(Array)},date:{type:ae(Object),required:!0},hideHeader:{type:Boolean}}),Rie={pick:t=>Et(t)};var R1={},Vie={get exports(){return R1},set exports(t){R1=t}};(function(t,e){(function(n,i){t.exports=i()})(ml,function(){return function(n,i,s){var o=i.prototype,r=function(d){return d&&(d.indexOf?d:d.s)},a=function(d,h,f,m,g){var y=d.name?d:d.$locale(),_=r(y[h]),C=r(y[f]),w=_||C.map(function(E){return E.slice(0,m)});if(!g)return w;var S=y.weekStart;return w.map(function(E,k){return w[(k+(S||0))%7]})},l=function(){return s.Ls[s.locale()]},c=function(d,h){return d.formats[h]||function(f){return f.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(m,g,y){return g||y.slice(1)})}(d.formats[h.toUpperCase()])},u=function(){var d=this;return{months:function(h){return h?h.format("MMMM"):a(d,"months")},monthsShort:function(h){return h?h.format("MMM"):a(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(h){return h?h.format("dddd"):a(d,"weekdays")},weekdaysMin:function(h){return h?h.format("dd"):a(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(h){return h?h.format("ddd"):a(d,"weekdaysShort","weekdays",3)},longDateFormat:function(h){return c(d.$locale(),h)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};o.localeData=function(){return u.bind(this)()},s.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return s.weekdays()},weekdaysShort:function(){return s.weekdaysShort()},weekdaysMin:function(){return s.weekdaysMin()},months:function(){return s.months()},monthsShort:function(){return s.monthsShort()},longDateFormat:function(h){return c(d,h)},meridiem:d.meridiem,ordinal:d.ordinal}},s.months=function(){return a(l(),"months")},s.monthsShort=function(){return a(l(),"monthsShort","months",3)},s.weekdays=function(d){return a(l(),"weekdays",null,null,d)},s.weekdaysShort=function(d){return a(l(),"weekdaysShort","weekdays",3,d)},s.weekdaysMin=function(d){return a(l(),"weekdaysMin","weekdays",2,d)}}})})(Vie);const sF=R1,Fie=(t,e)=>{mt.extend(sF);const n=mt.localeData().firstDayOfWeek(),{t:i,lang:s}=Gt(),o=mt().locale(s.value),r=T(()=>!!t.range&&!!t.range.length),a=T(()=>{let h=[];if(r.value){const[f,m]=t.range,g=hc(m.date()-f.date()+1).map(C=>({text:f.date()+C,type:"current"}));let y=g.length%7;y=y===0?0:7-y;const _=hc(y).map((C,w)=>({text:w+1,type:"next"}));h=g.concat(_)}else{const f=t.date.startOf("month").day(),m=Aie(t.date,(f-n+7)%7).map(C=>({text:C,type:"prev"})),g=Lie(t.date).map(C=>({text:C,type:"current"}));h=[...m,...g];const y=7-(h.length%7||7),_=hc(y).map((C,w)=>({text:w+1,type:"next"}));h=h.concat(_)}return Oie(h)}),l=T(()=>{const h=n;return h===0?dw.map(f=>i(`el.datepicker.weeks.${f}`)):dw.slice(h).concat(dw.slice(0,h)).map(f=>i(`el.datepicker.weeks.${f}`))}),c=(h,f)=>{switch(f){case"prev":return t.date.startOf("month").subtract(1,"month").date(h);case"next":return t.date.startOf("month").add(1,"month").date(h);case"current":return t.date.date(h)}};return{now:o,isInRange:r,rows:a,weekDays:l,getFormattedDate:c,handlePickDay:({text:h,type:f})=>{const m=c(h,f);e("pick",m)},getSlotData:({text:h,type:f})=>{const m=c(h,f);return{isSelected:m.isSame(t.selectedDay),type:`${f}-month`,day:m.format("YYYY-MM-DD"),date:m.toDate()}}}},Die={key:0},Nie=["onClick"],Bie=J({name:"DateTable"}),zie=J({...Bie,props:Pie,emits:Rie,setup(t,{expose:e,emit:n}){const i=t,{isInRange:s,now:o,rows:r,weekDays:a,getFormattedDate:l,handlePickDay:c,getSlotData:u}=Fie(i,n),d=_e("calendar-table"),h=_e("calendar-day"),f=({text:m,type:g})=>{const y=[g];if(g==="current"){const _=l(m,g);_.isSame(i.selectedDay,"day")&&y.push(h.is("selected")),_.isSame(o,"day")&&y.push(h.is("today"))}return y};return e({getFormattedDate:l}),(m,g)=>(I(),H("table",{class:x([p(d).b(),p(d).is("range",p(s))]),cellspacing:"0",cellpadding:"0"},[m.hideHeader?re("v-if",!0):(I(),H("thead",Die,[(I(!0),H(Ye,null,Ot(p(a),y=>(I(),H("th",{key:y},Re(y),1))),128))])),G("tbody",null,[(I(!0),H(Ye,null,Ot(p(r),(y,_)=>(I(),H("tr",{key:_,class:x({[p(d).e("row")]:!0,[p(d).em("row","hide-border")]:_===0&&m.hideHeader})},[(I(!0),H(Ye,null,Ot(y,(C,w)=>(I(),H("td",{key:w,class:x(f(C)),onClick:S=>p(c)(C)},[G("div",{class:x(p(h).b())},[me(m.$slots,"date-cell",{data:p(u)(C)},()=>[G("span",null,Re(C.text),1)])],2)],10,Nie))),128))],2))),128))])],2))}});var e$=Ve(zie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/date-table.vue"]]);const Hie=(t,e)=>{const n=t.endOf("month"),i=e.startOf("month"),o=n.isSame(i,"week")?i.add(1,"week"):i;return[[t,n],[o.startOf("week"),e]]},Uie=(t,e)=>{const n=t.endOf("month"),i=t.add(1,"month").startOf("month"),s=n.isSame(i,"week")?i.add(1,"week"):i,o=s.endOf("month"),r=e.startOf("month"),a=o.isSame(r,"week")?r.add(1,"week"):r;return[[t,n],[s.startOf("week"),o],[a.startOf("week"),e]]},Wie=(t,e,n)=>{const i=Ki(),{lang:s}=Gt(),o=F(),r=mt().locale(s.value),a=T({get(){return t.modelValue?c.value:o.value},set(_){if(!_)return;o.value=_;const C=_.toDate();e(As,C),e(wt,C)}}),l=T(()=>{if(!t.range)return[];const _=t.range.map(S=>mt(S).locale(s.value)),[C,w]=_;return C.isAfter(w)?[]:C.isSame(w,"month")?m(C,w):C.add(1,"month").month()!==w.month()?[]:m(C,w)}),c=T(()=>t.modelValue?mt(t.modelValue).locale(s.value):a.value||(l.value.length?l.value[0][0]:r)),u=T(()=>c.value.subtract(1,"month").date(1)),d=T(()=>c.value.add(1,"month").date(1)),h=T(()=>c.value.subtract(1,"year").date(1)),f=T(()=>c.value.add(1,"year").date(1)),m=(_,C)=>{const w=_.startOf("week"),S=C.endOf("week"),E=w.get("month"),k=S.get("month");return E===k?[[w,S]]:(E+1)%12===k?Hie(w,S):E+2===k||(E+1)%11===k?Uie(w,S):[]},g=_=>{a.value=_},y=_=>{const w={"prev-month":u.value,"next-month":d.value,"prev-year":h.value,"next-year":f.value,today:r}[_];w.isSame(c.value,"day")||g(w)};return Xa({from:'"dateCell"',replacement:'"date-cell"',scope:"ElCalendar",version:"2.3.0",ref:"https://element-plus.org/en-US/component/calendar.html#slots",type:"Slot"},T(()=>!!i.dateCell)),{calculateValidatedDateRange:m,date:c,realSelectedDay:a,pickDay:g,selectDate:y,validatedRange:l}},Gie=t=>ze(t)&&t.length===2&&t.every(e=>ju(e)),jie=De({modelValue:{type:Date},range:{type:ae(Array),validator:Gie}}),qie={[wt]:t=>ju(t),[As]:t=>ju(t)},Kie="ElCalendar",Yie=J({name:Kie}),Zie=J({...Yie,props:jie,emits:qie,setup(t,{expose:e,emit:n}){const i=t,s=_e("calendar"),{calculateValidatedDateRange:o,date:r,pickDay:a,realSelectedDay:l,selectDate:c,validatedRange:u}=Wie(i,n),{t:d}=Gt(),h=T(()=>{const f=`el.datepicker.month${r.value.format("M")}`;return`${r.value.year()} ${d("el.datepicker.year")} ${d(f)}`});return e({selectedDay:l,pickDay:a,selectDate:c,calculateValidatedDateRange:o}),(f,m)=>(I(),H("div",{class:x(p(s).b())},[G("div",{class:x(p(s).e("header"))},[me(f.$slots,"header",{date:p(h)},()=>[G("div",{class:x(p(s).e("title"))},Re(p(h)),3),p(u).length===0?(I(),H("div",{key:0,class:x(p(s).e("button-group"))},[Z(p(zV),null,{default:ee(()=>[Z(p(os),{size:"small",onClick:m[0]||(m[0]=g=>p(c)("prev-month"))},{default:ee(()=>[Ut(Re(p(d)("el.datepicker.prevMonth")),1)]),_:1}),Z(p(os),{size:"small",onClick:m[1]||(m[1]=g=>p(c)("today"))},{default:ee(()=>[Ut(Re(p(d)("el.datepicker.today")),1)]),_:1}),Z(p(os),{size:"small",onClick:m[2]||(m[2]=g=>p(c)("next-month"))},{default:ee(()=>[Ut(Re(p(d)("el.datepicker.nextMonth")),1)]),_:1})]),_:1})],2)):re("v-if",!0)])],2),p(u).length===0?(I(),H("div",{key:0,class:x(p(s).e("body"))},[Z(e$,{date:p(r),"selected-day":p(l),onPick:p(a)},Ya({_:2},[f.$slots["date-cell"]||f.$slots.dateCell?{name:"date-cell",fn:ee(g=>[f.$slots["date-cell"]?me(f.$slots,"date-cell",or(kt({key:0},g))):me(f.$slots,"dateCell",or(kt({key:1},g)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(I(),H("div",{key:1,class:x(p(s).e("body"))},[(I(!0),H(Ye,null,Ot(p(u),(g,y)=>(I(),ce(e$,{key:y,date:g[0],"selected-day":p(l),range:g,"hide-header":y!==0,onPick:p(a)},Ya({_:2},[f.$slots["date-cell"]||f.$slots.dateCell?{name:"date-cell",fn:ee(_=>[f.$slots["date-cell"]?me(f.$slots,"date-cell",or(kt({key:0},_))):me(f.$slots,"dateCell",or(kt({key:1},_)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var Xie=Ve(Zie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/calendar.vue"]]);const Qie=yt(Xie),Jie=De({header:{type:String,default:""},bodyStyle:{type:ae([String,Object,Array]),default:""},shadow:{type:String,values:["always","hover","never"],default:"always"}}),ese=J({name:"ElCard"}),tse=J({...ese,props:Jie,setup(t){const e=_e("card");return(n,i)=>(I(),H("div",{class:x([p(e).b(),p(e).is(`${n.shadow}-shadow`)])},[n.$slots.header||n.header?(I(),H("div",{key:0,class:x(p(e).e("header"))},[me(n.$slots,"header",{},()=>[Ut(Re(n.header),1)])],2)):re("v-if",!0),G("div",{class:x(p(e).e("body")),style:Ke(n.bodyStyle)},[me(n.$slots,"default")],6)],2))}});var nse=Ve(tse,[["__file","/home/runner/work/element-plus/element-plus/packages/components/card/src/card.vue"]]);const ise=yt(nse),sse=De({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},indicator:{type:Boolean,default:!0},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),ose={change:(t,e)=>[t,e].every(st)},t$=300,rse=(t,e,n)=>{const{children:i,addChild:s,removeChild:o}=SV(vt(),"ElCarouselItem"),r=F(-1),a=F(null),l=F(!1),c=F(),u=T(()=>t.arrow!=="never"&&!p(f)),d=T(()=>i.value.some(W=>W.props.label.toString().length>0)),h=T(()=>t.type==="card"),f=T(()=>t.direction==="vertical"),m=Nu(W=>{w(W)},t$,{trailing:!0}),g=Nu(W=>{B(W)},t$);function y(){a.value&&(clearInterval(a.value),a.value=null)}function _(){t.interval<=0||!t.autoplay||a.value||(a.value=setInterval(()=>C(),t.interval))}const C=()=>{r.value<i.value.length-1?r.value=r.value+1:t.loop&&(r.value=0)};function w(W){if(at(W)){const N=i.value.filter(K=>K.props.name===W);N.length>0&&(W=i.value.indexOf(N[0]))}if(W=Number(W),Number.isNaN(W)||W!==Math.floor(W))return;const R=i.value.length,D=r.value;W<0?r.value=t.loop?R-1:0:W>=R?r.value=t.loop?0:R-1:r.value=W,D===r.value&&S(D),z()}function S(W){i.value.forEach((R,D)=>{R.translateItem(D,r.value,W)})}function E(W,R){var D,N,K,ie;const Y=p(i),ne=Y.length;if(ne===0||!W.states.inStage)return!1;const we=R+1,Se=R-1,Te=ne-1,le=Y[Te].states.active,oe=Y[0].states.active,de=(N=(D=Y[we])==null?void 0:D.states)==null?void 0:N.active,ve=(ie=(K=Y[Se])==null?void 0:K.states)==null?void 0:ie.active;return R===Te&&oe||de?"left":R===0&&le||ve?"right":!1}function k(){l.value=!0,t.pauseOnHover&&y()}function A(){l.value=!1,_()}function $(W){p(f)||i.value.forEach((R,D)=>{W===E(R,D)&&(R.states.hover=!0)})}function L(){p(f)||i.value.forEach(W=>{W.states.hover=!1})}function O(W){r.value=W}function B(W){t.trigger==="hover"&&W!==r.value&&(r.value=W)}function V(){w(r.value-1)}function P(){w(r.value+1)}function z(){y(),_()}Ce(()=>r.value,(W,R)=>{S(R),R>-1&&e("change",W,R)}),Ce(()=>t.autoplay,W=>{W?_():y()}),Ce(()=>t.loop,()=>{w(r.value)}),Ce(()=>t.interval,()=>{z()}),Ce(()=>i.value,()=>{i.value.length>0&&w(t.initialIndex)});const U=yn();return ft(()=>{U.value=ms(c.value,()=>{S()}),_()}),Pn(()=>{y(),c.value&&U.value&&U.value.stop()}),xt(RR,{root:c,isCardType:h,isVertical:f,items:i,loop:t.loop,addItem:s,removeItem:o,setActiveItem:w}),{root:c,activeIndex:r,arrowDisplay:u,hasLabel:d,hover:l,isCardType:h,items:i,handleButtonEnter:$,handleButtonLeave:L,handleIndicatorClick:O,handleMouseEnter:k,handleMouseLeave:A,setActiveItem:w,prev:V,next:P,throttledArrowClick:m,throttledIndicatorHover:g}},ase=["onMouseenter","onClick"],lse={key:0},cse="ElCarousel",use=J({name:cse}),dse=J({...use,props:sse,emits:ose,setup(t,{expose:e,emit:n}){const i=t,{root:s,activeIndex:o,arrowDisplay:r,hasLabel:a,hover:l,isCardType:c,items:u,handleButtonEnter:d,handleButtonLeave:h,handleIndicatorClick:f,handleMouseEnter:m,handleMouseLeave:g,setActiveItem:y,prev:_,next:C,throttledArrowClick:w,throttledIndicatorHover:S}=rse(i,n),E=_e("carousel"),k=T(()=>{const $=[E.b(),E.m(i.direction)];return p(c)&&$.push(E.m("card")),$}),A=T(()=>{const $=[E.e("indicators"),E.em("indicators",i.direction)];return p(a)&&$.push(E.em("indicators","labels")),(i.indicatorPosition==="outside"||p(c))&&$.push(E.em("indicators","outside")),$});return e({setActiveItem:y,prev:_,next:C}),($,L)=>(I(),H("div",{ref_key:"root",ref:s,class:x(p(k)),onMouseenter:L[6]||(L[6]=rt((...O)=>p(m)&&p(m)(...O),["stop"])),onMouseleave:L[7]||(L[7]=rt((...O)=>p(g)&&p(g)(...O),["stop"]))},[G("div",{class:x(p(E).e("container")),style:Ke({height:$.height})},[p(r)?(I(),ce(oi,{key:0,name:"carousel-arrow-left",persisted:""},{default:ee(()=>[ct(G("button",{type:"button",class:x([p(E).e("arrow"),p(E).em("arrow","left")]),onMouseenter:L[0]||(L[0]=O=>p(d)("left")),onMouseleave:L[1]||(L[1]=(...O)=>p(h)&&p(h)(...O)),onClick:L[2]||(L[2]=rt(O=>p(w)(p(o)-1),["stop"]))},[Z(p(Ge),null,{default:ee(()=>[Z(p(Cc))]),_:1})],34),[[Vt,($.arrow==="always"||p(l))&&(i.loop||p(o)>0)]])]),_:1})):re("v-if",!0),p(r)?(I(),ce(oi,{key:1,name:"carousel-arrow-right",persisted:""},{default:ee(()=>[ct(G("button",{type:"button",class:x([p(E).e("arrow"),p(E).em("arrow","right")]),onMouseenter:L[3]||(L[3]=O=>p(d)("right")),onMouseleave:L[4]||(L[4]=(...O)=>p(h)&&p(h)(...O)),onClick:L[5]||(L[5]=rt(O=>p(w)(p(o)+1),["stop"]))},[Z(p(Ge),null,{default:ee(()=>[Z(p($s))]),_:1})],34),[[Vt,($.arrow==="always"||p(l))&&(i.loop||p(o)<p(u).length-1)]])]),_:1})):re("v-if",!0),me($.$slots,"default")],6),$.indicatorPosition!=="none"?(I(),H("ul",{key:0,class:x(p(A))},[(I(!0),H(Ye,null,Ot(p(u),(O,B)=>(I(),H("li",{key:B,class:x([p(E).e("indicator"),p(E).em("indicator",$.direction),p(E).is("active",B===p(o))]),onMouseenter:V=>p(S)(B),onClick:rt(V=>p(f)(B),["stop"])},[G("button",{class:x(p(E).e("button"))},[p(a)?(I(),H("span",lse,Re(O.props.label),1)):re("v-if",!0)],2)],42,ase))),128))],2)):re("v-if",!0)],34))}});var pse=Ve(dse,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const hse=De({name:{type:String,default:""},label:{type:[String,Number],default:""}}),fse=(t,e)=>{const n=qe(RR),i=vt(),s=.83,o=F(!1),r=F(0),a=F(1),l=F(!1),c=F(!1),u=F(!1),d=F(!1),{isCardType:h,isVertical:f}=n;function m(w,S,E){const k=E-1,A=S-1,$=S+1,L=E/2;return S===0&&w===k?-1:S===k&&w===0?E:w<A&&S-w>=L?E+1:w>$&&w-S>=L?-2:w}function g(w,S){var E;const k=((E=n.root.value)==null?void 0:E.offsetWidth)||0;return u.value?k*((2-s)*(w-S)+1)/4:w<S?-(1+s)*k/4:(3+s)*k/4}function y(w,S,E){const k=n.root.value;return k?((E?k.offsetHeight:k.offsetWidth)||0)*(w-S):0}const _=(w,S,E)=>{var k;const A=p(h),$=(k=n.items.value.length)!=null?k:Number.NaN,L=w===S;!A&&!Ui(E)&&(d.value=L||w===E),!L&&$>2&&n.loop&&(w=m(w,S,$));const O=p(f);l.value=L,A?(u.value=Math.round(Math.abs(w-S))<=1,r.value=g(w,S),a.value=p(l)?1:s):r.value=y(w,S,O),c.value=!0};function C(){if(n&&p(h)){const w=n.items.value.findIndex(({uid:S})=>S===i.uid);n.setActiveItem(w)}}return ft(()=>{n.addItem({props:t,states:Yt({hover:o,translate:r,scale:a,active:l,ready:c,inStage:u,animating:d}),uid:i.uid,translateItem:_})}),Mc(()=>{n.removeItem(i.uid)}),{active:l,animating:d,hover:o,inStage:u,isVertical:f,translate:r,isCardType:h,scale:a,ready:c,handleItemClick:C}},mse=J({name:"ElCarouselItem"}),gse=J({...mse,props:hse,setup(t){const e=t,n=_e("carousel"),{active:i,animating:s,hover:o,inStage:r,isVertical:a,translate:l,isCardType:c,scale:u,ready:d,handleItemClick:h}=fse(e),f=T(()=>{const g=`${`translate${p(a)?"Y":"X"}`}(${p(l)}px)`,y=`scale(${p(u)})`;return{transform:[g,y].join(" ")}});return(m,g)=>ct((I(),H("div",{class:x([p(n).e("item"),p(n).is("active",p(i)),p(n).is("in-stage",p(r)),p(n).is("hover",p(o)),p(n).is("animating",p(s)),{[p(n).em("item","card")]:p(c)}]),style:Ke(p(f)),onClick:g[0]||(g[0]=(...y)=>p(h)&&p(h)(...y))},[p(c)?ct((I(),H("div",{key:0,class:x(p(n).e("mask"))},null,2)),[[Vt,!p(i)]]):re("v-if",!0),me(m.$slots,"default")],6)),[[Vt,p(d)]])}});var oF=Ve(gse,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const vse=yt(pse,{CarouselItem:oF}),yse=Nn(oF),rF={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:Vs,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0}},aF={[wt]:t=>at(t)||st(t)||fi(t),change:t=>at(t)||st(t)||fi(t)},bse=({model:t,isChecked:e})=>{const n=qe(_h,void 0),i=T(()=>{var o,r;const a=(o=n==null?void 0:n.max)==null?void 0:o.value,l=(r=n==null?void 0:n.min)==null?void 0:r.value;return!Ui(a)&&t.value.length>=a&&!e.value||!Ui(l)&&t.value.length<=l&&e.value});return{isDisabled:eo(T(()=>(n==null?void 0:n.disabled.value)||i.value)),isLimitDisabled:i}},_se=(t,{model:e,isLimitExceeded:n,hasOwnLabel:i,isDisabled:s,isLabeledByFormItem:o})=>{const r=qe(_h,void 0),{formItem:a}=Ns(),{emit:l}=vt();function c(m){var g,y;return m===t.trueLabel||m===!0?(g=t.trueLabel)!=null?g:!0:(y=t.falseLabel)!=null?y:!1}function u(m,g){l("change",c(m),g)}function d(m){if(n.value)return;const g=m.target;l("change",c(g.checked),m)}async function h(m){n.value||!i.value&&!s.value&&o.value&&(m.composedPath().some(_=>_.tagName==="LABEL")||(e.value=c([!1,t.falseLabel].includes(e.value)),await je(),u(e.value,m)))}const f=T(()=>(r==null?void 0:r.validateEvent)||t.validateEvent);return Ce(()=>t.modelValue,()=>{f.value&&(a==null||a.validate("change").catch(m=>void 0))}),{handleChange:d,onClickRoot:h}},wse=t=>{const e=F(!1),{emit:n}=vt(),i=qe(_h,void 0),s=T(()=>Ui(i)===!1),o=F(!1);return{model:T({get(){var a,l;return s.value?(a=i==null?void 0:i.modelValue)==null?void 0:a.value:(l=t.modelValue)!=null?l:e.value},set(a){var l,c;s.value&&ze(a)?(o.value=((l=i==null?void 0:i.max)==null?void 0:l.value)!==void 0&&a.length>(i==null?void 0:i.max.value),o.value===!1&&((c=i==null?void 0:i.changeEvent)==null||c.call(i,a))):(n(wt,a),e.value=a)}}),isGroup:s,isLimitExceeded:o}},Cse=(t,e,{model:n})=>{const i=qe(_h,void 0),s=F(!1),o=T(()=>{const c=n.value;return fi(c)?c:ze(c)?Et(t.label)?c.map(en).some(u=>So(u,t.label)):c.map(en).includes(t.label):c!=null?c===t.trueLabel:!!c}),r=gi(T(()=>{var c;return(c=i==null?void 0:i.size)==null?void 0:c.value}),{prop:!0}),a=gi(T(()=>{var c;return(c=i==null?void 0:i.size)==null?void 0:c.value})),l=T(()=>!!(e.default||t.label));return{checkboxButtonSize:r,isChecked:o,isFocused:s,checkboxSize:a,hasOwnLabel:l}},Sse=(t,{model:e})=>{function n(){ze(e.value)&&!e.value.includes(t.label)?e.value.push(t.label):e.value=t.trueLabel||!0}t.checked&&n()},lF=(t,e)=>{const{formItem:n}=Ns(),{model:i,isGroup:s,isLimitExceeded:o}=wse(t),{isFocused:r,isChecked:a,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u}=Cse(t,e,{model:i}),{isDisabled:d}=bse({model:i,isChecked:a}),{inputId:h,isLabeledByFormItem:f}=Oc(t,{formItemContext:n,disableIdGeneration:u,disableIdManagement:s}),{handleChange:m,onClickRoot:g}=_se(t,{model:i,isLimitExceeded:o,hasOwnLabel:u,isDisabled:d,isLabeledByFormItem:f});return Sse(t,{model:i}),{inputId:h,isLabeledByFormItem:f,isChecked:a,isDisabled:d,isFocused:r,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,model:i,handleChange:m,onClickRoot:g}},Ese=["tabindex","role","aria-checked"],kse=["id","aria-hidden","name","tabindex","disabled","true-value","false-value"],Tse=["id","aria-hidden","disabled","value","name","tabindex"],Ise=J({name:"ElCheckbox"}),xse=J({...Ise,props:rF,emits:aF,setup(t){const e=t,n=Ki(),{inputId:i,isLabeledByFormItem:s,isChecked:o,isDisabled:r,isFocused:a,checkboxSize:l,hasOwnLabel:c,model:u,handleChange:d,onClickRoot:h}=lF(e,n),f=_e("checkbox"),m=T(()=>[f.b(),f.m(l.value),f.is("disabled",r.value),f.is("bordered",e.border),f.is("checked",o.value)]),g=T(()=>[f.e("input"),f.is("disabled",r.value),f.is("checked",o.value),f.is("indeterminate",e.indeterminate),f.is("focus",a.value)]);return(y,_)=>(I(),ce(It(!p(c)&&p(s)?"span":"label"),{class:x(p(m)),"aria-controls":y.indeterminate?y.controls:null,onClick:p(h)},{default:ee(()=>[G("span",{class:x(p(g)),tabindex:y.indeterminate?0:void 0,role:y.indeterminate?"checkbox":void 0,"aria-checked":y.indeterminate?"mixed":void 0},[y.trueLabel||y.falseLabel?ct((I(),H("input",{key:0,id:p(i),"onUpdate:modelValue":_[0]||(_[0]=C=>pn(u)?u.value=C:null),class:x(p(f).e("original")),type:"checkbox","aria-hidden":y.indeterminate?"true":"false",name:y.name,tabindex:y.tabindex,disabled:p(r),"true-value":y.trueLabel,"false-value":y.falseLabel,onChange:_[1]||(_[1]=(...C)=>p(d)&&p(d)(...C)),onFocus:_[2]||(_[2]=C=>a.value=!0),onBlur:_[3]||(_[3]=C=>a.value=!1)},null,42,kse)),[[Hy,p(u)]]):ct((I(),H("input",{key:1,id:p(i),"onUpdate:modelValue":_[4]||(_[4]=C=>pn(u)?u.value=C:null),class:x(p(f).e("original")),type:"checkbox","aria-hidden":y.indeterminate?"true":"false",disabled:p(r),value:y.label,name:y.name,tabindex:y.tabindex,onChange:_[5]||(_[5]=(...C)=>p(d)&&p(d)(...C)),onFocus:_[6]||(_[6]=C=>a.value=!0),onBlur:_[7]||(_[7]=C=>a.value=!1)},null,42,Tse)),[[Hy,p(u)]]),G("span",{class:x(p(f).e("inner"))},null,2)],10,Ese),p(c)?(I(),H("span",{key:0,class:x(p(f).e("label"))},[me(y.$slots,"default"),y.$slots.default?re("v-if",!0):(I(),H(Ye,{key:0},[Ut(Re(y.label),1)],64))],2)):re("v-if",!0)]),_:3},8,["class","aria-controls","onClick"]))}});var Mse=Ve(xse,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox.vue"]]);const $se=["name","tabindex","disabled","true-value","false-value"],Ase=["name","tabindex","disabled","value"],Lse=J({name:"ElCheckboxButton"}),Ose=J({...Lse,props:rF,emits:aF,setup(t){const e=t,n=Ki(),{isFocused:i,isChecked:s,isDisabled:o,checkboxButtonSize:r,model:a,handleChange:l}=lF(e,n),c=qe(_h,void 0),u=_e("checkbox"),d=T(()=>{var f,m,g,y;const _=(m=(f=c==null?void 0:c.fill)==null?void 0:f.value)!=null?m:"";return{backgroundColor:_,borderColor:_,color:(y=(g=c==null?void 0:c.textColor)==null?void 0:g.value)!=null?y:"",boxShadow:_?`-1px 0 0 0 ${_}`:void 0}}),h=T(()=>[u.b("button"),u.bm("button",r.value),u.is("disabled",o.value),u.is("checked",s.value),u.is("focus",i.value)]);return(f,m)=>(I(),H("label",{class:x(p(h))},[f.trueLabel||f.falseLabel?ct((I(),H("input",{key:0,"onUpdate:modelValue":m[0]||(m[0]=g=>pn(a)?a.value=g:null),class:x(p(u).be("button","original")),type:"checkbox",name:f.name,tabindex:f.tabindex,disabled:p(o),"true-value":f.trueLabel,"false-value":f.falseLabel,onChange:m[1]||(m[1]=(...g)=>p(l)&&p(l)(...g)),onFocus:m[2]||(m[2]=g=>i.value=!0),onBlur:m[3]||(m[3]=g=>i.value=!1)},null,42,$se)),[[Hy,p(a)]]):ct((I(),H("input",{key:1,"onUpdate:modelValue":m[4]||(m[4]=g=>pn(a)?a.value=g:null),class:x(p(u).be("button","original")),type:"checkbox",name:f.name,tabindex:f.tabindex,disabled:p(o),value:f.label,onChange:m[5]||(m[5]=(...g)=>p(l)&&p(l)(...g)),onFocus:m[6]||(m[6]=g=>i.value=!0),onBlur:m[7]||(m[7]=g=>i.value=!1)},null,42,Ase)),[[Hy,p(a)]]),f.$slots.default||f.label?(I(),H("span",{key:2,class:x(p(u).be("button","inner")),style:Ke(p(s)?p(d):void 0)},[me(f.$slots,"default",{},()=>[Ut(Re(f.label),1)])],6)):re("v-if",!0)],2))}});var cF=Ve(Ose,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-button.vue"]]);const Pse=De({modelValue:{type:ae(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:Vs,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0}}),Rse={[wt]:t=>ze(t),change:t=>ze(t)},Vse=J({name:"ElCheckboxGroup"}),Fse=J({...Vse,props:Pse,emits:Rse,setup(t,{emit:e}){const n=t,i=_e("checkbox"),{formItem:s}=Ns(),{inputId:o,isLabeledByFormItem:r}=Oc(n,{formItemContext:s}),a=async c=>{e(wt,c),await je(),e("change",c)},l=T({get(){return n.modelValue},set(c){a(c)}});return xt(_h,{...Ua(Ei(n),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:l,changeEvent:a}),Ce(()=>n.modelValue,()=>{n.validateEvent&&(s==null||s.validate("change").catch(c=>void 0))}),(c,u)=>{var d;return I(),ce(It(c.tag),{id:p(o),class:x(p(i).b("group")),role:"group","aria-label":p(r)?void 0:c.label||"checkbox-group","aria-labelledby":p(r)?(d=p(s))==null?void 0:d.labelId:void 0},{default:ee(()=>[me(c.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var uF=Ve(Fse,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-group.vue"]]);const Yo=yt(Mse,{CheckboxButton:cF,CheckboxGroup:uF}),Dse=Nn(cF),dF=Nn(uF),pF=De({size:Vs,disabled:Boolean,label:{type:[String,Number,Boolean],default:""}}),Nse=De({...pF,modelValue:{type:[String,Number,Boolean],default:""},name:{type:String,default:""},border:Boolean}),hF={[wt]:t=>at(t)||st(t)||fi(t),[bn]:t=>at(t)||st(t)||fi(t)},fF=(t,e)=>{const n=F(),i=qe(BR,void 0),s=T(()=>!!i),o=T({get(){return s.value?i.modelValue:t.modelValue},set(u){s.value?i.changeEvent(u):e&&e(wt,u),n.value.checked=t.modelValue===t.label}}),r=gi(T(()=>i==null?void 0:i.size)),a=eo(T(()=>i==null?void 0:i.disabled)),l=F(!1),c=T(()=>a.value||s.value&&o.value!==t.label?-1:0);return{radioRef:n,isGroup:s,radioGroup:i,focus:l,size:r,disabled:a,tabIndex:c,modelValue:o}},Bse=["value","name","disabled"],zse=J({name:"ElRadio"}),Hse=J({...zse,props:Nse,emits:hF,setup(t,{emit:e}){const n=t,i=_e("radio"),{radioRef:s,radioGroup:o,focus:r,size:a,disabled:l,modelValue:c}=fF(n,e);function u(){je(()=>e("change",c.value))}return(d,h)=>{var f;return I(),H("label",{class:x([p(i).b(),p(i).is("disabled",p(l)),p(i).is("focus",p(r)),p(i).is("bordered",d.border),p(i).is("checked",p(c)===d.label),p(i).m(p(a))])},[G("span",{class:x([p(i).e("input"),p(i).is("disabled",p(l)),p(i).is("checked",p(c)===d.label)])},[ct(G("input",{ref_key:"radioRef",ref:s,"onUpdate:modelValue":h[0]||(h[0]=m=>pn(c)?c.value=m:null),class:x(p(i).e("original")),value:d.label,name:d.name||((f=p(o))==null?void 0:f.name),disabled:p(l),type:"radio",onFocus:h[1]||(h[1]=m=>r.value=!0),onBlur:h[2]||(h[2]=m=>r.value=!1),onChange:u},null,42,Bse),[[xP,p(c)]]),G("span",{class:x(p(i).e("inner"))},null,2)],2),G("span",{class:x(p(i).e("label")),onKeydown:h[3]||(h[3]=rt(()=>{},["stop"]))},[me(d.$slots,"default",{},()=>[Ut(Re(d.label),1)])],34)],2)}}});var Use=Ve(Hse,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio.vue"]]);const Wse=De({...pF,name:{type:String,default:""}}),Gse=["value","name","disabled"],jse=J({name:"ElRadioButton"}),qse=J({...jse,props:Wse,setup(t){const e=t,n=_e("radio"),{radioRef:i,focus:s,size:o,disabled:r,modelValue:a,radioGroup:l}=fF(e),c=T(()=>({backgroundColor:(l==null?void 0:l.fill)||"",borderColor:(l==null?void 0:l.fill)||"",boxShadow:l!=null&&l.fill?`-1px 0 0 0 ${l.fill}`:"",color:(l==null?void 0:l.textColor)||""}));return(u,d)=>{var h;return I(),H("label",{class:x([p(n).b("button"),p(n).is("active",p(a)===u.label),p(n).is("disabled",p(r)),p(n).is("focus",p(s)),p(n).bm("button",p(o))])},[ct(G("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":d[0]||(d[0]=f=>pn(a)?a.value=f:null),class:x(p(n).be("button","original-radio")),value:u.label,type:"radio",name:u.name||((h=p(l))==null?void 0:h.name),disabled:p(r),onFocus:d[1]||(d[1]=f=>s.value=!0),onBlur:d[2]||(d[2]=f=>s.value=!1)},null,42,Gse),[[xP,p(a)]]),G("span",{class:x(p(n).be("button","inner")),style:Ke(p(a)===u.label?p(c):{}),onKeydown:d[3]||(d[3]=rt(()=>{},["stop"]))},[me(u.$slots,"default",{},()=>[Ut(Re(u.label),1)])],38)],2)}}});var mF=Ve(qse,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-button.vue"]]);const Kse=De({id:{type:String,default:void 0},size:Vs,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:""},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0}}),Yse=hF,Zse=["id","aria-label","aria-labelledby"],Xse=J({name:"ElRadioGroup"}),Qse=J({...Xse,props:Kse,emits:Yse,setup(t,{emit:e}){const n=t,i=_e("radio"),s=yr(),o=F(),{formItem:r}=Ns(),{inputId:a,isLabeledByFormItem:l}=Oc(n,{formItemContext:r}),c=d=>{e(wt,d),je(()=>e("change",d))};ft(()=>{const d=o.value.querySelectorAll("[type=radio]"),h=d[0];!Array.from(d).some(f=>f.checked)&&h&&(h.tabIndex=0)});const u=T(()=>n.name||s.value);return xt(BR,Yt({...Ei(n),changeEvent:c,name:u})),Ce(()=>n.modelValue,()=>{n.validateEvent&&(r==null||r.validate("change").catch(d=>void 0))}),(d,h)=>(I(),H("div",{id:p(a),ref_key:"radioGroupRef",ref:o,class:x(p(i).b("group")),role:"radiogroup","aria-label":p(l)?void 0:d.label||"radio-group","aria-labelledby":p(l)?p(r).labelId:void 0},[me(d.$slots,"default")],10,Zse))}});var gF=Ve(Qse,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-group.vue"]]);const vF=yt(Use,{RadioButton:mF,RadioGroup:gF}),Jse=Nn(gF),eoe=Nn(mF);var toe=J({name:"NodeContent",setup(){return{ns:_e("cascader-node")}},render(){const{ns:t}=this,{node:e,panel:n}=this.$parent,{data:i,label:s}=e,{renderLabelFn:o}=n;return Ze("span",{class:t.e("label")},o?o({node:e,data:i}):s)}});const vk=Symbol(),noe=J({name:"ElCascaderNode",components:{ElCheckbox:Yo,ElRadio:vF,NodeContent:toe,ElIcon:Ge,Check:lg,Loading:Lc,ArrowRight:$s},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(t,{emit:e}){const n=qe(vk),i=_e("cascader-node"),s=T(()=>n.isHoverMenu),o=T(()=>n.config.multiple),r=T(()=>n.config.checkStrictly),a=T(()=>{var k;return(k=n.checkedNodes[0])==null?void 0:k.uid}),l=T(()=>t.node.isDisabled),c=T(()=>t.node.isLeaf),u=T(()=>r.value&&!c.value||!l.value),d=T(()=>f(n.expandingNode)),h=T(()=>r.value&&n.checkedNodes.some(f)),f=k=>{var A;const{level:$,uid:L}=t.node;return((A=k==null?void 0:k.pathNodes[$-1])==null?void 0:A.uid)===L},m=()=>{d.value||n.expandNode(t.node)},g=k=>{const{node:A}=t;k!==A.checked&&n.handleCheckChange(A,k)},y=()=>{n.lazyLoad(t.node,()=>{c.value||m()})},_=k=>{s.value&&(C(),!c.value&&e("expand",k))},C=()=>{const{node:k}=t;!u.value||k.loading||(k.loaded?m():y())},w=()=>{s.value&&!c.value||(c.value&&!l.value&&!r.value&&!o.value?E(!0):C())},S=k=>{r.value?(g(k),t.node.loaded&&m()):E(k)},E=k=>{t.node.loaded?(g(k),!r.value&&m()):y()};return{panel:n,isHoverMenu:s,multiple:o,checkStrictly:r,checkedNodeId:a,isDisabled:l,isLeaf:c,expandable:u,inExpandingPath:d,inCheckedPath:h,ns:i,handleHoverExpand:_,handleExpand:C,handleClick:w,handleCheck:E,handleSelectCheck:S}}}),ioe=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],soe=G("span",null,null,-1);function ooe(t,e,n,i,s,o){const r=pt("el-checkbox"),a=pt("el-radio"),l=pt("check"),c=pt("el-icon"),u=pt("node-content"),d=pt("loading"),h=pt("arrow-right");return I(),H("li",{id:`${t.menuId}-${t.node.uid}`,role:"menuitem","aria-haspopup":!t.isLeaf,"aria-owns":t.isLeaf?null:t.menuId,"aria-expanded":t.inExpandingPath,tabindex:t.expandable?-1:void 0,class:x([t.ns.b(),t.ns.is("selectable",t.checkStrictly),t.ns.is("active",t.node.checked),t.ns.is("disabled",!t.expandable),t.inExpandingPath&&"in-active-path",t.inCheckedPath&&"in-checked-path"]),onMouseenter:e[2]||(e[2]=(...f)=>t.handleHoverExpand&&t.handleHoverExpand(...f)),onFocus:e[3]||(e[3]=(...f)=>t.handleHoverExpand&&t.handleHoverExpand(...f)),onClick:e[4]||(e[4]=(...f)=>t.handleClick&&t.handleClick(...f))},[re(" prefix "),t.multiple?(I(),ce(r,{key:0,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:t.isDisabled,onClick:e[0]||(e[0]=rt(()=>{},["stop"])),"onUpdate:modelValue":t.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):t.checkStrictly?(I(),ce(a,{key:1,"model-value":t.checkedNodeId,label:t.node.uid,disabled:t.isDisabled,"onUpdate:modelValue":t.handleSelectCheck,onClick:e[1]||(e[1]=rt(()=>{},["stop"]))},{default:ee(()=>[re(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),soe]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):t.isLeaf&&t.node.checked?(I(),ce(c,{key:2,class:x(t.ns.e("prefix"))},{default:ee(()=>[Z(l)]),_:1},8,["class"])):re("v-if",!0),re(" content "),Z(u),re(" postfix "),t.isLeaf?re("v-if",!0):(I(),H(Ye,{key:3},[t.node.loading?(I(),ce(c,{key:0,class:x([t.ns.is("loading"),t.ns.e("postfix")])},{default:ee(()=>[Z(d)]),_:1},8,["class"])):(I(),ce(c,{key:1,class:x(["arrow-right",t.ns.e("postfix")])},{default:ee(()=>[Z(h)]),_:1},8,["class"]))],64))],42,ioe)}var roe=Ve(noe,[["render",ooe],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const aoe=J({name:"ElCascaderMenu",components:{Loading:Lc,ElIcon:Ge,ElScrollbar:fl,ElCascaderNode:roe},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(t){const e=vt(),n=_e("cascader-menu"),{t:i}=Gt(),s=d_();let o=null,r=null;const a=qe(vk),l=F(null),c=T(()=>!t.nodes.length),u=T(()=>!a.initialLoaded),d=T(()=>`cascader-menu-${s}-${t.index}`),h=y=>{o=y.target},f=y=>{if(!(!a.isHoverMenu||!o||!l.value))if(o.contains(y.target)){m();const _=e.vnode.el,{left:C}=_.getBoundingClientRect(),{offsetWidth:w,offsetHeight:S}=_,E=y.clientX-C,k=o.offsetTop,A=k+o.offsetHeight;l.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${E} ${k} L${w} 0 V${k} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${E} ${A} L${w} ${S} V${A} Z" />
        `}else r||(r=window.setTimeout(g,a.config.hoverThreshold))},m=()=>{r&&(clearTimeout(r),r=null)},g=()=>{l.value&&(l.value.innerHTML="",m())};return{ns:n,panel:a,hoverZone:l,isEmpty:c,isLoading:u,menuId:d,t:i,handleExpand:h,handleMouseMove:f,clearHoverZone:g}}});function loe(t,e,n,i,s,o){const r=pt("el-cascader-node"),a=pt("loading"),l=pt("el-icon"),c=pt("el-scrollbar");return I(),ce(c,{key:t.menuId,tag:"ul",role:"menu",class:x(t.ns.b()),"wrap-class":t.ns.e("wrap"),"view-class":[t.ns.e("list"),t.ns.is("empty",t.isEmpty)],onMousemove:t.handleMouseMove,onMouseleave:t.clearHoverZone},{default:ee(()=>{var u;return[(I(!0),H(Ye,null,Ot(t.nodes,d=>(I(),ce(r,{key:d.uid,node:d,"menu-id":t.menuId,onExpand:t.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),t.isLoading?(I(),H("div",{key:0,class:x(t.ns.e("empty-text"))},[Z(l,{size:"14",class:x(t.ns.is("loading"))},{default:ee(()=>[Z(a)]),_:1},8,["class"]),Ut(" "+Re(t.t("el.cascader.loading")),1)],2)):t.isEmpty?(I(),H("div",{key:1,class:x(t.ns.e("empty-text"))},Re(t.t("el.cascader.noData")),3)):(u=t.panel)!=null&&u.isHoverMenu?(I(),H("svg",{key:2,ref:"hoverZone",class:x(t.ns.e("hover-zone"))},null,2)):re("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var coe=Ve(aoe,[["render",loe],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]);let uoe=0;const doe=t=>{const e=[t];let{parent:n}=t;for(;n;)e.unshift(n),n=n.parent;return e};let Lm=class{constructor(e,n,i,s=!1){this.data=e,this.config=n,this.parent=i,this.root=s,this.uid=uoe++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:o,label:r,children:a}=n,l=e[a],c=doe(this);this.level=s?0:i?i.level+1:1,this.value=e[o],this.label=e[r],this.pathNodes=c,this.pathValues=c.map(u=>u.value),this.pathLabels=c.map(u=>u.label),this.childrenData=l,this.children=(l||[]).map(u=>new Lm(u,n,this)),this.loaded=!n.lazy||this.isLeaf||!No(l)}get isDisabled(){const{data:e,parent:n,config:i}=this,{disabled:s,checkStrictly:o}=i;return(ot(s)?s(e,this):!!e[s])||!o&&(n==null?void 0:n.isDisabled)}get isLeaf(){const{data:e,config:n,childrenData:i,loaded:s}=this,{lazy:o,leaf:r}=n,a=ot(r)?r(e,this):e[r];return Ui(a)?o&&!s?!1:!(Array.isArray(i)&&i.length):!!a}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:n,children:i}=this,s=new Lm(e,this.config,this);return Array.isArray(n)?n.push(e):this.childrenData=[e],i.push(s),s}calcText(e,n){const i=e?this.pathLabels.join(n):this.label;return this.text=i,i}broadcast(e,...n){const i=`onParent${Ur(e)}`;this.children.forEach(s=>{s&&(s.broadcast(e,...n),s[i]&&s[i](...n))})}emit(e,...n){const{parent:i}=this,s=`onChild${Ur(e)}`;i&&(i[s]&&i[s](...n),i.emit(e,...n))}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,n=e.filter(s=>!s.isDisabled),i=n.length?n.every(s=>s.checked):!1;this.setCheckState(i)}setCheckState(e){const n=this.children.length,i=this.children.reduce((s,o)=>{const r=o.checked?1:o.indeterminate?.5:0;return s+r},0);this.checked=this.loaded&&this.children.filter(s=>!s.isDisabled).every(s=>s.loaded&&s.checked)&&e,this.indeterminate=this.loaded&&i!==n&&i>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:n,multiple:i}=this.config;n||!i?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check"))}};const V1=(t,e)=>t.reduce((n,i)=>(i.isLeaf?n.push(i):(!e&&n.push(i),n=n.concat(V1(i.children,e))),n),[]);class n${constructor(e,n){this.config=n;const i=(e||[]).map(s=>new Lm(s,this.config));this.nodes=i,this.allNodes=V1(i,!1),this.leafNodes=V1(i,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,n){const i=n?n.appendChild(e):new Lm(e,this.config);n||this.nodes.push(i),this.allNodes.push(i),i.isLeaf&&this.leafNodes.push(i)}appendNodes(e,n){e.forEach(i=>this.appendNode(i,n))}getNodeByValue(e,n=!1){return!e&&e!==0?null:this.getFlattedNodes(n).find(s=>So(s.value,e)||So(s.pathValues,e))||null}getSameNode(e){return e&&this.getFlattedNodes(!1).find(({value:i,level:s})=>So(e.value,i)&&e.level===s)||null}}const yF=De({modelValue:{type:ae([Number,String,Array])},options:{type:ae(Array),default:()=>[]},props:{type:ae(Object),default:()=>({})}}),poe={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:nn,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},hoe=t=>T(()=>({...poe,...t.props})),i$=t=>{if(!t)return 0;const e=t.id.split("-");return Number(e[e.length-2])},foe=t=>{if(!t)return;const e=t.querySelector("input");e?e.click():gR(t)&&t.click()},moe=(t,e)=>{const n=e.slice(0),i=n.map(o=>o.uid),s=t.reduce((o,r)=>{const a=i.indexOf(r.uid);return a>-1&&(o.push(r),n.splice(a,1),i.splice(a,1)),o},[]);return s.push(...n),s},goe=J({name:"ElCascaderPanel",components:{ElCascaderMenu:coe},props:{...yF,border:{type:Boolean,default:!0},renderLabel:Function},emits:[wt,bn,"close","expand-change"],setup(t,{emit:e,slots:n}){let i=!1;const s=_e("cascader"),o=hoe(t);let r=null;const a=F(!0),l=F([]),c=F(null),u=F([]),d=F(null),h=F([]),f=T(()=>o.value.expandTrigger==="hover"),m=T(()=>t.renderLabel||n.default),g=()=>{const{options:V}=t,P=o.value;i=!1,r=new n$(V,P),u.value=[r.getNodes()],P.lazy&&No(t.options)?(a.value=!1,y(void 0,z=>{z&&(r=new n$(z,P),u.value=[r.getNodes()]),a.value=!0,$(!1,!0)})):$(!1,!0)},y=(V,P)=>{const z=o.value;V=V||new Lm({},z,void 0,!0),V.loading=!0;const U=W=>{const R=V,D=R.root?null:R;W&&(r==null||r.appendNodes(W,D)),R.loading=!1,R.loaded=!0,R.childrenData=R.childrenData||[],P&&P(W)};z.lazyLoad(V,U)},_=(V,P)=>{var z;const{level:U}=V,W=u.value.slice(0,U);let R;V.isLeaf?R=V.pathNodes[U-2]:(R=V,W.push(V.children)),((z=d.value)==null?void 0:z.uid)!==(R==null?void 0:R.uid)&&(d.value=V,u.value=W,!P&&e("expand-change",(V==null?void 0:V.pathValues)||[]))},C=(V,P,z=!0)=>{const{checkStrictly:U,multiple:W}=o.value,R=h.value[0];i=!0,!W&&(R==null||R.doCheck(!1)),V.doCheck(P),A(),z&&!W&&!U&&e("close"),!z&&!W&&!U&&w(V)},w=V=>{V&&(V=V.parent,w(V),V&&_(V))},S=V=>r==null?void 0:r.getFlattedNodes(V),E=V=>{var P;return(P=S(V))==null?void 0:P.filter(z=>z.checked!==!1)},k=()=>{h.value.forEach(V=>V.doCheck(!1)),A()},A=()=>{var V;const{checkStrictly:P,multiple:z}=o.value,U=h.value,W=E(!P),R=moe(U,W),D=R.map(N=>N.valueByOption);h.value=R,c.value=z?D:(V=D[0])!=null?V:null},$=(V=!1,P=!1)=>{const{modelValue:z}=t,{lazy:U,multiple:W,checkStrictly:R}=o.value,D=!R;if(!(!a.value||i||!P&&So(z,c.value)))if(U&&!V){const K=aM(Nj(Ga(z))).map(ie=>r==null?void 0:r.getNodeByValue(ie)).filter(ie=>!!ie&&!ie.loaded&&!ie.loading);K.length?K.forEach(ie=>{y(ie,()=>$(!1,P))}):$(!0,P)}else{const N=W?Ga(z):[z],K=aM(N.map(ie=>r==null?void 0:r.getNodeByValue(ie,D)));L(K,P),c.value=sR(z)}},L=(V,P=!0)=>{const{checkStrictly:z}=o.value,U=h.value,W=V.filter(N=>!!N&&(z||N.isLeaf)),R=r==null?void 0:r.getSameNode(d.value),D=P&&R||W[0];D?D.pathNodes.forEach(N=>_(N,!0)):d.value=null,U.forEach(N=>N.doCheck(!1)),W.forEach(N=>N.doCheck(!0)),h.value=W,je(O)},O=()=>{Nt&&l.value.forEach(V=>{const P=V==null?void 0:V.$el;if(P){const z=P.querySelector(`.${s.namespace.value}-scrollbar__wrap`),U=P.querySelector(`.${s.b("node")}.${s.is("active")}`)||P.querySelector(`.${s.b("node")}.in-active-path`);SR(z,U)}})},B=V=>{const P=V.target,{code:z}=V;switch(z){case Xe.up:case Xe.down:{V.preventDefault();const U=z===Xe.up?-1:1;Ov(vR(P,U,`.${s.b("node")}[tabindex="-1"]`));break}case Xe.left:{V.preventDefault();const U=l.value[i$(P)-1],W=U==null?void 0:U.$el.querySelector(`.${s.b("node")}[aria-expanded="true"]`);Ov(W);break}case Xe.right:{V.preventDefault();const U=l.value[i$(P)+1],W=U==null?void 0:U.$el.querySelector(`.${s.b("node")}[tabindex="-1"]`);Ov(W);break}case Xe.enter:foe(P);break}};return xt(vk,Yt({config:o,expandingNode:d,checkedNodes:h,isHoverMenu:f,initialLoaded:a,renderLabelFn:m,lazyLoad:y,expandNode:_,handleCheckChange:C})),Ce([o,()=>t.options],g,{deep:!0,immediate:!0}),Ce(()=>t.modelValue,()=>{i=!1,$()},{deep:!0}),Ce(()=>c.value,V=>{So(V,t.modelValue)||(e(wt,V),e(bn,V))}),oP(()=>l.value=[]),ft(()=>!No(t.modelValue)&&$()),{ns:s,menuList:l,menus:u,checkedNodes:h,handleKeyDown:B,handleCheckChange:C,getFlattedNodes:S,getCheckedNodes:E,clearCheckedNodes:k,calculateCheckedValue:A,scrollToExpandingNode:O}}});function voe(t,e,n,i,s,o){const r=pt("el-cascader-menu");return I(),H("div",{class:x([t.ns.b("panel"),t.ns.is("bordered",t.border)]),onKeydown:e[0]||(e[0]=(...a)=>t.handleKeyDown&&t.handleKeyDown(...a))},[(I(!0),H(Ye,null,Ot(t.menus,(a,l)=>(I(),ce(r,{key:l,ref_for:!0,ref:c=>t.menuList[l]=c,index:l,nodes:[...a]},null,8,["index","nodes"]))),128))],34)}var Bv=Ve(goe,[["render",voe],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);Bv.install=t=>{t.component(Bv.name,Bv)};const bF=Bv,yoe=bF,yk=De({closable:Boolean,type:{type:String,values:["success","info","warning","danger",""],default:""},hit:Boolean,disableTransitions:Boolean,color:{type:String,default:""},size:{type:String,values:dl,default:""},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),boe={close:t=>t instanceof MouseEvent,click:t=>t instanceof MouseEvent},_oe=J({name:"ElTag"}),woe=J({..._oe,props:yk,emits:boe,setup(t,{emit:e}){const n=t,i=gi(),s=_e("tag"),o=T(()=>{const{type:l,hit:c,effect:u,closable:d,round:h}=n;return[s.b(),s.is("closable",d),s.m(l),s.m(i.value),s.m(u),s.is("hit",c),s.is("round",h)]}),r=l=>{e("close",l)},a=l=>{e("click",l)};return(l,c)=>l.disableTransitions?(I(),H("span",{key:0,class:x(p(o)),style:Ke({backgroundColor:l.color}),onClick:a},[G("span",{class:x(p(s).e("content"))},[me(l.$slots,"default")],2),l.closable?(I(),ce(p(Ge),{key:0,class:x(p(s).e("close")),onClick:rt(r,["stop"])},{default:ee(()=>[Z(p(vr))]),_:1},8,["class","onClick"])):re("v-if",!0)],6)):(I(),ce(oi,{key:1,name:`${p(s).namespace.value}-zoom-in-center`,appear:""},{default:ee(()=>[G("span",{class:x(p(o)),style:Ke({backgroundColor:l.color}),onClick:a},[G("span",{class:x(p(s).e("content"))},[me(l.$slots,"default")],2),l.closable?(I(),ce(p(Ge),{key:0,class:x(p(s).e("close")),onClick:rt(r,["stop"])},{default:ee(()=>[Z(p(vr))]),_:1},8,["class","onClick"])):re("v-if",!0)],6)]),_:3},8,["name"]))}});var Coe=Ve(woe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tag/src/tag.vue"]]);const Om=yt(Coe),Soe=De({...yF,size:Vs,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:ae(Function),default:(t,e)=>t.text.includes(e)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:ae(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:Di.teleported,tagType:{...yk.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),Eoe={[wt]:t=>!!t,[bn]:t=>!!t,focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,visibleChange:t=>fi(t),expandChange:t=>!!t,removeTag:t=>!!t},koe={key:0},Toe=["placeholder","onKeydown"],Ioe=["onClick"],xoe="ElCascader",Moe=J({name:xoe}),$oe=J({...Moe,props:Soe,emits:Eoe,setup(t,{expose:e,emit:n}){const i=t,s={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:X})=>{const{modifiersData:ue,placement:$e}=X;["right","left","bottom","top"].includes($e)||(ue.arrow.x=35)},requires:["arrow"]}]},o=vh();let r=0,a=0;const l=_e("cascader"),c=_e("input"),{t:u}=Gt(),{form:d,formItem:h}=Ns(),f=F(null),m=F(null),g=F(null),y=F(null),_=F(null),C=F(!1),w=F(!1),S=F(!1),E=F(""),k=F(""),A=F([]),$=F([]),L=F([]),O=F(!1),B=T(()=>o.style),V=T(()=>i.disabled||(d==null?void 0:d.disabled)),P=T(()=>i.placeholder||u("el.cascader.placeholder")),z=T(()=>k.value||A.value.length>0||O.value?"":P.value),U=gi(),W=T(()=>["small"].includes(U.value)?"small":"default"),R=T(()=>!!i.props.multiple),D=T(()=>!i.filterable||R.value),N=T(()=>R.value?k.value:E.value),K=T(()=>{var X;return((X=y.value)==null?void 0:X.checkedNodes)||[]}),ie=T(()=>!i.clearable||V.value||S.value||!w.value?!1:!!K.value.length),Y=T(()=>{const{showAllLevels:X,separator:ue}=i,$e=K.value;return $e.length?R.value?"":$e[0].calcText(X,ue):""}),ne=T({get(){return sR(i.modelValue)},set(X){n(wt,X),n(bn,X),i.validateEvent&&(h==null||h.validate("change").catch(ue=>void 0))}}),we=T(()=>{var X,ue;return(ue=(X=f.value)==null?void 0:X.popperRef)==null?void 0:ue.contentRef}),Se=T(()=>[l.b(),l.m(U.value),l.is("disabled",V.value),o.class]),Te=T(()=>[c.e("icon"),"icon-arrow-down",l.is("reverse",C.value)]),le=X=>{var ue,$e,j;V.value||(X=X??!C.value,X!==C.value&&(C.value=X,($e=(ue=m.value)==null?void 0:ue.input)==null||$e.setAttribute("aria-expanded",`${X}`),X?(oe(),je((j=y.value)==null?void 0:j.scrollToExpandingNode)):i.filterable&&Ee(),n("visibleChange",X)))},oe=()=>{je(()=>{var X;(X=f.value)==null||X.updatePopper()})},de=()=>{S.value=!1},ve=X=>{const{showAllLevels:ue,separator:$e}=i;return{node:X,key:X.uid,text:X.calcText(ue,$e),hitState:!1,closable:!V.value&&!X.isDisabled,isCollapseTag:!1}},He=X=>{var ue;const $e=X.node;$e.doCheck(!1),(ue=y.value)==null||ue.calculateCheckedValue(),n("removeTag",$e.valueByOption)},Q=()=>{if(!R.value)return;const X=K.value,ue=[],$e=[];if(X.forEach(j=>$e.push(ve(j))),$.value=$e,X.length){const[j,...te]=X,ye=te.length;ue.push(ve(j)),ye&&(i.collapseTags?ue.push({key:-1,text:`+ ${ye}`,closable:!1,isCollapseTag:!0}):te.forEach(Ie=>ue.push(ve(Ie))))}A.value=ue},se=()=>{var X,ue;const{filterMethod:$e,showAllLevels:j,separator:te}=i,ye=(ue=(X=y.value)==null?void 0:X.getFlattedNodes(!i.props.checkStrictly))==null?void 0:ue.filter(Ie=>Ie.isDisabled?!1:(Ie.calcText(j,te),$e(Ie,N.value)));R.value&&(A.value.forEach(Ie=>{Ie.hitState=!1}),$.value.forEach(Ie=>{Ie.hitState=!1})),S.value=!0,L.value=ye,oe()},fe=()=>{var X;let ue;S.value&&_.value?ue=_.value.$el.querySelector(`.${l.e("suggestion-item")}`):ue=(X=y.value)==null?void 0:X.$el.querySelector(`.${l.b("node")}[tabindex="-1"]`),ue&&(ue.focus(),!S.value&&ue.click())},Me=()=>{var X,ue;const $e=(X=m.value)==null?void 0:X.input,j=g.value,te=(ue=_.value)==null?void 0:ue.$el;if(!(!Nt||!$e)){if(te){const ye=te.querySelector(`.${l.e("suggestion-list")}`);ye.style.minWidth=`${$e.offsetWidth}px`}if(j){const{offsetHeight:ye}=j,Ie=A.value.length>0?`${Math.max(ye+6,r)}px`:`${r}px`;$e.style.height=Ie,oe()}}},Oe=X=>{var ue;return(ue=y.value)==null?void 0:ue.getCheckedNodes(X)},pe=X=>{oe(),n("expandChange",X)},Le=X=>{var ue;const $e=(ue=X.target)==null?void 0:ue.value;if(X.type==="compositionend")O.value=!1,je(()=>it($e));else{const j=$e[$e.length-1]||"";O.value=!c_(j)}},be=X=>{if(!O.value)switch(X.code){case Xe.enter:le();break;case Xe.down:le(!0),je(fe),X.preventDefault();break;case Xe.esc:C.value===!0&&(X.preventDefault(),X.stopPropagation(),le(!1));break;case Xe.tab:le(!1);break}},Pe=()=>{var X;(X=y.value)==null||X.clearCheckedNodes(),!C.value&&i.filterable&&Ee(),le(!1)},Ee=()=>{const{value:X}=Y;E.value=X,k.value=X},he=X=>{var ue,$e;const{checked:j}=X;R.value?(ue=y.value)==null||ue.handleCheckChange(X,!j,!1):(!j&&(($e=y.value)==null||$e.handleCheckChange(X,!0,!1)),le(!1))},Ne=X=>{const ue=X.target,{code:$e}=X;switch($e){case Xe.up:case Xe.down:{const j=$e===Xe.up?-1:1;Ov(vR(ue,j,`.${l.e("suggestion-item")}[tabindex="-1"]`));break}case Xe.enter:ue.click();break}},Be=()=>{const X=A.value,ue=X[X.length-1];a=k.value?0:a+1,!(!ue||!a||i.collapseTags&&X.length>1)&&(ue.hitState?He(ue):ue.hitState=!0)},Qe=X=>{n("focus",X)},ut=X=>{n("blur",X)},bt=Rs(()=>{const{value:X}=N;if(!X)return;const ue=i.beforeFilter(X);am(ue)?ue.then(se).catch(()=>{}):ue!==!1?se():de()},i.debounce),it=(X,ue)=>{!C.value&&le(!0),!(ue!=null&&ue.isComposing)&&(X?bt():de())};return Ce(S,oe),Ce([K,V],Q),Ce(A,()=>{je(()=>Me())}),Ce(Y,Ee,{immediate:!0}),ft(()=>{const X=m.value.input,ue=Number.parseFloat(bq(c.cssVarName("input-height"),X).value)-2;r=X.offsetHeight||ue,ms(X,Me)}),e({getCheckedNodes:Oe,cascaderPanelRef:we}),(X,ue)=>(I(),ce(p(Fs),{ref_key:"tooltipRef",ref:f,visible:C.value,teleported:X.teleported,"popper-class":[p(l).e("dropdown"),X.popperClass],"popper-options":s,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${p(l).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:de},{default:ee(()=>[ct((I(),H("div",{class:x(p(Se)),style:Ke(p(B)),onClick:ue[5]||(ue[5]=()=>le(p(D)?void 0:!0)),onKeydown:be,onMouseenter:ue[6]||(ue[6]=$e=>w.value=!0),onMouseleave:ue[7]||(ue[7]=$e=>w.value=!1)},[Z(p(hs),{ref_key:"input",ref:m,modelValue:E.value,"onUpdate:modelValue":ue[1]||(ue[1]=$e=>E.value=$e),placeholder:p(z),readonly:p(D),disabled:p(V),"validate-event":!1,size:p(U),class:x(p(l).is("focus",C.value)),onCompositionstart:Le,onCompositionupdate:Le,onCompositionend:Le,onFocus:Qe,onBlur:ut,onInput:it},{suffix:ee(()=>[p(ie)?(I(),ce(p(Ge),{key:"clear",class:x([p(c).e("icon"),"icon-circle-close"]),onClick:rt(Pe,["stop"])},{default:ee(()=>[Z(p(Ac))]),_:1},8,["class","onClick"])):(I(),ce(p(Ge),{key:"arrow-down",class:x(p(Te)),onClick:ue[0]||(ue[0]=rt($e=>le(),["stop"]))},{default:ee(()=>[Z(p($c))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class"]),p(R)?(I(),H("div",{key:0,ref_key:"tagWrapper",ref:g,class:x(p(l).e("tags"))},[(I(!0),H(Ye,null,Ot(A.value,$e=>(I(),ce(p(Om),{key:$e.key,type:X.tagType,size:p(W),hit:$e.hitState,closable:$e.closable,"disable-transitions":"",onClose:j=>He($e)},{default:ee(()=>[$e.isCollapseTag===!1?(I(),H("span",koe,Re($e.text),1)):(I(),ce(p(Fs),{key:1,disabled:C.value||!X.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:ee(()=>[G("span",null,Re($e.text),1)]),content:ee(()=>[G("div",{class:x(p(l).e("collapse-tags"))},[(I(!0),H(Ye,null,Ot($.value.slice(1),(j,te)=>(I(),H("div",{key:te,class:x(p(l).e("collapse-tag"))},[(I(),ce(p(Om),{key:j.key,class:"in-tooltip",type:X.tagType,size:p(W),hit:j.hitState,closable:j.closable,"disable-transitions":"",onClose:ye=>He(j)},{default:ee(()=>[G("span",null,Re(j.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),X.filterable&&!p(V)?ct((I(),H("input",{key:0,"onUpdate:modelValue":ue[2]||(ue[2]=$e=>k.value=$e),type:"text",class:x(p(l).e("search-input")),placeholder:p(Y)?"":p(P),onInput:ue[3]||(ue[3]=$e=>it(k.value,$e)),onClick:ue[4]||(ue[4]=rt($e=>le(!0),["stop"])),onKeydown:Bt(Be,["delete"]),onCompositionstart:Le,onCompositionupdate:Le,onCompositionend:Le},null,42,Toe)),[[EE,k.value]]):re("v-if",!0)],2)):re("v-if",!0)],38)),[[p(Tc),()=>le(!1),p(we)]])]),content:ee(()=>[ct(Z(p(bF),{ref_key:"panel",ref:y,modelValue:p(ne),"onUpdate:modelValue":ue[8]||(ue[8]=$e=>pn(ne)?ne.value=$e:null),options:X.options,props:i.props,border:!1,"render-label":X.$slots.default,onExpandChange:pe,onClose:ue[9]||(ue[9]=$e=>X.$nextTick(()=>le(!1)))},null,8,["modelValue","options","props","render-label"]),[[Vt,!S.value]]),X.filterable?ct((I(),ce(p(fl),{key:0,ref_key:"suggestionPanel",ref:_,tag:"ul",class:x(p(l).e("suggestion-panel")),"view-class":p(l).e("suggestion-list"),onKeydown:Ne},{default:ee(()=>[L.value.length?(I(!0),H(Ye,{key:0},Ot(L.value,$e=>(I(),H("li",{key:$e.uid,class:x([p(l).e("suggestion-item"),p(l).is("checked",$e.checked)]),tabindex:-1,onClick:j=>he($e)},[G("span",null,Re($e.text),1),$e.checked?(I(),ce(p(Ge),{key:0},{default:ee(()=>[Z(p(lg))]),_:1})):re("v-if",!0)],10,Ioe))),128)):me(X.$slots,"empty",{key:1},()=>[G("li",{class:x(p(l).e("empty-text"))},Re(p(u)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Vt,S.value]]):re("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var zv=Ve($oe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/cascader.vue"]]);zv.install=t=>{t.component(zv.name,zv)};const Aoe=zv,Loe=Aoe,Ooe=De({checked:{type:Boolean,default:!1}}),Poe={"update:checked":t=>fi(t),[bn]:t=>fi(t)},Roe=J({name:"ElCheckTag"}),Voe=J({...Roe,props:Ooe,emits:Poe,setup(t,{emit:e}){const n=t,i=_e("check-tag"),s=()=>{const o=!n.checked;e(bn,o),e("update:checked",o)};return(o,r)=>(I(),H("span",{class:x([p(i).b(),p(i).is("checked",o.checked)]),onClick:s},[me(o.$slots,"default")],2))}});var Foe=Ve(Voe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/check-tag/src/check-tag.vue"]]);const Doe=yt(Foe),Noe=De({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:ae([Number,Object]),default:()=>Mn({})},sm:{type:ae([Number,Object]),default:()=>Mn({})},md:{type:ae([Number,Object]),default:()=>Mn({})},lg:{type:ae([Number,Object]),default:()=>Mn({})},xl:{type:ae([Number,Object]),default:()=>Mn({})}}),Boe=J({name:"ElCol"}),zoe=J({...Boe,props:Noe,setup(t){const e=t,{gutter:n}=qe(zR,{gutter:T(()=>0)}),i=_e("col"),s=T(()=>{const r={};return n.value&&(r.paddingLeft=r.paddingRight=`${n.value/2}px`),r}),o=T(()=>{const r=[];return["span","offset","pull","push"].forEach(c=>{const u=e[c];st(u)&&(c==="span"?r.push(i.b(`${e[c]}`)):u>0&&r.push(i.b(`${c}-${e[c]}`)))}),["xs","sm","md","lg","xl"].forEach(c=>{st(e[c])?r.push(i.b(`${c}-${e[c]}`)):Et(e[c])&&Object.entries(e[c]).forEach(([u,d])=>{r.push(u!=="span"?i.b(`${c}-${u}-${d}`):i.b(`${c}-${d}`))})}),n.value&&r.push(i.is("guttered")),[i.b(),r]});return(r,a)=>(I(),ce(It(r.tag),{class:x(p(o)),style:Ke(p(s))},{default:ee(()=>[me(r.$slots,"default")]),_:3},8,["class","style"]))}});var Hoe=Ve(zoe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/col/src/col.vue"]]);const Uoe=yt(Hoe),s$=t=>typeof st(t),Woe=De({accordion:Boolean,modelValue:{type:ae([Array,String,Number]),default:()=>Mn([])}}),Goe={[wt]:s$,[bn]:s$},joe=(t,e)=>{const n=F(jp(t.modelValue)),i=o=>{n.value=o;const r=t.accordion?n.value[0]:n.value;e(wt,r),e(bn,r)},s=o=>{if(t.accordion)i([n.value[0]===o?"":o]);else{const r=[...n.value],a=r.indexOf(o);a>-1?r.splice(a,1):r.push(o),i(r)}};return Ce(()=>t.modelValue,()=>n.value=jp(t.modelValue),{deep:!0}),xt(VR,{activeNames:n,handleItemClick:s}),{activeNames:n,setActiveNames:i}},qoe=()=>{const t=_e("collapse");return{rootKls:T(()=>t.b())}},Koe=J({name:"ElCollapse"}),Yoe=J({...Koe,props:Woe,emits:Goe,setup(t,{expose:e,emit:n}){const i=t,{activeNames:s,setActiveNames:o}=joe(i,n),{rootKls:r}=qoe();return e({activeNames:s,setActiveNames:o}),(a,l)=>(I(),H("div",{class:x(p(r)),role:"tablist","aria-multiselectable":"true"},[me(a.$slots,"default")],2))}});var Zoe=Ve(Yoe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse.vue"]]);const Xoe=J({name:"ElCollapseTransition"}),Qoe=J({...Xoe,setup(t){const e=_e("collapse-transition"),n={beforeEnter(i){i.dataset||(i.dataset={}),i.dataset.oldPaddingTop=i.style.paddingTop,i.dataset.oldPaddingBottom=i.style.paddingBottom,i.style.maxHeight=0,i.style.paddingTop=0,i.style.paddingBottom=0},enter(i){i.dataset.oldOverflow=i.style.overflow,i.scrollHeight!==0?(i.style.maxHeight=`${i.scrollHeight}px`,i.style.paddingTop=i.dataset.oldPaddingTop,i.style.paddingBottom=i.dataset.oldPaddingBottom):(i.style.maxHeight=0,i.style.paddingTop=i.dataset.oldPaddingTop,i.style.paddingBottom=i.dataset.oldPaddingBottom),i.style.overflow="hidden"},afterEnter(i){i.style.maxHeight="",i.style.overflow=i.dataset.oldOverflow},beforeLeave(i){i.dataset||(i.dataset={}),i.dataset.oldPaddingTop=i.style.paddingTop,i.dataset.oldPaddingBottom=i.style.paddingBottom,i.dataset.oldOverflow=i.style.overflow,i.style.maxHeight=`${i.scrollHeight}px`,i.style.overflow="hidden"},leave(i){i.scrollHeight!==0&&(i.style.maxHeight=0,i.style.paddingTop=0,i.style.paddingBottom=0)},afterLeave(i){i.style.maxHeight="",i.style.overflow=i.dataset.oldOverflow,i.style.paddingTop=i.dataset.oldPaddingTop,i.style.paddingBottom=i.dataset.oldPaddingBottom}};return(i,s)=>(I(),ce(oi,kt({name:p(e).b()},DH(n)),{default:ee(()=>[me(i.$slots,"default")]),_:3},16,["name"]))}});var Hv=Ve(Qoe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);Hv.install=t=>{t.component(Hv.name,Hv)};const w_=Hv,Joe=w_,ere=De({title:{type:String,default:""},name:{type:ae([String,Number]),default:()=>d_()},disabled:Boolean}),tre=t=>{const e=qe(VR),n=F(!1),i=F(!1),s=F(d_()),o=T(()=>e==null?void 0:e.activeNames.value.includes(t.name));return{focusing:n,id:s,isActive:o,handleFocus:()=>{setTimeout(()=>{i.value?i.value=!1:n.value=!0},50)},handleHeaderClick:()=>{t.disabled||(e==null||e.handleItemClick(t.name),n.value=!1,i.value=!0)},handleEnterClick:()=>{e==null||e.handleItemClick(t.name)}}},nre=(t,{focusing:e,isActive:n,id:i})=>{const s=_e("collapse"),o=T(()=>[s.b("item"),s.is("active",p(n)),s.is("disabled",t.disabled)]),r=T(()=>[s.be("item","header"),s.is("active",p(n)),{focusing:p(e)&&!t.disabled}]),a=T(()=>[s.be("item","arrow"),s.is("active",p(n))]),l=T(()=>s.be("item","wrap")),c=T(()=>s.be("item","content")),u=T(()=>s.b(`content-${p(i)}`)),d=T(()=>s.b(`head-${p(i)}`));return{arrowKls:a,headKls:r,rootKls:o,itemWrapperKls:l,itemContentKls:c,scopedContentId:u,scopedHeadId:d}},ire=["aria-expanded","aria-controls","aria-describedby"],sre=["id","tabindex"],ore=["id","aria-hidden","aria-labelledby"],rre=J({name:"ElCollapseItem"}),are=J({...rre,props:ere,setup(t,{expose:e}){const n=t,{focusing:i,id:s,isActive:o,handleFocus:r,handleHeaderClick:a,handleEnterClick:l}=tre(n),{arrowKls:c,headKls:u,rootKls:d,itemWrapperKls:h,itemContentKls:f,scopedContentId:m,scopedHeadId:g}=nre(n,{focusing:i,isActive:o,id:s});return e({isActive:o}),(y,_)=>(I(),H("div",{class:x(p(d))},[G("div",{role:"tab","aria-expanded":p(o),"aria-controls":p(m),"aria-describedby":p(m)},[G("div",{id:p(g),class:x(p(u)),role:"button",tabindex:y.disabled?-1:0,onClick:_[0]||(_[0]=(...C)=>p(a)&&p(a)(...C)),onKeypress:_[1]||(_[1]=Bt(rt((...C)=>p(l)&&p(l)(...C),["stop","prevent"]),["space","enter"])),onFocus:_[2]||(_[2]=(...C)=>p(r)&&p(r)(...C)),onBlur:_[3]||(_[3]=C=>i.value=!1)},[me(y.$slots,"title",{},()=>[Ut(Re(y.title),1)]),Z(p(Ge),{class:x(p(c))},{default:ee(()=>[Z(p($s))]),_:1},8,["class"])],42,sre)],8,ire),Z(p(w_),null,{default:ee(()=>[ct(G("div",{id:p(m),class:x(p(h)),role:"tabpanel","aria-hidden":!p(o),"aria-labelledby":p(g)},[G("div",{class:x(p(f))},[me(y.$slots,"default")],2)],10,ore),[[Vt,p(o)]])]),_:3})],2))}});var _F=Ve(are,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse-item.vue"]]);const lre=yt(Zoe,{CollapseItem:_F}),cre=Nn(_F);let Cw=!1;function Pm(t,e){if(!Nt)return;const n=function(o){var r;(r=e.drag)==null||r.call(e,o)},i=function(o){var r;document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",i),document.onselectstart=null,document.ondragstart=null,Cw=!1,(r=e.end)==null||r.call(e,o)},s=function(o){var r;Cw||(o.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",n),document.addEventListener("mouseup",i),document.addEventListener("touchmove",n),document.addEventListener("touchend",i),Cw=!0,(r=e.start)==null||r.call(e,o))};t.addEventListener("mousedown",s),t.addEventListener("touchstart",s)}const ure=J({name:"ElColorAlphaSlider",props:{color:{type:Object,required:!0},vertical:{type:Boolean,default:!1}},setup(t){const e=_e("color-alpha-slider"),n=vt(),i=yn(),s=yn(),o=F(0),r=F(0),a=F();Ce(()=>t.color.get("alpha"),()=>{f()}),Ce(()=>t.color.value,()=>{f()});function l(){if(!i.value||t.vertical)return 0;const m=n.vnode.el,g=t.color.get("alpha");return m?Math.round(g*(m.offsetWidth-i.value.offsetWidth/2)/100):0}function c(){if(!i.value)return 0;const m=n.vnode.el;if(!t.vertical)return 0;const g=t.color.get("alpha");return m?Math.round(g*(m.offsetHeight-i.value.offsetHeight/2)/100):0}function u(){if(t.color&&t.color.value){const{r:m,g,b:y}=t.color.toRgb();return`linear-gradient(to right, rgba(${m}, ${g}, ${y}, 0) 0%, rgba(${m}, ${g}, ${y}, 1) 100%)`}return""}function d(m){m.target!==i.value&&h(m)}function h(m){if(!s.value||!i.value)return;const y=n.vnode.el.getBoundingClientRect(),{clientX:_,clientY:C}=HE(m);if(t.vertical){let w=C-y.top;w=Math.max(i.value.offsetHeight/2,w),w=Math.min(w,y.height-i.value.offsetHeight/2),t.color.set("alpha",Math.round((w-i.value.offsetHeight/2)/(y.height-i.value.offsetHeight)*100))}else{let w=_-y.left;w=Math.max(i.value.offsetWidth/2,w),w=Math.min(w,y.width-i.value.offsetWidth/2),t.color.set("alpha",Math.round((w-i.value.offsetWidth/2)/(y.width-i.value.offsetWidth)*100))}}function f(){o.value=l(),r.value=c(),a.value=u()}return ft(()=>{if(!s.value||!i.value)return;const m={drag:g=>{h(g)},end:g=>{h(g)}};Pm(s.value,m),Pm(i.value,m),f()}),{thumb:i,bar:s,thumbLeft:o,thumbTop:r,background:a,handleClick:d,update:f,ns:e}}});function dre(t,e,n,i,s,o){return I(),H("div",{class:x([t.ns.b(),t.ns.is("vertical",t.vertical)])},[G("div",{ref:"bar",class:x(t.ns.e("bar")),style:Ke({background:t.background}),onClick:e[0]||(e[0]=(...r)=>t.handleClick&&t.handleClick(...r))},null,6),G("div",{ref:"thumb",class:x(t.ns.e("thumb")),style:Ke({left:t.thumbLeft+"px",top:t.thumbTop+"px"})},null,6)],2)}var pre=Ve(ure,[["render",dre],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/alpha-slider.vue"]]);const hre=J({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(t){const e=_e("color-hue-slider"),n=vt(),i=F(),s=F(),o=F(0),r=F(0),a=T(()=>t.color.get("hue"));Ce(()=>a.value,()=>{h()});function l(f){f.target!==i.value&&c(f)}function c(f){if(!s.value||!i.value)return;const g=n.vnode.el.getBoundingClientRect(),{clientX:y,clientY:_}=HE(f);let C;if(t.vertical){let w=_-g.top;w=Math.min(w,g.height-i.value.offsetHeight/2),w=Math.max(i.value.offsetHeight/2,w),C=Math.round((w-i.value.offsetHeight/2)/(g.height-i.value.offsetHeight)*360)}else{let w=y-g.left;w=Math.min(w,g.width-i.value.offsetWidth/2),w=Math.max(i.value.offsetWidth/2,w),C=Math.round((w-i.value.offsetWidth/2)/(g.width-i.value.offsetWidth)*360)}t.color.set("hue",C)}function u(){if(!i.value)return 0;const f=n.vnode.el;if(t.vertical)return 0;const m=t.color.get("hue");return f?Math.round(m*(f.offsetWidth-i.value.offsetWidth/2)/360):0}function d(){if(!i.value)return 0;const f=n.vnode.el;if(!t.vertical)return 0;const m=t.color.get("hue");return f?Math.round(m*(f.offsetHeight-i.value.offsetHeight/2)/360):0}function h(){o.value=u(),r.value=d()}return ft(()=>{if(!s.value||!i.value)return;const f={drag:m=>{c(m)},end:m=>{c(m)}};Pm(s.value,f),Pm(i.value,f),h()}),{bar:s,thumb:i,thumbLeft:o,thumbTop:r,hueValue:a,handleClick:l,update:h,ns:e}}});function fre(t,e,n,i,s,o){return I(),H("div",{class:x([t.ns.b(),t.ns.is("vertical",t.vertical)])},[G("div",{ref:"bar",class:x(t.ns.e("bar")),onClick:e[0]||(e[0]=(...r)=>t.handleClick&&t.handleClick(...r))},null,2),G("div",{ref:"thumb",class:x(t.ns.e("thumb")),style:Ke({left:t.thumbLeft+"px",top:t.thumbTop+"px"})},null,6)],2)}var mre=Ve(hre,[["render",fre],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/hue-slider.vue"]]);const gre=De({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:Vs,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},predefine:{type:ae(Array)},validateEvent:{type:Boolean,default:!0}}),vre={[wt]:t=>at(t)||Gi(t),[bn]:t=>at(t)||Gi(t),activeChange:t=>at(t)||Gi(t)},wF=Symbol("colorPickerContextKey"),o$=function(t,e,n){return[t,e*n/((t=(2-e)*n)<1?t:2-t)||0,t/2]},yre=function(t){return typeof t=="string"&&t.includes(".")&&Number.parseFloat(t)===1},bre=function(t){return typeof t=="string"&&t.includes("%")},bp=function(t,e){yre(t)&&(t="100%");const n=bre(t);return t=Math.min(e,Math.max(0,Number.parseFloat(`${t}`))),n&&(t=Number.parseInt(`${t*e}`,10)/100),Math.abs(t-e)<1e-6?1:t%e/Number.parseFloat(e)},r$={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},Uv=t=>{t=Math.min(Math.round(t),255);const e=Math.floor(t/16),n=t%16;return`${r$[e]||e}${r$[n]||n}`},a$=function({r:t,g:e,b:n}){return Number.isNaN(+t)||Number.isNaN(+e)||Number.isNaN(+n)?"":`#${Uv(t)}${Uv(e)}${Uv(n)}`},Sw={A:10,B:11,C:12,D:13,E:14,F:15},zc=function(t){return t.length===2?(Sw[t[0].toUpperCase()]||+t[0])*16+(Sw[t[1].toUpperCase()]||+t[1]):Sw[t[1].toUpperCase()]||+t[1]},_re=function(t,e,n){e=e/100,n=n/100;let i=e;const s=Math.max(n,.01);n*=2,e*=n<=1?n:2-n,i*=s<=1?s:2-s;const o=(n+e)/2,r=n===0?2*i/(s+i):2*e/(n+e);return{h:t,s:r*100,v:o*100}},l$=(t,e,n)=>{t=bp(t,255),e=bp(e,255),n=bp(n,255);const i=Math.max(t,e,n),s=Math.min(t,e,n);let o;const r=i,a=i-s,l=i===0?0:a/i;if(i===s)o=0;else{switch(i){case t:{o=(e-n)/a+(e<n?6:0);break}case e:{o=(n-t)/a+2;break}case n:{o=(t-e)/a+4;break}}o/=6}return{h:o*360,s:l*100,v:r*100}},Rh=function(t,e,n){t=bp(t,360)*6,e=bp(e,100),n=bp(n,100);const i=Math.floor(t),s=t-i,o=n*(1-e),r=n*(1-s*e),a=n*(1-(1-s)*e),l=i%6,c=[n,r,o,o,a,n][l],u=[a,n,n,r,o,o][l],d=[o,o,a,n,n,r][l];return{r:Math.round(c*255),g:Math.round(u*255),b:Math.round(d*255)}};class Of{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const n in e)Pt(e,n)&&(this[n]=e[n]);e.value?this.fromString(e.value):this.doOnChange()}set(e,n){if(arguments.length===1&&typeof e=="object"){for(const i in e)Pt(e,i)&&this.set(i,e[i]);return}this[`_${e}`]=n,this.doOnChange()}get(e){return e==="alpha"?Math.floor(this[`_${e}`]):this[`_${e}`]}toRgb(){return Rh(this._hue,this._saturation,this._value)}fromString(e){if(!e){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const n=(i,s,o)=>{this._hue=Math.max(0,Math.min(360,i)),this._saturation=Math.max(0,Math.min(100,s)),this._value=Math.max(0,Math.min(100,o)),this.doOnChange()};if(e.includes("hsl")){const i=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(s=>s!=="").map((s,o)=>o>2?Number.parseFloat(s):Number.parseInt(s,10));if(i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3){const{h:s,s:o,v:r}=_re(i[0],i[1],i[2]);n(s,o,r)}}else if(e.includes("hsv")){const i=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(s=>s!=="").map((s,o)=>o>2?Number.parseFloat(s):Number.parseInt(s,10));i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3&&n(i[0],i[1],i[2])}else if(e.includes("rgb")){const i=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(s=>s!=="").map((s,o)=>o>2?Number.parseFloat(s):Number.parseInt(s,10));if(i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3){const{h:s,s:o,v:r}=l$(i[0],i[1],i[2]);n(s,o,r)}}else if(e.includes("#")){const i=e.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(i))return;let s,o,r;i.length===3?(s=zc(i[0]+i[0]),o=zc(i[1]+i[1]),r=zc(i[2]+i[2])):(i.length===6||i.length===8)&&(s=zc(i.slice(0,2)),o=zc(i.slice(2,4)),r=zc(i.slice(4,6))),i.length===8?this._alpha=zc(i.slice(6))/255*100:(i.length===3||i.length===6)&&(this._alpha=100);const{h:a,s:l,v:c}=l$(s,o,r);n(a,l,c)}}compare(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1}doOnChange(){const{_hue:e,_saturation:n,_value:i,_alpha:s,format:o}=this;if(this.enableAlpha)switch(o){case"hsl":{const r=o$(e,n/100,i/100);this.value=`hsla(${e}, ${Math.round(r[1]*100)}%, ${Math.round(r[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${e}, ${Math.round(n)}%, ${Math.round(i)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${a$(Rh(e,n,i))}${Uv(s*255/100)}`;break}default:{const{r,g:a,b:l}=Rh(e,n,i);this.value=`rgba(${r}, ${a}, ${l}, ${this.get("alpha")/100})`}}else switch(o){case"hsl":{const r=o$(e,n/100,i/100);this.value=`hsl(${e}, ${Math.round(r[1]*100)}%, ${Math.round(r[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${e}, ${Math.round(n)}%, ${Math.round(i)}%)`;break}case"rgb":{const{r,g:a,b:l}=Rh(e,n,i);this.value=`rgb(${r}, ${a}, ${l})`;break}default:this.value=a$(Rh(e,n,i))}}}const wre=J({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(t){const e=_e("color-predefine"),{currentColor:n}=qe(wF),i=F(o(t.colors,t.color));Ce(()=>n.value,r=>{const a=new Of;a.fromString(r),i.value.forEach(l=>{l.selected=a.compare(l)})}),Co(()=>{i.value=o(t.colors,t.color)});function s(r){t.color.fromString(t.colors[r])}function o(r,a){return r.map(l=>{const c=new Of;return c.enableAlpha=!0,c.format="rgba",c.fromString(l),c.selected=c.value===a.value,c})}return{rgbaColors:i,handleSelect:s,ns:e}}}),Cre=["onClick"];function Sre(t,e,n,i,s,o){return I(),H("div",{class:x(t.ns.b())},[G("div",{class:x(t.ns.e("colors"))},[(I(!0),H(Ye,null,Ot(t.rgbaColors,(r,a)=>(I(),H("div",{key:t.colors[a],class:x([t.ns.e("color-selector"),t.ns.is("alpha",r._alpha<100),{selected:r.selected}]),onClick:l=>t.handleSelect(a)},[G("div",{style:Ke({backgroundColor:r.value})},null,4)],10,Cre))),128))],2)],2)}var Ere=Ve(wre,[["render",Sre],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/predefine.vue"]]);const kre=J({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(t){const e=_e("color-svpanel"),n=vt(),i=F(0),s=F(0),o=F("hsl(0, 100%, 50%)"),r=T(()=>{const c=t.color.get("hue"),u=t.color.get("value");return{hue:c,value:u}});function a(){const c=t.color.get("saturation"),u=t.color.get("value"),d=n.vnode.el,{clientWidth:h,clientHeight:f}=d;s.value=c*h/100,i.value=(100-u)*f/100,o.value=`hsl(${t.color.get("hue")}, 100%, 50%)`}function l(c){const d=n.vnode.el.getBoundingClientRect(),{clientX:h,clientY:f}=HE(c);let m=h-d.left,g=f-d.top;m=Math.max(0,m),m=Math.min(m,d.width),g=Math.max(0,g),g=Math.min(g,d.height),s.value=m,i.value=g,t.color.set({saturation:m/d.width*100,value:100-g/d.height*100})}return Ce(()=>r.value,()=>{a()}),ft(()=>{Pm(n.vnode.el,{drag:c=>{l(c)},end:c=>{l(c)}}),a()}),{cursorTop:i,cursorLeft:s,background:o,colorValue:r,handleDrag:l,update:a,ns:e}}}),Tre=G("div",null,null,-1),Ire=[Tre];function xre(t,e,n,i,s,o){return I(),H("div",{class:x(t.ns.b()),style:Ke({backgroundColor:t.background})},[G("div",{class:x(t.ns.e("white"))},null,2),G("div",{class:x(t.ns.e("black"))},null,2),G("div",{class:x(t.ns.e("cursor")),style:Ke({top:t.cursorTop+"px",left:t.cursorLeft+"px"})},Ire,6)],6)}var Mre=Ve(kre,[["render",xre],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/sv-panel.vue"]]);const $re=["id","aria-label","aria-labelledby","aria-description","tabindex","onKeydown"],Are=J({name:"ElColorPicker"}),Lre=J({...Are,props:gre,emits:vre,setup(t,{expose:e,emit:n}){const i=t,{t:s}=Gt(),o=_e("color"),{formItem:r}=Ns(),a=gi(),l=eo(),{inputId:c,isLabeledByFormItem:u}=Oc(i,{formItemContext:r}),d=F(),h=F(),f=F(),m=F();let g=!0;const y=Yt(new Of({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue})),_=F(!1),C=F(!1),w=F(""),S=T(()=>!i.modelValue&&!C.value?"transparent":L(y,i.showAlpha)),E=T(()=>!i.modelValue&&!C.value?"":y.value),k=T(()=>u.value?void 0:i.label||s("el.colorpicker.defaultLabel")),A=T(()=>u.value?r==null?void 0:r.labelId:void 0),$=T(()=>[o.b("picker"),o.is("disabled",l.value),o.bm("picker",a.value)]);function L(D,N){if(!(D instanceof Of))throw new TypeError("color should be instance of _color Class");const{r:K,g:ie,b:Y}=D.toRgb();return N?`rgba(${K}, ${ie}, ${Y}, ${D.get("alpha")/100})`:`rgb(${K}, ${ie}, ${Y})`}function O(D){_.value=D}const B=Rs(O,100);function V(){B(!1),P()}function P(){je(()=>{i.modelValue?y.fromString(i.modelValue):(y.value="",je(()=>{C.value=!1}))})}function z(){l.value||B(!_.value)}function U(){y.fromString(w.value)}function W(){const D=y.value;n(wt,D),n("change",D),i.validateEvent&&(r==null||r.validate("change").catch(N=>void 0)),B(!1),je(()=>{const N=new Of({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue});y.compare(N)||P()})}function R(){B(!1),n(wt,null),n("change",null),i.modelValue!==null&&i.validateEvent&&(r==null||r.validate("change").catch(D=>void 0)),P()}return ft(()=>{i.modelValue&&(w.value=E.value)}),Ce(()=>i.modelValue,D=>{D?D&&D!==y.value&&(g=!1,y.fromString(D)):C.value=!1}),Ce(()=>E.value,D=>{w.value=D,g&&n("activeChange",D),g=!0}),Ce(()=>y.value,()=>{!i.modelValue&&!C.value&&(C.value=!0)}),Ce(()=>_.value,()=>{je(()=>{var D,N,K;(D=d.value)==null||D.update(),(N=h.value)==null||N.update(),(K=f.value)==null||K.update()})}),xt(wF,{currentColor:E}),e({color:y}),(D,N)=>(I(),ce(p(Fs),{ref_key:"popper",ref:m,visible:_.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[p(o).be("picker","panel"),p(o).b("dropdown"),D.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:`${p(o).namespace.value}-zoom-in-top`,persistent:""},{content:ee(()=>[ct((I(),H("div",null,[G("div",{class:x(p(o).be("dropdown","main-wrapper"))},[Z(mre,{ref_key:"hue",ref:d,class:"hue-slider",color:p(y),vertical:""},null,8,["color"]),Z(Mre,{ref:"svPanel",color:p(y)},null,8,["color"])],2),D.showAlpha?(I(),ce(pre,{key:0,ref_key:"alpha",ref:f,color:p(y)},null,8,["color"])):re("v-if",!0),D.predefine?(I(),ce(Ere,{key:1,ref:"predefine",color:p(y),colors:D.predefine},null,8,["color","colors"])):re("v-if",!0),G("div",{class:x(p(o).be("dropdown","btns"))},[G("span",{class:x(p(o).be("dropdown","value"))},[Z(p(hs),{modelValue:w.value,"onUpdate:modelValue":N[0]||(N[0]=K=>w.value=K),"validate-event":!1,size:"small",onKeyup:Bt(U,["enter"]),onBlur:U},null,8,["modelValue","onKeyup"])],2),Z(p(os),{class:x(p(o).be("dropdown","link-btn")),text:"",size:"small",onClick:R},{default:ee(()=>[Ut(Re(p(s)("el.colorpicker.clear")),1)]),_:1},8,["class"]),Z(p(os),{plain:"",size:"small",class:x(p(o).be("dropdown","btn")),onClick:W},{default:ee(()=>[Ut(Re(p(s)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)])),[[p(Tc),V]])]),default:ee(()=>[G("div",{id:p(c),class:x(p($)),role:"button","aria-label":p(k),"aria-labelledby":p(A),"aria-description":p(s)("el.colorpicker.description",{color:D.modelValue||""}),tabindex:D.tabindex,onKeydown:Bt(z,["enter"])},[p(l)?(I(),H("div",{key:0,class:x(p(o).be("picker","mask"))},null,2)):re("v-if",!0),G("div",{class:x(p(o).be("picker","trigger")),onClick:z},[G("span",{class:x([p(o).be("picker","color"),p(o).is("alpha",D.showAlpha)])},[G("span",{class:x(p(o).be("picker","color-inner")),style:Ke({backgroundColor:p(S)})},[ct(Z(p(Ge),{class:x([p(o).be("picker","icon"),p(o).is("icon-arrow-down")])},{default:ee(()=>[Z(p($c))]),_:1},8,["class"]),[[Vt,D.modelValue||C.value]]),!D.modelValue&&!C.value?(I(),ce(p(Ge),{key:0,class:x([p(o).be("picker","empty"),p(o).is("icon-close")])},{default:ee(()=>[Z(p(vr))]),_:1},8,["class"])):re("v-if",!0)],6)],2)],2)],42,$re)]),_:1},8,["visible","popper-class","transition"]))}});var Ore=Ve(Lre,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/color-picker.vue"]]);const Pre=yt(Ore),F1={},Rre=De({a11y:{type:Boolean,default:!0},locale:{type:ae(Object)},size:Vs,button:{type:ae(Object)},experimentalFeatures:{type:ae(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:ae(Object)},zIndex:Number,namespace:{type:String,default:"el"}}),Vre=J({name:"ElConfigProvider",props:Rre,setup(t,{slots:e}){Ce(()=>t.message,i=>{Object.assign(F1,i??{})},{immediate:!0,deep:!0});const n=KR(t);return()=>me(e,"default",{config:n==null?void 0:n.value})}}),Fre=yt(Vre),Dre=J({name:"ElContainer"}),Nre=J({...Dre,props:{direction:{type:String}},setup(t){const e=t,n=Ki(),i=_e("container"),s=T(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:n&&n.default?n.default().some(r=>{const a=r.type.name;return a==="ElHeader"||a==="ElFooter"}):!1);return(o,r)=>(I(),H("section",{class:x([p(i).b(),p(i).is("vertical",p(s))])},[me(o.$slots,"default")],2))}});var Bre=Ve(Nre,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/container.vue"]]);const zre=J({name:"ElAside"}),Hre=J({...zre,props:{width:{type:String,default:null}},setup(t){const e=t,n=_e("aside"),i=T(()=>e.width?n.cssVarBlock({width:e.width}):{});return(s,o)=>(I(),H("aside",{class:x(p(n).b()),style:Ke(p(i))},[me(s.$slots,"default")],6))}});var CF=Ve(Hre,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/aside.vue"]]);const Ure=J({name:"ElFooter"}),Wre=J({...Ure,props:{height:{type:String,default:null}},setup(t){const e=t,n=_e("footer"),i=T(()=>e.height?n.cssVarBlock({height:e.height}):{});return(s,o)=>(I(),H("footer",{class:x(p(n).b()),style:Ke(p(i))},[me(s.$slots,"default")],6))}});var SF=Ve(Wre,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/footer.vue"]]);const Gre=J({name:"ElHeader"}),jre=J({...Gre,props:{height:{type:String,default:null}},setup(t){const e=t,n=_e("header"),i=T(()=>e.height?n.cssVarBlock({height:e.height}):{});return(s,o)=>(I(),H("header",{class:x(p(n).b()),style:Ke(p(i))},[me(s.$slots,"default")],6))}});var EF=Ve(jre,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/header.vue"]]);const qre=J({name:"ElMain"}),Kre=J({...qre,setup(t){const e=_e("main");return(n,i)=>(I(),H("main",{class:x(p(e).b())},[me(n.$slots,"default")],2))}});var kF=Ve(Kre,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/main.vue"]]);const Yre=yt(Bre,{Aside:CF,Footer:SF,Header:EF,Main:kF}),Zre=Nn(CF),Xre=Nn(SF),Qre=Nn(EF),Jre=Nn(kF);var D1={},eae={get exports(){return D1},set exports(t){D1=t}};(function(t,e){(function(n,i){t.exports=i()})(ml,function(){return function(n,i){var s=i.prototype,o=s.format;s.format=function(r){var a=this,l=this.$locale();if(!this.isValid())return o.bind(this)(r);var c=this.$utils(),u=(r||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(d){switch(d){case"Q":return Math.ceil((a.$M+1)/3);case"Do":return l.ordinal(a.$D);case"gggg":return a.weekYear();case"GGGG":return a.isoWeekYear();case"wo":return l.ordinal(a.week(),"W");case"w":case"ww":return c.s(a.week(),d==="w"?1:2,"0");case"W":case"WW":return c.s(a.isoWeek(),d==="W"?1:2,"0");case"k":case"kk":return c.s(String(a.$H===0?24:a.$H),d==="k"?1:2,"0");case"X":return Math.floor(a.$d.getTime()/1e3);case"x":return a.$d.getTime();case"z":return"["+a.offsetName()+"]";case"zzz":return"["+a.offsetName("long")+"]";default:return d}});return o.bind(this)(u)}}})})(eae);const tae=D1;var N1={},nae={get exports(){return N1},set exports(t){N1=t}};(function(t,e){(function(n,i){t.exports=i()})(ml,function(){var n="week",i="year";return function(s,o,r){var a=o.prototype;a.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var c=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var u=r(this).startOf(i).add(1,i).date(c),d=r(this).endOf(n);if(u.isBefore(d))return 1}var h=r(this).startOf(i).date(c).startOf(n).subtract(1,"millisecond"),f=this.diff(h,n,!0);return f<0?r(this).startOf("week").week():Math.ceil(f)},a.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(nae);const iae=N1;var B1={},sae={get exports(){return B1},set exports(t){B1=t}};(function(t,e){(function(n,i){t.exports=i()})(ml,function(){return function(n,i){i.prototype.weekYear=function(){var s=this.month(),o=this.week(),r=this.year();return o===1&&s===11?r+1:s===0&&o>=52?r-1:r}}})})(sae);const oae=B1;var z1={},rae={get exports(){return z1},set exports(t){z1=t}};(function(t,e){(function(n,i){t.exports=i()})(ml,function(){return function(n,i,s){i.prototype.dayOfYear=function(o){var r=Math.round((s(this).startOf("day")-s(this).startOf("year"))/864e5)+1;return o==null?r:this.add(o-r,"day")}}})})(rae);const aae=z1;var H1={},lae={get exports(){return H1},set exports(t){H1=t}};(function(t,e){(function(n,i){t.exports=i()})(ml,function(){return function(n,i){i.prototype.isSameOrAfter=function(s,o){return this.isSame(s,o)||this.isAfter(s,o)}}})})(lae);const cae=H1;var U1={},uae={get exports(){return U1},set exports(t){U1=t}};(function(t,e){(function(n,i){t.exports=i()})(ml,function(){return function(n,i){i.prototype.isSameOrBefore=function(s,o){return this.isSame(s,o)||this.isBefore(s,o)}}})})(uae);const dae=U1,pae=De({type:{type:ae(String),default:"date"}}),hae=["date","dates","year","month","week","range"],bk=De({disabledDate:{type:ae(Function)},date:{type:ae(Object),required:!0},minDate:{type:ae(Object)},maxDate:{type:ae(Object)},parsedValue:{type:ae([Object,Array])},rangeState:{type:ae(Object),default:()=>({endDate:null,selecting:!1})}}),TF=De({type:{type:ae(String),required:!0,values:lQ}}),IF=De({unlinkPanels:Boolean,parsedValue:{type:ae(Array)}}),xF=t=>({type:String,values:hae,default:t}),fae=De({...TF,parsedValue:{type:ae([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),mae=De({...bk,cellClassName:{type:ae(Function)},showWeekNumber:Boolean,selectionMode:xF("date")}),W1=t=>{if(!ze(t))return!1;const[e,n]=t;return mt.isDayjs(e)&&mt.isDayjs(n)&&e.isSameOrBefore(n)},MF=(t,{lang:e,unit:n,unlinkPanels:i})=>{let s;if(ze(t)){let[o,r]=t.map(a=>mt(a).locale(e));return i||(r=o.add(1,n)),[o,r]}else t?s=mt(t):s=mt();return s=s.locale(e),[s,s.add(1,n)]},gae=(t,e,{columnIndexOffset:n,startDate:i,nextEndDate:s,now:o,unit:r,relativeDateGetter:a,setCellMetadata:l,setRowMetadata:c})=>{for(let u=0;u<t.row;u++){const d=e[u];for(let h=0;h<t.column;h++){let f=d[h+n];f||(f={row:u,column:h,type:"normal",inRange:!1,start:!1,end:!1});const m=u*t.column+h,g=a(m);f.dayjs=g,f.date=g.toDate(),f.timestamp=g.valueOf(),f.type="normal",f.inRange=!!(i&&g.isSameOrAfter(i,r)&&s&&g.isSameOrBefore(s,r))||!!(i&&g.isSameOrBefore(i,r)&&s&&g.isSameOrAfter(s,r)),i!=null&&i.isSameOrAfter(s)?(f.start=!!s&&g.isSame(s,r),f.end=i&&g.isSame(i,r)):(f.start=!!i&&g.isSame(i,r),f.end=!!s&&g.isSame(s,r)),g.isSame(o,r)&&(f.type="today"),l==null||l(f,{rowIndex:u,columnIndex:h}),d[h+n]=f}c==null||c(d)}},vae=De({cell:{type:ae(Object)}});var yae=J({name:"ElDatePickerCell",props:vae,setup(t){const e=_e("date-table-cell"),{slots:n}=qe(XE);return()=>{const{cell:i}=t;if(n.default){const s=n.default(i).filter(o=>o.patchFlag!==-2&&o.type.toString()!=="Symbol(Comment)");if(s.length)return s}return Z("div",{class:e.b()},[Z("span",{class:e.e("text")},[i==null?void 0:i.text])])}}});const bae=["aria-label","onMousedown"],_ae={key:0,scope:"col"},wae=["aria-label"],Cae=["aria-current","aria-selected","tabindex"],Sae=J({__name:"basic-date-table",props:mae,emits:["changerange","pick","select"],setup(t,{expose:e,emit:n}){const i=t,s=_e("date-table"),{t:o,lang:r}=Gt(),a=F(),l=F(),c=F(),u=F(),d=F([[],[],[],[],[],[]]);let h=!1;const f=i.date.$locale().weekStart||7,m=i.date.locale("en").localeData().weekdaysShort().map(Y=>Y.toLowerCase()),g=T(()=>f>3?7-f:-f),y=T(()=>{const Y=i.date.startOf("month");return Y.subtract(Y.day()||7,"day")}),_=T(()=>m.concat(m).slice(f,f+7)),C=T(()=>jP($.value).some(Y=>Y.isCurrent)),w=T(()=>{const Y=i.date.startOf("month"),ne=Y.day()||7,we=Y.daysInMonth(),Se=Y.subtract(1,"month").daysInMonth();return{startOfMonthDay:ne,dateCountOfMonth:we,dateCountOfLastMonth:Se}}),S=T(()=>i.selectionMode==="dates"?Ga(i.parsedValue):[]),E=(Y,{count:ne,rowIndex:we,columnIndex:Se})=>{const{startOfMonthDay:Te,dateCountOfMonth:le,dateCountOfLastMonth:oe}=p(w),de=p(g);if(we>=0&&we<=1){const ve=Te+de<0?7+Te+de:Te+de;if(Se+we*7>=ve)return Y.text=ne,!0;Y.text=oe-(ve-Se%7)+1+we*7,Y.type="prev-month"}else return ne<=le?Y.text=ne:(Y.text=ne-le,Y.type="next-month"),!0;return!1},k=(Y,{columnIndex:ne,rowIndex:we},Se)=>{const{disabledDate:Te,cellClassName:le}=i,oe=p(S),de=E(Y,{count:Se,rowIndex:we,columnIndex:ne}),ve=Y.dayjs.toDate();return Y.selected=oe.find(He=>He.valueOf()===Y.dayjs.valueOf()),Y.isSelected=!!Y.selected,Y.isCurrent=B(Y),Y.disabled=Te==null?void 0:Te(ve),Y.customClass=le==null?void 0:le(ve),de},A=Y=>{if(i.selectionMode==="week"){const[ne,we]=i.showWeekNumber?[1,7]:[0,6],Se=ie(Y[ne+1]);Y[ne].inRange=Se,Y[ne].start=Se,Y[we].inRange=Se,Y[we].end=Se}},$=T(()=>{const{minDate:Y,maxDate:ne,rangeState:we,showWeekNumber:Se}=i,Te=g.value,le=d.value,oe="day";let de=1;if(Se)for(let ve=0;ve<6;ve++)le[ve][0]||(le[ve][0]={type:"week",text:y.value.add(ve*7+1,oe).week()});return gae({row:6,column:7},le,{startDate:Y,columnIndexOffset:Se?1:0,nextEndDate:we.endDate||ne||we.selecting&&Y||null,now:mt().locale(p(r)).startOf(oe),unit:oe,relativeDateGetter:ve=>y.value.add(ve-Te,oe),setCellMetadata:(...ve)=>{k(...ve,de)&&(de+=1)},setRowMetadata:A}),le});Ce(()=>i.date,async()=>{var Y,ne;(Y=a.value)!=null&&Y.contains(document.activeElement)&&(await je(),(ne=l.value)==null||ne.focus())});const L=async()=>{var Y;(Y=l.value)==null||Y.focus()},O=(Y="")=>["normal","today"].includes(Y),B=Y=>i.selectionMode==="date"&&O(Y.type)&&V(Y,i.parsedValue),V=(Y,ne)=>ne?mt(ne).locale(r.value).isSame(i.date.date(Number(Y.text)),"day"):!1,P=Y=>{const ne=[];return O(Y.type)&&!Y.disabled?(ne.push("available"),Y.type==="today"&&ne.push("today")):ne.push(Y.type),B(Y)&&ne.push("current"),Y.inRange&&(O(Y.type)||i.selectionMode==="week")&&(ne.push("in-range"),Y.start&&ne.push("start-date"),Y.end&&ne.push("end-date")),Y.disabled&&ne.push("disabled"),Y.selected&&ne.push("selected"),Y.customClass&&ne.push(Y.customClass),ne.join(" ")},z=(Y,ne)=>{const we=Y*7+(ne-(i.showWeekNumber?1:0))-g.value;return y.value.add(we,"day")},U=Y=>{var ne;if(!i.rangeState.selecting)return;let we=Y.target;if(we.tagName==="SPAN"&&(we=(ne=we.parentNode)==null?void 0:ne.parentNode),we.tagName==="DIV"&&(we=we.parentNode),we.tagName!=="TD")return;const Se=we.parentNode.rowIndex-1,Te=we.cellIndex;$.value[Se][Te].disabled||(Se!==c.value||Te!==u.value)&&(c.value=Se,u.value=Te,n("changerange",{selecting:!0,endDate:z(Se,Te)}))},W=Y=>!C.value&&(Y==null?void 0:Y.text)===1&&Y.type==="normal"||Y.isCurrent,R=Y=>{h||C.value||i.selectionMode!=="date"||K(Y,!0)},D=Y=>{Y.target.closest("td")&&(h=!0)},N=Y=>{Y.target.closest("td")&&(h=!1)},K=(Y,ne=!1)=>{const we=Y.target.closest("td");if(!we)return;const Se=we.parentNode.rowIndex-1,Te=we.cellIndex,le=$.value[Se][Te];if(le.disabled||le.type==="week")return;const oe=z(Se,Te);if(i.selectionMode==="range")!i.rangeState.selecting||!i.minDate?(n("pick",{minDate:oe,maxDate:null}),n("select",!0)):(oe>=i.minDate?n("pick",{minDate:i.minDate,maxDate:oe}):n("pick",{minDate:oe,maxDate:i.minDate}),n("select",!1));else if(i.selectionMode==="date")n("pick",oe,ne);else if(i.selectionMode==="week"){const de=oe.week(),ve=`${oe.year()}w${de}`;n("pick",{year:oe.year(),week:de,value:ve,date:oe.startOf("week")})}else if(i.selectionMode==="dates"){const de=le.selected?Ga(i.parsedValue).filter(ve=>(ve==null?void 0:ve.valueOf())!==oe.valueOf()):Ga(i.parsedValue).concat([oe]);n("pick",de)}},ie=Y=>{if(i.selectionMode!=="week")return!1;let ne=i.date.startOf("day");if(Y.type==="prev-month"&&(ne=ne.subtract(1,"month")),Y.type==="next-month"&&(ne=ne.add(1,"month")),ne=ne.date(Number.parseInt(Y.text,10)),i.parsedValue&&!Array.isArray(i.parsedValue)){const we=(i.parsedValue.day()-f+7)%7-1;return i.parsedValue.subtract(we,"day").isSame(ne,"day")}return!1};return e({focus:L}),(Y,ne)=>(I(),H("table",{role:"grid","aria-label":p(o)("el.datepicker.dateTablePrompt"),cellspacing:"0",cellpadding:"0",class:x([p(s).b(),{"is-week-mode":Y.selectionMode==="week"}]),onClick:K,onMousemove:U,onMousedown:rt(D,["prevent"]),onMouseup:N},[G("tbody",{ref_key:"tbodyRef",ref:a},[G("tr",null,[Y.showWeekNumber?(I(),H("th",_ae,Re(p(o)("el.datepicker.week")),1)):re("v-if",!0),(I(!0),H(Ye,null,Ot(p(_),(we,Se)=>(I(),H("th",{key:Se,scope:"col","aria-label":p(o)("el.datepicker.weeksFull."+we)},Re(p(o)("el.datepicker.weeks."+we)),9,wae))),128))]),(I(!0),H(Ye,null,Ot(p($),(we,Se)=>(I(),H("tr",{key:Se,class:x([p(s).e("row"),{current:ie(we[1])}])},[(I(!0),H(Ye,null,Ot(we,(Te,le)=>(I(),H("td",{key:`${Se}.${le}`,ref_for:!0,ref:oe=>W(Te)&&(l.value=oe),class:x(P(Te)),"aria-current":Te.isCurrent?"date":void 0,"aria-selected":Te.isCurrent,tabindex:W(Te)?0:-1,onFocus:R},[Z(p(yae),{cell:Te},null,8,["cell"])],42,Cae))),128))],2))),128))],512)],42,bae))}});var G1=Ve(Sae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-date-table.vue"]]);const Eae=De({...bk,selectionMode:xF("month")}),kae=["aria-label"],Tae=["aria-selected","aria-label","tabindex","onKeydown"],Iae={class:"cell"},xae=J({__name:"basic-month-table",props:Eae,emits:["changerange","pick","select"],setup(t,{expose:e,emit:n}){const i=t,s=(S,E,k)=>{const A=mt().locale(k).startOf("month").month(E).year(S),$=A.daysInMonth();return hc($).map(L=>A.add(L,"day").toDate())},o=_e("month-table"),{t:r,lang:a}=Gt(),l=F(),c=F(),u=F(i.date.locale("en").localeData().monthsShort().map(S=>S.toLowerCase())),d=F([[],[],[]]),h=F(),f=F(),m=T(()=>{var S,E;const k=d.value,A=mt().locale(a.value).startOf("month");for(let $=0;$<3;$++){const L=k[$];for(let O=0;O<4;O++){const B=L[O]||(L[O]={row:$,column:O,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});B.type="normal";const V=$*4+O,P=i.date.startOf("year").month(V),z=i.rangeState.endDate||i.maxDate||i.rangeState.selecting&&i.minDate||null;B.inRange=!!(i.minDate&&P.isSameOrAfter(i.minDate,"month")&&z&&P.isSameOrBefore(z,"month"))||!!(i.minDate&&P.isSameOrBefore(i.minDate,"month")&&z&&P.isSameOrAfter(z,"month")),(S=i.minDate)!=null&&S.isSameOrAfter(z)?(B.start=!!(z&&P.isSame(z,"month")),B.end=i.minDate&&P.isSame(i.minDate,"month")):(B.start=!!(i.minDate&&P.isSame(i.minDate,"month")),B.end=!!(z&&P.isSame(z,"month"))),A.isSame(P)&&(B.type="today"),B.text=V,B.disabled=((E=i.disabledDate)==null?void 0:E.call(i,P.toDate()))||!1}}return k}),g=()=>{var S;(S=c.value)==null||S.focus()},y=S=>{const E={},k=i.date.year(),A=new Date,$=S.text;return E.disabled=i.disabledDate?s(k,$,a.value).every(i.disabledDate):!1,E.current=Ga(i.parsedValue).findIndex(L=>mt.isDayjs(L)&&L.year()===k&&L.month()===$)>=0,E.today=A.getFullYear()===k&&A.getMonth()===$,S.inRange&&(E["in-range"]=!0,S.start&&(E["start-date"]=!0),S.end&&(E["end-date"]=!0)),E},_=S=>{const E=i.date.year(),k=S.text;return Ga(i.date).findIndex(A=>A.year()===E&&A.month()===k)>=0},C=S=>{var E;if(!i.rangeState.selecting)return;let k=S.target;if(k.tagName==="A"&&(k=(E=k.parentNode)==null?void 0:E.parentNode),k.tagName==="DIV"&&(k=k.parentNode),k.tagName!=="TD")return;const A=k.parentNode.rowIndex,$=k.cellIndex;m.value[A][$].disabled||(A!==h.value||$!==f.value)&&(h.value=A,f.value=$,n("changerange",{selecting:!0,endDate:i.date.startOf("year").month(A*4+$)}))},w=S=>{var E;const k=(E=S.target)==null?void 0:E.closest("td");if((k==null?void 0:k.tagName)!=="TD"||ur(k,"disabled"))return;const A=k.cellIndex,L=k.parentNode.rowIndex*4+A,O=i.date.startOf("year").month(L);i.selectionMode==="range"?i.rangeState.selecting?(i.minDate&&O>=i.minDate?n("pick",{minDate:i.minDate,maxDate:O}):n("pick",{minDate:O,maxDate:i.minDate}),n("select",!1)):(n("pick",{minDate:O,maxDate:null}),n("select",!0)):n("pick",L)};return Ce(()=>i.date,async()=>{var S,E;(S=l.value)!=null&&S.contains(document.activeElement)&&(await je(),(E=c.value)==null||E.focus())}),e({focus:g}),(S,E)=>(I(),H("table",{role:"grid","aria-label":p(r)("el.datepicker.monthTablePrompt"),class:x(p(o).b()),onClick:w,onMousemove:C},[G("tbody",{ref_key:"tbodyRef",ref:l},[(I(!0),H(Ye,null,Ot(p(m),(k,A)=>(I(),H("tr",{key:A},[(I(!0),H(Ye,null,Ot(k,($,L)=>(I(),H("td",{key:L,ref_for:!0,ref:O=>_($)&&(c.value=O),class:x(y($)),"aria-selected":`${_($)}`,"aria-label":p(r)(`el.datepicker.month${+$.text+1}`),tabindex:_($)?0:-1,onKeydown:[Bt(rt(w,["prevent","stop"]),["space"]),Bt(rt(w,["prevent","stop"]),["enter"])]},[G("div",null,[G("span",Iae,Re(p(r)("el.datepicker.months."+u.value[$.text])),1)])],42,Tae))),128))]))),128))],512)],42,kae))}});var j1=Ve(xae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-month-table.vue"]]);const{date:Mae,disabledDate:$ae,parsedValue:Aae}=bk,Lae=De({date:Mae,disabledDate:$ae,parsedValue:Aae}),Oae=["aria-label"],Pae=["aria-selected","tabindex","onKeydown"],Rae={class:"cell"},Vae={key:1},Fae=J({__name:"basic-year-table",props:Lae,emits:["pick"],setup(t,{expose:e,emit:n}){const i=t,s=(g,y)=>{const _=mt(String(g)).locale(y).startOf("year"),w=_.endOf("year").dayOfYear();return hc(w).map(S=>_.add(S,"day").toDate())},o=_e("year-table"),{t:r,lang:a}=Gt(),l=F(),c=F(),u=T(()=>Math.floor(i.date.year()/10)*10),d=()=>{var g;(g=c.value)==null||g.focus()},h=g=>{const y={},_=mt().locale(a.value);return y.disabled=i.disabledDate?s(g,a.value).every(i.disabledDate):!1,y.current=Ga(i.parsedValue).findIndex(C=>C.year()===g)>=0,y.today=_.year()===g,y},f=g=>g===u.value&&i.date.year()<u.value&&i.date.year()>u.value+9||Ga(i.date).findIndex(y=>y.year()===g)>=0,m=g=>{const _=g.target.closest("td");if(_&&_.textContent){if(ur(_,"disabled"))return;const C=_.textContent||_.innerText;n("pick",Number(C))}};return Ce(()=>i.date,async()=>{var g,y;(g=l.value)!=null&&g.contains(document.activeElement)&&(await je(),(y=c.value)==null||y.focus())}),e({focus:d}),(g,y)=>(I(),H("table",{role:"grid","aria-label":p(r)("el.datepicker.yearTablePrompt"),class:x(p(o).b()),onClick:m},[G("tbody",{ref_key:"tbodyRef",ref:l},[(I(),H(Ye,null,Ot(3,(_,C)=>G("tr",{key:C},[(I(),H(Ye,null,Ot(4,(w,S)=>(I(),H(Ye,{key:C+"_"+S},[C*4+S<10?(I(),H("td",{key:0,ref_for:!0,ref:E=>f(p(u)+C*4+S)&&(c.value=E),class:x(["available",h(p(u)+C*4+S)]),"aria-selected":`${f(p(u)+C*4+S)}`,tabindex:f(p(u)+C*4+S)?0:-1,onKeydown:[Bt(rt(m,["prevent","stop"]),["space"]),Bt(rt(m,["prevent","stop"]),["enter"])]},[G("span",Rae,Re(p(u)+C*4+S),1)],42,Pae)):(I(),H("td",Vae))],64))),64))])),64))],512)],10,Oae))}});var Dae=Ve(Fae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-year-table.vue"]]);const Nae=["onClick"],Bae=["aria-label"],zae=["aria-label"],Hae=["aria-label"],Uae=["aria-label"],Wae=J({__name:"panel-date-pick",props:fae,emits:["pick","set-picker-option","panel-change"],setup(t,{emit:e}){const n=t,i=(X,ue,$e)=>!0,s=_e("picker-panel"),o=_e("date-picker"),r=vh(),a=Ki(),{t:l,lang:c}=Gt(),u=qe("EP_PICKER_BASE"),d=qe(h_),{shortcuts:h,disabledDate:f,cellClassName:m,defaultTime:g,arrowControl:y}=u.props,_=On(u.props,"defaultValue"),C=F(),w=F(mt().locale(c.value)),S=F(!1),E=T(()=>mt(g).locale(c.value)),k=T(()=>w.value.month()),A=T(()=>w.value.year()),$=F([]),L=F(null),O=F(null),B=X=>$.value.length>0?i(X,$.value,n.format||"HH:mm:ss"):!0,V=X=>g&&!Q.value&&!S.value?E.value.year(X.year()).month(X.month()).date(X.date()):Te.value?X.millisecond(0):X.startOf("day"),P=(X,...ue)=>{if(!X)e("pick",X,...ue);else if(ze(X)){const $e=X.map(V);e("pick",$e,...ue)}else e("pick",V(X),...ue);L.value=null,O.value=null,S.value=!1},z=(X,ue)=>{if(K.value==="date"){X=X;let $e=n.parsedValue?n.parsedValue.year(X.year()).month(X.month()).date(X.date()):X;B($e)||($e=$.value[0][0].year(X.year()).month(X.month()).date(X.date())),w.value=$e,P($e,Te.value||ue)}else K.value==="week"?P(X.date):K.value==="dates"&&P(X,!0)},U=X=>{const ue=X?"add":"subtract";w.value=w.value[ue](1,"month"),it("month")},W=X=>{const ue=w.value,$e=X?"add":"subtract";w.value=R.value==="year"?ue[$e](10,"year"):ue[$e](1,"year"),it("year")},R=F("date"),D=T(()=>{const X=l("el.datepicker.year");if(R.value==="year"){const ue=Math.floor(A.value/10)*10;return X?`${ue} ${X} - ${ue+9} ${X}`:`${ue} - ${ue+9}`}return`${A.value} ${X}`}),N=X=>{const ue=ot(X.value)?X.value():X.value;if(ue){P(mt(ue).locale(c.value));return}X.onClick&&X.onClick({attrs:r,slots:a,emit:e})},K=T(()=>{const{type:X}=n;return["week","month","year","dates"].includes(X)?X:"date"}),ie=T(()=>K.value==="date"?R.value:K.value),Y=T(()=>!!h.length),ne=async X=>{w.value=w.value.startOf("month").month(X),K.value==="month"?P(w.value,!1):(R.value="date",["month","year","date","week"].includes(K.value)&&(P(w.value,!0),await je(),Qe())),it("month")},we=async X=>{K.value==="year"?(w.value=w.value.startOf("year").year(X),P(w.value,!1)):(w.value=w.value.year(X),R.value="month",["month","year","date","week"].includes(K.value)&&(P(w.value,!0),await je(),Qe())),it("year")},Se=async X=>{R.value=X,await je(),Qe()},Te=T(()=>n.type==="datetime"||n.type==="datetimerange"),le=T(()=>Te.value||K.value==="dates"),oe=()=>{if(K.value==="dates")P(n.parsedValue);else{let X=n.parsedValue;if(!X){const ue=mt(g).locale(c.value),$e=Be();X=ue.year($e.year()).month($e.month()).date($e.date())}w.value=X,P(X)}},de=()=>{const ue=mt().locale(c.value).toDate();S.value=!0,(!f||!f(ue))&&B(ue)&&(w.value=mt().locale(c.value),P(w.value))},ve=T(()=>UV(n.format)),He=T(()=>HV(n.format)),Q=T(()=>{if(O.value)return O.value;if(!(!n.parsedValue&&!_.value))return(n.parsedValue||w.value).format(ve.value)}),se=T(()=>{if(L.value)return L.value;if(!(!n.parsedValue&&!_.value))return(n.parsedValue||w.value).format(He.value)}),fe=F(!1),Me=()=>{fe.value=!0},Oe=()=>{fe.value=!1},pe=X=>({hour:X.hour(),minute:X.minute(),second:X.second(),year:X.year(),month:X.month(),date:X.date()}),Le=(X,ue,$e)=>{const{hour:j,minute:te,second:ye}=pe(X),Ie=n.parsedValue?n.parsedValue.hour(j).minute(te).second(ye):X;w.value=Ie,P(w.value,!0),$e||(fe.value=ue)},be=X=>{const ue=mt(X,ve.value).locale(c.value);if(ue.isValid()&&B(ue)){const{year:$e,month:j,date:te}=pe(w.value);w.value=ue.year($e).month(j).date(te),O.value=null,fe.value=!1,P(w.value,!0)}},Pe=X=>{const ue=mt(X,He.value).locale(c.value);if(ue.isValid()){if(f&&f(ue.toDate()))return;const{hour:$e,minute:j,second:te}=pe(w.value);w.value=ue.hour($e).minute(j).second(te),L.value=null,P(w.value,!0)}},Ee=X=>mt.isDayjs(X)&&X.isValid()&&(f?!f(X.toDate()):!0),he=X=>K.value==="dates"?X.map(ue=>ue.format(n.format)):X.format(n.format),Ne=X=>mt(X,n.format).locale(c.value),Be=()=>{const X=mt(_.value).locale(c.value);if(!_.value){const ue=E.value;return mt().hour(ue.hour()).minute(ue.minute()).second(ue.second()).locale(c.value)}return X},Qe=async()=>{var X;["week","month","year","date"].includes(K.value)&&((X=C.value)==null||X.focus(),K.value==="week"&&bt(Xe.down))},ut=X=>{const{code:ue}=X;[Xe.up,Xe.down,Xe.left,Xe.right,Xe.home,Xe.end,Xe.pageUp,Xe.pageDown].includes(ue)&&(bt(ue),X.stopPropagation(),X.preventDefault()),[Xe.enter,Xe.space].includes(ue)&&L.value===null&&O.value===null&&(X.preventDefault(),P(w.value,!1))},bt=X=>{var ue;const{up:$e,down:j,left:te,right:ye,home:Ie,end:Ct,pageUp:an,pageDown:pi}=Xe,Pi={year:{[$e]:-4,[j]:4,[te]:-1,[ye]:1,offset:(jt,xe)=>jt.setFullYear(jt.getFullYear()+xe)},month:{[$e]:-4,[j]:4,[te]:-1,[ye]:1,offset:(jt,xe)=>jt.setMonth(jt.getMonth()+xe)},week:{[$e]:-1,[j]:1,[te]:-1,[ye]:1,offset:(jt,xe)=>jt.setDate(jt.getDate()+xe*7)},date:{[$e]:-7,[j]:7,[te]:-1,[ye]:1,[Ie]:jt=>-jt.getDay(),[Ct]:jt=>-jt.getDay()+6,[an]:jt=>-new Date(jt.getFullYear(),jt.getMonth(),0).getDate(),[pi]:jt=>new Date(jt.getFullYear(),jt.getMonth()+1,0).getDate(),offset:(jt,xe)=>jt.setDate(jt.getDate()+xe)}},un=w.value.toDate();for(;Math.abs(w.value.diff(un,"year",!0))<1;){const jt=Pi[ie.value];if(!jt)return;if(jt.offset(un,ot(jt[X])?jt[X](un):(ue=jt[X])!=null?ue:0),f&&f(un))break;const xe=mt(un).locale(c.value);w.value=xe,e("pick",xe,!0);break}},it=X=>{e("panel-change",w.value.toDate(),X,R.value)};return Ce(()=>K.value,X=>{if(["month","year"].includes(X)){R.value=X;return}R.value="date"},{immediate:!0}),Ce(()=>R.value,()=>{d==null||d.updatePopper()}),Ce(()=>_.value,X=>{X&&(w.value=Be())},{immediate:!0}),Ce(()=>n.parsedValue,X=>{if(X){if(K.value==="dates"||Array.isArray(X))return;w.value=X}else w.value=Be()},{immediate:!0}),e("set-picker-option",["isValidValue",Ee]),e("set-picker-option",["formatToString",he]),e("set-picker-option",["parseUserInput",Ne]),e("set-picker-option",["handleFocusPicker",Qe]),(X,ue)=>(I(),H("div",{class:x([p(s).b(),p(o).b(),{"has-sidebar":X.$slots.sidebar||p(Y),"has-time":p(Te)}])},[G("div",{class:x(p(s).e("body-wrapper"))},[me(X.$slots,"sidebar",{class:x(p(s).e("sidebar"))}),p(Y)?(I(),H("div",{key:0,class:x(p(s).e("sidebar"))},[(I(!0),H(Ye,null,Ot(p(h),($e,j)=>(I(),H("button",{key:j,type:"button",class:x(p(s).e("shortcut")),onClick:te=>N($e)},Re($e.text),11,Nae))),128))],2)):re("v-if",!0),G("div",{class:x(p(s).e("body"))},[p(Te)?(I(),H("div",{key:0,class:x(p(o).e("time-header"))},[G("span",{class:x(p(o).e("editor-wrap"))},[Z(p(hs),{placeholder:p(l)("el.datepicker.selectDate"),"model-value":p(se),size:"small","validate-event":!1,onInput:ue[0]||(ue[0]=$e=>L.value=$e),onChange:Pe},null,8,["placeholder","model-value"])],2),ct((I(),H("span",{class:x(p(o).e("editor-wrap"))},[Z(p(hs),{placeholder:p(l)("el.datepicker.selectTime"),"model-value":p(Q),size:"small","validate-event":!1,onFocus:Me,onInput:ue[1]||(ue[1]=$e=>O.value=$e),onChange:be},null,8,["placeholder","model-value"]),Z(p(Yy),{visible:fe.value,format:p(ve),"time-arrow-control":p(y),"parsed-value":w.value,onPick:Le},null,8,["visible","format","time-arrow-control","parsed-value"])],2)),[[p(Tc),Oe]])],2)):re("v-if",!0),ct(G("div",{class:x([p(o).e("header"),(R.value==="year"||R.value==="month")&&p(o).e("header--bordered")])},[G("span",{class:x(p(o).e("prev-btn"))},[G("button",{type:"button","aria-label":p(l)("el.datepicker.prevYear"),class:x(["d-arrow-left",p(s).e("icon-btn")]),onClick:ue[2]||(ue[2]=$e=>W(!1))},[Z(p(Ge),null,{default:ee(()=>[Z(p(qp))]),_:1})],10,Bae),ct(G("button",{type:"button","aria-label":p(l)("el.datepicker.prevMonth"),class:x([p(s).e("icon-btn"),"arrow-left"]),onClick:ue[3]||(ue[3]=$e=>U(!1))},[Z(p(Ge),null,{default:ee(()=>[Z(p(Cc))]),_:1})],10,zae),[[Vt,R.value==="date"]])],2),G("span",{role:"button",class:x(p(o).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:ue[4]||(ue[4]=Bt($e=>Se("year"),["enter"])),onClick:ue[5]||(ue[5]=$e=>Se("year"))},Re(p(D)),35),ct(G("span",{role:"button","aria-live":"polite",tabindex:"0",class:x([p(o).e("header-label"),{active:R.value==="month"}]),onKeydown:ue[6]||(ue[6]=Bt($e=>Se("month"),["enter"])),onClick:ue[7]||(ue[7]=$e=>Se("month"))},Re(p(l)(`el.datepicker.month${p(k)+1}`)),35),[[Vt,R.value==="date"]]),G("span",{class:x(p(o).e("next-btn"))},[ct(G("button",{type:"button","aria-label":p(l)("el.datepicker.nextMonth"),class:x([p(s).e("icon-btn"),"arrow-right"]),onClick:ue[8]||(ue[8]=$e=>U(!0))},[Z(p(Ge),null,{default:ee(()=>[Z(p($s))]),_:1})],10,Hae),[[Vt,R.value==="date"]]),G("button",{type:"button","aria-label":p(l)("el.datepicker.nextYear"),class:x([p(s).e("icon-btn"),"d-arrow-right"]),onClick:ue[9]||(ue[9]=$e=>W(!0))},[Z(p(Ge),null,{default:ee(()=>[Z(p(Kp))]),_:1})],10,Uae)],2)],2),[[Vt,R.value!=="time"]]),G("div",{class:x(p(s).e("content")),onKeydown:ut},[R.value==="date"?(I(),ce(G1,{key:0,ref_key:"currentViewRef",ref:C,"selection-mode":p(K),date:w.value,"parsed-value":X.parsedValue,"disabled-date":p(f),"cell-class-name":p(m),onPick:z},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):re("v-if",!0),R.value==="year"?(I(),ce(Dae,{key:1,ref_key:"currentViewRef",ref:C,date:w.value,"disabled-date":p(f),"parsed-value":X.parsedValue,onPick:we},null,8,["date","disabled-date","parsed-value"])):re("v-if",!0),R.value==="month"?(I(),ce(j1,{key:2,ref_key:"currentViewRef",ref:C,date:w.value,"parsed-value":X.parsedValue,"disabled-date":p(f),onPick:ne},null,8,["date","parsed-value","disabled-date"])):re("v-if",!0)],34)],2)],2),ct(G("div",{class:x(p(s).e("footer"))},[ct(Z(p(os),{text:"",size:"small",class:x(p(s).e("link-btn")),onClick:de},{default:ee(()=>[Ut(Re(p(l)("el.datepicker.now")),1)]),_:1},8,["class"]),[[Vt,p(K)!=="dates"]]),Z(p(os),{plain:"",size:"small",class:x(p(s).e("link-btn")),onClick:oe},{default:ee(()=>[Ut(Re(p(l)("el.datepicker.confirm")),1)]),_:1},8,["class"])],2),[[Vt,p(le)&&R.value==="date"]])],2))}});var Gae=Ve(Wae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-pick.vue"]]);const jae=De({...TF,...IF}),qae=t=>{const{emit:e}=vt(),n=vh(),i=Ki();return o=>{const r=ot(o.value)?o.value():o.value;if(r){e("pick",[mt(r[0]).locale(t.value),mt(r[1]).locale(t.value)]);return}o.onClick&&o.onClick({attrs:n,slots:i,emit:e})}},$F=(t,{defaultValue:e,leftDate:n,rightDate:i,unit:s,onParsedValueChanged:o})=>{const{emit:r}=vt(),{pickerNs:a}=qe(XE),l=_e("date-range-picker"),{t:c,lang:u}=Gt(),d=qae(u),h=F(),f=F(),m=F({endDate:null,selecting:!1}),g=w=>{m.value=w},y=(w=!1)=>{const S=p(h),E=p(f);W1([S,E])&&r("pick",[S,E],w)},_=w=>{m.value.selecting=w,w||(m.value.endDate=null)},C=()=>{const[w,S]=MF(p(e),{lang:p(u),unit:s,unlinkPanels:t.unlinkPanels});h.value=void 0,f.value=void 0,n.value=w,i.value=S};return Ce(e,w=>{w&&C()},{immediate:!0}),Ce(()=>t.parsedValue,w=>{if(ze(w)&&w.length===2){const[S,E]=w;h.value=S,n.value=S,f.value=E,o(p(h),p(f))}else C()},{immediate:!0}),{minDate:h,maxDate:f,rangeState:m,lang:u,ppNs:a,drpNs:l,handleChangeRange:g,handleRangeConfirm:y,handleShortcutClick:d,onSelect:_,t:c}},Kae=["onClick"],Yae=["disabled"],Zae=["disabled"],Xae=["disabled"],Qae=["disabled"],Gg="month",Jae=J({__name:"panel-date-range",props:jae,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(t,{emit:e}){const n=t,i=qe("EP_PICKER_BASE"),{disabledDate:s,cellClassName:o,format:r,defaultTime:a,arrowControl:l,clearable:c}=i.props,u=On(i.props,"shortcuts"),d=On(i.props,"defaultValue"),{lang:h}=Gt(),f=F(mt().locale(h.value)),m=F(mt().locale(h.value).add(1,Gg)),{minDate:g,maxDate:y,rangeState:_,ppNs:C,drpNs:w,handleChangeRange:S,handleRangeConfirm:E,handleShortcutClick:k,onSelect:A,t:$}=$F(n,{defaultValue:d,leftDate:f,rightDate:m,unit:Gg,onParsedValueChanged:j}),L=F({min:null,max:null}),O=F({min:null,max:null}),B=T(()=>`${f.value.year()} ${$("el.datepicker.year")} ${$(`el.datepicker.month${f.value.month()+1}`)}`),V=T(()=>`${m.value.year()} ${$("el.datepicker.year")} ${$(`el.datepicker.month${m.value.month()+1}`)}`),P=T(()=>f.value.year()),z=T(()=>f.value.month()),U=T(()=>m.value.year()),W=T(()=>m.value.month()),R=T(()=>!!u.value.length),D=T(()=>L.value.min!==null?L.value.min:g.value?g.value.format(ne.value):""),N=T(()=>L.value.max!==null?L.value.max:y.value||g.value?(y.value||g.value).format(ne.value):""),K=T(()=>O.value.min!==null?O.value.min:g.value?g.value.format(Y.value):""),ie=T(()=>O.value.max!==null?O.value.max:y.value||g.value?(y.value||g.value).format(Y.value):""),Y=T(()=>UV(r)),ne=T(()=>HV(r)),we=()=>{f.value=f.value.subtract(1,"year"),n.unlinkPanels||(m.value=f.value.add(1,"month")),Q("year")},Se=()=>{f.value=f.value.subtract(1,"month"),n.unlinkPanels||(m.value=f.value.add(1,"month")),Q("month")},Te=()=>{n.unlinkPanels?m.value=m.value.add(1,"year"):(f.value=f.value.add(1,"year"),m.value=f.value.add(1,"month")),Q("year")},le=()=>{n.unlinkPanels?m.value=m.value.add(1,"month"):(f.value=f.value.add(1,"month"),m.value=f.value.add(1,"month")),Q("month")},oe=()=>{f.value=f.value.add(1,"year"),Q("year")},de=()=>{f.value=f.value.add(1,"month"),Q("month")},ve=()=>{m.value=m.value.subtract(1,"year"),Q("year")},He=()=>{m.value=m.value.subtract(1,"month"),Q("month")},Q=te=>{e("panel-change",[f.value.toDate(),m.value.toDate()],te)},se=T(()=>{const te=(z.value+1)%12,ye=z.value+1>=12?1:0;return n.unlinkPanels&&new Date(P.value+ye,te)<new Date(U.value,W.value)}),fe=T(()=>n.unlinkPanels&&U.value*12+W.value-(P.value*12+z.value+1)>=12),Me=T(()=>!(g.value&&y.value&&!_.value.selecting&&W1([g.value,y.value]))),Oe=T(()=>n.type==="datetime"||n.type==="datetimerange"),pe=(te,ye)=>{if(te)return a?mt(a[ye]||a).locale(h.value).year(te.year()).month(te.month()).date(te.date()):te},Le=(te,ye=!0)=>{const Ie=te.minDate,Ct=te.maxDate,an=pe(Ie,0),pi=pe(Ct,1);y.value===pi&&g.value===an||(e("calendar-change",[Ie.toDate(),Ct&&Ct.toDate()]),y.value=pi,g.value=an,!(!ye||Oe.value)&&E())},be=F(!1),Pe=F(!1),Ee=()=>{be.value=!1},he=()=>{Pe.value=!1},Ne=(te,ye)=>{L.value[ye]=te;const Ie=mt(te,ne.value).locale(h.value);if(Ie.isValid()){if(s&&s(Ie.toDate()))return;ye==="min"?(f.value=Ie,g.value=(g.value||f.value).year(Ie.year()).month(Ie.month()).date(Ie.date()),n.unlinkPanels||(m.value=Ie.add(1,"month"),y.value=g.value.add(1,"month"))):(m.value=Ie,y.value=(y.value||m.value).year(Ie.year()).month(Ie.month()).date(Ie.date()),n.unlinkPanels||(f.value=Ie.subtract(1,"month"),g.value=y.value.subtract(1,"month")))}},Be=(te,ye)=>{L.value[ye]=null},Qe=(te,ye)=>{O.value[ye]=te;const Ie=mt(te,Y.value).locale(h.value);Ie.isValid()&&(ye==="min"?(be.value=!0,g.value=(g.value||f.value).hour(Ie.hour()).minute(Ie.minute()).second(Ie.second()),(!y.value||y.value.isBefore(g.value))&&(y.value=g.value)):(Pe.value=!0,y.value=(y.value||m.value).hour(Ie.hour()).minute(Ie.minute()).second(Ie.second()),m.value=y.value,y.value&&y.value.isBefore(g.value)&&(g.value=y.value)))},ut=(te,ye)=>{O.value[ye]=null,ye==="min"?(f.value=g.value,be.value=!1):(m.value=y.value,Pe.value=!1)},bt=(te,ye,Ie)=>{O.value.min||(te&&(f.value=te,g.value=(g.value||f.value).hour(te.hour()).minute(te.minute()).second(te.second())),Ie||(be.value=ye),(!y.value||y.value.isBefore(g.value))&&(y.value=g.value,m.value=te))},it=(te,ye,Ie)=>{O.value.max||(te&&(m.value=te,y.value=(y.value||m.value).hour(te.hour()).minute(te.minute()).second(te.second())),Ie||(Pe.value=ye),y.value&&y.value.isBefore(g.value)&&(g.value=y.value))},X=()=>{f.value=MF(p(d),{lang:p(h),unit:"month",unlinkPanels:n.unlinkPanels})[0],m.value=f.value.add(1,"month"),e("pick",null)},ue=te=>ze(te)?te.map(ye=>ye.format(r)):te.format(r),$e=te=>ze(te)?te.map(ye=>mt(ye,r).locale(h.value)):mt(te,r).locale(h.value);function j(te,ye){if(n.unlinkPanels&&ye){const Ie=(te==null?void 0:te.year())||0,Ct=(te==null?void 0:te.month())||0,an=ye.year(),pi=ye.month();m.value=Ie===an&&Ct===pi?ye.add(1,Gg):ye}else m.value=f.value.add(1,Gg),ye&&(m.value=m.value.hour(ye.hour()).minute(ye.minute()).second(ye.second()))}return e("set-picker-option",["isValidValue",W1]),e("set-picker-option",["parseUserInput",$e]),e("set-picker-option",["formatToString",ue]),e("set-picker-option",["handleClear",X]),(te,ye)=>(I(),H("div",{class:x([p(C).b(),p(w).b(),{"has-sidebar":te.$slots.sidebar||p(R),"has-time":p(Oe)}])},[G("div",{class:x(p(C).e("body-wrapper"))},[me(te.$slots,"sidebar",{class:x(p(C).e("sidebar"))}),p(R)?(I(),H("div",{key:0,class:x(p(C).e("sidebar"))},[(I(!0),H(Ye,null,Ot(p(u),(Ie,Ct)=>(I(),H("button",{key:Ct,type:"button",class:x(p(C).e("shortcut")),onClick:an=>p(k)(Ie)},Re(Ie.text),11,Kae))),128))],2)):re("v-if",!0),G("div",{class:x(p(C).e("body"))},[p(Oe)?(I(),H("div",{key:0,class:x(p(w).e("time-header"))},[G("span",{class:x(p(w).e("editors-wrap"))},[G("span",{class:x(p(w).e("time-picker-wrap"))},[Z(p(hs),{size:"small",disabled:p(_).selecting,placeholder:p($)("el.datepicker.startDate"),class:x(p(w).e("editor")),"model-value":p(D),"validate-event":!1,onInput:ye[0]||(ye[0]=Ie=>Ne(Ie,"min")),onChange:ye[1]||(ye[1]=Ie=>Be(Ie,"min"))},null,8,["disabled","placeholder","class","model-value"])],2),ct((I(),H("span",{class:x(p(w).e("time-picker-wrap"))},[Z(p(hs),{size:"small",class:x(p(w).e("editor")),disabled:p(_).selecting,placeholder:p($)("el.datepicker.startTime"),"model-value":p(K),"validate-event":!1,onFocus:ye[2]||(ye[2]=Ie=>be.value=!0),onInput:ye[3]||(ye[3]=Ie=>Qe(Ie,"min")),onChange:ye[4]||(ye[4]=Ie=>ut(Ie,"min"))},null,8,["class","disabled","placeholder","model-value"]),Z(p(Yy),{visible:be.value,format:p(Y),"datetime-role":"start","time-arrow-control":p(l),"parsed-value":f.value,onPick:bt},null,8,["visible","format","time-arrow-control","parsed-value"])],2)),[[p(Tc),Ee]])],2),G("span",null,[Z(p(Ge),null,{default:ee(()=>[Z(p($s))]),_:1})]),G("span",{class:x([p(w).e("editors-wrap"),"is-right"])},[G("span",{class:x(p(w).e("time-picker-wrap"))},[Z(p(hs),{size:"small",class:x(p(w).e("editor")),disabled:p(_).selecting,placeholder:p($)("el.datepicker.endDate"),"model-value":p(N),readonly:!p(g),"validate-event":!1,onInput:ye[5]||(ye[5]=Ie=>Ne(Ie,"max")),onChange:ye[6]||(ye[6]=Ie=>Be(Ie,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"])],2),ct((I(),H("span",{class:x(p(w).e("time-picker-wrap"))},[Z(p(hs),{size:"small",class:x(p(w).e("editor")),disabled:p(_).selecting,placeholder:p($)("el.datepicker.endTime"),"model-value":p(ie),readonly:!p(g),"validate-event":!1,onFocus:ye[7]||(ye[7]=Ie=>p(g)&&(Pe.value=!0)),onInput:ye[8]||(ye[8]=Ie=>Qe(Ie,"max")),onChange:ye[9]||(ye[9]=Ie=>ut(Ie,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"]),Z(p(Yy),{"datetime-role":"end",visible:Pe.value,format:p(Y),"time-arrow-control":p(l),"parsed-value":m.value,onPick:it},null,8,["visible","format","time-arrow-control","parsed-value"])],2)),[[p(Tc),he]])],2)],2)):re("v-if",!0),G("div",{class:x([[p(C).e("content"),p(w).e("content")],"is-left"])},[G("div",{class:x(p(w).e("header"))},[G("button",{type:"button",class:x([p(C).e("icon-btn"),"d-arrow-left"]),onClick:we},[Z(p(Ge),null,{default:ee(()=>[Z(p(qp))]),_:1})],2),G("button",{type:"button",class:x([p(C).e("icon-btn"),"arrow-left"]),onClick:Se},[Z(p(Ge),null,{default:ee(()=>[Z(p(Cc))]),_:1})],2),te.unlinkPanels?(I(),H("button",{key:0,type:"button",disabled:!p(fe),class:x([[p(C).e("icon-btn"),{"is-disabled":!p(fe)}],"d-arrow-right"]),onClick:oe},[Z(p(Ge),null,{default:ee(()=>[Z(p(Kp))]),_:1})],10,Yae)):re("v-if",!0),te.unlinkPanels?(I(),H("button",{key:1,type:"button",disabled:!p(se),class:x([[p(C).e("icon-btn"),{"is-disabled":!p(se)}],"arrow-right"]),onClick:de},[Z(p(Ge),null,{default:ee(()=>[Z(p($s))]),_:1})],10,Zae)):re("v-if",!0),G("div",null,Re(p(B)),1)],2),Z(G1,{"selection-mode":"range",date:f.value,"min-date":p(g),"max-date":p(y),"range-state":p(_),"disabled-date":p(s),"cell-class-name":p(o),onChangerange:p(S),onPick:Le,onSelect:p(A)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),G("div",{class:x([[p(C).e("content"),p(w).e("content")],"is-right"])},[G("div",{class:x(p(w).e("header"))},[te.unlinkPanels?(I(),H("button",{key:0,type:"button",disabled:!p(fe),class:x([[p(C).e("icon-btn"),{"is-disabled":!p(fe)}],"d-arrow-left"]),onClick:ve},[Z(p(Ge),null,{default:ee(()=>[Z(p(qp))]),_:1})],10,Xae)):re("v-if",!0),te.unlinkPanels?(I(),H("button",{key:1,type:"button",disabled:!p(se),class:x([[p(C).e("icon-btn"),{"is-disabled":!p(se)}],"arrow-left"]),onClick:He},[Z(p(Ge),null,{default:ee(()=>[Z(p(Cc))]),_:1})],10,Qae)):re("v-if",!0),G("button",{type:"button",class:x([p(C).e("icon-btn"),"d-arrow-right"]),onClick:Te},[Z(p(Ge),null,{default:ee(()=>[Z(p(Kp))]),_:1})],2),G("button",{type:"button",class:x([p(C).e("icon-btn"),"arrow-right"]),onClick:le},[Z(p(Ge),null,{default:ee(()=>[Z(p($s))]),_:1})],2),G("div",null,Re(p(V)),1)],2),Z(G1,{"selection-mode":"range",date:m.value,"min-date":p(g),"max-date":p(y),"range-state":p(_),"disabled-date":p(s),"cell-class-name":p(o),onChangerange:p(S),onPick:Le,onSelect:p(A)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),p(Oe)?(I(),H("div",{key:0,class:x(p(C).e("footer"))},[p(c)?(I(),ce(p(os),{key:0,text:"",size:"small",class:x(p(C).e("link-btn")),onClick:X},{default:ee(()=>[Ut(Re(p($)("el.datepicker.clear")),1)]),_:1},8,["class"])):re("v-if",!0),Z(p(os),{plain:"",size:"small",class:x(p(C).e("link-btn")),disabled:p(Me),onClick:ye[10]||(ye[10]=Ie=>p(E)(!1))},{default:ee(()=>[Ut(Re(p($)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2)):re("v-if",!0)],2))}});var ele=Ve(Jae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-range.vue"]]);const tle=De({...IF}),nle=["pick","set-picker-option"],ile=({unlinkPanels:t,leftDate:e,rightDate:n})=>{const{t:i}=Gt(),s=()=>{e.value=e.value.subtract(1,"year"),t.value||(n.value=n.value.subtract(1,"year"))},o=()=>{t.value||(e.value=e.value.add(1,"year")),n.value=n.value.add(1,"year")},r=()=>{e.value=e.value.add(1,"year")},a=()=>{n.value=n.value.subtract(1,"year")},l=T(()=>`${e.value.year()} ${i("el.datepicker.year")}`),c=T(()=>`${n.value.year()} ${i("el.datepicker.year")}`),u=T(()=>e.value.year()),d=T(()=>n.value.year()===e.value.year()?e.value.year()+1:n.value.year());return{leftPrevYear:s,rightNextYear:o,leftNextYear:r,rightPrevYear:a,leftLabel:l,rightLabel:c,leftYear:u,rightYear:d}},sle=["onClick"],ole=["disabled"],rle=["disabled"],jg="year",ale=J({name:"DatePickerMonthRange"}),lle=J({...ale,props:tle,emits:nle,setup(t,{emit:e}){const n=t,{lang:i}=Gt(),s=qe("EP_PICKER_BASE"),{shortcuts:o,disabledDate:r,format:a}=s.props,l=On(s.props,"defaultValue"),c=F(mt().locale(i.value)),u=F(mt().locale(i.value).add(1,jg)),{minDate:d,maxDate:h,rangeState:f,ppNs:m,drpNs:g,handleChangeRange:y,handleRangeConfirm:_,handleShortcutClick:C,onSelect:w}=$F(n,{defaultValue:l,leftDate:c,rightDate:u,unit:jg,onParsedValueChanged:W}),S=T(()=>!!o.length),{leftPrevYear:E,rightNextYear:k,leftNextYear:A,rightPrevYear:$,leftLabel:L,rightLabel:O,leftYear:B,rightYear:V}=ile({unlinkPanels:On(n,"unlinkPanels"),leftDate:c,rightDate:u}),P=T(()=>n.unlinkPanels&&V.value>B.value+1),z=(R,D=!0)=>{const N=R.minDate,K=R.maxDate;h.value===K&&d.value===N||(h.value=K,d.value=N,D&&_())},U=R=>R.map(D=>D.format(a));function W(R,D){if(n.unlinkPanels&&D){const N=(R==null?void 0:R.year())||0,K=D.year();u.value=N===K?D.add(1,jg):D}else u.value=c.value.add(1,jg)}return e("set-picker-option",["formatToString",U]),(R,D)=>(I(),H("div",{class:x([p(m).b(),p(g).b(),{"has-sidebar":Boolean(R.$slots.sidebar)||p(S)}])},[G("div",{class:x(p(m).e("body-wrapper"))},[me(R.$slots,"sidebar",{class:x(p(m).e("sidebar"))}),p(S)?(I(),H("div",{key:0,class:x(p(m).e("sidebar"))},[(I(!0),H(Ye,null,Ot(p(o),(N,K)=>(I(),H("button",{key:K,type:"button",class:x(p(m).e("shortcut")),onClick:ie=>p(C)(N)},Re(N.text),11,sle))),128))],2)):re("v-if",!0),G("div",{class:x(p(m).e("body"))},[G("div",{class:x([[p(m).e("content"),p(g).e("content")],"is-left"])},[G("div",{class:x(p(g).e("header"))},[G("button",{type:"button",class:x([p(m).e("icon-btn"),"d-arrow-left"]),onClick:D[0]||(D[0]=(...N)=>p(E)&&p(E)(...N))},[Z(p(Ge),null,{default:ee(()=>[Z(p(qp))]),_:1})],2),R.unlinkPanels?(I(),H("button",{key:0,type:"button",disabled:!p(P),class:x([[p(m).e("icon-btn"),{[p(m).is("disabled")]:!p(P)}],"d-arrow-right"]),onClick:D[1]||(D[1]=(...N)=>p(A)&&p(A)(...N))},[Z(p(Ge),null,{default:ee(()=>[Z(p(Kp))]),_:1})],10,ole)):re("v-if",!0),G("div",null,Re(p(L)),1)],2),Z(j1,{"selection-mode":"range",date:c.value,"min-date":p(d),"max-date":p(h),"range-state":p(f),"disabled-date":p(r),onChangerange:p(y),onPick:z,onSelect:p(w)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),G("div",{class:x([[p(m).e("content"),p(g).e("content")],"is-right"])},[G("div",{class:x(p(g).e("header"))},[R.unlinkPanels?(I(),H("button",{key:0,type:"button",disabled:!p(P),class:x([[p(m).e("icon-btn"),{"is-disabled":!p(P)}],"d-arrow-left"]),onClick:D[2]||(D[2]=(...N)=>p($)&&p($)(...N))},[Z(p(Ge),null,{default:ee(()=>[Z(p(qp))]),_:1})],10,rle)):re("v-if",!0),G("button",{type:"button",class:x([p(m).e("icon-btn"),"d-arrow-right"]),onClick:D[3]||(D[3]=(...N)=>p(k)&&p(k)(...N))},[Z(p(Ge),null,{default:ee(()=>[Z(p(Kp))]),_:1})],2),G("div",null,Re(p(O)),1)],2),Z(j1,{"selection-mode":"range",date:u.value,"min-date":p(d),"max-date":p(h),"range-state":p(f),"disabled-date":p(r),onChangerange:p(y),onPick:z,onSelect:p(w)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var cle=Ve(lle,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-month-range.vue"]]);const ule=function(t){switch(t){case"daterange":case"datetimerange":return ele;case"monthrange":return cle;default:return Gae}};mt.extend(sF);mt.extend(tae);mt.extend(mk);mt.extend(iae);mt.extend(oae);mt.extend(aae);mt.extend(cae);mt.extend(dae);var dle=J({name:"ElDatePicker",install:null,props:{...gk,...pae},emits:["update:modelValue"],setup(t,{expose:e,emit:n,slots:i}){const s=_e("picker-panel");xt("ElPopperOptions",Yt(On(t,"popperOptions"))),xt(XE,{slots:i,pickerNs:s});const o=F();e({focus:(l=!0)=>{var c;(c=o.value)==null||c.focus(l)},handleOpen:()=>{var l;(l=o.value)==null||l.handleOpen()},handleClose:()=>{var l;(l=o.value)==null||l.handleClose()}});const a=l=>{n("update:modelValue",l)};return()=>{var l;const c=(l=t.format)!=null?l:sie[t.type]||Id,u=ule(t.type);return Z(jV,kt(t,{format:c,type:t.type,ref:o,"onUpdate:modelValue":a}),{default:d=>Z(u,d,null),"range-separator":i["range-separator"]})}}});const Wv=dle;Wv.install=t=>{t.component(Wv.name,Wv)};const ple=Wv,_k="elDescriptions";var Vh=J({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String},type:{type:String}},setup(){return{descriptions:qe(_k,{})}},render(){var t,e,n,i,s,o;const r=hQ(this.cell),{border:a,direction:l}=this.descriptions,c=l==="vertical",u=((n=(e=(t=this.cell)==null?void 0:t.children)==null?void 0:e.label)==null?void 0:n.call(e))||r.label,d=(o=(s=(i=this.cell)==null?void 0:i.children)==null?void 0:s.default)==null?void 0:o.call(s),h=r.span,f=r.align?`is-${r.align}`:"",m=r.labelAlign?`is-${r.labelAlign}`:f,g=r.className,y=r.labelClassName,_={width:mi(r.width),minWidth:mi(r.minWidth)},C=_e("descriptions");switch(this.type){case"label":return Ze(this.tag,{style:_,class:[C.e("cell"),C.e("label"),C.is("bordered-label",a),C.is("vertical-label",c),m,y],colSpan:c?h:1},u);case"content":return Ze(this.tag,{style:_,class:[C.e("cell"),C.e("content"),C.is("bordered-content",a),C.is("vertical-content",c),f,g],colSpan:c?h:h*2-1},d);default:return Ze("td",{style:_,class:[C.e("cell"),f],colSpan:h},[Ze("span",{class:[C.e("label"),y]},u),Ze("span",{class:[C.e("content"),g]},d)])}}});const hle=De({row:{type:Array,default:()=>[]}}),fle={key:1},mle=J({name:"ElDescriptionsRow"}),gle=J({...mle,props:hle,setup(t){const e=qe(_k,{});return(n,i)=>p(e).direction==="vertical"?(I(),H(Ye,{key:0},[G("tr",null,[(I(!0),H(Ye,null,Ot(n.row,(s,o)=>(I(),ce(p(Vh),{key:`tr1-${o}`,cell:s,tag:"th",type:"label"},null,8,["cell"]))),128))]),G("tr",null,[(I(!0),H(Ye,null,Ot(n.row,(s,o)=>(I(),ce(p(Vh),{key:`tr2-${o}`,cell:s,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(I(),H("tr",fle,[(I(!0),H(Ye,null,Ot(n.row,(s,o)=>(I(),H(Ye,{key:`tr3-${o}`},[p(e).border?(I(),H(Ye,{key:0},[Z(p(Vh),{cell:s,tag:"td",type:"label"},null,8,["cell"]),Z(p(Vh),{cell:s,tag:"td",type:"content"},null,8,["cell"])],64)):(I(),ce(p(Vh),{key:1,cell:s,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var vle=Ve(gle,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/descriptions-row.vue"]]);const yle=De({border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:Vs,title:{type:String,default:""},extra:{type:String,default:""}}),ble=J({name:"ElDescriptions"}),_le=J({...ble,props:yle,setup(t){const e=t,n=_e("descriptions"),i=gi(),s=Ki();xt(_k,e);const o=T(()=>[n.b(),n.m(i.value)]),r=(l,c,u,d=!1)=>(l.props||(l.props={}),c>u&&(l.props.span=u),d&&(l.props.span=c),l),a=()=>{var l;const c=vp((l=s.default)==null?void 0:l.call(s)).filter(m=>{var g;return((g=m==null?void 0:m.type)==null?void 0:g.name)==="ElDescriptionsItem"}),u=[];let d=[],h=e.column,f=0;return c.forEach((m,g)=>{var y;const _=((y=m.props)==null?void 0:y.span)||1;if(g<c.length-1&&(f+=_>h?h:_),g===c.length-1){const C=e.column-f%e.column;d.push(r(m,C,h,!0)),u.push(d);return}_<h?(h-=_,d.push(m)):(d.push(r(m,_,h)),u.push(d),h=e.column,d=[])}),u};return(l,c)=>(I(),H("div",{class:x(p(o))},[l.title||l.extra||l.$slots.title||l.$slots.extra?(I(),H("div",{key:0,class:x(p(n).e("header"))},[G("div",{class:x(p(n).e("title"))},[me(l.$slots,"title",{},()=>[Ut(Re(l.title),1)])],2),G("div",{class:x(p(n).e("extra"))},[me(l.$slots,"extra",{},()=>[Ut(Re(l.extra),1)])],2)],2)):re("v-if",!0),G("div",{class:x(p(n).e("body"))},[G("table",{class:x([p(n).e("table"),p(n).is("bordered",l.border)])},[G("tbody",null,[(I(!0),H(Ye,null,Ot(a(),(u,d)=>(I(),ce(vle,{key:d,row:u},null,8,["row"]))),128))])],2)],2)],2))}});var wle=Ve(_le,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/description.vue"]]),AF=J({name:"ElDescriptionsItem",props:{label:{type:String,default:""},span:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}});const Cle=yt(wle,{DescriptionsItem:AF}),Sle=Nn(AF),Ele=De({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:ae([String,Array,Object])},zIndex:{type:ae([String,Number])}}),kle={click:t=>t instanceof MouseEvent};var Tle=J({name:"ElOverlay",props:Ele,emits:kle,setup(t,{slots:e,emit:n}){const i=_e("overlay"),s=l=>{n("click",l)},{onClick:o,onMousedown:r,onMouseup:a}=rk(t.customMaskEvent?void 0:s);return()=>t.mask?Z("div",{class:[i.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:o,onMousedown:r,onMouseup:a},[me(e,"default")],Fo.STYLE|Fo.CLASS|Fo.PROPS,["onClick","onMouseup","onMousedown"]):Ze("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[me(e,"default")])}});const wk=Tle,LF=De({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:gn},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Ile={close:()=>!0},xle=["aria-label"],Mle=["id"],$le=J({name:"ElDialogContent"}),Ale=J({...$le,props:LF,emits:Ile,setup(t){const e=t,{t:n}=Gt(),{Close:i}=$R,{dialogRef:s,headerRef:o,bodyId:r,ns:a,style:l}=qe(DR),{focusTrapRef:c}=qe(pk),u=l_(c,s),d=T(()=>e.draggable);return YR(s,o,d),(h,f)=>(I(),H("div",{ref:p(u),class:x([p(a).b(),p(a).is("fullscreen",h.fullscreen),p(a).is("draggable",p(d)),p(a).is("align-center",h.alignCenter),{[p(a).m("center")]:h.center},h.customClass]),style:Ke(p(l)),tabindex:"-1"},[G("header",{ref_key:"headerRef",ref:o,class:x(p(a).e("header"))},[me(h.$slots,"header",{},()=>[G("span",{role:"heading",class:x(p(a).e("title"))},Re(h.title),3)]),h.showClose?(I(),H("button",{key:0,"aria-label":p(n)("el.dialog.close"),class:x(p(a).e("headerbtn")),type:"button",onClick:f[0]||(f[0]=m=>h.$emit("close"))},[Z(p(Ge),{class:x(p(a).e("close"))},{default:ee(()=>[(I(),ce(It(h.closeIcon||p(i))))]),_:1},8,["class"])],10,xle)):re("v-if",!0)],2),G("div",{id:p(r),class:x(p(a).e("body"))},[me(h.$slots,"default")],10,Mle),h.$slots.footer?(I(),H("footer",{key:0,class:x(p(a).e("footer"))},[me(h.$slots,"footer")],2)):re("v-if",!0)],6))}});var Lle=Ve(Ale,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const OF=De({...LF,appendToBody:{type:Boolean,default:!1},beforeClose:{type:ae(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),PF={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[wt]:t=>fi(t),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},RF=(t,e)=>{const i=vt().emit,{nextZIndex:s}=hl();let o="";const r=yr(),a=yr(),l=F(!1),c=F(!1),u=F(!1),d=F(t.zIndex||s());let h,f;const m=pl("namespace",m_),g=T(()=>{const z={},U=`--${m.value}-dialog`;return t.fullscreen||(t.top&&(z[`${U}-margin-top`]=t.top),t.width&&(z[`${U}-width`]=mi(t.width))),z}),y=T(()=>t.alignCenter?{display:"flex"}:{});function _(){i("opened")}function C(){i("closed"),i(wt,!1),t.destroyOnClose&&(u.value=!1)}function w(){i("close")}function S(){f==null||f(),h==null||h(),t.openDelay&&t.openDelay>0?{stop:h}=Yu(()=>$(),t.openDelay):$()}function E(){h==null||h(),f==null||f(),t.closeDelay&&t.closeDelay>0?{stop:f}=Yu(()=>L(),t.closeDelay):L()}function k(){function z(U){U||(c.value=!0,l.value=!1)}t.beforeClose?t.beforeClose(z):E()}function A(){t.closeOnClickModal&&k()}function $(){Nt&&(l.value=!0)}function L(){l.value=!1}function O(){i("openAutoFocus")}function B(){i("closeAutoFocus")}function V(z){var U;((U=z.detail)==null?void 0:U.focusReason)==="pointer"&&z.preventDefault()}t.lockScroll&&XR(l);function P(){t.closeOnPressEscape&&k()}return Ce(()=>t.modelValue,z=>{z?(c.value=!1,S(),u.value=!0,d.value=t.zIndex?d.value++:s(),je(()=>{i("open"),e.value&&(e.value.scrollTop=0)})):l.value&&E()}),Ce(()=>t.fullscreen,z=>{e.value&&(z?(o=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=o)}),ft(()=>{t.modelValue&&(l.value=!0,u.value=!0,S())}),{afterEnter:_,afterLeave:C,beforeLeave:w,handleClose:k,onModalClick:A,close:E,doClose:L,onOpenAutoFocus:O,onCloseAutoFocus:B,onCloseRequested:P,onFocusoutPrevented:V,titleId:r,bodyId:a,closed:c,style:g,overlayDialogStyle:y,rendered:u,visible:l,zIndex:d}},Ole=["aria-label","aria-labelledby","aria-describedby"],Ple=J({name:"ElDialog",inheritAttrs:!1}),Rle=J({...Ple,props:OF,emits:PF,setup(t,{expose:e}){const n=t,i=Ki();Xa({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},T(()=>!!i.title)),Xa({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},T(()=>!!n.customClass));const s=_e("dialog"),o=F(),r=F(),a=F(),{visible:l,titleId:c,bodyId:u,style:d,overlayDialogStyle:h,rendered:f,zIndex:m,afterEnter:g,afterLeave:y,beforeLeave:_,handleClose:C,onModalClick:w,onOpenAutoFocus:S,onCloseAutoFocus:E,onCloseRequested:k,onFocusoutPrevented:A}=RF(n,o);xt(DR,{dialogRef:o,headerRef:r,bodyId:u,ns:s,rendered:f,style:d});const $=rk(w),L=T(()=>n.draggable&&!n.fullscreen);return e({visible:l,dialogContentRef:a}),(O,B)=>(I(),ce(tg,{to:"body",disabled:!O.appendToBody},[Z(oi,{name:"dialog-fade",onAfterEnter:p(g),onAfterLeave:p(y),onBeforeLeave:p(_),persisted:""},{default:ee(()=>[ct(Z(p(wk),{"custom-mask-event":"",mask:O.modal,"overlay-class":O.modalClass,"z-index":p(m)},{default:ee(()=>[G("div",{role:"dialog","aria-modal":"true","aria-label":O.title||void 0,"aria-labelledby":O.title?void 0:p(c),"aria-describedby":p(u),class:x(`${p(s).namespace.value}-overlay-dialog`),style:Ke(p(h)),onClick:B[0]||(B[0]=(...V)=>p($).onClick&&p($).onClick(...V)),onMousedown:B[1]||(B[1]=(...V)=>p($).onMousedown&&p($).onMousedown(...V)),onMouseup:B[2]||(B[2]=(...V)=>p($).onMouseup&&p($).onMouseup(...V))},[Z(p(__),{loop:"",trapped:p(l),"focus-start-el":"container",onFocusAfterTrapped:p(S),onFocusAfterReleased:p(E),onFocusoutPrevented:p(A),onReleaseRequested:p(k)},{default:ee(()=>[p(f)?(I(),ce(Lle,kt({key:0,ref_key:"dialogContentRef",ref:a},O.$attrs,{"custom-class":O.customClass,center:O.center,"align-center":O.alignCenter,"close-icon":O.closeIcon,draggable:p(L),fullscreen:O.fullscreen,"show-close":O.showClose,title:O.title,onClose:p(C)}),Ya({header:ee(()=>[O.$slots.title?me(O.$slots,"title",{key:1}):me(O.$slots,"header",{key:0,close:p(C),titleId:p(c),titleClass:p(s).e("title")})]),default:ee(()=>[me(O.$slots,"default")]),_:2},[O.$slots.footer?{name:"footer",fn:ee(()=>[me(O.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):re("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Ole)]),_:3},8,["mask","overlay-class","z-index"]),[[Vt,p(l)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Vle=Ve(Rle,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const Fle=yt(Vle),Dle=De({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:ae(String),default:"solid"}}),Nle=J({name:"ElDivider"}),Ble=J({...Nle,props:Dle,setup(t){const e=t,n=_e("divider"),i=T(()=>n.cssVar({"border-style":e.borderStyle}));return(s,o)=>(I(),H("div",{class:x([p(n).b(),p(n).m(s.direction)]),style:Ke(p(i)),role:"separator"},[s.$slots.default&&s.direction!=="vertical"?(I(),H("div",{key:0,class:x([p(n).e("text"),p(n).is(s.contentPosition)])},[me(s.$slots,"default")],2)):re("v-if",!0)],6))}});var zle=Ve(Ble,[["__file","/home/runner/work/element-plus/element-plus/packages/components/divider/src/divider.vue"]]);const VF=yt(zle),Hle=De({...OF,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0}}),Ule=PF,Wle=J({name:"ElDrawer",components:{ElOverlay:wk,ElFocusTrap:__,ElIcon:Ge,Close:vr},inheritAttrs:!1,props:Hle,emits:Ule,setup(t,{slots:e}){Xa({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},T(()=>!!e.title)),Xa({scope:"el-drawer",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/drawer.html#attributes",type:"Attribute"},T(()=>!!t.customClass));const n=F(),i=F(),s=_e("drawer"),{t:o}=Gt(),r=T(()=>t.direction==="rtl"||t.direction==="ltr"),a=T(()=>mi(t.size));return{...RF(t,n),drawerRef:n,focusStartRef:i,isHorizontal:r,drawerSize:a,ns:s,t:o}}}),Gle=["aria-label","aria-labelledby","aria-describedby"],jle=["id"],qle=["aria-label"],Kle=["id"];function Yle(t,e,n,i,s,o){const r=pt("close"),a=pt("el-icon"),l=pt("el-focus-trap"),c=pt("el-overlay");return I(),ce(tg,{to:"body",disabled:!t.appendToBody},[Z(oi,{name:t.ns.b("fade"),onAfterEnter:t.afterEnter,onAfterLeave:t.afterLeave,onBeforeLeave:t.beforeLeave,persisted:""},{default:ee(()=>[ct(Z(c,{mask:t.modal,"overlay-class":t.modalClass,"z-index":t.zIndex,onClick:t.onModalClick},{default:ee(()=>[Z(l,{loop:"",trapped:t.visible,"focus-trap-el":t.drawerRef,"focus-start-el":t.focusStartRef,onReleaseRequested:t.onCloseRequested},{default:ee(()=>[G("div",kt({ref:"drawerRef","aria-modal":"true","aria-label":t.title||void 0,"aria-labelledby":t.title?void 0:t.titleId,"aria-describedby":t.bodyId},t.$attrs,{class:[t.ns.b(),t.direction,t.visible&&"open",t.customClass],style:t.isHorizontal?"width: "+t.drawerSize:"height: "+t.drawerSize,role:"dialog",onClick:e[1]||(e[1]=rt(()=>{},["stop"]))}),[G("span",{ref:"focusStartRef",class:x(t.ns.e("sr-focus")),tabindex:"-1"},null,2),t.withHeader?(I(),H("header",{key:0,class:x(t.ns.e("header"))},[t.$slots.title?me(t.$slots,"title",{key:1},()=>[re(" DEPRECATED SLOT ")]):me(t.$slots,"header",{key:0,close:t.handleClose,titleId:t.titleId,titleClass:t.ns.e("title")},()=>[t.$slots.title?re("v-if",!0):(I(),H("span",{key:0,id:t.titleId,role:"heading",class:x(t.ns.e("title"))},Re(t.title),11,jle))]),t.showClose?(I(),H("button",{key:2,"aria-label":t.t("el.drawer.close"),class:x(t.ns.e("close-btn")),type:"button",onClick:e[0]||(e[0]=(...u)=>t.handleClose&&t.handleClose(...u))},[Z(a,{class:x(t.ns.e("close"))},{default:ee(()=>[Z(r)]),_:1},8,["class"])],10,qle)):re("v-if",!0)],2)):re("v-if",!0),t.rendered?(I(),H("div",{key:1,id:t.bodyId,class:x(t.ns.e("body"))},[me(t.$slots,"default")],10,Kle)):re("v-if",!0),t.$slots.footer?(I(),H("div",{key:2,class:x(t.ns.e("footer"))},[me(t.$slots,"footer")],2)):re("v-if",!0)],16,Gle)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[Vt,t.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var Zle=Ve(Wle,[["render",Yle],["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);const Xle=yt(Zle),Qle=J({inheritAttrs:!1});function Jle(t,e,n,i,s,o){return me(t.$slots,"default")}var ece=Ve(Qle,[["render",Jle],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const tce=J({name:"ElCollectionItem",inheritAttrs:!1});function nce(t,e,n,i,s,o){return me(t.$slots,"default")}var ice=Ve(tce,[["render",nce],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const FF="data-el-collection-item",DF=t=>{const e=`El${t}Collection`,n=`${e}Item`,i=Symbol(e),s=Symbol(n),o={...ece,name:e,setup(){const a=F(null),l=new Map;xt(i,{itemMap:l,getItems:()=>{const u=p(a);if(!u)return[];const d=Array.from(u.querySelectorAll(`[${FF}]`));return[...l.values()].sort((f,m)=>d.indexOf(f.ref)-d.indexOf(m.ref))},collectionRef:a})}},r={...ice,name:n,setup(a,{attrs:l}){const c=F(null),u=qe(i,void 0);xt(s,{collectionItemRef:c}),ft(()=>{const d=p(c);d&&u.itemMap.set(d,{ref:d,...l})}),Pn(()=>{const d=p(c);u.itemMap.delete(d)})}};return{COLLECTION_INJECTION_KEY:i,COLLECTION_ITEM_INJECTION_KEY:s,ElCollection:o,ElCollectionItem:r}},sce=De({style:{type:ae([String,Array,Object])},currentTabId:{type:ae(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:ae(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:oce,ElCollectionItem:rce,COLLECTION_INJECTION_KEY:Ck,COLLECTION_ITEM_INJECTION_KEY:ace}=DF("RovingFocusGroup"),Sk=Symbol("elRovingFocusGroup"),NF=Symbol("elRovingFocusGroupItem"),lce={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},cce=(t,e)=>{if(e!=="rtl")return t;switch(t){case Xe.right:return Xe.left;case Xe.left:return Xe.right;default:return t}},uce=(t,e,n)=>{const i=cce(t.key,n);if(!(e==="vertical"&&[Xe.left,Xe.right].includes(i))&&!(e==="horizontal"&&[Xe.up,Xe.down].includes(i)))return lce[i]},dce=(t,e)=>t.map((n,i)=>t[(i+e)%t.length]),Ek=t=>{const{activeElement:e}=document;for(const n of t)if(n===e||(n.focus(),e!==document.activeElement))return},c$="currentTabIdChange",u$="rovingFocusGroup.entryFocus",pce={bubbles:!1,cancelable:!0},hce=J({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:sce,emits:[c$,"entryFocus"],setup(t,{emit:e}){var n;const i=F((n=t.currentTabId||t.defaultCurrentTabId)!=null?n:null),s=F(!1),o=F(!1),r=F(null),{getItems:a}=qe(Ck,void 0),l=T(()=>[{outline:"none"},t.style]),c=g=>{e(c$,g)},u=()=>{s.value=!0},d=Fn(g=>{var y;(y=t.onMousedown)==null||y.call(t,g)},()=>{o.value=!0}),h=Fn(g=>{var y;(y=t.onFocus)==null||y.call(t,g)},g=>{const y=!p(o),{target:_,currentTarget:C}=g;if(_===C&&y&&!p(s)){const w=new Event(u$,pce);if(C==null||C.dispatchEvent(w),!w.defaultPrevented){const S=a().filter(L=>L.focusable),E=S.find(L=>L.active),k=S.find(L=>L.id===p(i)),$=[E,k,...S].filter(Boolean).map(L=>L.ref);Ek($)}}o.value=!1}),f=Fn(g=>{var y;(y=t.onBlur)==null||y.call(t,g)},()=>{s.value=!1}),m=(...g)=>{e("entryFocus",...g)};xt(Sk,{currentTabbedId:mh(i),loop:On(t,"loop"),tabIndex:T(()=>p(s)?-1:0),rovingFocusGroupRef:r,rovingFocusGroupRootStyle:l,orientation:On(t,"orientation"),dir:On(t,"dir"),onItemFocus:c,onItemShiftTab:u,onBlur:f,onFocus:h,onMousedown:d}),Ce(()=>t.currentTabId,g=>{i.value=g??null}),En(r,u$,m)}});function fce(t,e,n,i,s,o){return me(t.$slots,"default")}var mce=Ve(hce,[["render",fce],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const gce=J({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:oce,ElRovingFocusGroupImpl:mce}});function vce(t,e,n,i,s,o){const r=pt("el-roving-focus-group-impl"),a=pt("el-focus-group-collection");return I(),ce(a,null,{default:ee(()=>[Z(r,or(Zb(t.$attrs)),{default:ee(()=>[me(t.$slots,"default")]),_:3},16)]),_:3})}var yce=Ve(gce,[["render",vce],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const bce=J({components:{ElRovingFocusCollectionItem:rce},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(t,{emit:e}){const{currentTabbedId:n,loop:i,onItemFocus:s,onItemShiftTab:o}=qe(Sk,void 0),{getItems:r}=qe(Ck,void 0),a=yr(),l=F(null),c=Fn(f=>{e("mousedown",f)},f=>{t.focusable?s(p(a)):f.preventDefault()}),u=Fn(f=>{e("focus",f)},()=>{s(p(a))}),d=Fn(f=>{e("keydown",f)},f=>{const{key:m,shiftKey:g,target:y,currentTarget:_}=f;if(m===Xe.tab&&g){o();return}if(y!==_)return;const C=uce(f);if(C){f.preventDefault();let S=r().filter(E=>E.focusable).map(E=>E.ref);switch(C){case"last":{S.reverse();break}case"prev":case"next":{C==="prev"&&S.reverse();const E=S.indexOf(_);S=i.value?dce(S,E+1):S.slice(E+1);break}}je(()=>{Ek(S)})}}),h=T(()=>n.value===p(a));return xt(NF,{rovingFocusGroupItemRef:l,tabIndex:T(()=>p(h)?0:-1),handleMousedown:c,handleFocus:u,handleKeydown:d}),{id:a,handleKeydown:d,handleFocus:u,handleMousedown:c}}});function _ce(t,e,n,i,s,o){const r=pt("el-roving-focus-collection-item");return I(),ce(r,{id:t.id,focusable:t.focusable,active:t.active},{default:ee(()=>[me(t.$slots,"default")]),_:3},8,["id","focusable","active"])}var wce=Ve(bce,[["render",_ce],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const Gv=De({trigger:Am.trigger,effect:{...Di.effect,default:"light"},type:{type:ae(String)},placement:{type:ae(String),default:"bottom"},popperOptions:{type:ae(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:ae([Number,String]),default:0},maxHeight:{type:ae([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:ae(Object)},teleported:Di.teleported}),BF=De({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:gn}}),Cce=De({onKeydown:{type:ae(Function)}}),Sce=[Xe.down,Xe.pageDown,Xe.home],zF=[Xe.up,Xe.pageUp,Xe.end],Ece=[...Sce,...zF],{ElCollection:kce,ElCollectionItem:Tce,COLLECTION_INJECTION_KEY:Ice,COLLECTION_ITEM_INJECTION_KEY:xce}=DF("Dropdown"),C_=Symbol("elDropdown"),{ButtonGroup:Mce}=os,$ce=J({name:"ElDropdown",components:{ElButton:os,ElButtonGroup:Mce,ElScrollbar:fl,ElDropdownCollection:kce,ElTooltip:Fs,ElRovingFocusGroup:yce,ElOnlyChild:xV,ElIcon:Ge,ArrowDown:$c},props:Gv,emits:["visible-change","click","command"],setup(t,{emit:e}){const n=vt(),i=_e("dropdown"),{t:s}=Gt(),o=F(),r=F(),a=F(null),l=F(null),c=F(null),u=F(null),d=F(!1),h=[Xe.enter,Xe.space,Xe.down],f=T(()=>({maxHeight:mi(t.maxHeight)})),m=T(()=>[i.m(S.value)]),g=yr().value,y=T(()=>t.id||g);function _(){C()}function C(){var U;(U=a.value)==null||U.onClose()}function w(){var U;(U=a.value)==null||U.onOpen()}const S=gi();function E(...U){e("command",...U)}function k(){}function A(){const U=p(l);U==null||U.focus(),u.value=null}function $(U){u.value=U}function L(U){d.value||(U.preventDefault(),U.stopImmediatePropagation())}function O(){e("visible-change",!0)}function B(U){(U==null?void 0:U.type)==="keydown"&&l.value.focus()}function V(){e("visible-change",!1)}return xt(C_,{contentRef:l,role:T(()=>t.role),triggerId:y,isUsingKeyboard:d,onItemEnter:k,onItemLeave:A}),xt("elDropdown",{instance:n,dropdownSize:S,handleClick:_,commandHandler:E,trigger:On(t,"trigger"),hideOnClick:On(t,"hideOnClick")}),{t:s,ns:i,scrollbar:c,wrapStyle:f,dropdownTriggerKls:m,dropdownSize:S,triggerId:y,triggerKeys:h,currentTabId:u,handleCurrentTabIdChange:$,handlerMainButtonClick:U=>{e("click",U)},handleEntryFocus:L,handleClose:C,handleOpen:w,handleBeforeShowTooltip:O,handleShowTooltip:B,handleBeforeHideTooltip:V,onFocusAfterTrapped:U=>{var W,R;U.preventDefault(),(R=(W=l.value)==null?void 0:W.focus)==null||R.call(W,{preventScroll:!0})},popperRef:a,contentRef:l,triggeringElementRef:o,referenceElementRef:r}}});function Ace(t,e,n,i,s,o){var r;const a=pt("el-dropdown-collection"),l=pt("el-roving-focus-group"),c=pt("el-scrollbar"),u=pt("el-only-child"),d=pt("el-tooltip"),h=pt("el-button"),f=pt("arrow-down"),m=pt("el-icon"),g=pt("el-button-group");return I(),H("div",{class:x([t.ns.b(),t.ns.is("disabled",t.disabled)])},[Z(d,{ref:"popperRef",role:t.role,effect:t.effect,"fallback-placements":["bottom","top"],"popper-options":t.popperOptions,"gpu-acceleration":!1,"hide-after":t.trigger==="hover"?t.hideTimeout:0,"manual-mode":!0,placement:t.placement,"popper-class":[t.ns.e("popper"),t.popperClass],"reference-element":(r=t.referenceElementRef)==null?void 0:r.$el,trigger:t.trigger,"trigger-keys":t.triggerKeys,"trigger-target-el":t.contentRef,"show-after":t.trigger==="hover"?t.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":t.triggeringElementRef,"virtual-triggering":t.splitButton,disabled:t.disabled,transition:`${t.ns.namespace.value}-zoom-in-top`,teleported:t.teleported,pure:"",persistent:"",onBeforeShow:t.handleBeforeShowTooltip,onShow:t.handleShowTooltip,onBeforeHide:t.handleBeforeHideTooltip},Ya({content:ee(()=>[Z(c,{ref:"scrollbar","wrap-style":t.wrapStyle,tag:"div","view-class":t.ns.e("list")},{default:ee(()=>[Z(l,{loop:t.loop,"current-tab-id":t.currentTabId,orientation:"horizontal",onCurrentTabIdChange:t.handleCurrentTabIdChange,onEntryFocus:t.handleEntryFocus},{default:ee(()=>[Z(a,null,{default:ee(()=>[me(t.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[t.splitButton?void 0:{name:"default",fn:ee(()=>[Z(u,{id:t.triggerId,role:"button",tabindex:t.tabindex},{default:ee(()=>[me(t.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),t.splitButton?(I(),ce(g,{key:0},{default:ee(()=>[Z(h,kt({ref:"referenceElementRef"},t.buttonProps,{size:t.dropdownSize,type:t.type,disabled:t.disabled,tabindex:t.tabindex,onClick:t.handlerMainButtonClick}),{default:ee(()=>[me(t.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),Z(h,kt({id:t.triggerId,ref:"triggeringElementRef"},t.buttonProps,{role:"button",size:t.dropdownSize,type:t.type,class:t.ns.e("caret-button"),disabled:t.disabled,tabindex:t.tabindex,"aria-label":t.t("el.dropdown.toggleDropdown")}),{default:ee(()=>[Z(m,{class:x(t.ns.e("icon"))},{default:ee(()=>[Z(f)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):re("v-if",!0)],2)}var Lce=Ve($ce,[["render",Ace],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const Oce=J({name:"DropdownItemImpl",components:{ElIcon:Ge},props:BF,emits:["pointermove","pointerleave","click","clickimpl"],setup(t,{emit:e}){const n=_e("dropdown"),{role:i}=qe(C_,void 0),{collectionItemRef:s}=qe(xce,void 0),{collectionItemRef:o}=qe(ace,void 0),{rovingFocusGroupItemRef:r,tabIndex:a,handleFocus:l,handleKeydown:c,handleMousedown:u}=qe(NF,void 0),d=l_(s,o,r),h=T(()=>i.value==="menu"?"menuitem":i.value==="navigation"?"link":"button"),f=Fn(m=>{const{code:g}=m;if(g===Xe.enter||g===Xe.space)return m.preventDefault(),m.stopImmediatePropagation(),e("clickimpl",m),!0},c);return{ns:n,itemRef:d,dataset:{[FF]:""},role:h,tabIndex:a,handleFocus:l,handleKeydown:f,handleMousedown:u}}}),Pce=["aria-disabled","tabindex","role"];function Rce(t,e,n,i,s,o){const r=pt("el-icon");return I(),H(Ye,null,[t.divided?(I(),H("li",kt({key:0,role:"separator",class:t.ns.bem("menu","item","divided")},t.$attrs),null,16)):re("v-if",!0),G("li",kt({ref:t.itemRef},{...t.dataset,...t.$attrs},{"aria-disabled":t.disabled,class:[t.ns.be("menu","item"),t.ns.is("disabled",t.disabled)],tabindex:t.tabIndex,role:t.role,onClick:e[0]||(e[0]=a=>t.$emit("clickimpl",a)),onFocus:e[1]||(e[1]=(...a)=>t.handleFocus&&t.handleFocus(...a)),onKeydown:e[2]||(e[2]=(...a)=>t.handleKeydown&&t.handleKeydown(...a)),onMousedown:e[3]||(e[3]=(...a)=>t.handleMousedown&&t.handleMousedown(...a)),onPointermove:e[4]||(e[4]=a=>t.$emit("pointermove",a)),onPointerleave:e[5]||(e[5]=a=>t.$emit("pointerleave",a))}),[t.icon?(I(),ce(r,{key:0},{default:ee(()=>[(I(),ce(It(t.icon)))]),_:1})):re("v-if",!0),me(t.$slots,"default")],16,Pce)],64)}var Vce=Ve(Oce,[["render",Rce],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const HF=()=>{const t=qe("elDropdown",{}),e=T(()=>t==null?void 0:t.dropdownSize);return{elDropdown:t,_elDropdownSize:e}},Fce=J({name:"ElDropdownItem",components:{ElDropdownCollectionItem:Tce,ElRovingFocusItem:wce,ElDropdownItemImpl:Vce},inheritAttrs:!1,props:BF,emits:["pointermove","pointerleave","click"],setup(t,{emit:e,attrs:n}){const{elDropdown:i}=HF(),s=vt(),o=F(null),r=T(()=>{var f,m;return(m=(f=p(o))==null?void 0:f.textContent)!=null?m:""}),{onItemEnter:a,onItemLeave:l}=qe(C_,void 0),c=Fn(f=>(e("pointermove",f),f.defaultPrevented),qx(f=>{var m;t.disabled?l(f):(a(f),f.defaultPrevented||(m=f.currentTarget)==null||m.focus())})),u=Fn(f=>(e("pointerleave",f),f.defaultPrevented),qx(f=>{l(f)})),d=Fn(f=>{if(!t.disabled)return e("click",f),f.type!=="keydown"&&f.defaultPrevented},f=>{var m,g,y;if(t.disabled){f.stopImmediatePropagation();return}(m=i==null?void 0:i.hideOnClick)!=null&&m.value&&((g=i.handleClick)==null||g.call(i)),(y=i.commandHandler)==null||y.call(i,t.command,s,f)}),h=T(()=>({...t,...n}));return{handleClick:d,handlePointerMove:c,handlePointerLeave:u,textContent:r,propsAndAttrs:h}}});function Dce(t,e,n,i,s,o){var r;const a=pt("el-dropdown-item-impl"),l=pt("el-roving-focus-item"),c=pt("el-dropdown-collection-item");return I(),ce(c,{disabled:t.disabled,"text-value":(r=t.textValue)!=null?r:t.textContent},{default:ee(()=>[Z(l,{focusable:!t.disabled},{default:ee(()=>[Z(a,kt(t.propsAndAttrs,{onPointerleave:t.handlePointerLeave,onPointermove:t.handlePointerMove,onClickimpl:t.handleClick}),{default:ee(()=>[me(t.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var UF=Ve(Fce,[["render",Dce],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const Nce=J({name:"ElDropdownMenu",props:Cce,setup(t){const e=_e("dropdown"),{_elDropdownSize:n}=HF(),i=n.value,{focusTrapRef:s,onKeydown:o}=qe(pk,void 0),{contentRef:r,role:a,triggerId:l}=qe(C_,void 0),{collectionRef:c,getItems:u}=qe(Ice,void 0),{rovingFocusGroupRef:d,rovingFocusGroupRootStyle:h,tabIndex:f,onBlur:m,onFocus:g,onMousedown:y}=qe(Sk,void 0),{collectionRef:_}=qe(Ck,void 0),C=T(()=>[e.b("menu"),e.bm("menu",i==null?void 0:i.value)]),w=l_(r,c,s,d,_),S=Fn(k=>{var A;(A=t.onKeydown)==null||A.call(t,k)},k=>{const{currentTarget:A,code:$,target:L}=k;if(A.contains(L),Xe.tab===$&&k.stopImmediatePropagation(),k.preventDefault(),L!==p(r)||!Ece.includes($))return;const B=u().filter(V=>!V.disabled).map(V=>V.ref);zF.includes($)&&B.reverse(),Ek(B)});return{size:i,rovingFocusGroupRootStyle:h,tabIndex:f,dropdownKls:C,role:a,triggerId:l,dropdownListWrapperRef:w,handleKeydown:k=>{S(k),o(k)},onBlur:m,onFocus:g,onMousedown:y}}}),Bce=["role","aria-labelledby"];function zce(t,e,n,i,s,o){return I(),H("ul",{ref:t.dropdownListWrapperRef,class:x(t.dropdownKls),style:Ke(t.rovingFocusGroupRootStyle),tabindex:-1,role:t.role,"aria-labelledby":t.triggerId,onBlur:e[0]||(e[0]=(...r)=>t.onBlur&&t.onBlur(...r)),onFocus:e[1]||(e[1]=(...r)=>t.onFocus&&t.onFocus(...r)),onKeydown:e[2]||(e[2]=(...r)=>t.handleKeydown&&t.handleKeydown(...r)),onMousedown:e[3]||(e[3]=(...r)=>t.onMousedown&&t.onMousedown(...r))},[me(t.$slots,"default")],46,Bce)}var WF=Ve(Nce,[["render",zce],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const Hce=yt(Lce,{DropdownItem:UF,DropdownMenu:WF}),Uce=Nn(UF),Wce=Nn(WF);let Gce=0;const jce=J({name:"ImgEmpty",setup(){return{ns:_e("empty"),id:++Gce}}}),qce={viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Kce=["id"],Yce=["stop-color"],Zce=["stop-color"],Xce=["id"],Qce=["stop-color"],Jce=["stop-color"],eue=["id"],tue={id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},nue={id:"B-type",transform:"translate(-1268.000000, -535.000000)"},iue={id:"Group-2",transform:"translate(1268.000000, 535.000000)"},sue=["fill"],oue=["fill"],rue={id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},aue=["fill"],lue=["fill"],cue=["fill"],uue=["fill"],due=["fill"],pue={id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},hue=["fill","xlink:href"],fue=["fill","mask"],mue=["fill"];function gue(t,e,n,i,s,o){return I(),H("svg",qce,[G("defs",null,[G("linearGradient",{id:`linearGradient-1-${t.id}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[G("stop",{"stop-color":`var(${t.ns.cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,Yce),G("stop",{"stop-color":`var(${t.ns.cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,Zce)],8,Kce),G("linearGradient",{id:`linearGradient-2-${t.id}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[G("stop",{"stop-color":`var(${t.ns.cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,Qce),G("stop",{"stop-color":`var(${t.ns.cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,Jce)],8,Xce),G("rect",{id:`path-3-${t.id}`,x:"0",y:"0",width:"17",height:"36"},null,8,eue)]),G("g",tue,[G("g",nue,[G("g",iue,[G("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${t.ns.cssVarBlockName("fill-color-3")})`},null,8,sue),G("polygon",{id:"Rectangle-Copy-14",fill:`var(${t.ns.cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,oue),G("g",rue,[G("polygon",{id:"Rectangle-Copy-10",fill:`var(${t.ns.cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,aue),G("polygon",{id:"Rectangle-Copy-11",fill:`var(${t.ns.cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,lue),G("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${t.id})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,cue),G("polygon",{id:"Rectangle-Copy-13",fill:`var(${t.ns.cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,uue)]),G("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${t.id})`,x:"13",y:"45",width:"40",height:"36"},null,8,due),G("g",pue,[G("use",{id:"Mask",fill:`var(${t.ns.cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${t.id}`},null,8,hue),G("polygon",{id:"Rectangle-Copy",fill:`var(${t.ns.cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${t.id})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,fue)]),G("polygon",{id:"Rectangle-Copy-18",fill:`var(${t.ns.cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,mue)])])])])}var vue=Ve(jce,[["render",gue],["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/img-empty.vue"]]);const yue={image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}},bue=["src"],_ue={key:1},wue=J({name:"ElEmpty"}),Cue=J({...wue,props:yue,setup(t){const e=t,{t:n}=Gt(),i=_e("empty"),s=T(()=>e.description||n("el.table.emptyText")),o=T(()=>({width:e.imageSize?`${e.imageSize}px`:""}));return(r,a)=>(I(),H("div",{class:x(p(i).b())},[G("div",{class:x(p(i).e("image")),style:Ke(p(o))},[r.image?(I(),H("img",{key:0,src:r.image,ondragstart:"return false"},null,8,bue)):me(r.$slots,"image",{key:1},()=>[Z(vue)])],6),G("div",{class:x(p(i).e("description"))},[r.$slots.description?me(r.$slots,"description",{key:0}):(I(),H("p",_ue,Re(p(s)),1))],2),r.$slots.default?(I(),H("div",{key:0,class:x(p(i).e("bottom"))},[me(r.$slots,"default")],2)):re("v-if",!0)],2))}});var Sue=Ve(Cue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/empty.vue"]]);const GF=yt(Sue),Eue=De({model:Object,rules:{type:ae(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:{type:String,values:dl},disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1},scrollToError:Boolean}),kue={validate:(t,e,n)=>(ze(t)||at(t))&&fi(e)&&at(n)};function Tue(){const t=F([]),e=T(()=>{if(!t.value.length)return"0";const o=Math.max(...t.value);return o?`${o}px`:""});function n(o){const r=t.value.indexOf(o);return r===-1&&e.value,r}function i(o,r){if(o&&r){const a=n(r);t.value.splice(a,1,o)}else o&&t.value.push(o)}function s(o){const r=n(o);r>-1&&t.value.splice(r,1)}return{autoLabelWidth:e,registerLabelWidth:i,deregisterLabelWidth:s}}const qg=(t,e)=>{const n=jp(e);return n.length>0?t.filter(i=>i.prop&&n.includes(i.prop)):t},Iue="ElForm",xue=J({name:Iue}),Mue=J({...xue,props:Eue,emits:kue,setup(t,{expose:e,emit:n}){const i=t,s=[],o=gi(),r=_e("form"),a=T(()=>{const{labelPosition:C,inline:w}=i;return[r.b(),r.m(o.value||"default"),{[r.m(`label-${C}`)]:C,[r.m("inline")]:w}]}),l=C=>{s.push(C)},c=C=>{C.prop&&s.splice(s.indexOf(C),1)},u=(C=[])=>{i.model&&qg(s,C).forEach(w=>w.resetField())},d=(C=[])=>{qg(s,C).forEach(w=>w.clearValidate())},h=T(()=>!!i.model),f=C=>{if(s.length===0)return[];const w=qg(s,C);return w.length?w:[]},m=async C=>y(void 0,C),g=async(C=[])=>{if(!h.value)return!1;const w=f(C);if(w.length===0)return!0;let S={};for(const E of w)try{await E.validate("")}catch(k){S={...S,...k}}return Object.keys(S).length===0?!0:Promise.reject(S)},y=async(C=[],w)=>{const S=!ot(w);try{const E=await g(C);return E===!0&&(w==null||w(E)),E}catch(E){if(E instanceof Error)throw E;const k=E;return i.scrollToError&&_(Object.keys(k)[0]),w==null||w(!1,k),S&&Promise.reject(k)}},_=C=>{var w;const S=qg(s,C)[0];S&&((w=S.$el)==null||w.scrollIntoView())};return Ce(()=>i.rules,()=>{i.validateOnRuleChange&&m().catch(C=>void 0)},{deep:!0}),xt(id,Yt({...Ei(i),emit:n,resetFields:u,clearValidate:d,validateField:y,addField:l,removeField:c,...Tue()})),e({validate:m,validateField:y,resetFields:u,clearValidate:d,scrollToField:_}),(C,w)=>(I(),H("form",{class:x(p(a))},[me(C.$slots,"default")],2))}});var $ue=Ve(Mue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form.vue"]]);function xu(){return xu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},xu.apply(this,arguments)}function Aue(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Rm(t,e)}function q1(t){return q1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},q1(t)}function Rm(t,e){return Rm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},Rm(t,e)}function Lue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jv(t,e,n){return Lue()?jv=Reflect.construct.bind():jv=function(s,o,r){var a=[null];a.push.apply(a,o);var l=Function.bind.apply(s,a),c=new l;return r&&Rm(c,r.prototype),c},jv.apply(null,arguments)}function Oue(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function K1(t){var e=typeof Map=="function"?new Map:void 0;return K1=function(i){if(i===null||!Oue(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,s)}function s(){return jv(i,arguments,q1(this).constructor)}return s.prototype=Object.create(i.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),Rm(s,i)},K1(t)}var Pue=/%[sdj%]/g,Rue=function(){};typeof process<"u"&&process.env;function Y1(t){if(!t||!t.length)return null;var e={};return t.forEach(function(n){var i=n.field;e[i]=e[i]||[],e[i].push(n)}),e}function _o(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var s=0,o=n.length;if(typeof t=="function")return t.apply(null,n);if(typeof t=="string"){var r=t.replace(Pue,function(a){if(a==="%%")return"%";if(s>=o)return a;switch(a){case"%s":return String(n[s++]);case"%d":return Number(n[s++]);case"%j":try{return JSON.stringify(n[s++])}catch{return"[Circular]"}break;default:return a}});return r}return t}function Vue(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function Ai(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||Vue(e)&&typeof t=="string"&&!t)}function Fue(t,e,n){var i=[],s=0,o=t.length;function r(a){i.push.apply(i,a||[]),s++,s===o&&n(i)}t.forEach(function(a){e(a,r)})}function d$(t,e,n){var i=0,s=t.length;function o(r){if(r&&r.length){n(r);return}var a=i;i=i+1,a<s?e(t[a],o):n([])}o([])}function Due(t){var e=[];return Object.keys(t).forEach(function(n){e.push.apply(e,t[n]||[])}),e}var p$=function(t){Aue(e,t);function e(n,i){var s;return s=t.call(this,"Async Validation Error")||this,s.errors=n,s.fields=i,s}return e}(K1(Error));function Nue(t,e,n,i,s){if(e.first){var o=new Promise(function(h,f){var m=function(_){return i(_),_.length?f(new p$(_,Y1(_))):h(s)},g=Due(t);d$(g,n,m)});return o.catch(function(h){return h}),o}var r=e.firstFields===!0?Object.keys(t):e.firstFields||[],a=Object.keys(t),l=a.length,c=0,u=[],d=new Promise(function(h,f){var m=function(y){if(u.push.apply(u,y),c++,c===l)return i(u),u.length?f(new p$(u,Y1(u))):h(s)};a.length||(i(u),h(s)),a.forEach(function(g){var y=t[g];r.indexOf(g)!==-1?d$(y,n,m):Fue(y,n,m)})});return d.catch(function(h){return h}),d}function Bue(t){return!!(t&&t.message!==void 0)}function zue(t,e){for(var n=t,i=0;i<e.length;i++){if(n==null)return n;n=n[e[i]]}return n}function h$(t,e){return function(n){var i;return t.fullFields?i=zue(e,t.fullFields):i=e[n.field||t.fullField],Bue(n)?(n.field=n.field||t.fullField,n.fieldValue=i,n):{message:typeof n=="function"?n():n,fieldValue:i,field:n.field||t.fullField}}}function f$(t,e){if(e){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];typeof i=="object"&&typeof t[n]=="object"?t[n]=xu({},t[n],i):t[n]=i}}return t}var jF=function(e,n,i,s,o,r){e.required&&(!i.hasOwnProperty(e.field)||Ai(n,r||e.type))&&s.push(_o(o.messages.required,e.fullField))},Hue=function(e,n,i,s,o){(/^\s+$/.test(n)||n==="")&&s.push(_o(o.messages.whitespace,e.fullField))},Kg,Uue=function(){if(Kg)return Kg;var t="[a-fA-F\\d:]",e=function(S){return S&&S.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",s=(`
(?:
(?:`+i+":){7}(?:"+i+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+i+":){6}(?:"+n+"|:"+i+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+i+":){5}(?::"+n+"|(?::"+i+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+i+":){4}(?:(?::"+i+"){0,1}:"+n+"|(?::"+i+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+i+":){3}(?:(?::"+i+"){0,2}:"+n+"|(?::"+i+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+i+":){2}(?:(?::"+i+"){0,3}:"+n+"|(?::"+i+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+i+":){1}(?:(?::"+i+"){0,4}:"+n+"|(?::"+i+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+i+"){0,5}:"+n+"|(?::"+i+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),o=new RegExp("(?:^"+n+"$)|(?:^"+s+"$)"),r=new RegExp("^"+n+"$"),a=new RegExp("^"+s+"$"),l=function(S){return S&&S.exact?o:new RegExp("(?:"+e(S)+n+e(S)+")|(?:"+e(S)+s+e(S)+")","g")};l.v4=function(w){return w&&w.exact?r:new RegExp(""+e(w)+n+e(w),"g")},l.v6=function(w){return w&&w.exact?a:new RegExp(""+e(w)+s+e(w),"g")};var c="(?:(?:[a-z]+:)?//)",u="(?:\\S+(?::\\S*)?@)?",d=l.v4().source,h=l.v6().source,f="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",m="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",g="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",y="(?::\\d{2,5})?",_='(?:[/?#][^\\s"]*)?',C="(?:"+c+"|www\\.)"+u+"(?:localhost|"+d+"|"+h+"|"+f+m+g+")"+y+_;return Kg=new RegExp("(?:^"+C+"$)","i"),Kg},m$={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},tf={integer:function(e){return tf.number(e)&&parseInt(e,10)===e},float:function(e){return tf.number(e)&&!tf.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!tf.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(m$.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(Uue())},hex:function(e){return typeof e=="string"&&!!e.match(m$.hex)}},Wue=function(e,n,i,s,o){if(e.required&&n===void 0){jF(e,n,i,s,o);return}var r=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=e.type;r.indexOf(a)>-1?tf[a](n)||s.push(_o(o.messages.types[a],e.fullField,e.type)):a&&typeof n!==e.type&&s.push(_o(o.messages.types[a],e.fullField,e.type))},Gue=function(e,n,i,s,o){var r=typeof e.len=="number",a=typeof e.min=="number",l=typeof e.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=n,d=null,h=typeof n=="number",f=typeof n=="string",m=Array.isArray(n);if(h?d="number":f?d="string":m&&(d="array"),!d)return!1;m&&(u=n.length),f&&(u=n.replace(c,"_").length),r?u!==e.len&&s.push(_o(o.messages[d].len,e.fullField,e.len)):a&&!l&&u<e.min?s.push(_o(o.messages[d].min,e.fullField,e.min)):l&&!a&&u>e.max?s.push(_o(o.messages[d].max,e.fullField,e.max)):a&&l&&(u<e.min||u>e.max)&&s.push(_o(o.messages[d].range,e.fullField,e.min,e.max))},cd="enum",jue=function(e,n,i,s,o){e[cd]=Array.isArray(e[cd])?e[cd]:[],e[cd].indexOf(n)===-1&&s.push(_o(o.messages[cd],e.fullField,e[cd].join(", ")))},que=function(e,n,i,s,o){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(n)||s.push(_o(o.messages.pattern.mismatch,e.fullField,n,e.pattern));else if(typeof e.pattern=="string"){var r=new RegExp(e.pattern);r.test(n)||s.push(_o(o.messages.pattern.mismatch,e.fullField,n,e.pattern))}}},on={required:jF,whitespace:Hue,type:Wue,range:Gue,enum:jue,pattern:que},Kue=function(e,n,i,s,o){var r=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ai(n,"string")&&!e.required)return i();on.required(e,n,s,r,o,"string"),Ai(n,"string")||(on.type(e,n,s,r,o),on.range(e,n,s,r,o),on.pattern(e,n,s,r,o),e.whitespace===!0&&on.whitespace(e,n,s,r,o))}i(r)},Yue=function(e,n,i,s,o){var r=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ai(n)&&!e.required)return i();on.required(e,n,s,r,o),n!==void 0&&on.type(e,n,s,r,o)}i(r)},Zue=function(e,n,i,s,o){var r=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(n===""&&(n=void 0),Ai(n)&&!e.required)return i();on.required(e,n,s,r,o),n!==void 0&&(on.type(e,n,s,r,o),on.range(e,n,s,r,o))}i(r)},Xue=function(e,n,i,s,o){var r=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ai(n)&&!e.required)return i();on.required(e,n,s,r,o),n!==void 0&&on.type(e,n,s,r,o)}i(r)},Que=function(e,n,i,s,o){var r=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ai(n)&&!e.required)return i();on.required(e,n,s,r,o),Ai(n)||on.type(e,n,s,r,o)}i(r)},Jue=function(e,n,i,s,o){var r=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ai(n)&&!e.required)return i();on.required(e,n,s,r,o),n!==void 0&&(on.type(e,n,s,r,o),on.range(e,n,s,r,o))}i(r)},ede=function(e,n,i,s,o){var r=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ai(n)&&!e.required)return i();on.required(e,n,s,r,o),n!==void 0&&(on.type(e,n,s,r,o),on.range(e,n,s,r,o))}i(r)},tde=function(e,n,i,s,o){var r=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(n==null&&!e.required)return i();on.required(e,n,s,r,o,"array"),n!=null&&(on.type(e,n,s,r,o),on.range(e,n,s,r,o))}i(r)},nde=function(e,n,i,s,o){var r=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ai(n)&&!e.required)return i();on.required(e,n,s,r,o),n!==void 0&&on.type(e,n,s,r,o)}i(r)},ide="enum",sde=function(e,n,i,s,o){var r=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ai(n)&&!e.required)return i();on.required(e,n,s,r,o),n!==void 0&&on[ide](e,n,s,r,o)}i(r)},ode=function(e,n,i,s,o){var r=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ai(n,"string")&&!e.required)return i();on.required(e,n,s,r,o),Ai(n,"string")||on.pattern(e,n,s,r,o)}i(r)},rde=function(e,n,i,s,o){var r=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ai(n,"date")&&!e.required)return i();if(on.required(e,n,s,r,o),!Ai(n,"date")){var l;n instanceof Date?l=n:l=new Date(n),on.type(e,l,s,r,o),l&&on.range(e,l.getTime(),s,r,o)}}i(r)},ade=function(e,n,i,s,o){var r=[],a=Array.isArray(n)?"array":typeof n;on.required(e,n,s,r,o,a),i(r)},Ew=function(e,n,i,s,o){var r=e.type,a=[],l=e.required||!e.required&&s.hasOwnProperty(e.field);if(l){if(Ai(n,r)&&!e.required)return i();on.required(e,n,s,a,o,r),Ai(n,r)||on.type(e,n,s,a,o)}i(a)},lde=function(e,n,i,s,o){var r=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ai(n)&&!e.required)return i();on.required(e,n,s,r,o)}i(r)},Pf={string:Kue,method:Yue,number:Zue,boolean:Xue,regexp:Que,integer:Jue,float:ede,array:tde,object:nde,enum:sde,pattern:ode,date:rde,url:Ew,hex:Ew,email:Ew,required:ade,any:lde};function Z1(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var X1=Z1(),pg=function(){function t(n){this.rules=null,this._messages=X1,this.define(n)}var e=t.prototype;return e.define=function(i){var s=this;if(!i)throw new Error("Cannot configure a schema with no rules");if(typeof i!="object"||Array.isArray(i))throw new Error("Rules must be an object");this.rules={},Object.keys(i).forEach(function(o){var r=i[o];s.rules[o]=Array.isArray(r)?r:[r]})},e.messages=function(i){return i&&(this._messages=f$(Z1(),i)),this._messages},e.validate=function(i,s,o){var r=this;s===void 0&&(s={}),o===void 0&&(o=function(){});var a=i,l=s,c=o;if(typeof l=="function"&&(c=l,l={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,a),Promise.resolve(a);function u(g){var y=[],_={};function C(S){if(Array.isArray(S)){var E;y=(E=y).concat.apply(E,S)}else y.push(S)}for(var w=0;w<g.length;w++)C(g[w]);y.length?(_=Y1(y),c(y,_)):c(null,a)}if(l.messages){var d=this.messages();d===X1&&(d=Z1()),f$(d,l.messages),l.messages=d}else l.messages=this.messages();var h={},f=l.keys||Object.keys(this.rules);f.forEach(function(g){var y=r.rules[g],_=a[g];y.forEach(function(C){var w=C;typeof w.transform=="function"&&(a===i&&(a=xu({},a)),_=a[g]=w.transform(_)),typeof w=="function"?w={validator:w}:w=xu({},w),w.validator=r.getValidationMethod(w),w.validator&&(w.field=g,w.fullField=w.fullField||g,w.type=r.getType(w),h[g]=h[g]||[],h[g].push({rule:w,value:_,source:a,field:g}))})});var m={};return Nue(h,l,function(g,y){var _=g.rule,C=(_.type==="object"||_.type==="array")&&(typeof _.fields=="object"||typeof _.defaultField=="object");C=C&&(_.required||!_.required&&g.value),_.field=g.field;function w(k,A){return xu({},A,{fullField:_.fullField+"."+k,fullFields:_.fullFields?[].concat(_.fullFields,[k]):[k]})}function S(k){k===void 0&&(k=[]);var A=Array.isArray(k)?k:[k];!l.suppressWarning&&A.length&&t.warning("async-validator:",A),A.length&&_.message!==void 0&&(A=[].concat(_.message));var $=A.map(h$(_,a));if(l.first&&$.length)return m[_.field]=1,y($);if(!C)y($);else{if(_.required&&!g.value)return _.message!==void 0?$=[].concat(_.message).map(h$(_,a)):l.error&&($=[l.error(_,_o(l.messages.required,_.field))]),y($);var L={};_.defaultField&&Object.keys(g.value).map(function(V){L[V]=_.defaultField}),L=xu({},L,g.rule.fields);var O={};Object.keys(L).forEach(function(V){var P=L[V],z=Array.isArray(P)?P:[P];O[V]=z.map(w.bind(null,V))});var B=new t(O);B.messages(l.messages),g.rule.options&&(g.rule.options.messages=l.messages,g.rule.options.error=l.error),B.validate(g.value,g.rule.options||l,function(V){var P=[];$&&$.length&&P.push.apply(P,$),V&&V.length&&P.push.apply(P,V),y(P.length?P:null)})}}var E;if(_.asyncValidator)E=_.asyncValidator(_,g.value,S,g.source,l);else if(_.validator){try{E=_.validator(_,g.value,S,g.source,l)}catch(k){console.error==null||console.error(k),l.suppressValidatorError||setTimeout(function(){throw k},0),S(k.message)}E===!0?S():E===!1?S(typeof _.message=="function"?_.message(_.fullField||_.field):_.message||(_.fullField||_.field)+" fails"):E instanceof Array?S(E):E instanceof Error&&S(E.message)}E&&E.then&&E.then(function(){return S()},function(k){return S(k)})},function(g){u(g)},a)},e.getType=function(i){if(i.type===void 0&&i.pattern instanceof RegExp&&(i.type="pattern"),typeof i.validator!="function"&&i.type&&!Pf.hasOwnProperty(i.type))throw new Error(_o("Unknown rule type %s",i.type));return i.type||"string"},e.getValidationMethod=function(i){if(typeof i.validator=="function")return i.validator;var s=Object.keys(i),o=s.indexOf("message");return o!==-1&&s.splice(o,1),s.length===1&&s[0]==="required"?Pf.required:Pf[this.getType(i)]||void 0},t}();pg.register=function(e,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");Pf[e]=n};pg.warning=Rue;pg.messages=X1;pg.validators=Pf;const cde=["","error","validating","success"],ude=De({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:ae([String,Array])},required:{type:Boolean,default:void 0},rules:{type:ae([Object,Array])},error:String,validateStatus:{type:String,values:cde},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:dl}}),g$="ElLabelWrap";var dde=J({name:g$,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(t,{slots:e}){const n=qe(id,void 0),i=qe(oa);i||ki(g$,"usage: <el-form-item><label-wrap /></el-form-item>");const s=_e("form"),o=F(),r=F(0),a=()=>{var u;if((u=o.value)!=null&&u.firstElementChild){const d=window.getComputedStyle(o.value.firstElementChild).width;return Math.ceil(Number.parseFloat(d))}else return 0},l=(u="update")=>{je(()=>{e.default&&t.isAutoWidth&&(u==="update"?r.value=a():u==="remove"&&(n==null||n.deregisterLabelWidth(r.value)))})},c=()=>l("update");return ft(()=>{c()}),Pn(()=>{l("remove")}),ll(()=>c()),Ce(r,(u,d)=>{t.updateAll&&(n==null||n.registerLabelWidth(u,d))}),ms(T(()=>{var u,d;return(d=(u=o.value)==null?void 0:u.firstElementChild)!=null?d:null}),c),()=>{var u,d;if(!e)return null;const{isAutoWidth:h}=t;if(h){const f=n==null?void 0:n.autoLabelWidth,m=i==null?void 0:i.hasLabel,g={};if(m&&f&&f!=="auto"){const y=Math.max(0,Number.parseInt(f,10)-r.value),_=n.labelPosition==="left"?"marginRight":"marginLeft";y&&(g[_]=`${y}px`)}return Z("div",{ref:o,class:[s.be("item","label-wrap")],style:g},[(u=e.default)==null?void 0:u.call(e)])}else return Z(Ye,{ref:o},[(d=e.default)==null?void 0:d.call(e)])}}});const pde=["role","aria-labelledby"],hde=J({name:"ElFormItem"}),fde=J({...hde,props:ude,setup(t,{expose:e}){const n=t,i=Ki(),s=qe(id,void 0),o=qe(oa,void 0),r=gi(void 0,{formItem:!1}),a=_e("form-item"),l=yr().value,c=F([]),u=F(""),d=mq(u,100),h=F(""),f=F();let m,g=!1;const y=T(()=>{if((s==null?void 0:s.labelPosition)==="top")return{};const le=mi(n.labelWidth||(s==null?void 0:s.labelWidth)||"");return le?{width:le}:{}}),_=T(()=>{if((s==null?void 0:s.labelPosition)==="top"||s!=null&&s.inline)return{};if(!n.label&&!n.labelWidth&&L)return{};const le=mi(n.labelWidth||(s==null?void 0:s.labelWidth)||"");return!n.label&&!i.label?{marginLeft:le}:{}}),C=T(()=>[a.b(),a.m(r.value),a.is("error",u.value==="error"),a.is("validating",u.value==="validating"),a.is("success",u.value==="success"),a.is("required",z.value||n.required),a.is("no-asterisk",s==null?void 0:s.hideRequiredAsterisk),(s==null?void 0:s.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[a.m("feedback")]:s==null?void 0:s.statusIcon}]),w=T(()=>fi(n.inlineMessage)?n.inlineMessage:(s==null?void 0:s.inlineMessage)||!1),S=T(()=>[a.e("error"),{[a.em("error","inline")]:w.value}]),E=T(()=>n.prop?at(n.prop)?n.prop:n.prop.join("."):""),k=T(()=>!!(n.label||i.label)),A=T(()=>n.for||c.value.length===1?c.value[0]:void 0),$=T(()=>!A.value&&k.value),L=!!o,O=T(()=>{const le=s==null?void 0:s.model;if(!(!le||!n.prop))return Pv(le,n.prop).value}),B=T(()=>{const{required:le}=n,oe=[];n.rules&&oe.push(...jp(n.rules));const de=s==null?void 0:s.rules;if(de&&n.prop){const ve=Pv(de,n.prop).value;ve&&oe.push(...jp(ve))}if(le!==void 0){const ve=oe.map((He,Q)=>[He,Q]).filter(([He])=>Object.keys(He).includes("required"));if(ve.length>0)for(const[He,Q]of ve)He.required!==le&&(oe[Q]={...He,required:le});else oe.push({required:le})}return oe}),V=T(()=>B.value.length>0),P=le=>B.value.filter(de=>!de.trigger||!le?!0:Array.isArray(de.trigger)?de.trigger.includes(le):de.trigger===le).map(({trigger:de,...ve})=>ve),z=T(()=>B.value.some(le=>le.required)),U=T(()=>{var le;return d.value==="error"&&n.showMessage&&((le=s==null?void 0:s.showMessage)!=null?le:!0)}),W=T(()=>`${n.label||""}${(s==null?void 0:s.labelSuffix)||""}`),R=le=>{u.value=le},D=le=>{var oe,de;const{errors:ve,fields:He}=le;(!ve||!He)&&console.error(le),R("error"),h.value=ve?(de=(oe=ve==null?void 0:ve[0])==null?void 0:oe.message)!=null?de:`${n.prop} is required`:"",s==null||s.emit("validate",n.prop,!1,h.value)},N=()=>{R("success"),s==null||s.emit("validate",n.prop,!0,"")},K=async le=>{const oe=E.value;return new pg({[oe]:le}).validate({[oe]:O.value},{firstFields:!0}).then(()=>(N(),!0)).catch(ve=>(D(ve),Promise.reject(ve)))},ie=async(le,oe)=>{if(g||!n.prop)return!1;const de=ot(oe);if(!V.value)return oe==null||oe(!1),!1;const ve=P(le);return ve.length===0?(oe==null||oe(!0),!0):(R("validating"),K(ve).then(()=>(oe==null||oe(!0),!0)).catch(He=>{const{fields:Q}=He;return oe==null||oe(!1,Q),de?!1:Promise.reject(Q)}))},Y=()=>{R(""),h.value="",g=!1},ne=async()=>{const le=s==null?void 0:s.model;if(!le||!n.prop)return;const oe=Pv(le,n.prop);g=!0,oe.value=zx(m),await je(),Y(),g=!1},we=le=>{c.value.includes(le)||c.value.push(le)},Se=le=>{c.value=c.value.filter(oe=>oe!==le)};Ce(()=>n.error,le=>{h.value=le||"",R(le?"error":"")},{immediate:!0}),Ce(()=>n.validateStatus,le=>R(le||""));const Te=Yt({...Ei(n),$el:f,size:r,validateState:u,labelId:l,inputIds:c,isGroup:$,hasLabel:k,addInputId:we,removeInputId:Se,resetField:ne,clearValidate:Y,validate:ie});return xt(oa,Te),ft(()=>{n.prop&&(s==null||s.addField(Te),m=zx(O.value))}),Pn(()=>{s==null||s.removeField(Te)}),e({size:r,validateMessage:h,validateState:u,validate:ie,clearValidate:Y,resetField:ne}),(le,oe)=>{var de;return I(),H("div",{ref_key:"formItemRef",ref:f,class:x(p(C)),role:p($)?"group":void 0,"aria-labelledby":p($)?p(l):void 0},[Z(p(dde),{"is-auto-width":p(y).width==="auto","update-all":((de=p(s))==null?void 0:de.labelWidth)==="auto"},{default:ee(()=>[p(k)?(I(),ce(It(p(A)?"label":"div"),{key:0,id:p(l),for:p(A),class:x(p(a).e("label")),style:Ke(p(y))},{default:ee(()=>[me(le.$slots,"label",{label:p(W)},()=>[Ut(Re(p(W)),1)])]),_:3},8,["id","for","class","style"])):re("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),G("div",{class:x(p(a).e("content")),style:Ke(p(_))},[me(le.$slots,"default"),Z(oi,{name:`${p(a).namespace.value}-zoom-in-top`},{default:ee(()=>[p(U)?me(le.$slots,"error",{key:0,error:h.value},()=>[G("div",{class:x(p(S))},Re(h.value),3)]):re("v-if",!0)]),_:3},8,["name"])],6)],10,pde)}}});var qF=Ve(fde,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form-item.vue"]]);const mde=yt($ue,{FormItem:qF}),gde=Nn(qF),vde=De({urlList:{type:ae(Array),default:()=>Mn([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),yde={close:()=>!0,switch:t=>st(t)},bde=["src"],_de=J({name:"ElImageViewer"}),wde=J({..._de,props:vde,emits:yde,setup(t,{expose:e,emit:n}){const i=t,s={CONTAIN:{name:"contain",icon:Fu(HY)},ORIGINAL:{name:"original",icon:Fu(iX)}},o=KE()?"DOMMouseScroll":"mousewheel",{t:r}=Gt(),a=_e("image-viewer"),{nextZIndex:l}=hl(),c=F(),u=F([]),d=Rz(),h=F(!0),f=F(i.initialIndex),m=yn(s.CONTAIN),g=F({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),y=T(()=>{const{urlList:D}=i;return D.length<=1}),_=T(()=>f.value===0),C=T(()=>f.value===i.urlList.length-1),w=T(()=>i.urlList[f.value]),S=T(()=>{const{scale:D,deg:N,offsetX:K,offsetY:ie,enableTransition:Y}=g.value;let ne=K/D,we=ie/D;switch(N%360){case 90:case-270:[ne,we]=[we,-ne];break;case 180:case-180:[ne,we]=[-ne,-we];break;case 270:case-90:[ne,we]=[-we,ne];break}const Se={transform:`scale(${D}) rotate(${N}deg) translate(${ne}px, ${we}px)`,transition:Y?"transform .3s":""};return m.value.name===s.CONTAIN.name&&(Se.maxWidth=Se.maxHeight="100%"),Se}),E=T(()=>st(i.zIndex)?i.zIndex:l());function k(){$(),n("close")}function A(){const D=Nu(K=>{switch(K.code){case Xe.esc:i.closeOnPressEscape&&k();break;case Xe.space:P();break;case Xe.left:U();break;case Xe.up:R("zoomIn");break;case Xe.right:W();break;case Xe.down:R("zoomOut");break}}),N=Nu(K=>{(K.wheelDelta?K.wheelDelta:-K.detail)>0?R("zoomIn",{zoomRate:i.zoomRate,enableTransition:!1}):R("zoomOut",{zoomRate:i.zoomRate,enableTransition:!1})});d.run(()=>{En(document,"keydown",D),En(document,o,N)})}function $(){d.stop()}function L(){h.value=!1}function O(D){h.value=!1,D.target.alt=r("el.image.error")}function B(D){if(h.value||D.button!==0||!c.value)return;g.value.enableTransition=!1;const{offsetX:N,offsetY:K}=g.value,ie=D.pageX,Y=D.pageY,ne=Nu(Se=>{g.value={...g.value,offsetX:N+Se.pageX-ie,offsetY:K+Se.pageY-Y}}),we=En(document,"mousemove",ne);En(document,"mouseup",()=>{we()}),D.preventDefault()}function V(){g.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function P(){if(h.value)return;const D=km(s),N=Object.values(s),K=m.value.name,Y=(N.findIndex(ne=>ne.name===K)+1)%D.length;m.value=s[D[Y]],V()}function z(D){const N=i.urlList.length;f.value=(D+N)%N}function U(){_.value&&!i.infinite||z(f.value-1)}function W(){C.value&&!i.infinite||z(f.value+1)}function R(D,N={}){if(h.value)return;const{zoomRate:K,rotateDeg:ie,enableTransition:Y}={zoomRate:i.zoomRate,rotateDeg:90,enableTransition:!0,...N};switch(D){case"zoomOut":g.value.scale>.2&&(g.value.scale=Number.parseFloat((g.value.scale/K).toFixed(3)));break;case"zoomIn":g.value.scale<7&&(g.value.scale=Number.parseFloat((g.value.scale*K).toFixed(3)));break;case"clockwise":g.value.deg+=ie;break;case"anticlockwise":g.value.deg-=ie;break}g.value.enableTransition=Y}return Ce(w,()=>{je(()=>{const D=u.value[0];D!=null&&D.complete||(h.value=!0)})}),Ce(f,D=>{V(),n("switch",D)}),ft(()=>{var D,N;A(),(N=(D=c.value)==null?void 0:D.focus)==null||N.call(D)}),e({setActiveItem:z}),(D,N)=>(I(),ce(tg,{to:"body",disabled:!D.teleported},[Z(oi,{name:"viewer-fade",appear:""},{default:ee(()=>[G("div",{ref_key:"wrapper",ref:c,tabindex:-1,class:x(p(a).e("wrapper")),style:Ke({zIndex:p(E)})},[G("div",{class:x(p(a).e("mask")),onClick:N[0]||(N[0]=rt(K=>D.hideOnClickModal&&k(),["self"]))},null,2),re(" CLOSE "),G("span",{class:x([p(a).e("btn"),p(a).e("close")]),onClick:k},[Z(p(Ge),null,{default:ee(()=>[Z(p(vr))]),_:1})],2),re(" ARROW "),p(y)?re("v-if",!0):(I(),H(Ye,{key:0},[G("span",{class:x([p(a).e("btn"),p(a).e("prev"),p(a).is("disabled",!D.infinite&&p(_))]),onClick:U},[Z(p(Ge),null,{default:ee(()=>[Z(p(Cc))]),_:1})],2),G("span",{class:x([p(a).e("btn"),p(a).e("next"),p(a).is("disabled",!D.infinite&&p(C))]),onClick:W},[Z(p(Ge),null,{default:ee(()=>[Z(p($s))]),_:1})],2)],64)),re(" ACTIONS "),G("div",{class:x([p(a).e("btn"),p(a).e("actions")])},[G("div",{class:x(p(a).e("actions__inner"))},[Z(p(Ge),{onClick:N[1]||(N[1]=K=>R("zoomOut"))},{default:ee(()=>[Z(p(oQ))]),_:1}),Z(p(Ge),{onClick:N[2]||(N[2]=K=>R("zoomIn"))},{default:ee(()=>[Z(p(xR))]),_:1}),G("i",{class:x(p(a).e("actions__divider"))},null,2),Z(p(Ge),{onClick:P},{default:ee(()=>[(I(),ce(It(p(m).icon)))]),_:1}),G("i",{class:x(p(a).e("actions__divider"))},null,2),Z(p(Ge),{onClick:N[3]||(N[3]=K=>R("anticlockwise"))},{default:ee(()=>[Z(p(GZ))]),_:1}),Z(p(Ge),{onClick:N[4]||(N[4]=K=>R("clockwise"))},{default:ee(()=>[Z(p(XZ))]),_:1})],2)],2),re(" CANVAS "),G("div",{class:x(p(a).e("canvas"))},[(I(!0),H(Ye,null,Ot(D.urlList,(K,ie)=>ct((I(),H("img",{ref_for:!0,ref:Y=>u.value[ie]=Y,key:K,src:K,style:Ke(p(S)),class:x(p(a).e("img")),onLoad:L,onError:O,onMousedown:B},null,46,bde)),[[Vt,ie===f.value]])),128))],2),me(D.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var Cde=Ve(wde,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const KF=yt(Cde),Sde=De({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:{type:Boolean,default:!1},scrollContainer:{type:ae([String,Object])},previewSrcList:{type:ae(Array),default:()=>Mn([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),Ede={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>st(t),close:()=>!0,show:()=>!0},kde=["src","loading"],Tde={key:0},Ide=J({name:"ElImage",inheritAttrs:!1}),xde=J({...Ide,props:Sde,emits:Ede,setup(t,{emit:e}){const n=t;let i="";const{t:s}=Gt(),o=_e("image"),r=vh(),a=YE(),l=F(),c=F(!1),u=F(!0),d=F(!1),h=F(),f=F(),m=Nt&&"loading"in HTMLImageElement.prototype;let g,y;const _=T(()=>r.style),C=T(()=>{const{fit:R}=n;return Nt&&R?{objectFit:R}:{}}),w=T(()=>{const{previewSrcList:R}=n;return Array.isArray(R)&&R.length>0}),S=T(()=>{const{previewSrcList:R,initialIndex:D}=n;let N=D;return D>R.length-1&&(N=0),N}),E=T(()=>n.loading==="eager"?!1:!m&&n.loading==="lazy"||n.lazy),k=()=>{Nt&&(u.value=!0,c.value=!1,l.value=n.src)};function A(R){u.value=!1,c.value=!1,e("load",R)}function $(R){u.value=!1,c.value=!0,e("error",R)}function L(){Lq(h.value,f.value)&&(k(),V())}const O=bR(L,200);async function B(){var R;if(!Nt)return;await je();const{scrollContainer:D}=n;gr(D)?f.value=D:at(D)&&D!==""?f.value=(R=document.querySelector(D))!=null?R:void 0:h.value&&(f.value=UE(h.value)),f.value&&(g=En(f,"scroll",O),setTimeout(()=>L(),100))}function V(){!Nt||!f.value||!O||(g==null||g(),f.value=void 0)}function P(R){if(R.ctrlKey){if(R.deltaY<0)return R.preventDefault(),!1;if(R.deltaY>0)return R.preventDefault(),!1}}function z(){w.value&&(y=En("wheel",P,{passive:!1}),i=document.body.style.overflow,document.body.style.overflow="hidden",d.value=!0,e("show"))}function U(){y==null||y(),document.body.style.overflow=i,d.value=!1,e("close")}function W(R){e("switch",R)}return Ce(()=>n.src,()=>{E.value?(u.value=!0,c.value=!1,V(),B()):k()}),ft(()=>{E.value?B():k()}),(R,D)=>(I(),H("div",{ref_key:"container",ref:h,class:x([p(o).b(),R.$attrs.class]),style:Ke(p(_))},[l.value!==void 0&&!c.value?(I(),H("img",kt({key:0},p(a),{src:l.value,loading:R.loading,style:p(C),class:[p(o).e("inner"),p(w)&&p(o).e("preview"),u.value&&p(o).is("loading")],onClick:z,onLoad:A,onError:$}),null,16,kde)):re("v-if",!0),u.value||c.value?(I(),H("div",{key:1,class:x(p(o).e("wrapper"))},[u.value?me(R.$slots,"placeholder",{key:0},()=>[G("div",{class:x(p(o).e("placeholder"))},null,2)]):c.value?me(R.$slots,"error",{key:1},()=>[G("div",{class:x(p(o).e("error"))},Re(p(s)("el.image.error")),3)]):re("v-if",!0)],2)):re("v-if",!0),p(w)?(I(),H(Ye,{key:2},[d.value?(I(),ce(p(KF),{key:0,"z-index":R.zIndex,"initial-index":p(S),infinite:R.infinite,"zoom-rate":R.zoomRate,"url-list":R.previewSrcList,"hide-on-click-modal":R.hideOnClickModal,teleported:R.previewTeleported,"close-on-press-escape":R.closeOnPressEscape,onClose:U,onSwitch:W},{default:ee(()=>[R.$slots.viewer?(I(),H("div",Tde,[me(R.$slots,"viewer")])):re("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):re("v-if",!0)],64)):re("v-if",!0)],6))}});var Mde=Ve(xde,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const $de=yt(Mde),Ade=De({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:Vs,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||st(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0}}),Lde={[bn]:(t,e)=>e!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[As]:t=>st(t)||Gi(t),[wt]:t=>st(t)||Gi(t)},Ode=["aria-label","onKeydown"],Pde=["aria-label","onKeydown"],Rde=J({name:"ElInputNumber"}),Vde=J({...Rde,props:Ade,emits:Lde,setup(t,{expose:e,emit:n}){const i=t,{t:s}=Gt(),o=_e("input-number"),r=F(),a=Yt({currentValue:i.modelValue,userInput:null}),{formItem:l}=Ns(),c=T(()=>st(i.modelValue)&&i.modelValue<=i.min),u=T(()=>st(i.modelValue)&&i.modelValue>=i.max),d=T(()=>{const P=_(i.step);return Ui(i.precision)?Math.max(_(i.modelValue),P):(P>i.precision,i.precision)}),h=T(()=>i.controls&&i.controlsPosition==="right"),f=gi(),m=eo(),g=T(()=>{if(a.userInput!==null)return a.userInput;let P=a.currentValue;if(Gi(P))return"";if(st(P)){if(Number.isNaN(P))return"";Ui(i.precision)||(P=P.toFixed(i.precision))}return P}),y=(P,z)=>{if(Ui(z)&&(z=d.value),z===0)return Math.round(P);let U=String(P);const W=U.indexOf(".");if(W===-1||!U.replace(".","").split("")[W+z])return P;const N=U.length;return U.charAt(N-1)==="5"&&(U=`${U.slice(0,Math.max(0,N-1))}6`),Number.parseFloat(Number(U).toFixed(z))},_=P=>{if(Gi(P))return 0;const z=P.toString(),U=z.indexOf(".");let W=0;return U!==-1&&(W=z.length-U-1),W},C=(P,z=1)=>st(P)?y(P+i.step*z):a.currentValue,w=()=>{if(i.readonly||m.value||u.value)return;const P=Number(g.value)||0,z=C(P);k(z),n(As,a.currentValue)},S=()=>{if(i.readonly||m.value||c.value)return;const P=Number(g.value)||0,z=C(P,-1);k(z),n(As,a.currentValue)},E=(P,z)=>{const{max:U,min:W,step:R,precision:D,stepStrictly:N,valueOnClear:K}=i;let ie=Number(P);if(Gi(P)||Number.isNaN(ie))return null;if(P===""){if(K===null)return null;ie=at(K)?{min:W,max:U}[K]:K}return N&&(ie=y(Math.round(ie/R)*R,D)),Ui(D)||(ie=y(ie,D)),(ie>U||ie<W)&&(ie=ie>U?U:W,z&&n(wt,ie)),ie},k=(P,z=!0)=>{var U;const W=a.currentValue,R=E(P);if(W!==R){if(!z){n(wt,R);return}a.userInput=null,n(wt,R),n(bn,R,W),i.validateEvent&&((U=l==null?void 0:l.validate)==null||U.call(l,"change").catch(D=>void 0)),a.currentValue=R}},A=P=>{a.userInput=P;const z=P===""?null:Number(P);n(As,z),k(z,!1)},$=P=>{const z=P!==""?Number(P):"";(st(z)&&!Number.isNaN(z)||P==="")&&k(z),a.userInput=null},L=()=>{var P,z;(z=(P=r.value)==null?void 0:P.focus)==null||z.call(P)},O=()=>{var P,z;(z=(P=r.value)==null?void 0:P.blur)==null||z.call(P)},B=P=>{n("focus",P)},V=P=>{var z;n("blur",P),i.validateEvent&&((z=l==null?void 0:l.validate)==null||z.call(l,"blur").catch(U=>void 0))};return Ce(()=>i.modelValue,P=>{const z=E(a.userInput),U=E(P,!0);!st(z)&&(!z||z!==U)&&(a.currentValue=U,a.userInput=null)},{immediate:!0}),ft(()=>{var P;const{min:z,max:U,modelValue:W}=i,R=(P=r.value)==null?void 0:P.input;if(R.setAttribute("role","spinbutton"),Number.isFinite(U)?R.setAttribute("aria-valuemax",String(U)):R.removeAttribute("aria-valuemax"),Number.isFinite(z)?R.setAttribute("aria-valuemin",String(z)):R.removeAttribute("aria-valuemin"),R.setAttribute("aria-valuenow",String(a.currentValue)),R.setAttribute("aria-disabled",String(m.value)),!st(W)&&W!=null){let D=Number(W);Number.isNaN(D)&&(D=null),n(wt,D)}}),ll(()=>{var P;const z=(P=r.value)==null?void 0:P.input;z==null||z.setAttribute("aria-valuenow",`${a.currentValue}`)}),e({focus:L,blur:O}),(P,z)=>(I(),H("div",{class:x([p(o).b(),p(o).m(p(f)),p(o).is("disabled",p(m)),p(o).is("without-controls",!P.controls),p(o).is("controls-right",p(h))]),onDragstart:z[0]||(z[0]=rt(()=>{},["prevent"]))},[P.controls?ct((I(),H("span",{key:0,role:"button","aria-label":p(s)("el.inputNumber.decrease"),class:x([p(o).e("decrease"),p(o).is("disabled",p(c))]),onKeydown:Bt(S,["enter"])},[Z(p(Ge),null,{default:ee(()=>[p(h)?(I(),ce(p($c),{key:0})):(I(),ce(p(dZ),{key:1}))]),_:1})],42,Ode)),[[p(Ky),S]]):re("v-if",!0),P.controls?ct((I(),H("span",{key:1,role:"button","aria-label":p(s)("el.inputNumber.increase"),class:x([p(o).e("increase"),p(o).is("disabled",p(u))]),onKeydown:Bt(w,["enter"])},[Z(p(Ge),null,{default:ee(()=>[p(h)?(I(),ce(p(r_),{key:0})):(I(),ce(p(TR),{key:1}))]),_:1})],42,Pde)),[[p(Ky),w]]):re("v-if",!0),Z(p(hs),{id:P.id,ref_key:"input",ref:r,type:"number",step:P.step,"model-value":p(g),placeholder:P.placeholder,readonly:P.readonly,disabled:p(m),size:p(f),max:P.max,min:P.min,name:P.name,label:P.label,"validate-event":!1,onKeydown:[Bt(rt(w,["prevent"]),["up"]),Bt(rt(S,["prevent"]),["down"])],onBlur:V,onFocus:B,onInput:A,onChange:$},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var Fde=Ve(Vde,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const YF=yt(Fde),Dde=De({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:gn}}),Nde={click:t=>t instanceof MouseEvent},Bde=["href"],zde=J({name:"ElLink"}),Hde=J({...zde,props:Dde,emits:Nde,setup(t,{emit:e}){const n=t,i=_e("link"),s=T(()=>[i.b(),i.m(n.type),i.is("disabled",n.disabled),i.is("underline",n.underline&&!n.disabled)]);function o(r){n.disabled||e("click",r)}return(r,a)=>(I(),H("a",{class:x(p(s)),href:r.disabled||!r.href?void 0:r.href,onClick:o},[r.icon?(I(),ce(p(Ge),{key:0},{default:ee(()=>[(I(),ce(It(r.icon)))]),_:1})):re("v-if",!0),r.$slots.default?(I(),H("span",{key:1,class:x(p(i).e("inner"))},[me(r.$slots,"default")],2)):re("v-if",!0),r.$slots.icon?me(r.$slots,"icon",{key:2}):re("v-if",!0)],10,Bde))}});var Ude=Ve(Hde,[["__file","/home/runner/work/element-plus/element-plus/packages/components/link/src/link.vue"]]);const Wde=yt(Ude);let Gde=class{constructor(e,n){this.parent=e,this.domNode=n,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){const e=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,n=>{n.addEventListener("keydown",i=>{let s=!1;switch(i.code){case Xe.down:{this.gotoSubIndex(this.subIndex+1),s=!0;break}case Xe.up:{this.gotoSubIndex(this.subIndex-1),s=!0;break}case Xe.tab:{Lv(e,"mouseleave");break}case Xe.enter:case Xe.space:{s=!0,i.currentTarget.click();break}}return s&&(i.preventDefault(),i.stopPropagation()),!1})})}},jde=class{constructor(e,n){this.domNode=e,this.submenu=null,this.submenu=null,this.init(n)}init(e){this.domNode.setAttribute("tabindex","0");const n=this.domNode.querySelector(`.${e}-menu`);n&&(this.submenu=new Gde(this,n)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",e=>{let n=!1;switch(e.code){case Xe.down:{Lv(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),n=!0;break}case Xe.up:{Lv(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),n=!0;break}case Xe.tab:{Lv(e.currentTarget,"mouseleave");break}case Xe.enter:case Xe.space:{n=!0,e.currentTarget.click();break}}n&&e.preventDefault()})}},qde=class{constructor(e,n){this.domNode=e,this.init(n)}init(e){const n=this.domNode.childNodes;Array.from(n).forEach(i=>{i.nodeType===1&&new jde(i,e)})}};const Kde=J({name:"ElMenuCollapseTransition",setup(){const t=_e("menu");return{listeners:{onBeforeEnter:n=>n.style.opacity="0.2",onEnter(n,i){Wr(n,`${t.namespace.value}-opacity-transition`),n.style.opacity="1",i()},onAfterEnter(n){Zs(n,`${t.namespace.value}-opacity-transition`),n.style.opacity=""},onBeforeLeave(n){n.dataset||(n.dataset={}),ur(n,t.m("collapse"))?(Zs(n,t.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),Wr(n,t.m("collapse"))):(Wr(n,t.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),Zs(n,t.m("collapse"))),n.style.width=`${n.scrollWidth}px`,n.style.overflow="hidden"},onLeave(n){Wr(n,"horizontal-collapse-transition"),n.style.width=`${n.dataset.scrollWidth}px`}}}}});function Yde(t,e,n,i,s,o){return I(),ce(oi,kt({mode:"out-in"},t.listeners),{default:ee(()=>[me(t.$slots,"default")]),_:3},16)}var Zde=Ve(Kde,[["render",Yde],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-collapse-transition.vue"]]);function ZF(t,e){const n=T(()=>{let s=t.parent;const o=[e.value];for(;s.type.name!=="ElMenu";)s.props.index&&o.unshift(s.props.index),s=s.parent;return o});return{parentMenu:T(()=>{let s=t.parent;for(;s&&!["ElMenu","ElSubMenu"].includes(s.type.name);)s=s.parent;return s}),indexPath:n}}function Xde(t){return T(()=>{const n=t.backgroundColor;return n?new NV(n).shade(20).toString():""})}const XF=(t,e)=>{const n=_e("menu");return T(()=>n.cssVarBlock({"text-color":t.textColor||"","hover-text-color":t.textColor||"","bg-color":t.backgroundColor||"","hover-bg-color":Xde(t).value||"","active-color":t.activeTextColor||"",level:`${e}`}))},Qde=De({index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0},popperOffset:{type:Number,default:6},expandCloseIcon:{type:gn},expandOpenIcon:{type:gn},collapseCloseIcon:{type:gn},collapseOpenIcon:{type:gn}}),kw="ElSubMenu";var kk=J({name:kw,props:Qde,setup(t,{slots:e,expose:n}){const i=vt(),{indexPath:s,parentMenu:o}=ZF(i,T(()=>t.index)),r=_e("menu"),a=_e("sub-menu"),l=qe("rootMenu");l||ki(kw,"can not inject root menu");const c=qe(`subMenu:${o.value.uid}`);c||ki(kw,"can not inject sub menu");const u=F({}),d=F({});let h;const f=F(!1),m=F(),g=F(null),y=T(()=>B.value==="horizontal"&&C.value?"bottom-start":"right-start"),_=T(()=>B.value==="horizontal"&&C.value||B.value==="vertical"&&!l.props.collapse?t.expandCloseIcon&&t.expandOpenIcon?k.value?t.expandOpenIcon:t.expandCloseIcon:$c:t.collapseCloseIcon&&t.collapseOpenIcon?k.value?t.collapseOpenIcon:t.collapseCloseIcon:$s),C=T(()=>c.level===0),w=T(()=>t.popperAppendToBody===void 0?C.value:Boolean(t.popperAppendToBody)),S=T(()=>l.props.collapse?`${r.namespace.value}-zoom-in-left`:`${r.namespace.value}-zoom-in-top`),E=T(()=>B.value==="horizontal"&&C.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","left-start","bottom-start","bottom-end","top-start","top-end"]),k=T(()=>l.openedMenus.includes(t.index)),A=T(()=>{let N=!1;return Object.values(u.value).forEach(K=>{K.active&&(N=!0)}),Object.values(d.value).forEach(K=>{K.active&&(N=!0)}),N}),$=T(()=>l.props.backgroundColor||""),L=T(()=>l.props.activeTextColor||""),O=T(()=>l.props.textColor||""),B=T(()=>l.props.mode),V=Yt({index:t.index,indexPath:s,active:A}),P=T(()=>B.value!=="horizontal"?{color:O.value}:{borderBottomColor:A.value?l.props.activeTextColor?L.value:"":"transparent",color:A.value?L.value:O.value}),z=()=>{var N,K,ie;return(ie=(K=(N=g.value)==null?void 0:N.popperRef)==null?void 0:K.popperInstanceRef)==null?void 0:ie.destroy()},U=N=>{N||z()},W=()=>{l.props.menuTrigger==="hover"&&l.props.mode==="horizontal"||l.props.collapse&&l.props.mode==="vertical"||t.disabled||l.handleSubMenuClick({index:t.index,indexPath:s.value,active:A.value})},R=(N,K=t.showTimeout)=>{var ie;N.type!=="focus"&&(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"||t.disabled||(c.mouseInChild.value=!0,h==null||h(),{stop:h}=Yu(()=>{l.openMenu(t.index,s.value)},K),w.value&&((ie=o.value.vnode.el)==null||ie.dispatchEvent(new MouseEvent("mouseenter")))))},D=(N=!1)=>{var K,ie;l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"||(h==null||h(),c.mouseInChild.value=!1,{stop:h}=Yu(()=>!f.value&&l.closeMenu(t.index,s.value),t.hideTimeout),w.value&&N&&((K=i.parent)==null?void 0:K.type.name)==="ElSubMenu"&&((ie=c.handleMouseleave)==null||ie.call(c,!0)))};Ce(()=>l.props.collapse,N=>U(Boolean(N)));{const N=ie=>{d.value[ie.index]=ie},K=ie=>{delete d.value[ie.index]};xt(`subMenu:${i.uid}`,{addSubMenu:N,removeSubMenu:K,handleMouseleave:D,mouseInChild:f,level:c.level+1})}return n({opened:k}),ft(()=>{l.addSubMenu(V),c.addSubMenu(V)}),Pn(()=>{c.removeSubMenu(V),l.removeSubMenu(V)}),()=>{var N;const K=[(N=e.title)==null?void 0:N.call(e),Ze(Ge,{class:a.e("icon-arrow"),style:{transform:k.value?t.expandCloseIcon&&t.expandOpenIcon||t.collapseCloseIcon&&t.collapseOpenIcon&&l.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>at(_.value)?Ze(i.appContext.components[_.value]):Ze(_.value)})],ie=XF(l.props,c.level+1),Y=l.isMenuPopup?Ze(Fs,{ref:g,visible:k.value,effect:"light",pure:!0,offset:t.popperOffset,showArrow:!1,persistent:!0,popperClass:t.popperClass,placement:y.value,teleported:w.value,fallbackPlacements:E.value,transition:S.value,gpuAcceleration:!1},{content:()=>{var ne;return Ze("div",{class:[r.m(B.value),r.m("popup-container"),t.popperClass],onMouseenter:we=>R(we,100),onMouseleave:()=>D(!0),onFocus:we=>R(we,100)},[Ze("ul",{class:[r.b(),r.m("popup"),r.m(`popup-${y.value}`)],style:ie.value},[(ne=e.default)==null?void 0:ne.call(e)])])},default:()=>Ze("div",{class:a.e("title"),style:[P.value,{backgroundColor:$.value}],onClick:W},K)}):Ze(Ye,{},[Ze("div",{class:a.e("title"),style:[P.value,{backgroundColor:$.value}],ref:m,onClick:W},K),Ze(w_,{},{default:()=>{var ne;return ct(Ze("ul",{role:"menu",class:[r.b(),r.m("inline")],style:ie.value},[(ne=e.default)==null?void 0:ne.call(e)]),[[Vt,k.value]])}})]);return Ze("li",{class:[a.b(),a.is("active",A.value),a.is("opened",k.value),a.is("disabled",t.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:k.value,onMouseenter:R,onMouseleave:()=>D(!0),onFocus:R},[Y])}}});const Jde=De({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:ae(Array),default:()=>Mn([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperEffect:{type:String,values:["dark","light"],default:"dark"}}),Tw=t=>Array.isArray(t)&&t.every(e=>at(e)),epe={close:(t,e)=>at(t)&&Tw(e),open:(t,e)=>at(t)&&Tw(e),select:(t,e,n,i)=>at(t)&&Tw(e)&&Et(n)&&(i===void 0||i instanceof Promise)};var tpe=J({name:"ElMenu",props:Jde,emits:epe,setup(t,{emit:e,slots:n,expose:i}){const s=vt(),o=s.appContext.config.globalProperties.$router,r=F(),a=_e("menu"),l=_e("sub-menu"),c=F(-1),u=F(t.defaultOpeneds&&!t.collapse?t.defaultOpeneds.slice(0):[]),d=F(t.defaultActive),h=F({}),f=F({}),m=T(()=>t.mode==="horizontal"||t.mode==="vertical"&&t.collapse),g=()=>{const O=d.value&&h.value[d.value];if(!O||t.mode==="horizontal"||t.collapse)return;O.indexPath.forEach(V=>{const P=f.value[V];P&&y(V,P.indexPath)})},y=(O,B)=>{u.value.includes(O)||(t.uniqueOpened&&(u.value=u.value.filter(V=>B.includes(V))),u.value.push(O),e("open",O,B))},_=(O,B)=>{const V=u.value.indexOf(O);V!==-1&&u.value.splice(V,1),e("close",O,B)},C=({index:O,indexPath:B})=>{u.value.includes(O)?_(O,B):y(O,B)},w=O=>{(t.mode==="horizontal"||t.collapse)&&(u.value=[]);const{index:B,indexPath:V}=O;if(!(B===void 0||V===void 0))if(t.router&&o){const P=O.route||B,z=o.push(P).then(U=>(U||(d.value=B),U));e("select",B,V,{index:B,indexPath:V,route:P},z)}else d.value=B,e("select",B,V,{index:B,indexPath:V})},S=O=>{const B=h.value,V=B[O]||d.value&&B[d.value]||B[t.defaultActive];V?d.value=V.index:d.value=O},E=()=>{var O,B;if(!r.value)return-1;const V=Array.from((B=(O=r.value)==null?void 0:O.childNodes)!=null?B:[]).filter(N=>N.nodeName!=="#text"||N.nodeValue),P=64,z=Number.parseInt(getComputedStyle(r.value).paddingLeft,10),U=Number.parseInt(getComputedStyle(r.value).paddingRight,10),W=r.value.clientWidth-z-U;let R=0,D=0;return V.forEach((N,K)=>{R+=N.offsetWidth||0,R<=W-P&&(D=K+1)}),D===V.length?-1:D},k=(O,B=33.34)=>{let V;return()=>{V&&clearTimeout(V),V=setTimeout(()=>{O()},B)}};let A=!0;const $=()=>{const O=()=>{c.value=-1,je(()=>{c.value=E()})};A?O():k(O)(),A=!1};Ce(()=>t.defaultActive,O=>{h.value[O]||(d.value=""),S(O)}),Ce(()=>t.collapse,O=>{O&&(u.value=[])}),Ce(h.value,g);let L;Co(()=>{t.mode==="horizontal"&&t.ellipsis?L=ms(r,$).stop:L==null||L()});{const O=z=>{f.value[z.index]=z},B=z=>{delete f.value[z.index]};xt("rootMenu",Yt({props:t,openedMenus:u,items:h,subMenus:f,activeIndex:d,isMenuPopup:m,addMenuItem:z=>{h.value[z.index]=z},removeMenuItem:z=>{delete h.value[z.index]},addSubMenu:O,removeSubMenu:B,openMenu:y,closeMenu:_,handleMenuItemClick:w,handleSubMenuClick:C})),xt(`subMenu:${s.uid}`,{addSubMenu:O,removeSubMenu:B,mouseInChild:F(!1),level:0})}return ft(()=>{t.mode==="horizontal"&&new qde(s.vnode.el,a.namespace.value)}),i({open:B=>{const{indexPath:V}=f.value[B];V.forEach(P=>y(P,V))},close:_,handleResize:$}),()=>{var O,B;let V=(B=(O=n.default)==null?void 0:O.call(n))!=null?B:[];const P=[];if(t.mode==="horizontal"&&r.value){const W=vp(V),R=c.value===-1?W:W.slice(0,c.value),D=c.value===-1?[]:W.slice(c.value);D!=null&&D.length&&t.ellipsis&&(V=R,P.push(Ze(kk,{index:"sub-menu-more",class:l.e("hide-arrow")},{title:()=>Ze(Ge,{class:l.e("icon-more")},{default:()=>Ze(CZ)}),default:()=>D})))}const z=XF(t,0),U=Ze("ul",{key:String(t.collapse),role:"menubar",ref:r,style:z.value,class:{[a.b()]:!0,[a.m(t.mode)]:!0,[a.m("collapse")]:t.collapse}},[...V,...P]);return t.collapseTransition&&t.mode==="vertical"?Ze(Zde,()=>U):U}}});const npe=De({index:{type:ae([String,null]),default:null},route:{type:ae([String,Object])},disabled:Boolean}),ipe={click:t=>at(t.index)&&Array.isArray(t.indexPath)},Iw="ElMenuItem",spe=J({name:Iw,components:{ElTooltip:Fs},props:npe,emits:ipe,setup(t,{emit:e}){const n=vt(),i=qe("rootMenu"),s=_e("menu"),o=_e("menu-item");i||ki(Iw,"can not inject root menu");const{parentMenu:r,indexPath:a}=ZF(n,On(t,"index")),l=qe(`subMenu:${r.value.uid}`);l||ki(Iw,"can not inject sub menu");const c=T(()=>t.index===i.activeIndex),u=Yt({index:t.index,indexPath:a,active:c}),d=()=>{t.disabled||(i.handleMenuItemClick({index:t.index,indexPath:a.value,route:t.route}),e("click",u))};return ft(()=>{l.addSubMenu(u),i.addMenuItem(u)}),Pn(()=>{l.removeSubMenu(u),i.removeMenuItem(u)}),{parentMenu:r,rootMenu:i,active:c,nsMenu:s,nsMenuItem:o,handleClick:d}}});function ope(t,e,n,i,s,o){const r=pt("el-tooltip");return I(),H("li",{class:x([t.nsMenuItem.b(),t.nsMenuItem.is("active",t.active),t.nsMenuItem.is("disabled",t.disabled)]),role:"menuitem",tabindex:"-1",onClick:e[0]||(e[0]=(...a)=>t.handleClick&&t.handleClick(...a))},[t.parentMenu.type.name==="ElMenu"&&t.rootMenu.props.collapse&&t.$slots.title?(I(),ce(r,{key:0,effect:t.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:ee(()=>[me(t.$slots,"title")]),default:ee(()=>[G("div",{class:x(t.nsMenu.be("tooltip","trigger"))},[me(t.$slots,"default")],2)]),_:3},8,["effect"])):(I(),H(Ye,{key:1},[me(t.$slots,"default"),me(t.$slots,"title")],64))],2)}var QF=Ve(spe,[["render",ope],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item.vue"]]);const rpe={title:String},ape="ElMenuItemGroup",lpe=J({name:ape,props:rpe,setup(){return{ns:_e("menu-item-group")}}});function cpe(t,e,n,i,s,o){return I(),H("li",{class:x(t.ns.b())},[G("div",{class:x(t.ns.e("title"))},[t.$slots.title?me(t.$slots,"title",{key:1}):(I(),H(Ye,{key:0},[Ut(Re(t.title),1)],64))],2),G("ul",null,[me(t.$slots,"default")])],2)}var JF=Ve(lpe,[["render",cpe],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item-group.vue"]]);const upe=yt(tpe,{MenuItem:QF,MenuItemGroup:JF,SubMenu:kk}),dpe=Nn(QF),ppe=Nn(JF),hpe=Nn(kk),fpe=De({icon:{type:gn,default:()=>dK},title:String,content:{type:String,default:""}}),mpe={back:()=>!0},gpe=["aria-label"],vpe=J({name:"ElPageHeader"}),ype=J({...vpe,props:fpe,emits:mpe,setup(t,{emit:e}){const n=Ki(),{t:i}=Gt(),s=_e("page-header"),o=T(()=>[s.b(),{[s.m("has-breadcrumb")]:!!n.breadcrumb,[s.m("has-extra")]:!!n.extra,[s.is("contentful")]:!!n.default}]);function r(){e("back")}return(a,l)=>(I(),H("div",{class:x(p(o))},[a.$slots.breadcrumb?(I(),H("div",{key:0,class:x(p(s).e("breadcrumb"))},[me(a.$slots,"breadcrumb")],2)):re("v-if",!0),G("div",{class:x(p(s).e("header"))},[G("div",{class:x(p(s).e("left"))},[G("div",{class:x(p(s).e("back")),role:"button",tabindex:"0",onClick:r},[a.icon||a.$slots.icon?(I(),H("div",{key:0,"aria-label":a.title||p(i)("el.pageHeader.title"),class:x(p(s).e("icon"))},[me(a.$slots,"icon",{},()=>[a.icon?(I(),ce(p(Ge),{key:0},{default:ee(()=>[(I(),ce(It(a.icon)))]),_:1})):re("v-if",!0)])],10,gpe)):re("v-if",!0),G("div",{class:x(p(s).e("title"))},[me(a.$slots,"title",{},()=>[Ut(Re(a.title||p(i)("el.pageHeader.title")),1)])],2)],2),Z(p(VF),{direction:"vertical"}),G("div",{class:x(p(s).e("content"))},[me(a.$slots,"content",{},()=>[Ut(Re(a.content),1)])],2)],2),a.$slots.extra?(I(),H("div",{key:0,class:x(p(s).e("extra"))},[me(a.$slots,"extra")],2)):re("v-if",!0)],2),a.$slots.default?(I(),H("div",{key:1,class:x(p(s).e("main"))},[me(a.$slots,"default")],2)):re("v-if",!0)],2))}});var bpe=Ve(ype,[["__file","/home/runner/work/element-plus/element-plus/packages/components/page-header/src/page-header.vue"]]);const _pe=yt(bpe),wpe=De({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:gn}}),Cpe={click:t=>t instanceof MouseEvent},Spe=["disabled","aria-disabled"],Epe={key:0},kpe=J({name:"ElPaginationPrev"}),Tpe=J({...kpe,props:wpe,emits:Cpe,setup(t){const e=t,n=T(()=>e.disabled||e.currentPage<=1);return(i,s)=>(I(),H("button",{type:"button",class:"btn-prev",disabled:p(n),"aria-disabled":p(n),onClick:s[0]||(s[0]=o=>i.$emit("click",o))},[i.prevText?(I(),H("span",Epe,Re(i.prevText),1)):(I(),ce(p(Ge),{key:1},{default:ee(()=>[(I(),ce(It(i.prevIcon)))]),_:1}))],8,Spe))}});var Ipe=Ve(Tpe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/prev.vue"]]);const xpe=De({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:gn}}),Mpe=["disabled","aria-disabled"],$pe={key:0},Ape=J({name:"ElPaginationNext"}),Lpe=J({...Ape,props:xpe,emits:["click"],setup(t){const e=t,n=T(()=>e.disabled||e.currentPage===e.pageCount||e.pageCount===0);return(i,s)=>(I(),H("button",{type:"button",class:"btn-next",disabled:p(n),"aria-disabled":p(n),onClick:s[0]||(s[0]=o=>i.$emit("click",o))},[i.nextText?(I(),H("span",$pe,Re(i.nextText),1)):(I(),ce(p(Ge),{key:1},{default:ee(()=>[(I(),ce(It(i.nextIcon)))]),_:1}))],8,Mpe))}});var Ope=Ve(Lpe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/next.vue"]]);const eD="ElSelectGroup",hg="ElSelect";function Ppe(t,e){const n=qe(hg),i=qe(eD,{disabled:!1}),s=T(()=>Object.prototype.toString.call(t.value).toLowerCase()==="[object object]"),o=T(()=>n.props.multiple?d(n.props.modelValue,t.value):h(t.value,n.props.modelValue)),r=T(()=>{if(n.props.multiple){const g=n.props.modelValue||[];return!o.value&&g.length>=n.props.multipleLimit&&n.props.multipleLimit>0}else return!1}),a=T(()=>t.label||(s.value?"":t.value)),l=T(()=>t.value||t.label||""),c=T(()=>t.disabled||e.groupDisabled||r.value),u=vt(),d=(g=[],y)=>{if(s.value){const _=n.props.valueKey;return g&&g.some(C=>en(xn(C,_))===xn(y,_))}else return g&&g.includes(y)},h=(g,y)=>{if(s.value){const{valueKey:_}=n.props;return xn(g,_)===xn(y,_)}else return g===y},f=()=>{!t.disabled&&!i.disabled&&(n.hoverIndex=n.optionsArray.indexOf(u.proxy))};Ce(()=>a.value,()=>{!t.created&&!n.props.remote&&n.setSelected()}),Ce(()=>t.value,(g,y)=>{const{remote:_,valueKey:C}=n.props;if(Object.is(g,y)||(n.onOptionDestroy(y,u.proxy),n.onOptionCreate(u.proxy)),!t.created&&!_){if(C&&typeof g=="object"&&typeof y=="object"&&g[C]===y[C])return;n.setSelected()}}),Ce(()=>i.disabled,()=>{e.groupDisabled=i.disabled},{immediate:!0});const{queryChange:m}=en(n);return Ce(m,g=>{const{query:y}=p(g),_=new RegExp(_R(y),"i");e.visible=_.test(a.value)||t.created,e.visible||n.filteredOptionsCount--}),{select:n,currentLabel:a,currentValue:l,itemSelected:o,isDisabled:c,hoverItem:f}}const Rpe=J({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},setup(t){const e=_e("select"),n=Yt({index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}),{currentLabel:i,itemSelected:s,isDisabled:o,select:r,hoverItem:a}=Ppe(t,n),{visible:l,hover:c}=Ei(n),u=vt().proxy;r.onOptionCreate(u),Pn(()=>{const h=u.value,{selected:f}=r,g=(r.props.multiple?f:[f]).some(y=>y.value===u.value);je(()=>{r.cachedOptions.get(h)===u&&!g&&r.cachedOptions.delete(h)}),r.onOptionDestroy(h,u)});function d(){t.disabled!==!0&&n.groupDisabled!==!0&&r.handleOptionSelect(u,!0)}return{ns:e,currentLabel:i,itemSelected:s,isDisabled:o,select:r,hoverItem:a,visible:l,hover:c,selectOptionClick:d,states:n}}});function Vpe(t,e,n,i,s,o){return ct((I(),H("li",{class:x([t.ns.be("dropdown","item"),t.ns.is("disabled",t.isDisabled),{selected:t.itemSelected,hover:t.hover}]),onMouseenter:e[0]||(e[0]=(...r)=>t.hoverItem&&t.hoverItem(...r)),onClick:e[1]||(e[1]=rt((...r)=>t.selectOptionClick&&t.selectOptionClick(...r),["stop"]))},[me(t.$slots,"default",{},()=>[G("span",null,Re(t.currentLabel),1)])],34)),[[Vt,t.visible]])}var Tk=Ve(Rpe,[["render",Vpe],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option.vue"]]);const Fpe=J({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const t=qe(hg),e=_e("select"),n=T(()=>t.props.popperClass),i=T(()=>t.props.multiple),s=T(()=>t.props.fitInputWidth),o=F("");function r(){var a;o.value=`${(a=t.selectWrapper)==null?void 0:a.offsetWidth}px`}return ft(()=>{r(),ms(t.selectWrapper,r)}),{ns:e,minWidth:o,popperClass:n,isMultiple:i,isFitInputWidth:s}}});function Dpe(t,e,n,i,s,o){return I(),H("div",{class:x([t.ns.b("dropdown"),t.ns.is("multiple",t.isMultiple),t.popperClass]),style:Ke({[t.isFitInputWidth?"width":"minWidth"]:t.minWidth})},[me(t.$slots,"default")],6)}var Npe=Ve(Fpe,[["render",Dpe],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select-dropdown.vue"]]);function Bpe(t){const{t:e}=Gt();return Yt({options:new Map,cachedOptions:new Map,createdLabel:null,createdSelected:!1,selected:t.multiple?[]:{},inputLength:20,inputWidth:0,optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,cachedPlaceHolder:"",currentPlaceholder:e("el.select.placeholder"),menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1,prefixWidth:11,tagInMultiLine:!1,mouseEnter:!1})}const zpe=(t,e,n)=>{const{t:i}=Gt(),s=_e("select");Xa({from:"suffixTransition",replacement:"override style scheme",version:"2.3.0",scope:"props",ref:"https://element-plus.org/en-US/component/select.html#select-attributes"},T(()=>t.suffixTransition===!1));const o=F(null),r=F(null),a=F(null),l=F(null),c=F(null),u=F(null),d=F(-1),h=yn({query:""}),f=yn(""),{form:m,formItem:g}=Ns(),y=T(()=>!t.filterable||t.multiple||!e.visible),_=T(()=>t.disabled||(m==null?void 0:m.disabled)),C=T(()=>{const j=t.multiple?Array.isArray(t.modelValue)&&t.modelValue.length>0:t.modelValue!==void 0&&t.modelValue!==null&&t.modelValue!=="";return t.clearable&&!_.value&&e.inputHovering&&j}),w=T(()=>t.remote&&t.filterable&&!t.remoteShowSuffix?"":t.suffixIcon),S=T(()=>s.is("reverse",w.value&&e.visible&&t.suffixTransition)),E=T(()=>t.remote?300:0),k=T(()=>t.loading?t.loadingText||i("el.select.loading"):t.remote&&e.query===""&&e.options.size===0?!1:t.filterable&&e.query&&e.options.size>0&&e.filteredOptionsCount===0?t.noMatchText||i("el.select.noMatch"):e.options.size===0?t.noDataText||i("el.select.noData"):null),A=T(()=>Array.from(e.options.values())),$=T(()=>Array.from(e.cachedOptions.values())),L=T(()=>{const j=A.value.filter(te=>!te.created).some(te=>te.currentLabel===e.query);return t.filterable&&t.allowCreate&&e.query!==""&&!j}),O=gi(),B=T(()=>["small"].includes(O.value)?"small":"default"),V=T({get(){return e.visible&&k.value!==!1},set(j){e.visible=j}});Ce([()=>_.value,()=>O.value,()=>m==null?void 0:m.size],()=>{je(()=>{P()})}),Ce(()=>t.placeholder,j=>{e.cachedPlaceHolder=e.currentPlaceholder=j}),Ce(()=>t.modelValue,(j,te)=>{t.multiple&&(P(),j&&j.length>0||r.value&&e.query!==""?e.currentPlaceholder="":e.currentPlaceholder=e.cachedPlaceHolder,t.filterable&&!t.reserveKeyword&&(e.query="",z(e.query))),R(),t.filterable&&!t.multiple&&(e.inputLength=20),!So(j,te)&&t.validateEvent&&(g==null||g.validate("change").catch(ye=>void 0))},{flush:"post",deep:!0}),Ce(()=>e.visible,j=>{var te,ye,Ie;j?((ye=(te=a.value)==null?void 0:te.updatePopper)==null||ye.call(te),t.filterable&&(e.filteredOptionsCount=e.optionsCount,e.query=t.remote?"":e.selectedLabel,t.multiple?(Ie=r.value)==null||Ie.focus():e.selectedLabel&&(e.currentPlaceholder=`${e.selectedLabel}`,e.selectedLabel=""),z(e.query),!t.multiple&&!t.remote&&(h.value.query="",$h(h),$h(f)))):(t.filterable&&(ot(t.filterMethod)&&t.filterMethod(""),ot(t.remoteMethod)&&t.remoteMethod("")),r.value&&r.value.blur(),e.query="",e.previousQuery=null,e.selectedLabel="",e.inputLength=20,e.menuVisibleOnFocus=!1,N(),je(()=>{r.value&&r.value.value===""&&e.selected.length===0&&(e.currentPlaceholder=e.cachedPlaceHolder)}),t.multiple||(e.selected&&(t.filterable&&t.allowCreate&&e.createdSelected&&e.createdLabel?e.selectedLabel=e.createdLabel:e.selectedLabel=e.selected.currentLabel,t.filterable&&(e.query=e.selectedLabel)),t.filterable&&(e.currentPlaceholder=e.cachedPlaceHolder))),n.emit("visible-change",j)}),Ce(()=>e.options.entries(),()=>{var j,te,ye;if(!Nt)return;(te=(j=a.value)==null?void 0:j.updatePopper)==null||te.call(j),t.multiple&&P();const Ie=((ye=c.value)==null?void 0:ye.querySelectorAll("input"))||[];Array.from(Ie).includes(document.activeElement)||R(),t.defaultFirstOption&&(t.filterable||t.remote)&&e.filteredOptionsCount&&W()},{flush:"post"}),Ce(()=>e.hoverIndex,j=>{st(j)&&j>-1?d.value=A.value[j]||{}:d.value={},A.value.forEach(te=>{te.hover=d.value===te})});const P=()=>{t.collapseTags&&!t.filterable||je(()=>{var j,te;if(!o.value)return;const ye=o.value.$el.querySelector("input"),Ie=l.value,Ct=uQ(O.value||(m==null?void 0:m.size));ye.style.height=`${(e.selected.length===0?Ct:Math.max(Ie?Ie.clientHeight+(Ie.clientHeight>Ct?6:0):0,Ct))-2}px`,e.tagInMultiLine=Number.parseFloat(ye.style.height)>=Ct,e.visible&&k.value!==!1&&((te=(j=a.value)==null?void 0:j.updatePopper)==null||te.call(j))})},z=async j=>{if(!(e.previousQuery===j||e.isOnComposition)){if(e.previousQuery===null&&(ot(t.filterMethod)||ot(t.remoteMethod))){e.previousQuery=j;return}e.previousQuery=j,je(()=>{var te,ye;e.visible&&((ye=(te=a.value)==null?void 0:te.updatePopper)==null||ye.call(te))}),e.hoverIndex=-1,t.multiple&&t.filterable&&je(()=>{const te=r.value.value.length*15+20;e.inputLength=t.collapseTags?Math.min(50,te):te,U(),P()}),t.remote&&ot(t.remoteMethod)?(e.hoverIndex=-1,t.remoteMethod(j)):ot(t.filterMethod)?(t.filterMethod(j),$h(f)):(e.filteredOptionsCount=e.optionsCount,h.value.query=j,$h(h),$h(f)),t.defaultFirstOption&&(t.filterable||t.remote)&&e.filteredOptionsCount&&(await je(),W())}},U=()=>{e.currentPlaceholder!==""&&(e.currentPlaceholder=r.value.value?"":e.cachedPlaceHolder)},W=()=>{const j=A.value.filter(Ie=>Ie.visible&&!Ie.disabled&&!Ie.states.groupDisabled),te=j.find(Ie=>Ie.created),ye=j[0];e.hoverIndex=ve(A.value,te||ye)},R=()=>{var j;if(t.multiple)e.selectedLabel="";else{const ye=D(t.modelValue);(j=ye.props)!=null&&j.created?(e.createdLabel=ye.props.value,e.createdSelected=!0):e.createdSelected=!1,e.selectedLabel=ye.currentLabel,e.selected=ye,t.filterable&&(e.query=e.selectedLabel);return}const te=[];Array.isArray(t.modelValue)&&t.modelValue.forEach(ye=>{te.push(D(ye))}),e.selected=te,je(()=>{P()})},D=j=>{let te;const ye=Iv(j).toLowerCase()==="object",Ie=Iv(j).toLowerCase()==="null",Ct=Iv(j).toLowerCase()==="undefined";for(let Pi=e.cachedOptions.size-1;Pi>=0;Pi--){const un=$.value[Pi];if(ye?xn(un.value,t.valueKey)===xn(j,t.valueKey):un.value===j){te={value:j,currentLabel:un.currentLabel,isDisabled:un.isDisabled};break}}if(te)return te;const an=ye?j.label:!Ie&&!Ct?j:"",pi={value:j,currentLabel:an};return t.multiple&&(pi.hitState=!1),pi},N=()=>{setTimeout(()=>{const j=t.valueKey;t.multiple?e.selected.length>0?e.hoverIndex=Math.min.apply(null,e.selected.map(te=>A.value.findIndex(ye=>xn(ye,j)===xn(te,j)))):e.hoverIndex=-1:e.hoverIndex=A.value.findIndex(te=>bt(te)===bt(e.selected))},300)},K=()=>{var j,te;ie(),(te=(j=a.value)==null?void 0:j.updatePopper)==null||te.call(j),t.multiple&&!t.filterable&&P()},ie=()=>{var j;e.inputWidth=(j=o.value)==null?void 0:j.$el.getBoundingClientRect().width},Y=()=>{t.filterable&&e.query!==e.selectedLabel&&(e.query=e.selectedLabel,z(e.query))},ne=Rs(()=>{Y()},E.value),we=Rs(j=>{z(j.target.value)},E.value),Se=j=>{So(t.modelValue,j)||n.emit(bn,j)},Te=j=>{if(j.target.value.length<=0&&!Oe()){const te=t.modelValue.slice();te.pop(),n.emit(wt,te),Se(te)}j.target.value.length===1&&t.modelValue.length===0&&(e.currentPlaceholder=e.cachedPlaceHolder)},le=(j,te)=>{const ye=e.selected.indexOf(te);if(ye>-1&&!_.value){const Ie=t.modelValue.slice();Ie.splice(ye,1),n.emit(wt,Ie),Se(Ie),n.emit("remove-tag",te.value)}j.stopPropagation()},oe=j=>{j.stopPropagation();const te=t.multiple?[]:"";if(!at(te))for(const ye of e.selected)ye.isDisabled&&te.push(ye.value);n.emit(wt,te),Se(te),e.hoverIndex=-1,e.visible=!1,n.emit("clear")},de=(j,te)=>{var ye;if(t.multiple){const Ie=(t.modelValue||[]).slice(),Ct=ve(Ie,j.value);Ct>-1?Ie.splice(Ct,1):(t.multipleLimit<=0||Ie.length<t.multipleLimit)&&Ie.push(j.value),n.emit(wt,Ie),Se(Ie),j.created&&(e.query="",z(""),e.inputLength=20),t.filterable&&((ye=r.value)==null||ye.focus())}else n.emit(wt,j.value),Se(j.value),e.visible=!1;e.isSilentBlur=te,He(),!e.visible&&je(()=>{Q(j)})},ve=(j=[],te)=>{if(!Et(te))return j.indexOf(te);const ye=t.valueKey;let Ie=-1;return j.some((Ct,an)=>en(xn(Ct,ye))===xn(te,ye)?(Ie=an,!0):!1),Ie},He=()=>{e.softFocus=!0;const j=r.value||o.value;j&&(j==null||j.focus())},Q=j=>{var te,ye,Ie,Ct,an;const pi=Array.isArray(j)?j[0]:j;let Pi=null;if(pi!=null&&pi.value){const un=A.value.filter(jt=>jt.value===pi.value);un.length>0&&(Pi=un[0].$el)}if(a.value&&Pi){const un=(Ct=(Ie=(ye=(te=a.value)==null?void 0:te.popperRef)==null?void 0:ye.contentRef)==null?void 0:Ie.querySelector)==null?void 0:Ct.call(Ie,`.${s.be("dropdown","wrap")}`);un&&SR(un,Pi)}(an=u.value)==null||an.handleScroll()},se=j=>{e.optionsCount++,e.filteredOptionsCount++,e.options.set(j.value,j),e.cachedOptions.set(j.value,j)},fe=(j,te)=>{e.options.get(j)===te&&(e.optionsCount--,e.filteredOptionsCount--,e.options.delete(j))},Me=j=>{j.code!==Xe.backspace&&Oe(!1),e.inputLength=r.value.value.length*15+20,P()},Oe=j=>{if(!Array.isArray(e.selected))return;const te=e.selected[e.selected.length-1];if(te)return j===!0||j===!1?(te.hitState=j,j):(te.hitState=!te.hitState,te.hitState)},pe=j=>{const te=j.target.value;if(j.type==="compositionend")e.isOnComposition=!1,je(()=>z(te));else{const ye=te[te.length-1]||"";e.isOnComposition=!c_(ye)}},Le=()=>{je(()=>Q(e.selected))},be=j=>{e.softFocus?e.softFocus=!1:((t.automaticDropdown||t.filterable)&&(t.filterable&&!e.visible&&(e.menuVisibleOnFocus=!0),e.visible=!0),n.emit("focus",j))},Pe=()=>{var j;e.visible=!1,(j=o.value)==null||j.blur()},Ee=j=>{je(()=>{e.isSilentBlur?e.isSilentBlur=!1:n.emit("blur",j)}),e.softFocus=!1},he=j=>{oe(j)},Ne=()=>{e.visible=!1},Be=j=>{e.visible&&(j.preventDefault(),j.stopPropagation(),e.visible=!1)},Qe=j=>{var te;j&&!e.mouseEnter||_.value||(e.menuVisibleOnFocus?e.menuVisibleOnFocus=!1:(!a.value||!a.value.isFocusInsideContent())&&(e.visible=!e.visible),e.visible&&((te=r.value||o.value)==null||te.focus()))},ut=()=>{e.visible?A.value[e.hoverIndex]&&de(A.value[e.hoverIndex],void 0):Qe()},bt=j=>Et(j.value)?xn(j.value,t.valueKey):j.value,it=T(()=>A.value.filter(j=>j.visible).every(j=>j.disabled)),X=j=>{if(!e.visible){e.visible=!0;return}if(!(e.options.size===0||e.filteredOptionsCount===0)&&!e.isOnComposition&&!it.value){j==="next"?(e.hoverIndex++,e.hoverIndex===e.options.size&&(e.hoverIndex=0)):j==="prev"&&(e.hoverIndex--,e.hoverIndex<0&&(e.hoverIndex=e.options.size-1));const te=A.value[e.hoverIndex];(te.disabled===!0||te.states.groupDisabled===!0||!te.visible)&&X(j),je(()=>Q(d.value))}};return{optionsArray:A,selectSize:O,handleResize:K,debouncedOnInputChange:ne,debouncedQueryChange:we,deletePrevTag:Te,deleteTag:le,deleteSelected:oe,handleOptionSelect:de,scrollToOption:Q,readonly:y,resetInputHeight:P,showClose:C,iconComponent:w,iconReverse:S,showNewOption:L,collapseTagSize:B,setSelected:R,managePlaceholder:U,selectDisabled:_,emptyText:k,toggleLastOptionHitState:Oe,resetInputState:Me,handleComposition:pe,onOptionCreate:se,onOptionDestroy:fe,handleMenuEnter:Le,handleFocus:be,blur:Pe,handleBlur:Ee,handleClearClick:he,handleClose:Ne,handleKeydownEscape:Be,toggleMenu:Qe,selectOption:ut,getValueKey:bt,navigateOptions:X,dropMenuVisible:V,queryChange:h,groupQueryChange:f,reference:o,input:r,tooltipRef:a,tags:l,selectWrapper:c,scrollbar:u,handleMouseEnter:()=>{e.mouseEnter=!0},handleMouseLeave:()=>{e.mouseEnter=!1}}},v$="ElSelect",Hpe=J({name:v$,componentName:v$,components:{ElInput:hs,ElSelectMenu:Npe,ElOption:Tk,ElTag:Om,ElScrollbar:fl,ElTooltip:Fs,ElIcon:Ge},directives:{ClickOutside:Tc},props:{name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:{type:String,validator:cg},effect:{type:String,default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},teleported:Di.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:gn,default:Ac},fitInputWidth:{type:Boolean,default:!1},suffixIcon:{type:gn,default:$c},tagType:{...yk.type,default:"info"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:{type:Boolean,default:!1},suffixTransition:{type:Boolean,default:!0},placement:{type:String,values:sd,default:"bottom-start"}},emits:[wt,bn,"remove-tag","clear","visible-change","focus","blur"],setup(t,e){const n=_e("select"),i=_e("input"),{t:s}=Gt(),o=Bpe(t),{optionsArray:r,selectSize:a,readonly:l,handleResize:c,collapseTagSize:u,debouncedOnInputChange:d,debouncedQueryChange:h,deletePrevTag:f,deleteTag:m,deleteSelected:g,handleOptionSelect:y,scrollToOption:_,setSelected:C,resetInputHeight:w,managePlaceholder:S,showClose:E,selectDisabled:k,iconComponent:A,iconReverse:$,showNewOption:L,emptyText:O,toggleLastOptionHitState:B,resetInputState:V,handleComposition:P,onOptionCreate:z,onOptionDestroy:U,handleMenuEnter:W,handleFocus:R,blur:D,handleBlur:N,handleClearClick:K,handleClose:ie,handleKeydownEscape:Y,toggleMenu:ne,selectOption:we,getValueKey:Se,navigateOptions:Te,dropMenuVisible:le,reference:oe,input:de,tooltipRef:ve,tags:He,selectWrapper:Q,scrollbar:se,queryChange:fe,groupQueryChange:Me,handleMouseEnter:Oe,handleMouseLeave:pe}=zpe(t,o,e),{focus:Le}=bQ(oe),{inputWidth:be,selected:Pe,inputLength:Ee,filteredOptionsCount:he,visible:Ne,softFocus:Be,selectedLabel:Qe,hoverIndex:ut,query:bt,inputHovering:it,currentPlaceholder:X,menuVisibleOnFocus:ue,isOnComposition:$e,isSilentBlur:j,options:te,cachedOptions:ye,optionsCount:Ie,prefixWidth:Ct,tagInMultiLine:an}=Ei(o),pi=T(()=>{const xe=[n.b()],Je=p(a);return Je&&xe.push(n.m(Je)),t.disabled&&xe.push(n.m("disabled")),xe}),Pi=T(()=>({maxWidth:`${p(be)-32}px`,width:"100%"})),un=T(()=>({maxWidth:`${p(be)>123?p(be)-123:p(be)-75}px`}));xt(hg,Yt({props:t,options:te,optionsArray:r,cachedOptions:ye,optionsCount:Ie,filteredOptionsCount:he,hoverIndex:ut,handleOptionSelect:y,onOptionCreate:z,onOptionDestroy:U,selectWrapper:Q,selected:Pe,setSelected:C,queryChange:fe,groupQueryChange:Me})),ft(()=>{o.cachedPlaceHolder=X.value=t.placeholder||s("el.select.placeholder"),t.multiple&&Array.isArray(t.modelValue)&&t.modelValue.length>0&&(X.value=""),ms(Q,c),t.remote&&t.multiple&&w(),je(()=>{const xe=oe.value&&oe.value.$el;if(xe&&(be.value=xe.getBoundingClientRect().width,e.slots.prefix)){const Je=xe.querySelector(`.${i.e("prefix")}`);Ct.value=Math.max(Je.getBoundingClientRect().width+5,30)}}),C()}),t.multiple&&!Array.isArray(t.modelValue)&&e.emit(wt,[]),!t.multiple&&Array.isArray(t.modelValue)&&e.emit(wt,"");const jt=T(()=>{var xe,Je;return(Je=(xe=ve.value)==null?void 0:xe.popperRef)==null?void 0:Je.contentRef});return{tagInMultiLine:an,prefixWidth:Ct,selectSize:a,readonly:l,handleResize:c,collapseTagSize:u,debouncedOnInputChange:d,debouncedQueryChange:h,deletePrevTag:f,deleteTag:m,deleteSelected:g,handleOptionSelect:y,scrollToOption:_,inputWidth:be,selected:Pe,inputLength:Ee,filteredOptionsCount:he,visible:Ne,softFocus:Be,selectedLabel:Qe,hoverIndex:ut,query:bt,inputHovering:it,currentPlaceholder:X,menuVisibleOnFocus:ue,isOnComposition:$e,isSilentBlur:j,options:te,resetInputHeight:w,managePlaceholder:S,showClose:E,selectDisabled:k,iconComponent:A,iconReverse:$,showNewOption:L,emptyText:O,toggleLastOptionHitState:B,resetInputState:V,handleComposition:P,handleMenuEnter:W,handleFocus:R,blur:D,handleBlur:N,handleClearClick:K,handleClose:ie,handleKeydownEscape:Y,toggleMenu:ne,selectOption:we,getValueKey:Se,navigateOptions:Te,dropMenuVisible:le,focus:Le,reference:oe,input:de,tooltipRef:ve,popperPaneRef:jt,tags:He,selectWrapper:Q,scrollbar:se,wrapperKls:pi,selectTagsStyle:Pi,nsSelect:n,tagTextStyle:un,handleMouseEnter:Oe,handleMouseLeave:pe}}}),Upe=["disabled","autocomplete"],Wpe={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}};function Gpe(t,e,n,i,s,o){const r=pt("el-tag"),a=pt("el-tooltip"),l=pt("el-icon"),c=pt("el-input"),u=pt("el-option"),d=pt("el-scrollbar"),h=pt("el-select-menu"),f=mm("click-outside");return ct((I(),H("div",{ref:"selectWrapper",class:x(t.wrapperKls),onMouseenter:e[22]||(e[22]=(...m)=>t.handleMouseEnter&&t.handleMouseEnter(...m)),onMouseleave:e[23]||(e[23]=(...m)=>t.handleMouseLeave&&t.handleMouseLeave(...m)),onClick:e[24]||(e[24]=rt((...m)=>t.toggleMenu&&t.toggleMenu(...m),["stop"]))},[Z(a,{ref:"tooltipRef",visible:t.dropMenuVisible,placement:t.placement,teleported:t.teleported,"popper-class":[t.nsSelect.e("popper"),t.popperClass],"fallback-placements":["bottom-start","top-start","right","left"],effect:t.effect,pure:"",trigger:"click",transition:`${t.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:t.persistent,onShow:t.handleMenuEnter},{default:ee(()=>[G("div",{class:"select-trigger",onMouseenter:e[20]||(e[20]=m=>t.inputHovering=!0),onMouseleave:e[21]||(e[21]=m=>t.inputHovering=!1)},[t.multiple?(I(),H("div",{key:0,ref:"tags",class:x(t.nsSelect.e("tags")),style:Ke(t.selectTagsStyle)},[t.collapseTags&&t.selected.length?(I(),H("span",{key:0,class:x([t.nsSelect.b("tags-wrapper"),{"has-prefix":t.prefixWidth&&t.selected.length}])},[Z(r,{closable:!t.selectDisabled&&!t.selected[0].isDisabled,size:t.collapseTagSize,hit:t.selected[0].hitState,type:t.tagType,"disable-transitions":"",onClose:e[0]||(e[0]=m=>t.deleteTag(m,t.selected[0]))},{default:ee(()=>[G("span",{class:x(t.nsSelect.e("tags-text")),style:Ke(t.tagTextStyle)},Re(t.selected[0].currentLabel),7)]),_:1},8,["closable","size","hit","type"]),t.selected.length>1?(I(),ce(r,{key:0,closable:!1,size:t.collapseTagSize,type:t.tagType,"disable-transitions":""},{default:ee(()=>[t.collapseTagsTooltip?(I(),ce(a,{key:0,disabled:t.dropMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom",teleported:t.teleported},{default:ee(()=>[G("span",{class:x(t.nsSelect.e("tags-text"))},"+ "+Re(t.selected.length-1),3)]),content:ee(()=>[G("div",{class:x(t.nsSelect.e("collapse-tags"))},[(I(!0),H(Ye,null,Ot(t.selected.slice(1),(m,g)=>(I(),H("div",{key:g,class:x(t.nsSelect.e("collapse-tag"))},[(I(),ce(r,{key:t.getValueKey(m),class:"in-tooltip",closable:!t.selectDisabled&&!m.isDisabled,size:t.collapseTagSize,hit:m.hitState,type:t.tagType,"disable-transitions":"",style:{margin:"2px"},onClose:y=>t.deleteTag(y,m)},{default:ee(()=>[G("span",{class:x(t.nsSelect.e("tags-text")),style:Ke({maxWidth:t.inputWidth-75+"px"})},Re(m.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):(I(),H("span",{key:1,class:x(t.nsSelect.e("tags-text"))},"+ "+Re(t.selected.length-1),3))]),_:1},8,["size","type"])):re("v-if",!0)],2)):re("v-if",!0),re(" <div> "),t.collapseTags?re("v-if",!0):(I(),ce(oi,{key:1,onAfterLeave:t.resetInputHeight},{default:ee(()=>[G("span",{class:x([t.nsSelect.b("tags-wrapper"),{"has-prefix":t.prefixWidth&&t.selected.length}])},[(I(!0),H(Ye,null,Ot(t.selected,m=>(I(),ce(r,{key:t.getValueKey(m),closable:!t.selectDisabled&&!m.isDisabled,size:t.collapseTagSize,hit:m.hitState,type:t.tagType,"disable-transitions":"",onClose:g=>t.deleteTag(g,m)},{default:ee(()=>[G("span",{class:x(t.nsSelect.e("tags-text")),style:Ke({maxWidth:t.inputWidth-75+"px"})},Re(m.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128))],2)]),_:1},8,["onAfterLeave"])),re(" </div> "),t.filterable?ct((I(),H("input",{key:2,ref:"input","onUpdate:modelValue":e[1]||(e[1]=m=>t.query=m),type:"text",class:x([t.nsSelect.e("input"),t.nsSelect.is(t.selectSize)]),disabled:t.selectDisabled,autocomplete:t.autocomplete,style:Ke({marginLeft:t.prefixWidth&&!t.selected.length||t.tagInMultiLine?`${t.prefixWidth}px`:"",flexGrow:1,width:`${t.inputLength/(t.inputWidth-32)}%`,maxWidth:`${t.inputWidth-42}px`}),onFocus:e[2]||(e[2]=(...m)=>t.handleFocus&&t.handleFocus(...m)),onBlur:e[3]||(e[3]=(...m)=>t.handleBlur&&t.handleBlur(...m)),onKeyup:e[4]||(e[4]=(...m)=>t.managePlaceholder&&t.managePlaceholder(...m)),onKeydown:[e[5]||(e[5]=(...m)=>t.resetInputState&&t.resetInputState(...m)),e[6]||(e[6]=Bt(rt(m=>t.navigateOptions("next"),["prevent"]),["down"])),e[7]||(e[7]=Bt(rt(m=>t.navigateOptions("prev"),["prevent"]),["up"])),e[8]||(e[8]=Bt((...m)=>t.handleKeydownEscape&&t.handleKeydownEscape(...m),["esc"])),e[9]||(e[9]=Bt(rt((...m)=>t.selectOption&&t.selectOption(...m),["stop","prevent"]),["enter"])),e[10]||(e[10]=Bt((...m)=>t.deletePrevTag&&t.deletePrevTag(...m),["delete"])),e[11]||(e[11]=Bt(m=>t.visible=!1,["tab"]))],onCompositionstart:e[12]||(e[12]=(...m)=>t.handleComposition&&t.handleComposition(...m)),onCompositionupdate:e[13]||(e[13]=(...m)=>t.handleComposition&&t.handleComposition(...m)),onCompositionend:e[14]||(e[14]=(...m)=>t.handleComposition&&t.handleComposition(...m)),onInput:e[15]||(e[15]=(...m)=>t.debouncedQueryChange&&t.debouncedQueryChange(...m))},null,46,Upe)),[[EE,t.query]]):re("v-if",!0)],6)):re("v-if",!0),Z(c,{id:t.id,ref:"reference",modelValue:t.selectedLabel,"onUpdate:modelValue":e[16]||(e[16]=m=>t.selectedLabel=m),type:"text",placeholder:t.currentPlaceholder,name:t.name,autocomplete:t.autocomplete,size:t.selectSize,disabled:t.selectDisabled,readonly:t.readonly,"validate-event":!1,class:x([t.nsSelect.is("focus",t.visible)]),tabindex:t.multiple&&t.filterable?-1:void 0,onFocus:t.handleFocus,onBlur:t.handleBlur,onInput:t.debouncedOnInputChange,onPaste:t.debouncedOnInputChange,onCompositionstart:t.handleComposition,onCompositionupdate:t.handleComposition,onCompositionend:t.handleComposition,onKeydown:[e[17]||(e[17]=Bt(rt(m=>t.navigateOptions("next"),["stop","prevent"]),["down"])),e[18]||(e[18]=Bt(rt(m=>t.navigateOptions("prev"),["stop","prevent"]),["up"])),Bt(rt(t.selectOption,["stop","prevent"]),["enter"]),Bt(t.handleKeydownEscape,["esc"]),e[19]||(e[19]=Bt(m=>t.visible=!1,["tab"]))]},Ya({suffix:ee(()=>[t.iconComponent&&!t.showClose?(I(),ce(l,{key:0,class:x([t.nsSelect.e("caret"),t.nsSelect.e("icon"),t.iconReverse])},{default:ee(()=>[(I(),ce(It(t.iconComponent)))]),_:1},8,["class"])):re("v-if",!0),t.showClose&&t.clearIcon?(I(),ce(l,{key:1,class:x([t.nsSelect.e("caret"),t.nsSelect.e("icon")]),onClick:t.handleClearClick},{default:ee(()=>[(I(),ce(It(t.clearIcon)))]),_:1},8,["class","onClick"])):re("v-if",!0)]),_:2},[t.$slots.prefix?{name:"prefix",fn:ee(()=>[G("div",Wpe,[me(t.$slots,"prefix")])])}:void 0]),1032,["id","modelValue","placeholder","name","autocomplete","size","disabled","readonly","class","tabindex","onFocus","onBlur","onInput","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown"])],32)]),content:ee(()=>[Z(h,null,{default:ee(()=>[ct(Z(d,{ref:"scrollbar",tag:"ul","wrap-class":t.nsSelect.be("dropdown","wrap"),"view-class":t.nsSelect.be("dropdown","list"),class:x([t.nsSelect.is("empty",!t.allowCreate&&Boolean(t.query)&&t.filteredOptionsCount===0)])},{default:ee(()=>[t.showNewOption?(I(),ce(u,{key:0,value:t.query,created:!0},null,8,["value"])):re("v-if",!0),me(t.$slots,"default")]),_:3},8,["wrap-class","view-class","class"]),[[Vt,t.options.size>0&&!t.loading]]),t.emptyText&&(!t.allowCreate||t.loading||t.allowCreate&&t.options.size===0)?(I(),H(Ye,{key:0},[t.$slots.empty?me(t.$slots,"empty",{key:0}):(I(),H("p",{key:1,class:x(t.nsSelect.be("dropdown","empty"))},Re(t.emptyText),3))],64)):re("v-if",!0)]),_:3})]),_:3},8,["visible","placement","teleported","popper-class","effect","transition","persistent","onShow"])],34)),[[f,t.handleClose,t.popperPaneRef]])}var jpe=Ve(Hpe,[["render",Gpe],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select.vue"]]);const qpe=J({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},setup(t){const e=_e("select"),n=F(!0),i=vt(),s=F([]);xt(eD,Yt({...Ei(t)}));const o=qe(hg);ft(()=>{s.value=r(i.subTree)});const r=l=>{const c=[];return Array.isArray(l.children)&&l.children.forEach(u=>{var d;u.type&&u.type.name==="ElOption"&&u.component&&u.component.proxy?c.push(u.component.proxy):(d=u.children)!=null&&d.length&&c.push(...r(u))}),c},{groupQueryChange:a}=en(o);return Ce(a,()=>{n.value=s.value.some(l=>l.visible===!0)},{flush:"post"}),{visible:n,ns:e}}});function Kpe(t,e,n,i,s,o){return ct((I(),H("ul",{class:x(t.ns.be("group","wrap"))},[G("li",{class:x(t.ns.be("group","title"))},Re(t.label),3),G("li",null,[G("ul",{class:x(t.ns.b("group"))},[me(t.$slots,"default")],2)])],2)),[[Vt,t.visible]])}var tD=Ve(qpe,[["render",Kpe],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option-group.vue"]]);const Zu=yt(jpe,{Option:Tk,OptionGroup:tD}),Zy=Nn(Tk),Ype=Nn(tD),Ik=()=>qe(NR,{}),Zpe=De({pageSize:{type:Number,required:!0},pageSizes:{type:ae(Array),default:()=>Mn([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,size:{type:String,values:dl}}),Xpe=J({name:"ElPaginationSizes"}),Qpe=J({...Xpe,props:Zpe,emits:["page-size-change"],setup(t,{emit:e}){const n=t,{t:i}=Gt(),s=_e("pagination"),o=Ik(),r=F(n.pageSize);Ce(()=>n.pageSizes,(c,u)=>{if(!So(c,u)&&Array.isArray(c)){const d=c.includes(n.pageSize)?n.pageSize:n.pageSizes[0];e("page-size-change",d)}}),Ce(()=>n.pageSize,c=>{r.value=c});const a=T(()=>n.pageSizes);function l(c){var u;c!==r.value&&(r.value=c,(u=o.handleSizeChange)==null||u.call(o,Number(c)))}return(c,u)=>(I(),H("span",{class:x(p(s).e("sizes"))},[Z(p(Zu),{"model-value":r.value,disabled:c.disabled,"popper-class":c.popperClass,size:c.size,"validate-event":!1,onChange:l},{default:ee(()=>[(I(!0),H(Ye,null,Ot(p(a),d=>(I(),ce(p(Zy),{key:d,value:d,label:d+p(i)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size"])],2))}});var Jpe=Ve(Qpe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/sizes.vue"]]);const ehe=De({size:{type:String,values:dl}}),the=["disabled"],nhe=J({name:"ElPaginationJumper"}),ihe=J({...nhe,props:ehe,setup(t){const{t:e}=Gt(),n=_e("pagination"),{pageCount:i,disabled:s,currentPage:o,changeEvent:r}=Ik(),a=F(),l=T(()=>{var d;return(d=a.value)!=null?d:o==null?void 0:o.value});function c(d){a.value=+d}function u(d){d=Math.trunc(+d),r==null||r(+d),a.value=void 0}return(d,h)=>(I(),H("span",{class:x(p(n).e("jump")),disabled:p(s)},[G("span",{class:x([p(n).e("goto")])},Re(p(e)("el.pagination.goto")),3),Z(p(hs),{size:d.size,class:x([p(n).e("editor"),p(n).is("in-pagination")]),min:1,max:p(i),disabled:p(s),"model-value":p(l),"validate-event":!1,type:"number","onUpdate:modelValue":c,onChange:u},null,8,["size","class","max","disabled","model-value"]),G("span",{class:x([p(n).e("classifier")])},Re(p(e)("el.pagination.pageClassifier")),3)],10,the))}});var she=Ve(ihe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/jumper.vue"]]);const ohe=De({total:{type:Number,default:1e3}}),rhe=["disabled"],ahe=J({name:"ElPaginationTotal"}),lhe=J({...ahe,props:ohe,setup(t){const{t:e}=Gt(),n=_e("pagination"),{disabled:i}=Ik();return(s,o)=>(I(),H("span",{class:x(p(n).e("total")),disabled:p(i)},Re(p(e)("el.pagination.total",{total:s.total})),11,rhe))}});var che=Ve(lhe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/total.vue"]]);const uhe=De({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),dhe=["onKeyup"],phe=["aria-current","tabindex"],hhe=["tabindex"],fhe=["aria-current","tabindex"],mhe=["tabindex"],ghe=["aria-current","tabindex"],vhe=J({name:"ElPaginationPager"}),yhe=J({...vhe,props:uhe,emits:["change"],setup(t,{emit:e}){const n=t,i=_e("pager"),s=_e("icon"),o=F(!1),r=F(!1),a=F(!1),l=F(!1),c=F(!1),u=F(!1),d=T(()=>{const _=n.pagerCount,C=(_-1)/2,w=Number(n.currentPage),S=Number(n.pageCount);let E=!1,k=!1;S>_&&(w>_-C&&(E=!0),w<S-C&&(k=!0));const A=[];if(E&&!k){const $=S-(_-2);for(let L=$;L<S;L++)A.push(L)}else if(!E&&k)for(let $=2;$<_;$++)A.push($);else if(E&&k){const $=Math.floor(_/2)-1;for(let L=w-$;L<=w+$;L++)A.push(L)}else for(let $=2;$<S;$++)A.push($);return A}),h=T(()=>n.disabled?-1:0);Co(()=>{const _=(n.pagerCount-1)/2;o.value=!1,r.value=!1,n.pageCount>n.pagerCount&&(n.currentPage>n.pagerCount-_&&(o.value=!0),n.currentPage<n.pageCount-_&&(r.value=!0))});function f(_=!1){n.disabled||(_?a.value=!0:l.value=!0)}function m(_=!1){_?c.value=!0:u.value=!0}function g(_){const C=_.target;if(C.tagName.toLowerCase()==="li"&&Array.from(C.classList).includes("number")){const w=Number(C.textContent);w!==n.currentPage&&e("change",w)}else C.tagName.toLowerCase()==="li"&&Array.from(C.classList).includes("more")&&y(_)}function y(_){const C=_.target;if(C.tagName.toLowerCase()==="ul"||n.disabled)return;let w=Number(C.textContent);const S=n.pageCount,E=n.currentPage,k=n.pagerCount-2;C.className.includes("more")&&(C.className.includes("quickprev")?w=E-k:C.className.includes("quicknext")&&(w=E+k)),Number.isNaN(+w)||(w<1&&(w=1),w>S&&(w=S)),w!==E&&e("change",w)}return(_,C)=>(I(),H("ul",{class:x(p(i).b()),onClick:y,onKeyup:Bt(g,["enter"])},[_.pageCount>0?(I(),H("li",{key:0,class:x([[p(i).is("active",_.currentPage===1),p(i).is("disabled",_.disabled)],"number"]),"aria-current":_.currentPage===1,tabindex:p(h)}," 1 ",10,phe)):re("v-if",!0),o.value?(I(),H("li",{key:1,class:x(["more","btn-quickprev",p(s).b(),p(i).is("disabled",_.disabled)]),tabindex:p(h),onMouseenter:C[0]||(C[0]=w=>f(!0)),onMouseleave:C[1]||(C[1]=w=>a.value=!1),onFocus:C[2]||(C[2]=w=>m(!0)),onBlur:C[3]||(C[3]=w=>c.value=!1)},[(a.value||c.value)&&!_.disabled?(I(),ce(p(qp),{key:0})):(I(),ce(p(sM),{key:1}))],42,hhe)):re("v-if",!0),(I(!0),H(Ye,null,Ot(p(d),w=>(I(),H("li",{key:w,class:x([[p(i).is("active",_.currentPage===w),p(i).is("disabled",_.disabled)],"number"]),"aria-current":_.currentPage===w,tabindex:p(h)},Re(w),11,fhe))),128)),r.value?(I(),H("li",{key:2,class:x(["more","btn-quicknext",p(s).b(),p(i).is("disabled",_.disabled)]),tabindex:p(h),onMouseenter:C[4]||(C[4]=w=>f()),onMouseleave:C[5]||(C[5]=w=>l.value=!1),onFocus:C[6]||(C[6]=w=>m()),onBlur:C[7]||(C[7]=w=>u.value=!1)},[(l.value||u.value)&&!_.disabled?(I(),ce(p(Kp),{key:0})):(I(),ce(p(sM),{key:1}))],42,mhe)):re("v-if",!0),_.pageCount>1?(I(),H("li",{key:3,class:x([[p(i).is("active",_.currentPage===_.pageCount),p(i).is("disabled",_.disabled)],"number"]),"aria-current":_.currentPage===_.pageCount,tabindex:p(h)},Re(_.pageCount),11,ghe)):re("v-if",!0)],42,dhe))}});var bhe=Ve(yhe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/pager.vue"]]);const gs=t=>typeof t!="number",_he=De({total:Number,pageSize:Number,defaultPageSize:Number,currentPage:Number,defaultCurrentPage:Number,pageCount:Number,pagerCount:{type:Number,validator:t=>st(t)&&Math.trunc(t)===t&&t>4&&t<22&&t%2===1,default:7},layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:ae(Array),default:()=>Mn([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:gn,default:()=>Cc},nextText:{type:String,default:""},nextIcon:{type:gn,default:()=>$s},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),whe={"update:current-page":t=>st(t),"update:page-size":t=>st(t),"size-change":t=>st(t),"current-change":t=>st(t),"prev-click":t=>st(t),"next-click":t=>st(t)},y$="ElPagination";var Che=J({name:y$,props:_he,emits:whe,setup(t,{emit:e,slots:n}){const{t:i}=Gt(),s=_e("pagination"),o=vt().vnode.props||{},r="onUpdate:currentPage"in o||"onUpdate:current-page"in o||"onCurrentChange"in o,a="onUpdate:pageSize"in o||"onUpdate:page-size"in o||"onSizeChange"in o,l=T(()=>{if(gs(t.total)&&gs(t.pageCount)||!gs(t.currentPage)&&!r)return!1;if(t.layout.includes("sizes")){if(gs(t.pageCount)){if(!gs(t.total)&&!gs(t.pageSize)&&!a)return!1}else if(!a)return!1}return!0}),c=F(gs(t.defaultPageSize)?10:t.defaultPageSize),u=F(gs(t.defaultCurrentPage)?1:t.defaultCurrentPage),d=T({get(){return gs(t.pageSize)?c.value:t.pageSize},set(w){gs(t.pageSize)&&(c.value=w),a&&(e("update:page-size",w),e("size-change",w))}}),h=T(()=>{let w=0;return gs(t.pageCount)?gs(t.total)||(w=Math.max(1,Math.ceil(t.total/d.value))):w=t.pageCount,w}),f=T({get(){return gs(t.currentPage)?u.value:t.currentPage},set(w){let S=w;w<1?S=1:w>h.value&&(S=h.value),gs(t.currentPage)&&(u.value=S),r&&(e("update:current-page",S),e("current-change",S))}});Ce(h,w=>{f.value>w&&(f.value=w)});function m(w){f.value=w}function g(w){d.value=w;const S=h.value;f.value>S&&(f.value=S)}function y(){t.disabled||(f.value-=1,e("prev-click",f.value))}function _(){t.disabled||(f.value+=1,e("next-click",f.value))}function C(w,S){w&&(w.props||(w.props={}),w.props.class=[w.props.class,S].join(" "))}return xt(NR,{pageCount:h,disabled:T(()=>t.disabled),currentPage:f,changeEvent:m,handleSizeChange:g}),()=>{var w,S;if(!l.value)return i("el.pagination.deprecationWarning"),null;if(!t.layout||t.hideOnSinglePage&&h.value<=1)return null;const E=[],k=[],A=Ze("div",{class:s.e("rightwrapper")},k),$={prev:Ze(Ipe,{disabled:t.disabled,currentPage:f.value,prevText:t.prevText,prevIcon:t.prevIcon,onClick:y}),jumper:Ze(she,{size:t.small?"small":"default"}),pager:Ze(bhe,{currentPage:f.value,pageCount:h.value,pagerCount:t.pagerCount,onChange:m,disabled:t.disabled}),next:Ze(Ope,{disabled:t.disabled,currentPage:f.value,pageCount:h.value,nextText:t.nextText,nextIcon:t.nextIcon,onClick:_}),sizes:Ze(Jpe,{pageSize:d.value,pageSizes:t.pageSizes,popperClass:t.popperClass,disabled:t.disabled,size:t.small?"small":"default"}),slot:(S=(w=n==null?void 0:n.default)==null?void 0:w.call(n))!=null?S:null,total:Ze(che,{total:gs(t.total)?0:t.total})},L=t.layout.split(",").map(B=>B.trim());let O=!1;return L.forEach(B=>{if(B==="->"){O=!0;return}O?k.push($[B]):E.push($[B])}),C(E[0],s.is("first")),C(E[E.length-1],s.is("last")),O&&k.length>0&&(C(k[0],s.is("first")),C(k[k.length-1],s.is("last")),E.push(A)),Ze("div",{role:"pagination","aria-label":"pagination",class:[s.b(),s.is("background",t.background),{[s.m("small")]:t.small}]},E)}}});const She=yt(Che),Ehe=De({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:b1,default:"primary"},cancelButtonType:{type:String,values:b1,default:"text"},icon:{type:gn,default:()=>NZ},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},onConfirm:{type:ae(Function)},onCancel:{type:ae(Function)},teleported:Di.teleported,persistent:Di.persistent,width:{type:[String,Number],default:150}}),khe=J({name:"ElPopconfirm"}),The=J({...khe,props:Ehe,setup(t){const e=t,{t:n}=Gt(),i=_e("popconfirm"),s=F(),o=()=>{var d,h;(h=(d=s.value)==null?void 0:d.onClose)==null||h.call(d)},r=T(()=>({width:mi(e.width)})),a=d=>{var h;(h=e.onConfirm)==null||h.call(e,d),o()},l=d=>{var h;(h=e.onCancel)==null||h.call(e,d),o()},c=T(()=>e.confirmButtonText||n("el.popconfirm.confirmButtonText")),u=T(()=>e.cancelButtonText||n("el.popconfirm.cancelButtonText"));return(d,h)=>(I(),ce(p(Fs),kt({ref_key:"tooltipRef",ref:s,trigger:"click",effect:"light"},d.$attrs,{"popper-class":`${p(i).namespace.value}-popover`,"popper-style":p(r),teleported:d.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":d.hideAfter,persistent:d.persistent}),{content:ee(()=>[G("div",{class:x(p(i).b())},[G("div",{class:x(p(i).e("main"))},[!d.hideIcon&&d.icon?(I(),ce(p(Ge),{key:0,class:x(p(i).e("icon")),style:Ke({color:d.iconColor})},{default:ee(()=>[(I(),ce(It(d.icon)))]),_:1},8,["class","style"])):re("v-if",!0),Ut(" "+Re(d.title),1)],2),G("div",{class:x(p(i).e("action"))},[Z(p(os),{size:"small",type:d.cancelButtonType==="text"?"":d.cancelButtonType,text:d.cancelButtonType==="text",onClick:l},{default:ee(()=>[Ut(Re(p(u)),1)]),_:1},8,["type","text"]),Z(p(os),{size:"small",type:d.confirmButtonType==="text"?"":d.confirmButtonType,text:d.confirmButtonType==="text",onClick:a},{default:ee(()=>[Ut(Re(p(c)),1)]),_:1},8,["type","text"])],2)],2)]),default:ee(()=>[d.$slots.reference?me(d.$slots,"reference",{key:0}):re("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var Ihe=Ve(The,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popconfirm/src/popconfirm.vue"]]);const xhe=yt(Ihe),Mhe=De({trigger:Am.trigger,placement:Gv.placement,disabled:Am.disabled,visible:Di.visible,transition:Di.transition,popperOptions:Gv.popperOptions,tabindex:Gv.tabindex,content:Di.content,popperStyle:Di.popperStyle,popperClass:Di.popperClass,enterable:{...Di.enterable,default:!0},effect:{...Di.effect,default:"light"},teleported:Di.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),$he={"update:visible":t=>fi(t),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},Ahe="onUpdate:visible",Lhe=J({name:"ElPopover"}),Ohe=J({...Lhe,props:Mhe,emits:$he,setup(t,{expose:e,emit:n}){const i=t,s=T(()=>i[Ahe]),o=_e("popover"),r=F(),a=T(()=>{var y;return(y=p(r))==null?void 0:y.popperRef}),l=T(()=>[{width:mi(i.width)},i.popperStyle]),c=T(()=>[o.b(),i.popperClass,{[o.m("plain")]:!!i.content}]),u=T(()=>i.transition===`${o.namespace.value}-fade-in-linear`),d=()=>{var y;(y=r.value)==null||y.hide()},h=()=>{n("before-enter")},f=()=>{n("before-leave")},m=()=>{n("after-enter")},g=()=>{n("update:visible",!1),n("after-leave")};return e({popperRef:a,hide:d}),(y,_)=>(I(),ce(p(Fs),kt({ref_key:"tooltipRef",ref:r},y.$attrs,{trigger:y.trigger,placement:y.placement,disabled:y.disabled,visible:y.visible,transition:y.transition,"popper-options":y.popperOptions,tabindex:y.tabindex,content:y.content,offset:y.offset,"show-after":y.showAfter,"hide-after":y.hideAfter,"auto-close":y.autoClose,"show-arrow":y.showArrow,"aria-label":y.title,effect:y.effect,enterable:y.enterable,"popper-class":p(c),"popper-style":p(l),teleported:y.teleported,persistent:y.persistent,"gpu-acceleration":p(u),"onUpdate:visible":p(s),onBeforeShow:h,onBeforeHide:f,onShow:m,onHide:g}),{content:ee(()=>[y.title?(I(),H("div",{key:0,class:x(p(o).e("title")),role:"title"},Re(y.title),3)):re("v-if",!0),me(y.$slots,"default",{},()=>[Ut(Re(y.content),1)])]),default:ee(()=>[y.$slots.reference?me(y.$slots,"reference",{key:0}):re("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var Phe=Ve(Ohe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);const b$=(t,e)=>{const n=e.arg||e.value,i=n==null?void 0:n.popperRef;i&&(i.triggerRef=t)};var Rhe={mounted(t,e){b$(t,e)},updated(t,e){b$(t,e)}};const Vhe="popover",nD=aQ(Rhe,Vhe),Fhe=yt(Phe,{directive:nD}),Dhe=De({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:t=>t>=0&&t<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:ae(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:ae([String,Array,Function]),default:""},format:{type:ae(Function),default:t=>`${t}%`}}),Nhe=["aria-valuenow"],Bhe={viewBox:"0 0 100 100"},zhe=["d","stroke","stroke-width"],Hhe=["d","stroke","opacity","stroke-linecap","stroke-width"],Uhe={key:0},Whe=J({name:"ElProgress"}),Ghe=J({...Whe,props:Dhe,setup(t){const e=t,n={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},i=_e("progress"),s=T(()=>({width:`${e.percentage}%`,animationDuration:`${e.duration}s`,backgroundColor:C(e.percentage)})),o=T(()=>(e.strokeWidth/e.width*100).toFixed(1)),r=T(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(o.value)/2}`,10):0),a=T(()=>{const w=r.value,S=e.type==="dashboard";return`
          M 50 50
          m 0 ${S?"":"-"}${w}
          a ${w} ${w} 0 1 1 0 ${S?"-":""}${w*2}
          a ${w} ${w} 0 1 1 0 ${S?"":"-"}${w*2}
          `}),l=T(()=>2*Math.PI*r.value),c=T(()=>e.type==="dashboard"?.75:1),u=T(()=>`${-1*l.value*(1-c.value)/2}px`),d=T(()=>({strokeDasharray:`${l.value*c.value}px, ${l.value}px`,strokeDashoffset:u.value})),h=T(()=>({strokeDasharray:`${l.value*c.value*(e.percentage/100)}px, ${l.value}px`,strokeDashoffset:u.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),f=T(()=>{let w;return e.color?w=C(e.percentage):w=n[e.status]||n.default,w}),m=T(()=>e.status==="warning"?a_:e.type==="line"?e.status==="success"?WE:Ac:e.status==="success"?lg:vr),g=T(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),y=T(()=>e.format(e.percentage));function _(w){const S=100/w.length;return w.map((k,A)=>at(k)?{color:k,percentage:(A+1)*S}:k).sort((k,A)=>k.percentage-A.percentage)}const C=w=>{var S;const{color:E}=e;if(ot(E))return E(w);if(at(E))return E;{const k=_(E);for(const A of k)if(A.percentage>w)return A.color;return(S=k[k.length-1])==null?void 0:S.color}};return(w,S)=>(I(),H("div",{class:x([p(i).b(),p(i).m(w.type),p(i).is(w.status),{[p(i).m("without-text")]:!w.showText,[p(i).m("text-inside")]:w.textInside}]),role:"progressbar","aria-valuenow":w.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[w.type==="line"?(I(),H("div",{key:0,class:x(p(i).b("bar"))},[G("div",{class:x(p(i).be("bar","outer")),style:Ke({height:`${w.strokeWidth}px`})},[G("div",{class:x([p(i).be("bar","inner"),{[p(i).bem("bar","inner","indeterminate")]:w.indeterminate}]),style:Ke(p(s))},[(w.showText||w.$slots.default)&&w.textInside?(I(),H("div",{key:0,class:x(p(i).be("bar","innerText"))},[me(w.$slots,"default",{percentage:w.percentage},()=>[G("span",null,Re(p(y)),1)])],2)):re("v-if",!0)],6)],6)],2)):(I(),H("div",{key:1,class:x(p(i).b("circle")),style:Ke({height:`${w.width}px`,width:`${w.width}px`})},[(I(),H("svg",Bhe,[G("path",{class:x(p(i).be("circle","track")),d:p(a),stroke:`var(${p(i).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-width":p(o),fill:"none",style:Ke(p(d))},null,14,zhe),G("path",{class:x(p(i).be("circle","path")),d:p(a),stroke:p(f),fill:"none",opacity:w.percentage?1:0,"stroke-linecap":w.strokeLinecap,"stroke-width":p(o),style:Ke(p(h))},null,14,Hhe)]))],6)),(w.showText||w.$slots.default)&&!w.textInside?(I(),H("div",{key:2,class:x(p(i).e("text")),style:Ke({fontSize:`${p(g)}px`})},[me(w.$slots,"default",{percentage:w.percentage},()=>[w.status?(I(),ce(p(Ge),{key:1},{default:ee(()=>[(I(),ce(It(p(m))))]),_:1})):(I(),H("span",Uhe,Re(p(y)),1))])],6)):re("v-if",!0)],10,Nhe))}});var jhe=Ve(Ghe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const iD=yt(jhe),qhe=De({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:ae([Array,Object]),default:()=>Mn(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:ae([Array,Object]),default:()=>[Vg,Vg,Vg]},voidIcon:{type:gn,default:()=>LX},disabledVoidIcon:{type:gn,default:()=>Vg},disabled:{type:Boolean},allowHalf:{type:Boolean},showText:{type:Boolean},showScore:{type:Boolean},textColor:{type:String,default:""},texts:{type:ae(Array),default:()=>Mn(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:{type:String,validator:cg},label:{type:String,default:void 0},clearable:{type:Boolean,default:!1}}),Khe={[bn]:t=>st(t),[wt]:t=>st(t)},Yhe=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],Zhe=["onMousemove","onClick"],Xhe=J({name:"ElRate"}),Qhe=J({...Xhe,props:qhe,emits:Khe,setup(t,{expose:e,emit:n}){const i=t;function s(W,R){const D=ie=>Et(ie),N=Object.keys(R).map(ie=>+ie).filter(ie=>{const Y=R[ie];return(D(Y)?Y.excluded:!1)?W<ie:W<=ie}).sort((ie,Y)=>ie-Y),K=R[N[0]];return D(K)&&K.value||K}const o=qe(id,void 0),r=qe(oa,void 0),a=gi(),l=_e("rate"),{inputId:c,isLabeledByFormItem:u}=Oc(i,{formItemContext:r}),d=F(i.modelValue),h=F(-1),f=F(!0),m=T(()=>[l.b(),l.m(a.value)]),g=T(()=>i.disabled||(o==null?void 0:o.disabled)),y=T(()=>l.cssVarBlock({"void-color":i.voidColor,"disabled-void-color":i.disabledVoidColor,"fill-color":S.value})),_=T(()=>{let W="";return i.showScore?W=i.scoreTemplate.replace(/\{\s*value\s*\}/,g.value?`${i.modelValue}`:`${d.value}`):i.showText&&(W=i.texts[Math.ceil(d.value)-1]),W}),C=T(()=>i.modelValue*100-Math.floor(i.modelValue)*100),w=T(()=>ze(i.colors)?{[i.lowThreshold]:i.colors[0],[i.highThreshold]:{value:i.colors[1],excluded:!0},[i.max]:i.colors[2]}:i.colors),S=T(()=>{const W=s(d.value,w.value);return Et(W)?"":W}),E=T(()=>{let W="";return g.value?W=`${C.value}%`:i.allowHalf&&(W="50%"),{color:S.value,width:W}}),k=T(()=>{let W=ze(i.icons)?[...i.icons]:{...i.icons};return W=Fu(W),ze(W)?{[i.lowThreshold]:W[0],[i.highThreshold]:{value:W[1],excluded:!0},[i.max]:W[2]}:W}),A=T(()=>s(i.modelValue,k.value)),$=T(()=>g.value?at(i.disabledVoidIcon)?i.disabledVoidIcon:Fu(i.disabledVoidIcon):at(i.voidIcon)?i.voidIcon:Fu(i.voidIcon)),L=T(()=>s(d.value,k.value));function O(W){const R=g.value&&C.value>0&&W-1<i.modelValue&&W>i.modelValue,D=i.allowHalf&&f.value&&W-.5<=d.value&&W>d.value;return R||D}function B(W){i.clearable&&W===i.modelValue&&(W=0),n(wt,W),i.modelValue!==W&&n("change",W)}function V(W){g.value||(i.allowHalf&&f.value?B(d.value):B(W))}function P(W){if(g.value)return;let R=d.value;const D=W.code;return D===Xe.up||D===Xe.right?(i.allowHalf?R+=.5:R+=1,W.stopPropagation(),W.preventDefault()):(D===Xe.left||D===Xe.down)&&(i.allowHalf?R-=.5:R-=1,W.stopPropagation(),W.preventDefault()),R=R<0?0:R,R=R>i.max?i.max:R,n(wt,R),n("change",R),R}function z(W,R){if(!g.value){if(i.allowHalf){let D=R.target;ur(D,l.e("item"))&&(D=D.querySelector(`.${l.e("icon")}`)),(D.clientWidth===0||ur(D,l.e("decimal")))&&(D=D.parentNode),f.value=R.offsetX*2<=D.clientWidth,d.value=f.value?W-.5:W}else d.value=W;h.value=W}}function U(){g.value||(i.allowHalf&&(f.value=i.modelValue!==Math.floor(i.modelValue)),d.value=i.modelValue,h.value=-1)}return Ce(()=>i.modelValue,W=>{d.value=W,f.value=i.modelValue!==Math.floor(i.modelValue)}),i.modelValue||n(wt,0),e({setCurrentValue:z,resetCurrentValue:U}),(W,R)=>{var D;return I(),H("div",{id:p(c),class:x([p(m),p(l).is("disabled",p(g))]),role:"slider","aria-label":p(u)?void 0:W.label||"rating","aria-labelledby":p(u)?(D=p(r))==null?void 0:D.labelId:void 0,"aria-valuenow":d.value,"aria-valuetext":p(_)||void 0,"aria-valuemin":"0","aria-valuemax":W.max,tabindex:"0",style:Ke(p(y)),onKeydown:P},[(I(!0),H(Ye,null,Ot(W.max,(N,K)=>(I(),H("span",{key:K,class:x(p(l).e("item")),onMousemove:ie=>z(N,ie),onMouseleave:U,onClick:ie=>V(N)},[Z(p(Ge),{class:x([p(l).e("icon"),{hover:h.value===N},p(l).is("active",N<=d.value)])},{default:ee(()=>[O(N)?re("v-if",!0):(I(),H(Ye,{key:0},[ct((I(),ce(It(p(L)),null,null,512)),[[Vt,N<=d.value]]),ct((I(),ce(It(p($)),null,null,512)),[[Vt,!(N<=d.value)]])],64)),O(N)?(I(),ce(p(Ge),{key:1,style:Ke(p(E)),class:x([p(l).e("icon"),p(l).e("decimal")])},{default:ee(()=>[(I(),ce(It(p(A))))]),_:1},8,["style","class"])):re("v-if",!0)]),_:2},1032,["class"])],42,Zhe))),128)),W.showText||W.showScore?(I(),H("span",{key:0,class:x(p(l).e("text"))},Re(p(_)),3)):re("v-if",!0)],46,Yhe)}}});var Jhe=Ve(Qhe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/rate/src/rate.vue"]]);const efe=yt(Jhe),Zd={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},_$={[Zd.success]:NK,[Zd.warning]:a_,[Zd.error]:GE,[Zd.info]:jE},tfe=De({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),nfe=J({name:"ElResult"}),ife=J({...nfe,props:tfe,setup(t){const e=t,n=_e("result"),i=T(()=>{const s=e.icon,o=s&&Zd[s]?Zd[s]:"icon-info",r=_$[o]||_$["icon-info"];return{class:o,component:r}});return(s,o)=>(I(),H("div",{class:x(p(n).b())},[G("div",{class:x(p(n).e("icon"))},[me(s.$slots,"icon",{},()=>[p(i).component?(I(),ce(It(p(i).component),{key:0,class:x(p(i).class)},null,8,["class"])):re("v-if",!0)])],2),s.title||s.$slots.title?(I(),H("div",{key:0,class:x(p(n).e("title"))},[me(s.$slots,"title",{},()=>[G("p",null,Re(s.title),1)])],2)):re("v-if",!0),s.subTitle||s.$slots["sub-title"]?(I(),H("div",{key:1,class:x(p(n).e("subtitle"))},[me(s.$slots,"sub-title",{},()=>[G("p",null,Re(s.subTitle),1)])],2)):re("v-if",!0),s.$slots.extra?(I(),H("div",{key:2,class:x(p(n).e("extra"))},[me(s.$slots,"extra")],2)):re("v-if",!0)],2))}});var sfe=Ve(ife,[["__file","/home/runner/work/element-plus/element-plus/packages/components/result/src/result.vue"]]);const ofe=yt(sfe),rfe=["start","center","end","space-around","space-between","space-evenly"],afe=["top","middle","bottom"],lfe=De({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:rfe,default:"start"},align:{type:String,values:afe,default:"top"}}),cfe=J({name:"ElRow"}),ufe=J({...cfe,props:lfe,setup(t){const e=t,n=_e("row"),i=T(()=>e.gutter);xt(zR,{gutter:i});const s=T(()=>{const r={};return e.gutter&&(r.marginRight=r.marginLeft=`-${e.gutter/2}px`),r}),o=T(()=>[n.b(),n.is(`justify-${e.justify}`,e.justify!=="start"),n.is(`align-${e.align}`,e.align!=="top")]);return(r,a)=>(I(),ce(It(r.tag),{class:x(p(o)),style:Ke(p(s))},{default:ee(()=>[me(r.$slots,"default")]),_:3},8,["class","style"]))}});var dfe=Ve(ufe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/row/src/row.vue"]]);const pfe=yt(dfe);var w$=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function hfe(t,e){return!!(t===e||w$(t)&&w$(e))}function ffe(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!hfe(t[n],e[n]))return!1;return!0}function mfe(t,e){e===void 0&&(e=ffe);var n=null;function i(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];if(n&&n.lastThis===this&&e(s,n.lastArgs))return n.lastResult;var r=t.apply(this,s);return n={lastResult:r,lastArgs:s,lastThis:this},r}return i.clear=function(){n=null},i}const sD=()=>{const e=vt().proxy.$props;return T(()=>{const n=(i,s,o)=>({});return e.perfMode?n_(n):mfe(n)})},Q1=50,Xy="itemRendered",Qy="scroll",Xd="forward",Jy="backward",zo="auto",S_="smart",Vm="start",Gr="center",Fm="end",eh="horizontal",xk="vertical",gfe="ltr",_p="rtl",Dm="negative",Mk="positive-ascending",$k="positive-descending",vfe={[eh]:"left",[xk]:"top"},yfe=20,bfe={[eh]:"deltaX",[xk]:"deltaY"},_fe=({atEndEdge:t,atStartEdge:e,layout:n},i)=>{let s,o=0;const r=l=>l<0&&e.value||l>0&&t.value;return{hasReachedEdge:r,onWheel:l=>{u_(s);const c=l[bfe[n.value]];r(o)&&r(o+c)||(o+=c,KE()||l.preventDefault(),s=Tm(()=>{i(o),o=0}))}}},J1=Cr({type:ae([Number,Function]),required:!0}),eC=Cr({type:Number}),tC=Cr({type:Number,default:2}),wfe=Cr({type:String,values:["ltr","rtl"],default:"ltr"}),nC=Cr({type:Number,default:0}),eb=Cr({type:Number,required:!0}),oD=Cr({type:String,values:["horizontal","vertical"],default:xk}),rD=De({className:{type:String,default:""},containerElement:{type:ae([String,Object]),default:"div"},data:{type:ae(Array),default:()=>Mn([])},direction:wfe,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:ae([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),aD=De({cache:tC,estimatedItemSize:eC,layout:oD,initScrollOffset:nC,total:eb,itemSize:J1,...rD}),iC={type:Number,default:6},lD={type:Number,default:0},cD={type:Number,default:2},zu=De({columnCache:tC,columnWidth:J1,estimatedColumnWidth:eC,estimatedRowHeight:eC,initScrollLeft:nC,initScrollTop:nC,itemKey:{type:ae(Function),default:({columnIndex:t,rowIndex:e})=>`${e}:${t}`},rowCache:tC,rowHeight:J1,totalColumn:eb,totalRow:eb,hScrollbarSize:iC,vScrollbarSize:iC,scrollbarStartGap:lD,scrollbarEndGap:cD,...rD}),uD=De({alwaysOn:Boolean,class:String,layout:oD,total:eb,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:iC,startGap:lD,endGap:cD,visible:Boolean}),Mu=(t,e)=>t<e?Xd:Jy,Nm=t=>t===gfe||t===_p||t===eh,C$=t=>t===_p;let ud=null;function tb(t=!1){if(ud===null||t){const e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";const i=document.createElement("div"),s=i.style;return s.width="100px",s.height="100px",e.appendChild(i),document.body.appendChild(e),e.scrollLeft>0?ud=$k:(e.scrollLeft=1,e.scrollLeft===0?ud=Dm:ud=Mk),document.body.removeChild(e),ud}return ud}function Cfe({move:t,size:e,bar:n},i){const s={},o=`translate${n.axis}(${t}px)`;return s[n.size]=e,s.transform=o,s.msTransform=o,s.webkitTransform=o,i==="horizontal"?s.height="100%":s.width="100%",s}const sC=J({name:"ElVirtualScrollBar",props:uD,emits:["scroll","start-move","stop-move"],setup(t,{emit:e}){const n=T(()=>t.startGap+t.endGap),i=_e("virtual-scrollbar"),s=_e("scrollbar"),o=F(),r=F();let a=null,l=null;const c=Yt({isDragging:!1,traveled:0}),u=T(()=>kV[t.layout]),d=T(()=>t.clientSize-p(n)),h=T(()=>({position:"absolute",width:`${eh===t.layout?d.value:t.scrollbarSize}px`,height:`${eh===t.layout?t.scrollbarSize:d.value}px`,[vfe[t.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),f=T(()=>{const k=t.ratio,A=t.clientSize;if(k>=100)return Number.POSITIVE_INFINITY;if(k>=50)return k*A/100;const $=A/3;return Math.floor(Math.min(Math.max(k*A,yfe),$))}),m=T(()=>{if(!Number.isFinite(f.value))return{display:"none"};const k=`${f.value}px`;return Cfe({bar:u.value,size:k,move:c.traveled},t.layout)}),g=T(()=>Math.floor(t.clientSize-f.value-p(n))),y=()=>{window.addEventListener("mousemove",S),window.addEventListener("mouseup",w);const k=p(r);k&&(l=document.onselectstart,document.onselectstart=()=>!1,k.addEventListener("touchmove",S),k.addEventListener("touchend",w))},_=()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",w),document.onselectstart=l,l=null;const k=p(r);k&&(k.removeEventListener("touchmove",S),k.removeEventListener("touchend",w))},C=k=>{k.stopImmediatePropagation(),!(k.ctrlKey||[1,2].includes(k.button))&&(c.isDragging=!0,c[u.value.axis]=k.currentTarget[u.value.offset]-(k[u.value.client]-k.currentTarget.getBoundingClientRect()[u.value.direction]),e("start-move"),y())},w=()=>{c.isDragging=!1,c[u.value.axis]=0,e("stop-move"),_()},S=k=>{const{isDragging:A}=c;if(!A||!r.value||!o.value)return;const $=c[u.value.axis];if(!$)return;u_(a);const L=(o.value.getBoundingClientRect()[u.value.direction]-k[u.value.client])*-1,O=r.value[u.value.offset]-$,B=L-O;a=Tm(()=>{c.traveled=Math.max(t.startGap,Math.min(B,g.value)),e("scroll",B,g.value)})},E=k=>{const A=Math.abs(k.target.getBoundingClientRect()[u.value.direction]-k[u.value.client]),$=r.value[u.value.offset]/2,L=A-$;c.traveled=Math.max(0,Math.min(L,g.value)),e("scroll",L,g.value)};return Ce(()=>t.scrollFrom,k=>{c.isDragging||(c.traveled=Math.ceil(k*g.value))}),Pn(()=>{_()}),()=>Ze("div",{role:"presentation",ref:o,class:[i.b(),t.class,(t.alwaysOn||c.isDragging)&&"always-on"],style:h.value,onMousedown:rt(E,["stop","prevent"]),onTouchstartPrevent:C},Ze("div",{ref:r,class:s.e("thumb"),style:m.value,onMousedown:C},[]))}}),dD=({name:t,getOffset:e,getItemSize:n,getItemOffset:i,getEstimatedTotalSize:s,getStartIndexForOffset:o,getStopIndexForStartIndex:r,initCache:a,clearCache:l,validateProps:c})=>J({name:t??"ElVirtualList",props:aD,emits:[Xy,Qy],setup(u,{emit:d,expose:h}){c(u);const f=vt(),m=_e("vl"),g=F(a(u,f)),y=sD(),_=F(),C=F(),w=F(),S=F({isScrolling:!1,scrollDir:"forward",scrollOffset:st(u.initScrollOffset)?u.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:u.scrollbarAlwaysOn}),E=T(()=>{const{total:ne,cache:we}=u,{isScrolling:Se,scrollDir:Te,scrollOffset:le}=p(S);if(ne===0)return[0,0,0,0];const oe=o(u,le,p(g)),de=r(u,oe,le,p(g)),ve=!Se||Te===Jy?Math.max(1,we):1,He=!Se||Te===Xd?Math.max(1,we):1;return[Math.max(0,oe-ve),Math.max(0,Math.min(ne-1,de+He)),oe,de]}),k=T(()=>s(u,p(g))),A=T(()=>Nm(u.layout)),$=T(()=>[{position:"relative",[`overflow-${A.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:u.direction,height:st(u.height)?`${u.height}px`:u.height,width:st(u.width)?`${u.width}px`:u.width},u.style]),L=T(()=>{const ne=p(k),we=p(A);return{height:we?"100%":`${ne}px`,pointerEvents:p(S).isScrolling?"none":void 0,width:we?`${ne}px`:"100%"}}),O=T(()=>A.value?u.width:u.height),{onWheel:B}=_fe({atStartEdge:T(()=>S.value.scrollOffset<=0),atEndEdge:T(()=>S.value.scrollOffset>=k.value),layout:T(()=>u.layout)},ne=>{var we,Se;(Se=(we=w.value).onMouseUp)==null||Se.call(we),R(Math.min(S.value.scrollOffset+ne,k.value-O.value))}),V=()=>{const{total:ne}=u;if(ne>0){const[le,oe,de,ve]=p(E);d(Xy,le,oe,de,ve)}const{scrollDir:we,scrollOffset:Se,updateRequested:Te}=p(S);d(Qy,we,Se,Te)},P=ne=>{const{clientHeight:we,scrollHeight:Se,scrollTop:Te}=ne.currentTarget,le=p(S);if(le.scrollOffset===Te)return;const oe=Math.max(0,Math.min(Te,Se-we));S.value={...le,isScrolling:!0,scrollDir:Mu(le.scrollOffset,oe),scrollOffset:oe,updateRequested:!1},je(K)},z=ne=>{const{clientWidth:we,scrollLeft:Se,scrollWidth:Te}=ne.currentTarget,le=p(S);if(le.scrollOffset===Se)return;const{direction:oe}=u;let de=Se;if(oe===_p)switch(tb()){case Dm:{de=-Se;break}case $k:{de=Te-we-Se;break}}de=Math.max(0,Math.min(de,Te-we)),S.value={...le,isScrolling:!0,scrollDir:Mu(le.scrollOffset,de),scrollOffset:de,updateRequested:!1},je(K)},U=ne=>{p(A)?z(ne):P(ne),V()},W=(ne,we)=>{const Se=(k.value-O.value)/we*ne;R(Math.min(k.value-O.value,Se))},R=ne=>{ne=Math.max(ne,0),ne!==p(S).scrollOffset&&(S.value={...p(S),scrollOffset:ne,scrollDir:Mu(p(S).scrollOffset,ne),updateRequested:!0},je(K))},D=(ne,we=zo)=>{const{scrollOffset:Se}=p(S);ne=Math.max(0,Math.min(ne,u.total-1)),R(e(u,ne,we,Se,p(g)))},N=ne=>{const{direction:we,itemSize:Se,layout:Te}=u,le=y.value(l&&Se,l&&Te,l&&we);let oe;if(Pt(le,String(ne)))oe=le[ne];else{const de=i(u,ne,p(g)),ve=n(u,ne,p(g)),He=p(A),Q=we===_p,se=He?de:0;le[ne]=oe={position:"absolute",left:Q?void 0:`${se}px`,right:Q?`${se}px`:void 0,top:He?0:`${de}px`,height:He?"100%":`${ve}px`,width:He?`${ve}px`:"100%"}}return oe},K=()=>{S.value.isScrolling=!1,je(()=>{y.value(-1,null,null)})},ie=()=>{const ne=_.value;ne&&(ne.scrollTop=0)};ft(()=>{if(!Nt)return;const{initScrollOffset:ne}=u,we=p(_);st(ne)&&we&&(p(A)?we.scrollLeft=ne:we.scrollTop=ne),V()}),ll(()=>{const{direction:ne,layout:we}=u,{scrollOffset:Se,updateRequested:Te}=p(S),le=p(_);if(Te&&le)if(we===eh)if(ne===_p)switch(tb()){case Dm:{le.scrollLeft=-Se;break}case Mk:{le.scrollLeft=Se;break}default:{const{clientWidth:oe,scrollWidth:de}=le;le.scrollLeft=de-oe-Se;break}}else le.scrollLeft=Se;else le.scrollTop=Se});const Y={ns:m,clientSize:O,estimatedTotalSize:k,windowStyle:$,windowRef:_,innerRef:C,innerStyle:L,itemsToRender:E,scrollbarRef:w,states:S,getItemStyle:N,onScroll:U,onScrollbarScroll:W,onWheel:B,scrollTo:R,scrollToItem:D,resetScrollTop:ie};return h({windowRef:_,innerRef:C,getItemStyleCache:y,scrollTo:R,scrollToItem:D,resetScrollTop:ie,states:S}),Y},render(u){var d;const{$slots:h,className:f,clientSize:m,containerElement:g,data:y,getItemStyle:_,innerElement:C,itemsToRender:w,innerStyle:S,layout:E,total:k,onScroll:A,onScrollbarScroll:$,onWheel:L,states:O,useIsScrolling:B,windowStyle:V,ns:P}=u,[z,U]=w,W=It(g),R=It(C),D=[];if(k>0)for(let Y=z;Y<=U;Y++)D.push((d=h.default)==null?void 0:d.call(h,{data:y,key:Y,index:Y,isScrolling:B?O.isScrolling:void 0,style:_(Y)}));const N=[Ze(R,{style:S,ref:"innerRef"},at(R)?D:{default:()=>D})],K=Ze(sC,{ref:"scrollbarRef",clientSize:m,layout:E,onScroll:$,ratio:m*100/this.estimatedTotalSize,scrollFrom:O.scrollOffset/(this.estimatedTotalSize-m),total:k}),ie=Ze(W,{class:[P.e("window"),f],style:V,onScroll:A,onWheel:L,ref:"windowRef",key:0},at(W)?[N]:{default:()=>[N]});return Ze("div",{key:0,class:[P.e("wrapper"),O.scrollbarAlwaysOn?"always-on":""]},[ie,K])}}),pD=dD({name:"ElFixedSizeList",getItemOffset:({itemSize:t},e)=>e*t,getItemSize:({itemSize:t})=>t,getEstimatedTotalSize:({total:t,itemSize:e})=>e*t,getOffset:({height:t,total:e,itemSize:n,layout:i,width:s},o,r,a)=>{const l=Nm(i)?s:t,c=Math.max(0,e*n-l),u=Math.min(c,o*n),d=Math.max(0,(o+1)*n-l);switch(r===S_&&(a>=d-l&&a<=u+l?r=zo:r=Gr),r){case Vm:return u;case Fm:return d;case Gr:{const h=Math.round(d+(u-d)/2);return h<Math.ceil(l/2)?0:h>c+Math.floor(l/2)?c:h}case zo:default:return a>=d&&a<=u?a:a<d?d:u}},getStartIndexForOffset:({total:t,itemSize:e},n)=>Math.max(0,Math.min(t-1,Math.floor(n/e))),getStopIndexForStartIndex:({height:t,total:e,itemSize:n,layout:i,width:s},o,r)=>{const a=o*n,l=Nm(i)?s:t,c=Math.ceil((l+r-a)/n);return Math.max(0,Math.min(e-1,o+c-1))},initCache(){},clearCache:!0,validateProps(){}}),Qd=(t,e,n)=>{const{itemSize:i}=t,{items:s,lastVisitedIndex:o}=n;if(e>o){let r=0;if(o>=0){const a=s[o];r=a.offset+a.size}for(let a=o+1;a<=e;a++){const l=i(a);s[a]={offset:r,size:l},r+=l}n.lastVisitedIndex=e}return s[e]},Sfe=(t,e,n)=>{const{items:i,lastVisitedIndex:s}=e;return(s>0?i[s].offset:0)>=n?hD(t,e,0,s,n):Efe(t,e,Math.max(0,s),n)},hD=(t,e,n,i,s)=>{for(;n<=i;){const o=n+Math.floor((i-n)/2),r=Qd(t,o,e).offset;if(r===s)return o;r<s?n=o+1:r>s&&(i=o-1)}return Math.max(0,n-1)},Efe=(t,e,n,i)=>{const{total:s}=t;let o=1;for(;n<s&&Qd(t,n,e).offset<i;)n+=o,o*=2;return hD(t,e,Math.floor(n/2),Math.min(n,s-1),i)},S$=({total:t},{items:e,estimatedItemSize:n,lastVisitedIndex:i})=>{let s=0;if(i>=t&&(i=t-1),i>=0){const a=e[i];s=a.offset+a.size}const r=(t-i-1)*n;return s+r},kfe=dD({name:"ElDynamicSizeList",getItemOffset:(t,e,n)=>Qd(t,e,n).offset,getItemSize:(t,e,{items:n})=>n[e].size,getEstimatedTotalSize:S$,getOffset:(t,e,n,i,s)=>{const{height:o,layout:r,width:a}=t,l=Nm(r)?a:o,c=Qd(t,e,s),u=S$(t,s),d=Math.max(0,Math.min(u-l,c.offset)),h=Math.max(0,c.offset-l+c.size);switch(n===S_&&(i>=h-l&&i<=d+l?n=zo:n=Gr),n){case Vm:return d;case Fm:return h;case Gr:return Math.round(h+(d-h)/2);case zo:default:return i>=h&&i<=d?i:i<h?h:d}},getStartIndexForOffset:(t,e,n)=>Sfe(t,n,e),getStopIndexForStartIndex:(t,e,n,i)=>{const{height:s,total:o,layout:r,width:a}=t,l=Nm(r)?a:s,c=Qd(t,e,i),u=n+l;let d=c.offset+c.size,h=e;for(;h<o-1&&d<u;)h++,d+=Qd(t,h,i).size;return h},initCache({estimatedItemSize:t=Q1},e){const n={items:{},estimatedItemSize:t,lastVisitedIndex:-1};return n.clearCacheAfterIndex=(i,s=!0)=>{var o,r;n.lastVisitedIndex=Math.min(n.lastVisitedIndex,i-1),(o=e.exposed)==null||o.getItemStyleCache(-1),s&&((r=e.proxy)==null||r.$forceUpdate())},n},clearCache:!1,validateProps:({itemSize:t})=>{}}),Tfe=({atXEndEdge:t,atXStartEdge:e,atYEndEdge:n,atYStartEdge:i},s)=>{let o=null,r=0,a=0;const l=(u,d)=>{const h=u<0&&e.value||u>0&&t.value,f=d<0&&i.value||d>0&&n.value;return h&&f};return{hasReachedEdge:l,onWheel:u=>{u_(o);let d=u.deltaX,h=u.deltaY;Math.abs(d)>Math.abs(h)?h=0:d=0,u.shiftKey&&h!==0&&(d=h,h=0),!(l(r,a)&&l(r+d,a+h))&&(r+=d,a+=h,KE()||u.preventDefault(),o=Tm(()=>{s(r,a),r=0,a=0}))}}},fD=({name:t,clearCache:e,getColumnPosition:n,getColumnStartIndexForOffset:i,getColumnStopIndexForStartIndex:s,getEstimatedTotalHeight:o,getEstimatedTotalWidth:r,getColumnOffset:a,getRowOffset:l,getRowPosition:c,getRowStartIndexForOffset:u,getRowStopIndexForStartIndex:d,initCache:h,injectToInstance:f,validateProps:m})=>J({name:t??"ElVirtualList",props:zu,emits:[Xy,Qy],setup(g,{emit:y,expose:_,slots:C}){const w=_e("vl");m(g);const S=vt(),E=F(h(g,S));f==null||f(S,E);const k=F(),A=F(),$=F(),L=F(null),O=F({isScrolling:!1,scrollLeft:st(g.initScrollLeft)?g.initScrollLeft:0,scrollTop:st(g.initScrollTop)?g.initScrollTop:0,updateRequested:!1,xAxisScrollDir:Xd,yAxisScrollDir:Xd}),B=sD(),V=T(()=>Number.parseInt(`${g.height}`,10)),P=T(()=>Number.parseInt(`${g.width}`,10)),z=T(()=>{const{totalColumn:pe,totalRow:Le,columnCache:be}=g,{isScrolling:Pe,xAxisScrollDir:Ee,scrollLeft:he}=p(O);if(pe===0||Le===0)return[0,0,0,0];const Ne=i(g,he,p(E)),Be=s(g,Ne,he,p(E)),Qe=!Pe||Ee===Jy?Math.max(1,be):1,ut=!Pe||Ee===Xd?Math.max(1,be):1;return[Math.max(0,Ne-Qe),Math.max(0,Math.min(pe-1,Be+ut)),Ne,Be]}),U=T(()=>{const{totalColumn:pe,totalRow:Le,rowCache:be}=g,{isScrolling:Pe,yAxisScrollDir:Ee,scrollTop:he}=p(O);if(pe===0||Le===0)return[0,0,0,0];const Ne=u(g,he,p(E)),Be=d(g,Ne,he,p(E)),Qe=!Pe||Ee===Jy?Math.max(1,be):1,ut=!Pe||Ee===Xd?Math.max(1,be):1;return[Math.max(0,Ne-Qe),Math.max(0,Math.min(Le-1,Be+ut)),Ne,Be]}),W=T(()=>o(g,p(E))),R=T(()=>r(g,p(E))),D=T(()=>{var pe;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:g.direction,height:st(g.height)?`${g.height}px`:g.height,width:st(g.width)?`${g.width}px`:g.width},(pe=g.style)!=null?pe:{}]}),N=T(()=>{const pe=`${p(R)}px`;return{height:`${p(W)}px`,pointerEvents:p(O).isScrolling?"none":void 0,width:pe}}),K=()=>{const{totalColumn:pe,totalRow:Le}=g;if(pe>0&&Le>0){const[Be,Qe,ut,bt]=p(z),[it,X,ue,$e]=p(U);y(Xy,{columnCacheStart:Be,columnCacheEnd:Qe,rowCacheStart:it,rowCacheEnd:X,columnVisibleStart:ut,columnVisibleEnd:bt,rowVisibleStart:ue,rowVisibleEnd:$e})}const{scrollLeft:be,scrollTop:Pe,updateRequested:Ee,xAxisScrollDir:he,yAxisScrollDir:Ne}=p(O);y(Qy,{xAxisScrollDir:he,scrollLeft:be,yAxisScrollDir:Ne,scrollTop:Pe,updateRequested:Ee})},ie=pe=>{const{clientHeight:Le,clientWidth:be,scrollHeight:Pe,scrollLeft:Ee,scrollTop:he,scrollWidth:Ne}=pe.currentTarget,Be=p(O);if(Be.scrollTop===he&&Be.scrollLeft===Ee)return;let Qe=Ee;if(C$(g.direction))switch(tb()){case Dm:Qe=-Ee;break;case $k:Qe=Ne-be-Ee;break}O.value={...Be,isScrolling:!0,scrollLeft:Qe,scrollTop:Math.max(0,Math.min(he,Pe-Le)),updateRequested:!0,xAxisScrollDir:Mu(Be.scrollLeft,Qe),yAxisScrollDir:Mu(Be.scrollTop,he)},je(()=>oe()),de(),K()},Y=(pe,Le)=>{const be=p(V),Pe=(W.value-be)/Le*pe;Se({scrollTop:Math.min(W.value-be,Pe)})},ne=(pe,Le)=>{const be=p(P),Pe=(R.value-be)/Le*pe;Se({scrollLeft:Math.min(R.value-be,Pe)})},{onWheel:we}=Tfe({atXStartEdge:T(()=>O.value.scrollLeft<=0),atXEndEdge:T(()=>O.value.scrollLeft>=R.value),atYStartEdge:T(()=>O.value.scrollTop<=0),atYEndEdge:T(()=>O.value.scrollTop>=W.value)},(pe,Le)=>{var be,Pe,Ee,he;(Pe=(be=A.value)==null?void 0:be.onMouseUp)==null||Pe.call(be),(he=(Ee=A.value)==null?void 0:Ee.onMouseUp)==null||he.call(Ee);const Ne=p(P),Be=p(V);Se({scrollLeft:Math.min(O.value.scrollLeft+pe,R.value-Ne),scrollTop:Math.min(O.value.scrollTop+Le,W.value-Be)})}),Se=({scrollLeft:pe=O.value.scrollLeft,scrollTop:Le=O.value.scrollTop})=>{pe=Math.max(pe,0),Le=Math.max(Le,0);const be=p(O);Le===be.scrollTop&&pe===be.scrollLeft||(O.value={...be,xAxisScrollDir:Mu(be.scrollLeft,pe),yAxisScrollDir:Mu(be.scrollTop,Le),scrollLeft:pe,scrollTop:Le,updateRequested:!0},je(()=>oe()),de(),K())},Te=(pe=0,Le=0,be=zo)=>{const Pe=p(O);Le=Math.max(0,Math.min(Le,g.totalColumn-1)),pe=Math.max(0,Math.min(pe,g.totalRow-1));const Ee=CR(w.namespace.value),he=p(E),Ne=o(g,he),Be=r(g,he);Se({scrollLeft:a(g,Le,be,Pe.scrollLeft,he,Be>g.width?Ee:0),scrollTop:l(g,pe,be,Pe.scrollTop,he,Ne>g.height?Ee:0)})},le=(pe,Le)=>{const{columnWidth:be,direction:Pe,rowHeight:Ee}=g,he=B.value(e&&be,e&&Ee,e&&Pe),Ne=`${pe},${Le}`;if(Pt(he,Ne))return he[Ne];{const[,Be]=n(g,Le,p(E)),Qe=p(E),ut=C$(Pe),[bt,it]=c(g,pe,Qe),[X]=n(g,Le,Qe);return he[Ne]={position:"absolute",left:ut?void 0:`${Be}px`,right:ut?`${Be}px`:void 0,top:`${it}px`,height:`${bt}px`,width:`${X}px`},he[Ne]}},oe=()=>{O.value.isScrolling=!1,je(()=>{B.value(-1,null,null)})};ft(()=>{if(!Nt)return;const{initScrollLeft:pe,initScrollTop:Le}=g,be=p(k);be&&(st(pe)&&(be.scrollLeft=pe),st(Le)&&(be.scrollTop=Le)),K()});const de=()=>{const{direction:pe}=g,{scrollLeft:Le,scrollTop:be,updateRequested:Pe}=p(O),Ee=p(k);if(Pe&&Ee){if(pe===_p)switch(tb()){case Dm:{Ee.scrollLeft=-Le;break}case Mk:{Ee.scrollLeft=Le;break}default:{const{clientWidth:he,scrollWidth:Ne}=Ee;Ee.scrollLeft=Ne-he-Le;break}}else Ee.scrollLeft=Math.max(0,Le);Ee.scrollTop=Math.max(0,be)}},{resetAfterColumnIndex:ve,resetAfterRowIndex:He,resetAfter:Q}=S.proxy;_({windowRef:k,innerRef:L,getItemStyleCache:B,scrollTo:Se,scrollToItem:Te,states:O,resetAfterColumnIndex:ve,resetAfterRowIndex:He,resetAfter:Q});const se=()=>{const{scrollbarAlwaysOn:pe,scrollbarStartGap:Le,scrollbarEndGap:be,totalColumn:Pe,totalRow:Ee}=g,he=p(P),Ne=p(V),Be=p(R),Qe=p(W),{scrollLeft:ut,scrollTop:bt}=p(O),it=Ze(sC,{ref:A,alwaysOn:pe,startGap:Le,endGap:be,class:w.e("horizontal"),clientSize:he,layout:"horizontal",onScroll:ne,ratio:he*100/Be,scrollFrom:ut/(Be-he),total:Ee,visible:!0}),X=Ze(sC,{ref:$,alwaysOn:pe,startGap:Le,endGap:be,class:w.e("vertical"),clientSize:Ne,layout:"vertical",onScroll:Y,ratio:Ne*100/Qe,scrollFrom:bt/(Qe-Ne),total:Pe,visible:!0});return{horizontalScrollbar:it,verticalScrollbar:X}},fe=()=>{var pe;const[Le,be]=p(z),[Pe,Ee]=p(U),{data:he,totalColumn:Ne,totalRow:Be,useIsScrolling:Qe,itemKey:ut}=g,bt=[];if(Be>0&&Ne>0)for(let it=Pe;it<=Ee;it++)for(let X=Le;X<=be;X++)bt.push((pe=C.default)==null?void 0:pe.call(C,{columnIndex:X,data:he,key:ut({columnIndex:X,data:he,rowIndex:it}),isScrolling:Qe?p(O).isScrolling:void 0,style:le(it,X),rowIndex:it}));return bt},Me=()=>{const pe=It(g.innerElement),Le=fe();return[Ze(pe,{style:p(N),ref:L},at(pe)?Le:{default:()=>Le})]};return()=>{const pe=It(g.containerElement),{horizontalScrollbar:Le,verticalScrollbar:be}=se(),Pe=Me();return Ze("div",{key:0,class:w.e("wrapper")},[Ze(pe,{class:g.className,style:p(D),onScroll:ie,onWheel:we,ref:k},at(pe)?Pe:{default:()=>Pe}),Le,be])}}}),Ife=fD({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:t},e)=>[t,e*t],getRowPosition:({rowHeight:t},e)=>[t,e*t],getEstimatedTotalHeight:({totalRow:t,rowHeight:e})=>e*t,getEstimatedTotalWidth:({totalColumn:t,columnWidth:e})=>e*t,getColumnOffset:({totalColumn:t,columnWidth:e,width:n},i,s,o,r,a)=>{n=Number(n);const l=Math.max(0,t*e-n),c=Math.min(l,i*e),u=Math.max(0,i*e-n+a+e);switch(s==="smart"&&(o>=u-n&&o<=c+n?s=zo:s=Gr),s){case Vm:return c;case Fm:return u;case Gr:{const d=Math.round(u+(c-u)/2);return d<Math.ceil(n/2)?0:d>l+Math.floor(n/2)?l:d}case zo:default:return o>=u&&o<=c?o:u>c||o<u?u:c}},getRowOffset:({rowHeight:t,height:e,totalRow:n},i,s,o,r,a)=>{e=Number(e);const l=Math.max(0,n*t-e),c=Math.min(l,i*t),u=Math.max(0,i*t-e+a+t);switch(s===S_&&(o>=u-e&&o<=c+e?s=zo:s=Gr),s){case Vm:return c;case Fm:return u;case Gr:{const d=Math.round(u+(c-u)/2);return d<Math.ceil(e/2)?0:d>l+Math.floor(e/2)?l:d}case zo:default:return o>=u&&o<=c?o:u>c||o<u?u:c}},getColumnStartIndexForOffset:({columnWidth:t,totalColumn:e},n)=>Math.max(0,Math.min(e-1,Math.floor(n/t))),getColumnStopIndexForStartIndex:({columnWidth:t,totalColumn:e,width:n},i,s)=>{const o=i*t,r=Math.ceil((n+s-o)/t);return Math.max(0,Math.min(e-1,i+r-1))},getRowStartIndexForOffset:({rowHeight:t,totalRow:e},n)=>Math.max(0,Math.min(e-1,Math.floor(n/t))),getRowStopIndexForStartIndex:({rowHeight:t,totalRow:e,height:n},i,s)=>{const o=i*t,r=Math.ceil((n+s-o)/t);return Math.max(0,Math.min(e-1,i+r-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:t,rowHeight:e})=>{}}),{max:nb,min:mD,floor:gD}=Math,xfe={column:"columnWidth",row:"rowHeight"},oC={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},Fa=(t,e,n,i)=>{const[s,o,r]=[n[i],t[xfe[i]],n[oC[i]]];if(e>r){let a=0;if(r>=0){const l=s[r];a=l.offset+l.size}for(let l=r+1;l<=e;l++){const c=o(l);s[l]={offset:a,size:c},a+=c}n[oC[i]]=e}return s[e]},vD=(t,e,n,i,s,o)=>{for(;n<=i;){const r=n+gD((i-n)/2),a=Fa(t,r,e,o).offset;if(a===s)return r;a<s?n=r+1:i=r-1}return nb(0,n-1)},Mfe=(t,e,n,i,s)=>{const o=s==="column"?t.totalColumn:t.totalRow;let r=1;for(;n<o&&Fa(t,n,e,s).offset<i;)n+=r,r*=2;return vD(t,e,gD(n/2),mD(n,o-1),i,s)},E$=(t,e,n,i)=>{const[s,o]=[e[i],e[oC[i]]];return(o>0?s[o].offset:0)>=n?vD(t,e,0,o,n,i):Mfe(t,e,nb(0,o),n,i)},yD=({totalRow:t},{estimatedRowHeight:e,lastVisitedRowIndex:n,row:i})=>{let s=0;if(n>=t&&(n=t-1),n>=0){const a=i[n];s=a.offset+a.size}const r=(t-n-1)*e;return s+r},bD=({totalColumn:t},{column:e,estimatedColumnWidth:n,lastVisitedColumnIndex:i})=>{let s=0;if(i>t&&(i=t-1),i>=0){const a=e[i];s=a.offset+a.size}const r=(t-i-1)*n;return s+r},$fe={column:bD,row:yD},k$=(t,e,n,i,s,o,r)=>{const[a,l]=[o==="row"?t.height:t.width,$fe[o]],c=Fa(t,e,s,o),u=l(t,s),d=nb(0,mD(u-a,c.offset)),h=nb(0,c.offset-a+r+c.size);switch(n===S_&&(i>=h-a&&i<=d+a?n=zo:n=Gr),n){case Vm:return d;case Fm:return h;case Gr:return Math.round(h+(d-h)/2);case zo:default:return i>=h&&i<=d?i:h>d||i<h?h:d}},Afe=fD({name:"ElDynamicSizeGrid",getColumnPosition:(t,e,n)=>{const i=Fa(t,e,n,"column");return[i.size,i.offset]},getRowPosition:(t,e,n)=>{const i=Fa(t,e,n,"row");return[i.size,i.offset]},getColumnOffset:(t,e,n,i,s,o)=>k$(t,e,n,i,s,"column",o),getRowOffset:(t,e,n,i,s,o)=>k$(t,e,n,i,s,"row",o),getColumnStartIndexForOffset:(t,e,n)=>E$(t,n,e,"column"),getColumnStopIndexForStartIndex:(t,e,n,i)=>{const s=Fa(t,e,i,"column"),o=n+t.width;let r=s.offset+s.size,a=e;for(;a<t.totalColumn-1&&r<o;)a++,r+=Fa(t,e,i,"column").size;return a},getEstimatedTotalHeight:yD,getEstimatedTotalWidth:bD,getRowStartIndexForOffset:(t,e,n)=>E$(t,n,e,"row"),getRowStopIndexForStartIndex:(t,e,n,i)=>{const{totalRow:s,height:o}=t,r=Fa(t,e,i,"row"),a=n+o;let l=r.size+r.offset,c=e;for(;c<s-1&&l<a;)c++,l+=Fa(t,c,i,"row").size;return c},injectToInstance:(t,e)=>{const n=({columnIndex:o,rowIndex:r},a)=>{var l,c;a=Ui(a)?!0:a,st(o)&&(e.value.lastVisitedColumnIndex=Math.min(e.value.lastVisitedColumnIndex,o-1)),st(r)&&(e.value.lastVisitedRowIndex=Math.min(e.value.lastVisitedRowIndex,r-1)),(l=t.exposed)==null||l.getItemStyleCache.value(-1,null,null),a&&((c=t.proxy)==null||c.$forceUpdate())},i=(o,r)=>{n({columnIndex:o},r)},s=(o,r)=>{n({rowIndex:o},r)};Object.assign(t.proxy,{resetAfterColumnIndex:i,resetAfterRowIndex:s,resetAfter:n})},initCache:({estimatedColumnWidth:t=Q1,estimatedRowHeight:e=Q1})=>({column:{},estimatedColumnWidth:t,estimatedRowHeight:e,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:t,rowHeight:e})=>{}}),Lfe=J({props:{item:{type:Object,required:!0},style:Object,height:Number},setup(){return{ns:_e("select")}}});function Ofe(t,e,n,i,s,o){return t.item.isTitle?(I(),H("div",{key:0,class:x(t.ns.be("group","title")),style:Ke([t.style,{lineHeight:`${t.height}px`}])},Re(t.item.label),7)):(I(),H("div",{key:1,class:x(t.ns.be("group","split")),style:Ke(t.style)},[G("span",{class:x(t.ns.be("group","split-dash")),style:Ke({top:`${t.height/2}px`})},null,6)],6))}var Pfe=Ve(Lfe,[["render",Ofe],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/group-item.vue"]]);function Rfe(t,{emit:e}){return{hoverItem:()=>{t.disabled||e("hover",t.index)},selectOptionClick:()=>{t.disabled||e("select",t.item,t.index)}}}const Vfe={allowCreate:Boolean,autocomplete:{type:String,default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:[String,Object],default:Ac},effect:{type:String,default:"light"},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:170},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,label:String,modelValue:[Array,String,Number,Boolean,Object],multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:Array,required:!0},placeholder:{type:String},teleported:Di.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,size:{type:String,validator:cg},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:{type:Boolean,default:!1},validateEvent:{type:Boolean,default:!0},placement:{type:ae(String),values:sd,default:"bottom-start"}},Ffe={data:Array,disabled:Boolean,hovering:Boolean,item:Object,index:Number,style:Object,selected:Boolean,created:Boolean},Dfe=J({props:Ffe,emits:["select","hover"],setup(t,{emit:e}){const n=_e("select"),{hoverItem:i,selectOptionClick:s}=Rfe(t,{emit:e});return{ns:n,hoverItem:i,selectOptionClick:s}}}),Nfe=["aria-selected"];function Bfe(t,e,n,i,s,o){return I(),H("li",{"aria-selected":t.selected,style:Ke(t.style),class:x([t.ns.be("dropdown","option-item"),t.ns.is("selected",t.selected),t.ns.is("disabled",t.disabled),t.ns.is("created",t.created),{hover:t.hovering}]),onMouseenter:e[0]||(e[0]=(...r)=>t.hoverItem&&t.hoverItem(...r)),onClick:e[1]||(e[1]=rt((...r)=>t.selectOptionClick&&t.selectOptionClick(...r),["stop"]))},[me(t.$slots,"default",{item:t.item,index:t.index,disabled:t.disabled},()=>[G("span",null,Re(t.item.label),1)])],46,Nfe)}var zfe=Ve(Dfe,[["render",Bfe],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/option-item.vue"]]);const _D="ElSelectV2Injection";var Hfe=J({name:"ElSelectDropdown",props:{data:{type:Array,required:!0},hoveringIndex:Number,width:Number},setup(t,{slots:e,expose:n}){const i=qe(_D),s=_e("select"),o=F([]),r=F(),a=T(()=>t.data.length);Ce(()=>a.value,()=>{var $,L;(L=($=i.popper.value).updatePopper)==null||L.call($)});const l=T(()=>Ui(i.props.estimatedOptionHeight)),c=T(()=>l.value?{itemSize:i.props.itemHeight}:{estimatedSize:i.props.estimatedOptionHeight,itemSize:$=>o.value[$]}),u=($=[],L)=>{const{props:{valueKey:O}}=i;return Et(L)?$&&$.some(B=>xn(B,O)===xn(L,O)):$.includes(L)},d=($,L)=>{if(Et(L)){const{valueKey:O}=i.props;return xn($,O)===xn(L,O)}else return $===L},h=($,L)=>{const{valueKey:O}=i.props;return i.props.multiple?u($,xn(L,O)):d($,xn(L,O))},f=($,L)=>{const{disabled:O,multiple:B,multipleLimit:V}=i.props;return O||!L&&(B?V>0&&$.length>=V:!1)},m=$=>t.hoveringIndex===$;n({listRef:r,isSized:l,isItemDisabled:f,isItemHovering:m,isItemSelected:h,scrollToItem:$=>{const L=r.value;L&&L.scrollToItem($)},resetScrollTop:()=>{const $=r.value;$&&$.resetScrollTop()}});const _=$=>{const{index:L,data:O,style:B}=$,V=p(l),{itemSize:P,estimatedSize:z}=p(c),{modelValue:U}=i.props,{onSelect:W,onHover:R}=i,D=O[L];if(D.type==="Group")return Z(Pfe,{item:D,style:B,height:V?P:z},null);const N=h(U,D),K=f(U,N),ie=m(L);return Z(zfe,kt($,{selected:N,disabled:D.disabled||K,created:!!D.created,hovering:ie,item:D,onSelect:W,onHover:R}),{default:Y=>{var ne;return((ne=e.default)==null?void 0:ne.call(e,Y))||Z("span",null,[D.label])}})},{onKeyboardNavigate:C,onKeyboardSelect:w}=i,S=()=>{C("forward")},E=()=>{C("backward")},k=()=>{i.expanded=!1},A=$=>{const{code:L}=$,{tab:O,esc:B,down:V,up:P,enter:z}=Xe;switch(L!==O&&($.preventDefault(),$.stopPropagation()),L){case O:case B:{k();break}case V:{S();break}case P:{E();break}case z:{w();break}}};return()=>{var $;const{data:L,width:O}=t,{height:B,multiple:V,scrollbarAlwaysOn:P}=i.props;if(L.length===0)return Z("div",{class:s.b("dropdown"),style:{width:`${O}px`}},[($=e.empty)==null?void 0:$.call(e)]);const z=p(l)?pD:kfe;return Z("div",{class:[s.b("dropdown"),s.is("multiple",V)]},[Z(z,kt({ref:r},p(c),{className:s.be("dropdown","list"),scrollbarAlwaysOn:P,data:L,height:B,width:O,total:L.length,onKeydown:A}),{default:U=>Z(_,U,null)})])}}});function Ufe(t,e){const n=F(0),i=F(null),s=T(()=>t.allowCreate&&t.filterable);function o(u){const d=h=>h.value===u;return t.options&&t.options.some(d)||e.createdOptions.some(d)}function r(u){s.value&&(t.multiple&&u.created?n.value++:i.value=u)}function a(u){if(s.value)if(u&&u.length>0&&!o(u)){const d={value:u,label:u,created:!0,disabled:!1};e.createdOptions.length>=n.value?e.createdOptions[n.value]=d:e.createdOptions.push(d)}else if(t.multiple)e.createdOptions.length=n.value;else{const d=i.value;e.createdOptions.length=0,d&&d.created&&e.createdOptions.push(d)}}function l(u){if(!s.value||!u||!u.created||u.created&&t.reserveKeyword&&e.inputValue===u.label)return;const d=e.createdOptions.findIndex(h=>h.value===u.value);~d&&(e.createdOptions.splice(d,1),n.value--)}function c(){s.value&&(e.createdOptions.length=0,n.value=0)}return{createNewOption:a,removeNewOption:l,selectNewOption:r,clearAllNewOption:c}}const Wfe=t=>{const e=[];return t.forEach(n=>{ze(n.options)?(e.push({label:n.label,isTitle:!0,type:"Group"}),n.options.forEach(i=>{e.push(i)}),e.push({type:"Group"})):e.push(n)}),e};function Gfe(t){const e=F(!1);return{handleCompositionStart:()=>{e.value=!0},handleCompositionUpdate:o=>{const r=o.target.value,a=r[r.length-1]||"";e.value=!c_(a)},handleCompositionEnd:o=>{e.value&&(e.value=!1,ot(t)&&t(o))}}}const T$="",I$=11,jfe={larget:51,default:42,small:33},qfe=(t,e)=>{const{t:n}=Gt(),i=_e("select-v2"),s=_e("input"),{form:o,formItem:r}=Ns(),a=Yt({inputValue:T$,displayInputValue:T$,calculatedWidth:0,cachedPlaceholder:"",cachedOptions:[],createdOptions:[],createdLabel:"",createdSelected:!1,currentPlaceholder:"",hoveringIndex:-1,comboBoxHovering:!1,isOnComposition:!1,isSilentBlur:!1,isComposing:!1,inputLength:20,selectWidth:200,initialInputHeight:0,previousQuery:null,previousValue:void 0,query:"",selectedLabel:"",softFocus:!1,tagInMultiLine:!1}),l=F(-1),c=F(-1),u=F(null),d=F(null),h=F(null),f=F(null),m=F(null),g=F(null),y=F(null),_=F(!1),C=T(()=>t.disabled||(o==null?void 0:o.disabled)),w=T(()=>{const xe=V.value.length*34;return xe>t.height?t.height:xe}),S=T(()=>!Gi(t.modelValue)),E=T(()=>{const xe=t.multiple?Array.isArray(t.modelValue)&&t.modelValue.length>0:S.value;return t.clearable&&!C.value&&a.comboBoxHovering&&xe}),k=T(()=>t.remote&&t.filterable?"":r_),A=T(()=>k.value&&i.is("reverse",_.value)),$=T(()=>(r==null?void 0:r.validateState)||""),L=T(()=>AR[$.value]),O=T(()=>t.remote?300:0),B=T(()=>{const xe=V.value;return t.loading?t.loadingText||n("el.select.loading"):t.remote&&a.inputValue===""&&xe.length===0?!1:t.filterable&&a.inputValue&&xe.length>0?t.noMatchText||n("el.select.noMatch"):xe.length===0?t.noDataText||n("el.select.noData"):null}),V=T(()=>{const xe=Je=>{const $t=a.inputValue,tn=new RegExp(_R($t),"i");return $t?tn.test(Je.label||""):!0};return t.loading?[]:Wfe(t.options.concat(a.createdOptions).map(Je=>{if(ze(Je.options)){const $t=Je.options.filter(xe);if($t.length>0)return{...Je,options:$t}}else if(t.remote||xe(Je))return Je;return null}).filter(Je=>Je!==null))}),P=T(()=>V.value.every(xe=>xe.disabled)),z=gi(),U=T(()=>z.value==="small"?"small":"default"),W=T(()=>{const xe=g.value,Je=U.value||"default",$t=xe?Number.parseInt(getComputedStyle(xe).paddingLeft):0,tn=xe?Number.parseInt(getComputedStyle(xe).paddingRight):0;return a.selectWidth-tn-$t-jfe[Je]}),R=()=>{var xe;c.value=((xe=m.value)==null?void 0:xe.offsetWidth)||200},D=T(()=>({width:`${a.calculatedWidth===0?I$:Math.ceil(a.calculatedWidth)+I$}px`})),N=T(()=>ze(t.modelValue)?t.modelValue.length===0&&!a.displayInputValue:t.filterable?a.displayInputValue.length===0:!0),K=T(()=>{const xe=t.placeholder||n("el.select.placeholder");return t.multiple||Gi(t.modelValue)?xe:a.selectedLabel}),ie=T(()=>{var xe,Je;return(Je=(xe=f.value)==null?void 0:xe.popperRef)==null?void 0:Je.contentRef}),Y=T(()=>{if(t.multiple){const xe=t.modelValue.length;if(t.modelValue.length>0)return V.value.findIndex(Je=>Je.value===t.modelValue[xe-1])}else if(t.modelValue)return V.value.findIndex(xe=>xe.value===t.modelValue);return-1}),ne=T({get(){return _.value&&B.value!==!1},set(xe){_.value=xe}}),{createNewOption:we,removeNewOption:Se,selectNewOption:Te,clearAllNewOption:le}=Ufe(t,a),{handleCompositionStart:oe,handleCompositionUpdate:de,handleCompositionEnd:ve}=Gfe(xe=>an(xe)),He=()=>{var xe,Je,$t;(Je=(xe=d.value).focus)==null||Je.call(xe),($t=f.value)==null||$t.updatePopper()},Q=()=>{if(!t.automaticDropdown&&!C.value)return a.isComposing&&(a.softFocus=!0),je(()=>{var xe,Je;_.value=!_.value,(Je=(xe=d.value)==null?void 0:xe.focus)==null||Je.call(xe)})},se=()=>(t.filterable&&a.inputValue!==a.selectedLabel&&(a.query=a.selectedLabel),Me(a.inputValue),je(()=>{we(a.inputValue)})),fe=Rs(se,O.value),Me=xe=>{a.previousQuery!==xe&&(a.previousQuery=xe,t.filterable&&ot(t.filterMethod)?t.filterMethod(xe):t.filterable&&t.remote&&ot(t.remoteMethod)&&t.remoteMethod(xe))},Oe=xe=>{So(t.modelValue,xe)||e(bn,xe)},pe=xe=>{e(wt,xe),Oe(xe),a.previousValue=xe==null?void 0:xe.toString()},Le=(xe=[],Je)=>{if(!Et(Je))return xe.indexOf(Je);const $t=t.valueKey;let tn=-1;return xe.some((Tr,Ir)=>xn(Tr,$t)===xn(Je,$t)?(tn=Ir,!0):!1),tn},be=xe=>Et(xe)?xn(xe,t.valueKey):xe,Pe=xe=>Et(xe)?xe.label:xe,Ee=()=>{if(!(t.collapseTags&&!t.filterable))return je(()=>{var xe,Je;if(!d.value)return;const $t=g.value;m.value.height=$t.offsetHeight,_.value&&B.value!==!1&&((Je=(xe=f.value)==null?void 0:xe.updatePopper)==null||Je.call(xe))})},he=()=>{var xe,Je;if(Ne(),R(),(Je=(xe=f.value)==null?void 0:xe.updatePopper)==null||Je.call(xe),t.multiple)return Ee()},Ne=()=>{const xe=g.value;xe&&(a.selectWidth=xe.getBoundingClientRect().width)},Be=(xe,Je,$t=!0)=>{var tn,Tr;if(t.multiple){let Ir=t.modelValue.slice();const Eg=Le(Ir,be(xe));Eg>-1?(Ir=[...Ir.slice(0,Eg),...Ir.slice(Eg+1)],a.cachedOptions.splice(Eg,1),Se(xe)):(t.multipleLimit<=0||Ir.length<t.multipleLimit)&&(Ir=[...Ir,be(xe)],a.cachedOptions.push(xe),Te(xe),ye(Je)),pe(Ir),xe.created&&(a.query="",Me(""),a.inputLength=20),t.filterable&&!t.reserveKeyword&&((Tr=(tn=d.value).focus)==null||Tr.call(tn),$e("")),t.filterable&&(a.calculatedWidth=y.value.getBoundingClientRect().width),Ee(),Ct()}else l.value=Je,a.selectedLabel=xe.label,pe(be(xe)),_.value=!1,a.isComposing=!1,a.isSilentBlur=$t,Te(xe),xe.created||le(),ye(Je)},Qe=(xe,Je)=>{const{valueKey:$t}=t,tn=t.modelValue.indexOf(xn(Je,$t));if(tn>-1&&!C.value){const Tr=[...t.modelValue.slice(0,tn),...t.modelValue.slice(tn+1)];return a.cachedOptions.splice(tn,1),pe(Tr),e("remove-tag",xn(Je,$t)),a.softFocus=!0,Se(Je),je(He)}xe.stopPropagation()},ut=xe=>{const Je=a.isComposing;a.isComposing=!0,a.softFocus?a.softFocus=!1:Je||e("focus",xe)},bt=xe=>(a.softFocus=!1,je(()=>{var Je,$t;($t=(Je=d.value)==null?void 0:Je.blur)==null||$t.call(Je),y.value&&(a.calculatedWidth=y.value.getBoundingClientRect().width),a.isSilentBlur?a.isSilentBlur=!1:a.isComposing&&e("blur",xe),a.isComposing=!1})),it=()=>{a.displayInputValue.length>0?$e(""):_.value=!1},X=xe=>{if(a.displayInputValue.length===0){xe.preventDefault();const Je=t.modelValue.slice();Je.pop(),Se(a.cachedOptions.pop()),pe(Je)}},ue=()=>{let xe;return ze(t.modelValue)?xe=[]:xe=void 0,a.softFocus=!0,t.multiple?a.cachedOptions=[]:a.selectedLabel="",_.value=!1,pe(xe),e("clear"),le(),je(He)},$e=xe=>{a.displayInputValue=xe,a.inputValue=xe},j=(xe,Je=void 0)=>{const $t=V.value;if(!["forward","backward"].includes(xe)||C.value||$t.length<=0||P.value)return;if(!_.value)return Q();Je===void 0&&(Je=a.hoveringIndex);let tn=-1;xe==="forward"?(tn=Je+1,tn>=$t.length&&(tn=0)):xe==="backward"&&(tn=Je-1,(tn<0||tn>=$t.length)&&(tn=$t.length-1));const Tr=$t[tn];if(Tr.disabled||Tr.type==="Group")return j(xe,tn);ye(tn),un(tn)},te=()=>{if(_.value)~a.hoveringIndex&&V.value[a.hoveringIndex]&&Be(V.value[a.hoveringIndex],a.hoveringIndex,!1);else return Q()},ye=xe=>{a.hoveringIndex=xe},Ie=()=>{a.hoveringIndex=-1},Ct=()=>{var xe;const Je=d.value;Je&&((xe=Je.focus)==null||xe.call(Je))},an=xe=>{const Je=xe.target.value;if($e(Je),a.displayInputValue.length>0&&!_.value&&(_.value=!0),a.calculatedWidth=y.value.getBoundingClientRect().width,t.multiple&&Ee(),t.remote)fe();else return se()},pi=()=>(_.value=!1,bt()),Pi=()=>(a.inputValue=a.displayInputValue,je(()=>{~Y.value&&(ye(Y.value),un(a.hoveringIndex))})),un=xe=>{h.value.scrollToItem(xe)},jt=()=>{if(Ie(),t.multiple)if(t.modelValue.length>0){let xe=!1;a.cachedOptions.length=0,a.previousValue=t.modelValue.toString(),t.modelValue.forEach(Je=>{const $t=V.value.findIndex(tn=>be(tn)===Je);~$t&&(a.cachedOptions.push(V.value[$t]),xe||ye($t),xe=!0)})}else a.cachedOptions=[],a.previousValue=void 0;else if(S.value){a.previousValue=t.modelValue;const xe=V.value,Je=xe.findIndex($t=>be($t)===be(t.modelValue));~Je?(a.selectedLabel=xe[Je].label,ye(Je)):a.selectedLabel=`${t.modelValue}`}else a.selectedLabel="",a.previousValue=void 0;le(),R()};return Ce(_,xe=>{var Je,$t;e("visible-change",xe),xe?($t=(Je=f.value).update)==null||$t.call(Je):(a.displayInputValue="",a.previousQuery=null,we(""))}),Ce(()=>t.modelValue,(xe,Je)=>{var $t;(!xe||xe.toString()!==a.previousValue)&&jt(),!So(xe,Je)&&t.validateEvent&&(($t=r==null?void 0:r.validate)==null||$t.call(r,"change").catch(tn=>void 0))},{deep:!0}),Ce(()=>t.options,()=>{const xe=d.value;(!xe||xe&&document.activeElement!==xe)&&jt()},{deep:!0}),Ce(V,()=>je(h.value.resetScrollTop)),ft(()=>{jt()}),ms(m,he),{collapseTagSize:U,currentPlaceholder:K,expanded:_,emptyText:B,popupHeight:w,debounce:O,filteredOptions:V,iconComponent:k,iconReverse:A,inputWrapperStyle:D,popperSize:c,dropdownMenuVisible:ne,hasModelValue:S,shouldShowPlaceholder:N,selectDisabled:C,selectSize:z,showClearBtn:E,states:a,tagMaxWidth:W,nsSelectV2:i,nsInput:s,calculatorRef:y,controlRef:u,inputRef:d,menuRef:h,popper:f,selectRef:m,selectionRef:g,popperRef:ie,validateState:$,validateIcon:L,debouncedOnInputChange:fe,deleteTag:Qe,getLabel:Pe,getValueKey:be,handleBlur:bt,handleClear:ue,handleClickOutside:pi,handleDel:X,handleEsc:it,handleFocus:ut,handleMenuEnter:Pi,handleResize:he,toggleMenu:Q,scrollTo:un,onInput:an,onKeyboardNavigate:j,onKeyboardSelect:te,onSelect:Be,onHover:ye,onUpdateInputValue:$e,handleCompositionStart:oe,handleCompositionEnd:ve,handleCompositionUpdate:de}},Kfe=J({name:"ElSelectV2",components:{ElSelectMenu:Hfe,ElTag:Om,ElTooltip:Fs,ElIcon:Ge},directives:{ClickOutside:Tc,ModelText:EE},props:Vfe,emits:[wt,bn,"remove-tag","clear","visible-change","focus","blur"],setup(t,{emit:e}){const n=T(()=>{const{modelValue:s,multiple:o}=t,r=o?[]:void 0;return ze(s)?o?s:r:o?r:s}),i=qfe(Yt({...Ei(t),modelValue:n}),e);return xt(_D,{props:Yt({...Ei(t),height:i.popupHeight,modelValue:n}),popper:i.popper,onSelect:i.onSelect,onHover:i.onHover,onKeyboardNavigate:i.onKeyboardNavigate,onKeyboardSelect:i.onKeyboardSelect}),{...i,modelValue:n}}}),Yfe={key:0},Zfe=["id","autocomplete","aria-expanded","aria-labelledby","disabled","readonly","name","unselectable"],Xfe=["textContent"],Qfe=["id","aria-labelledby","aria-expanded","autocomplete","disabled","name","readonly","unselectable"],Jfe=["textContent"];function eme(t,e,n,i,s,o){const r=pt("el-tag"),a=pt("el-tooltip"),l=pt("el-icon"),c=pt("el-select-menu"),u=mm("model-text"),d=mm("click-outside");return ct((I(),H("div",{ref:"selectRef",class:x([t.nsSelectV2.b(),t.nsSelectV2.m(t.selectSize)]),onClick:e[25]||(e[25]=rt((...h)=>t.toggleMenu&&t.toggleMenu(...h),["stop"])),onMouseenter:e[26]||(e[26]=h=>t.states.comboBoxHovering=!0),onMouseleave:e[27]||(e[27]=h=>t.states.comboBoxHovering=!1)},[Z(a,{ref:"popper",visible:t.dropdownMenuVisible,teleported:t.teleported,"popper-class":[t.nsSelectV2.e("popper"),t.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":t.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:t.effect,placement:t.placement,pure:"",transition:`${t.nsSelectV2.namespace.value}-zoom-in-top`,trigger:"click",persistent:t.persistent,onBeforeShow:t.handleMenuEnter,onHide:e[24]||(e[24]=h=>t.states.inputValue=t.states.displayInputValue)},{default:ee(()=>{var h;return[G("div",{ref:"selectionRef",class:x([t.nsSelectV2.e("wrapper"),t.nsSelectV2.is("focused",t.states.isComposing||t.expanded),t.nsSelectV2.is("hovering",t.states.comboBoxHovering),t.nsSelectV2.is("filterable",t.filterable),t.nsSelectV2.is("disabled",t.selectDisabled)])},[t.$slots.prefix?(I(),H("div",Yfe,[me(t.$slots,"prefix")])):re("v-if",!0),t.multiple?(I(),H("div",{key:1,class:x(t.nsSelectV2.e("selection"))},[t.collapseTags&&t.modelValue.length>0?(I(),H("div",{key:0,class:x(t.nsSelectV2.e("selected-item"))},[Z(r,{closable:!t.selectDisabled&&!((h=t.states.cachedOptions[0])!=null&&h.disable),size:t.collapseTagSize,type:"info","disable-transitions":"",onClose:e[0]||(e[0]=f=>t.deleteTag(f,t.states.cachedOptions[0]))},{default:ee(()=>{var f;return[G("span",{class:x(t.nsSelectV2.e("tags-text")),style:Ke({maxWidth:`${t.tagMaxWidth}px`})},Re((f=t.states.cachedOptions[0])==null?void 0:f.label),7)]}),_:1},8,["closable","size"]),t.modelValue.length>1?(I(),ce(r,{key:0,closable:!1,size:t.collapseTagSize,type:"info","disable-transitions":""},{default:ee(()=>[t.collapseTagsTooltip?(I(),ce(a,{key:0,disabled:t.dropdownMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom",teleported:!1},{default:ee(()=>[G("span",{class:x(t.nsSelectV2.e("tags-text")),style:Ke({maxWidth:`${t.tagMaxWidth}px`})},"+ "+Re(t.modelValue.length-1),7)]),content:ee(()=>[G("div",{class:x(t.nsSelectV2.e("selection"))},[(I(!0),H(Ye,null,Ot(t.states.cachedOptions.slice(1),(f,m)=>(I(),H("div",{key:m,class:x(t.nsSelectV2.e("selected-item"))},[(I(),ce(r,{key:t.getValueKey(f),closable:!t.selectDisabled&&!f.disabled,size:t.collapseTagSize,class:"in-tooltip",type:"info","disable-transitions":"",onClose:g=>t.deleteTag(g,f)},{default:ee(()=>[G("span",{class:x(t.nsSelectV2.e("tags-text")),style:Ke({maxWidth:`${t.tagMaxWidth}px`})},Re(t.getLabel(f)),7)]),_:2},1032,["closable","size","onClose"]))],2))),128))],2)]),_:1},8,["disabled","effect"])):(I(),H("span",{key:1,class:x(t.nsSelectV2.e("tags-text")),style:Ke({maxWidth:`${t.tagMaxWidth}px`})},"+ "+Re(t.modelValue.length-1),7))]),_:1},8,["size"])):re("v-if",!0)],2)):(I(!0),H(Ye,{key:1},Ot(t.states.cachedOptions,(f,m)=>(I(),H("div",{key:m,class:x(t.nsSelectV2.e("selected-item"))},[(I(),ce(r,{key:t.getValueKey(f),closable:!t.selectDisabled&&!f.disabled,size:t.collapseTagSize,type:"info","disable-transitions":"",onClose:g=>t.deleteTag(g,f)},{default:ee(()=>[G("span",{class:x(t.nsSelectV2.e("tags-text")),style:Ke({maxWidth:`${t.tagMaxWidth}px`})},Re(t.getLabel(f)),7)]),_:2},1032,["closable","size","onClose"]))],2))),128)),G("div",{class:x([t.nsSelectV2.e("selected-item"),t.nsSelectV2.e("input-wrapper")]),style:Ke(t.inputWrapperStyle)},[ct(G("input",{id:t.id,ref:"inputRef",autocomplete:t.autocomplete,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":t.expanded,"aria-labelledby":t.label,class:x([t.nsSelectV2.is(t.selectSize),t.nsSelectV2.e("combobox-input")]),disabled:t.disabled,role:"combobox",readonly:!t.filterable,spellcheck:"false",type:"text",name:t.name,unselectable:t.expanded?"on":void 0,"onUpdate:modelValue":e[1]||(e[1]=(...f)=>t.onUpdateInputValue&&t.onUpdateInputValue(...f)),onFocus:e[2]||(e[2]=(...f)=>t.handleFocus&&t.handleFocus(...f)),onBlur:e[3]||(e[3]=(...f)=>t.handleBlur&&t.handleBlur(...f)),onInput:e[4]||(e[4]=(...f)=>t.onInput&&t.onInput(...f)),onCompositionstart:e[5]||(e[5]=(...f)=>t.handleCompositionStart&&t.handleCompositionStart(...f)),onCompositionupdate:e[6]||(e[6]=(...f)=>t.handleCompositionUpdate&&t.handleCompositionUpdate(...f)),onCompositionend:e[7]||(e[7]=(...f)=>t.handleCompositionEnd&&t.handleCompositionEnd(...f)),onKeydown:[e[8]||(e[8]=Bt(rt(f=>t.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),e[9]||(e[9]=Bt(rt(f=>t.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),e[10]||(e[10]=Bt(rt((...f)=>t.onKeyboardSelect&&t.onKeyboardSelect(...f),["stop","prevent"]),["enter"])),e[11]||(e[11]=Bt(rt((...f)=>t.handleEsc&&t.handleEsc(...f),["stop","prevent"]),["esc"])),e[12]||(e[12]=Bt(rt((...f)=>t.handleDel&&t.handleDel(...f),["stop"]),["delete"]))]},null,42,Zfe),[[u,t.states.displayInputValue]]),t.filterable?(I(),H("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:x(t.nsSelectV2.e("input-calculator")),textContent:Re(t.states.displayInputValue)},null,10,Xfe)):re("v-if",!0)],6)],2)):(I(),H(Ye,{key:2},[G("div",{class:x([t.nsSelectV2.e("selected-item"),t.nsSelectV2.e("input-wrapper")])},[ct(G("input",{id:t.id,ref:"inputRef","aria-autocomplete":"list","aria-haspopup":"listbox","aria-labelledby":t.label,"aria-expanded":t.expanded,autocapitalize:"off",autocomplete:t.autocomplete,class:x(t.nsSelectV2.e("combobox-input")),disabled:t.disabled,name:t.name,role:"combobox",readonly:!t.filterable,spellcheck:"false",type:"text",unselectable:t.expanded?"on":void 0,onCompositionstart:e[13]||(e[13]=(...f)=>t.handleCompositionStart&&t.handleCompositionStart(...f)),onCompositionupdate:e[14]||(e[14]=(...f)=>t.handleCompositionUpdate&&t.handleCompositionUpdate(...f)),onCompositionend:e[15]||(e[15]=(...f)=>t.handleCompositionEnd&&t.handleCompositionEnd(...f)),onFocus:e[16]||(e[16]=(...f)=>t.handleFocus&&t.handleFocus(...f)),onBlur:e[17]||(e[17]=(...f)=>t.handleBlur&&t.handleBlur(...f)),onInput:e[18]||(e[18]=(...f)=>t.onInput&&t.onInput(...f)),onKeydown:[e[19]||(e[19]=Bt(rt(f=>t.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),e[20]||(e[20]=Bt(rt(f=>t.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),e[21]||(e[21]=Bt(rt((...f)=>t.onKeyboardSelect&&t.onKeyboardSelect(...f),["stop","prevent"]),["enter"])),e[22]||(e[22]=Bt(rt((...f)=>t.handleEsc&&t.handleEsc(...f),["stop","prevent"]),["esc"]))],"onUpdate:modelValue":e[23]||(e[23]=(...f)=>t.onUpdateInputValue&&t.onUpdateInputValue(...f))},null,42,Qfe),[[u,t.states.displayInputValue]])],2),t.filterable?(I(),H("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:x([t.nsSelectV2.e("selected-item"),t.nsSelectV2.e("input-calculator")]),textContent:Re(t.states.displayInputValue)},null,10,Jfe)):re("v-if",!0)],64)),t.shouldShowPlaceholder?(I(),H("span",{key:3,class:x([t.nsSelectV2.e("placeholder"),t.nsSelectV2.is("transparent",t.multiple?t.modelValue.length===0:!t.hasModelValue)])},Re(t.currentPlaceholder),3)):re("v-if",!0),G("span",{class:x(t.nsSelectV2.e("suffix"))},[t.iconComponent?ct((I(),ce(l,{key:0,class:x([t.nsSelectV2.e("caret"),t.nsInput.e("icon"),t.iconReverse])},{default:ee(()=>[(I(),ce(It(t.iconComponent)))]),_:1},8,["class"])),[[Vt,!t.showClearBtn]]):re("v-if",!0),t.showClearBtn&&t.clearIcon?(I(),ce(l,{key:1,class:x([t.nsSelectV2.e("caret"),t.nsInput.e("icon")]),onClick:rt(t.handleClear,["prevent","stop"])},{default:ee(()=>[(I(),ce(It(t.clearIcon)))]),_:1},8,["class","onClick"])):re("v-if",!0),t.validateState&&t.validateIcon?(I(),ce(l,{key:2,class:x([t.nsInput.e("icon"),t.nsInput.e("validateIcon")])},{default:ee(()=>[(I(),ce(It(t.validateIcon)))]),_:1},8,["class"])):re("v-if",!0)],2)],2)]}),content:ee(()=>[Z(c,{ref:"menuRef",data:t.filteredOptions,width:t.popperSize,"hovering-index":t.states.hoveringIndex,"scrollbar-always-on":t.scrollbarAlwaysOn},{default:ee(h=>[me(t.$slots,"default",or(Zb(h)))]),empty:ee(()=>[me(t.$slots,"empty",{},()=>[G("p",{class:x(t.nsSelectV2.e("empty"))},Re(t.emptyText?t.emptyText:""),3)])]),_:3},8,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","effect","placement","transition","persistent","onBeforeShow"])],34)),[[d,t.handleClickOutside,t.popperRef]])}var qv=Ve(Kfe,[["render",eme],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/select.vue"]]);qv.install=t=>{t.component(qv.name,qv)};const tme=qv,nme=tme,ime=De({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),sme=De({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),ome=J({name:"ElSkeletonItem"}),rme=J({...ome,props:sme,setup(t){const e=_e("skeleton");return(n,i)=>(I(),H("div",{class:x([p(e).e("item"),p(e).e(n.variant)])},[n.variant==="image"?(I(),ce(p(xZ),{key:0})):re("v-if",!0)],2))}});var ib=Ve(rme,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton-item.vue"]]);const ame=J({name:"ElSkeleton"}),lme=J({...ame,props:ime,setup(t,{expose:e}){const n=t,i=_e("skeleton"),s=AJ(On(n,"loading"),n.throttle);return e({uiLoading:s}),(o,r)=>p(s)?(I(),H("div",kt({key:0,class:[p(i).b(),p(i).is("animated",o.animated)]},o.$attrs),[(I(!0),H(Ye,null,Ot(o.count,a=>(I(),H(Ye,{key:a},[o.loading?me(o.$slots,"template",{key:a},()=>[Z(ib,{class:x(p(i).is("first")),variant:"p"},null,8,["class"]),(I(!0),H(Ye,null,Ot(o.rows,l=>(I(),ce(ib,{key:l,class:x([p(i).e("paragraph"),p(i).is("last",l===o.rows&&o.rows>1)]),variant:"p"},null,8,["class"]))),128))]):re("v-if",!0)],64))),128))],16)):me(o.$slots,"default",or(kt({key:1},o.$attrs)))}});var cme=Ve(lme,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton.vue"]]);const ume=yt(cme,{SkeletonItem:ib}),dme=Nn(ib),pme=De({modelValue:{type:ae([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Vs,inputSize:Vs,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:ae(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:ae(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:sd,default:"top"},marks:{type:ae(Object)},validateEvent:{type:Boolean,default:!0}}),xw=t=>st(t)||ze(t)&&t.every(st),hme={[wt]:xw,[As]:xw,[bn]:xw},fme=(t,e,n)=>{const i=F();return ft(async()=>{t.range?(Array.isArray(t.modelValue)?(e.firstValue=Math.max(t.min,t.modelValue[0]),e.secondValue=Math.min(t.max,t.modelValue[1])):(e.firstValue=t.min,e.secondValue=t.max),e.oldValue=[e.firstValue,e.secondValue]):(typeof t.modelValue!="number"||Number.isNaN(t.modelValue)?e.firstValue=t.min:e.firstValue=Math.min(t.max,Math.max(t.min,t.modelValue)),e.oldValue=e.firstValue),En(window,"resize",n),await je(),n()}),{sliderWrapper:i}},mme=t=>T(()=>t.marks?Object.keys(t.marks).map(Number.parseFloat).sort((n,i)=>n-i).filter(n=>n<=t.max&&n>=t.min).map(n=>({point:n,position:(n-t.min)*100/(t.max-t.min),mark:t.marks[n]})):[]),gme=(t,e,n)=>{const{form:i,formItem:s}=Ns(),o=yn(),r=F(),a=F(),l={firstButton:r,secondButton:a},c=T(()=>t.disabled||(i==null?void 0:i.disabled)||!1),u=T(()=>Math.min(e.firstValue,e.secondValue)),d=T(()=>Math.max(e.firstValue,e.secondValue)),h=T(()=>t.range?`${100*(d.value-u.value)/(t.max-t.min)}%`:`${100*(e.firstValue-t.min)/(t.max-t.min)}%`),f=T(()=>t.range?`${100*(u.value-t.min)/(t.max-t.min)}%`:"0%"),m=T(()=>t.vertical?{height:t.height}:{}),g=T(()=>t.vertical?{height:h.value,bottom:f.value}:{width:h.value,left:f.value}),y=()=>{o.value&&(e.sliderSize=o.value[`client${t.vertical?"Height":"Width"}`])},_=B=>{const V=t.min+B*(t.max-t.min)/100;if(!t.range)return r;let P;return Math.abs(u.value-V)<Math.abs(d.value-V)?P=e.firstValue<e.secondValue?"firstButton":"secondButton":P=e.firstValue>e.secondValue?"firstButton":"secondButton",l[P]},C=B=>{const V=_(B);return V.value.setPosition(B),V},w=B=>{e.firstValue=B,E(t.range?[u.value,d.value]:B)},S=B=>{e.secondValue=B,t.range&&E([u.value,d.value])},E=B=>{n(wt,B),n(As,B)},k=async()=>{await je(),n(bn,t.range?[u.value,d.value]:t.modelValue)},A=B=>{var V,P,z,U,W,R;if(c.value||e.dragging)return;y();let D=0;if(t.vertical){const N=(z=(P=(V=B.touches)==null?void 0:V.item(0))==null?void 0:P.clientY)!=null?z:B.clientY;D=(o.value.getBoundingClientRect().bottom-N)/e.sliderSize*100}else{const N=(R=(W=(U=B.touches)==null?void 0:U.item(0))==null?void 0:W.clientX)!=null?R:B.clientX,K=o.value.getBoundingClientRect().left;D=(N-K)/e.sliderSize*100}if(!(D<0||D>100))return C(D)};return{elFormItem:s,slider:o,firstButton:r,secondButton:a,sliderDisabled:c,minValue:u,maxValue:d,runwayStyle:m,barStyle:g,resetSize:y,setPosition:C,emitChange:k,onSliderWrapperPrevent:B=>{var V,P;((V=l.firstButton.value)!=null&&V.dragging||(P=l.secondButton.value)!=null&&P.dragging)&&B.preventDefault()},onSliderClick:B=>{A(B)&&k()},onSliderDown:async B=>{const V=A(B);V&&(await je(),V.value.onButtonDown(B))},setFirstValue:w,setSecondValue:S}},{left:vme,down:yme,right:bme,up:_me,home:wme,end:Cme,pageUp:Sme,pageDown:Eme}=Xe,kme=(t,e,n)=>{const i=F(),s=F(!1),o=T(()=>e.value instanceof Function),r=T(()=>o.value&&e.value(t.modelValue)||t.modelValue),a=Rs(()=>{n.value&&(s.value=!0)},50),l=Rs(()=>{n.value&&(s.value=!1)},50);return{tooltip:i,tooltipVisible:s,formatValue:r,displayTooltip:a,hideTooltip:l}},Tme=(t,e,n)=>{const{disabled:i,min:s,max:o,step:r,showTooltip:a,precision:l,sliderSize:c,formatTooltip:u,emitChange:d,resetSize:h,updateDragging:f}=qe(UR),{tooltip:m,tooltipVisible:g,formatValue:y,displayTooltip:_,hideTooltip:C}=kme(t,u,a),w=F(),S=T(()=>`${(t.modelValue-s.value)/(o.value-s.value)*100}%`),E=T(()=>t.vertical?{bottom:S.value}:{left:S.value}),k=()=>{e.hovering=!0,_()},A=()=>{e.hovering=!1,e.dragging||C()},$=Y=>{i.value||(Y.preventDefault(),D(Y),window.addEventListener("mousemove",N),window.addEventListener("touchmove",N),window.addEventListener("mouseup",K),window.addEventListener("touchend",K),window.addEventListener("contextmenu",K),w.value.focus())},L=Y=>{i.value||(e.newPosition=Number.parseFloat(S.value)+Y/(o.value-s.value)*100,ie(e.newPosition),d())},O=()=>{L(-r.value)},B=()=>{L(r.value)},V=()=>{L(-r.value*4)},P=()=>{L(r.value*4)},z=()=>{i.value||(ie(0),d())},U=()=>{i.value||(ie(100),d())},W=Y=>{let ne=!0;[vme,yme].includes(Y.key)?O():[bme,_me].includes(Y.key)?B():Y.key===wme?z():Y.key===Cme?U():Y.key===Eme?V():Y.key===Sme?P():ne=!1,ne&&Y.preventDefault()},R=Y=>{let ne,we;return Y.type.startsWith("touch")?(we=Y.touches[0].clientY,ne=Y.touches[0].clientX):(we=Y.clientY,ne=Y.clientX),{clientX:ne,clientY:we}},D=Y=>{e.dragging=!0,e.isClick=!0;const{clientX:ne,clientY:we}=R(Y);t.vertical?e.startY=we:e.startX=ne,e.startPosition=Number.parseFloat(S.value),e.newPosition=e.startPosition},N=Y=>{if(e.dragging){e.isClick=!1,_(),h();let ne;const{clientX:we,clientY:Se}=R(Y);t.vertical?(e.currentY=Se,ne=(e.startY-e.currentY)/c.value*100):(e.currentX=we,ne=(e.currentX-e.startX)/c.value*100),e.newPosition=e.startPosition+ne,ie(e.newPosition)}},K=()=>{e.dragging&&(setTimeout(()=>{e.dragging=!1,e.hovering||C(),e.isClick||ie(e.newPosition),d()},0),window.removeEventListener("mousemove",N),window.removeEventListener("touchmove",N),window.removeEventListener("mouseup",K),window.removeEventListener("touchend",K),window.removeEventListener("contextmenu",K))},ie=async Y=>{if(Y===null||Number.isNaN(+Y))return;Y<0?Y=0:Y>100&&(Y=100);const ne=100/((o.value-s.value)/r.value);let Se=Math.round(Y/ne)*ne*(o.value-s.value)*.01+s.value;Se=Number.parseFloat(Se.toFixed(l.value)),Se!==t.modelValue&&n(wt,Se),!e.dragging&&t.modelValue!==e.oldValue&&(e.oldValue=t.modelValue),await je(),e.dragging&&_(),m.value.updatePopper()};return Ce(()=>e.dragging,Y=>{f(Y)}),{disabled:i,button:w,tooltip:m,tooltipVisible:g,showTooltip:a,wrapperStyle:E,formatValue:y,handleMouseEnter:k,handleMouseLeave:A,onButtonDown:$,onKeyDown:W,setPosition:ie}},Ime=(t,e,n,i)=>({stops:T(()=>{if(!t.showStops||t.min>t.max)return[];if(t.step===0)return[];const r=(t.max-t.min)/t.step,a=100*t.step/(t.max-t.min),l=Array.from({length:r-1}).map((c,u)=>(u+1)*a);return t.range?l.filter(c=>c<100*(n.value-t.min)/(t.max-t.min)||c>100*(i.value-t.min)/(t.max-t.min)):l.filter(c=>c>100*(e.firstValue-t.min)/(t.max-t.min))}),getStopStyle:r=>t.vertical?{bottom:`${r}%`}:{left:`${r}%`}}),xme=(t,e,n,i,s,o)=>{const r=c=>{s(wt,c),s(As,c)},a=()=>t.range?![n.value,i.value].every((c,u)=>c===e.oldValue[u]):t.modelValue!==e.oldValue,l=()=>{var c,u;if(t.min>t.max){ki("Slider","min should not be greater than max.");return}const d=t.modelValue;t.range&&Array.isArray(d)?d[1]<t.min?r([t.min,t.min]):d[0]>t.max?r([t.max,t.max]):d[0]<t.min?r([t.min,d[1]]):d[1]>t.max?r([d[0],t.max]):(e.firstValue=d[0],e.secondValue=d[1],a()&&(t.validateEvent&&((c=o==null?void 0:o.validate)==null||c.call(o,"change").catch(h=>void 0)),e.oldValue=d.slice())):!t.range&&typeof d=="number"&&!Number.isNaN(d)&&(d<t.min?r(t.min):d>t.max?r(t.max):(e.firstValue=d,a()&&(t.validateEvent&&((u=o==null?void 0:o.validate)==null||u.call(o,"change").catch(h=>void 0)),e.oldValue=d)))};l(),Ce(()=>e.dragging,c=>{c||l()}),Ce(()=>t.modelValue,(c,u)=>{e.dragging||Array.isArray(c)&&Array.isArray(u)&&c.every((d,h)=>d===u[h])&&e.firstValue===c[0]&&e.secondValue===c[1]||l()},{deep:!0}),Ce(()=>[t.min,t.max],()=>{l()})},Mme=De({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:sd,default:"top"}}),$me={[wt]:t=>st(t)},Ame=["tabindex"],Lme=J({name:"ElSliderButton"}),Ome=J({...Lme,props:Mme,emits:$me,setup(t,{expose:e,emit:n}){const i=t,s=_e("slider"),o=Yt({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:i.modelValue}),{disabled:r,button:a,tooltip:l,showTooltip:c,tooltipVisible:u,wrapperStyle:d,formatValue:h,handleMouseEnter:f,handleMouseLeave:m,onButtonDown:g,onKeyDown:y,setPosition:_}=Tme(i,o,n),{hovering:C,dragging:w}=Ei(o);return e({onButtonDown:g,onKeyDown:y,setPosition:_,hovering:C,dragging:w}),(S,E)=>(I(),H("div",{ref_key:"button",ref:a,class:x([p(s).e("button-wrapper"),{hover:p(C),dragging:p(w)}]),style:Ke(p(d)),tabindex:p(r)?-1:0,onMouseenter:E[0]||(E[0]=(...k)=>p(f)&&p(f)(...k)),onMouseleave:E[1]||(E[1]=(...k)=>p(m)&&p(m)(...k)),onMousedown:E[2]||(E[2]=(...k)=>p(g)&&p(g)(...k)),onTouchstart:E[3]||(E[3]=(...k)=>p(g)&&p(g)(...k)),onFocus:E[4]||(E[4]=(...k)=>p(f)&&p(f)(...k)),onBlur:E[5]||(E[5]=(...k)=>p(m)&&p(m)(...k)),onKeydown:E[6]||(E[6]=(...k)=>p(y)&&p(y)(...k))},[Z(p(Fs),{ref_key:"tooltip",ref:l,visible:p(u),placement:S.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":S.tooltipClass,disabled:!p(c),persistent:""},{content:ee(()=>[G("span",null,Re(p(h)),1)]),default:ee(()=>[G("div",{class:x([p(s).e("button"),{hover:p(C),dragging:p(w)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled"])],46,Ame))}});var x$=Ve(Ome,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue"]]);const Pme=De({mark:{type:ae([String,Object]),default:void 0}});var Rme=J({name:"ElSliderMarker",props:Pme,setup(t){const e=_e("slider"),n=T(()=>at(t.mark)?t.mark:t.mark.label),i=T(()=>at(t.mark)?void 0:t.mark.style);return()=>Ze("div",{class:e.e("marks-text"),style:i.value},n.value)}});const Vme=["id","role","aria-label","aria-labelledby"],Fme={key:1},Dme=J({name:"ElSlider"}),Nme=J({...Dme,props:pme,emits:hme,setup(t,{expose:e,emit:n}){const i=t,s=_e("slider"),{t:o}=Gt(),r=Yt({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:a,slider:l,firstButton:c,secondButton:u,sliderDisabled:d,minValue:h,maxValue:f,runwayStyle:m,barStyle:g,resetSize:y,emitChange:_,onSliderWrapperPrevent:C,onSliderClick:w,onSliderDown:S,setFirstValue:E,setSecondValue:k}=gme(i,r,n),{stops:A,getStopStyle:$}=Ime(i,r,h,f),{inputId:L,isLabeledByFormItem:O}=Oc(i,{formItemContext:a}),B=gi(),V=T(()=>i.inputSize||B.value),P=T(()=>i.label||o("el.slider.defaultLabel",{min:i.min,max:i.max})),z=T(()=>i.range?i.rangeStartLabel||o("el.slider.defaultRangeStartLabel"):P.value),U=T(()=>i.formatValueText?i.formatValueText(Y.value):`${Y.value}`),W=T(()=>i.rangeEndLabel||o("el.slider.defaultRangeEndLabel")),R=T(()=>i.formatValueText?i.formatValueText(ne.value):`${ne.value}`),D=T(()=>[s.b(),s.m(B.value),s.is("vertical",i.vertical),{[s.m("with-input")]:i.showInput}]),N=mme(i);xme(i,r,h,f,n,a);const K=T(()=>{const Te=[i.min,i.max,i.step].map(le=>{const oe=`${le}`.split(".")[1];return oe?oe.length:0});return Math.max.apply(null,Te)}),{sliderWrapper:ie}=fme(i,r,y),{firstValue:Y,secondValue:ne,sliderSize:we}=Ei(r),Se=Te=>{r.dragging=Te};return xt(UR,{...Ei(i),sliderSize:we,disabled:d,precision:K,emitChange:_,resetSize:y,updateDragging:Se}),e({onSliderClick:w}),(Te,le)=>{var oe,de;return I(),H("div",{id:Te.range?p(L):void 0,ref_key:"sliderWrapper",ref:ie,class:x(p(D)),role:Te.range?"group":void 0,"aria-label":Te.range&&!p(O)?p(P):void 0,"aria-labelledby":Te.range&&p(O)?(oe=p(a))==null?void 0:oe.labelId:void 0,onTouchstart:le[2]||(le[2]=(...ve)=>p(C)&&p(C)(...ve)),onTouchmove:le[3]||(le[3]=(...ve)=>p(C)&&p(C)(...ve))},[G("div",{ref_key:"slider",ref:l,class:x([p(s).e("runway"),{"show-input":Te.showInput&&!Te.range},p(s).is("disabled",p(d))]),style:Ke(p(m)),onMousedown:le[0]||(le[0]=(...ve)=>p(S)&&p(S)(...ve)),onTouchstart:le[1]||(le[1]=(...ve)=>p(S)&&p(S)(...ve))},[G("div",{class:x(p(s).e("bar")),style:Ke(p(g))},null,6),Z(x$,{id:Te.range?void 0:p(L),ref_key:"firstButton",ref:c,"model-value":p(Y),vertical:Te.vertical,"tooltip-class":Te.tooltipClass,placement:Te.placement,role:"slider","aria-label":Te.range||!p(O)?p(z):void 0,"aria-labelledby":!Te.range&&p(O)?(de=p(a))==null?void 0:de.labelId:void 0,"aria-valuemin":Te.min,"aria-valuemax":Te.range?p(ne):Te.max,"aria-valuenow":p(Y),"aria-valuetext":p(U),"aria-orientation":Te.vertical?"vertical":"horizontal","aria-disabled":p(d),"onUpdate:modelValue":p(E)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),Te.range?(I(),ce(x$,{key:0,ref_key:"secondButton",ref:u,"model-value":p(ne),vertical:Te.vertical,"tooltip-class":Te.tooltipClass,placement:Te.placement,role:"slider","aria-label":p(W),"aria-valuemin":p(Y),"aria-valuemax":Te.max,"aria-valuenow":p(ne),"aria-valuetext":p(R),"aria-orientation":Te.vertical?"vertical":"horizontal","aria-disabled":p(d),"onUpdate:modelValue":p(k)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):re("v-if",!0),Te.showStops?(I(),H("div",Fme,[(I(!0),H(Ye,null,Ot(p(A),(ve,He)=>(I(),H("div",{key:He,class:x(p(s).e("stop")),style:Ke(p($)(ve))},null,6))),128))])):re("v-if",!0),p(N).length>0?(I(),H(Ye,{key:2},[G("div",null,[(I(!0),H(Ye,null,Ot(p(N),(ve,He)=>(I(),H("div",{key:He,style:Ke(p($)(ve.position)),class:x([p(s).e("stop"),p(s).e("marks-stop")])},null,6))),128))]),G("div",{class:x(p(s).e("marks"))},[(I(!0),H(Ye,null,Ot(p(N),(ve,He)=>(I(),ce(p(Rme),{key:He,mark:ve.mark,style:Ke(p($)(ve.position))},null,8,["mark","style"]))),128))],2)],64)):re("v-if",!0)],38),Te.showInput&&!Te.range?(I(),ce(p(YF),{key:0,ref:"input","model-value":p(Y),class:x(p(s).e("input")),step:Te.step,disabled:p(d),controls:Te.showInputControls,min:Te.min,max:Te.max,debounce:Te.debounce,size:p(V),"onUpdate:modelValue":p(E),onChange:p(_)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):re("v-if",!0)],42,Vme)}}});var Bme=Ve(Nme,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/slider.vue"]]);const zme=yt(Bme),Hme=De({prefixCls:{type:String}}),M$=J({name:"ElSpaceItem",props:Hme,setup(t,{slots:e}){const n=_e("space"),i=T(()=>`${t.prefixCls||n.b()}__item`);return()=>Ze("div",{class:i.value},me(e,"default"))}}),$$={small:8,default:12,large:16};function Ume(t){const e=_e("space"),n=T(()=>[e.b(),e.m(t.direction),t.class]),i=F(0),s=F(0),o=T(()=>{const a=t.wrap||t.fill?{flexWrap:"wrap",marginBottom:`-${s.value}px`}:{},l={alignItems:t.alignment};return[a,l,t.style]}),r=T(()=>{const a={paddingBottom:`${s.value}px`,marginRight:`${i.value}px`},l=t.fill?{flexGrow:1,minWidth:`${t.fillRatio}%`}:{};return[a,l]});return Co(()=>{const{size:a="small",wrap:l,direction:c,fill:u}=t;if(ze(a)){const[d=0,h=0]=a;i.value=d,s.value=h}else{let d;st(a)?d=a:d=$$[a||"small"]||$$.small,(l||u)&&c==="horizontal"?i.value=s.value=d:c==="horizontal"?(i.value=d,s.value=0):(s.value=d,i.value=0)}}),{classes:n,containerStyle:o,itemStyle:r}}const Wme=De({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:ae([String,Object,Array]),default:""},style:{type:ae([String,Array,Object]),default:""},alignment:{type:ae(String),default:"center"},prefixCls:{type:String},spacer:{type:ae([Object,String,Number,Array]),default:null,validator:t=>$n(t)||st(t)||at(t)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:dl,validator:t=>st(t)||ze(t)&&t.length===2&&t.every(st)}}),Gme=J({name:"ElSpace",props:Wme,setup(t,{slots:e}){const{classes:n,containerStyle:i,itemStyle:s}=Ume(t);function o(r,a="",l=[]){const{prefixCls:c}=t;return r.forEach((u,d)=>{v1(u)?ze(u.children)&&u.children.forEach((h,f)=>{v1(h)&&ze(h.children)?o(h.children,`${a+f}-`,l):l.push(Z(M$,{style:s.value,prefixCls:c,key:`nested-${a+f}`},{default:()=>[h]},Fo.PROPS|Fo.STYLE,["style","prefixCls"]))}):pQ(u)&&l.push(Z(M$,{style:s.value,prefixCls:c,key:`LoopKey${a+d}`},{default:()=>[u]},Fo.PROPS|Fo.STYLE,["style","prefixCls"]))}),l}return()=>{var r;const{spacer:a,direction:l}=t,c=me(e,"default",{key:0},()=>[]);if(((r=c.children)!=null?r:[]).length===0)return null;if(ze(c.children)){let u=o(c.children);if(a){const d=u.length-1;u=u.reduce((h,f,m)=>{const g=[...h,f];return m!==d&&g.push(Z("span",{style:[s.value,l==="vertical"?"width: 100%":null],key:m},[$n(a)?a:Ut(a,Fo.TEXT)],Fo.STYLE)),g},[])}return Z("div",{class:n.value,style:i.value},u,Fo.STYLE|Fo.CLASS)}return c.children}}}),jme=yt(Gme),qme=De({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:ae([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:ae([String,Object,Array])}}),Kme=J({name:"ElStatistic"}),Yme=J({...Kme,props:qme,setup(t,{expose:e}){const n=t,i=_e("statistic"),s=T(()=>{const{value:o,formatter:r,precision:a,decimalSeparator:l,groupSeparator:c}=n;if(ot(r))return r(o);if(!st(o))return o;let[u,d=""]=String(o).split(".");return d=d.padEnd(a,"0").slice(0,a>0?a:0),u=u.replace(/\B(?=(\d{3})+(?!\d))/g,c),[u,d].join(d?l:"")});return e({displayValue:s}),(o,r)=>(I(),H("div",{class:x(p(i).b())},[o.$slots.title||o.title?(I(),H("div",{key:0,class:x(p(i).e("head"))},[me(o.$slots,"title",{},()=>[Ut(Re(o.title),1)])],2)):re("v-if",!0),G("div",{class:x(p(i).e("content"))},[o.$slots.prefix||o.prefix?(I(),H("div",{key:0,class:x(p(i).e("prefix"))},[me(o.$slots,"prefix",{},()=>[G("span",null,Re(o.prefix),1)])],2)):re("v-if",!0),G("span",{class:x(p(i).e("number")),style:Ke(o.valueStyle)},Re(p(s)),7),o.$slots.suffix||o.suffix?(I(),H("div",{key:1,class:x(p(i).e("suffix"))},[me(o.$slots,"suffix",{},()=>[G("span",null,Re(o.suffix),1)])],2)):re("v-if",!0)],2)],2))}});var Zme=Ve(Yme,[["__file","/home/runner/work/element-plus/element-plus/packages/components/statistic/src/statistic.vue"]]);const wD=yt(Zme),Xme=De({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:ae([Number,Object]),default:0},valueStyle:{type:ae([String,Object,Array])}}),Qme={finish:()=>!0,[bn]:t=>st(t)},Jme=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],A$=t=>st(t)?new Date(t).getTime():t.valueOf(),L$=(t,e)=>{let n=t;const i=/\[([^\]]*)]/g;return Jme.reduce((o,[r,a])=>{const l=new RegExp(`${r}+(?![^\\[\\]]*\\])`,"g");if(l.test(o)){const c=Math.floor(n/a);return n-=c*a,o.replace(l,u=>String(c).padStart(u.length,"0"))}return o},e).replace(i,"$1")},ege=J({name:"ElCountdown"}),tge=J({...ege,props:Xme,emits:Qme,setup(t,{expose:e,emit:n}){const i=t;let s;const o=F(A$(i.value)-Date.now()),r=T(()=>L$(o.value,i.format)),a=u=>L$(u,i.format),l=()=>{s&&(u_(s),s=void 0)},c=()=>{const u=A$(i.value),d=()=>{let h=u-Date.now();n("change",h),h<=0?(h=0,l(),n("finish")):s=Tm(d),o.value=h};s=Tm(d)};return Ce(()=>[i.value,i.format],()=>{l(),c()},{immediate:!0}),Pn(()=>{l()}),e({displayValue:r}),(u,d)=>(I(),ce(p(wD),{value:o.value,title:u.title,prefix:u.prefix,suffix:u.suffix,"value-style":u.valueStyle,formatter:a},Ya({_:2},[Ot(u.$slots,(h,f)=>({name:f,fn:ee(()=>[me(u.$slots,f)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var nge=Ve(tge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/countdown/src/countdown.vue"]]);const ige=yt(nge),sge=De({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),oge={[bn]:(t,e)=>[t,e].every(st)},rge=J({name:"ElSteps"}),age=J({...rge,props:sge,emits:oge,setup(t,{emit:e}){const n=t,i=_e("steps"),s=F([]);return Ce(s,()=>{s.value.forEach((o,r)=>{o.setIndex(r)})}),xt("ElSteps",{props:n,steps:s}),Ce(()=>n.active,(o,r)=>{e(bn,o,r)}),(o,r)=>(I(),H("div",{class:x([p(i).b(),p(i).m(o.simple?"simple":o.direction)])},[me(o.$slots,"default")],2))}});var lge=Ve(age,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/steps.vue"]]);const cge=De({title:{type:String,default:""},icon:{type:gn},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),uge=J({name:"ElStep"}),dge=J({...uge,props:cge,setup(t){const e=t,n=_e("step"),i=F(-1),s=F({}),o=F(""),r=qe("ElSteps"),a=vt();ft(()=>{Ce([()=>r.props.active,()=>r.props.processStatus,()=>r.props.finishStatus],([E])=>{w(E)},{immediate:!0})}),Pn(()=>{r.steps.value=r.steps.value.filter(E=>E.uid!==(a==null?void 0:a.uid))});const l=T(()=>e.status||o.value),c=T(()=>{const E=r.steps.value[i.value-1];return E?E.currentStatus:"wait"}),u=T(()=>r.props.alignCenter),d=T(()=>r.props.direction==="vertical"),h=T(()=>r.props.simple),f=T(()=>r.steps.value.length),m=T(()=>{var E;return((E=r.steps.value[f.value-1])==null?void 0:E.uid)===(a==null?void 0:a.uid)}),g=T(()=>h.value?"":r.props.space),y=T(()=>{const E={flexBasis:typeof g.value=="number"?`${g.value}px`:g.value?g.value:`${100/(f.value-(u.value?0:1))}%`};return d.value||m.value&&(E.maxWidth=`${100/f.value}%`),E}),_=E=>{i.value=E},C=E=>{let k=100;const A={};A.transitionDelay=`${150*i.value}ms`,E===r.props.processStatus?k=0:E==="wait"&&(k=0,A.transitionDelay=`${-150*i.value}ms`),A.borderWidth=k&&!h.value?"1px":0,A[r.props.direction==="vertical"?"height":"width"]=`${k}%`,s.value=A},w=E=>{E>i.value?o.value=r.props.finishStatus:E===i.value&&c.value!=="error"?o.value=r.props.processStatus:o.value="wait";const k=r.steps.value[i.value-1];k&&k.calcProgress(o.value)},S=Yt({uid:T(()=>a==null?void 0:a.uid),currentStatus:l,setIndex:_,calcProgress:C});return r.steps.value=[...r.steps.value,S],(E,k)=>(I(),H("div",{style:Ke(p(y)),class:x([p(n).b(),p(n).is(p(h)?"simple":p(r).props.direction),p(n).is("flex",p(m)&&!p(g)&&!p(u)),p(n).is("center",p(u)&&!p(d)&&!p(h))])},[re(" icon & line "),G("div",{class:x([p(n).e("head"),p(n).is(p(l))])},[p(h)?re("v-if",!0):(I(),H("div",{key:0,class:x(p(n).e("line"))},[G("i",{class:x(p(n).e("line-inner")),style:Ke(s.value)},null,6)],2)),G("div",{class:x([p(n).e("icon"),p(n).is(E.icon||E.$slots.icon?"icon":"text")])},[me(E.$slots,"icon",{},()=>[E.icon?(I(),ce(p(Ge),{key:0,class:x(p(n).e("icon-inner"))},{default:ee(()=>[(I(),ce(It(E.icon)))]),_:1},8,["class"])):p(l)==="success"?(I(),ce(p(Ge),{key:1,class:x([p(n).e("icon-inner"),p(n).is("status")])},{default:ee(()=>[Z(p(lg))]),_:1},8,["class"])):p(l)==="error"?(I(),ce(p(Ge),{key:2,class:x([p(n).e("icon-inner"),p(n).is("status")])},{default:ee(()=>[Z(p(vr))]),_:1},8,["class"])):p(h)?re("v-if",!0):(I(),H("div",{key:3,class:x(p(n).e("icon-inner"))},Re(i.value+1),3))])],2)],2),re(" title & description "),G("div",{class:x(p(n).e("main"))},[G("div",{class:x([p(n).e("title"),p(n).is(p(l))])},[me(E.$slots,"title",{},()=>[Ut(Re(E.title),1)])],2),p(h)?(I(),H("div",{key:0,class:x(p(n).e("arrow"))},null,2)):(I(),H("div",{key:1,class:x([p(n).e("description"),p(n).is(p(l))])},[me(E.$slots,"description",{},()=>[Ut(Re(E.description),1)])],2))],2)],6))}});var CD=Ve(dge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/item.vue"]]);const pge=yt(lge,{Step:CD}),hge=Nn(CD),fge=De({modelValue:{type:[Boolean,String,Number],default:!1},value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},activeIcon:{type:gn},inactiveIcon:{type:gn},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String,loading:{type:Boolean,default:!1},beforeChange:{type:ae(Function)},size:{type:String,validator:cg},tabindex:{type:[String,Number]}}),mge={[wt]:t=>fi(t)||at(t)||st(t),[bn]:t=>fi(t)||at(t)||st(t),[As]:t=>fi(t)||at(t)||st(t)},gge=["onClick"],vge=["id","aria-checked","aria-disabled","name","true-value","false-value","disabled","tabindex","onKeydown"],yge=["aria-hidden"],bge=["aria-hidden"],_ge=["aria-hidden"],rC="ElSwitch",wge=J({name:rC}),Cge=J({...wge,props:fge,emits:mge,setup(t,{expose:e,emit:n}){const i=t,s=vt(),{formItem:o}=Ns(),r=gi(),a=_e("switch");Xa({from:'"value"',replacement:'"model-value" or "v-model"',scope:rC,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},T(()=>{var E;return!!((E=s.vnode.props)!=null&&E.value)}));const{inputId:l}=Oc(i,{formItemContext:o}),c=eo(T(()=>i.loading)),u=F(i.modelValue!==!1),d=F(),h=F(),f=T(()=>[a.b(),a.m(r.value),a.is("disabled",c.value),a.is("checked",y.value)]),m=T(()=>({width:mi(i.width)}));Ce(()=>i.modelValue,()=>{u.value=!0}),Ce(()=>i.value,()=>{u.value=!1});const g=T(()=>u.value?i.modelValue:i.value),y=T(()=>g.value===i.activeValue);[i.activeValue,i.inactiveValue].includes(g.value)||(n(wt,i.inactiveValue),n(bn,i.inactiveValue),n(As,i.inactiveValue)),Ce(y,E=>{var k;d.value.checked=E,i.validateEvent&&((k=o==null?void 0:o.validate)==null||k.call(o,"change").catch(A=>void 0))});const _=()=>{const E=y.value?i.inactiveValue:i.activeValue;n(wt,E),n(bn,E),n(As,E),je(()=>{d.value.checked=y.value})},C=()=>{if(c.value)return;const{beforeChange:E}=i;if(!E){_();return}const k=E();[am(k),fi(k)].includes(!0)||ki(rC,"beforeChange must return type `Promise<boolean>` or `boolean`"),am(k)?k.then($=>{$&&_()}).catch($=>{}):k&&_()},w=T(()=>a.cssVarBlock({...i.activeColor?{"on-color":i.activeColor}:null,...i.inactiveColor?{"off-color":i.inactiveColor}:null,...i.borderColor?{"border-color":i.borderColor}:null})),S=()=>{var E,k;(k=(E=d.value)==null?void 0:E.focus)==null||k.call(E)};return ft(()=>{d.value.checked=y.value}),e({focus:S,checked:y}),(E,k)=>(I(),H("div",{class:x(p(f)),style:Ke(p(w)),onClick:rt(C,["prevent"])},[G("input",{id:p(l),ref_key:"input",ref:d,class:x(p(a).e("input")),type:"checkbox",role:"switch","aria-checked":p(y),"aria-disabled":p(c),name:E.name,"true-value":E.activeValue,"false-value":E.inactiveValue,disabled:p(c),tabindex:E.tabindex,onChange:_,onKeydown:Bt(C,["enter"])},null,42,vge),!E.inlinePrompt&&(E.inactiveIcon||E.inactiveText)?(I(),H("span",{key:0,class:x([p(a).e("label"),p(a).em("label","left"),p(a).is("active",!p(y))])},[E.inactiveIcon?(I(),ce(p(Ge),{key:0},{default:ee(()=>[(I(),ce(It(E.inactiveIcon)))]),_:1})):re("v-if",!0),!E.inactiveIcon&&E.inactiveText?(I(),H("span",{key:1,"aria-hidden":p(y)},Re(E.inactiveText),9,yge)):re("v-if",!0)],2)):re("v-if",!0),G("span",{ref_key:"core",ref:h,class:x(p(a).e("core")),style:Ke(p(m))},[E.inlinePrompt?(I(),H("div",{key:0,class:x(p(a).e("inner"))},[E.activeIcon||E.inactiveIcon?(I(),ce(p(Ge),{key:0,class:x(p(a).is("icon"))},{default:ee(()=>[(I(),ce(It(p(y)?E.activeIcon:E.inactiveIcon)))]),_:1},8,["class"])):E.activeText||E.inactiveText?(I(),H("span",{key:1,class:x(p(a).is("text")),"aria-hidden":!p(y)},Re(p(y)?E.activeText:E.inactiveText),11,bge)):re("v-if",!0)],2)):re("v-if",!0),G("div",{class:x(p(a).e("action"))},[E.loading?(I(),ce(p(Ge),{key:0,class:x(p(a).is("loading"))},{default:ee(()=>[Z(p(Lc))]),_:1},8,["class"])):re("v-if",!0)],2)],6),!E.inlinePrompt&&(E.activeIcon||E.activeText)?(I(),H("span",{key:1,class:x([p(a).e("label"),p(a).em("label","right"),p(a).is("active",p(y))])},[E.activeIcon?(I(),ce(p(Ge),{key:0},{default:ee(()=>[(I(),ce(It(E.activeIcon)))]),_:1})):re("v-if",!0),!E.activeIcon&&E.activeText?(I(),H("span",{key:1,"aria-hidden":!p(y)},Re(E.activeText),9,_ge)):re("v-if",!0)],2)):re("v-if",!0)],14,gge))}});var Sge=Ve(Cge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const Ege=yt(Sge);/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var kge=/["'&<>]/,Tge=Ige;function Ige(t){var e=""+t,n=kge.exec(e);if(!n)return e;var i,s="",o=0,r=0;for(o=n.index;o<e.length;o++){switch(e.charCodeAt(o)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 39:i="&#39;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}r!==o&&(s+=e.substring(r,o)),r=o+1,s+=i}return r!==o?s+e.substring(r,o):s}const Mw=function(t){var e;return(e=t.target)==null?void 0:e.closest("td")},xge=function(t,e,n,i,s){if(!e&&!i&&(!s||Array.isArray(s)&&!s.length))return t;typeof n=="string"?n=n==="descending"?-1:1:n=n&&n<0?-1:1;const o=i?null:function(a,l){return s?(Array.isArray(s)||(s=[s]),s.map(c=>typeof c=="string"?xn(a,c):c(a,l,t))):(e!=="$key"&&Et(a)&&"$value"in a&&(a=a.$value),[Et(a)?xn(a,e):a])},r=function(a,l){if(i)return i(a.value,l.value);for(let c=0,u=a.key.length;c<u;c++){if(a.key[c]<l.key[c])return-1;if(a.key[c]>l.key[c])return 1}return 0};return t.map((a,l)=>({value:a,index:l,key:o?o(a,l):null})).sort((a,l)=>{let c=r(a,l);return c||(c=a.index-l.index),c*+n}).map(a=>a.value)},SD=function(t,e){let n=null;return t.columns.forEach(i=>{i.id===e&&(n=i)}),n},Mge=function(t,e){let n=null;for(let i=0;i<t.columns.length;i++){const s=t.columns[i];if(s.columnKey===e){n=s;break}}return n||ki("ElTable",`No column matching with column-key: ${e}`),n},O$=function(t,e,n){const i=(e.className||"").match(new RegExp(`${n}-table_[^\\s]+`,"gm"));return i?SD(t,i[0]):null},es=(t,e)=>{if(!t)throw new Error("Row is required when get row identity");if(typeof e=="string"){if(!e.includes("."))return`${t[e]}`;const n=e.split(".");let i=t;for(const s of n)i=i[s];return`${i}`}else if(typeof e=="function")return e.call(null,t)},$u=function(t,e){const n={};return(t||[]).forEach((i,s)=>{n[es(i,e)]={row:i,index:s}}),n};function $ge(t,e){const n={};let i;for(i in t)n[i]=t[i];for(i in e)if(Pt(e,i)){const s=e[i];typeof s<"u"&&(n[i]=s)}return n}function Ak(t){return t===""||t!==void 0&&(t=Number.parseInt(t,10),Number.isNaN(t)&&(t="")),t}function ED(t){return t===""||t!==void 0&&(t=Ak(t),Number.isNaN(t)&&(t=80)),t}function Age(t){return typeof t=="number"?t:typeof t=="string"?/^\d+(?:px)?$/.test(t)?Number.parseInt(t,10):t:null}function Lge(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...i)=>e(n(...i)))}function Rf(t,e,n){let i=!1;const s=t.indexOf(e),o=s!==-1,r=a=>{a==="add"?t.push(e):t.splice(s,1),i=!0,ze(e.children)&&e.children.forEach(l=>{Rf(t,l,n??!o)})};return fi(n)?n&&!o?r("add"):!n&&o&&r("remove"):r(o?"remove":"add"),i}function Oge(t,e,n="children",i="hasChildren"){const s=r=>!(Array.isArray(r)&&r.length);function o(r,a,l){e(r,a,l),a.forEach(c=>{if(c[i]){e(c,null,l+1);return}const u=c[n];s(u)||o(c,u,l+1)})}t.forEach(r=>{if(r[i]){e(r,null,0);return}const a=r[n];s(a)||o(r,a,0)})}let Sa;function Pge(t,e,n,i){i=fR({enterable:!0,showArrow:!0},i);const{nextZIndex:s}=hl(),o=t==null?void 0:t.dataset.prefix,r=t==null?void 0:t.querySelector(`.${o}-scrollbar__wrap`);function a(){const y=i.effect==="light",_=document.createElement("div");return _.className=[`${o}-popper`,y?"is-light":"is-dark",i.popperClass||""].join(" "),n=Tge(n),_.innerHTML=n,_.style.zIndex=String(s()),t==null||t.appendChild(_),_}function l(){const y=document.createElement("div");return y.className=`${o}-popper__arrow`,y}function c(){u&&u.update()}Sa==null||Sa(),Sa=()=>{try{u&&u.destroy(),f&&(t==null||t.removeChild(f)),e.removeEventListener("mouseenter",d),e.removeEventListener("mouseleave",h),r==null||r.removeEventListener("scroll",Sa),Sa=void 0}catch{}};let u=null,d=c,h=Sa;i.enterable&&({onOpen:d,onClose:h}=dV({showAfter:i.showAfter,hideAfter:i.hideAfter,open:c,close:Sa}));const f=a();f.onmouseenter=d,f.onmouseleave=h;const m=[];if(i.offset&&m.push({name:"offset",options:{offset:[0,i.offset]}}),i.showArrow){const y=f.appendChild(l());m.push({name:"arrow",options:{element:y,padding:10}})}const g=i.popperOptions||{};return u=cV(e,f,{placement:i.placement||"top",strategy:"fixed",...g,modifiers:g.modifiers?m.concat(g.modifiers):m}),e.addEventListener("mouseenter",d),e.addEventListener("mouseleave",h),r==null||r.addEventListener("scroll",Sa),u}function kD(t){return t.children?Fj(t.children,kD):[t]}function P$(t,e){return t+e.colSpan}const TD=(t,e,n,i)=>{let s=0,o=t;const r=n.states.columns.value;if(i){const l=kD(i[t]);s=r.slice(0,r.indexOf(l[0])).reduce(P$,0),o=s+l.reduce(P$,0)-1}else s=t;let a;switch(e){case"left":o<n.states.fixedLeafColumnsLength.value&&(a="left");break;case"right":s>=r.length-n.states.rightFixedLeafColumnsLength.value&&(a="right");break;default:o<n.states.fixedLeafColumnsLength.value?a="left":s>=r.length-n.states.rightFixedLeafColumnsLength.value&&(a="right")}return a?{direction:a,start:s,after:o}:{}},Lk=(t,e,n,i,s,o=0)=>{const r=[],{direction:a,start:l,after:c}=TD(e,n,i,s);if(a){const u=a==="left";r.push(`${t}-fixed-column--${a}`),u&&c+o===i.states.fixedLeafColumnsLength.value-1?r.push("is-last-column"):!u&&l-o===i.states.columns.value.length-i.states.rightFixedLeafColumnsLength.value&&r.push("is-first-column")}return r};function R$(t,e){return t+(e.realWidth===null||Number.isNaN(e.realWidth)?Number(e.width):e.realWidth)}const Ok=(t,e,n,i)=>{const{direction:s,start:o=0,after:r=0}=TD(t,e,n,i);if(!s)return;const a={},l=s==="left",c=n.states.columns.value;return l?a.left=c.slice(0,o).reduce(R$,0):a.right=c.slice(r+1).reverse().reduce(R$,0),a},th=(t,e)=>{t&&(Number.isNaN(t[e])||(t[e]=`${t[e]}px`))};function Rge(t){const e=vt(),n=F(!1),i=F([]);return{updateExpandRows:()=>{const l=t.data.value||[],c=t.rowKey.value;if(n.value)i.value=l.slice();else if(c){const u=$u(i.value,c);i.value=l.reduce((d,h)=>{const f=es(h,c);return u[f]&&d.push(h),d},[])}else i.value=[]},toggleRowExpansion:(l,c)=>{Rf(i.value,l,c)&&e.emit("expand-change",l,i.value.slice())},setExpandRowKeys:l=>{e.store.assertRowKey();const c=t.data.value||[],u=t.rowKey.value,d=$u(c,u);i.value=l.reduce((h,f)=>{const m=d[f];return m&&h.push(m.row),h},[])},isRowExpanded:l=>{const c=t.rowKey.value;return c?!!$u(i.value,c)[es(l,c)]:i.value.includes(l)},states:{expandRows:i,defaultExpandAll:n}}}function Vge(t){const e=vt(),n=F(null),i=F(null),s=c=>{e.store.assertRowKey(),n.value=c,r(c)},o=()=>{n.value=null},r=c=>{const{data:u,rowKey:d}=t;let h=null;d.value&&(h=(p(u)||[]).find(f=>es(f,d.value)===c)),i.value=h,e.emit("current-change",i.value,null)};return{setCurrentRowKey:s,restoreCurrentRowKey:o,setCurrentRowByKey:r,updateCurrentRow:c=>{const u=i.value;if(c&&c!==u){i.value=c,e.emit("current-change",i.value,u);return}!c&&u&&(i.value=null,e.emit("current-change",null,u))},updateCurrentRowData:()=>{const c=t.rowKey.value,u=t.data.value||[],d=i.value;if(!u.includes(d)&&d){if(c){const h=es(d,c);r(h)}else i.value=null;i.value===null&&e.emit("current-change",null,d)}else n.value&&(r(n.value),o())},states:{_currentRowKey:n,currentRow:i}}}function Fge(t){const e=F([]),n=F({}),i=F(16),s=F(!1),o=F({}),r=F("hasChildren"),a=F("children"),l=vt(),c=T(()=>{if(!t.rowKey.value)return{};const _=t.data.value||[];return d(_)}),u=T(()=>{const _=t.rowKey.value,C=Object.keys(o.value),w={};return C.length&&C.forEach(S=>{if(o.value[S].length){const E={children:[]};o.value[S].forEach(k=>{const A=es(k,_);E.children.push(A),k[r.value]&&!w[A]&&(w[A]={children:[]})}),w[S]=E}}),w}),d=_=>{const C=t.rowKey.value,w={};return Oge(_,(S,E,k)=>{const A=es(S,C);Array.isArray(E)?w[A]={children:E.map($=>es($,C)),level:k}:s.value&&(w[A]={children:[],lazy:!0,level:k})},a.value,r.value),w},h=(_=!1,C=(w=>(w=l.store)==null?void 0:w.states.defaultExpandAll.value)())=>{var w;const S=c.value,E=u.value,k=Object.keys(S),A={};if(k.length){const $=p(n),L=[],O=(V,P)=>{if(_)return e.value?C||e.value.includes(P):!!(C||V!=null&&V.expanded);{const z=C||e.value&&e.value.includes(P);return!!(V!=null&&V.expanded||z)}};k.forEach(V=>{const P=$[V],z={...S[V]};if(z.expanded=O(P,V),z.lazy){const{loaded:U=!1,loading:W=!1}=P||{};z.loaded=!!U,z.loading=!!W,L.push(V)}A[V]=z});const B=Object.keys(E);s.value&&B.length&&L.length&&B.forEach(V=>{const P=$[V],z=E[V].children;if(L.includes(V)){if(A[V].children.length!==0)throw new Error("[ElTable]children must be an empty array.");A[V].children=z}else{const{loaded:U=!1,loading:W=!1}=P||{};A[V]={lazy:!0,loaded:!!U,loading:!!W,expanded:O(P,V),children:z,level:""}}})}n.value=A,(w=l.store)==null||w.updateTableScrollY()};Ce(()=>e.value,()=>{h(!0)}),Ce(()=>c.value,()=>{h()}),Ce(()=>u.value,()=>{h()});const f=_=>{e.value=_,h()},m=(_,C)=>{l.store.assertRowKey();const w=t.rowKey.value,S=es(_,w),E=S&&n.value[S];if(S&&E&&"expanded"in E){const k=E.expanded;C=typeof C>"u"?!E.expanded:C,n.value[S].expanded=C,k!==C&&l.emit("expand-change",_,C),l.store.updateTableScrollY()}},g=_=>{l.store.assertRowKey();const C=t.rowKey.value,w=es(_,C),S=n.value[w];s.value&&S&&"loaded"in S&&!S.loaded?y(_,w,S):m(_,void 0)},y=(_,C,w)=>{const{load:S}=l.props;S&&!n.value[C].loaded&&(n.value[C].loading=!0,S(_,w,E=>{if(!Array.isArray(E))throw new TypeError("[ElTable] data must be an array");n.value[C].loading=!1,n.value[C].loaded=!0,n.value[C].expanded=!0,E.length&&(o.value[C]=E),l.emit("expand-change",_,!0)}))};return{loadData:y,loadOrToggle:g,toggleTreeExpansion:m,updateTreeExpandKeys:f,updateTreeData:h,normalize:d,states:{expandRowKeys:e,treeData:n,indent:i,lazy:s,lazyTreeNodeMap:o,lazyColumnIdentifier:r,childrenColumnName:a}}}const Dge=(t,e)=>{const n=e.sortingColumn;return!n||typeof n.sortable=="string"?t:xge(t,e.sortProp,e.sortOrder,n.sortMethod,n.sortBy)},Kv=t=>{const e=[];return t.forEach(n=>{n.children?e.push.apply(e,Kv(n.children)):e.push(n)}),e};function Nge(){var t;const e=vt(),{size:n}=Ei((t=e.proxy)==null?void 0:t.$props),i=F(null),s=F([]),o=F([]),r=F(!1),a=F([]),l=F([]),c=F([]),u=F([]),d=F([]),h=F([]),f=F([]),m=F([]),g=F(0),y=F(0),_=F(0),C=F(!1),w=F([]),S=F(!1),E=F(!1),k=F(null),A=F({}),$=F(null),L=F(null),O=F(null),B=F(null),V=F(null);Ce(s,()=>e.state&&W(!1),{deep:!0});const P=()=>{if(!i.value)throw new Error("[ElTable] prop row-key is required")},z=X=>{var ue;(ue=X.children)==null||ue.forEach($e=>{$e.fixed=X.fixed,z($e)})},U=()=>{a.value.forEach(te=>{z(te)}),u.value=a.value.filter(te=>te.fixed===!0||te.fixed==="left"),d.value=a.value.filter(te=>te.fixed==="right"),u.value.length>0&&a.value[0]&&a.value[0].type==="selection"&&!a.value[0].fixed&&(a.value[0].fixed=!0,u.value.unshift(a.value[0]));const X=a.value.filter(te=>!te.fixed);l.value=[].concat(u.value).concat(X).concat(d.value);const ue=Kv(X),$e=Kv(u.value),j=Kv(d.value);g.value=ue.length,y.value=$e.length,_.value=j.length,c.value=[].concat($e).concat(ue).concat(j),r.value=u.value.length>0||d.value.length>0},W=(X,ue=!1)=>{X&&U(),ue?e.state.doLayout():e.state.debouncedUpdateLayout()},R=X=>w.value.includes(X),D=()=>{C.value=!1,w.value.length&&(w.value=[],e.emit("selection-change",[]))},N=()=>{let X;if(i.value){X=[];const ue=$u(w.value,i.value),$e=$u(s.value,i.value);for(const j in ue)Pt(ue,j)&&!$e[j]&&X.push(ue[j].row)}else X=w.value.filter(ue=>!s.value.includes(ue));if(X.length){const ue=w.value.filter($e=>!X.includes($e));w.value=ue,e.emit("selection-change",ue.slice())}},K=()=>(w.value||[]).slice(),ie=(X,ue=void 0,$e=!0)=>{if(Rf(w.value,X,ue)){const te=(w.value||[]).slice();$e&&e.emit("select",te,X),e.emit("selection-change",te)}},Y=()=>{var X,ue;const $e=E.value?!C.value:!(C.value||w.value.length);C.value=$e;let j=!1,te=0;const ye=(ue=(X=e==null?void 0:e.store)==null?void 0:X.states)==null?void 0:ue.rowKey.value;s.value.forEach((Ie,Ct)=>{const an=Ct+te;k.value?k.value.call(null,Ie,an)&&Rf(w.value,Ie,$e)&&(j=!0):Rf(w.value,Ie,$e)&&(j=!0),te+=Se(es(Ie,ye))}),j&&e.emit("selection-change",w.value?w.value.slice():[]),e.emit("select-all",w.value)},ne=()=>{const X=$u(w.value,i.value);s.value.forEach(ue=>{const $e=es(ue,i.value),j=X[$e];j&&(w.value[j.index]=ue)})},we=()=>{var X,ue,$e;if(((X=s.value)==null?void 0:X.length)===0){C.value=!1;return}let j;i.value&&(j=$u(w.value,i.value));const te=function(an){return j?!!j[es(an,i.value)]:w.value.includes(an)};let ye=!0,Ie=0,Ct=0;for(let an=0,pi=(s.value||[]).length;an<pi;an++){const Pi=($e=(ue=e==null?void 0:e.store)==null?void 0:ue.states)==null?void 0:$e.rowKey.value,un=an+Ct,jt=s.value[an],xe=k.value&&k.value.call(null,jt,un);if(te(jt))Ie++;else if(!k.value||xe){ye=!1;break}Ct+=Se(es(jt,Pi))}Ie===0&&(ye=!1),C.value=ye},Se=X=>{var ue;if(!e||!e.store)return 0;const{treeData:$e}=e.store.states;let j=0;const te=(ue=$e.value[X])==null?void 0:ue.children;return te&&(j+=te.length,te.forEach(ye=>{j+=Se(ye)})),j},Te=(X,ue)=>{Array.isArray(X)||(X=[X]);const $e={};return X.forEach(j=>{A.value[j.id]=ue,$e[j.columnKey||j.id]=ue}),$e},le=(X,ue,$e)=>{L.value&&L.value!==X&&(L.value.order=null),L.value=X,O.value=ue,B.value=$e},oe=()=>{let X=p(o);Object.keys(A.value).forEach(ue=>{const $e=A.value[ue];if(!$e||$e.length===0)return;const j=SD({columns:c.value},ue);j&&j.filterMethod&&(X=X.filter(te=>$e.some(ye=>j.filterMethod.call(null,ye,te,j))))}),$.value=X},de=()=>{s.value=Dge($.value,{sortingColumn:L.value,sortProp:O.value,sortOrder:B.value})},ve=(X=void 0)=>{X&&X.filter||oe(),de()},He=X=>{const{tableHeaderRef:ue}=e.refs;if(!ue)return;const $e=Object.assign({},ue.filterPanels),j=Object.keys($e);if(j.length)if(typeof X=="string"&&(X=[X]),Array.isArray(X)){const te=X.map(ye=>Mge({columns:c.value},ye));j.forEach(ye=>{const Ie=te.find(Ct=>Ct.id===ye);Ie&&(Ie.filteredValue=[])}),e.store.commit("filterChange",{column:te,values:[],silent:!0,multi:!0})}else j.forEach(te=>{const ye=c.value.find(Ie=>Ie.id===te);ye&&(ye.filteredValue=[])}),A.value={},e.store.commit("filterChange",{column:{},values:[],silent:!0})},Q=()=>{L.value&&(le(null,null,null),e.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:se,toggleRowExpansion:fe,updateExpandRows:Me,states:Oe,isRowExpanded:pe}=Rge({data:s,rowKey:i}),{updateTreeExpandKeys:Le,toggleTreeExpansion:be,updateTreeData:Pe,loadOrToggle:Ee,states:he}=Fge({data:s,rowKey:i}),{updateCurrentRowData:Ne,updateCurrentRow:Be,setCurrentRowKey:Qe,states:ut}=Vge({data:s,rowKey:i});return{assertRowKey:P,updateColumns:U,scheduleLayout:W,isSelected:R,clearSelection:D,cleanSelection:N,getSelectionRows:K,toggleRowSelection:ie,_toggleAllSelection:Y,toggleAllSelection:null,updateSelectionByRowKey:ne,updateAllSelected:we,updateFilters:Te,updateCurrentRow:Be,updateSort:le,execFilter:oe,execSort:de,execQuery:ve,clearFilter:He,clearSort:Q,toggleRowExpansion:fe,setExpandRowKeysAdapter:X=>{se(X),Le(X)},setCurrentRowKey:Qe,toggleRowExpansionAdapter:(X,ue)=>{c.value.some(({type:j})=>j==="expand")?fe(X,ue):be(X,ue)},isRowExpanded:pe,updateExpandRows:Me,updateCurrentRowData:Ne,loadOrToggle:Ee,updateTreeData:Pe,states:{tableSize:n,rowKey:i,data:s,_data:o,isComplex:r,_columns:a,originColumns:l,columns:c,fixedColumns:u,rightFixedColumns:d,leafColumns:h,fixedLeafColumns:f,rightFixedLeafColumns:m,leafColumnsLength:g,fixedLeafColumnsLength:y,rightFixedLeafColumnsLength:_,isAllSelected:C,selection:w,reserveSelection:S,selectOnIndeterminate:E,selectable:k,filters:A,filteredData:$,sortingColumn:L,sortProp:O,sortOrder:B,hoverRow:V,...Oe,...he,...ut}}}function aC(t,e){return t.map(n=>{var i;return n.id===e.id?e:((i=n.children)!=null&&i.length&&(n.children=aC(n.children,e)),n)})}function ID(t){t.forEach(e=>{var n,i;e.no=(n=e.getColumnIndex)==null?void 0:n.call(e),(i=e.children)!=null&&i.length&&ID(e.children)}),t.sort((e,n)=>e.no-n.no)}function Bge(){const t=vt(),e=Nge();return{ns:_e("table"),...e,mutations:{setData(r,a){const l=p(r._data)!==a;r.data.value=a,r._data.value=a,t.store.execQuery(),t.store.updateCurrentRowData(),t.store.updateExpandRows(),t.store.updateTreeData(t.store.states.defaultExpandAll.value),p(r.reserveSelection)?(t.store.assertRowKey(),t.store.updateSelectionByRowKey()):l?t.store.clearSelection():t.store.cleanSelection(),t.store.updateAllSelected(),t.$ready&&t.store.scheduleLayout()},insertColumn(r,a,l){const c=p(r._columns);let u=[];l?(l&&!l.children&&(l.children=[]),l.children.push(a),u=aC(c,l)):(c.push(a),u=c),ID(u),r._columns.value=u,a.type==="selection"&&(r.selectable.value=a.selectable,r.reserveSelection.value=a.reserveSelection),t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},removeColumn(r,a,l){const c=p(r._columns)||[];if(l)l.children.splice(l.children.findIndex(u=>u.id===a.id),1),je(()=>{var u;((u=l.children)==null?void 0:u.length)===0&&delete l.children}),r._columns.value=aC(c,l);else{const u=c.indexOf(a);u>-1&&(c.splice(u,1),r._columns.value=c)}t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},sort(r,a){const{prop:l,order:c,init:u}=a;if(l){const d=p(r.columns).find(h=>h.property===l);d&&(d.order=c,t.store.updateSort(d,l,c),t.store.commit("changeSortCondition",{init:u}))}},changeSortCondition(r,a){const{sortingColumn:l,sortProp:c,sortOrder:u}=r,d=p(l),h=p(c),f=p(u);f===null&&(r.sortingColumn.value=null,r.sortProp.value=null);const m={filter:!0};t.store.execQuery(m),(!a||!(a.silent||a.init))&&t.emit("sort-change",{column:d,prop:h,order:f}),t.store.updateTableScrollY()},filterChange(r,a){const{column:l,values:c,silent:u}=a,d=t.store.updateFilters(l,c);t.store.execQuery(),u||t.emit("filter-change",d),t.store.updateTableScrollY()},toggleAllSelection(){t.store.toggleAllSelection()},rowSelectedChanged(r,a){t.store.toggleRowSelection(a),t.store.updateAllSelected()},setHoverRow(r,a){r.hoverRow.value=a},setCurrentRow(r,a){t.store.updateCurrentRow(a)}},commit:function(r,...a){const l=t.store.mutations;if(l[r])l[r].apply(t,[t.store.states].concat(a));else throw new Error(`Action not found: ${r}`)},updateTableScrollY:function(){je(()=>t.layout.updateScrollY.apply(t.layout))}}}const Vf={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data",["treeProps.hasChildren"]:{key:"lazyColumnIdentifier",default:"hasChildren"},["treeProps.children"]:{key:"childrenColumnName",default:"children"}};function zge(t,e){if(!t)throw new Error("Table is required.");const n=Bge();return n.toggleAllSelection=Rs(n._toggleAllSelection,10),Object.keys(Vf).forEach(i=>{xD(MD(e,i),i,n)}),Hge(n,e),n}function Hge(t,e){Object.keys(Vf).forEach(n=>{Ce(()=>MD(e,n),i=>{xD(i,n,t)})})}function xD(t,e,n){let i=t,s=Vf[e];typeof Vf[e]=="object"&&(s=s.key,i=i||Vf[e].default),n.states[s].value=i}function MD(t,e){if(e.includes(".")){const n=e.split(".");let i=t;return n.forEach(s=>{i=i[s]}),i}else return t[e]}class Uge{constructor(e){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=F(null),this.scrollX=F(!1),this.scrollY=F(!1),this.bodyWidth=F(null),this.fixedWidth=F(null),this.rightFixedWidth=F(null),this.gutterWidth=0;for(const n in e)Pt(e,n)&&(pn(this[n])?this[n].value=e[n]:this[n]=e[n]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const n=this.table.refs.scrollBarRef;if(this.table.vnode.el&&n){let i=!0;const s=this.scrollY.value;return i=n.wrapRef.scrollHeight>n.wrapRef.clientHeight,this.scrollY.value=i,s!==i}return!1}setHeight(e,n="height"){if(!Nt)return;const i=this.table.vnode.el;if(e=Age(e),this.height.value=Number(e),!i&&(e||e===0))return je(()=>this.setHeight(e,n));typeof e=="number"?(i.style[n]=`${e}px`,this.updateElsHeight()):typeof e=="string"&&(i.style[n]=e,this.updateElsHeight())}setMaxHeight(e){this.setHeight(e,"max-height")}getFlattenColumns(){const e=[];return this.table.store.states.columns.value.forEach(i=>{i.isColumnGroup?e.push.apply(e,i.columns):e.push(i)}),e}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(e){if(!e)return!0;let n=e;for(;n.tagName!=="DIV";){if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}updateColumnsWidth(){if(!Nt)return;const e=this.fit,n=this.table.vnode.el.clientWidth;let i=0;const s=this.getFlattenColumns(),o=s.filter(l=>typeof l.width!="number");if(s.forEach(l=>{typeof l.width=="number"&&l.realWidth&&(l.realWidth=null)}),o.length>0&&e){if(s.forEach(l=>{i+=Number(l.width||l.minWidth||80)}),i<=n){this.scrollX.value=!1;const l=n-i;if(o.length===1)o[0].realWidth=Number(o[0].minWidth||80)+l;else{const c=o.reduce((h,f)=>h+Number(f.minWidth||80),0),u=l/c;let d=0;o.forEach((h,f)=>{if(f===0)return;const m=Math.floor(Number(h.minWidth||80)*u);d+=m,h.realWidth=Number(h.minWidth||80)+m}),o[0].realWidth=Number(o[0].minWidth||80)+l-d}}else this.scrollX.value=!0,o.forEach(l=>{l.realWidth=Number(l.minWidth)});this.bodyWidth.value=Math.max(i,n),this.table.state.resizeState.value.width=this.bodyWidth.value}else s.forEach(l=>{!l.width&&!l.minWidth?l.realWidth=80:l.realWidth=Number(l.width||l.minWidth),i+=l.realWidth}),this.scrollX.value=i>n,this.bodyWidth.value=i;const r=this.store.states.fixedColumns.value;if(r.length>0){let l=0;r.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.fixedWidth.value=l}const a=this.store.states.rightFixedColumns.value;if(a.length>0){let l=0;a.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.rightFixedWidth.value=l}this.notifyObservers("columns")}addObserver(e){this.observers.push(e)}removeObserver(e){const n=this.observers.indexOf(e);n!==-1&&this.observers.splice(n,1)}notifyObservers(e){this.observers.forEach(i=>{var s,o;switch(e){case"columns":(s=i.state)==null||s.onColumnsChange(this);break;case"scrollable":(o=i.state)==null||o.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${e}.`)}})}}const{CheckboxGroup:Wge}=Yo,Gge=J({name:"ElTableFilterPanel",components:{ElCheckbox:Yo,ElCheckboxGroup:Wge,ElScrollbar:fl,ElTooltip:Fs,ElIcon:Ge,ArrowDown:$c,ArrowUp:r_},directives:{ClickOutside:Tc},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(t){const e=vt(),{t:n}=Gt(),i=_e("table-filter"),s=e==null?void 0:e.parent;s.filterPanels.value[t.column.id]||(s.filterPanels.value[t.column.id]=e);const o=F(!1),r=F(null),a=T(()=>t.column&&t.column.filters),l=T({get:()=>{var S;return(((S=t.column)==null?void 0:S.filteredValue)||[])[0]},set:S=>{c.value&&(typeof S<"u"&&S!==null?c.value.splice(0,1,S):c.value.splice(0,1))}}),c=T({get(){return t.column?t.column.filteredValue||[]:[]},set(S){t.column&&t.upDataColumn("filteredValue",S)}}),u=T(()=>t.column?t.column.filterMultiple:!0),d=S=>S.value===l.value,h=()=>{o.value=!1},f=S=>{S.stopPropagation(),o.value=!o.value},m=()=>{o.value=!1},g=()=>{C(c.value),h()},y=()=>{c.value=[],C(c.value),h()},_=S=>{l.value=S,C(typeof S<"u"&&S!==null?c.value:[]),h()},C=S=>{t.store.commit("filterChange",{column:t.column,values:S}),t.store.updateAllSelected()};Ce(o,S=>{t.column&&t.upDataColumn("filterOpened",S)},{immediate:!0});const w=T(()=>{var S,E;return(E=(S=r.value)==null?void 0:S.popperRef)==null?void 0:E.contentRef});return{tooltipVisible:o,multiple:u,filteredValue:c,filterValue:l,filters:a,handleConfirm:g,handleReset:y,handleSelect:_,isActive:d,t:n,ns:i,showFilterPanel:f,hideFilterPanel:m,popperPaneRef:w,tooltip:r}}}),jge={key:0},qge=["disabled"],Kge=["label","onClick"];function Yge(t,e,n,i,s,o){const r=pt("el-checkbox"),a=pt("el-checkbox-group"),l=pt("el-scrollbar"),c=pt("arrow-up"),u=pt("arrow-down"),d=pt("el-icon"),h=pt("el-tooltip"),f=mm("click-outside");return I(),ce(h,{ref:"tooltip",visible:t.tooltipVisible,offset:0,placement:t.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":t.ns.b(),persistent:""},{content:ee(()=>[t.multiple?(I(),H("div",jge,[G("div",{class:x(t.ns.e("content"))},[Z(l,{"wrap-class":t.ns.e("wrap")},{default:ee(()=>[Z(a,{modelValue:t.filteredValue,"onUpdate:modelValue":e[0]||(e[0]=m=>t.filteredValue=m),class:x(t.ns.e("checkbox-group"))},{default:ee(()=>[(I(!0),H(Ye,null,Ot(t.filters,m=>(I(),ce(r,{key:m.value,label:m.value},{default:ee(()=>[Ut(Re(m.text),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","class"])]),_:1},8,["wrap-class"])],2),G("div",{class:x(t.ns.e("bottom"))},[G("button",{class:x({[t.ns.is("disabled")]:t.filteredValue.length===0}),disabled:t.filteredValue.length===0,type:"button",onClick:e[1]||(e[1]=(...m)=>t.handleConfirm&&t.handleConfirm(...m))},Re(t.t("el.table.confirmFilter")),11,qge),G("button",{type:"button",onClick:e[2]||(e[2]=(...m)=>t.handleReset&&t.handleReset(...m))},Re(t.t("el.table.resetFilter")),1)],2)])):(I(),H("ul",{key:1,class:x(t.ns.e("list"))},[G("li",{class:x([t.ns.e("list-item"),{[t.ns.is("active")]:t.filterValue===void 0||t.filterValue===null}]),onClick:e[3]||(e[3]=m=>t.handleSelect(null))},Re(t.t("el.table.clearFilter")),3),(I(!0),H(Ye,null,Ot(t.filters,m=>(I(),H("li",{key:m.value,class:x([t.ns.e("list-item"),t.ns.is("active",t.isActive(m))]),label:m.value,onClick:g=>t.handleSelect(m.value)},Re(m.text),11,Kge))),128))],2))]),default:ee(()=>[ct((I(),H("span",{class:x([`${t.ns.namespace.value}-table__column-filter-trigger`,`${t.ns.namespace.value}-none-outline`]),onClick:e[4]||(e[4]=(...m)=>t.showFilterPanel&&t.showFilterPanel(...m))},[Z(d,null,{default:ee(()=>[t.column.filterOpened?(I(),ce(c,{key:0})):(I(),ce(u,{key:1}))]),_:1})],2)),[[f,t.hideFilterPanel,t.popperPaneRef]])]),_:1},8,["visible","placement","popper-class"])}var Zge=Ve(Gge,[["render",Yge],["__file","/home/runner/work/element-plus/element-plus/packages/components/table/src/filter-panel.vue"]]);function $D(t){const e=vt();Kb(()=>{n.value.addObserver(e)}),ft(()=>{i(n.value),s(n.value)}),ll(()=>{i(n.value),s(n.value)}),Mc(()=>{n.value.removeObserver(e)});const n=T(()=>{const o=t.layout;if(!o)throw new Error("Can not find table layout.");return o}),i=o=>{var r;const a=((r=t.vnode.el)==null?void 0:r.querySelectorAll("colgroup > col"))||[];if(!a.length)return;const l=o.getFlattenColumns(),c={};l.forEach(u=>{c[u.id]=u});for(let u=0,d=a.length;u<d;u++){const h=a[u],f=h.getAttribute("name"),m=c[f];m&&h.setAttribute("width",m.realWidth||m.width)}},s=o=>{var r,a;const l=((r=t.vnode.el)==null?void 0:r.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let u=0,d=l.length;u<d;u++)l[u].setAttribute("width",o.scrollY.value?o.gutterWidth:"0");const c=((a=t.vnode.el)==null?void 0:a.querySelectorAll("th.gutter"))||[];for(let u=0,d=c.length;u<d;u++){const h=c[u];h.style.width=o.scrollY.value?`${o.gutterWidth}px`:"0",h.style.display=o.scrollY.value?"":"none"}};return{tableLayout:n.value,onColumnsChange:i,onScrollableChange:s}}const ua=Symbol("ElTable");function Xge(t,e){const n=vt(),i=qe(ua),s=g=>{g.stopPropagation()},o=(g,y)=>{!y.filters&&y.sortable?m(g,y,!1):y.filterable&&!y.sortable&&s(g),i==null||i.emit("header-click",y,g)},r=(g,y)=>{i==null||i.emit("header-contextmenu",y,g)},a=F(null),l=F(!1),c=F({}),u=(g,y)=>{if(Nt&&!(y.children&&y.children.length>0)&&a.value&&t.border){l.value=!0;const _=i;e("set-drag-visible",!0);const w=(_==null?void 0:_.vnode.el).getBoundingClientRect().left,S=n.vnode.el.querySelector(`th.${y.id}`),E=S.getBoundingClientRect(),k=E.left-w+30;Wr(S,"noclick"),c.value={startMouseLeft:g.clientX,startLeft:E.right-w,startColumnLeft:E.left-w,tableLeft:w};const A=_==null?void 0:_.refs.resizeProxy;A.style.left=`${c.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const $=O=>{const B=O.clientX-c.value.startMouseLeft,V=c.value.startLeft+B;A.style.left=`${Math.max(k,V)}px`},L=()=>{if(l.value){const{startColumnLeft:O,startLeft:B}=c.value,P=Number.parseInt(A.style.left,10)-O;y.width=y.realWidth=P,_==null||_.emit("header-dragend",y.width,B-O,y,g),requestAnimationFrame(()=>{t.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",l.value=!1,a.value=null,c.value={},e("set-drag-visible",!1)}document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",L),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{Zs(S,"noclick")},0)};document.addEventListener("mousemove",$),document.addEventListener("mouseup",L)}},d=(g,y)=>{var _;if(y.children&&y.children.length>0)return;const C=(_=g.target)==null?void 0:_.closest("th");if(!(!y||!y.resizable)&&!l.value&&t.border){const w=C.getBoundingClientRect(),S=document.body.style;w.width>12&&w.right-g.pageX<8?(S.cursor="col-resize",ur(C,"is-sortable")&&(C.style.cursor="col-resize"),a.value=y):l.value||(S.cursor="",ur(C,"is-sortable")&&(C.style.cursor="pointer"),a.value=null)}},h=()=>{Nt&&(document.body.style.cursor="")},f=({order:g,sortOrders:y})=>{if(g==="")return y[0];const _=y.indexOf(g||null);return y[_>y.length-2?0:_+1]},m=(g,y,_)=>{var C;g.stopPropagation();const w=y.order===_?null:_||f(y),S=(C=g.target)==null?void 0:C.closest("th");if(S&&ur(S,"noclick")){Zs(S,"noclick");return}if(!y.sortable)return;const E=t.store.states;let k=E.sortProp.value,A;const $=E.sortingColumn.value;($!==y||$===y&&$.order===null)&&($&&($.order=null),E.sortingColumn.value=y,k=y.property),w?A=y.order=w:A=y.order=null,E.sortProp.value=k,E.sortOrder.value=A,i==null||i.store.commit("changeSortCondition")};return{handleHeaderClick:o,handleHeaderContextMenu:r,handleMouseDown:u,handleMouseMove:d,handleMouseOut:h,handleSortClick:m,handleFilterClick:s}}function Qge(t){const e=qe(ua),n=_e("table");return{getHeaderRowStyle:a=>{const l=e==null?void 0:e.props.headerRowStyle;return typeof l=="function"?l.call(null,{rowIndex:a}):l},getHeaderRowClass:a=>{const l=[],c=e==null?void 0:e.props.headerRowClassName;return typeof c=="string"?l.push(c):typeof c=="function"&&l.push(c.call(null,{rowIndex:a})),l.join(" ")},getHeaderCellStyle:(a,l,c,u)=>{var d;let h=(d=e==null?void 0:e.props.headerCellStyle)!=null?d:{};typeof h=="function"&&(h=h.call(null,{rowIndex:a,columnIndex:l,row:c,column:u}));const f=Ok(l,u.fixed,t.store,c);return th(f,"left"),th(f,"right"),Object.assign({},h,f)},getHeaderCellClass:(a,l,c,u)=>{const d=Lk(n.b(),l,u.fixed,t.store,c),h=[u.id,u.order,u.headerAlign,u.className,u.labelClassName,...d];u.children||h.push("is-leaf"),u.sortable&&h.push("is-sortable");const f=e==null?void 0:e.props.headerCellClassName;return typeof f=="string"?h.push(f):typeof f=="function"&&h.push(f.call(null,{rowIndex:a,columnIndex:l,row:c,column:u})),h.push(n.e("cell")),h.filter(m=>Boolean(m)).join(" ")}}}const AD=t=>{const e=[];return t.forEach(n=>{n.children?(e.push(n),e.push.apply(e,AD(n.children))):e.push(n)}),e},Jge=t=>{let e=1;const n=(o,r)=>{if(r&&(o.level=r.level+1,e<o.level&&(e=o.level)),o.children){let a=0;o.children.forEach(l=>{n(l,o),a+=l.colSpan}),o.colSpan=a}else o.colSpan=1};t.forEach(o=>{o.level=1,n(o,void 0)});const i=[];for(let o=0;o<e;o++)i.push([]);return AD(t).forEach(o=>{o.children?(o.rowSpan=1,o.children.forEach(r=>r.isSubColumn=!0)):o.rowSpan=e-o.level+1,i[o.level-1].push(o)}),i};function eve(t){const e=qe(ua),n=T(()=>Jge(t.store.states.originColumns.value));return{isGroup:T(()=>{const o=n.value.length>1;return o&&e&&(e.state.isGroup.value=!0),o}),toggleAllSelection:o=>{o.stopPropagation(),e==null||e.store.commit("toggleAllSelection")},columnRows:n}}var tve=J({name:"ElTableHeader",components:{ElCheckbox:Yo},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(t,{emit:e}){const n=vt(),i=qe(ua),s=_e("table"),o=F({}),{onColumnsChange:r,onScrollableChange:a}=$D(i);ft(async()=>{await je(),await je();const{prop:k,order:A}=t.defaultSort;i==null||i.store.commit("sort",{prop:k,order:A,init:!0})});const{handleHeaderClick:l,handleHeaderContextMenu:c,handleMouseDown:u,handleMouseMove:d,handleMouseOut:h,handleSortClick:f,handleFilterClick:m}=Xge(t,e),{getHeaderRowStyle:g,getHeaderRowClass:y,getHeaderCellStyle:_,getHeaderCellClass:C}=Qge(t),{isGroup:w,toggleAllSelection:S,columnRows:E}=eve(t);return n.state={onColumnsChange:r,onScrollableChange:a},n.filterPanels=o,{ns:s,filterPanels:o,onColumnsChange:r,onScrollableChange:a,columnRows:E,getHeaderRowClass:y,getHeaderRowStyle:g,getHeaderCellClass:C,getHeaderCellStyle:_,handleHeaderClick:l,handleHeaderContextMenu:c,handleMouseDown:u,handleMouseMove:d,handleMouseOut:h,handleSortClick:f,handleFilterClick:m,isGroup:w,toggleAllSelection:S}},render(){const{ns:t,isGroup:e,columnRows:n,getHeaderCellStyle:i,getHeaderCellClass:s,getHeaderRowClass:o,getHeaderRowStyle:r,handleHeaderClick:a,handleHeaderContextMenu:l,handleMouseDown:c,handleMouseMove:u,handleSortClick:d,handleMouseOut:h,store:f,$parent:m}=this;let g=1;return Ze("thead",{class:{[t.is("group")]:e}},n.map((y,_)=>Ze("tr",{class:o(_),key:_,style:r(_)},y.map((C,w)=>(C.rowSpan>g&&(g=C.rowSpan),Ze("th",{class:s(_,w,y,C),colspan:C.colSpan,key:`${C.id}-thead`,rowspan:C.rowSpan,style:i(_,w,y,C),onClick:S=>a(S,C),onContextmenu:S=>l(S,C),onMousedown:S=>c(S,C),onMousemove:S=>u(S,C),onMouseout:h},[Ze("div",{class:["cell",C.filteredValue&&C.filteredValue.length>0?"highlight":""]},[C.renderHeader?C.renderHeader({column:C,$index:w,store:f,_self:m}):C.label,C.sortable&&Ze("span",{onClick:S=>d(S,C),class:"caret-wrapper"},[Ze("i",{onClick:S=>d(S,C,"ascending"),class:"sort-caret ascending"}),Ze("i",{onClick:S=>d(S,C,"descending"),class:"sort-caret descending"})]),C.filterable&&Ze(Zge,{store:f,placement:C.filterPlacement||"bottom-start",column:C,upDataColumn:(S,E)=>{C[S]=E}})])]))))))}});function nve(t){const e=qe(ua),n=F(""),i=F(Ze("div")),s=(h,f,m)=>{var g;const y=e,_=Mw(h);let C;const w=(g=y==null?void 0:y.vnode.el)==null?void 0:g.dataset.prefix;_&&(C=O$({columns:t.store.states.columns.value},_,w),C&&(y==null||y.emit(`cell-${m}`,f,C,_,h))),y==null||y.emit(`row-${m}`,f,C,h)},o=(h,f)=>{s(h,f,"dblclick")},r=(h,f)=>{t.store.commit("setCurrentRow",f),s(h,f,"click")},a=(h,f)=>{s(h,f,"contextmenu")},l=Rs(h=>{t.store.commit("setHoverRow",h)},30),c=Rs(()=>{t.store.commit("setHoverRow",null)},30);return{handleDoubleClick:o,handleClick:r,handleContextMenu:a,handleMouseEnter:l,handleMouseLeave:c,handleCellMouseEnter:(h,f,m)=>{var g;const y=e,_=Mw(h),C=(g=y==null?void 0:y.vnode.el)==null?void 0:g.dataset.prefix;if(_){const A=O$({columns:t.store.states.columns.value},_,C),$=y.hoverState={cell:_,column:A,row:f};y==null||y.emit("cell-mouse-enter",$.row,$.column,$.cell,h)}if(!m)return;const w=h.target.querySelector(".cell");if(!(ur(w,`${C}-tooltip`)&&w.childNodes.length))return;const S=document.createRange();S.setStart(w,0),S.setEnd(w,w.childNodes.length);const E=Math.round(S.getBoundingClientRect().width),k=(Number.parseInt(Ba(w,"paddingLeft"),10)||0)+(Number.parseInt(Ba(w,"paddingRight"),10)||0);(E+k>w.offsetWidth||w.scrollWidth>w.offsetWidth)&&Pge(e==null?void 0:e.refs.tableWrapper,_,_.innerText||_.textContent,m)},handleCellMouseLeave:h=>{if(!Mw(h))return;const m=e==null?void 0:e.hoverState;e==null||e.emit("cell-mouse-leave",m==null?void 0:m.row,m==null?void 0:m.column,m==null?void 0:m.cell,h)},tooltipContent:n,tooltipTrigger:i}}function ive(t){const e=qe(ua),n=_e("table");return{getRowStyle:(c,u)=>{const d=e==null?void 0:e.props.rowStyle;return typeof d=="function"?d.call(null,{row:c,rowIndex:u}):d||null},getRowClass:(c,u)=>{const d=[n.e("row")];e!=null&&e.props.highlightCurrentRow&&c===t.store.states.currentRow.value&&d.push("current-row"),t.stripe&&u%2===1&&d.push(n.em("row","striped"));const h=e==null?void 0:e.props.rowClassName;return typeof h=="string"?d.push(h):typeof h=="function"&&d.push(h.call(null,{row:c,rowIndex:u})),d},getCellStyle:(c,u,d,h)=>{const f=e==null?void 0:e.props.cellStyle;let m=f??{};typeof f=="function"&&(m=f.call(null,{rowIndex:c,columnIndex:u,row:d,column:h}));const g=Ok(u,t==null?void 0:t.fixed,t.store);return th(g,"left"),th(g,"right"),Object.assign({},m,g)},getCellClass:(c,u,d,h,f)=>{const m=Lk(n.b(),u,t==null?void 0:t.fixed,t.store,void 0,f),g=[h.id,h.align,h.className,...m],y=e==null?void 0:e.props.cellClassName;return typeof y=="string"?g.push(y):typeof y=="function"&&g.push(y.call(null,{rowIndex:c,columnIndex:u,row:d,column:h})),g.push(n.e("cell")),g.filter(_=>Boolean(_)).join(" ")},getSpan:(c,u,d,h)=>{let f=1,m=1;const g=e==null?void 0:e.props.spanMethod;if(typeof g=="function"){const y=g({row:c,column:u,rowIndex:d,columnIndex:h});Array.isArray(y)?(f=y[0],m=y[1]):typeof y=="object"&&(f=y.rowspan,m=y.colspan)}return{rowspan:f,colspan:m}},getColspanRealWidth:(c,u,d)=>{if(u<1)return c[d].realWidth;const h=c.map(({realWidth:f,width:m})=>f||m).slice(d,d+u);return Number(h.reduce((f,m)=>Number(f)+Number(m),-1))}}}function sve(t){const e=qe(ua),n=_e("table"),{handleDoubleClick:i,handleClick:s,handleContextMenu:o,handleMouseEnter:r,handleMouseLeave:a,handleCellMouseEnter:l,handleCellMouseLeave:c,tooltipContent:u,tooltipTrigger:d}=nve(t),{getRowStyle:h,getRowClass:f,getCellStyle:m,getCellClass:g,getSpan:y,getColspanRealWidth:_}=ive(t),C=T(()=>t.store.states.columns.value.findIndex(({type:A})=>A==="default")),w=(A,$)=>{const L=e.props.rowKey;return L?es(A,L):$},S=(A,$,L,O=!1)=>{const{tooltipEffect:B,tooltipOptions:V,store:P}=t,{indent:z,columns:U}=P.states,W=f(A,$);let R=!0;return L&&(W.push(n.em("row",`level-${L.level}`)),R=L.display),Ze("tr",{style:[R?null:{display:"none"},h(A,$)],class:W,key:w(A,$),onDblclick:N=>i(N,A),onClick:N=>s(N,A),onContextmenu:N=>o(N,A),onMouseenter:()=>r($),onMouseleave:a},U.value.map((N,K)=>{const{rowspan:ie,colspan:Y}=y(A,N,$,K);if(!ie||!Y)return null;const ne={...N};ne.realWidth=_(U.value,Y,K);const we={store:t.store,_self:t.context||e,column:ne,row:A,$index:$,cellIndex:K,expanded:O};K===C.value&&L&&(we.treeNode={indent:L.level*z.value,level:L.level},typeof L.expanded=="boolean"&&(we.treeNode.expanded=L.expanded,"loading"in L&&(we.treeNode.loading=L.loading),"noLazyChildren"in L&&(we.treeNode.noLazyChildren=L.noLazyChildren)));const Se=`${$},${K}`,Te=ne.columnKey||ne.rawColumnKey||"",le=E(K,N,we),oe=N.showOverflowTooltip&&fR({effect:B},V,N.showOverflowTooltip);return Ze("td",{style:m($,K,A,N),class:g($,K,A,N,Y-1),key:`${Te}${Se}`,rowspan:ie,colspan:Y,onMouseenter:de=>l(de,A,oe),onMouseleave:c},[le])}))},E=(A,$,L)=>$.renderCell(L);return{wrappedRowRender:(A,$)=>{const L=t.store,{isRowExpanded:O,assertRowKey:B}=L,{treeData:V,lazyTreeNodeMap:P,childrenColumnName:z,rowKey:U}=L.states,W=L.states.columns.value;if(W.some(({type:D})=>D==="expand")){const D=O(A),N=S(A,$,void 0,D),K=e.renderExpanded;return D?K?[[N,Ze("tr",{key:`expanded-row__${N.key}`},[Ze("td",{colspan:W.length,class:`${n.e("cell")} ${n.e("expanded-cell")}`},[K({row:A,$index:$,store:L,expanded:D})])])]]:(console.error("[Element Error]renderExpanded is required."),N):[[N]]}else if(Object.keys(V.value).length){B();const D=es(A,U.value);let N=V.value[D],K=null;N&&(K={expanded:N.expanded,level:N.level,display:!0},typeof N.lazy=="boolean"&&(typeof N.loaded=="boolean"&&N.loaded&&(K.noLazyChildren=!(N.children&&N.children.length)),K.loading=N.loading));const ie=[S(A,$,K)];if(N){let Y=0;const ne=(Se,Te)=>{Se&&Se.length&&Te&&Se.forEach(le=>{const oe={display:Te.display&&Te.expanded,level:Te.level+1,expanded:!1,noLazyChildren:!1,loading:!1},de=es(le,U.value);if(de==null)throw new Error("For nested data item, row-key is required.");if(N={...V.value[de]},N&&(oe.expanded=N.expanded,N.level=N.level||oe.level,N.display=!!(N.expanded&&oe.display),typeof N.lazy=="boolean"&&(typeof N.loaded=="boolean"&&N.loaded&&(oe.noLazyChildren=!(N.children&&N.children.length)),oe.loading=N.loading)),Y++,ie.push(S(le,$+Y,oe)),N){const ve=P.value[de]||le[z.value];ne(ve,N)}})};N.display=!0;const we=P.value[D]||A[z.value];ne(we,N)}return ie}else return S(A,$,void 0)},tooltipContent:u,tooltipTrigger:d}}const ove={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var rve=J({name:"ElTableBody",props:ove,setup(t){const e=vt(),n=qe(ua),i=_e("table"),{wrappedRowRender:s,tooltipContent:o,tooltipTrigger:r}=sve(t),{onColumnsChange:a,onScrollableChange:l}=$D(n);return Ce(t.store.states.hoverRow,(c,u)=>{if(!t.store.states.isComplex.value||!Nt)return;let d=window.requestAnimationFrame;d||(d=h=>window.setTimeout(h,16)),d(()=>{const h=e==null?void 0:e.vnode.el,f=Array.from((h==null?void 0:h.children)||[]).filter(y=>y==null?void 0:y.classList.contains(`${i.e("row")}`)),m=f[u],g=f[c];m&&Zs(m,"hover-row"),g&&Wr(g,"hover-row")})}),Mc(()=>{var c;(c=Sa)==null||c()}),{ns:i,onColumnsChange:a,onScrollableChange:l,wrappedRowRender:s,tooltipContent:o,tooltipTrigger:r}},render(){const{wrappedRowRender:t,store:e}=this,n=e.states.data.value||[];return Ze("tbody",{},[n.reduce((i,s)=>i.concat(t(s,i.length)),[])])}});function Pk(t){const e=t.tableLayout==="auto";let n=t.columns||[];e&&n.every(s=>s.width===void 0)&&(n=[]);const i=s=>{const o={key:`${t.tableLayout}_${s.id}`,style:{},name:void 0};return e?o.style={width:`${s.width}px`}:o.name=s.id,o};return Ze("colgroup",{},n.map(s=>Ze("col",i(s))))}Pk.props=["columns","tableLayout"];function ave(){const t=qe(ua),e=t==null?void 0:t.store,n=T(()=>e.states.fixedLeafColumnsLength.value),i=T(()=>e.states.rightFixedColumns.value.length),s=T(()=>e.states.columns.value.length),o=T(()=>e.states.fixedColumns.value.length),r=T(()=>e.states.rightFixedColumns.value.length);return{leftFixedLeafCount:n,rightFixedLeafCount:i,columnsCount:s,leftFixedCount:o,rightFixedCount:r,columns:e.states.columns}}function lve(t){const{columns:e}=ave(),n=_e("table");return{getCellClasses:(o,r)=>{const a=o[r],l=[n.e("cell"),a.id,a.align,a.labelClassName,...Lk(n.b(),r,a.fixed,t.store)];return a.className&&l.push(a.className),a.children||l.push(n.is("leaf")),l},getCellStyles:(o,r)=>{const a=Ok(r,o.fixed,t.store);return th(a,"left"),th(a,"right"),a},columns:e}}var cve=J({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(t){const{getCellClasses:e,getCellStyles:n,columns:i}=lve(t);return{ns:_e("table"),getCellClasses:e,getCellStyles:n,columns:i}},render(){const{columns:t,getCellStyles:e,getCellClasses:n,summaryMethod:i,sumText:s,ns:o}=this,r=this.store.states.data.value;let a=[];return i?a=i({columns:t,data:r}):t.forEach((l,c)=>{if(c===0){a[c]=s;return}const u=r.map(m=>Number(m[l.property])),d=[];let h=!0;u.forEach(m=>{if(!Number.isNaN(+m)){h=!1;const g=`${m}`.split(".")[1];d.push(g?g.length:0)}});const f=Math.max.apply(null,d);h?a[c]="":a[c]=u.reduce((m,g)=>{const y=Number(g);return Number.isNaN(+y)?m:Number.parseFloat((m+g).toFixed(Math.min(f,20)))},0)}),Ze("table",{class:o.e("footer"),cellspacing:"0",cellpadding:"0",border:"0"},[Pk({columns:t}),Ze("tbody",[Ze("tr",{},[...t.map((l,c)=>Ze("td",{key:c,colspan:l.colSpan,rowspan:l.rowSpan,class:n(t,c),style:e(l,c)},[Ze("div",{class:["cell",l.labelClassName]},[a[c]])]))])])])}});function uve(t){return{setCurrentRow:u=>{t.commit("setCurrentRow",u)},getSelectionRows:()=>t.getSelectionRows(),toggleRowSelection:(u,d)=>{t.toggleRowSelection(u,d,!1),t.updateAllSelected()},clearSelection:()=>{t.clearSelection()},clearFilter:u=>{t.clearFilter(u)},toggleAllSelection:()=>{t.commit("toggleAllSelection")},toggleRowExpansion:(u,d)=>{t.toggleRowExpansionAdapter(u,d)},clearSort:()=>{t.clearSort()},sort:(u,d)=>{t.commit("sort",{prop:u,order:d})}}}function dve(t,e,n,i){const s=F(!1),o=F(null),r=F(!1),a=D=>{r.value=D},l=F({width:null,height:null,headerHeight:null}),c=F(!1),u={display:"inline-block",verticalAlign:"middle"},d=F(),h=F(0),f=F(0),m=F(0),g=F(0);Co(()=>{e.setHeight(t.height)}),Co(()=>{e.setMaxHeight(t.maxHeight)}),Ce(()=>[t.currentRowKey,n.states.rowKey],([D,N])=>{!p(N)||!p(D)||n.setCurrentRowKey(`${D}`)},{immediate:!0}),Ce(()=>t.data,D=>{i.store.commit("setData",D)},{immediate:!0,deep:!0}),Co(()=>{t.expandRowKeys&&n.setExpandRowKeysAdapter(t.expandRowKeys)});const y=()=>{i.store.commit("setHoverRow",null),i.hoverState&&(i.hoverState=null)},_=(D,N)=>{const{pixelX:K,pixelY:ie}=N;Math.abs(K)>=Math.abs(ie)&&(i.refs.bodyWrapper.scrollLeft+=N.pixelX/5)},C=T(()=>t.height||t.maxHeight||n.states.fixedColumns.value.length>0||n.states.rightFixedColumns.value.length>0),w=T(()=>({width:e.bodyWidth.value?`${e.bodyWidth.value}px`:""})),S=()=>{C.value&&e.updateElsHeight(),e.updateColumnsWidth(),requestAnimationFrame($)};ft(async()=>{await je(),n.updateColumns(),L(),requestAnimationFrame(S);const D=i.vnode.el,N=i.refs.headerWrapper;t.flexible&&D&&D.parentElement&&(D.parentElement.style.minWidth="0"),l.value={width:d.value=D.offsetWidth,height:D.offsetHeight,headerHeight:t.showHeader&&N?N.offsetHeight:null},n.states.columns.value.forEach(K=>{K.filteredValue&&K.filteredValue.length&&i.store.commit("filterChange",{column:K,values:K.filteredValue,silent:!0})}),i.$ready=!0});const E=(D,N)=>{if(!D)return;const K=Array.from(D.classList).filter(ie=>!ie.startsWith("is-scrolling-"));K.push(e.scrollX.value?N:"is-scrolling-none"),D.className=K.join(" ")},k=D=>{const{tableWrapper:N}=i.refs;E(N,D)},A=D=>{const{tableWrapper:N}=i.refs;return!!(N&&N.classList.contains(D))},$=function(){if(!i.refs.scrollBarRef)return;if(!e.scrollX.value){const Se="is-scrolling-none";A(Se)||k(Se);return}const D=i.refs.scrollBarRef.wrapRef;if(!D)return;const{scrollLeft:N,offsetWidth:K,scrollWidth:ie}=D,{headerWrapper:Y,footerWrapper:ne}=i.refs;Y&&(Y.scrollLeft=N),ne&&(ne.scrollLeft=N);const we=ie-K-1;N>=we?k("is-scrolling-right"):k(N===0?"is-scrolling-left":"is-scrolling-middle")},L=()=>{i.refs.scrollBarRef&&(i.refs.scrollBarRef.wrapRef&&En(i.refs.scrollBarRef.wrapRef,"scroll",$,{passive:!0}),t.fit?ms(i.vnode.el,O):En(window,"resize",O),ms(i.refs.bodyWrapper,()=>{var D,N;O(),(N=(D=i.refs)==null?void 0:D.scrollBarRef)==null||N.update()}))},O=()=>{var D,N,K;const ie=i.vnode.el;if(!i.$ready||!ie)return;let Y=!1;const{width:ne,height:we,headerHeight:Se}=l.value,Te=d.value=ie.offsetWidth;ne!==Te&&(Y=!0);const le=ie.offsetHeight;(t.height||C.value)&&we!==le&&(Y=!0);const oe=t.tableLayout==="fixed"?i.refs.headerWrapper:(D=i.refs.tableHeaderRef)==null?void 0:D.$el;t.showHeader&&(oe==null?void 0:oe.offsetHeight)!==Se&&(Y=!0),h.value=((N=i.refs.tableWrapper)==null?void 0:N.scrollHeight)||0,m.value=(oe==null?void 0:oe.scrollHeight)||0,g.value=((K=i.refs.footerWrapper)==null?void 0:K.offsetHeight)||0,f.value=h.value-m.value-g.value,Y&&(l.value={width:Te,height:le,headerHeight:t.showHeader&&(oe==null?void 0:oe.offsetHeight)||0},S())},B=gi(),V=T(()=>{const{bodyWidth:D,scrollY:N,gutterWidth:K}=e;return D.value?`${D.value-(N.value?K:0)}px`:""}),P=T(()=>t.maxHeight?"fixed":t.tableLayout),z=T(()=>{if(t.data&&t.data.length)return null;let D="100%";t.height&&f.value&&(D=`${f.value}px`);const N=d.value;return{width:N?`${N}px`:"",height:D}}),U=T(()=>t.height?{height:Number.isNaN(Number(t.height))?t.height:`${t.height}px`}:t.maxHeight?{maxHeight:Number.isNaN(Number(t.maxHeight))?t.maxHeight:`${t.maxHeight}px`}:{}),W=T(()=>{if(t.height)return{height:"100%"};if(t.maxHeight){if(Number.isNaN(Number(t.maxHeight)))return{maxHeight:`calc(${t.maxHeight} - ${m.value+g.value}px)`};{const D=t.maxHeight;if(h.value>=Number(D))return{maxHeight:`${h.value-m.value-g.value}px`}}}return{}});return{isHidden:s,renderExpanded:o,setDragVisible:a,isGroup:c,handleMouseLeave:y,handleHeaderFooterMousewheel:_,tableSize:B,emptyBlockStyle:z,handleFixedMousewheel:(D,N)=>{const K=i.refs.bodyWrapper;if(Math.abs(N.spinY)>0){const ie=K.scrollTop;N.pixelY<0&&ie!==0&&D.preventDefault(),N.pixelY>0&&K.scrollHeight-K.clientHeight>ie&&D.preventDefault(),K.scrollTop+=Math.ceil(N.pixelY/5)}else K.scrollLeft+=Math.ceil(N.pixelX/5)},resizeProxyVisible:r,bodyWidth:V,resizeState:l,doLayout:S,tableBodyStyles:w,tableLayout:P,scrollbarViewStyle:u,tableInnerStyle:U,scrollbarStyle:W}}var pve={data:{type:Array,default:()=>[]},size:String,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:{type:Boolean,default:!1},flexible:Boolean};const hve=()=>{const t=F(),e=(o,r)=>{const a=t.value;a&&a.scrollTo(o,r)},n=(o,r)=>{const a=t.value;a&&st(r)&&["Top","Left"].includes(o)&&a[`setScroll${o}`](r)};return{scrollBarRef:t,scrollTo:e,setScrollTop:o=>n("Top",o),setScrollLeft:o=>n("Left",o)}};let fve=1;const mve=J({name:"ElTable",directives:{Mousewheel:bie},components:{TableHeader:tve,TableBody:rve,TableFooter:cve,ElScrollbar:fl,hColgroup:Pk},props:pve,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(t){const{t:e}=Gt(),n=_e("table"),i=vt();xt(ua,i);const s=zge(i,t);i.store=s;const o=new Uge({store:i.store,table:i,fit:t.fit,showHeader:t.showHeader});i.layout=o;const r=T(()=>(s.states.data.value||[]).length===0),{setCurrentRow:a,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:h,toggleRowExpansion:f,clearSort:m,sort:g}=uve(s),{isHidden:y,renderExpanded:_,setDragVisible:C,isGroup:w,handleMouseLeave:S,handleHeaderFooterMousewheel:E,tableSize:k,emptyBlockStyle:A,handleFixedMousewheel:$,resizeProxyVisible:L,bodyWidth:O,resizeState:B,doLayout:V,tableBodyStyles:P,tableLayout:z,scrollbarViewStyle:U,tableInnerStyle:W,scrollbarStyle:R}=dve(t,o,s,i),{scrollBarRef:D,scrollTo:N,setScrollLeft:K,setScrollTop:ie}=hve(),Y=Rs(V,50),ne=`${n.namespace.value}-table_${fve++}`;i.tableId=ne,i.state={isGroup:w,resizeState:B,doLayout:V,debouncedUpdateLayout:Y};const we=T(()=>t.sumText||e("el.table.sumText")),Se=T(()=>t.emptyText||e("el.table.emptyText"));return{ns:n,layout:o,store:s,handleHeaderFooterMousewheel:E,handleMouseLeave:S,tableId:ne,tableSize:k,isHidden:y,isEmpty:r,renderExpanded:_,resizeProxyVisible:L,resizeState:B,isGroup:w,bodyWidth:O,tableBodyStyles:P,emptyBlockStyle:A,debouncedUpdateLayout:Y,handleFixedMousewheel:$,setCurrentRow:a,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:h,toggleRowExpansion:f,clearSort:m,doLayout:V,sort:g,t:e,setDragVisible:C,context:i,computedSumText:we,computedEmptyText:Se,tableLayout:z,scrollbarViewStyle:U,tableInnerStyle:W,scrollbarStyle:R,scrollBarRef:D,scrollTo:N,setScrollLeft:K,setScrollTop:ie}}}),gve=["data-prefix"],vve={ref:"hiddenColumns",class:"hidden-columns"};function yve(t,e,n,i,s,o){const r=pt("hColgroup"),a=pt("table-header"),l=pt("table-body"),c=pt("el-scrollbar"),u=pt("table-footer"),d=mm("mousewheel");return I(),H("div",{ref:"tableWrapper",class:x([{[t.ns.m("fit")]:t.fit,[t.ns.m("striped")]:t.stripe,[t.ns.m("border")]:t.border||t.isGroup,[t.ns.m("hidden")]:t.isHidden,[t.ns.m("group")]:t.isGroup,[t.ns.m("fluid-height")]:t.maxHeight,[t.ns.m("scrollable-x")]:t.layout.scrollX.value,[t.ns.m("scrollable-y")]:t.layout.scrollY.value,[t.ns.m("enable-row-hover")]:!t.store.states.isComplex.value,[t.ns.m("enable-row-transition")]:(t.store.states.data.value||[]).length!==0&&(t.store.states.data.value||[]).length<100,"has-footer":t.showSummary},t.ns.m(t.tableSize),t.className,t.ns.b(),t.ns.m(`layout-${t.tableLayout}`)]),style:Ke(t.style),"data-prefix":t.ns.namespace.value,onMouseleave:e[0]||(e[0]=h=>t.handleMouseLeave())},[G("div",{class:x(t.ns.e("inner-wrapper")),style:Ke(t.tableInnerStyle)},[G("div",vve,[me(t.$slots,"default")],512),t.showHeader&&t.tableLayout==="fixed"?ct((I(),H("div",{key:0,ref:"headerWrapper",class:x(t.ns.e("header-wrapper"))},[G("table",{ref:"tableHeader",class:x(t.ns.e("header")),style:Ke(t.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[Z(r,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),Z(a,{ref:"tableHeaderRef",border:t.border,"default-sort":t.defaultSort,store:t.store,onSetDragVisible:t.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])],6)],2)),[[d,t.handleHeaderFooterMousewheel]]):re("v-if",!0),G("div",{ref:"bodyWrapper",class:x(t.ns.e("body-wrapper"))},[Z(c,{ref:"scrollBarRef","view-style":t.scrollbarViewStyle,"wrap-style":t.scrollbarStyle,always:t.scrollbarAlwaysOn},{default:ee(()=>[G("table",{ref:"tableBody",class:x(t.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:Ke({width:t.bodyWidth,tableLayout:t.tableLayout})},[Z(r,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),t.showHeader&&t.tableLayout==="auto"?(I(),ce(a,{key:0,ref:"tableHeaderRef",border:t.border,"default-sort":t.defaultSort,store:t.store,onSetDragVisible:t.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])):re("v-if",!0),Z(l,{context:t.context,highlight:t.highlightCurrentRow,"row-class-name":t.rowClassName,"tooltip-effect":t.tooltipEffect,"tooltip-options":t.tooltipOptions,"row-style":t.rowStyle,store:t.store,stripe:t.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"])],6),t.isEmpty?(I(),H("div",{key:0,ref:"emptyBlock",style:Ke(t.emptyBlockStyle),class:x(t.ns.e("empty-block"))},[G("span",{class:x(t.ns.e("empty-text"))},[me(t.$slots,"empty",{},()=>[Ut(Re(t.computedEmptyText),1)])],2)],6)):re("v-if",!0),t.$slots.append?(I(),H("div",{key:1,ref:"appendWrapper",class:x(t.ns.e("append-wrapper"))},[me(t.$slots,"append")],2)):re("v-if",!0)]),_:3},8,["view-style","wrap-style","always"])],2),t.showSummary?ct((I(),H("div",{key:1,ref:"footerWrapper",class:x(t.ns.e("footer-wrapper"))},[Z(u,{border:t.border,"default-sort":t.defaultSort,store:t.store,style:Ke(t.tableBodyStyles),"sum-text":t.computedSumText,"summary-method":t.summaryMethod},null,8,["border","default-sort","store","style","sum-text","summary-method"])],2)),[[Vt,!t.isEmpty],[d,t.handleHeaderFooterMousewheel]]):re("v-if",!0),t.border||t.isGroup?(I(),H("div",{key:2,class:x(t.ns.e("border-left-patch"))},null,2)):re("v-if",!0)],6),ct(G("div",{ref:"resizeProxy",class:x(t.ns.e("column-resize-proxy"))},null,2),[[Vt,t.resizeProxyVisible]])],46,gve)}var bve=Ve(mve,[["render",yve],["__file","/home/runner/work/element-plus/element-plus/packages/components/table/src/table.vue"]]);const _ve={selection:"table-column--selection",expand:"table__expand-column"},wve={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},Cve=t=>_ve[t]||"",Sve={selection:{renderHeader({store:t}){function e(){return t.states.data.value&&t.states.data.value.length===0}return Ze(Yo,{disabled:e(),size:t.states.tableSize.value,indeterminate:t.states.selection.value.length>0&&!t.states.isAllSelected.value,"onUpdate:modelValue":t.toggleAllSelection,modelValue:t.states.isAllSelected.value})},renderCell({row:t,column:e,store:n,$index:i}){return Ze(Yo,{disabled:e.selectable?!e.selectable.call(null,t,i):!1,size:n.states.tableSize.value,onChange:()=>{n.commit("rowSelectedChanged",t)},onClick:s=>s.stopPropagation(),modelValue:n.isSelected(t)})},sortable:!1,resizable:!1},index:{renderHeader({column:t}){return t.label||"#"},renderCell({column:t,$index:e}){let n=e+1;const i=t.index;return typeof i=="number"?n=e+i:typeof i=="function"&&(n=i(e)),Ze("div",{},[n])},sortable:!1},expand:{renderHeader({column:t}){return t.label||""},renderCell({row:t,store:e,expanded:n}){const{ns:i}=e,s=[i.e("expand-icon")];return n&&s.push(i.em("expand-icon","expanded")),Ze("div",{class:s,onClick:function(r){r.stopPropagation(),e.toggleRowExpansion(t)}},{default:()=>[Ze(Ge,null,{default:()=>[Ze($s)]})]})},sortable:!1,resizable:!1}};function Eve({row:t,column:e,$index:n}){var i;const s=e.property,o=s&&Pv(t,s).value;return e&&e.formatter?e.formatter(t,e,o,n):((i=o==null?void 0:o.toString)==null?void 0:i.call(o))||""}function kve({row:t,treeNode:e,store:n},i=!1){const{ns:s}=n;if(!e)return i?[Ze("span",{class:s.e("placeholder")})]:null;const o=[],r=function(a){a.stopPropagation(),!e.loading&&n.loadOrToggle(t)};if(e.indent&&o.push(Ze("span",{class:s.e("indent"),style:{"padding-left":`${e.indent}px`}})),typeof e.expanded=="boolean"&&!e.noLazyChildren){const a=[s.e("expand-icon"),e.expanded?s.em("expand-icon","expanded"):""];let l=$s;e.loading&&(l=Lc),o.push(Ze("div",{class:a,onClick:r},{default:()=>[Ze(Ge,{class:{[s.is("loading")]:e.loading}},{default:()=>[Ze(l)]})]}))}else o.push(Ze("span",{class:s.e("placeholder")}));return o}function V$(t,e){return t.reduce((n,i)=>(n[i]=i,n),e)}function Tve(t,e){const n=vt();return{registerComplexWatchers:()=>{const o=["fixed"],r={realWidth:"width",realMinWidth:"minWidth"},a=V$(o,r);Object.keys(a).forEach(l=>{const c=r[l];Pt(e,c)&&Ce(()=>e[c],u=>{let d=u;c==="width"&&l==="realWidth"&&(d=Ak(u)),c==="minWidth"&&l==="realMinWidth"&&(d=ED(u)),n.columnConfig.value[c]=d,n.columnConfig.value[l]=d;const h=c==="fixed";t.value.store.scheduleLayout(h)})})},registerNormalWatchers:()=>{const o=["label","filters","filterMultiple","sortable","index","formatter","className","labelClassName","showOverflowTooltip"],r={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},a=V$(o,r);Object.keys(a).forEach(l=>{const c=r[l];Pt(e,c)&&Ce(()=>e[c],u=>{n.columnConfig.value[l]=u})})}}}function Ive(t,e,n){const i=vt(),s=F(""),o=F(!1),r=F(),a=F(),l=_e("table");Co(()=>{r.value=t.align?`is-${t.align}`:null,r.value}),Co(()=>{a.value=t.headerAlign?`is-${t.headerAlign}`:r.value,a.value});const c=T(()=>{let w=i.vnode.vParent||i.parent;for(;w&&!w.tableId&&!w.columnId;)w=w.vnode.vParent||w.parent;return w}),u=T(()=>{const{store:w}=i.parent;if(!w)return!1;const{treeData:S}=w.states,E=S.value;return E&&Object.keys(E).length>0}),d=F(Ak(t.width)),h=F(ED(t.minWidth)),f=w=>(d.value&&(w.width=d.value),h.value&&(w.minWidth=h.value),!d.value&&h.value&&(w.width=void 0),w.minWidth||(w.minWidth=80),w.realWidth=Number(w.width===void 0?w.minWidth:w.width),w),m=w=>{const S=w.type,E=Sve[S]||{};Object.keys(E).forEach(A=>{const $=E[A];A!=="className"&&$!==void 0&&(w[A]=$)});const k=Cve(S);if(k){const A=`${p(l.namespace)}-${k}`;w.className=w.className?`${w.className} ${A}`:A}return w},g=w=>{Array.isArray(w)?w.forEach(E=>S(E)):S(w);function S(E){var k;((k=E==null?void 0:E.type)==null?void 0:k.name)==="ElTableColumn"&&(E.vParent=i)}};return{columnId:s,realAlign:r,isSubColumn:o,realHeaderAlign:a,columnOrTableParent:c,setColumnWidth:f,setColumnForcedProps:m,setColumnRenders:w=>{t.renderHeader||w.type!=="selection"&&(w.renderHeader=E=>{i.columnConfig.value.label;const k=e.header;return k?k(E):w.label});let S=w.renderCell;return w.type==="expand"?(w.renderCell=E=>Ze("div",{class:"cell"},[S(E)]),n.value.renderExpanded=E=>e.default?e.default(E):e.default):(S=S||Eve,w.renderCell=E=>{let k=null;if(e.default){const O=e.default(E);k=O.some(B=>B.type!==Ms)?O:S(E)}else k=S(E);const A=u.value&&E.cellIndex===0&&E.column.type!=="selection",$=kve(E,A),L={class:"cell",style:{}};return w.showOverflowTooltip&&(L.class=`${L.class} ${p(l.namespace)}-tooltip`,L.style={width:`${(E.column.realWidth||Number(E.column.width))-1}px`}),g(k),Ze("div",L,[$,k])}),w},getPropsData:(...w)=>w.reduce((S,E)=>(Array.isArray(E)&&E.forEach(k=>{S[k]=t[k]}),S),{}),getColumnElIndex:(w,S)=>Array.prototype.indexOf.call(w,S)}}var xve={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:[Boolean,Object],fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:t=>t.every(e=>["ascending","descending",null].includes(e))}};let Mve=1;var LD=J({name:"ElTableColumn",components:{ElCheckbox:Yo},props:xve,setup(t,{slots:e}){const n=vt(),i=F({}),s=T(()=>{let C=n.parent;for(;C&&!C.tableId;)C=C.parent;return C}),{registerNormalWatchers:o,registerComplexWatchers:r}=Tve(s,t),{columnId:a,isSubColumn:l,realHeaderAlign:c,columnOrTableParent:u,setColumnWidth:d,setColumnForcedProps:h,setColumnRenders:f,getPropsData:m,getColumnElIndex:g,realAlign:y}=Ive(t,e,s),_=u.value;a.value=`${_.tableId||_.columnId}_column_${Mve++}`,Kb(()=>{l.value=s.value!==_;const C=t.type||"default",w=t.sortable===""?!0:t.sortable,S={...wve[C],id:a.value,type:C,property:t.prop||t.property,align:y,headerAlign:c,showOverflowTooltip:t.showOverflowTooltip,filterable:t.filters||t.filterMethod,filteredValue:[],filterPlacement:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:w,index:t.index,rawColumnKey:n.vnode.key};let L=m(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement"]);L=$ge(S,L),L=Lge(f,d,h)(L),i.value=L,o(),r()}),ft(()=>{var C;const w=u.value,S=l.value?w.vnode.el.children:(C=w.refs.hiddenColumns)==null?void 0:C.children,E=()=>g(S||[],n.vnode.el);i.value.getColumnIndex=E,E()>-1&&s.value.store.commit("insertColumn",i.value,l.value?w.columnConfig.value:null)}),Pn(()=>{s.value.store.commit("removeColumn",i.value,l.value?_.columnConfig.value:null)}),n.columnId=a.value,n.columnConfig=i},render(){var t,e,n;try{const i=(e=(t=this.$slots).default)==null?void 0:e.call(t,{row:{},column:{},$index:-1}),s=[];if(Array.isArray(i))for(const r of i)((n=r.type)==null?void 0:n.name)==="ElTableColumn"||r.shapeFlag&2?s.push(r):r.type===Ye&&Array.isArray(r.children)&&r.children.forEach(a=>{(a==null?void 0:a.patchFlag)!==1024&&!at(a==null?void 0:a.children)&&s.push(a)});return Ze("div",s)}catch{return Ze("div",[])}}});const $ve=yt(bve,{TableColumn:LD}),Ave=Nn(LD);var Bm=(t=>(t.ASC="asc",t.DESC="desc",t))(Bm||{}),zm=(t=>(t.CENTER="center",t.RIGHT="right",t))(zm||{}),OD=(t=>(t.LEFT="left",t.RIGHT="right",t))(OD||{});const lC={asc:"desc",desc:"asc"},Hm=Symbol("placeholder"),Lve=(t,e,n)=>{var i;const s={flexGrow:0,flexShrink:0,...n?{}:{flexGrow:t.flexGrow||0,flexShrink:t.flexShrink||1}};n||(s.flexShrink=1);const o={...(i=t.style)!=null?i:{},...s,flexBasis:"auto",width:t.width};return e||(t.maxWidth&&(o.maxWidth=t.maxWidth),t.minWidth&&(o.minWidth=t.minWidth)),o};function Ove(t,e,n){const i=T(()=>p(e).filter(g=>!g.hidden)),s=T(()=>p(i).filter(g=>g.fixed==="left"||g.fixed===!0)),o=T(()=>p(i).filter(g=>g.fixed==="right")),r=T(()=>p(i).filter(g=>!g.fixed)),a=T(()=>{const g=[];return p(s).forEach(y=>{g.push({...y,placeholderSign:Hm})}),p(r).forEach(y=>{g.push(y)}),p(o).forEach(y=>{g.push({...y,placeholderSign:Hm})}),g}),l=T(()=>p(s).length||p(o).length),c=T(()=>p(e).reduce((y,_)=>(y[_.key]=Lve(_,p(n),t.fixed),y),{})),u=T(()=>p(i).reduce((g,y)=>g+y.width,0)),d=g=>p(e).find(y=>y.key===g),h=g=>p(c)[g],f=(g,y)=>{g.width=y};function m(g){var y;const{key:_}=g.currentTarget.dataset;if(!_)return;const{sortState:C,sortBy:w}=t;let S=Bm.ASC;Et(C)?S=lC[C[_]]:S=lC[w.order],(y=t.onColumnSort)==null||y.call(t,{column:d(_),key:_,order:S})}return{columns:e,columnsStyles:c,columnsTotalWidth:u,fixedColumnsOnLeft:s,fixedColumnsOnRight:o,hasFixedColumns:l,mainColumns:a,normalColumns:r,visibleColumns:i,getColumn:d,getColumnStyle:h,updateColumnWidth:f,onColumnSorted:m}}const Pve=(t,{mainTableRef:e,leftTableRef:n,rightTableRef:i,onMaybeEndReached:s})=>{const o=F({scrollLeft:0,scrollTop:0});function r(f){var m,g,y;const{scrollTop:_}=f;(m=e.value)==null||m.scrollTo(f),(g=n.value)==null||g.scrollToTop(_),(y=i.value)==null||y.scrollToTop(_)}function a(f){o.value=f,r(f)}function l(f){o.value.scrollTop=f,r(p(o))}function c(f){var m,g;o.value.scrollLeft=f,(g=(m=e.value)==null?void 0:m.scrollTo)==null||g.call(m,p(o))}function u(f){var m;a(f),(m=t.onScroll)==null||m.call(t,f)}function d({scrollTop:f}){const{scrollTop:m}=p(o);f!==m&&l(f)}function h(f,m="auto"){var g;(g=e.value)==null||g.scrollToRow(f,m)}return Ce(()=>p(o).scrollTop,(f,m)=>{f>m&&s()}),{scrollPos:o,scrollTo:a,scrollToLeft:c,scrollToTop:l,scrollToRow:h,onScroll:u,onVerticalScroll:d}},Rve=(t,{mainTableRef:e,leftTableRef:n,rightTableRef:i,onMaybeEndReached:s})=>{const o=vt(),{emit:r}=o,a=yn(!1),l=yn(null),c=F(t.defaultExpandedRowKeys||[]),u=F(-1),d=yn(null),h=F({}),f=F({}),m=yn({}),g=yn({}),y=yn({}),_=T(()=>st(t.estimatedRowHeight));function C(L){var O;(O=t.onRowsRendered)==null||O.call(t,L),L.rowCacheEnd>p(u)&&(u.value=L.rowCacheEnd)}function w({hovered:L,rowKey:O}){l.value=L?O:null}function S({expanded:L,rowData:O,rowIndex:B,rowKey:V}){var P,z;const U=[...p(c)],W=U.indexOf(V);L?W===-1&&U.push(V):W>-1&&U.splice(W,1),c.value=U,r("update:expandedRowKeys",U),(P=t.onRowExpand)==null||P.call(t,{expanded:L,rowData:O,rowIndex:B,rowKey:V}),(z=t.onExpandedRowsChange)==null||z.call(t,U)}const E=Rs(()=>{var L,O,B,V;a.value=!0,h.value={...p(h),...p(f)},k(p(d),!1),f.value={},d.value=null,(L=e.value)==null||L.forceUpdate(),(O=n.value)==null||O.forceUpdate(),(B=i.value)==null||B.forceUpdate(),(V=o.proxy)==null||V.$forceUpdate(),a.value=!1},0);function k(L,O=!1){p(_)&&[e,n,i].forEach(B=>{const V=p(B);V&&V.resetAfterRowIndex(L,O)})}function A(L,O,B){const V=p(d);(V===null||V>B)&&(d.value=B),f.value[L]=O}function $({rowKey:L,height:O,rowIndex:B},V){V?V===OD.RIGHT?y.value[L]=O:m.value[L]=O:g.value[L]=O;const P=Math.max(...[m,y,g].map(z=>z.value[L]||0));p(h)[L]!==P&&(A(L,P,B),E())}return Ce(u,()=>s()),{hoveringRowKey:l,expandedRowKeys:c,lastRenderedRowIndex:u,isDynamic:_,isResetting:a,rowHeights:h,resetAfterIndex:k,onRowExpanded:S,onRowHovered:w,onRowsRendered:C,onRowHeightChange:$}},Vve=(t,{expandedRowKeys:e,lastRenderedRowIndex:n,resetAfterIndex:i})=>{const s=F({}),o=T(()=>{const a={},{data:l,rowKey:c}=t,u=p(e);if(!u||!u.length)return l;const d=[],h=new Set;u.forEach(m=>h.add(m));let f=l.slice();for(f.forEach(m=>a[m[c]]=0);f.length>0;){const m=f.shift();d.push(m),h.has(m[c])&&Array.isArray(m.children)&&m.children.length>0&&(f=[...m.children,...f],m.children.forEach(g=>a[g[c]]=a[m[c]]+1))}return s.value=a,d}),r=T(()=>{const{data:a,expandColumnKey:l}=t;return l?p(o):a});return Ce(r,(a,l)=>{a!==l&&(n.value=-1,i(0,!0))}),{data:r,depthMap:s}},Fve=(t,e)=>t+e,Yv=t=>ze(t)?t.reduce(Fve,0):t,Xu=(t,e,n={})=>ot(t)?t(e):t??n,rc=t=>(["width","maxWidth","minWidth","height"].forEach(e=>{t[e]=mi(t[e])}),t),PD=t=>$n(t)?e=>Ze(t,e):t,Dve=(t,{columnsTotalWidth:e,data:n,fixedColumnsOnLeft:i,fixedColumnsOnRight:s})=>{const o=T(()=>{const{fixed:w,width:S,vScrollbarSize:E}=t,k=S-E;return w?Math.max(Math.round(p(e)),k):k}),r=T(()=>p(o)+(t.fixed?t.vScrollbarSize:0)),a=T(()=>{const{height:w=0,maxHeight:S=0,footerHeight:E,hScrollbarSize:k}=t;if(S>0){const A=p(m),$=p(l),O=p(f)+A+$+k;return Math.min(O,S-E)}return w-E}),l=T(()=>{const{rowHeight:w,estimatedRowHeight:S}=t,E=p(n);return st(S)?E.length*S:E.length*w}),c=T(()=>{const{maxHeight:w}=t,S=p(a);if(st(w)&&w>0)return S;const E=p(l)+p(f)+p(m);return Math.min(S,E)}),u=w=>w.width,d=T(()=>Yv(p(i).map(u))),h=T(()=>Yv(p(s).map(u))),f=T(()=>Yv(t.headerHeight)),m=T(()=>{var w;return(((w=t.fixedData)==null?void 0:w.length)||0)*t.rowHeight}),g=T(()=>p(a)-p(f)-p(m)),y=T(()=>{const{style:w={},height:S,width:E}=t;return rc({...w,height:S,width:E})}),_=T(()=>rc({height:t.footerHeight})),C=T(()=>({top:mi(p(f)),bottom:mi(t.footerHeight),width:mi(t.width)}));return{bodyWidth:o,fixedTableHeight:c,mainTableHeight:a,leftTableWidth:d,rightTableWidth:h,headerWidth:r,rowsHeight:l,windowHeight:g,footerHeight:_,emptyStyle:C,rootStyle:y,headerHeight:f}},Nve=t=>{const e=F(),n=F(0),i=F(0);let s;return ft(()=>{s=ms(e,([o])=>{const{width:r,height:a}=o.contentRect,{paddingLeft:l,paddingRight:c,paddingTop:u,paddingBottom:d}=getComputedStyle(o.target),h=Number.parseInt(l)||0,f=Number.parseInt(c)||0,m=Number.parseInt(u)||0,g=Number.parseInt(d)||0;n.value=r-h-f,i.value=a-m-g}).stop}),Pn(()=>{s==null||s()}),Ce([n,i],([o,r])=>{var a;(a=t.onResize)==null||a.call(t,{width:o,height:r})}),{sizer:e,width:n,height:i}};function Bve(t){const e=F(),n=F(),i=F(),{columns:s,columnsStyles:o,columnsTotalWidth:r,fixedColumnsOnLeft:a,fixedColumnsOnRight:l,hasFixedColumns:c,mainColumns:u,onColumnSorted:d}=Ove(t,On(t,"columns"),On(t,"fixed")),{scrollTo:h,scrollToLeft:f,scrollToTop:m,scrollToRow:g,onScroll:y,onVerticalScroll:_,scrollPos:C}=Pve(t,{mainTableRef:e,leftTableRef:n,rightTableRef:i,onMaybeEndReached:Q}),{expandedRowKeys:w,hoveringRowKey:S,lastRenderedRowIndex:E,isDynamic:k,isResetting:A,rowHeights:$,resetAfterIndex:L,onRowExpanded:O,onRowHeightChange:B,onRowHovered:V,onRowsRendered:P}=Rve(t,{mainTableRef:e,leftTableRef:n,rightTableRef:i,onMaybeEndReached:Q}),{data:z,depthMap:U}=Vve(t,{expandedRowKeys:w,lastRenderedRowIndex:E,resetAfterIndex:L}),{bodyWidth:W,fixedTableHeight:R,mainTableHeight:D,leftTableWidth:N,rightTableWidth:K,headerWidth:ie,rowsHeight:Y,windowHeight:ne,footerHeight:we,emptyStyle:Se,rootStyle:Te,headerHeight:le}=Dve(t,{columnsTotalWidth:r,data:z,fixedColumnsOnLeft:a,fixedColumnsOnRight:l}),oe=yn(!1),de=F(),ve=T(()=>{const se=p(z).length===0;return ze(t.fixedData)?t.fixedData.length===0&&se:se});function He(se){const{estimatedRowHeight:fe,rowHeight:Me,rowKey:Oe}=t;return fe?p($)[p(z)[se][Oe]]||fe:Me}function Q(){const{onEndReached:se}=t;if(!se)return;const{scrollTop:fe}=p(C),Me=p(Y),Oe=p(ne),pe=Me-(fe+Oe)+t.hScrollbarSize;p(E)>=0&&Me===fe+p(D)-p(le)&&se(pe)}return Ce(()=>t.expandedRowKeys,se=>w.value=se,{deep:!0}),{columns:s,containerRef:de,mainTableRef:e,leftTableRef:n,rightTableRef:i,isDynamic:k,isResetting:A,isScrolling:oe,hoveringRowKey:S,hasFixedColumns:c,columnsStyles:o,columnsTotalWidth:r,data:z,expandedRowKeys:w,depthMap:U,fixedColumnsOnLeft:a,fixedColumnsOnRight:l,mainColumns:u,bodyWidth:W,emptyStyle:Se,rootStyle:Te,headerWidth:ie,footerHeight:we,mainTableHeight:D,fixedTableHeight:R,leftTableWidth:N,rightTableWidth:K,showEmpty:ve,getRowHeight:He,onColumnSorted:d,onRowHovered:V,onRowExpanded:O,onRowsRendered:P,onRowHeightChange:B,scrollTo:h,scrollToLeft:f,scrollToTop:m,scrollToRow:g,onScroll:y,onVerticalScroll:_}}const Rk=Symbol("tableV2"),RD=String,fg={type:ae(Array),required:!0},Vk={type:ae(Array)},VD={...Vk,required:!0},zve=String,F$={type:ae(Array),default:()=>Mn([])},gu={type:Number,required:!0},FD={type:ae([String,Number,Symbol]),default:"id"},D$={type:ae(Object)},Au=De({class:String,columns:fg,columnsStyles:{type:ae(Object),required:!0},depth:Number,expandColumnKey:zve,estimatedRowHeight:{...zu.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:ae(Function)},onRowHover:{type:ae(Function)},onRowHeightChange:{type:ae(Function)},rowData:{type:ae(Object),required:!0},rowEventHandlers:{type:ae(Object)},rowIndex:{type:Number,required:!0},rowKey:FD,style:{type:ae(Object)}}),$w={type:Number,required:!0},Fk=De({class:String,columns:fg,fixedHeaderData:{type:ae(Array)},headerData:{type:ae(Array),required:!0},headerHeight:{type:ae([Number,Array]),default:50},rowWidth:$w,rowHeight:{type:Number,default:50},height:$w,width:$w}),Zv=De({columns:fg,data:VD,fixedData:Vk,estimatedRowHeight:Au.estimatedRowHeight,width:gu,height:gu,headerWidth:gu,headerHeight:Fk.headerHeight,bodyWidth:gu,rowHeight:gu,cache:aD.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:zu.scrollbarAlwaysOn,scrollbarStartGap:zu.scrollbarStartGap,scrollbarEndGap:zu.scrollbarEndGap,class:RD,style:D$,containerStyle:D$,getRowHeight:{type:ae(Function),required:!0},rowKey:Au.rowKey,onRowsRendered:{type:ae(Function)},onScroll:{type:ae(Function)}}),Hve=De({cache:Zv.cache,estimatedRowHeight:Au.estimatedRowHeight,rowKey:FD,headerClass:{type:ae([String,Function])},headerProps:{type:ae([Object,Function])},headerCellProps:{type:ae([Object,Function])},headerHeight:Fk.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:ae([String,Function])},rowProps:{type:ae([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:ae([Object,Function])},columns:fg,data:VD,dataGetter:{type:ae(Function)},fixedData:Vk,expandColumnKey:Au.expandColumnKey,expandedRowKeys:F$,defaultExpandedRowKeys:F$,class:RD,fixed:Boolean,style:{type:ae(Object)},width:gu,height:gu,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:zu.hScrollbarSize,vScrollbarSize:zu.vScrollbarSize,scrollbarAlwaysOn:uD.alwaysOn,sortBy:{type:ae(Object),default:()=>({})},sortState:{type:ae(Object),default:void 0},onColumnSort:{type:ae(Function)},onExpandedRowsChange:{type:ae(Function)},onEndReached:{type:ae(Function)},onRowExpand:Au.onRowExpand,onScroll:Zv.onScroll,onRowsRendered:Zv.onRowsRendered,rowEventHandlers:Au.rowEventHandlers}),Dk=(t,{slots:e})=>{var n;const{cellData:i,style:s}=t,o=((n=i==null?void 0:i.toString)==null?void 0:n.call(i))||"";return Z("div",{class:t.class,title:o,style:s},[e.default?e.default(t):o])};Dk.displayName="ElTableV2Cell";Dk.inheritAttrs=!1;const Nk=(t,{slots:e})=>{var n,i;return e.default?e.default(t):Z("div",{class:t.class,title:(n=t.column)==null?void 0:n.title},[(i=t.column)==null?void 0:i.title])};Nk.displayName="ElTableV2HeaderCell";Nk.inheritAttrs=!1;const Uve=De({class:String,columns:fg,columnsStyles:{type:ae(Object),required:!0},headerIndex:Number,style:{type:ae(Object)}}),Wve=J({name:"ElTableV2HeaderRow",props:Uve,setup(t,{slots:e}){return()=>{const{columns:n,columnsStyles:i,headerIndex:s,style:o}=t;let r=n.map((a,l)=>e.cell({columns:n,column:a,columnIndex:l,headerIndex:s,style:i[a.key]}));return e.header&&(r=e.header({cells:r.map(a=>ze(a)&&a.length===1?a[0]:a),columns:n,headerIndex:s})),Z("div",{class:t.class,style:o},[r])}}}),Gve="ElTableV2Header",jve=J({name:Gve,props:Fk,setup(t,{slots:e,expose:n}){const i=_e("table-v2"),s=F(),o=T(()=>rc({width:t.width,height:t.height})),r=T(()=>rc({width:t.rowWidth,height:t.height})),a=T(()=>jp(p(t.headerHeight))),l=d=>{const h=p(s);je(()=>{h!=null&&h.scroll&&h.scroll({left:d})})},c=()=>{const d=i.e("fixed-header-row"),{columns:h,fixedHeaderData:f,rowHeight:m}=t;return f==null?void 0:f.map((g,y)=>{var _;const C=rc({height:m,width:"100%"});return(_=e.fixed)==null?void 0:_.call(e,{class:d,columns:h,rowData:g,rowIndex:-(y+1),style:C})})},u=()=>{const d=i.e("dynamic-header-row"),{columns:h}=t;return p(a).map((f,m)=>{var g;const y=rc({width:"100%",height:f});return(g=e.dynamic)==null?void 0:g.call(e,{class:d,columns:h,headerIndex:m,style:y})})};return n({scrollToLeft:l}),()=>{if(!(t.height<=0))return Z("div",{ref:s,class:t.class,style:p(o)},[Z("div",{style:p(r),class:i.e("header")},[u(),c()])])}}}),qve=t=>{const{isScrolling:e}=qe(Rk),n=F(!1),i=F(),s=T(()=>st(t.estimatedRowHeight)&&t.rowIndex>=0),o=(l=!1)=>{const c=p(i);if(!c)return;const{columns:u,onRowHeightChange:d,rowKey:h,rowIndex:f,style:m}=t,{height:g}=c.getBoundingClientRect();n.value=!0,je(()=>{if(l||g!==Number.parseInt(m.height)){const y=u[0],_=(y==null?void 0:y.placeholderSign)===Hm;d==null||d({rowKey:h,height:g,rowIndex:f},y&&!_&&y.fixed)}})},r=T(()=>{const{rowData:l,rowIndex:c,rowKey:u,onRowHover:d}=t,h=t.rowEventHandlers||{},f={};return Object.entries(h).forEach(([m,g])=>{ot(g)&&(f[m]=y=>{g({event:y,rowData:l,rowIndex:c,rowKey:u})})}),d&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:m,hovered:g})=>{const y=f[m];f[m]=_=>{d({event:_,hovered:g,rowData:l,rowIndex:c,rowKey:u}),y==null||y(_)}}),f}),a=l=>{const{onRowExpand:c,rowData:u,rowIndex:d,rowKey:h}=t;c==null||c({expanded:l,rowData:u,rowIndex:d,rowKey:h})};return ft(()=>{p(s)&&o(!0)}),{isScrolling:e,measurable:s,measured:n,rowRef:i,eventHandlers:r,onExpand:a}},Kve="ElTableV2TableRow",Yve=J({name:Kve,props:Au,setup(t,{expose:e,slots:n,attrs:i}){const{eventHandlers:s,isScrolling:o,measurable:r,measured:a,rowRef:l,onExpand:c}=qve(t);return e({onExpand:c}),()=>{const{columns:u,columnsStyles:d,expandColumnKey:h,depth:f,rowData:m,rowIndex:g,style:y}=t;let _=u.map((C,w)=>{const S=ze(m.children)&&m.children.length>0&&C.key===h;return n.cell({column:C,columns:u,columnIndex:w,depth:f,style:d[C.key],rowData:m,rowIndex:g,isScrolling:p(o),expandIconProps:S?{rowData:m,rowIndex:g,onExpand:c}:void 0})});if(n.row&&(_=n.row({cells:_.map(C=>ze(C)&&C.length===1?C[0]:C),style:y,columns:u,depth:f,rowData:m,rowIndex:g,isScrolling:p(o)})),p(r)){const{height:C,...w}=y||{},S=p(a);return Z("div",kt({ref:l,class:t.class,style:S?y:w},i,p(s)),[_])}return Z("div",kt(i,{ref:l,class:t.class,style:y},p(s)),[_])}}}),Zve=t=>{const{sortOrder:e}=t;return Z(Ge,{size:14,class:t.class},{default:()=>[e===Bm.ASC?Z(wX,null,null):Z(mX,null,null)]})},Xve=t=>{const{expanded:e,expandable:n,onExpand:i,style:s,size:o}=t,r={onClick:n?()=>i(!e):void 0,class:t.class};return Z(Ge,kt(r,{size:o,style:s}),{default:()=>[Z($s,null,null)]})},Qve="ElTableV2Grid",Jve=t=>{const e=F(),n=F(),i=T(()=>{const{data:g,rowHeight:y,estimatedRowHeight:_}=t;if(!_)return g.length*y}),s=T(()=>{const{fixedData:g,rowHeight:y}=t;return((g==null?void 0:g.length)||0)*y}),o=T(()=>Yv(t.headerHeight)),r=T(()=>{const{height:g}=t;return Math.max(0,g-p(o)-p(s))}),a=T(()=>p(o)+p(s)>0),l=({data:g,rowIndex:y})=>g[y][t.rowKey];function c({rowCacheStart:g,rowCacheEnd:y,rowVisibleStart:_,rowVisibleEnd:C}){var w;(w=t.onRowsRendered)==null||w.call(t,{rowCacheStart:g,rowCacheEnd:y,rowVisibleStart:_,rowVisibleEnd:C})}function u(g,y){var _;(_=n.value)==null||_.resetAfterRowIndex(g,y)}function d(g,y){const _=p(e),C=p(n);!_||!C||(Et(g)?(_.scrollToLeft(g.scrollLeft),C.scrollTo(g)):(_.scrollToLeft(g),C.scrollTo({scrollLeft:g,scrollTop:y})))}function h(g){var y;(y=p(n))==null||y.scrollTo({scrollTop:g})}function f(g,y){var _;(_=p(n))==null||_.scrollToItem(g,1,y)}function m(){var g,y;(g=p(n))==null||g.$forceUpdate(),(y=p(e))==null||y.$forceUpdate()}return{bodyRef:n,forceUpdate:m,fixedRowHeight:s,gridHeight:r,hasHeader:a,headerHeight:o,headerRef:e,totalHeight:i,itemKey:l,onItemRendered:c,resetAfterRowIndex:u,scrollTo:d,scrollToTop:h,scrollToRow:f}},Bk=J({name:Qve,props:Zv,setup(t,{slots:e,expose:n}){const{ns:i}=qe(Rk),{bodyRef:s,fixedRowHeight:o,gridHeight:r,hasHeader:a,headerRef:l,headerHeight:c,totalHeight:u,forceUpdate:d,itemKey:h,onItemRendered:f,resetAfterRowIndex:m,scrollTo:g,scrollToTop:y,scrollToRow:_}=Jve(t);n({forceUpdate:d,totalHeight:u,scrollTo:g,scrollToTop:y,scrollToRow:_,resetAfterRowIndex:m});const C=()=>t.bodyWidth;return()=>{const{cache:w,columns:S,data:E,fixedData:k,useIsScrolling:A,scrollbarAlwaysOn:$,scrollbarEndGap:L,scrollbarStartGap:O,style:B,rowHeight:V,bodyWidth:P,estimatedRowHeight:z,headerWidth:U,height:W,width:R,getRowHeight:D,onScroll:N}=t,K=st(z),ie=K?Afe:Ife,Y=p(c);return Z("div",{role:"table",class:[i.e("table"),t.class],style:B},[Z(ie,{ref:s,data:E,useIsScrolling:A,itemKey:h,columnCache:0,columnWidth:K?C:P,totalColumn:1,totalRow:E.length,rowCache:w,rowHeight:K?D:V,width:R,height:p(r),class:i.e("body"),scrollbarStartGap:O,scrollbarEndGap:L,scrollbarAlwaysOn:$,onScroll:N,onItemRendered:f,perfMode:!1},{default:ne=>{var we;const Se=E[ne.rowIndex];return(we=e.row)==null?void 0:we.call(e,{...ne,columns:S,rowData:Se})}}),p(a)&&Z(jve,{ref:l,class:i.e("header-wrapper"),columns:S,headerData:E,headerHeight:t.headerHeight,fixedHeaderData:k,rowWidth:U,rowHeight:V,width:R,height:Math.min(Y+p(o),W)},{dynamic:e.header,fixed:e.row})])}}});function eye(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!$n(t)}const tye=(t,{slots:e})=>{const{mainTableRef:n,...i}=t;return Z(Bk,kt({ref:n},i),eye(e)?e:{default:()=>[e]})};function nye(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!$n(t)}const iye=(t,{slots:e})=>{if(!t.columns.length)return;const{leftTableRef:n,...i}=t;return Z(Bk,kt({ref:n},i),nye(e)?e:{default:()=>[e]})};function sye(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!$n(t)}const oye=(t,{slots:e})=>{if(!t.columns.length)return;const{rightTableRef:n,...i}=t;return Z(Bk,kt({ref:n},i),sye(e)?e:{default:()=>[e]})};function rye(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!$n(t)}const aye=(t,{slots:e})=>{const{columns:n,columnsStyles:i,depthMap:s,expandColumnKey:o,expandedRowKeys:r,estimatedRowHeight:a,hasFixedColumns:l,hoveringRowKey:c,rowData:u,rowIndex:d,style:h,isScrolling:f,rowProps:m,rowClass:g,rowKey:y,rowEventHandlers:_,ns:C,onRowHovered:w,onRowExpanded:S}=t,E=Xu(g,{columns:n,rowData:u,rowIndex:d},""),k=Xu(m,{columns:n,rowData:u,rowIndex:d}),A=u[y],$=s[A]||0,L=Boolean(o),O=d<0,B=[C.e("row"),E,{[C.e(`row-depth-${$}`)]:L&&d>=0,[C.is("expanded")]:L&&r.includes(A),[C.is("hovered")]:!f&&A===c,[C.is("fixed")]:!$&&O,[C.is("customized")]:Boolean(e.row)}],V=l?w:void 0,P={...k,columns:n,columnsStyles:i,class:B,depth:$,expandColumnKey:o,estimatedRowHeight:O?void 0:a,isScrolling:f,rowIndex:d,rowData:u,rowKey:A,rowEventHandlers:_,style:h};return Z(Yve,kt(P,{onRowHover:V,onRowExpand:S}),rye(e)?e:{default:()=>[e]})},cC=({columns:t,column:e,columnIndex:n,depth:i,expandIconProps:s,isScrolling:o,rowData:r,rowIndex:a,style:l,expandedRowKeys:c,ns:u,cellProps:d,expandColumnKey:h,indentSize:f,iconSize:m,rowKey:g},{slots:y})=>{const _=rc(l);if(e.placeholderSign===Hm)return Z("div",{class:u.em("row-cell","placeholder"),style:_},null);const{cellRenderer:C,dataKey:w,dataGetter:S}=e,k=PD(C)||y.default||(W=>Z(Dk,W,null)),A=ot(S)?S({columns:t,column:e,columnIndex:n,rowData:r,rowIndex:a}):xn(r,w??""),$=Xu(d,{cellData:A,columns:t,column:e,columnIndex:n,rowIndex:a,rowData:r}),L={class:u.e("cell-text"),columns:t,column:e,columnIndex:n,cellData:A,isScrolling:o,rowData:r,rowIndex:a},O=k(L),B=[u.e("row-cell"),e.align===zm.CENTER&&u.is("align-center"),e.align===zm.RIGHT&&u.is("align-right")],V=a>=0&&e.key===h,P=a>=0&&c.includes(r[g]);let z;const U=`margin-inline-start: ${i*f}px;`;return V&&(Et(s)?z=Z(Xve,kt(s,{class:[u.e("expand-icon"),u.is("expanded",P)],size:m,expanded:P,style:U,expandable:!0}),null):z=Z("div",{style:[U,`width: ${m}px; height: ${m}px;`].join(" ")},null)),Z("div",kt({class:B,style:_},$),[z,O])};cC.inheritAttrs=!1;function lye(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!$n(t)}const cye=({columns:t,columnsStyles:e,headerIndex:n,style:i,headerClass:s,headerProps:o,ns:r},{slots:a})=>{const l={columns:t,headerIndex:n},c=[r.e("header-row"),Xu(s,l,""),{[r.is("customized")]:Boolean(a.header)}],u={...Xu(o,l),columnsStyles:e,class:c,columns:t,headerIndex:n,style:i};return Z(Wve,u,lye(a)?a:{default:()=>[a]})},N$=(t,{slots:e})=>{const{column:n,ns:i,style:s,onColumnSorted:o}=t,r=rc(s);if(n.placeholderSign===Hm)return Z("div",{class:i.em("header-row-cell","placeholder"),style:r},null);const{headerCellRenderer:a,headerClass:l,sortable:c}=n,u={...t,class:i.e("header-cell-text")},h=(PD(a)||e.default||(S=>Z(Nk,S,null)))(u),{sortBy:f,sortState:m,headerCellProps:g}=t;let y,_;if(m){const S=m[n.key];y=Boolean(lC[S]),_=y?S:Bm.ASC}else y=n.key===f.key,_=y?f.order:Bm.ASC;const C=[i.e("header-cell"),Xu(l,t,""),n.align===zm.CENTER&&i.is("align-center"),n.align===zm.RIGHT&&i.is("align-right"),c&&i.is("sortable")],w={...Xu(g,t),onClick:n.sortable?o:void 0,class:C,style:r,["data-key"]:n.key};return Z("div",w,[h,c&&Z(Zve,{class:[i.e("sort-icon"),y&&i.is("sorting")],sortOrder:_},null)])},DD=(t,{slots:e})=>{var n;return Z("div",{class:t.class,style:t.style},[(n=e.default)==null?void 0:n.call(e)])};DD.displayName="ElTableV2Footer";const ND=(t,{slots:e})=>Z("div",{class:t.class,style:t.style},[e.default?e.default():Z(GF,null,null)]);ND.displayName="ElTableV2Empty";const BD=(t,{slots:e})=>{var n;return Z("div",{class:t.class,style:t.style},[(n=e.default)==null?void 0:n.call(e)])};BD.displayName="ElTableV2Overlay";function Fh(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!$n(t)}const uye="ElTableV2",dye=J({name:uye,props:Hve,setup(t,{slots:e,expose:n}){const i=_e("table-v2"),{columnsStyles:s,fixedColumnsOnLeft:o,fixedColumnsOnRight:r,mainColumns:a,mainTableHeight:l,fixedTableHeight:c,leftTableWidth:u,rightTableWidth:d,data:h,depthMap:f,expandedRowKeys:m,hasFixedColumns:g,hoveringRowKey:y,mainTableRef:_,leftTableRef:C,rightTableRef:w,isDynamic:S,isResetting:E,isScrolling:k,bodyWidth:A,emptyStyle:$,rootStyle:L,headerWidth:O,footerHeight:B,showEmpty:V,scrollTo:P,scrollToLeft:z,scrollToTop:U,scrollToRow:W,getRowHeight:R,onColumnSorted:D,onRowHeightChange:N,onRowHovered:K,onRowExpanded:ie,onRowsRendered:Y,onScroll:ne,onVerticalScroll:we}=Bve(t);return n({scrollTo:P,scrollToLeft:z,scrollToTop:U,scrollToRow:W}),xt(Rk,{ns:i,isResetting:E,hoveringRowKey:y,isScrolling:k}),()=>{const{cache:Se,cellProps:Te,estimatedRowHeight:le,expandColumnKey:oe,fixedData:de,headerHeight:ve,headerClass:He,headerProps:Q,headerCellProps:se,sortBy:fe,sortState:Me,rowHeight:Oe,rowClass:pe,rowEventHandlers:Le,rowKey:be,rowProps:Pe,scrollbarAlwaysOn:Ee,indentSize:he,iconSize:Ne,useIsScrolling:Be,vScrollbarSize:Qe,width:ut}=t,bt=p(h),it={cache:Se,class:i.e("main"),columns:p(a),data:bt,fixedData:de,estimatedRowHeight:le,bodyWidth:p(A),headerHeight:ve,headerWidth:p(O),height:p(l),mainTableRef:_,rowKey:be,rowHeight:Oe,scrollbarAlwaysOn:Ee,scrollbarStartGap:2,scrollbarEndGap:Qe,useIsScrolling:Be,width:ut,getRowHeight:R,onRowsRendered:Y,onScroll:ne},X=p(u),ue=p(c),$e={cache:Se,class:i.e("left"),columns:p(o),data:bt,estimatedRowHeight:le,leftTableRef:C,rowHeight:Oe,bodyWidth:X,headerWidth:X,headerHeight:ve,height:ue,rowKey:be,scrollbarAlwaysOn:Ee,scrollbarStartGap:2,scrollbarEndGap:Qe,useIsScrolling:Be,width:X,getRowHeight:R,onScroll:we},te=p(d)+Qe,ye={cache:Se,class:i.e("right"),columns:p(r),data:bt,estimatedRowHeight:le,rightTableRef:w,rowHeight:Oe,bodyWidth:te,headerWidth:te,headerHeight:ve,height:ue,rowKey:be,scrollbarAlwaysOn:Ee,scrollbarStartGap:2,scrollbarEndGap:Qe,width:te,style:`--${p(i.namespace)}-table-scrollbar-size: ${Qe}px`,useIsScrolling:Be,getRowHeight:R,onScroll:we},Ie=p(s),Ct={ns:i,depthMap:p(f),columnsStyles:Ie,expandColumnKey:oe,expandedRowKeys:p(m),estimatedRowHeight:le,hasFixedColumns:p(g),hoveringRowKey:p(y),rowProps:Pe,rowClass:pe,rowKey:be,rowEventHandlers:Le,onRowHovered:K,onRowExpanded:ie,onRowHeightChange:N},an={cellProps:Te,expandColumnKey:oe,indentSize:he,iconSize:Ne,rowKey:be,expandedRowKeys:p(m),ns:i},pi={ns:i,headerClass:He,headerProps:Q,columnsStyles:Ie},Pi={ns:i,sortBy:fe,sortState:Me,headerCellProps:se,onColumnSorted:D},un={row:Je=>Z(aye,kt(Je,Ct),{row:e.row,cell:$t=>{let tn;return e.cell?Z(cC,kt($t,an,{style:Ie[$t.column.key]}),Fh(tn=e.cell($t))?tn:{default:()=>[tn]}):Z(cC,kt($t,an,{style:Ie[$t.column.key]}),null)}}),header:Je=>Z(cye,kt(Je,pi),{header:e.header,cell:$t=>{let tn;return e["header-cell"]?Z(N$,kt($t,Pi,{style:Ie[$t.column.key]}),Fh(tn=e["header-cell"]($t))?tn:{default:()=>[tn]}):Z(N$,kt($t,Pi,{style:Ie[$t.column.key]}),null)}})},jt=[t.class,i.b(),i.e("root"),{[i.is("dynamic")]:p(S)}],xe={class:i.e("footer"),style:p(B)};return Z("div",{class:jt,style:p(L)},[Z(tye,it,Fh(un)?un:{default:()=>[un]}),Z(iye,$e,Fh(un)?un:{default:()=>[un]}),Z(oye,ye,Fh(un)?un:{default:()=>[un]}),e.footer&&Z(DD,xe,{default:e.footer}),p(V)&&Z(ND,{class:i.e("empty"),style:p($)},{default:e.empty}),e.overlay&&Z(BD,{class:i.e("overlay")},{default:e.overlay})])}}}),pye=De({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:ae(Function)}}),hye=J({name:"ElAutoResizer",props:pye,setup(t,{slots:e}){const n=_e("auto-resizer"),{height:i,width:s,sizer:o}=Nve(t),r={width:"100%",height:"100%"};return()=>{var a;return Z("div",{ref:o,class:n.b(),style:r},[(a=e.default)==null?void 0:a.call(e,{height:i.value,width:s.value})])}}}),fye=yt(dye),mye=yt(hye),gye=De({tabs:{type:ae(Array),default:()=>Mn([])}}),zD="ElTabBar",vye=J({name:zD}),yye=J({...vye,props:gye,setup(t,{expose:e}){const n=t,i=vt(),s=qe(p_);s||ki(zD,"<el-tabs><el-tab-bar /></el-tabs>");const o=_e("tabs"),r=F(),a=F(),l=()=>{let u=0,d=0;const h=["top","bottom"].includes(s.props.tabPosition)?"width":"height",f=h==="width"?"x":"y",m=f==="x"?"left":"top";return n.tabs.every(g=>{var y,_;const C=(_=(y=i.parent)==null?void 0:y.refs)==null?void 0:_[`tab-${g.uid}`];if(!C)return!1;if(!g.active)return!0;u=C[`offset${Ur(m)}`],d=C[`client${Ur(h)}`];const w=window.getComputedStyle(C);return h==="width"&&(n.tabs.length>1&&(d-=Number.parseFloat(w.paddingLeft)+Number.parseFloat(w.paddingRight)),u+=Number.parseFloat(w.paddingLeft)),!1}),{[h]:`${d}px`,transform:`translate${Ur(f)}(${u}px)`}},c=()=>a.value=l();return Ce(()=>n.tabs,async()=>{await je(),c()},{immediate:!0}),ms(r,()=>c()),e({ref:r,update:c}),(u,d)=>(I(),H("div",{ref_key:"barRef",ref:r,class:x([p(o).e("active-bar"),p(o).is(p(s).props.tabPosition)]),style:Ke(a.value)},null,6))}});var bye=Ve(yye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const _ye=De({panes:{type:ae(Array),default:()=>Mn([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),wye={tabClick:(t,e,n)=>n instanceof Event,tabRemove:(t,e)=>e instanceof Event},B$="ElTabNav",Cye=J({name:B$,props:_ye,emits:wye,setup(t,{expose:e,emit:n}){const i=vt(),s=qe(p_);s||ki(B$,"<el-tabs><tab-nav /></el-tabs>");const o=_e("tabs"),r=_q(),a=$q(),l=F(),c=F(),u=F(),d=F(!1),h=F(0),f=F(!1),m=F(!0),g=T(()=>["top","bottom"].includes(s.props.tabPosition)?"width":"height"),y=T(()=>({transform:`translate${g.value==="width"?"X":"Y"}(-${h.value}px)`})),_=()=>{if(!l.value)return;const $=l.value[`offset${Ur(g.value)}`],L=h.value;if(!L)return;const O=L>$?L-$:0;h.value=O},C=()=>{if(!l.value||!c.value)return;const $=c.value[`offset${Ur(g.value)}`],L=l.value[`offset${Ur(g.value)}`],O=h.value;if($-O<=L)return;const B=$-O>L*2?O+L:$-L;h.value=B},w=async()=>{const $=c.value;if(!d.value||!u.value||!l.value||!$)return;await je();const L=u.value.querySelector(".is-active");if(!L)return;const O=l.value,B=["top","bottom"].includes(s.props.tabPosition),V=L.getBoundingClientRect(),P=O.getBoundingClientRect(),z=B?$.offsetWidth-P.width:$.offsetHeight-P.height,U=h.value;let W=U;B?(V.left<P.left&&(W=U-(P.left-V.left)),V.right>P.right&&(W=U+V.right-P.right)):(V.top<P.top&&(W=U-(P.top-V.top)),V.bottom>P.bottom&&(W=U+(V.bottom-P.bottom))),W=Math.max(W,0),h.value=Math.min(W,z)},S=()=>{if(!c.value||!l.value)return;const $=c.value[`offset${Ur(g.value)}`],L=l.value[`offset${Ur(g.value)}`],O=h.value;if(L<$){const B=h.value;d.value=d.value||{},d.value.prev=B,d.value.next=B+L<$,$-B<L&&(h.value=$-L)}else d.value=!1,O>0&&(h.value=0)},E=$=>{const L=$.code,{up:O,down:B,left:V,right:P}=Xe;if(![O,B,V,P].includes(L))return;const z=Array.from($.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),U=z.indexOf($.target);let W;L===V||L===O?U===0?W=z.length-1:W=U-1:U<z.length-1?W=U+1:W=0,z[W].focus({preventScroll:!0}),z[W].click(),k()},k=()=>{m.value&&(f.value=!0)},A=()=>f.value=!1;return Ce(r,$=>{$==="hidden"?m.value=!1:$==="visible"&&setTimeout(()=>m.value=!0,50)}),Ce(a,$=>{$?setTimeout(()=>m.value=!0,50):m.value=!1}),ms(u,S),ft(()=>setTimeout(()=>w(),0)),ll(()=>S()),e({scrollToActiveTab:w,removeFocus:A}),Ce(()=>t.panes,()=>i.update(),{flush:"post"}),()=>{const $=d.value?[Z("span",{class:[o.e("nav-prev"),o.is("disabled",!d.value.prev)],onClick:_},[Z(Ge,null,{default:()=>[Z(Cc,null,null)]})]),Z("span",{class:[o.e("nav-next"),o.is("disabled",!d.value.next)],onClick:C},[Z(Ge,null,{default:()=>[Z($s,null,null)]})])]:null,L=t.panes.map((O,B)=>{var V,P,z,U;const W=O.uid,R=O.props.disabled,D=(P=(V=O.props.name)!=null?V:O.index)!=null?P:`${B}`,N=!R&&(O.isClosable||t.editable);O.index=`${B}`;const K=N?Z(Ge,{class:"is-icon-close",onClick:ne=>n("tabRemove",O,ne)},{default:()=>[Z(vr,null,null)]}):null,ie=((U=(z=O.slots).label)==null?void 0:U.call(z))||O.props.label,Y=!R&&O.active?0:-1;return Z("div",{ref:`tab-${W}`,class:[o.e("item"),o.is(s.props.tabPosition),o.is("active",O.active),o.is("disabled",R),o.is("closable",N),o.is("focus",f.value)],id:`tab-${D}`,key:`tab-${W}`,"aria-controls":`pane-${D}`,role:"tab","aria-selected":O.active,tabindex:Y,onFocus:()=>k(),onBlur:()=>A(),onClick:ne=>{A(),n("tabClick",O,D,ne)},onKeydown:ne=>{N&&(ne.code===Xe.delete||ne.code===Xe.backspace)&&n("tabRemove",O,ne)}},[ie,K])});return Z("div",{ref:u,class:[o.e("nav-wrap"),o.is("scrollable",!!d.value),o.is(s.props.tabPosition)]},[$,Z("div",{class:o.e("nav-scroll"),ref:l},[Z("div",{class:[o.e("nav"),o.is(s.props.tabPosition),o.is("stretch",t.stretch&&["top","bottom"].includes(s.props.tabPosition))],ref:c,style:y.value,role:"tablist",onKeydown:E},[t.type?null:Z(bye,{tabs:[...t.panes]},null),L])])])}}}),Sye=De({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:ae(Function),default:()=>!0},stretch:Boolean}),Aw=t=>at(t)||st(t),Eye={[wt]:t=>Aw(t),tabClick:(t,e)=>e instanceof Event,tabChange:t=>Aw(t),edit:(t,e)=>["remove","add"].includes(e),tabRemove:t=>Aw(t),tabAdd:()=>!0};var kye=J({name:"ElTabs",props:Sye,emits:Eye,setup(t,{emit:e,slots:n,expose:i}){var s,o;const r=_e("tabs"),{children:a,addChild:l,removeChild:c}=SV(vt(),"ElTabPane"),u=F(),d=F((o=(s=t.modelValue)!=null?s:t.activeName)!=null?o:"0"),h=_=>{d.value=_,e(wt,_),e("tabChange",_)},f=async _=>{var C,w,S;if(!(d.value===_||Ui(_)))try{await((C=t.beforeLeave)==null?void 0:C.call(t,_,d.value))!==!1&&(h(_),(S=(w=u.value)==null?void 0:w.removeFocus)==null||S.call(w))}catch{}},m=(_,C,w)=>{_.props.disabled||(f(C),e("tabClick",_,w))},g=(_,C)=>{_.props.disabled||Ui(_.props.name)||(C.stopPropagation(),e("edit",_.props.name,"remove"),e("tabRemove",_.props.name))},y=()=>{e("edit",void 0,"add"),e("tabAdd")};return Xa({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},T(()=>!!t.activeName)),Ce(()=>t.activeName,_=>f(_)),Ce(()=>t.modelValue,_=>f(_)),Ce(d,async()=>{var _;await je(),(_=u.value)==null||_.scrollToActiveTab()}),xt(p_,{props:t,currentName:d,registerPane:l,unregisterPane:c}),i({currentName:d}),()=>{const _=t.editable||t.addable?Z("span",{class:r.e("new-tab"),tabindex:"0",onClick:y,onKeydown:S=>{S.code===Xe.enter&&y()}},[Z(Ge,{class:r.is("icon-plus")},{default:()=>[Z(TR,null,null)]})]):null,C=Z("div",{class:[r.e("header"),r.is(t.tabPosition)]},[_,Z(Cye,{ref:u,currentName:d.value,editable:t.editable,type:t.type,panes:a.value,stretch:t.stretch,onTabClick:m,onTabRemove:g},null)]),w=Z("div",{class:r.e("content")},[me(n,"default")]);return Z("div",{class:[r.b(),r.m(t.tabPosition),{[r.m("card")]:t.type==="card",[r.m("border-card")]:t.type==="border-card"}]},[...t.tabPosition!=="bottom"?[C,w]:[w,C]])}}});const Tye=De({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),Iye=["id","aria-hidden","aria-labelledby"],HD="ElTabPane",xye=J({name:HD}),Mye=J({...xye,props:Tye,setup(t){const e=t,n=vt(),i=Ki(),s=qe(p_);s||ki(HD,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const o=_e("tab-pane"),r=F(),a=T(()=>e.closable||s.props.closable),l=Zx(()=>{var f;return s.currentName.value===((f=e.name)!=null?f:r.value)}),c=F(l.value),u=T(()=>{var f;return(f=e.name)!=null?f:r.value}),d=Zx(()=>!e.lazy||c.value||l.value);Ce(l,f=>{f&&(c.value=!0)});const h=Yt({uid:n.uid,slots:i,props:e,paneName:u,active:l,index:r,isClosable:a});return ft(()=>{s.registerPane(h)}),Mc(()=>{s.unregisterPane(h.uid)}),(f,m)=>p(d)?ct((I(),H("div",{key:0,id:`pane-${p(u)}`,class:x(p(o).b()),role:"tabpanel","aria-hidden":!p(l),"aria-labelledby":`tab-${p(u)}`},[me(f.$slots,"default")],10,Iye)),[[Vt,p(l)]]):re("v-if",!0)}});var UD=Ve(Mye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const $ye=yt(kye,{TabPane:UD}),Aye=Nn(UD),Lye=De({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:String,default:"light"},clearable:{type:Boolean,default:!0},size:Vs,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,name:String,prefixIcon:{type:ae([String,Object]),default:()=>kR},clearIcon:{type:ae([String,Object]),default:()=>Ac}}),za=t=>{const e=(t||"").split(":");if(e.length>=2){let n=Number.parseInt(e[0],10);const i=Number.parseInt(e[1],10),s=t.toUpperCase();return s.includes("AM")&&n===12?n=0:s.includes("PM")&&n!==12&&(n+=12),{hours:n,minutes:i}}return null},Lw=(t,e)=>{const n=za(t);if(!n)return-1;const i=za(e);if(!i)return-1;const s=n.minutes+n.hours*60,o=i.minutes+i.hours*60;return s===o?0:s>o?1:-1},z$=t=>`${t}`.padStart(2,"0"),xd=t=>`${z$(t.hours)}:${z$(t.minutes)}`,Oye=(t,e)=>{const n=za(t);if(!n)return"";const i=za(e);if(!i)return"";const s={hours:n.hours,minutes:n.minutes};return s.minutes+=i.minutes,s.hours+=i.hours,s.hours+=Math.floor(s.minutes/60),s.minutes=s.minutes%60,xd(s)},Pye=J({name:"ElTimeSelect"}),Rye=J({...Pye,props:Lye,emits:["change","blur","focus","update:modelValue"],setup(t,{expose:e}){const n=t;mt.extend(mk);const{Option:i}=Zu,s=_e("input"),o=F(),r=eo(),a=T(()=>n.modelValue),l=T(()=>{const y=za(n.start);return y?xd(y):null}),c=T(()=>{const y=za(n.end);return y?xd(y):null}),u=T(()=>{const y=za(n.step);return y?xd(y):null}),d=T(()=>{const y=za(n.minTime||"");return y?xd(y):null}),h=T(()=>{const y=za(n.maxTime||"");return y?xd(y):null}),f=T(()=>{const y=[];if(n.start&&n.end&&n.step){let _=l.value,C;for(;_&&c.value&&Lw(_,c.value)<=0;)C=mt(_,"HH:mm").format(n.format),y.push({value:C,disabled:Lw(_,d.value||"-1:-1")<=0||Lw(_,h.value||"100:100")>=0}),_=Oye(_,u.value)}return y});return e({blur:()=>{var y,_;(_=(y=o.value)==null?void 0:y.blur)==null||_.call(y)},focus:()=>{var y,_;(_=(y=o.value)==null?void 0:y.focus)==null||_.call(y)}}),(y,_)=>(I(),ce(p(Zu),{ref_key:"select",ref:o,"model-value":p(a),disabled:p(r),clearable:y.clearable,"clear-icon":y.clearIcon,size:y.size,effect:y.effect,placeholder:y.placeholder,"default-first-option":"",filterable:y.editable,"onUpdate:modelValue":_[0]||(_[0]=C=>y.$emit("update:modelValue",C)),onChange:_[1]||(_[1]=C=>y.$emit("change",C)),onBlur:_[2]||(_[2]=C=>y.$emit("blur",C)),onFocus:_[3]||(_[3]=C=>y.$emit("focus",C))},{prefix:ee(()=>[y.prefixIcon?(I(),ce(p(Ge),{key:0,class:x(p(s).e("prefix-icon"))},{default:ee(()=>[(I(),ce(It(y.prefixIcon)))]),_:1},8,["class"])):re("v-if",!0)]),default:ee(()=>[(I(!0),H(Ye,null,Ot(p(f),C=>(I(),ce(p(i),{key:C.value,label:C.value,value:C.value,disabled:C.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable"]))}});var Xv=Ve(Rye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-select/src/time-select.vue"]]);Xv.install=t=>{t.component(Xv.name,Xv)};const Vye=Xv,Fye=Vye,Dye=J({name:"ElTimeline",setup(t,{slots:e}){const n=_e("timeline");return xt("timeline",e),()=>Ze("ul",{class:[n.b()]},[me(e,"default")])}}),Nye=De({timestamp:{type:String,default:""},hideTimestamp:{type:Boolean,default:!1},center:{type:Boolean,default:!1},placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:gn},hollow:{type:Boolean,default:!1}}),Bye=J({name:"ElTimelineItem"}),zye=J({...Bye,props:Nye,setup(t){const e=_e("timeline-item");return(n,i)=>(I(),H("li",{class:x([p(e).b(),{[p(e).e("center")]:n.center}])},[G("div",{class:x(p(e).e("tail"))},null,2),n.$slots.dot?re("v-if",!0):(I(),H("div",{key:0,class:x([p(e).e("node"),p(e).em("node",n.size||""),p(e).em("node",n.type||""),p(e).is("hollow",n.hollow)]),style:Ke({backgroundColor:n.color})},[n.icon?(I(),ce(p(Ge),{key:0,class:x(p(e).e("icon"))},{default:ee(()=>[(I(),ce(It(n.icon)))]),_:1},8,["class"])):re("v-if",!0)],6)),n.$slots.dot?(I(),H("div",{key:1,class:x(p(e).e("dot"))},[me(n.$slots,"dot")],2)):re("v-if",!0),G("div",{class:x(p(e).e("wrapper"))},[!n.hideTimestamp&&n.placement==="top"?(I(),H("div",{key:0,class:x([p(e).e("timestamp"),p(e).is("top")])},Re(n.timestamp),3)):re("v-if",!0),G("div",{class:x(p(e).e("content"))},[me(n.$slots,"default")],2),!n.hideTimestamp&&n.placement==="bottom"?(I(),H("div",{key:1,class:x([p(e).e("timestamp"),p(e).is("bottom")])},Re(n.timestamp),3)):re("v-if",!0)],2)],2))}});var WD=Ve(zye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/timeline/src/timeline-item.vue"]]);const Hye=yt(Dye,{TimelineItem:WD}),Uye=Nn(WD),GD=De({nowrap:Boolean});var jD=(t=>(t.top="top",t.bottom="bottom",t.left="left",t.right="right",t))(jD||{});const Wye=Object.values(jD),zk=De({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:ae(Object),default:null}}),Gye=De({side:{type:ae(String),values:Wye,required:!0}}),jye=["absolute","fixed"],qye=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],Hk=De({ariaLabel:String,arrowPadding:{type:ae(Number),default:5},effect:{type:String,default:""},contentClass:String,placement:{type:ae(String),values:qye,default:"bottom"},reference:{type:ae(Object),default:null},offset:{type:Number,default:8},strategy:{type:ae(String),values:jye,default:"absolute"},showArrow:{type:Boolean,default:!1}}),Uk=De({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:ae(Function)},"onUpdate:open":{type:ae(Function)}}),dd={type:ae(Function)},Wk=De({onBlur:dd,onClick:dd,onFocus:dd,onMouseDown:dd,onMouseEnter:dd,onMouseLeave:dd}),Kye=De({...Uk,...zk,...Wk,...Hk,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:ae(Object),default:null},teleported:Boolean,to:{type:ae(String),default:"body"}}),Yye=J({name:"ElTooltipV2Root"}),Zye=J({...Yye,props:Uk,setup(t,{expose:e}){const n=t,i=F(n.defaultOpen),s=F(null),o=T({get:()=>Pq(n.open)?i.value:n.open,set:y=>{var _;i.value=y,(_=n["onUpdate:open"])==null||_.call(n,y)}}),r=T(()=>st(n.delayDuration)&&n.delayDuration>0),{start:a,stop:l}=Yu(()=>{o.value=!0},T(()=>n.delayDuration),{immediate:!1}),c=_e("tooltip-v2"),u=yr(),d=()=>{l(),o.value=!0},h=()=>{p(r)?a():d()},f=d,m=()=>{l(),o.value=!1};return Ce(o,y=>{var _;y&&(document.dispatchEvent(new CustomEvent(pw)),f()),(_=n.onOpenChange)==null||_.call(n,y)}),ft(()=>{document.addEventListener(pw,m)}),Pn(()=>{l(),document.removeEventListener(pw,m)}),xt(f_,{contentId:u,triggerRef:s,ns:c,onClose:m,onDelayOpen:h,onOpen:f}),e({onOpen:f,onClose:m}),(y,_)=>me(y.$slots,"default",{open:p(o)})}});var Xye=Ve(Zye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/root.vue"]]);const Qye=J({name:"ElTooltipV2Arrow"}),Jye=J({...Qye,props:{...zk,...Gye},setup(t){const e=t,{ns:n}=qe(f_),{arrowRef:i}=qe(jR),s=T(()=>{const{style:o,width:r,height:a}=e,l=n.namespace.value;return{[`--${l}-tooltip-v2-arrow-width`]:`${r}px`,[`--${l}-tooltip-v2-arrow-height`]:`${a}px`,[`--${l}-tooltip-v2-arrow-border-width`]:`${r/2}px`,[`--${l}-tooltip-v2-arrow-cover-width`]:r/2-1,...o||{}}});return(o,r)=>(I(),H("span",{ref_key:"arrowRef",ref:i,style:Ke(p(s)),class:x(p(n).e("arrow"))},null,6))}});var H$=Ve(Jye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/arrow.vue"]]);const ebe=De({style:{type:ae([String,Object,Array]),default:()=>({})}}),tbe=J({name:"ElVisuallyHidden"}),nbe=J({...tbe,props:ebe,setup(t){const e=t,n=T(()=>[e.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(i,s)=>(I(),H("span",kt(i.$attrs,{style:p(n)}),[me(i.$slots,"default")],16))}});var ibe=Ve(nbe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/visual-hidden/src/visual-hidden.vue"]]);const sbe=["data-side"],obe=J({name:"ElTooltipV2Content"}),rbe=J({...obe,props:{...Hk,...GD},setup(t){const e=t,{triggerRef:n,contentId:i}=qe(f_),s=F(e.placement),o=F(e.strategy),r=F(null),{referenceRef:a,contentRef:l,middlewareData:c,x:u,y:d,update:h}=aee({placement:s,strategy:o,middleware:T(()=>{const w=[qJ(e.offset)];return e.showArrow&&w.push(lee({arrowRef:r})),w})}),f=hl().nextZIndex(),m=_e("tooltip-v2"),g=T(()=>s.value.split("-")[0]),y=T(()=>({position:p(o),top:`${p(d)||0}px`,left:`${p(u)||0}px`,zIndex:f})),_=T(()=>{if(!e.showArrow)return{};const{arrow:w}=p(c);return{[`--${m.namespace.value}-tooltip-v2-arrow-x`]:`${w==null?void 0:w.x}px`||"",[`--${m.namespace.value}-tooltip-v2-arrow-y`]:`${w==null?void 0:w.y}px`||""}}),C=T(()=>[m.e("content"),m.is("dark",e.effect==="dark"),m.is(p(o)),e.contentClass]);return Ce(r,()=>h()),Ce(()=>e.placement,w=>s.value=w),ft(()=>{Ce(()=>e.reference||n.value,w=>{a.value=w||void 0},{immediate:!0})}),xt(jR,{arrowRef:r}),(w,S)=>(I(),H("div",{ref_key:"contentRef",ref:l,style:Ke(p(y)),"data-tooltip-v2-root":""},[w.nowrap?re("v-if",!0):(I(),H("div",{key:0,"data-side":p(g),class:x(p(C))},[me(w.$slots,"default",{contentStyle:p(y),contentClass:p(C)}),Z(p(ibe),{id:p(i),role:"tooltip"},{default:ee(()=>[w.ariaLabel?(I(),H(Ye,{key:0},[Ut(Re(w.ariaLabel),1)],64)):me(w.$slots,"default",{key:1})]),_:3},8,["id"]),me(w.$slots,"arrow",{style:Ke(p(_)),side:p(g)})],10,sbe))],4))}});var U$=Ve(rbe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/content.vue"]]);const abe=De({setRef:{type:ae(Function),required:!0},onlyChild:Boolean});var lbe=J({props:abe,setup(t,{slots:e}){const n=F(),i=l_(n,s=>{s?t.setRef(s.nextElementSibling):t.setRef(null)});return()=>{var s;const[o]=((s=e.default)==null?void 0:s.call(e))||[],r=t.onlyChild?fQ(o.children):o.children;return Z(Ye,{ref:i},[r])}}});const cbe=J({name:"ElTooltipV2Trigger"}),ube=J({...cbe,props:{...GD,...Wk},setup(t){const e=t,{onClose:n,onOpen:i,onDelayOpen:s,triggerRef:o,contentId:r}=qe(f_);let a=!1;const l=C=>{o.value=C},c=()=>{a=!1},u=Fn(e.onMouseEnter,s),d=Fn(e.onMouseLeave,n),h=Fn(e.onMouseDown,()=>{n(),a=!0,document.addEventListener("mouseup",c,{once:!0})}),f=Fn(e.onFocus,()=>{a||i()}),m=Fn(e.onBlur,n),g=Fn(e.onClick,C=>{C.detail===0&&n()}),y={blur:m,click:g,focus:f,mousedown:h,mouseenter:u,mouseleave:d},_=(C,w,S)=>{C&&Object.entries(w).forEach(([E,k])=>{C[S](E,k)})};return Ce(o,(C,w)=>{_(C,y,"addEventListener"),_(w,y,"removeEventListener"),C&&C.setAttribute("aria-describedby",r.value)}),Pn(()=>{_(o.value,y,"removeEventListener"),document.removeEventListener("mouseup",c)}),(C,w)=>C.nowrap?(I(),ce(p(lbe),{key:0,"set-ref":l,"only-child":""},{default:ee(()=>[me(C.$slots,"default")]),_:3})):(I(),H("button",kt({key:1,ref_key:"triggerRef",ref:o},C.$attrs),[me(C.$slots,"default")],16))}});var dbe=Ve(ube,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/trigger.vue"]]);const pbe=J({name:"ElTooltipV2"}),hbe=J({...pbe,props:Kye,setup(t){const n=Ei(t),i=Yt(Ua(n,Object.keys(zk))),s=Yt(Ua(n,Object.keys(Hk))),o=Yt(Ua(n,Object.keys(Uk))),r=Yt(Ua(n,Object.keys(Wk)));return(a,l)=>(I(),ce(Xye,or(Zb(o)),{default:ee(({open:c})=>[Z(dbe,kt(r,{nowrap:""}),{default:ee(()=>[me(a.$slots,"trigger")]),_:3},16),(I(),ce(tg,{to:a.to,disabled:!a.teleported},[a.fullTransition?(I(),ce(oi,or(kt({key:0},a.transitionProps)),{default:ee(()=>[a.alwaysOn||c?(I(),ce(U$,or(kt({key:0},s)),{arrow:ee(({style:u,side:d})=>[a.showArrow?(I(),ce(H$,kt({key:0},i,{style:u,side:d}),null,16,["style","side"])):re("v-if",!0)]),default:ee(()=>[me(a.$slots,"default")]),_:3},16)):re("v-if",!0)]),_:2},1040)):(I(),H(Ye,{key:1},[a.alwaysOn||c?(I(),ce(U$,or(kt({key:0},s)),{arrow:ee(({style:u,side:d})=>[a.showArrow?(I(),ce(H$,kt({key:0},i,{style:u,side:d}),null,16,["style","side"])):re("v-if",!0)]),default:ee(()=>[me(a.$slots,"default")]),_:3},16)):re("v-if",!0)],64))],8,["to","disabled"]))]),_:3},16))}});var fbe=Ve(hbe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/tooltip.vue"]]);const mbe=yt(fbe),qD="left-check-change",KD="right-check-change",Md=De({data:{type:ae(Array),default:()=>[]},titles:{type:ae(Array),default:()=>[]},buttonTexts:{type:ae(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:ae(Function)},leftDefaultChecked:{type:ae(Array),default:()=>[]},rightDefaultChecked:{type:ae(Array),default:()=>[]},renderContent:{type:ae(Function)},modelValue:{type:ae(Array),default:()=>[]},format:{type:ae(Object),default:()=>({})},filterable:Boolean,props:{type:ae(Object),default:()=>Mn({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),uC=(t,e)=>[t,e].every(ze)||ze(t)&&Gi(e),gbe={[bn]:(t,e,n)=>[t,n].every(ze)&&["left","right"].includes(e),[wt]:t=>ze(t),[qD]:uC,[KD]:uC},dC="checked-change",vbe=De({data:Md.data,optionRender:{type:ae(Function)},placeholder:String,title:String,filterable:Boolean,format:Md.format,filterMethod:Md.filterMethod,defaultChecked:Md.leftDefaultChecked,props:Md.props}),ybe={[dC]:uC},mg=t=>{const e={label:"label",key:"key",disabled:"disabled"};return T(()=>({...e,...t.props}))},bbe=(t,e,n)=>{const i=mg(t),s=T(()=>t.data.filter(u=>ot(t.filterMethod)?t.filterMethod(e.query,u):String(u[i.value.label]||u[i.value.key]).toLowerCase().includes(e.query.toLowerCase()))),o=T(()=>s.value.filter(u=>!u[i.value.disabled])),r=T(()=>{const u=e.checked.length,d=t.data.length,{noChecked:h,hasChecked:f}=t.format;return h&&f?u>0?f.replace(/\${checked}/g,u.toString()).replace(/\${total}/g,d.toString()):h.replace(/\${total}/g,d.toString()):`${u}/${d}`}),a=T(()=>{const u=e.checked.length;return u>0&&u<o.value.length}),l=()=>{const u=o.value.map(d=>d[i.value.key]);e.allChecked=u.length>0&&u.every(d=>e.checked.includes(d))},c=u=>{e.checked=u?o.value.map(d=>d[i.value.key]):[]};return Ce(()=>e.checked,(u,d)=>{if(l(),e.checkChangeByUser){const h=u.concat(d).filter(f=>!u.includes(f)||!d.includes(f));n(dC,u,h)}else n(dC,u),e.checkChangeByUser=!0}),Ce(o,()=>{l()}),Ce(()=>t.data,()=>{const u=[],d=s.value.map(h=>h[i.value.key]);e.checked.forEach(h=>{d.includes(h)&&u.push(h)}),e.checkChangeByUser=!1,e.checked=u}),Ce(()=>t.defaultChecked,(u,d)=>{if(d&&u.length===d.length&&u.every(m=>d.includes(m)))return;const h=[],f=o.value.map(m=>m[i.value.key]);u.forEach(m=>{f.includes(m)&&h.push(m)}),e.checkChangeByUser=!1,e.checked=h},{immediate:!0}),{filteredData:s,checkableData:o,checkedSummary:r,isIndeterminate:a,updateAllChecked:l,handleAllCheckedChange:c}},_be=(t,e)=>({onSourceCheckedChange:(s,o)=>{t.leftChecked=s,o&&e(qD,s,o)},onTargetCheckedChange:(s,o)=>{t.rightChecked=s,o&&e(KD,s,o)}}),wbe=t=>{const e=mg(t),n=T(()=>t.data.reduce((o,r)=>(o[r[e.value.key]]=r)&&o,{})),i=T(()=>t.data.filter(o=>!t.modelValue.includes(o[e.value.key]))),s=T(()=>t.targetOrder==="original"?t.data.filter(o=>t.modelValue.includes(o[e.value.key])):t.modelValue.reduce((o,r)=>{const a=n.value[r];return a&&o.push(a),o},[]));return{sourceData:i,targetData:s}},Cbe=(t,e,n)=>{const i=mg(t),s=(a,l,c)=>{n(wt,a),n(bn,a,l,c)};return{addToLeft:()=>{const a=t.modelValue.slice();e.rightChecked.forEach(l=>{const c=a.indexOf(l);c>-1&&a.splice(c,1)}),s(a,"left",e.rightChecked)},addToRight:()=>{let a=t.modelValue.slice();const l=t.data.filter(c=>{const u=c[i.value.key];return e.leftChecked.includes(u)&&!t.modelValue.includes(u)}).map(c=>c[i.value.key]);a=t.targetOrder==="unshift"?l.concat(a):a.concat(l),t.targetOrder==="original"&&(a=t.data.filter(c=>a.includes(c[i.value.key])).map(c=>c[i.value.key])),s(a,"right",e.leftChecked)}}},Sbe=J({name:"ElTransferPanel"}),Ebe=J({...Sbe,props:vbe,emits:ybe,setup(t,{expose:e,emit:n}){const i=t,s=Ki(),o=({option:w})=>w,{t:r}=Gt(),a=_e("transfer"),l=Yt({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),c=mg(i),{filteredData:u,checkedSummary:d,isIndeterminate:h,handleAllCheckedChange:f}=bbe(i,l,n),m=T(()=>!No(l.query)&&No(u.value)),g=T(()=>!No(s.default()[0].children)),{checked:y,allChecked:_,query:C}=Ei(l);return e({query:C}),(w,S)=>(I(),H("div",{class:x(p(a).b("panel"))},[G("p",{class:x(p(a).be("panel","header"))},[Z(p(Yo),{modelValue:p(_),"onUpdate:modelValue":S[0]||(S[0]=E=>pn(_)?_.value=E:null),indeterminate:p(h),"validate-event":!1,onChange:p(f)},{default:ee(()=>[Ut(Re(w.title)+" ",1),G("span",null,Re(p(d)),1)]),_:1},8,["modelValue","indeterminate","onChange"])],2),G("div",{class:x([p(a).be("panel","body"),p(a).is("with-footer",p(g))])},[w.filterable?(I(),ce(p(hs),{key:0,modelValue:p(C),"onUpdate:modelValue":S[1]||(S[1]=E=>pn(C)?C.value=E:null),class:x(p(a).be("panel","filter")),size:"default",placeholder:w.placeholder,"prefix-icon":p(cX),clearable:"","validate-event":!1},null,8,["modelValue","class","placeholder","prefix-icon"])):re("v-if",!0),ct(Z(p(dF),{modelValue:p(y),"onUpdate:modelValue":S[2]||(S[2]=E=>pn(y)?y.value=E:null),"validate-event":!1,class:x([p(a).is("filterable",w.filterable),p(a).be("panel","list")])},{default:ee(()=>[(I(!0),H(Ye,null,Ot(p(u),E=>(I(),ce(p(Yo),{key:E[p(c).key],class:x(p(a).be("panel","item")),label:E[p(c).key],disabled:E[p(c).disabled],"validate-event":!1},{default:ee(()=>{var k;return[Z(o,{option:(k=w.optionRender)==null?void 0:k.call(w,E)},null,8,["option"])]}),_:2},1032,["class","label","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[Vt,!p(m)&&!p(No)(w.data)]]),ct(G("p",{class:x(p(a).be("panel","empty"))},Re(p(m)?p(r)("el.transfer.noMatch"):p(r)("el.transfer.noData")),3),[[Vt,p(m)||p(No)(w.data)]])],2),p(g)?(I(),H("p",{key:0,class:x(p(a).be("panel","footer"))},[me(w.$slots,"default")],2)):re("v-if",!0)],2))}});var W$=Ve(Ebe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer-panel.vue"]]);const kbe={key:0},Tbe={key:0},Ibe=J({name:"ElTransfer"}),xbe=J({...Ibe,props:Md,emits:gbe,setup(t,{expose:e,emit:n}){const i=t,s=Ki(),{t:o}=Gt(),r=_e("transfer"),{formItem:a}=Ns(),l=Yt({leftChecked:[],rightChecked:[]}),c=mg(i),{sourceData:u,targetData:d}=wbe(i),{onSourceCheckedChange:h,onTargetCheckedChange:f}=_be(l,n),{addToLeft:m,addToRight:g}=Cbe(i,l,n),y=F(),_=F(),C=$=>{switch($){case"left":y.value.query="";break;case"right":_.value.query="";break}},w=T(()=>i.buttonTexts.length===2),S=T(()=>i.titles[0]||o("el.transfer.titles.0")),E=T(()=>i.titles[1]||o("el.transfer.titles.1")),k=T(()=>i.filterPlaceholder||o("el.transfer.filterPlaceholder"));Ce(()=>i.modelValue,()=>{var $;i.validateEvent&&(($=a==null?void 0:a.validate)==null||$.call(a,"change").catch(L=>void 0))});const A=T(()=>$=>i.renderContent?i.renderContent(Ze,$):s.default?s.default({option:$}):Ze("span",$[c.value.label]||$[c.value.key]));return e({clearQuery:C,leftPanel:y,rightPanel:_}),($,L)=>(I(),H("div",{class:x(p(r).b())},[Z(W$,{ref_key:"leftPanel",ref:y,data:p(u),"option-render":p(A),placeholder:p(k),title:p(S),filterable:$.filterable,format:$.format,"filter-method":$.filterMethod,"default-checked":$.leftDefaultChecked,props:i.props,onCheckedChange:p(h)},{default:ee(()=>[me($.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),G("div",{class:x(p(r).e("buttons"))},[Z(p(os),{type:"primary",class:x([p(r).e("button"),p(r).is("with-texts",p(w))]),disabled:p(No)(l.rightChecked),onClick:p(m)},{default:ee(()=>[Z(p(Ge),null,{default:ee(()=>[Z(p(Cc))]),_:1}),p(Ui)($.buttonTexts[0])?re("v-if",!0):(I(),H("span",kbe,Re($.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),Z(p(os),{type:"primary",class:x([p(r).e("button"),p(r).is("with-texts",p(w))]),disabled:p(No)(l.leftChecked),onClick:p(g)},{default:ee(()=>[p(Ui)($.buttonTexts[1])?re("v-if",!0):(I(),H("span",Tbe,Re($.buttonTexts[1]),1)),Z(p(Ge),null,{default:ee(()=>[Z(p($s))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),Z(W$,{ref_key:"rightPanel",ref:_,data:p(d),"option-render":p(A),placeholder:p(k),filterable:$.filterable,format:$.format,"filter-method":$.filterMethod,title:p(E),"default-checked":$.rightDefaultChecked,props:i.props,onCheckedChange:p(f)},{default:ee(()=>[me($.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var Mbe=Ve(xbe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer.vue"]]);const $be=yt(Mbe),wp="$treeNodeId",G$=function(t,e){!e||e[wp]||Object.defineProperty(e,wp,{value:t.id,enumerable:!1,configurable:!1,writable:!1})},Gk=function(t,e){return t?e[t]:e[wp]},pC=(t,e,n)=>{const i=t.value.currentNode;n();const s=t.value.currentNode;i!==s&&e("current-change",s?s.data:null,s)},hC=t=>{let e=!0,n=!0,i=!0;for(let s=0,o=t.length;s<o;s++){const r=t[s];(r.checked!==!0||r.indeterminate)&&(e=!1,r.disabled||(i=!1)),(r.checked!==!1||r.indeterminate)&&(n=!1)}return{all:e,none:n,allWithoutDisable:i,half:!e&&!n}},Qv=function(t){if(t.childNodes.length===0||t.loading)return;const{all:e,none:n,half:i}=hC(t.childNodes);e?(t.checked=!0,t.indeterminate=!1):i?(t.checked=!1,t.indeterminate=!0):n&&(t.checked=!1,t.indeterminate=!1);const s=t.parent;!s||s.level===0||t.store.checkStrictly||Qv(s)},Yg=function(t,e){const n=t.store.props,i=t.data||{},s=n[e];if(typeof s=="function")return s(i,t);if(typeof s=="string")return i[s];if(typeof s>"u"){const o=i[e];return o===void 0?"":o}};let Abe=0;class Hu{constructor(e){this.id=Abe++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in e)Pt(e,n)&&(this[n]=e[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const n=e.props;if(n&&typeof n.isLeaf<"u"){const o=Yg(this,"isLeaf");typeof o=="boolean"&&(this.isLeafByUser=o)}if(e.lazy!==!0&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&this.expand(),Array.isArray(this.data)||G$(this,this.data),!this.data)return;const i=e.defaultExpandedKeys,s=e.key;s&&i&&i.includes(this.key)&&this.expand(null,e.autoExpandParent),s&&e.currentNodeKey!==void 0&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(e){Array.isArray(e)||G$(this,e),this.data=e,this.childNodes=[];let n;this.level===0&&Array.isArray(this.data)?n=this.data:n=Yg(this,"children")||[];for(let i=0,s=n.length;i<s;i++)this.insertChild({data:n[i]})}get label(){return Yg(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return Yg(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return e.childNodes[n+1]}return null}get previousSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return n>0?e.childNodes[n-1]:null}return null}contains(e,n=!0){return(this.childNodes||[]).some(i=>i===e||n&&i.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,n,i){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof Hu)){if(!i){const s=this.getChildren(!0);s.includes(e.data)||(typeof n>"u"||n<0?s.push(e.data):s.splice(n,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=Yt(new Hu(e)),e instanceof Hu&&e.initialize()}e.level=this.level+1,typeof n>"u"||n<0?this.childNodes.push(e):this.childNodes.splice(n,0,e),this.updateLeafState()}insertBefore(e,n){let i;n&&(i=this.childNodes.indexOf(n)),this.insertChild(e,i)}insertAfter(e,n){let i;n&&(i=this.childNodes.indexOf(n),i!==-1&&(i+=1)),this.insertChild(e,i)}removeChild(e){const n=this.getChildren()||[],i=n.indexOf(e.data);i>-1&&n.splice(i,1);const s=this.childNodes.indexOf(e);s>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(s,1)),this.updateLeafState()}removeChildByData(e){let n=null;for(let i=0;i<this.childNodes.length;i++)if(this.childNodes[i].data===e){n=this.childNodes[i];break}n&&this.removeChild(n)}expand(e,n){const i=()=>{if(n){let s=this.parent;for(;s.level>0;)s.expanded=!0,s=s.parent}this.expanded=!0,e&&e(),this.childNodes.forEach(s=>{s.canFocus=!0})};this.shouldLoadData()?this.loadData(s=>{Array.isArray(s)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Qv(this),i())}):i()}doCreateChildren(e,n={}){e.forEach(i=>{this.insertChild(Object.assign({data:i},n),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(e=>{e.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,n,i,s){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:r,allWithoutDisable:a}=hC(this.childNodes);!this.isLeaf&&!r&&a&&(this.checked=!1,e=!1);const l=()=>{if(n){const c=this.childNodes;for(let h=0,f=c.length;h<f;h++){const m=c[h];s=s||e!==!1;const g=m.disabled?m.checked:s;m.setChecked(g,n,!0,s)}const{half:u,all:d}=hC(c);d||(this.checked=d,this.indeterminate=u)}};if(this.shouldLoadData()){this.loadData(()=>{l(),Qv(this)},{checked:e!==!1});return}else l()}const o=this.parent;!o||o.level===0||i||Qv(o)}getChildren(e=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const i=this.store.props;let s="children";return i&&(s=i.children||"children"),n[s]===void 0&&(n[s]=null),e&&!n[s]&&(n[s]=[]),n[s]}updateChildren(){const e=this.getChildren()||[],n=this.childNodes.map(o=>o.data),i={},s=[];e.forEach((o,r)=>{const a=o[wp];!!a&&n.findIndex(c=>c[wp]===a)>=0?i[a]={index:r,data:o}:s.push({index:r,data:o})}),this.store.lazy||n.forEach(o=>{i[o[wp]]||this.removeChildByData(o)}),s.forEach(({index:o,data:r})=>{this.insertChild({data:r},o)}),this.updateLeafState()}loadData(e,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const i=s=>{this.childNodes=[],this.doCreateChildren(s,n),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,s)};this.store.load(this,i)}else e&&e.call(this)}}class Lbe{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const n in e)Pt(e,n)&&(this[n]=e[n]);this.nodesMap={}}initialize(){if(this.root=new Hu({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(e){const n=this.filterNodeMethod,i=this.lazy,s=function(o){const r=o.root?o.root.childNodes:o.childNodes;if(r.forEach(a=>{a.visible=n.call(a,e,a.data,a),s(a)}),!o.visible&&r.length){let a=!0;a=!r.some(l=>l.visible),o.root?o.root.visible=a===!1:o.visible=a===!1}e&&o.visible&&!o.isLeaf&&!i&&o.expand()};s(this)}setData(e){e!==this.root.data?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(e){if(e instanceof Hu)return e;const n=Et(e)?Gk(this.key,e):e;return this.nodesMap[n]||null}insertBefore(e,n){const i=this.getNode(n);i.parent.insertBefore({data:e},i)}insertAfter(e,n){const i=this.getNode(n);i.parent.insertAfter({data:e},i)}remove(e){const n=this.getNode(e);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(e,n){const i=n?this.getNode(n):this.root;i&&i.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],n=this.nodesMap;e.forEach(i=>{const s=n[i];s&&s.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const n=this.key;!e||!e.data||(n?e.key!==void 0&&(this.nodesMap[e.key]=e):this.nodesMap[e.id]=e)}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(i=>{this.deregisterNode(i)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,n=!1){const i=[],s=function(o){(o.root?o.root.childNodes:o.childNodes).forEach(a=>{(a.checked||n&&a.indeterminate)&&(!e||e&&a.isLeaf)&&i.push(a.data),s(a)})};return s(this),i}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const e=[],n=function(i){(i.root?i.root.childNodes:i.childNodes).forEach(o=>{o.indeterminate&&e.push(o.data),n(o)})};return n(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],n=this.nodesMap;for(const i in n)Pt(n,i)&&e.push(n[i]);return e}updateChildren(e,n){const i=this.nodesMap[e];if(!i)return;const s=i.childNodes;for(let o=s.length-1;o>=0;o--){const r=s[o];this.remove(r.data)}for(let o=0,r=n.length;o<r;o++){const a=n[o];this.append(a,i.data)}}_setCheckedKeys(e,n=!1,i){const s=this._getAllNodes().sort((a,l)=>l.level-a.level),o=Object.create(null),r=Object.keys(i);s.forEach(a=>a.setChecked(!1,!1));for(let a=0,l=s.length;a<l;a++){const c=s[a],u=c.data[e].toString();if(!r.includes(u)){c.checked&&!o[u]&&c.setChecked(!1,!1);continue}let h=c.parent;for(;h&&h.level>0;)o[h.data[e]]=!0,h=h.parent;if(c.isLeaf||this.checkStrictly){c.setChecked(!0,!1);continue}if(c.setChecked(!0,!0),n){c.setChecked(!1,!1);const f=function(m){m.childNodes.forEach(y=>{y.isLeaf||y.setChecked(!1,!1),f(y)})};f(c)}}}setCheckedNodes(e,n=!1){const i=this.key,s={};e.forEach(o=>{s[(o||{})[i]]=!0}),this._setCheckedKeys(i,n,s)}setCheckedKeys(e,n=!1){this.defaultCheckedKeys=e;const i=this.key,s={};e.forEach(o=>{s[o]=!0}),this._setCheckedKeys(i,n,s)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(n=>{const i=this.getNode(n);i&&i.expand(null,this.autoExpandParent)})}setChecked(e,n,i){const s=this.getNode(e);s&&s.setChecked(!!n,i)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,n=!0){const i=e[this.key],s=this.nodesMap[i];this.setCurrentNode(s),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,n=!0){if(e==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const i=this.getNode(e);i&&(this.setCurrentNode(i),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const Obe=J({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(t){const e=_e("tree"),n=qe("NodeInstance"),i=qe("RootTree");return()=>{const s=t.node,{data:o,store:r}=s;return t.renderContent?t.renderContent(Ze,{_self:n,node:s,data:o,store:r}):i.ctx.slots.default?i.ctx.slots.default({node:s,data:o}):Ze("span",{class:e.be("node","label")},[s.label])}}});var Pbe=Ve(Obe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node-content.vue"]]);function YD(t){const e=qe("TreeNodeMap",null),n={treeNodeExpand:i=>{t.node!==i&&t.node.collapse()},children:[]};return e&&e.children.push(n),xt("TreeNodeMap",n),{broadcastExpanded:i=>{if(t.accordion)for(const s of n.children)s.treeNodeExpand(i)}}}const ZD=Symbol("dragEvents");function Rbe({props:t,ctx:e,el$:n,dropIndicator$:i,store:s}){const o=_e("tree"),r=F({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return xt(ZD,{treeNodeDragStart:({event:u,treeNode:d})=>{if(typeof t.allowDrag=="function"&&!t.allowDrag(d.node))return u.preventDefault(),!1;u.dataTransfer.effectAllowed="move";try{u.dataTransfer.setData("text/plain","")}catch{}r.value.draggingNode=d,e.emit("node-drag-start",d.node,u)},treeNodeDragOver:({event:u,treeNode:d})=>{const h=d,f=r.value.dropNode;f&&f!==h&&Zs(f.$el,o.is("drop-inner"));const m=r.value.draggingNode;if(!m||!h)return;let g=!0,y=!0,_=!0,C=!0;typeof t.allowDrop=="function"&&(g=t.allowDrop(m.node,h.node,"prev"),C=y=t.allowDrop(m.node,h.node,"inner"),_=t.allowDrop(m.node,h.node,"next")),u.dataTransfer.dropEffect=y||g||_?"move":"none",(g||y||_)&&f!==h&&(f&&e.emit("node-drag-leave",m.node,f.node,u),e.emit("node-drag-enter",m.node,h.node,u)),(g||y||_)&&(r.value.dropNode=h),h.node.nextSibling===m.node&&(_=!1),h.node.previousSibling===m.node&&(g=!1),h.node.contains(m.node,!1)&&(y=!1),(m.node===h.node||m.node.contains(h.node))&&(g=!1,y=!1,_=!1);const w=h.$el.getBoundingClientRect(),S=n.value.getBoundingClientRect();let E;const k=g?y?.25:_?.45:1:-1,A=_?y?.75:g?.55:0:1;let $=-9999;const L=u.clientY-w.top;L<w.height*k?E="before":L>w.height*A?E="after":y?E="inner":E="none";const O=h.$el.querySelector(`.${o.be("node","expand-icon")}`).getBoundingClientRect(),B=i.value;E==="before"?$=O.top-S.top:E==="after"&&($=O.bottom-S.top),B.style.top=`${$}px`,B.style.left=`${O.right-S.left}px`,E==="inner"?Wr(h.$el,o.is("drop-inner")):Zs(h.$el,o.is("drop-inner")),r.value.showDropIndicator=E==="before"||E==="after",r.value.allowDrop=r.value.showDropIndicator||C,r.value.dropType=E,e.emit("node-drag-over",m.node,h.node,u)},treeNodeDragEnd:u=>{const{draggingNode:d,dropType:h,dropNode:f}=r.value;if(u.preventDefault(),u.dataTransfer.dropEffect="move",d&&f){const m={data:d.node.data};h!=="none"&&d.node.remove(),h==="before"?f.node.parent.insertBefore(m,f.node):h==="after"?f.node.parent.insertAfter(m,f.node):h==="inner"&&f.node.insertChild(m),h!=="none"&&s.value.registerNode(m),Zs(f.$el,o.is("drop-inner")),e.emit("node-drag-end",d.node,f.node,h,u),h!=="none"&&e.emit("node-drop",d.node,f.node,h,u)}d&&!f&&e.emit("node-drag-end",d.node,null,h,u),r.value.showDropIndicator=!1,r.value.draggingNode=null,r.value.dropNode=null,r.value.allowDrop=!0}}),{dragState:r}}const Vbe=J({name:"ElTreeNode",components:{ElCollapseTransition:w_,ElCheckbox:Yo,NodeContent:Pbe,ElIcon:Ge,Loading:Lc},props:{node:{type:Hu,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(t,e){const n=_e("tree"),{broadcastExpanded:i}=YD(t),s=qe("RootTree"),o=F(!1),r=F(!1),a=F(null),l=F(null),c=F(null),u=qe(ZD),d=vt();xt("NodeInstance",d),t.node.expanded&&(o.value=!0,r.value=!0);const h=s.props.children||"children";Ce(()=>{const L=t.node.data[h];return L&&[...L]},()=>{t.node.updateChildren()}),Ce(()=>t.node.indeterminate,L=>{g(t.node.checked,L)}),Ce(()=>t.node.checked,L=>{g(L,t.node.indeterminate)}),Ce(()=>t.node.expanded,L=>{je(()=>o.value=L),L&&(r.value=!0)});const f=L=>Gk(s.props.nodeKey,L.data),m=L=>{const O=t.props.class;if(!O)return{};let B;if(ot(O)){const{data:V}=L;B=O(V,L)}else B=O;return at(B)?{[B]:!0}:B},g=(L,O)=>{(a.value!==L||l.value!==O)&&s.ctx.emit("check-change",t.node.data,L,O),a.value=L,l.value=O},y=L=>{pC(s.store,s.ctx.emit,()=>s.store.value.setCurrentNode(t.node)),s.currentNode.value=t.node,s.props.expandOnClickNode&&C(),s.props.checkOnClickNode&&!t.node.disabled&&w(null,{target:{checked:!t.node.checked}}),s.ctx.emit("node-click",t.node.data,t.node,d,L)},_=L=>{s.instance.vnode.props.onNodeContextmenu&&(L.stopPropagation(),L.preventDefault()),s.ctx.emit("node-contextmenu",L,t.node.data,t.node,d)},C=()=>{t.node.isLeaf||(o.value?(s.ctx.emit("node-collapse",t.node.data,t.node,d),t.node.collapse()):(t.node.expand(),e.emit("node-expand",t.node.data,t.node,d)))},w=(L,O)=>{t.node.setChecked(O.target.checked,!s.props.checkStrictly),je(()=>{const B=s.store.value;s.ctx.emit("check",t.node.data,{checkedNodes:B.getCheckedNodes(),checkedKeys:B.getCheckedKeys(),halfCheckedNodes:B.getHalfCheckedNodes(),halfCheckedKeys:B.getHalfCheckedKeys()})})};return{ns:n,node$:c,tree:s,expanded:o,childNodeRendered:r,oldChecked:a,oldIndeterminate:l,getNodeKey:f,getNodeClass:m,handleSelectChange:g,handleClick:y,handleContextMenu:_,handleExpandIconClick:C,handleCheckChange:w,handleChildNodeExpand:(L,O,B)=>{i(O),s.ctx.emit("node-expand",L,O,B)},handleDragStart:L=>{s.props.draggable&&u.treeNodeDragStart({event:L,treeNode:t})},handleDragOver:L=>{L.preventDefault(),s.props.draggable&&u.treeNodeDragOver({event:L,treeNode:{$el:c.value,node:t.node}})},handleDrop:L=>{L.preventDefault()},handleDragEnd:L=>{s.props.draggable&&u.treeNodeDragEnd(L)},CaretRight:ER}}}),Fbe=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],Dbe=["aria-expanded"];function Nbe(t,e,n,i,s,o){const r=pt("el-icon"),a=pt("el-checkbox"),l=pt("loading"),c=pt("node-content"),u=pt("el-tree-node"),d=pt("el-collapse-transition");return ct((I(),H("div",{ref:"node$",class:x([t.ns.b("node"),t.ns.is("expanded",t.expanded),t.ns.is("current",t.node.isCurrent),t.ns.is("hidden",!t.node.visible),t.ns.is("focusable",!t.node.disabled),t.ns.is("checked",!t.node.disabled&&t.node.checked),t.getNodeClass(t.node)]),role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.props.draggable,"data-key":t.getNodeKey(t.node),onClick:e[1]||(e[1]=rt((...h)=>t.handleClick&&t.handleClick(...h),["stop"])),onContextmenu:e[2]||(e[2]=(...h)=>t.handleContextMenu&&t.handleContextMenu(...h)),onDragstart:e[3]||(e[3]=rt((...h)=>t.handleDragStart&&t.handleDragStart(...h),["stop"])),onDragover:e[4]||(e[4]=rt((...h)=>t.handleDragOver&&t.handleDragOver(...h),["stop"])),onDragend:e[5]||(e[5]=rt((...h)=>t.handleDragEnd&&t.handleDragEnd(...h),["stop"])),onDrop:e[6]||(e[6]=rt((...h)=>t.handleDrop&&t.handleDrop(...h),["stop"]))},[G("div",{class:x(t.ns.be("node","content")),style:Ke({paddingLeft:(t.node.level-1)*t.tree.props.indent+"px"})},[t.tree.props.icon||t.CaretRight?(I(),ce(r,{key:0,class:x([t.ns.be("node","expand-icon"),t.ns.is("leaf",t.node.isLeaf),{expanded:!t.node.isLeaf&&t.expanded}]),onClick:rt(t.handleExpandIconClick,["stop"])},{default:ee(()=>[(I(),ce(It(t.tree.props.icon||t.CaretRight)))]),_:1},8,["class","onClick"])):re("v-if",!0),t.showCheckbox?(I(),ce(a,{key:1,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:!!t.node.disabled,onClick:e[0]||(e[0]=rt(()=>{},["stop"])),onChange:t.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):re("v-if",!0),t.node.loading?(I(),ce(r,{key:2,class:x([t.ns.be("node","loading-icon"),t.ns.is("loading")])},{default:ee(()=>[Z(l)]),_:1},8,["class"])):re("v-if",!0),Z(c,{node:t.node,"render-content":t.renderContent},null,8,["node","render-content"])],6),Z(d,null,{default:ee(()=>[!t.renderAfterExpand||t.childNodeRendered?ct((I(),H("div",{key:0,class:x(t.ns.be("node","children")),role:"group","aria-expanded":t.expanded},[(I(!0),H(Ye,null,Ot(t.node.childNodes,h=>(I(),ce(u,{key:t.getNodeKey(h),"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,node:h,accordion:t.accordion,props:t.props,onNodeExpand:t.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,Dbe)),[[Vt,t.expanded]]):re("v-if",!0)]),_:1})],42,Fbe)),[[Vt,t.node.visible]])}var Bbe=Ve(Vbe,[["render",Nbe],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node.vue"]]);function zbe({el$:t},e){const n=_e("tree"),i=yn([]),s=yn([]);ft(()=>{r()}),ll(()=>{i.value=Array.from(t.value.querySelectorAll("[role=treeitem]")),s.value=Array.from(t.value.querySelectorAll("input[type=checkbox]"))}),Ce(s,a=>{a.forEach(l=>{l.setAttribute("tabindex","-1")})}),En(t,"keydown",a=>{const l=a.target;if(!l.className.includes(n.b("node")))return;const c=a.code;i.value=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));const u=i.value.indexOf(l);let d;if([Xe.up,Xe.down].includes(c)){if(a.preventDefault(),c===Xe.up){d=u===-1?0:u!==0?u-1:i.value.length-1;const f=d;for(;!e.value.getNode(i.value[d].dataset.key).canFocus;){if(d--,d===f){d=-1;break}d<0&&(d=i.value.length-1)}}else{d=u===-1?0:u<i.value.length-1?u+1:0;const f=d;for(;!e.value.getNode(i.value[d].dataset.key).canFocus;){if(d++,d===f){d=-1;break}d>=i.value.length&&(d=0)}}d!==-1&&i.value[d].focus()}[Xe.left,Xe.right].includes(c)&&(a.preventDefault(),l.click());const h=l.querySelector('[type="checkbox"]');[Xe.enter,Xe.space].includes(c)&&h&&(a.preventDefault(),h.click())});const r=()=>{var a;i.value=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),s.value=Array.from(t.value.querySelectorAll("input[type=checkbox]"));const l=t.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);if(l.length){l[0].setAttribute("tabindex","0");return}(a=i.value[0])==null||a.setAttribute("tabindex","0")}}const Hbe=J({name:"ElTree",components:{ElTreeNode:Bbe},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:gn}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(t,e){const{t:n}=Gt(),i=_e("tree"),s=F(new Lbe({key:t.nodeKey,data:t.data,lazy:t.lazy,props:t.props,load:t.load,currentNodeKey:t.currentNodeKey,checkStrictly:t.checkStrictly,checkDescendants:t.checkDescendants,defaultCheckedKeys:t.defaultCheckedKeys,defaultExpandedKeys:t.defaultExpandedKeys,autoExpandParent:t.autoExpandParent,defaultExpandAll:t.defaultExpandAll,filterNodeMethod:t.filterNodeMethod}));s.value.initialize();const o=F(s.value.root),r=F(null),a=F(null),l=F(null),{broadcastExpanded:c}=YD(t),{dragState:u}=Rbe({props:t,ctx:e,el$:a,dropIndicator$:l,store:s});zbe({el$:a},s);const d=T(()=>{const{childNodes:R}=o.value;return!R||R.length===0||R.every(({visible:D})=>!D)});Ce(()=>t.currentNodeKey,R=>{s.value.setCurrentNodeKey(R)}),Ce(()=>t.defaultCheckedKeys,R=>{s.value.setDefaultCheckedKey(R)}),Ce(()=>t.defaultExpandedKeys,R=>{s.value.setDefaultExpandedKeys(R)}),Ce(()=>t.data,R=>{s.value.setData(R)},{deep:!0}),Ce(()=>t.checkStrictly,R=>{s.value.checkStrictly=R});const h=R=>{if(!t.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");s.value.filter(R)},f=R=>Gk(t.nodeKey,R.data),m=R=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const D=s.value.getNode(R);if(!D)return[];const N=[D.data];let K=D.parent;for(;K&&K!==o.value;)N.push(K.data),K=K.parent;return N.reverse()},g=(R,D)=>s.value.getCheckedNodes(R,D),y=R=>s.value.getCheckedKeys(R),_=()=>{const R=s.value.getCurrentNode();return R?R.data:null},C=()=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const R=_();return R?R[t.nodeKey]:null},w=(R,D)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");s.value.setCheckedNodes(R,D)},S=(R,D)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");s.value.setCheckedKeys(R,D)},E=(R,D,N)=>{s.value.setChecked(R,D,N)},k=()=>s.value.getHalfCheckedNodes(),A=()=>s.value.getHalfCheckedKeys(),$=(R,D=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");pC(s,e.emit,()=>s.value.setUserCurrentNode(R,D))},L=(R,D=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");pC(s,e.emit,()=>s.value.setCurrentNodeKey(R,D))},O=R=>s.value.getNode(R),B=R=>{s.value.remove(R)},V=(R,D)=>{s.value.append(R,D)},P=(R,D)=>{s.value.insertBefore(R,D)},z=(R,D)=>{s.value.insertAfter(R,D)},U=(R,D,N)=>{c(D),e.emit("node-expand",R,D,N)},W=(R,D)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");s.value.updateChildren(R,D)};return xt("RootTree",{ctx:e,props:t,store:s,root:o,currentNode:r,instance:vt()}),xt(oa,void 0),{ns:i,store:s,root:o,currentNode:r,dragState:u,el$:a,dropIndicator$:l,isEmpty:d,filter:h,getNodeKey:f,getNodePath:m,getCheckedNodes:g,getCheckedKeys:y,getCurrentNode:_,getCurrentKey:C,setCheckedNodes:w,setCheckedKeys:S,setChecked:E,getHalfCheckedNodes:k,getHalfCheckedKeys:A,setCurrentNode:$,setCurrentKey:L,t:n,getNode:O,remove:B,append:V,insertBefore:P,insertAfter:z,handleNodeExpand:U,updateKeyChildren:W}}});function Ube(t,e,n,i,s,o){var r;const a=pt("el-tree-node");return I(),H("div",{ref:"el$",class:x([t.ns.b(),t.ns.is("dragging",!!t.dragState.draggingNode),t.ns.is("drop-not-allow",!t.dragState.allowDrop),t.ns.is("drop-inner",t.dragState.dropType==="inner"),{[t.ns.m("highlight-current")]:t.highlightCurrent}]),role:"tree"},[(I(!0),H(Ye,null,Ot(t.root.childNodes,l=>(I(),ce(a,{key:t.getNodeKey(l),node:l,props:t.props,accordion:t.accordion,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,"render-content":t.renderContent,onNodeExpand:t.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),t.isEmpty?(I(),H("div",{key:0,class:x(t.ns.e("empty-block"))},[G("span",{class:x(t.ns.e("empty-text"))},Re((r=t.emptyText)!=null?r:t.t("el.tree.emptyText")),3)],2)):re("v-if",!0),ct(G("div",{ref:"dropIndicator$",class:x(t.ns.e("drop-indicator"))},null,2),[[Vt,t.dragState.showDropIndicator]])],2)}var Jv=Ve(Hbe,[["render",Ube],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree.vue"]]);Jv.install=t=>{t.component(Jv.name,Jv)};const sb=Jv,Wbe=sb,Gbe=(t,{attrs:e},{tree:n,key:i})=>{const s=_e("tree-select"),o={...Ua(Ei(t),Object.keys(Zu.props)),...e,valueKey:i,popperClass:T(()=>{const r=[s.e("popper")];return t.popperClass&&r.push(t.popperClass),r.join(" ")}),filterMethod:(r="")=>{t.filterMethod&&t.filterMethod(r),je(()=>{var a;(a=n.value)==null||a.filter(r)})},onVisibleChange:r=>{var a;(a=e.onVisibleChange)==null||a.call(e,r),t.filterable&&r&&o.filterMethod()}};return o},jbe=J({extends:Zy,setup(t,e){const n=Zy.setup(t,e);delete n.selectOptionClick;const i=vt().proxy;return je(()=>{n.select.cachedOptions.get(i.value)||n.select.onOptionCreate(i)}),n},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function fC(t){return t||t===0}function jk(t){return Array.isArray(t)&&t.length}function Ow(t){return Array.isArray(t)?t:fC(t)?[t]:[]}function ey(t,e,n,i,s){for(let o=0;o<t.length;o++){const r=t[o];if(e(r,o,t,s))return i?i(r,o,t,s):r;{const a=n(r);if(jk(a)){const l=ey(a,e,n,i,r);if(l)return l}}}}function XD(t,e,n,i){for(let s=0;s<t.length;s++){const o=t[s];e(o,s,t,i);const r=n(o);jk(r)&&XD(r,e,n,o)}}const qbe=(t,{attrs:e,slots:n,emit:i},{select:s,tree:o,key:r})=>{Ce(()=>t.modelValue,()=>{t.showCheckbox&&je(()=>{const d=o.value;d&&!So(d.getCheckedKeys(),Ow(t.modelValue))&&d.setCheckedKeys(Ow(t.modelValue))})},{immediate:!0,deep:!0});const a=T(()=>({value:r.value,...t.props})),l=(d,h)=>{var f;const m=a.value[d];return ot(m)?m(h,(f=o.value)==null?void 0:f.getNode(l("value",h))):h[m]},c=Ow(t.modelValue).map(d=>ey(t.data||[],h=>l("value",h)===d,h=>l("children",h),(h,f,m,g)=>g&&l("value",g))).filter(d=>fC(d)),u=T(()=>{if(!t.renderAfterExpand&&!t.lazy)return[];const d=[];return XD(t.data.concat(t.cacheData),h=>{const f=l("value",h);d.push({value:f,currentLabel:l("label",h),isDisabled:l("disabled",h)})},h=>l("children",h)),d});return{...Ua(Ei(t),Object.keys(sb.props)),...e,nodeKey:r,expandOnClickNode:T(()=>!t.checkStrictly&&t.expandOnClickNode),defaultExpandedKeys:T(()=>t.defaultExpandedKeys?t.defaultExpandedKeys.concat(c):c),renderContent:(d,{node:h,data:f,store:m})=>d(jbe,{value:l("value",f),label:l("label",f),disabled:l("disabled",f)},t.renderContent?()=>t.renderContent(d,{node:h,data:f,store:m}):n.default?()=>n.default({node:h,data:f,store:m}):void 0),filterNodeMethod:(d,h,f)=>{var m;return t.filterNodeMethod?t.filterNodeMethod(d,h,f):d?(m=l("label",h))==null?void 0:m.includes(d):!0},onNodeClick:(d,h,f)=>{var m,g,y;if((m=e.onNodeClick)==null||m.call(e,d,h,f),!(t.showCheckbox&&t.checkOnClickNode))if(!t.showCheckbox&&(t.checkStrictly||h.isLeaf)){if(!l("disabled",d)){const _=(g=s.value)==null?void 0:g.options.get(l("value",d));(y=s.value)==null||y.handleOptionSelect(_,!0)}}else t.expandOnClickNode&&f.proxy.handleExpandIconClick()},onCheck:(d,h)=>{var f;(f=e.onCheck)==null||f.call(e,d,h);const m=l("value",d);if(t.checkStrictly)i(wt,t.multiple?h.checkedKeys:h.checkedKeys.includes(m)?m:void 0);else if(t.multiple)i(wt,o.value.getCheckedKeys(!0));else{const g=ey([d],C=>!jk(l("children",C))&&!l("disabled",C),C=>l("children",C)),y=g?l("value",g):void 0,_=fC(t.modelValue)&&!!ey([d],C=>l("value",C)===t.modelValue,C=>l("children",C));i(wt,y===t.modelValue||_?void 0:y)}},cacheOptions:u}};var Kbe=J({props:{data:{type:Array,default:()=>[]}},setup(t){const e=qe(hg);return Ce(()=>t.data,()=>{t.data.forEach(n=>{e.cachedOptions.has(n.value)||e.cachedOptions.set(n.value,n)}),e.setSelected()},{immediate:!0,deep:!0}),()=>{}}});const Ybe=J({name:"ElTreeSelect",inheritAttrs:!1,props:{...Zu.props,...sb.props,cacheData:{type:Array,default:()=>[]}},setup(t,e){const{slots:n,expose:i}=e,s=F(),o=F(),r=T(()=>t.nodeKey||t.valueKey||"value"),a=Gbe(t,e,{select:s,tree:o,key:r}),{cacheOptions:l,...c}=qbe(t,e,{select:s,tree:o,key:r}),u=Yt({});return i(u),ft(()=>{Object.assign(u,{...Ua(o.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...Ua(s.value,["focus","blur"])})}),()=>Ze(Zu,Yt({...a,ref:d=>s.value=d}),{...n,default:()=>[Ze(Kbe,{data:l.value}),Ze(sb,Yt({...c,ref:d=>o.value=d}))]})}});var ty=Ve(Ybe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue"]]);ty.install=t=>{t.component(ty.name,ty)};const Zbe=ty,Xbe=Zbe,qk=Symbol(),Qbe={key:-1,level:-1,data:{}};var nf=(t=>(t.KEY="id",t.LABEL="label",t.CHILDREN="children",t.DISABLED="disabled",t))(nf||{}),mC=(t=>(t.ADD="add",t.DELETE="delete",t))(mC||{});const Jbe=De({data:{type:ae(Array),default:()=>Mn([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:ae(Object),default:()=>Mn({children:"children",label:"label",disabled:"disabled",value:"id"})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:ae(Array),default:()=>Mn([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:ae(Array),default:()=>Mn([])},indent:{type:Number,default:16},icon:{type:gn},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:ae([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:ae(Function)},perfMode:{type:Boolean,default:!0}}),e_e=De({node:{type:ae(Object),default:()=>Mn(Qbe)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1}}),t_e=De({node:{type:ae(Object),required:!0}}),QD="node-click",JD="node-expand",e3="node-collapse",t3="current-change",n3="check",i3="check-change",s3="node-contextmenu",n_e={[QD]:(t,e,n)=>t&&e&&n,[JD]:(t,e)=>t&&e,[e3]:(t,e)=>t&&e,[t3]:(t,e)=>t&&e,[n3]:(t,e)=>t&&e,[i3]:(t,e)=>t&&typeof e=="boolean",[s3]:(t,e,n)=>t&&e&&n},i_e={click:(t,e)=>!!(t&&e),toggle:t=>!!t,check:(t,e)=>t&&typeof e=="boolean"};function s_e(t,e){const n=F(new Set),i=F(new Set),{emit:s}=vt();Ce([()=>e.value,()=>t.defaultCheckedKeys],()=>je(()=>{C(t.defaultCheckedKeys)}),{immediate:!0});const o=()=>{if(!e.value||!t.showCheckbox||t.checkStrictly)return;const{levelTreeNodeMap:w,maxLevel:S}=e.value,E=n.value,k=new Set;for(let A=S-1;A>=1;--A){const $=w.get(A);$&&$.forEach(L=>{const O=L.children;if(O){let B=!0,V=!1;for(const P of O){const z=P.key;if(E.has(z))V=!0;else if(k.has(z)){B=!1,V=!0;break}else B=!1}B?E.add(L.key):V?(k.add(L.key),E.delete(L.key)):(E.delete(L.key),k.delete(L.key))}})}i.value=k},r=w=>n.value.has(w.key),a=w=>i.value.has(w.key),l=(w,S,E=!0)=>{const k=n.value,A=($,L)=>{k[L?mC.ADD:mC.DELETE]($.key);const O=$.children;!t.checkStrictly&&O&&O.forEach(B=>{B.disabled||A(B,L)})};A(w,S),o(),E&&c(w,S)},c=(w,S)=>{const{checkedNodes:E,checkedKeys:k}=m(),{halfCheckedNodes:A,halfCheckedKeys:$}=g();s(n3,w.data,{checkedKeys:k,checkedNodes:E,halfCheckedKeys:$,halfCheckedNodes:A}),s(i3,w.data,S)};function u(w=!1){return m(w).checkedKeys}function d(w=!1){return m(w).checkedNodes}function h(){return g().halfCheckedKeys}function f(){return g().halfCheckedNodes}function m(w=!1){const S=[],E=[];if(e!=null&&e.value&&t.showCheckbox){const{treeNodeMap:k}=e.value;n.value.forEach(A=>{const $=k.get(A);$&&(!w||w&&$.isLeaf)&&(E.push(A),S.push($.data))})}return{checkedKeys:E,checkedNodes:S}}function g(){const w=[],S=[];if(e!=null&&e.value&&t.showCheckbox){const{treeNodeMap:E}=e.value;i.value.forEach(k=>{const A=E.get(k);A&&(S.push(k),w.push(A.data))})}return{halfCheckedNodes:w,halfCheckedKeys:S}}function y(w){n.value.clear(),i.value.clear(),C(w)}function _(w,S){if(e!=null&&e.value&&t.showCheckbox){const E=e.value.treeNodeMap.get(w);E&&l(E,S,!1)}}function C(w){if(e!=null&&e.value){const{treeNodeMap:S}=e.value;if(t.showCheckbox&&S&&w)for(const E of w){const k=S.get(E);k&&!r(k)&&l(k,!0,!1)}}}return{updateCheckedKeys:o,toggleCheckbox:l,isChecked:r,isIndeterminate:a,getCheckedKeys:u,getCheckedNodes:d,getHalfCheckedKeys:h,getHalfCheckedNodes:f,setChecked:_,setCheckedKeys:y}}function o_e(t,e){const n=F(new Set([])),i=F(new Set([])),s=T(()=>ot(t.filterMethod));function o(a){var l;if(!s.value)return;const c=new Set,u=i.value,d=n.value,h=[],f=((l=e.value)==null?void 0:l.treeNodes)||[],m=t.filterMethod;d.clear();function g(y){y.forEach(_=>{h.push(_),m!=null&&m(a,_.data)?h.forEach(w=>{c.add(w.key)}):_.isLeaf&&d.add(_.key);const C=_.children;if(C&&g(C),!_.isLeaf){if(!c.has(_.key))d.add(_.key);else if(C){let w=!0;for(const S of C)if(!d.has(S.key)){w=!1;break}w?u.add(_.key):u.delete(_.key)}}h.pop()})}return g(f),c}function r(a){return i.value.has(a.key)}return{hiddenExpandIconKeySet:i,hiddenNodeKeySet:n,doFilter:o,isForceHiddenExpandIcon:r}}function r_e(t,e){const n=F(new Set(t.defaultExpandedKeys)),i=F(),s=yn();Ce(()=>t.currentNodeKey,oe=>{i.value=oe},{immediate:!0}),Ce(()=>t.data,oe=>{Te(oe)},{immediate:!0});const{isIndeterminate:o,isChecked:r,toggleCheckbox:a,getCheckedKeys:l,getCheckedNodes:c,getHalfCheckedKeys:u,getHalfCheckedNodes:d,setChecked:h,setCheckedKeys:f}=s_e(t,s),{doFilter:m,hiddenNodeKeySet:g,isForceHiddenExpandIcon:y}=o_e(t,s),_=T(()=>{var oe;return((oe=t.props)==null?void 0:oe.value)||nf.KEY}),C=T(()=>{var oe;return((oe=t.props)==null?void 0:oe.children)||nf.CHILDREN}),w=T(()=>{var oe;return((oe=t.props)==null?void 0:oe.disabled)||nf.DISABLED}),S=T(()=>{var oe;return((oe=t.props)==null?void 0:oe.label)||nf.LABEL}),E=T(()=>{const oe=n.value,de=g.value,ve=[],He=s.value&&s.value.treeNodes||[];function Q(){const se=[];for(let fe=He.length-1;fe>=0;--fe)se.push(He[fe]);for(;se.length;){const fe=se.pop();if(fe&&(de.has(fe.key)||ve.push(fe),oe.has(fe.key))){const Me=fe.children;if(Me){const Oe=Me.length;for(let pe=Oe-1;pe>=0;--pe)se.push(Me[pe])}}}}return Q(),ve}),k=T(()=>E.value.length>0);function A(oe){const de=new Map,ve=new Map;let He=1;function Q(fe,Me=1,Oe=void 0){var pe;const Le=[];for(const be of fe){const Pe=O(be),Ee={level:Me,key:Pe,data:be};Ee.label=V(be),Ee.parent=Oe;const he=L(be);Ee.disabled=B(be),Ee.isLeaf=!he||he.length===0,he&&he.length&&(Ee.children=Q(he,Me+1,Ee)),Le.push(Ee),de.set(Pe,Ee),ve.has(Me)||ve.set(Me,[]),(pe=ve.get(Me))==null||pe.push(Ee)}return Me>He&&(He=Me),Le}const se=Q(oe);return{treeNodeMap:de,levelTreeNodeMap:ve,maxLevel:He,treeNodes:se}}function $(oe){const de=m(oe);de&&(n.value=de)}function L(oe){return oe[C.value]}function O(oe){return oe?oe[_.value]:""}function B(oe){return oe[w.value]}function V(oe){return oe[S.value]}function P(oe){n.value.has(oe.key)?N(oe):D(oe)}function z(oe){n.value=new Set(oe)}function U(oe,de){e(QD,oe.data,oe,de),W(oe),t.expandOnClickNode&&P(oe),t.showCheckbox&&t.checkOnClickNode&&!oe.disabled&&a(oe,!r(oe),!0)}function W(oe){Y(oe)||(i.value=oe.key,e(t3,oe.data,oe))}function R(oe,de){a(oe,de)}function D(oe){const de=n.value;if(s.value&&t.accordion){const{treeNodeMap:ve}=s.value;de.forEach(He=>{const Q=ve.get(He);oe&&oe.level===(Q==null?void 0:Q.level)&&de.delete(He)})}de.add(oe.key),e(JD,oe.data,oe)}function N(oe){n.value.delete(oe.key),e(e3,oe.data,oe)}function K(oe){return n.value.has(oe.key)}function ie(oe){return!!oe.disabled}function Y(oe){const de=i.value;return!!de&&de===oe.key}function ne(){var oe,de;if(i.value)return(de=(oe=s.value)==null?void 0:oe.treeNodeMap.get(i.value))==null?void 0:de.data}function we(){return i.value}function Se(oe){i.value=oe}function Te(oe){je(()=>s.value=A(oe))}function le(oe){var de;const ve=Et(oe)?O(oe):oe;return(de=s.value)==null?void 0:de.treeNodeMap.get(ve)}return{tree:s,flattenTree:E,isNotEmpty:k,getKey:O,getChildren:L,toggleExpand:P,toggleCheckbox:a,isExpanded:K,isChecked:r,isIndeterminate:o,isDisabled:ie,isCurrent:Y,isForceHiddenExpandIcon:y,handleNodeClick:U,handleNodeCheck:R,getCurrentNode:ne,getCurrentKey:we,setCurrentKey:Se,getCheckedKeys:l,getCheckedNodes:c,getHalfCheckedKeys:u,getHalfCheckedNodes:d,setChecked:h,setCheckedKeys:f,filter:$,setData:Te,getNode:le,expandNode:D,collapseNode:N,setExpandedKeys:z}}var a_e=J({name:"ElTreeNodeContent",props:t_e,setup(t){const e=qe(qk),n=_e("tree");return()=>{const i=t.node,{data:s}=i;return e!=null&&e.ctx.slots.default?e.ctx.slots.default({node:i,data:s}):Ze("span",{class:n.be("node","label")},[i==null?void 0:i.label])}}});const l_e=["aria-expanded","aria-disabled","aria-checked","data-key","onClick"],c_e=J({name:"ElTreeNode"}),u_e=J({...c_e,props:e_e,emits:i_e,setup(t,{emit:e}){const n=t,i=qe(qk),s=_e("tree"),o=T(()=>{var d;return(d=i==null?void 0:i.props.indent)!=null?d:16}),r=T(()=>{var d;return(d=i==null?void 0:i.props.icon)!=null?d:ER}),a=d=>{e("click",n.node,d)},l=()=>{e("toggle",n.node)},c=d=>{e("check",n.node,d)},u=d=>{var h,f,m,g;(m=(f=(h=i==null?void 0:i.instance)==null?void 0:h.vnode)==null?void 0:f.props)!=null&&m.onNodeContextmenu&&(d.stopPropagation(),d.preventDefault()),i==null||i.ctx.emit(s3,d,(g=n.node)==null?void 0:g.data,n.node)};return(d,h)=>{var f,m,g;return I(),H("div",{ref:"node$",class:x([p(s).b("node"),p(s).is("expanded",d.expanded),p(s).is("current",d.current),p(s).is("focusable",!d.disabled),p(s).is("checked",!d.disabled&&d.checked)]),role:"treeitem",tabindex:"-1","aria-expanded":d.expanded,"aria-disabled":d.disabled,"aria-checked":d.checked,"data-key":(f=d.node)==null?void 0:f.key,onClick:rt(a,["stop"]),onContextmenu:u},[G("div",{class:x(p(s).be("node","content")),style:Ke({paddingLeft:`${(d.node.level-1)*p(o)}px`})},[p(r)?(I(),ce(p(Ge),{key:0,class:x([p(s).is("leaf",!!((m=d.node)!=null&&m.isLeaf)),p(s).is("hidden",d.hiddenExpandIcon),{expanded:!((g=d.node)!=null&&g.isLeaf)&&d.expanded},p(s).be("node","expand-icon")]),onClick:rt(l,["stop"])},{default:ee(()=>[(I(),ce(It(p(r))))]),_:1},8,["class","onClick"])):re("v-if",!0),d.showCheckbox?(I(),ce(p(Yo),{key:1,"model-value":d.checked,indeterminate:d.indeterminate,disabled:d.disabled,onChange:c,onClick:h[0]||(h[0]=rt(()=>{},["stop"]))},null,8,["model-value","indeterminate","disabled"])):re("v-if",!0),Z(p(a_e),{node:d.node},null,8,["node"])],6)],42,l_e)}}});var d_e=Ve(u_e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-v2/src/tree-node.vue"]]);const p_e=26,h_e=J({name:"ElTreeV2"}),f_e=J({...h_e,props:Jbe,emits:n_e,setup(t,{expose:e,emit:n}){const i=t,s=Ki();xt(qk,{ctx:{emit:n,slots:s},props:i,instance:vt()}),xt(oa,void 0);const{t:o}=Gt(),r=_e("tree"),{flattenTree:a,isNotEmpty:l,toggleExpand:c,isExpanded:u,isIndeterminate:d,isChecked:h,isDisabled:f,isCurrent:m,isForceHiddenExpandIcon:g,handleNodeClick:y,handleNodeCheck:_,toggleCheckbox:C,getCurrentNode:w,getCurrentKey:S,setCurrentKey:E,getCheckedKeys:k,getCheckedNodes:A,getHalfCheckedKeys:$,getHalfCheckedNodes:L,setChecked:O,setCheckedKeys:B,filter:V,setData:P,getNode:z,expandNode:U,collapseNode:W,setExpandedKeys:R}=r_e(i,n);return e({toggleCheckbox:C,getCurrentNode:w,getCurrentKey:S,setCurrentKey:E,getCheckedKeys:k,getCheckedNodes:A,getHalfCheckedKeys:$,getHalfCheckedNodes:L,setChecked:O,setCheckedKeys:B,filter:V,setData:P,getNode:z,expandNode:U,collapseNode:W,setExpandedKeys:R}),(D,N)=>{var K;return I(),H("div",{class:x([p(r).b(),{[p(r).m("highlight-current")]:D.highlightCurrent}]),role:"tree"},[p(l)?(I(),ce(p(pD),{key:0,"class-name":p(r).b("virtual-list"),data:p(a),total:p(a).length,height:D.height,"item-size":p_e,"perf-mode":D.perfMode},{default:ee(({data:ie,index:Y,style:ne})=>[(I(),ce(d_e,{key:ie[Y].key,style:Ke(ne),node:ie[Y],expanded:p(u)(ie[Y]),"show-checkbox":D.showCheckbox,checked:p(h)(ie[Y]),indeterminate:p(d)(ie[Y]),disabled:p(f)(ie[Y]),current:p(m)(ie[Y]),"hidden-expand-icon":p(g)(ie[Y]),onClick:p(y),onToggle:p(c),onCheck:p(_)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck"]))]),_:1},8,["class-name","data","total","height","perf-mode"])):(I(),H("div",{key:1,class:x(p(r).e("empty-block"))},[G("span",{class:x(p(r).e("empty-text"))},Re((K=D.emptyText)!=null?K:p(o)("el.tree.emptyText")),3)],2))],2)}}});var m_e=Ve(f_e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-v2/src/tree.vue"]]);const g_e=yt(m_e),v_e="ElUpload";class y_e extends Error{constructor(e,n,i,s){super(e),this.name="UploadAjaxError",this.status=n,this.method=i,this.url=s}}function j$(t,e,n){let i;return n.response?i=`${n.response.error||n.response}`:n.responseText?i=`${n.responseText}`:i=`fail to ${e.method} ${t} ${n.status}`,new y_e(i,n.status,e.method,t)}function b_e(t){const e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}const __e=t=>{typeof XMLHttpRequest>"u"&&ki(v_e,"XMLHttpRequest is undefined");const e=new XMLHttpRequest,n=t.action;e.upload&&e.upload.addEventListener("progress",o=>{const r=o;r.percent=o.total>0?o.loaded/o.total*100:0,t.onProgress(r)});const i=new FormData;if(t.data)for(const[o,r]of Object.entries(t.data))Array.isArray(r)?i.append(o,...r):i.append(o,r);i.append(t.filename,t.file,t.file.name),e.addEventListener("error",()=>{t.onError(j$(n,t,e))}),e.addEventListener("load",()=>{if(e.status<200||e.status>=300)return t.onError(j$(n,t,e));t.onSuccess(b_e(e))}),e.open(t.method,n,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const s=t.headers||{};if(s instanceof Headers)s.forEach((o,r)=>e.setRequestHeader(r,o));else for(const[o,r]of Object.entries(s))Gi(r)||e.setRequestHeader(o,String(r));return e.send(i),e},o3=["text","picture","picture-card"];let w_e=1;const gC=()=>Date.now()+w_e++,r3=De({action:{type:String,default:"#"},headers:{type:ae(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>Mn({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:ae(Array),default:()=>Mn([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:o3,default:"text"},httpRequest:{type:ae(Function),default:__e},disabled:Boolean,limit:Number}),C_e=De({...r3,beforeUpload:{type:ae(Function),default:nn},beforeRemove:{type:ae(Function)},onRemove:{type:ae(Function),default:nn},onChange:{type:ae(Function),default:nn},onPreview:{type:ae(Function),default:nn},onSuccess:{type:ae(Function),default:nn},onProgress:{type:ae(Function),default:nn},onError:{type:ae(Function),default:nn},onExceed:{type:ae(Function),default:nn}}),S_e=De({files:{type:ae(Array),default:()=>Mn([])},disabled:{type:Boolean,default:!1},handlePreview:{type:ae(Function),default:nn},listType:{type:String,values:o3,default:"text"}}),E_e={remove:t=>!!t},k_e=["onKeydown"],T_e=["src"],I_e=["onClick"],x_e=["onClick"],M_e=["onClick"],$_e=J({name:"ElUploadList"}),A_e=J({...$_e,props:S_e,emits:E_e,setup(t,{emit:e}){const{t:n}=Gt(),i=_e("upload"),s=_e("icon"),o=_e("list"),r=eo(),a=F(!1),l=c=>{e("remove",c)};return(c,u)=>(I(),ce(N6,{tag:"ul",class:x([p(i).b("list"),p(i).bm("list",c.listType),p(i).is("disabled",p(r))]),name:p(o).b()},{default:ee(()=>[(I(!0),H(Ye,null,Ot(c.files,d=>(I(),H("li",{key:d.uid||d.name,class:x([p(i).be("list","item"),p(i).is(d.status),{focusing:a.value}]),tabindex:"0",onKeydown:Bt(h=>!p(r)&&l(d),["delete"]),onFocus:u[0]||(u[0]=h=>a.value=!0),onBlur:u[1]||(u[1]=h=>a.value=!1),onClick:u[2]||(u[2]=h=>a.value=!1)},[me(c.$slots,"default",{file:d},()=>[c.listType==="picture"||d.status!=="uploading"&&c.listType==="picture-card"?(I(),H("img",{key:0,class:x(p(i).be("list","item-thumbnail")),src:d.url,alt:""},null,10,T_e)):re("v-if",!0),d.status==="uploading"||c.listType!=="picture-card"?(I(),H("div",{key:1,class:x(p(i).be("list","item-info"))},[G("a",{class:x(p(i).be("list","item-name")),onClick:rt(h=>c.handlePreview(d),["prevent"])},[Z(p(Ge),{class:x(p(s).m("document"))},{default:ee(()=>[Z(p(VY))]),_:1},8,["class"]),G("span",{class:x(p(i).be("list","item-file-name"))},Re(d.name),3)],10,I_e),d.status==="uploading"?(I(),ce(p(iD),{key:0,type:c.listType==="picture-card"?"circle":"line","stroke-width":c.listType==="picture-card"?6:2,percentage:Number(d.percentage),style:Ke(c.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):re("v-if",!0)],2)):re("v-if",!0),G("label",{class:x(p(i).be("list","item-status-label"))},[c.listType==="text"?(I(),ce(p(Ge),{key:0,class:x([p(s).m("upload-success"),p(s).m("circle-check")])},{default:ee(()=>[Z(p(WE))]),_:1},8,["class"])):["picture-card","picture"].includes(c.listType)?(I(),ce(p(Ge),{key:1,class:x([p(s).m("upload-success"),p(s).m("check")])},{default:ee(()=>[Z(p(lg))]),_:1},8,["class"])):re("v-if",!0)],2),p(r)?re("v-if",!0):(I(),ce(p(Ge),{key:2,class:x(p(s).m("close")),onClick:h=>l(d)},{default:ee(()=>[Z(p(vr))]),_:2},1032,["class","onClick"])),re(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),re(" This is a bug which needs to be fixed "),re(" TODO: Fix the incorrect navigation interaction "),p(r)?re("v-if",!0):(I(),H("i",{key:3,class:x(p(s).m("close-tip"))},Re(p(n)("el.upload.deleteTip")),3)),c.listType==="picture-card"?(I(),H("span",{key:4,class:x(p(i).be("list","item-actions"))},[G("span",{class:x(p(i).be("list","item-preview")),onClick:h=>c.handlePreview(d)},[Z(p(Ge),{class:x(p(s).m("zoom-in"))},{default:ee(()=>[Z(p(xR))]),_:1},8,["class"])],10,x_e),p(r)?re("v-if",!0):(I(),H("span",{key:0,class:x(p(i).be("list","item-delete")),onClick:h=>l(d)},[Z(p(Ge),{class:x(p(s).m("delete"))},{default:ee(()=>[Z(p($Y))]),_:1},8,["class"])],10,M_e))],2)):re("v-if",!0)])],42,k_e))),128)),me(c.$slots,"append")]),_:3},8,["class","name"]))}});var q$=Ve(A_e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const L_e=De({disabled:{type:Boolean,default:!1}}),O_e={file:t=>ze(t)},P_e=["onDrop","onDragover"],a3="ElUploadDrag",R_e=J({name:a3}),V_e=J({...R_e,props:L_e,emits:O_e,setup(t,{emit:e}){const n=qe(WR);n||ki(a3,"usage: <el-upload><el-upload-dragger /></el-upload>");const i=_e("upload"),s=F(!1),o=eo(),r=l=>{if(o.value)return;s.value=!1;const c=Array.from(l.dataTransfer.files),u=n.accept.value;if(!u){e("file",c);return}const d=c.filter(h=>{const{type:f,name:m}=h,g=m.includes(".")?`.${m.split(".").pop()}`:"",y=f.replace(/\/.*$/,"");return u.split(",").map(_=>_.trim()).filter(_=>_).some(_=>_.startsWith(".")?g===_:/\/\*$/.test(_)?y===_.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(_)?f===_:!1)});e("file",d)},a=()=>{o.value||(s.value=!0)};return(l,c)=>(I(),H("div",{class:x([p(i).b("dragger"),p(i).is("dragover",s.value)]),onDrop:rt(r,["prevent"]),onDragover:rt(a,["prevent"]),onDragleave:c[0]||(c[0]=rt(u=>s.value=!1,["prevent"]))},[me(l.$slots,"default")],42,P_e))}});var F_e=Ve(V_e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const D_e=De({...r3,beforeUpload:{type:ae(Function),default:nn},onRemove:{type:ae(Function),default:nn},onStart:{type:ae(Function),default:nn},onSuccess:{type:ae(Function),default:nn},onProgress:{type:ae(Function),default:nn},onError:{type:ae(Function),default:nn},onExceed:{type:ae(Function),default:nn}}),N_e=["onKeydown"],B_e=["name","multiple","accept"],z_e=J({name:"ElUploadContent",inheritAttrs:!1}),H_e=J({...z_e,props:D_e,setup(t,{expose:e}){const n=t,i=_e("upload"),s=eo(),o=yn({}),r=yn(),a=m=>{if(m.length===0)return;const{autoUpload:g,limit:y,fileList:_,multiple:C,onStart:w,onExceed:S}=n;if(y&&_.length+m.length>y){S(m,_);return}C||(m=m.slice(0,1));for(const E of m){const k=E;k.uid=gC(),w(k),g&&l(k)}},l=async m=>{if(r.value.value="",!n.beforeUpload)return c(m);let g;try{g=await n.beforeUpload(m)}catch{g=!1}if(g===!1){n.onRemove(m);return}let y=m;g instanceof Blob&&(g instanceof File?y=g:y=new File([g],m.name,{type:m.type})),c(Object.assign(y,{uid:m.uid}))},c=m=>{const{headers:g,data:y,method:_,withCredentials:C,name:w,action:S,onProgress:E,onSuccess:k,onError:A,httpRequest:$}=n,{uid:L}=m,O={headers:g||{},withCredentials:C,file:m,data:y,method:_,filename:w,action:S,onProgress:V=>{E(V,m)},onSuccess:V=>{k(V,m),delete o.value[L]},onError:V=>{A(V,m),delete o.value[L]}},B=$(O);o.value[L]=B,B instanceof Promise&&B.then(O.onSuccess,O.onError)},u=m=>{const g=m.target.files;g&&a(Array.from(g))},d=()=>{s.value||(r.value.value="",r.value.click())},h=()=>{d()};return e({abort:m=>{Vq(o.value).filter(m?([y])=>String(m.uid)===y:()=>!0).forEach(([y,_])=>{_ instanceof XMLHttpRequest&&_.abort(),delete o.value[y]})},upload:l}),(m,g)=>(I(),H("div",{class:x([p(i).b(),p(i).m(m.listType),p(i).is("drag",m.drag)]),tabindex:"0",onClick:d,onKeydown:Bt(rt(h,["self"]),["enter","space"])},[m.drag?(I(),ce(F_e,{key:0,disabled:p(s),onFile:a},{default:ee(()=>[me(m.$slots,"default")]),_:3},8,["disabled"])):me(m.$slots,"default",{key:1}),G("input",{ref_key:"inputRef",ref:r,class:x(p(i).e("input")),name:m.name,multiple:m.multiple,accept:m.accept,type:"file",onChange:u,onClick:g[0]||(g[0]=rt(()=>{},["stop"]))},null,42,B_e)],42,N_e))}});var K$=Ve(H_e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const Y$="ElUpload",U_e=t=>{var e;(e=t.url)!=null&&e.startsWith("blob:")&&URL.revokeObjectURL(t.url)},W_e=(t,e)=>{const n=Mq(t,"fileList",void 0,{passive:!0}),i=h=>n.value.find(f=>f.uid===h.uid);function s(h){var f;(f=e.value)==null||f.abort(h)}function o(h=["ready","uploading","success","fail"]){n.value=n.value.filter(f=>!h.includes(f.status))}const r=(h,f)=>{const m=i(f);m&&(console.error(h),m.status="fail",n.value.splice(n.value.indexOf(m),1),t.onError(h,m,n.value),t.onChange(m,n.value))},a=(h,f)=>{const m=i(f);m&&(t.onProgress(h,m,n.value),m.status="uploading",m.percentage=Math.round(h.percent))},l=(h,f)=>{const m=i(f);m&&(m.status="success",m.response=h,t.onSuccess(h,m,n.value),t.onChange(m,n.value))},c=h=>{Gi(h.uid)&&(h.uid=gC());const f={name:h.name,percentage:0,status:"ready",size:h.size,raw:h,uid:h.uid};if(t.listType==="picture-card"||t.listType==="picture")try{f.url=URL.createObjectURL(h)}catch(m){m.message,t.onError(m,f,n.value)}n.value=[...n.value,f],t.onChange(f,n.value)},u=async h=>{const f=h instanceof File?i(h):h;f||ki(Y$,"file to be removed not found");const m=g=>{s(g);const y=n.value;y.splice(y.indexOf(g),1),t.onRemove(g,y),U_e(g)};t.beforeRemove?await t.beforeRemove(f,n.value)!==!1&&m(f):m(f)};function d(){n.value.filter(({status:h})=>h==="ready").forEach(({raw:h})=>{var f;return h&&((f=e.value)==null?void 0:f.upload(h))})}return Ce(()=>t.listType,h=>{h!=="picture-card"&&h!=="picture"||(n.value=n.value.map(f=>{const{raw:m,url:g}=f;if(!g&&m)try{f.url=URL.createObjectURL(m)}catch(y){t.onError(y,f,n.value)}return f}))}),Ce(n,h=>{for(const f of h)f.uid||(f.uid=gC()),f.status||(f.status="success")},{immediate:!0,deep:!0}),{uploadFiles:n,abort:s,clearFiles:o,handleError:r,handleProgress:a,handleStart:c,handleSuccess:l,handleRemove:u,submit:d}},G_e=J({name:"ElUpload"}),j_e=J({...G_e,props:C_e,setup(t,{expose:e}){const n=t,i=Ki(),s=eo(),o=yn(),{abort:r,submit:a,clearFiles:l,uploadFiles:c,handleStart:u,handleError:d,handleRemove:h,handleSuccess:f,handleProgress:m}=W_e(n,o),g=T(()=>n.listType==="picture-card"),y=T(()=>({...n,fileList:c.value,onStart:u,onProgress:m,onSuccess:f,onError:d,onRemove:h}));return Pn(()=>{c.value.forEach(({url:_})=>{_!=null&&_.startsWith("blob:")&&URL.revokeObjectURL(_)})}),xt(WR,{accept:On(n,"accept")}),e({abort:r,submit:a,clearFiles:l,handleStart:u,handleRemove:h}),(_,C)=>(I(),H("div",null,[p(g)&&_.showFileList?(I(),ce(q$,{key:0,disabled:p(s),"list-type":_.listType,files:p(c),"handle-preview":_.onPreview,onRemove:p(h)},Ya({append:ee(()=>[Z(K$,kt({ref_key:"uploadRef",ref:o},p(y)),{default:ee(()=>[p(i).trigger?me(_.$slots,"trigger",{key:0}):re("v-if",!0),!p(i).trigger&&p(i).default?me(_.$slots,"default",{key:1}):re("v-if",!0)]),_:3},16)]),_:2},[_.$slots.file?{name:"default",fn:ee(({file:w})=>[me(_.$slots,"file",{file:w})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):re("v-if",!0),!p(g)||p(g)&&!_.showFileList?(I(),ce(K$,kt({key:1,ref_key:"uploadRef",ref:o},p(y)),{default:ee(()=>[p(i).trigger?me(_.$slots,"trigger",{key:0}):re("v-if",!0),!p(i).trigger&&p(i).default?me(_.$slots,"default",{key:1}):re("v-if",!0)]),_:3},16)):re("v-if",!0),_.$slots.trigger?me(_.$slots,"default",{key:2}):re("v-if",!0),me(_.$slots,"tip"),!p(g)&&_.showFileList?(I(),ce(q$,{key:3,disabled:p(s),"list-type":_.listType,files:p(c),"handle-preview":_.onPreview,onRemove:p(h)},Ya({_:2},[_.$slots.file?{name:"default",fn:ee(({file:w})=>[me(_.$slots,"file",{file:w})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):re("v-if",!0)]))}});var q_e=Ve(j_e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const K_e=yt(q_e);var Y_e=[yee,Mee,sne,mye,dne,yne,VV,Ane,Lne,os,zV,Qie,ise,vse,yse,Loe,yoe,Doe,Yo,Dse,dF,Uoe,lre,cre,Joe,Pre,Fre,Yre,Zre,Xre,Qre,Jre,ple,Cle,Sle,Fle,VF,Xle,Hce,Uce,Wce,GF,mde,gde,Ge,$de,KF,hs,YF,Wde,upe,dpe,ppe,hpe,_pe,She,xhe,Fhe,OV,iD,vF,eoe,Jse,efe,ofe,pfe,fl,Zu,Zy,Ype,nme,ume,dme,zme,jme,wD,ige,pge,hge,Ege,$ve,Ave,fye,$ye,Aye,Om,$ie,Fye,Hye,Uye,Fs,mbe,$be,Wbe,Xbe,g_e,K_e];const ir="ElInfiniteScroll",Z_e=50,X_e=200,Q_e=0,J_e={delay:{type:Number,default:X_e},distance:{type:Number,default:Q_e},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},Kk=(t,e)=>Object.entries(J_e).reduce((n,[i,s])=>{var o,r;const{type:a,default:l}=s,c=t.getAttribute(`infinite-scroll-${i}`);let u=(r=(o=e[c])!=null?o:c)!=null?r:l;return u=u==="false"?!1:u,u=a(u),n[i]=Number.isNaN(u)?l:u,n},{}),l3=t=>{const{observer:e}=t[ir];e&&(e.disconnect(),delete t[ir].observer)},ewe=(t,e)=>{const{container:n,containerEl:i,instance:s,observer:o,lastScrollTop:r}=t[ir],{disabled:a,distance:l}=Kk(t,s),{clientHeight:c,scrollHeight:u,scrollTop:d}=i,h=d-r;if(t[ir].lastScrollTop=d,o||a||h<0)return;let f=!1;if(n===t)f=u-(c+d)<=l;else{const{clientTop:m,scrollHeight:g}=t,y=Oq(t,i);f=d+c>=y+m+g-l}f&&e.call(s)};function Pw(t,e){const{containerEl:n,instance:i}=t[ir],{disabled:s}=Kk(t,i);s||n.clientHeight===0||(n.scrollHeight<=n.clientHeight?e.call(i):l3(t))}const twe={async mounted(t,e){const{instance:n,value:i}=e;ot(i)||ki(ir,"'v-infinite-scroll' binding value must be a function"),await je();const{delay:s,immediate:o}=Kk(t,n),r=UE(t,!0),a=r===window?document.documentElement:r,l=Nu(ewe.bind(null,t,i),s);if(r){if(t[ir]={instance:n,container:r,containerEl:a,delay:s,cb:i,onScroll:l,lastScrollTop:a.scrollTop},o){const c=new MutationObserver(Nu(Pw.bind(null,t,i),Z_e));t[ir].observer=c,c.observe(t,{childList:!0,subtree:!0}),Pw(t,i)}r.addEventListener("scroll",l)}},unmounted(t){const{container:e,onScroll:n}=t[ir];e==null||e.removeEventListener("scroll",n),l3(t)},async updated(t){t[ir]||await je();const{containerEl:e,cb:n,observer:i}=t[ir];e.clientHeight&&i&&Pw(t,n)}},vC=twe;vC.install=t=>{t.directive("InfiniteScroll",vC)};const nwe=vC;function iwe(t){let e;const n=_e("loading"),i=F(!1),s=Yt({...t,originalPosition:"",originalOverflow:"",visible:!1});function o(f){s.text=f}function r(){const f=s.parent;if(!f.vLoadingAddClassList){let m=f.getAttribute("loading-number");m=Number.parseInt(m)-1,m?f.setAttribute("loading-number",m.toString()):(Zs(f,n.bm("parent","relative")),f.removeAttribute("loading-number")),Zs(f,n.bm("parent","hidden"))}a(),d.unmount()}function a(){var f,m;(m=(f=h.$el)==null?void 0:f.parentNode)==null||m.removeChild(h.$el)}function l(){var f;t.beforeClose&&!t.beforeClose()||(i.value=!0,clearTimeout(e),e=window.setTimeout(c,400),s.visible=!1,(f=t.closed)==null||f.call(t))}function c(){if(!i.value)return;const f=s.parent;i.value=!1,f.vLoadingAddClassList=void 0,r()}const d=LP({name:"ElLoading",setup(){return()=>{const f=s.spinner||s.svg,m=Ze("svg",{class:"circular",viewBox:s.svgViewBox?s.svgViewBox:"0 0 50 50",...f?{innerHTML:f}:{}},[Ze("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),g=s.text?Ze("p",{class:n.b("text")},[s.text]):void 0;return Ze(oi,{name:n.b("fade"),onAfterLeave:c},{default:ee(()=>[ct(Z("div",{style:{backgroundColor:s.background||""},class:[n.b("mask"),s.customClass,s.fullscreen?"is-fullscreen":""]},[Ze("div",{class:n.b("spinner")},[m,g])]),[[Vt,s.visible]])])})}}}),h=d.mount(document.createElement("div"));return{...Ei(s),setText:o,removeElLoadingChild:a,close:l,handleAfterLeave:c,vm:h,get $el(){return h.$el}}}let Zg;const yC=function(t={}){if(!Nt)return;const e=swe(t);if(e.fullscreen&&Zg)return Zg;const n=iwe({...e,closed:()=>{var s;(s=e.closed)==null||s.call(e),e.fullscreen&&(Zg=void 0)}});owe(e,e.parent,n),Z$(e,e.parent,n),e.parent.vLoadingAddClassList=()=>Z$(e,e.parent,n);let i=e.parent.getAttribute("loading-number");return i?i=`${Number.parseInt(i)+1}`:i="1",e.parent.setAttribute("loading-number",i),e.parent.appendChild(n.$el),je(()=>n.visible.value=e.visible),e.fullscreen&&(Zg=n),n},swe=t=>{var e,n,i,s;let o;return at(t.target)?o=(e=document.querySelector(t.target))!=null?e:document.body:o=t.target||document.body,{parent:o===document.body||t.body?document.body:o,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:o===document.body&&((n=t.fullscreen)!=null?n:!0),lock:(i=t.lock)!=null?i:!1,customClass:t.customClass||"",visible:(s=t.visible)!=null?s:!0,target:o}},owe=async(t,e,n)=>{const{nextZIndex:i}=hl(),s={};if(t.fullscreen)n.originalPosition.value=Ba(document.body,"position"),n.originalOverflow.value=Ba(document.body,"overflow"),s.zIndex=i();else if(t.parent===document.body){n.originalPosition.value=Ba(document.body,"position"),await je();for(const o of["top","left"]){const r=o==="top"?"scrollTop":"scrollLeft";s[o]=`${t.target.getBoundingClientRect()[o]+document.body[r]+document.documentElement[r]-Number.parseInt(Ba(document.body,`margin-${o}`),10)}px`}for(const o of["height","width"])s[o]=`${t.target.getBoundingClientRect()[o]}px`}else n.originalPosition.value=Ba(e,"position");for(const[o,r]of Object.entries(s))n.$el.style[o]=r},Z$=(t,e,n)=>{const i=_e("loading");["absolute","fixed","sticky"].includes(n.originalPosition.value)?Zs(e,i.bm("parent","relative")):Wr(e,i.bm("parent","relative")),t.fullscreen&&t.lock?Wr(e,i.bm("parent","hidden")):Zs(e,i.bm("parent","hidden"))},bC=Symbol("ElLoading"),X$=(t,e)=>{var n,i,s,o;const r=e.instance,a=h=>Et(e.value)?e.value[h]:void 0,l=h=>{const f=at(h)&&(r==null?void 0:r[h])||h;return f&&F(f)},c=h=>l(a(h)||t.getAttribute(`element-loading-${xc(h)}`)),u=(n=a("fullscreen"))!=null?n:e.modifiers.fullscreen,d={text:c("text"),svg:c("svg"),svgViewBox:c("svgViewBox"),spinner:c("spinner"),background:c("background"),customClass:c("customClass"),fullscreen:u,target:(i=a("target"))!=null?i:u?void 0:t,body:(s=a("body"))!=null?s:e.modifiers.body,lock:(o=a("lock"))!=null?o:e.modifiers.lock};t[bC]={options:d,instance:yC(d)}},rwe=(t,e)=>{for(const n of Object.keys(e))pn(e[n])&&(e[n].value=t[n])},Q$={mounted(t,e){e.value&&X$(t,e)},updated(t,e){const n=t[bC];e.oldValue!==e.value&&(e.value&&!e.oldValue?X$(t,e):e.value&&e.oldValue?Et(e.value)&&rwe(e.value,n.options):n==null||n.instance.close())},unmounted(t){var e;(e=t[bC])==null||e.instance.close()}},awe={install(t){t.directive("loading",Q$),t.config.globalProperties.$loading=yC},directive:Q$,service:yC},c3=["success","info","warning","error"],Hs=Mn({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:Nt?document.body:void 0}),lwe=De({customClass:{type:String,default:Hs.customClass},center:{type:Boolean,default:Hs.center},dangerouslyUseHTMLString:{type:Boolean,default:Hs.dangerouslyUseHTMLString},duration:{type:Number,default:Hs.duration},icon:{type:gn,default:Hs.icon},id:{type:String,default:Hs.id},message:{type:ae([String,Object,Function]),default:Hs.message},onClose:{type:ae(Function),required:!1},showClose:{type:Boolean,default:Hs.showClose},type:{type:String,values:c3,default:Hs.type},offset:{type:Number,default:Hs.offset},zIndex:{type:Number,default:Hs.zIndex},grouping:{type:Boolean,default:Hs.grouping},repeatNum:{type:Number,default:Hs.repeatNum}}),cwe={destroy:()=>!0},jr=zO([]),uwe=t=>{const e=jr.findIndex(s=>s.id===t),n=jr[e];let i;return e>0&&(i=jr[e-1]),{current:n,prev:i}},dwe=t=>{const{prev:e}=uwe(t);return e?e.vm.exposed.bottom.value:0},pwe=["id"],hwe=["innerHTML"],fwe=J({name:"ElMessage"}),mwe=J({...fwe,props:lwe,emits:cwe,setup(t,{expose:e}){const n=t,{Close:i}=qE,s=_e("message"),o=F(),r=F(!1),a=F(0);let l;const c=T(()=>n.type?n.type==="error"?"danger":n.type:"info"),u=T(()=>{const S=n.type;return{[s.bm("icon",S)]:S&&Sc[S]}}),d=T(()=>n.icon||Sc[n.type]||""),h=T(()=>dwe(n.id)),f=T(()=>n.offset+h.value),m=T(()=>a.value+f.value),g=T(()=>({top:`${f.value}px`,zIndex:n.zIndex}));function y(){n.duration!==0&&({stop:l}=Yu(()=>{C()},n.duration))}function _(){l==null||l()}function C(){r.value=!1}function w({code:S}){S===Xe.esc&&C()}return ft(()=>{y(),r.value=!0}),Ce(()=>n.repeatNum,()=>{_(),y()}),En(document,"keydown",w),ms(o,()=>{a.value=o.value.getBoundingClientRect().height}),e({visible:r,bottom:m,close:C}),(S,E)=>(I(),ce(oi,{name:p(s).b("fade"),onBeforeLeave:S.onClose,onAfterLeave:E[0]||(E[0]=k=>S.$emit("destroy")),persisted:""},{default:ee(()=>[ct(G("div",{id:S.id,ref_key:"messageRef",ref:o,class:x([p(s).b(),{[p(s).m(S.type)]:S.type&&!S.icon},p(s).is("center",S.center),p(s).is("closable",S.showClose),S.customClass]),style:Ke(p(g)),role:"alert",onMouseenter:_,onMouseleave:y},[S.repeatNum>1?(I(),ce(p(VV),{key:0,value:S.repeatNum,type:p(c),class:x(p(s).e("badge"))},null,8,["value","type","class"])):re("v-if",!0),p(d)?(I(),ce(p(Ge),{key:1,class:x([p(s).e("icon"),p(u)])},{default:ee(()=>[(I(),ce(It(p(d))))]),_:1},8,["class"])):re("v-if",!0),me(S.$slots,"default",{},()=>[S.dangerouslyUseHTMLString?(I(),H(Ye,{key:1},[re(" Caution here, message could've been compromised, never use user's input as message "),G("p",{class:x(p(s).e("content")),innerHTML:S.message},null,10,hwe)],2112)):(I(),H("p",{key:0,class:x(p(s).e("content"))},Re(S.message),3))]),S.showClose?(I(),ce(p(Ge),{key:2,class:x(p(s).e("closeBtn")),onClick:rt(C,["stop"])},{default:ee(()=>[Z(p(i))]),_:1},8,["class","onClick"])):re("v-if",!0)],46,pwe),[[Vt,r.value]])]),_:3},8,["name","onBeforeLeave"]))}});var gwe=Ve(mwe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let vwe=1;const u3=t=>{const e=!t||at(t)||$n(t)||ot(t)?{message:t}:t,n={...Hs,...e};if(!n.appendTo)n.appendTo=document.body;else if(at(n.appendTo)){let i=document.querySelector(n.appendTo);gr(i)||(i=document.body),n.appendTo=i}return n},ywe=t=>{const e=jr.indexOf(t);if(e===-1)return;jr.splice(e,1);const{handler:n}=t;n.close()},bwe=({appendTo:t,...e},n)=>{const{nextZIndex:i}=hl(),s=`message_${vwe++}`,o=e.onClose,r=document.createElement("div"),a={...e,zIndex:i()+e.zIndex,id:s,onClose:()=>{o==null||o(),ywe(d)},onDestroy:()=>{Wp(null,r)}},l=Z(gwe,a,ot(a.message)||$n(a.message)?{default:ot(a.message)?a.message:()=>a.message}:null);l.appContext=n||nh._context,Wp(l,r),t.appendChild(r.firstElementChild);const c=l.component,d={id:s,vnode:l,vm:c,handler:{close:()=>{c.exposed.visible.value=!1}},props:l.component.props};return d},nh=(t={},e)=>{if(!Nt)return{close:()=>{}};if(st(F1.max)&&jr.length>=F1.max)return{close:()=>{}};const n=u3(t);if(n.grouping&&jr.length){const s=jr.find(({vnode:o})=>{var r;return((r=o.props)==null?void 0:r.message)===n.message});if(s)return s.props.repeatNum+=1,s.props.type=n.type,s.handler}const i=bwe(n,e);return jr.push(i),i.handler};c3.forEach(t=>{nh[t]=(e={},n)=>{const i=u3(e);return nh({...i,type:t},n)}});function _we(t){for(const e of jr)(!t||t===e.props.type)&&e.handler.close()}nh.closeAll=_we;nh._context=null;const oo=LR(nh,"$message"),wwe=J({name:"ElMessageBox",directives:{TrapFocus:pie},components:{ElButton:os,ElFocusTrap:__,ElInput:hs,ElOverlay:wk,ElIcon:Ge,...qE},inheritAttrs:!1,props:{buttonSize:{type:String,validator:cg},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(t,{emit:e}){const{t:n}=Gt(),i=_e("message-box"),s=F(!1),{nextZIndex:o}=hl(),r=Yt({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:o()}),a=T(()=>{const P=r.type;return{[i.bm("icon",P)]:P&&Sc[P]}}),l=yr(),c=yr(),u=gi(T(()=>t.buttonSize),{prop:!0,form:!0,formItem:!0}),d=T(()=>r.icon||Sc[r.type]||""),h=T(()=>!!r.message),f=F(),m=F(),g=F(),y=F(),_=F(),C=T(()=>r.confirmButtonClass);Ce(()=>r.inputValue,async P=>{await je(),t.boxType==="prompt"&&P!==null&&L()},{immediate:!0}),Ce(()=>s.value,P=>{var z,U;P&&(t.boxType!=="prompt"&&(r.autofocus?g.value=(U=(z=_.value)==null?void 0:z.$el)!=null?U:f.value:g.value=f.value),r.zIndex=o()),t.boxType==="prompt"&&(P?je().then(()=>{var W;y.value&&y.value.$el&&(r.autofocus?g.value=(W=O())!=null?W:f.value:g.value=f.value)}):(r.editorErrorMessage="",r.validateError=!1))});const w=T(()=>t.draggable);YR(f,m,w),ft(async()=>{await je(),t.closeOnHashChange&&window.addEventListener("hashchange",S)}),Pn(()=>{t.closeOnHashChange&&window.removeEventListener("hashchange",S)});function S(){s.value&&(s.value=!1,je(()=>{r.action&&e("action",r.action)}))}const E=()=>{t.closeOnClickModal&&$(r.distinguishCancelAndClose?"close":"cancel")},k=rk(E),A=P=>{if(r.inputType!=="textarea")return P.preventDefault(),$("confirm")},$=P=>{var z;t.boxType==="prompt"&&P==="confirm"&&!L()||(r.action=P,r.beforeClose?(z=r.beforeClose)==null||z.call(r,P,r,S):S())},L=()=>{if(t.boxType==="prompt"){const P=r.inputPattern;if(P&&!P.test(r.inputValue||""))return r.editorErrorMessage=r.inputErrorMessage||n("el.messagebox.error"),r.validateError=!0,!1;const z=r.inputValidator;if(typeof z=="function"){const U=z(r.inputValue);if(U===!1)return r.editorErrorMessage=r.inputErrorMessage||n("el.messagebox.error"),r.validateError=!0,!1;if(typeof U=="string")return r.editorErrorMessage=U,r.validateError=!0,!1}}return r.editorErrorMessage="",r.validateError=!1,!0},O=()=>{const P=y.value.$refs;return P.input||P.textarea},B=()=>{$("close")},V=()=>{t.closeOnPressEscape&&B()};return t.lockScroll&&XR(s),$J(s),{...Ei(r),ns:i,overlayEvent:k,visible:s,hasMessage:h,typeClass:a,contentId:l,inputId:c,btnSize:u,iconComponent:d,confirmButtonClasses:C,rootRef:f,focusStartRef:g,headerRef:m,inputRef:y,confirmRef:_,doClose:S,handleClose:B,onCloseRequested:V,handleWrapperClick:E,handleInputEnter:A,handleAction:$,t:n}}}),Cwe=["aria-label","aria-describedby"],Swe=["aria-label"],Ewe=["id"];function kwe(t,e,n,i,s,o){const r=pt("el-icon"),a=pt("close"),l=pt("el-input"),c=pt("el-button"),u=pt("el-focus-trap"),d=pt("el-overlay");return I(),ce(oi,{name:"fade-in-linear",onAfterLeave:e[11]||(e[11]=h=>t.$emit("vanish")),persisted:""},{default:ee(()=>[ct(Z(d,{"z-index":t.zIndex,"overlay-class":[t.ns.is("message-box"),t.modalClass],mask:t.modal},{default:ee(()=>[G("div",{role:"dialog","aria-label":t.title,"aria-modal":"true","aria-describedby":t.showInput?void 0:t.contentId,class:x(`${t.ns.namespace.value}-overlay-message-box`),onClick:e[8]||(e[8]=(...h)=>t.overlayEvent.onClick&&t.overlayEvent.onClick(...h)),onMousedown:e[9]||(e[9]=(...h)=>t.overlayEvent.onMousedown&&t.overlayEvent.onMousedown(...h)),onMouseup:e[10]||(e[10]=(...h)=>t.overlayEvent.onMouseup&&t.overlayEvent.onMouseup(...h))},[Z(u,{loop:"",trapped:t.visible,"focus-trap-el":t.rootRef,"focus-start-el":t.focusStartRef,onReleaseRequested:t.onCloseRequested},{default:ee(()=>[G("div",{ref:"rootRef",class:x([t.ns.b(),t.customClass,t.ns.is("draggable",t.draggable),{[t.ns.m("center")]:t.center}]),style:Ke(t.customStyle),tabindex:"-1",onClick:e[7]||(e[7]=rt(()=>{},["stop"]))},[t.title!==null&&t.title!==void 0?(I(),H("div",{key:0,ref:"headerRef",class:x(t.ns.e("header"))},[G("div",{class:x(t.ns.e("title"))},[t.iconComponent&&t.center?(I(),ce(r,{key:0,class:x([t.ns.e("status"),t.typeClass])},{default:ee(()=>[(I(),ce(It(t.iconComponent)))]),_:1},8,["class"])):re("v-if",!0),G("span",null,Re(t.title),1)],2),t.showClose?(I(),H("button",{key:0,type:"button",class:x(t.ns.e("headerbtn")),"aria-label":t.t("el.messagebox.close"),onClick:e[0]||(e[0]=h=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel")),onKeydown:e[1]||(e[1]=Bt(rt(h=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[Z(r,{class:x(t.ns.e("close"))},{default:ee(()=>[Z(a)]),_:1},8,["class"])],42,Swe)):re("v-if",!0)],2)):re("v-if",!0),G("div",{id:t.contentId,class:x(t.ns.e("content"))},[G("div",{class:x(t.ns.e("container"))},[t.iconComponent&&!t.center&&t.hasMessage?(I(),ce(r,{key:0,class:x([t.ns.e("status"),t.typeClass])},{default:ee(()=>[(I(),ce(It(t.iconComponent)))]),_:1},8,["class"])):re("v-if",!0),t.hasMessage?(I(),H("div",{key:1,class:x(t.ns.e("message"))},[me(t.$slots,"default",{},()=>[t.dangerouslyUseHTMLString?(I(),ce(It(t.showInput?"label":"p"),{key:1,for:t.showInput?t.inputId:void 0,innerHTML:t.message},null,8,["for","innerHTML"])):(I(),ce(It(t.showInput?"label":"p"),{key:0,for:t.showInput?t.inputId:void 0},{default:ee(()=>[Ut(Re(t.dangerouslyUseHTMLString?"":t.message),1)]),_:1},8,["for"]))])],2)):re("v-if",!0)],2),ct(G("div",{class:x(t.ns.e("input"))},[Z(l,{id:t.inputId,ref:"inputRef",modelValue:t.inputValue,"onUpdate:modelValue":e[2]||(e[2]=h=>t.inputValue=h),type:t.inputType,placeholder:t.inputPlaceholder,"aria-invalid":t.validateError,class:x({invalid:t.validateError}),onKeydown:Bt(t.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),G("div",{class:x(t.ns.e("errormsg")),style:Ke({visibility:t.editorErrorMessage?"visible":"hidden"})},Re(t.editorErrorMessage),7)],2),[[Vt,t.showInput]])],10,Ewe),G("div",{class:x(t.ns.e("btns"))},[t.showCancelButton?(I(),ce(c,{key:0,loading:t.cancelButtonLoading,class:x([t.cancelButtonClass]),round:t.roundButton,size:t.btnSize,onClick:e[3]||(e[3]=h=>t.handleAction("cancel")),onKeydown:e[4]||(e[4]=Bt(rt(h=>t.handleAction("cancel"),["prevent"]),["enter"]))},{default:ee(()=>[Ut(Re(t.cancelButtonText||t.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):re("v-if",!0),ct(Z(c,{ref:"confirmRef",type:"primary",loading:t.confirmButtonLoading,class:x([t.confirmButtonClasses]),round:t.roundButton,disabled:t.confirmButtonDisabled,size:t.btnSize,onClick:e[5]||(e[5]=h=>t.handleAction("confirm")),onKeydown:e[6]||(e[6]=Bt(rt(h=>t.handleAction("confirm"),["prevent"]),["enter"]))},{default:ee(()=>[Ut(Re(t.confirmButtonText||t.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[Vt,t.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,Cwe)]),_:3},8,["z-index","overlay-class","mask"]),[[Vt,t.visible]])]),_:3})}var Twe=Ve(wwe,[["render",kwe],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const Um=new Map,Iwe=t=>{let e=document.body;return t.appendTo&&(at(t.appendTo)&&(e=document.querySelector(t.appendTo)),gr(t.appendTo)&&(e=t.appendTo),gr(e)||(e=document.body)),e},xwe=(t,e,n=null)=>{const i=Z(Twe,t,ot(t.message)||$n(t.message)?{default:ot(t.message)?t.message:()=>t.message}:null);return i.appContext=n,Wp(i,e),Iwe(t).appendChild(e.firstElementChild),i.component},Mwe=()=>document.createElement("div"),$we=(t,e)=>{const n=Mwe();t.onVanish=()=>{Wp(null,n),Um.delete(s)},t.onAction=o=>{const r=Um.get(s);let a;t.showInput?a={value:s.inputValue,action:o}:a=o,t.callback?t.callback(a,i.proxy):o==="cancel"||o==="close"?t.distinguishCancelAndClose&&o!=="cancel"?r.reject("close"):r.reject("cancel"):r.resolve(a)};const i=xwe(t,n,e),s=i.proxy;for(const o in t)Pt(t,o)&&!Pt(s.$props,o)&&(s[o]=t[o]);return s.visible=!0,s};function wh(t,e=null){if(!Nt)return Promise.reject();let n;return at(t)||$n(t)?t={message:t}:n=t.callback,new Promise((i,s)=>{const o=$we(t,e??wh._context);Um.set(o,{options:t,callback:n,resolve:i,reject:s})})}const Awe=["alert","confirm","prompt"],Lwe={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};Awe.forEach(t=>{wh[t]=Owe(t)});function Owe(t){return(e,n,i,s)=>{let o="";return Et(n)?(i=n,o=""):Ui(n)?o="":o=n,wh(Object.assign({title:o,message:e,type:"",...Lwe[t]},i,{boxType:t}),s)}}wh.close=()=>{Um.forEach((t,e)=>{e.doClose()}),Um.clear()};wh._context=null;const xl=wh;xl.install=t=>{xl._context=t._context,t.config.globalProperties.$msgbox=xl,t.config.globalProperties.$messageBox=xl,t.config.globalProperties.$alert=xl.alert,t.config.globalProperties.$confirm=xl.confirm,t.config.globalProperties.$prompt=xl.prompt};const Pwe=xl,d3=["success","info","warning","error"],Rwe=De({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:gn},id:{type:String,default:""},message:{type:ae([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:ae(Function),default:()=>{}},onClose:{type:ae(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...d3,""],default:""},zIndex:{type:Number,default:0}}),Vwe={destroy:()=>!0},Fwe=["id"],Dwe=["textContent"],Nwe={key:0},Bwe=["innerHTML"],zwe=J({name:"ElNotification"}),Hwe=J({...zwe,props:Rwe,emits:Vwe,setup(t,{expose:e}){const n=t,i=_e("notification"),{Close:s}=$R,o=F(!1);let r;const a=T(()=>{const y=n.type;return y&&Sc[n.type]?i.m(y):""}),l=T(()=>n.type&&Sc[n.type]||n.icon),c=T(()=>n.position.endsWith("right")?"right":"left"),u=T(()=>n.position.startsWith("top")?"top":"bottom"),d=T(()=>({[u.value]:`${n.offset}px`,zIndex:n.zIndex}));function h(){n.duration>0&&({stop:r}=Yu(()=>{o.value&&m()},n.duration))}function f(){r==null||r()}function m(){o.value=!1}function g({code:y}){y===Xe.delete||y===Xe.backspace?f():y===Xe.esc?o.value&&m():h()}return ft(()=>{h(),o.value=!0}),En(document,"keydown",g),e({visible:o,close:m}),(y,_)=>(I(),ce(oi,{name:p(i).b("fade"),onBeforeLeave:y.onClose,onAfterLeave:_[1]||(_[1]=C=>y.$emit("destroy")),persisted:""},{default:ee(()=>[ct(G("div",{id:y.id,class:x([p(i).b(),y.customClass,p(c)]),style:Ke(p(d)),role:"alert",onMouseenter:f,onMouseleave:h,onClick:_[0]||(_[0]=(...C)=>y.onClick&&y.onClick(...C))},[p(l)?(I(),ce(p(Ge),{key:0,class:x([p(i).e("icon"),p(a)])},{default:ee(()=>[(I(),ce(It(p(l))))]),_:1},8,["class"])):re("v-if",!0),G("div",{class:x(p(i).e("group"))},[G("h2",{class:x(p(i).e("title")),textContent:Re(y.title)},null,10,Dwe),ct(G("div",{class:x(p(i).e("content")),style:Ke(y.title?void 0:{margin:0})},[me(y.$slots,"default",{},()=>[y.dangerouslyUseHTMLString?(I(),H(Ye,{key:1},[re(" Caution here, message could've been compromised, never use user's input as message "),G("p",{innerHTML:y.message},null,8,Bwe)],2112)):(I(),H("p",Nwe,Re(y.message),1))])],6),[[Vt,y.message]]),y.showClose?(I(),ce(p(Ge),{key:0,class:x(p(i).e("closeBtn")),onClick:rt(m,["stop"])},{default:ee(()=>[Z(p(s))]),_:1},8,["class","onClick"])):re("v-if",!0)],2)],46,Fwe),[[Vt,o.value]])]),_:3},8,["name","onBeforeLeave"]))}});var Uwe=Ve(Hwe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);const ob={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},_C=16;let Wwe=1;const ih=function(t={},e=null){if(!Nt)return{close:()=>{}};(typeof t=="string"||$n(t))&&(t={message:t});const n=t.position||"top-right";let i=t.offset||0;ob[n].forEach(({vm:d})=>{var h;i+=(((h=d.el)==null?void 0:h.offsetHeight)||0)+_C}),i+=_C;const{nextZIndex:s}=hl(),o=`notification_${Wwe++}`,r=t.onClose,a={zIndex:s(),...t,offset:i,id:o,onClose:()=>{Gwe(o,n,r)}};let l=document.body;gr(t.appendTo)?l=t.appendTo:at(t.appendTo)&&(l=document.querySelector(t.appendTo)),gr(l)||(l=document.body);const c=document.createElement("div"),u=Z(Uwe,a,$n(a.message)?{default:()=>a.message}:null);return u.appContext=e??ih._context,u.props.onDestroy=()=>{Wp(null,c)},Wp(u,c),ob[n].push({vm:u}),l.appendChild(c.firstElementChild),{close:()=>{u.component.exposed.visible.value=!1}}};d3.forEach(t=>{ih[t]=(e={})=>((typeof e=="string"||$n(e))&&(e={message:e}),ih({...e,type:t}))});function Gwe(t,e,n){const i=ob[e],s=i.findIndex(({vm:c})=>{var u;return((u=c.component)==null?void 0:u.props.id)===t});if(s===-1)return;const{vm:o}=i[s];if(!o)return;n==null||n(o);const r=o.el.offsetHeight,a=e.split("-")[0];i.splice(s,1);const l=i.length;if(!(l<1))for(let c=s;c<l;c++){const{el:u,component:d}=i[c].vm,h=Number.parseInt(u.style[a],10)-r-_C;d.props.offset=h}}function jwe(){for(const t of Object.values(ob))t.forEach(({vm:e})=>{e.component.exposed.visible.value=!1})}ih.closeAll=jwe;ih._context=null;const p3=LR(ih,"$notify");var qwe=[nwe,awe,oo,Pwe,p3,nD],Kwe=pee([...Y_e,...qwe]);const Ywe=""+new URL("title-0332cbc4.png",import.meta.url).href;var wC;let ny=wC=class extends Ju{constructor(t){super(t),this.type="none"}clone(){return new wC({type:this.type})}};v([h8({none:"none",stayAbove:"stay-above"})],ny.prototype,"type",void 0),ny=wC=v([Ae("esri.ground.NavigationConstraint")],ny);let Rn=class extends dt{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.TEXT_SHOW_BASELINE=!1,this.TEXT_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_OPTIMIZATIONS=!1,this.TESTS_DISABLE_FAST_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.LINE_WIREFRAMES=!1,this.TERRAIN_USE_LEGACY_SHADING=!1}};v([b()],Rn.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),v([b()],Rn.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0),v([b()],Rn.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0),v([b()],Rn.prototype,"DECONFLICTOR_SHOW_GRID",void 0),v([b()],Rn.prototype,"LABELS_SHOW_BORDER",void 0),v([b()],Rn.prototype,"TEXT_SHOW_BASELINE",void 0),v([b()],Rn.prototype,"TEXT_SHOW_BORDER",void 0),v([b()],Rn.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0),v([b()],Rn.prototype,"OVERLAY_SHOW_CENTER",void 0),v([b()],Rn.prototype,"SHOW_POI",void 0),v([b()],Rn.prototype,"TESTS_DISABLE_OPTIMIZATIONS",void 0),v([b()],Rn.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0),v([b()],Rn.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),v([b()],Rn.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),v([b()],Rn.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),v([b()],Rn.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0),v([b()],Rn.prototype,"I3S_TREE_SHOW_TILES",void 0),v([b()],Rn.prototype,"I3S_SHOW_MODIFICATIONS",void 0),v([b()],Rn.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),v([b()],Rn.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),v([b()],Rn.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0),v([b()],Rn.prototype,"LINE_WIREFRAMES",void 0),v([b()],Rn.prototype,"TERRAIN_USE_LEGACY_SHADING",void 0),Rn=v([Ae("esri.views.3d.support.DebugFlags")],Rn);const Zwe=new Rn;var CC;let $r=CC=class extends OL(Wu){constructor(t){super(t),this.opacity=1,this.shading=!Zwe.TERRAIN_USE_LEGACY_SHADING,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Ht;const e=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&Tt.getLogger(this.declaredClass).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},n=i=>{i.parent=null};this.layers.on("after-add",i=>e(i.item)),this.layers.on("after-remove",i=>n(i.item))}initialize(){this.when().catch(t=>{Tt.getLogger(this.declaredClass).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)e.destroy();this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set layers(t){this._set("layers",Z5(t,this._get("layers")))}writeLayers(t,e,n,i){const s=[];t&&(i={...i,layerContainerType:"ground"},t.forEach(o=>{if("write"in o){const r={};X5(o)().write(r,i)&&s.push(r)}else i&&i.messages&&i.messages.push(new Ue("layer:unsupported",`Layers (${o.title}, ${o.id}) of type '${o.declaredClass}' cannot be persisted in the ground`,{layer:o}))})),e.layers=s}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return Q5(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:n}=await Fe(()=>import("./ElevationQuery-a4c49f10.js"),["./ElevationQuery-a4c49f10.js","./asyncUtils-087555fc.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./unitUtils-dd6fb8ee.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./projection-acd73147.js","./preload-helper-41c905a7.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./SimpleObservable-8e532943.js","./mat4-7dde83b1.js","./assets-cd44347b.js","./request-24011425.js","./aaBoundingRect-b340cf8c.js","./zscale-48bab05e.js","./geometry-eec1b371.js","./typeUtils-cd52dc20.js","./TileInfo-c5c8c8d2.js"],import.meta.url);xs(e);const i=new n,s=this.layers.filter(J$).toArray();return i.queryAll(s,t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:n}=await Fe(()=>import("./ElevationQuery-a4c49f10.js"),["./ElevationQuery-a4c49f10.js","./asyncUtils-087555fc.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./unitUtils-dd6fb8ee.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./projection-acd73147.js","./preload-helper-41c905a7.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./SimpleObservable-8e532943.js","./mat4-7dde83b1.js","./assets-cd44347b.js","./request-24011425.js","./aaBoundingRect-b340cf8c.js","./zscale-48bab05e.js","./geometry-eec1b371.js","./typeUtils-cd52dc20.js","./TileInfo-c5c8c8d2.js"],import.meta.url);xs(e);const i=new n,s=this.layers.filter(J$).toArray();return i.createSamplerAll(s,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:hr(this.surfaceColor),navigationConstraint:hr(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new CC({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}_loadLayersFromJSON(t,e,n){const i=e&&e.origin||"web-scene",s=e&&e.portal||null,o=e&&e.url||null;return Fe(()=>import("./layersCreator-d56d5bc5.js"),["./layersCreator-d56d5bc5.js","./Collection-7c37b74e.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./lazyLayerLoader-aae86fba.js","./preload-helper-41c905a7.js","./PortalItem-e4ba4b94.js","./assets-cd44347b.js","./request-24011425.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./Extent-a1a1de42.js","./Portal-c6e03126.js","./locale-30120714.js","./PortalGroup-d495847c.js","./jsonMap-190c5593.js","./PortalUser-1016c43c.js","./portalLayers-ac4fdecd.js","./layersLoader-92ad9054.js","./Layer-cea228f0.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./Identifiable-093f90a8.js","./arcgisLayerUrl-bed3cba1.js","./persistableUrlUtils-d0777bec.js","./jsonContext-342cb5f2.js","./portalItemUtils-83d91a4e.js","./projection-acd73147.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./unitUtils-dd6fb8ee.js","./mat4-7dde83b1.js","./aaBoundingRect-b340cf8c.js","./zscale-48bab05e.js","./styleUtils-08eaa4d2.js","./asyncUtils-087555fc.js"],import.meta.url).then(({populateOperationalLayers:r})=>{xs(n);const a=[];if(t.layers&&Array.isArray(t.layers)){const l={context:{origin:i,url:o,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(r(this.layers,t.layers,l))}return Ni(a)}).then(()=>{})}};function Xwe(t){return t&&"createElevationSampler"in t}function J$(t){return t.type==="elevation"||Xwe(t)}v([b({json:{read:!1}})],$r.prototype,"layers",null),v([NL("layers")],$r.prototype,"writeLayers",null),v([b({readOnly:!0})],$r.prototype,"resourceInfo",void 0),v([b({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:eI,read:{reader:f8,source:"transparency"},write:{writer:(t,e)=>{e.transparency=m8(t)},target:"transparency"}}})],$r.prototype,"opacity",void 0),v([b({type:Boolean,nonNullable:!0,json:{read:!1}})],$r.prototype,"shading",void 0),v([b({type:cn,json:{type:[eI],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],$r.prototype,"surfaceColor",void 0),v([b({type:ny,json:{write:!0}})],$r.prototype,"navigationConstraint",void 0),$r=CC=v([Ae("esri.Ground")],$r);const rb=$r;function h3(t){var e;return!!(t&&t.loaded&&"capabilities"in t&&((e=t==null?void 0:t.capabilities)!=null&&e.operations)&&"supportsEditing"in t.capabilities.operations&&t.capabilities.operations.supportsEditing===!0)&&!("editingEnabled"in t&&!t.editingEnabled)}const e2=Tt.getLogger("esri.support.basemapUtils");function Qwe(){return{}}function Jwe(t){for(const e in t){const n=t[e];(n==null?void 0:n.destroyed)===!1&&n.destroy(),delete t[e]}}function e0e(t,e){let n;if(typeof t=="string"){if(!(t in JT)){const i=Object.entries(JT).filter(([s,o])=>R0.apiKey&&!o.classic||!R0.apiKey&&o.classic&&!o.deprecated).map(([s])=>`"${s}"`).join(", ");return e2.warn(`Unable to find basemap definition for: ${t}. Try one of these: ${i}`),null}e&&(n=e[t]),n||(n=Ap.fromId(t),e&&(e[t]=n))}else n=DL(Ap,t);return n!=null&&n.destroyed&&(e2.warn("The provided basemap is already destroyed",{basemap:n}),n=null),n}function t0e(t,e){return t===e?!0:r0e(t2(t),t2(e),{mustMatchReferences:!0})==="equal"}function n0e(t,e){var s;if(ke(e)||ke(t))return{spatialReference:null,updating:!1};if(e.loadStatus==="not-loaded")return e.load(),{spatialReference:null,updating:!0};if(e.spatialReference)return{spatialReference:e.spatialReference,updating:!1};if(e.baseLayers.length===0)return{spatialReference:null,updating:!1};const n=e.baseLayers.getItemAt(0);switch(n.loadStatus){case"not-loaded":n.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const i=(("supportedSpatialReferences"in n?n.supportedSpatialReferences:null)||["tileInfo"in n?(s=n.tileInfo)==null?void 0:s.spatialReference:n.spatialReference]).filter(Boolean);return t.spatialReference?{spatialReference:i.find(o=>t.spatialReference.equals(o))??i[0]??null,updating:!1}:{spatialReference:i[0],updating:!1}}function t2(t){return t?!t.loaded&&t.resourceInfo?s0e(t.resourceInfo.data):{baseLayers:n2(t.baseLayers),referenceLayers:n2(t.referenceLayers)}:null}function n2(t){return(Ht.isCollection(t)?t.toArray():t).map(i0e)}function i0e(t){var e,n;return{type:t.type,url:f3("urlTemplate"in t&&t.urlTemplate||t.url||"styleUrl"in t&&t.styleUrl),minScale:"minScale"in t&&t.minScale!=null?t.minScale:0,maxScale:"maxScale"in t&&t.maxScale!=null?t.maxScale:0,opacity:t.opacity!=null?t.opacity:1,visible:t.visible==null||!!t.visible,sublayers:t.type!=="map-image"&&t.type!=="wms"||!q(t.sublayers)||(e=t.sublayers)==null?void 0:e.map(i=>({id:i.id,visible:i.visible})),activeLayerId:t.type==="wmts"?(n=t.activeLayer)==null?void 0:n.id:void 0}}function s0e(t){return t?{baseLayers:i2(t.baseMapLayers.filter(e=>!e.isReference)),referenceLayers:i2(t.baseMapLayers.filter(e=>e.isReference))}:null}function i2(t){return t.map(e=>o0e(e))}function o0e(t){let e;switch(t.layerType){case"VectorTileLayer":e="vector-tile";break;case"ArcGISTiledMapServiceLayer":e="tile";break;default:e="unknown"}return{type:e,url:f3(t.templateUrl||t.urlTemplate||t.styleUrl||t.url),minScale:t.minScale!=null?t.minScale:0,maxScale:t.maxScale!=null?t.maxScale:0,opacity:t.opacity!=null?t.opacity:1,visible:t.visibility==null||!!t.visibility,sublayers:void 0,activeLayerId:void 0}}function r0e(t,e,n){return t!=null!=(e!=null)?"not-equal":t?s2(t.baseLayers,e.baseLayers)?s2(t.referenceLayers,e.referenceLayers)?"equal":n.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function s2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!a0e(t[n],e[n]))return!1;return!0}function a0e(t,e){if(t.type!==e.type||t.url!==e.url||t.minScale!==e.minScale||t.maxScale!==e.maxScale||t.visible!==e.visible||t.opacity!==e.opacity)return!1;if(q(t.activeLayerId)||q(e.activeLayerId))return t.activeLayerId===e.activeLayerId;if(q(t.sublayers)||q(e.sublayers)){if(ke(t.sublayers)||ke(e.sublayers)||t.sublayers.length!==e.sublayers.length)return!1;for(let n=0;n<t.sublayers.length;n++){const i=t.sublayers.at(n),s=e.sublayers.at(n);if(i.id!==s.id||i.visible!==s.visible)return!1}}return!0}function f3(t){return t?g8(t).replace(/^\s*https?:/i,"").toLowerCase():""}const o2={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function l0e(t){let e=null;if(typeof t=="string")if(t in o2){const n=o2[t];e=new rb({resourceInfo:{data:{layers:[n]}}})}else Tt.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=DL(rb,t);return e}let Ar=class extends b8(_8(Ii.EventedMixin(dt))){constructor(e){super(e),this.allLayers=new Oy({getCollections:()=>{var n,i,s;return[(n=this.basemap)==null?void 0:n.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(s=this.basemap)==null?void 0:s.referenceLayers]},getChildrenFunction:n=>"layers"in n?n.layers:null}),this.allTables=w8(this),this.basemap=null,this.editableLayers=new Oy({getCollections:()=>[this.allLayers],itemFilterFunction:h3}),this.ground=new rb,this._basemapCache=Qwe()}destroy(){var e,n;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(n=this.basemap)==null||n.destroy(),Jwe(this._basemapCache),this._basemapCache=null}castBasemap(e){return e0e(e,this._basemapCache)}castGround(e){const n=l0e(e);return ke(n)?this._get("ground"):n}findLayerById(e){return this.allLayers.find(n=>n.id===e)}findTableById(e){return this.allTables.find(n=>n.id===e)}};v([b({readOnly:!0,dependsOn:[]})],Ar.prototype,"allLayers",void 0),v([b({readOnly:!0})],Ar.prototype,"allTables",void 0),v([b({type:Ap})],Ar.prototype,"basemap",void 0),v([ii("basemap")],Ar.prototype,"castBasemap",null),v([b({readOnly:!0})],Ar.prototype,"editableLayers",void 0),v([b({type:rb,nonNullable:!0})],Ar.prototype,"ground",void 0),v([ii("ground")],Ar.prototype,"castGround",null),Ar=v([Ae("esri.Map")],Ar);const m3=Ar;let Ea=class extends GL(Ju){constructor(...e){super(...e),this.position=new Kt([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,n,i,s){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const o={position:e};return n!=null&&(o.heading=n),i!=null&&(o.tilt=i),s!=null&&(o.fov=s),o}return e}writePosition(e,n,i,s){const o=e.clone();o.x=Kl(e.x||0),o.y=Kl(e.y||0),o.z=e.hasZ?Kl(e.z||0):e.z,n[i]=o.write({},s)}readPosition(e,n){const i=new Kt;return i.read(e,n),i.x=Kl(i.x||0),i.y=Kl(i.y||0),i.z=i.hasZ?Kl(i.z||0):i.z,i}equals(e){return!ke(e)&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};v([b({type:Kt,json:{write:{isRequired:!0}}})],Ea.prototype,"position",void 0),v([NL("position")],Ea.prototype,"writePosition",null),v([t8("position")],Ea.prototype,"readPosition",null),v([b({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ii(t=>jL.normalize(Kl(t)))],Ea.prototype,"heading",void 0),v([b({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ii(t=>bc(Kl(t),-180,180))],Ea.prototype,"tilt",void 0),v([b({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Ea.prototype,"fov",void 0),Ea=v([Ae("esri.Camera")],Ea);const c0e=Ea;var SC;let Ml=SC=class extends Ju{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new SC({rotation:this.rotation,scale:this.scale,targetGeometry:q(this.targetGeometry)?this.targetGeometry.clone():null,camera:q(this.camera)?this.camera.clone():null})}};function Rw(){return{enabled:!this.camera}}v([b({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Rw}}}}})],Ml.prototype,"rotation",void 0),v([ii("rotation")],Ml.prototype,"castRotation",null),v([b({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Rw}}}}})],Ml.prototype,"scale",void 0),v([b({types:k8,json:{read:F0,write:!0,origins:{"web-scene":{read:F0,write:{overridePolicy:Rw}}}}})],Ml.prototype,"targetGeometry",void 0),v([b({type:c0e,json:{write:!0}})],Ml.prototype,"camera",void 0),Ml=SC=v([Ae("esri.Viewpoint")],Ml);const dr=Ml,iy={widthBreakpoint:{getValue(t){const e=t.viewSize[0],n=t.breakpoints,i=this.values;return e<=n.xsmall?i.xsmall:e<=n.small?i.small:e<=n.medium?i.medium:e<=n.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],n=t.breakpoints,i=this.values;return e<=n.xsmall?i.xsmall:e<=n.small?i.small:e<=n.medium?i.medium:e<=n.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,n=e[0],i=e[1],s=this.values;return i>=n?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},Vw={xsmall:544,small:768,medium:992,large:1200};function u0e(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function Fw(t,e){return e?iy[t].valueToClassName[e].split(" "):[]}const d0e=t=>{let e=class extends t{constructor(...n){super(...n),this._breakpointsHandles=new si,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=Vw}initialize(){this._breakpointsHandles.add(ge(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),gt))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=sn(this._breakpointsHandles))}set breakpoints(n){if(n===this._get("breakpoints"))return;const i=u0e(n);if(!i){const s=JSON.stringify(Vw,null,2);console.warn("provided breakpoints are not valid, using defaults:"+s)}n=i?n:Vw,this._set("breakpoints",{...n})}_updateClassNames(){if(!this.container)return;const n=kg.acquire(),i=kg.acquire();let s,o=!1;for(s in iy){const r=this[s],a=iy[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});r!==a&&(o=!0,this[s]=a,Fw(s,r).forEach(l=>i.push(l)),Fw(s,a).forEach(l=>n.push(l)))}o&&(this._applyClassNameChanges(n,i),kg.release(n),kg.release(i))}_applyClassNameChanges(n,i){const s=this.container;s&&(i.forEach(o=>s.classList.remove(o)),n.forEach(o=>s.classList.add(o)))}_removeActiveClassNames(){const n=this.container;if(!n)return;let i;for(i in iy)Fw(i,this[i]).forEach(s=>n.classList.remove(s))}};return v([b()],e.prototype,"breakpoints",null),v([b()],e.prototype,"orientation",void 0),v([b()],e.prototype,"widthBreakpoint",void 0),v([b()],e.prototype,"heightBreakpoint",void 0),e=v([Ae("esri.views.BreakpointsOwner")],e),e};let $l=class extends dt{constructor(){super(...arguments),this.items=new Ht,this._watchUpdatingTracking=new NS,this._callbacks=new Map,this._projector=Py(),this._hiddenProjector=Py()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,n=>{for(const i of n.added){const s=()=>i.render();this._callbacks.set(i,s),this._projector.append(this.surface,s)}for(const i of n.removed){const s=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(s.domNode),this._callbacks.delete(i)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const n=this._hiddenSurface,i=this._hiddenProjector;let s=null;const o=()=>(s=e.render(),s);i.append(n,o),i.renderNow();const r={left:0,top:0,right:0,bottom:0};if(s&&s.domNode){const a=s.domNode.getBoundingClientRect();r.left=a.left,r.top=a.top,r.right=a.right,r.bottom=a.bottom}for(i.detach(o);n.firstChild;)n.removeChild(n.firstChild);return r}overlaps(e,n){const i=this.computeBoundingRect(e),s=this.computeBoundingRect(n);return Math.max(i.left,s.left)<=Math.min(i.right,s.right)&&Math.max(i.top,s.top)<=Math.min(i.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e){if(!this.items.some(i=>i.visible))return;const n=e.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach(i=>{n.save(),i.renderCanvas(n),n.restore()}),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};v([b({readOnly:!0})],$l.prototype,"surface",void 0),v([b({readOnly:!0})],$l.prototype,"items",void 0),v([b({readOnly:!0})],$l.prototype,"needsRender",null),v([b({readOnly:!0})],$l.prototype,"_watchUpdatingTracking",void 0),v([b({readOnly:!0})],$l.prototype,"updating",null),$l=v([Ae("esri.views.overlay.ViewOverlay")],$l);const r2=$l;function Cp(t,e,n,i){let s=null,o=1e3;typeof e=="number"?(o=e,i=n):(s=e??null,o=n);let r,a=0;const l=()=>{a=0,t.apply(i,r)},c=(...u)=>{s&&s.apply(i,u),r=u,o?a||(a=setTimeout(l,o)):l()};return c.remove=()=>{a&&(clearTimeout(a),a=0)},c.forceUpdate=()=>{a&&(clearTimeout(a),l())},c.hasPendingUpdates=()=>!!a,c}function g3(t,e,n){return t.units[e][n]}function Ch(t,e,n,i=2,s="abbr"){return`${rl(e,{minimumFractionDigits:i,maximumFractionDigits:i,signDisplay:e>0?"never":"exceptZero"})} ${g3(t,n,s)}`}function E_(t,e,n,i=2,s="abbr"){return`${rl(e,{minimumFractionDigits:i,maximumFractionDigits:i,signDisplay:"exceptZero"})} ${g3(t,n,s)}`}function $Pe(t,e,n,i=2,s="abbr"){const o=QL(e,n);return Ch(t,Ds(e,n,o),o,i,s)}function APe(t,e,n,i=2,s="abbr"){const o=QL(e,n);return E_(t,Ds(e,n,o),o,i,s)}function LPe(t,e,n,i=2,s="abbr"){const o=JL(e,n);return Ch(t,Ds(e,n,o),o,i,s)}function OPe(t,e,n,i=2,s="abbr"){const o=JL(e,n);return E_(t,Ds(e,n,o),o,i,s)}function PPe(t,e,n,i=2,s="abbr"){const o=eO(e,n);return Ch(t,Ds(e,n,o),o,i,s)}function RPe(t,e,n,i=2,s="abbr"){const o=eO(e,n);return E_(t,Ds(e,n,o),o,i,s)}function VPe(t,e,n,i=2,s="abbr"){const o=tO(e,n);return Ch(t,Ds(e,n,o),o,i,s)}function FPe(t,e,n,i=2,s="abbr"){const o=tO(e,n);return E_(t,Ds(e,n,o),o,i,s)}function DPe(t,e,n,i=2,s="abbr"){const o=O8(e,n);return Ch(t,Ds(e,n,o),o,i,s)}function NPe(t,e,n,i=2,s="abbr"){const o=P8(e,n);return Ch(t,Ds(e,n,o),o,i,s)}function BPe(t,e,n,i,s){s=Xf(s,2);let o=jL.normalize(p0e(Ds(t,e,"degrees"),n,i),0,!0);const r={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:s,minimumFractionDigits:s,signDisplay:o>0?"never":"exceptZero"};return o=v3(o,r),rl(o,r)}function zPe(t,e,n,i,s){n!==i&&(t=-t);const o={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:s=Xf(s,2),minimumFractionDigits:s,signDisplay:"exceptZero"};let r=Ds(t,e,"degrees")%360;return r=v3(r,o),rl(r,o)}const a2=new Map;function v3(t,e){const n=JSON.stringify(e);let i=a2.get(n);return i||(i=new Intl.NumberFormat("en-US",e),a2.set(n,i)),/\-?\+?360/.test(i.format(t))?0:t}function p0e(t,e,n){if(e===n)return t;switch(n){case"arithmetic":return h0e(t);case"geographic":return f0e(t)}}function h0e(t){return 90-t}function f0e(t){return-t-90}const l2=["B","kB","MB","GB","TB"];function m0e(t,e){let n=e===0?0:Math.floor(Math.log(e)/Math.log(lI.KILOBYTES));n=bc(n,0,l2.length-1);const i=rl(e/lI.KILOBYTES**n,{maximumFractionDigits:2});return Lp(t.units.bytes[l2[n]],{fileSize:i})}const g0e="esri.widgets.Feature.support.featureUtils",c2=Tt.getLogger(g0e),v0e=/href=(""|'')/gi,y0e=/(\{([^\{\r\n]+)\})/g,b0e=/\'/g,y3=/^\s*expression\//i,_0e=/(\n)/gi,w0e=/[\u00A0-\u9999<>\&]/gim,C0e=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,S0e=/^(?:mailto:|tel:)/,b3="relationships/",EC=iO("short-date-short-time");function _3(t){if(!ke(t))return t.get("sourceLayer")||t.get("layer")}async function ab(t,e){return typeof t=="function"?t.call(null,e):t}function w3(t=""){if(t)return!S0e.test(t.trim().toLowerCase())}function Yk(t){return!!t&&y3.test(t)}function E0e(t,e){if(!Yk(e)||!t)return null;const n=e.replace(y3,"").toLowerCase();let i;return t.some(s=>s.name.toLowerCase()===n&&(i=s,!0)),i}function C3(t,e){const n=E0e(e,t==null?void 0:t.fieldName);return n?n.title||null:t?t.label||t.fieldName:null}function k0e(t,e){const n=e.get(t.toLowerCase());return`{${n&&n.fieldName||t}}`}function T0e(t){return t.replace(v0e,"")}function Wm(t,e){const n=Zk(e,t);return n?n.name:t}function I0e(t,e){return t&&t.map(n=>Wm(n,e))}function Zk(t,e){return t&&typeof t.getField=="function"?t.getField(e):null}function S3(t){return`${t}`.trim()}function Lu({attributes:t,globalAttributes:e,layer:n,text:i,expressionAttributes:s,fieldInfoMap:o}){return i?kC({formattedAttributes:e,template:A0e(i,{...e,...s,...t},n),fieldInfoMap:o}):""}function kC({formattedAttributes:t,template:e,fieldInfoMap:n}){return S3(T0e(Lp(Lp(e,i=>k0e(i,n)),t)))}function x0e(t,e,n=!1){const i=e[t];if(typeof i=="string"){const s="%27",o=(n?encodeURIComponent(i):i).replace(b0e,s);e[t]=o}}function M0e(t,e=!1){const n={...t};return Object.keys(n).forEach(i=>x0e(i,n,e)),n}function $0e(t,e,n){const i=(e=S3(e))&&e[0]!=="{";return Lp(t,M0e(n,i))}function TC(t,e){return t.replace(y0e,(n,i,s)=>{const o=Zk(e,s);return o?`{${o.name}}`:i})}function A0e(t,e,n){const i=TC(t,n);return i&&i.replace(C0e,(s,o,r)=>$0e(s,o||r,e))}function L0e(t,e){if(typeof t=="string"&&e&&e.dateFormat==null&&(e.places!=null||e.digitSeparator!=null)){const n=Number(t);if(!isNaN(n))return n}return t}function O0e(t){return(t==null?void 0:t.type)==="feature"}function u2(t){return!!(t!=null&&t.layer)}function P0e(t){return(t==null?void 0:t.type)==="map-image"}function R0e(t,e){var c;const n=e.fieldInfos,i=e.fieldName,s=(c=E3(n,i))==null?void 0:c.clone(),o=e.preventPlacesFormatting,r=e.layer,a=Zk(r,i);if(s&&(a==null?void 0:a.type)==="date"){const u=s.format||new q8;u.dateFormat=u.dateFormat||"short-date-short-time",u.dateTimeFormatOptions=!u2(r)&&O0e(r)&&r.datesInUnknownTimezone||u2(r)&&P0e(r.layer)&&r.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,s.format=u}const l=s&&s.format;return typeof t=="string"&&N8(i)&&l?l.formatRasterPixelValue(t):typeof(t=L0e(t,l))=="string"||t==null||l==null?gg(t):o?rl(t,{...V8(l),minimumFractionDigits:0,maximumFractionDigits:20}):l.format(t)}function E3(t,e){if(!t||!t.length||!e)return;const n=e.toLowerCase();let i;return t.some(s=>!(!s.fieldName||s.fieldName.toLowerCase()!==n)&&(i=s,!0)),i}function V0e({fieldName:t,graphic:e,layer:n}){if(Wa(t)||!n||typeof n.getFeatureType!="function")return null;const{typeIdField:i}=n;if(!i||t!==i)return null;const s=n.getFeatureType(e);return s?s.name:null}function F0e({fieldName:t,value:e,graphic:n,layer:i}){if(Wa(t)||!i||typeof i.getFieldDomain!="function")return null;const s=i.getFieldDomain(t,{feature:n});return s&&s.type==="coded-value"?s.getName(e):null}function D0e(t,e){const{creatorField:n,creationDateField:i,editorField:s,editDateField:o}=t;if(!e)return;const r=e[o];if(typeof r=="number"){const l=e[s];return{type:"edit",date:Fy(r,EC),user:l}}const a=e[i];if(typeof a=="number"){const l=e[n];return{type:"create",date:Fy(a,EC),user:l}}return null}function N0e(t,e){const n=new Map;return t&&t.forEach(i=>{const s=Wm(i.fieldName,e);i.fieldName=s,n.set(s.toLowerCase(),i)}),n}function d2(t){const e=[];if(!t)return e;const{fieldInfos:n,content:i}=t;return n&&e.push(...n),i&&Array.isArray(i)&&i.forEach(s=>{if(s.type==="fields"){const o=s&&s.fieldInfos;o&&e.push(...o)}}),e}function Xk(t){return t.replace(w0e,e=>`&#${e.charCodeAt(0)};`)}function gg(t){return typeof t=="string"?t.replace(_0e,'<br class="esri-text-new-line" />'):t}function k3(t){const{value:e,fieldName:n,fieldInfos:i,fieldInfoMap:s,layer:o,graphic:r}=t;if(e==null)return"";const a=F0e({fieldName:n,value:e,graphic:r,layer:o});if(a)return a;const l=V0e({fieldName:n,graphic:r,layer:o});if(l)return l;if(s.get(n.toLowerCase()))return R0e(e,{fieldInfos:i||Array.from(s.values()),fieldName:n,layer:o});const c=o&&o.fieldsIndex;return c&&c.isDateField(n)?Fy(e,EC):gg(e)}function Dw({fieldInfos:t,attributes:e,layer:n,graphic:i,fieldInfoMap:s,relatedInfos:o}){const r={};return o==null||o.forEach(a=>W0e({attributes:r,relatedInfo:a,fieldInfoMap:s,fieldInfos:t,layer:n})),Object.keys(e).forEach(a=>{const l=e[a];r[a]=k3({fieldName:a,fieldInfos:t,fieldInfoMap:s,layer:n,value:l,graphic:i})}),r}async function B0e(t,e){var u,d;const{layer:n,graphic:i,outFields:s,objectIds:o,returnGeometry:r,spatialReference:a}=t,l=o[0];if(typeof l!="number"&&typeof l!="string"){const h="Could not query required fields for the specified feature. The feature's ID is invalid.",f={layer:n,graphic:i,objectId:l,requiredFields:s};return c2.warn(h,f),null}if(!((d=(u=n.capabilities)==null?void 0:u.operations)!=null&&d.supportsQuery)){const h="The specified layer cannot be queried. The following fields will not be available.",f={layer:n,graphic:i,requiredFields:s,returnGeometry:r};return c2.warn(h,f),null}const c=n.createQuery();return c.objectIds=o,c.outFields=s!=null&&s.length?s:[n.objectIdField],c.returnGeometry=!!r,c.returnZ=!!r,c.returnM=!!r,c.outSpatialReference=a,(await n.queryFeatures(c,e)).features[0]}async function z0e(t){var i;if(!((i=t.expressionInfos)!=null&&i.length))return!1;const e=await zS(),{arcadeUtils:{hasGeometryFunctions:n}}=e;return n(t)}async function H0e({graphic:t,popupTemplate:e,layer:n,spatialReference:i},s){if(!n||!e||(typeof n.load=="function"&&await n.load(s),!t.attributes))return;const o=t.attributes[n.objectIdField];if(o==null)return;const r=[o],a=await e.getRequiredFields(n.fieldsIndex),l=D8(a,t),c=l?[]:a,u=e.returnGeometry||await z0e(e);if(l&&!u)return;const d=await B0e({layer:n,graphic:t,outFields:c,objectIds:r,returnGeometry:u,spatialReference:i},s);d&&(d.geometry&&(t.geometry=d.geometry),d.attributes&&(t.attributes={...t.attributes,...d.attributes}))}function Wa(t=""){return!!t&&t.includes(b3)}function U0e(t){return t?`${b3}${t.layerId}/${t.fieldName}`:""}function p2({attributes:t,graphic:e,relatedInfo:n,fieldInfos:i,fieldInfoMap:s,layer:o}){t&&e&&n&&Object.keys(e.attributes).forEach(r=>{const a=U0e({layerId:n.relation.id.toString(),fieldName:r}),l=e.attributes[r];t[a]=k3({fieldName:a,fieldInfos:i,fieldInfoMap:s,layer:o,value:l,graphic:e})})}function W0e({attributes:t,relatedInfo:e,fieldInfoMap:n,fieldInfos:i,layer:s}){t&&e&&(e.relatedFeatures&&e.relatedFeatures&&e.relatedFeatures.forEach(o=>p2({attributes:t,graphic:o,relatedInfo:e,fieldInfoMap:n,fieldInfos:i,layer:s})),e.relatedStatsFeatures&&e.relatedStatsFeatures&&e.relatedStatsFeatures.forEach(o=>p2({attributes:t,graphic:o,relatedInfo:e,fieldInfoMap:n,fieldInfos:i,layer:s})))}const h2=t=>{if(!t)return!1;const e=t.toUpperCase();return e.includes("CURRENT_TIMESTAMP")||e.includes("CURRENT_DATE")||e.includes("CURRENT_TIME")},T3=({layer:t,method:e,query:n,definitionExpression:i})=>{var r,a;if(!((a=(r=t.capabilities)==null?void 0:r.query)!=null&&a.supportsCacheHint)||e==="attachments")return;const s=q(n.where)&&n.where,o=q(n.geometry)&&n.geometry;h2(i)||h2(s)||(o==null?void 0:o.type)==="extent"||n.resultType==="tile"||(n.cacheHint=!0)},G0e=({query:t,layer:e,method:n})=>{T3({layer:e,method:n,query:t,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})},j0e=({queryPayload:t,layer:e,method:n})=>{T3({layer:e,method:n,query:t,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})};function q0e(t,e,n){return t&&e&&n?f2(t.allLayers,e,n)||f2(t.allTables,e,n):null}function f2(t,e,n){return t.find(i=>i!==e&&i.type==="feature"&&i.url===e.url&&i.layerId===n.relatedTableId)}const m2={editing:!1,operations:{add:!0,update:!0,delete:!0}},I3=Ht.ofType(F8);let Us=class extends dt{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...m2},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new I3,this.fileInfos=new Ht,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles(ge(()=>this.graphic,()=>this._graphicChanged(),gt))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return{...m2,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:e}=this;if(!e)return!1;const n=e.layer||e.sourceLayer;return(n==null?void 0:n.loaded)&&"capabilities"in n&&"operations"in n.capabilities&&"supportsResizeAttachments"in n.capabilities.operations&&n.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:n}=this;if(!e||typeof e.queryAttachments!="function")throw new Ue("invalid-layer","getAttachments(): A valid layer is required.");const i=this._getObjectId(),s=new cI({objectIds:[i],returnMetadata:!0}),o=[],r=e.queryAttachments(s).then(l=>l[i]||o).catch(()=>o);this._getAttachmentsPromise=r,this.notifyChange("state");const a=await r;return n.removeAll(),a.length&&n.addMany(a),this._getAttachmentsPromise=null,this.notifyChange("state"),a}async addAttachment(e,n=this.graphic){const{_attachmentLayer:i,attachmentInfos:s,abilities:o}=this;if(!n)throw new Ue("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:n});if(!e)throw new Ue("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!o.operations.add)throw new Ue("invalid-abilities","addAttachment(): add abilities are required.");if(!i||typeof i.addAttachment!="function")throw new Ue("invalid-layer","addAttachment(): A valid layer is required.");const r=i.addAttachment(n,e).then(l=>this._queryAttachment(l.objectId,n)),a=await r;return s.add(a),a}async deleteAttachment(e){const{_attachmentLayer:n,attachmentInfos:i,graphic:s,abilities:o}=this;if(!e)throw new Ue("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!o.operations.delete)throw new Ue("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!n||typeof n.deleteAttachments!="function")throw new Ue("invalid-layer","deleteAttachment(): A valid layer is required.");const r=n.deleteAttachments(s,[e.id]).then(()=>e),a=await r;return i.remove(a),a}async updateAttachment(e,n=this.activeAttachmentInfo){const{_attachmentLayer:i,attachmentInfos:s,graphic:o,abilities:r}=this;if(!e)throw new Ue("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!n)throw new Ue("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:n});if(!r.operations.update)throw new Ue("invalid-abilities","updateAttachment(): Update abilities are required.");const a=s.findIndex(u=>u===n);if(!i||typeof i.updateAttachment!="function")throw new Ue("invalid-layer","updateAttachment(): A valid layer is required.");const l=i.updateAttachment(o,n.id,e).then(u=>this._queryAttachment(u.objectId)),c=await l;return s.splice(a,1,c),c}async commitFiles(){return await Promise.all(this.fileInfos.items.map(e=>this.addAttachment(e.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(e,n){if(!e||!n)return null;const i={file:e,form:n};return this.fileInfos.add(i),i}updateFile(e,n,i=this.activeFileInfo){if(!e||!n||!i)return null;const s=this.fileInfos.findIndex(o=>i===o);return s>-1&&this.fileInfos.splice(s,1,{file:e,form:n}),this.fileInfos.items[s]}deleteFile(e){const n=this.fileInfos.find(i=>i.file===e);return this.fileInfos.remove(n)??null}async _queryAttachment(e,n){if(!e)throw new Ue("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:i}=this,s=this._getObjectId(n),o=new cI({objectIds:[s],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return i.queryAttachments(o).then(r=>r[s][0])}_getObjectId(e=this.graphic){return(e==null?void 0:e.getObjectId())??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,n=_3(e);this._attachmentLayer=n?n.type==="scene"&&q(n.associatedLayer)?n.associatedLayer:n:null}};v([b()],Us.prototype,"abilities",void 0),v([ii("abilities")],Us.prototype,"castAbilities",null),v([b()],Us.prototype,"activeAttachmentInfo",void 0),v([b()],Us.prototype,"activeFileInfo",void 0),v([b({readOnly:!0,type:I3})],Us.prototype,"attachmentInfos",void 0),v([b()],Us.prototype,"fileInfos",void 0),v([b({type:Ls})],Us.prototype,"graphic",void 0),v([b()],Us.prototype,"mode",void 0),v([b({readOnly:!0})],Us.prototype,"state",null),v([b()],Us.prototype,"filesEnabled",void 0),v([b({readOnly:!0})],Us.prototype,"supportsResizeAttachments",null),Us=v([Ae("esri.widgets.Attachments.AttachmentsViewModel")],Us);const k_=Us;function g2(t){const e=t.toLowerCase();return e==="image/bmp"||e==="image/emf"||e==="image/exif"||e==="image/gif"||e==="image/x-icon"||e==="image/jpeg"||e==="image/png"||e==="image/tiff"||e==="image/x-wmf"}function K0e(t){const e=Ab("esri/themes/base/images/files/");return t?t==="text/plain"?`${e}text-32.svg`:t==="application/pdf"?`${e}pdf-32.svg`:t==="text/csv"?`${e}csv-32.svg`:t==="application/gpx+xml"?`${e}gpx-32.svg`:t==="application/x-dwf"?`${e}cad-32.svg`:t==="application/postscript"||t==="application/json"||t==="text/xml"||t==="model/vrml"?`${e}code-32.svg`:t==="application/x-zip-compressed"||t==="application/x-7z-compressed"||t==="application/x-gzip"||t==="application/x-tar"||t==="application/x-gtar"||t==="application/x-bzip2"||t==="application/gzip"||t==="application/x-compress"||t==="application/x-apple-diskimage"||t==="application/x-rar-compressed"||t==="application/zip"?`${e}zip-32.svg`:t.includes("image/")?`${e}image-32.svg`:t.includes("audio/")?`${e}sound-32.svg`:t.includes("video/")?`${e}video-32.svg`:t.includes("msexcel")||t.includes("ms-excel")||t.includes("spreadsheetml")?`${e}excel-32.svg`:t.includes("msword")||t.includes("ms-word")||t.includes("wordprocessingml")?`${e}word-32.svg`:t.includes("powerpoint")||t.includes("presentationml")?`${e}report-32.svg`:`${e}generic-32.svg`:`${e}generic-32.svg`}const v2={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},et={base:"esri-attachments",loaderContainer:"esri-attachments__loader-container",loader:"esri-attachments__loader",fadeIn:"esri-attachments--fade-in",container:"esri-attachments__container",containerList:"esri-attachments__container--list",containerPreview:"esri-attachments__container--preview",actions:"esri-attachments__actions",deleteButton:"esri-attachments__delete-button",addAttachmentButton:"esri-attachments__add-attachment-button",errorMessage:"esri-attachments__error-message",items:"esri-attachments__items",item:"esri-attachments__item",itemButton:"esri-attachments__item-button",itemMask:"esri-attachments__item-mask",itemMaskIcon:"esri-attachments__item-mask--icon",itemImage:"esri-attachments__image",itemImageResizable:"esri-attachments__image--resizable",itemLabel:"esri-attachments__label",itemFilename:"esri-attachments__filename",itemChevronIcon:"esri-attachments__item-chevron-icon",itemLink:"esri-attachments__item-link",itemLinkOverlay:"esri-attachments__item-link-overlay",itemLinkOverlayIcon:"esri-attachments__item-link-overlay-icon",itemEditIcon:"esri-attachments__item-edit-icon",itemAddIcon:"esri-attachments__item-add-icon",itemAddButton:"esri-attachments__item-add-button",formNode:"esri-attachments__form-node",fileFieldset:"esri-attachments__file-fieldset",fileLabel:"esri-attachments__file-label",fileName:"esri-attachments__file-name",fileInput:"esri-attachments__file-input",metadata:"esri-attachments__metadata",metadataFieldset:"esri-attachments__metadata-fieldset",progressBar:"esri-attachments__progress-bar",esriWidget:"esri-widget",esriButton:"esri-button",buttonDisabled:"esri-button--disabled",esriButtonSecondary:"esri-button--secondary",esriButtonTertiary:"esri-button--tertiary",esriButtonThird:"esri-button--third",esriButtonSmall:"esri-button--small",esriButtonHalf:"esri-button--half",empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},Nw=window.CSS;let as=class extends kn{constructor(e,n){super(e,n),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new k_,this.visibleElements={...v2},this._supportsImageOrientation=Nw&&Nw.supports&&Nw.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.addHandles([Dn(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),Dn(()=>{var e;return(e=this.viewModel)==null?void 0:e.fileInfos},"change",()=>this.scheduleRender()),ge(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),gt)])}loadDependencies(){return Promise.all([Fe(()=>import("./calcite-icon-5dd27db1.js"),["./calcite-icon-5dd27db1.js","./icon-1a289254.js","./dom-5b7af1bf.js","./observers-c77bfda3.js"],import.meta.url)])}get abilities(){return this.viewModel.abilities}set abilities(e){this.viewModel.abilities=e}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}castVisibleElements(e){return{...v2,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:n}=this;return this._set("submitting",!0),this._set("error",null),n.addAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),n.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new Ue("attachments:add-attachment",this.messages.addErrorMessage,i)),i})}deleteAttachment(e){const{viewModel:n}=this;return this._set("submitting",!0),this._set("error",null),n.deleteAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),n.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new Ue("attachments:delete-attachment",this.messages.deleteErrorMessage,i)),i})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:n}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(n).then(i=>(this._set("submitting",!1),this._set("error",null),e.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new Ue("attachments:update-attachment",this.messages.updateErrorMessage,i)),i})}addFile(){const e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",e}updateFile(){const{viewModel:e}=this,n=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);return e.mode="view",n}deleteFile(e){const n=this.viewModel.deleteFile(e||this.viewModel.activeFileInfo.file);return this.viewModel.mode="view",n}render(){const{submitting:e,viewModel:n}=this,{state:i}=n;return M("div",{class:this.classes(et.base,et.esriWidget)},e?this.renderProgressBar():null,i==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:n}=this;return e&&n.errorMessage?M("div",{key:"error-message",class:et.errorMessage},e.message):null}renderAttachments(){const{activeFileInfo:e,mode:n,activeAttachmentInfo:i}=this.viewModel;return n==="add"?this.renderAddForm():n==="edit"?this.renderDetailsForm(i||e):this.renderAttachmentContainer()}renderLoading(){return M("div",{class:et.loaderContainer,key:"loader"},M("div",{class:et.loader}))}renderProgressBar(){return this.visibleElements.progressBar?M("div",{class:et.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:n}=this,i=e||!n,s=this.visibleElements.cancelAddButton?M("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(et.esriButton,et.esriButtonTertiary,et.esriButtonSmall,et.esriButtonHalf,e&&et.buttonDisabled)},this.messages.cancel):null,o=this.visibleElements.addSubmitButton?M("button",{type:"submit",disabled:i,class:this.classes(et.esriButton,et.esriButtonSecondary,et.esriButtonSmall,et.esriButtonHalf,{[et.buttonDisabled]:i})},this.messages.add):null,r=n?M("span",{key:"file-name",class:et.fileName},n.name):null,a=M("form",{bind:this,afterCreate:Ry,afterRemoved:oI,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},M("fieldset",{class:et.fileFieldset},r,M("label",{class:this.classes(et.fileLabel,et.esriButton,et.esriButtonSecondary)},n?this.messages.changeFile:this.messages.selectFile,M("input",{class:et.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),o,s);return M("div",{key:"add-form-container",class:et.formNode},a)}renderDetailsForm(e){const{visibleElements:n,viewModel:i,selectedFile:s,submitting:o}=this,{abilities:r}=i,a=o||!s;let l,c,u,d;s?(l=s.type,c=s.name,u=s.size):"file"in e?(l=e.file.type,c=e.file.name,u=e.file.size):(l=e.contentType,c=e.name,u=e.size,d=e.url);const h=r.editing&&r.operations.delete&&n.deleteButton?M("button",{key:"delete-button",type:"button",disabled:o,bind:this,onclick:S=>this._submitDeleteAttachment(S,e),class:this.classes(et.esriButton,et.esriButtonSmall,et.esriButtonTertiary,et.deleteButton,{[et.buttonDisabled]:o})},this.messages.delete):void 0,f=r.editing&&r.operations.update&&n.updateButton?M("button",{disabled:a,key:"update-button",type:"submit",class:this.classes(et.esriButton,et.esriButtonSmall,et.esriButtonThird,{[et.buttonDisabled]:a})},this.messages.update):void 0,m=this.visibleElements.cancelUpdateButton?M("button",{disabled:o,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(et.esriButton,et.esriButtonSmall,et.esriButtonTertiary,et.esriButtonThird,{[et.buttonDisabled]:o})},this.messages.cancel):void 0,g=r.editing&&r.operations.update?M("fieldset",{key:"file",class:et.fileFieldset},M("span",{key:"file-name",class:et.fileName},c),M("label",{class:this.classes(et.fileLabel,et.esriButton,et.esriButtonSecondary)},this.messages.changeFile,M("input",{class:et.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0,y=M("fieldset",{key:"size",class:et.metadataFieldset},M("label",null,m0e(this.messagesUnits,u))),_=M("fieldset",{key:"content-type",class:et.metadataFieldset},M("label",null,l)),C=q(d)?M("a",{class:et.itemLink,href:d,rel:"noreferrer",target:"_blank"},this.renderImageMask(e,400),M("div",{class:et.itemLinkOverlay},M("span",{class:et.itemLinkOverlayIcon},M("calcite-icon",{icon:"launch"})))):this.renderImageMask(e,400),w=M("form",{bind:this,afterCreate:Ry,afterRemoved:oI,"data-node-ref":"_updateAttachmentForm",onsubmit:S=>this._submitUpdateAttachment(S,e)},M("div",{class:et.metadata},y,_),g,M("div",{class:et.actions},h,m,f));return M("div",{key:"edit-form-container",class:et.formNode},C,w)}renderImageMask(e,n){return"file"in e?this.renderGenericImageMask(e.file.name,e.file.type):this.renderImageMaskForAttachment(e,n)}renderGenericImageMask(e,n){const{supportsResizeAttachments:i}=this.viewModel,s=K0e(n),o={[et.itemImageResizable]:i};return M("div",{class:this.classes(et.itemMaskIcon,et.itemMask)},M("img",{title:e,alt:e,src:s,class:this.classes(o,et.itemImage)}))}renderImageMaskForAttachment(e,n){const{supportsResizeAttachments:i}=this.viewModel,{contentType:s,name:o,url:r}=e;if(!i||!g2(s))return this.renderGenericImageMask(o,s);const a=this._getCSSTransform(e),l=a?{transform:a,"image-orientation":"none"}:{},c=`${r}${r.includes("?")?"&":"?"}w=${n}`,u={[et.itemImageResizable]:i};return M("div",{class:this.classes(et.itemMask)},M("img",{styles:l,alt:o,title:o,src:c,class:this.classes(u,et.itemImage)}))}renderFile(e){const{file:n}=e;return M("li",{class:et.item,key:n},M("button",{key:"details-button",bind:this,class:et.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(e),type:"button"},this.renderImageMask(e),M("label",{class:et.itemLabel},M("span",{class:et.itemFilename},n.name||this.messages.noTitle),M("span",{"aria-hidden":"true",class:this.classes(et.itemChevronIcon,yo(this.container)?et.iconLeft:et.iconRight)}))))}renderAttachmentInfo({attachmentInfo:e,displayType:n}){const{viewModel:i,effectiveDisplayType:s}=this,{abilities:o,supportsResizeAttachments:r}=i,{contentType:a,name:l,url:c}=e,u=this.renderImageMask(e,n==="list"?48:400),d=o.editing?M("span",{"aria-hidden":"true",class:this.classes(et.itemChevronIcon,yo(this.container)?et.iconLeft:et.iconRight)}):null,h=[u,s==="preview"&&r&&g2(a)?null:M("label",{class:et.itemLabel},M("span",{class:et.itemFilename},l||this.messages.noTitle),d)],f=o.editing?M("button",{key:"details-button",bind:this,class:et.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},h):M("a",{key:"details-link",class:et.itemButton,href:c,target:"_blank"},h);return M("li",{class:et.item,key:e},f)}renderAttachmentContainer(){const{effectiveDisplayType:e,viewModel:n,visibleElements:i}=this,{attachmentInfos:s,abilities:o,fileInfos:r}=n,a=!!(s!=null&&s.length),l=!!(r!=null&&r.length),c={[et.containerList]:e!=="preview",[et.containerPreview]:e==="preview"},u=o.editing&&o.operations.add&&i.addButton?M("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(et.esriButton,et.esriButtonTertiary,et.addAttachmentButton),type:"button"},M("span",{"aria-hidden":"true",class:this.classes(et.itemAddIcon,et.iconPlus)}),this.messages.add):void 0,d=a?M("ul",{key:"attachments-list",class:et.items},s.toArray().map(m=>this.renderAttachmentInfo({attachmentInfo:m,displayType:e}))):void 0,h=l?M("ul",{key:"file-list",class:et.items},r.toArray().map(m=>this.renderFile(m))):void 0,f=l||a?void 0:M("div",{class:et.empty},this.messages.noAttachments);return M("div",{key:"attachments-container",class:this.classes(et.container,c)},d,h,f,u)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const n=e.target,i=n&&n.files&&n.files.item(0);this._set("selectedFile",i)}_submitDeleteAttachment(e,n){e.preventDefault(),"file"in n?this.deleteFile(n.file):this.deleteAttachment(n)}_submitAddAttachment(e){e.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(e,n){e.preventDefault(),"file"in n?this.updateFile():this.updateAttachment()}_startEditAttachment(e){const{viewModel:n}=this;n.activeFileInfo=null,n.activeAttachmentInfo=e,n.mode="edit"}_startEditFile(e){const{viewModel:n}=this;n.activeAttachmentInfo=null,n.activeFileInfo=e,n.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e){const{orientationInfo:n}=e;return!this._supportsImageOrientation&&n?[n.rotation?`rotate(${n.rotation}deg)`:"",n.mirrored?"scaleX(-1)":""].join(" "):""}};v([b()],as.prototype,"abilities",null),v([b()],as.prototype,"displayType",void 0),v([b({readOnly:!0})],as.prototype,"effectiveDisplayType",null),v([b()],as.prototype,"graphic",null),v([b()],as.prototype,"label",null),v([b(),rn("esri/widgets/Attachments/t9n/Attachments")],as.prototype,"messages",void 0),v([b(),rn("esri/core/t9n/Units")],as.prototype,"messagesUnits",void 0),v([b({readOnly:!0})],as.prototype,"selectedFile",void 0),v([b({readOnly:!0})],as.prototype,"submitting",void 0),v([b({readOnly:!0})],as.prototype,"error",void 0),v([b({type:k_})],as.prototype,"viewModel",void 0),v([b()],as.prototype,"visibleElements",void 0),v([ii("visibleElements")],as.prototype,"castVisibleElements",null),as=v([Ae("esri.widgets.Attachments")],as);const x3=as;let sf=class extends k_{constructor(e){super(e),this.description=null,this.title=null}};v([b()],sf.prototype,"description",void 0),v([b()],sf.prototype,"title",void 0),sf=v([Ae("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],sf);const Qk=sf,Y0e={heading:"esri-widget__heading"};function Is(t,e){const n=M3(t.level),i=`h${n}`;return delete t.level,M(i,{...t,class:Kd(Y0e.heading,t.class),role:"heading","aria-level":String(n)},e)}function M3(t){return bc(Math.ceil(t),1,6)}function vu(t,e=1){return M3(t+e)}const Bw={base:"esri-feature-element-info",title:"esri-feature-element-info__title",description:"esri-feature-element-info__description"};let $d=class extends kn{constructor(e,n){super(e,n),this.description=null,this.headingLevel=2,this.title=null}render(){return M("div",{class:Bw.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?M(Is,{level:this.headingLevel,class:Bw.title},e):null}renderDescription(){const{description:e}=this;return e?M("div",{key:"description",class:Bw.description},e):null}};v([b()],$d.prototype,"description",void 0),v([b()],$d.prototype,"headingLevel",void 0),v([b()],$d.prototype,"title",void 0),$d=v([Ae("esri.widgets.Feature.support.FeatureElementInfo")],$d);const T_=$d,Z0e={base:"esri-feature-attachments"};let Lr=class extends kn{constructor(e,n){super(e,n),this._featureElementInfo=null,this.attachmentsWidget=new x3,this.headingLevel=2,this.viewModel=new Qk}initialize(){this._featureElementInfo=new T_,this.addHandles([ge(()=>{var e,n;return[(e=this.viewModel)==null?void 0:e.description,(n=this.viewModel)==null?void 0:n.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),gt),ge(()=>{var e;return(e=this.viewModel)==null?void 0:e.graphic},e=>this.attachmentsWidget.graphic=e,gt)])}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get displayType(){return this.attachmentsWidget.displayType}set displayType(e){this.attachmentsWidget.displayType=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var n;const{attachmentsWidget:e}=this;return M("div",{class:Z0e.base},(n=this._featureElementInfo)==null?void 0:n.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){const{description:e,title:n,headingLevel:i}=this;this._featureElementInfo.set({description:e,title:n,headingLevel:i})}};v([b({readOnly:!0})],Lr.prototype,"attachmentsWidget",void 0),v([b()],Lr.prototype,"description",null),v([b()],Lr.prototype,"displayType",null),v([b()],Lr.prototype,"graphic",null),v([b()],Lr.prototype,"headingLevel",void 0),v([b()],Lr.prototype,"title",null),v([b({type:Qk})],Lr.prototype,"viewModel",void 0),Lr=v([Ae("esri.widgets.Feature.FeatureAttachments")],Lr);const X0e=Lr;let Al=class extends Li(dt){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(ge(()=>this.creator,n=>{this._destroyContent(),this._createContent(n)},gt))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:n,destroyer:i}=this;e&&(ab(i,{graphic:n}).catch(()=>null),this._set("created",null))}async _createContent(e){const{graphic:n}=this,i=ab(e,{graphic:n}).catch(()=>null);this._loadingPromise=i,this.notifyChange("state");const s=await i;i===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",s))}};v([b({readOnly:!0})],Al.prototype,"created",void 0),v([b()],Al.prototype,"creator",void 0),v([b()],Al.prototype,"destroyer",void 0),v([b({type:Ls})],Al.prototype,"graphic",void 0),v([b({readOnly:!0})],Al.prototype,"state",null),Al=v([Ae("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],Al);const lb=Al;function Sn(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${e}'`);return{value:J0e(t[e])}}}function Q0e(t){const{type:e}=t;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function J0e(t){return function(e,...n){Q0e(e)?KL(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...n)}}function Sh(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const n=e._delegatedEventNames,i=Array.isArray(t)?t:e1e(t);n.push(...i)}}function e1e(t){return t.split(",").map(e=>e.trim())}const $3="calcite-theme-";function t1e(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function Gm(){return t1e().startsWith("dark")}function n1e(){return`${$3}${Gm()?"dark":"light"}`}function i1e(t){s1e(t),t.classList.add(n1e())}function s1e(t){Array.from(t.classList).forEach(e=>{e.startsWith($3)&&t.classList.remove(e)})}const zw={base:"esri-feature-content",loaderContainer:"esri-feature-content__loader-container",loader:"esri-feature-content__loader"};let Ad=class extends kn{constructor(e,n){super(e,n),this.viewModel=null,this._addTargetToAnchors=i=>{Array.from(i.querySelectorAll("a")).forEach(s=>{w3(s.href)&&!s.hasAttribute("target")&&s.setAttribute("target","_blank")})}}get creator(){return this.viewModel.creator}set creator(e){this.viewModel.creator=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}renderLoading(){return M("div",{class:zw.loaderContainer,key:"loader"},M("div",{class:zw.loader}))}renderCreated(){var n;const e=(n=this.viewModel)==null?void 0:n.created;return e?e instanceof HTMLElement?M("div",{key:e,bind:e,afterCreate:this._attachToNode}):Pp(e)?M("div",{key:e},!e.destroyed&&e.render()):M("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var n;const e=(n=this.viewModel)==null?void 0:n.state;return M("div",{class:zw.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const n=this;e.appendChild(n)}};v([b()],Ad.prototype,"creator",null),v([b()],Ad.prototype,"graphic",null),v([b({type:lb})],Ad.prototype,"viewModel",void 0),Ad=v([Ae("esri.widgets.Feature.FeatureContent")],Ad);const sy=Ad;let ka=class extends dt{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:n}=this,i=[];return n==null||n.forEach(s=>{if(!(!s.hasOwnProperty("visible")||s.visible))return;const o=s.clone();o.label=C3(o,e),i.push(o)}),i}};v([b()],ka.prototype,"attributes",void 0),v([b({type:[K8]})],ka.prototype,"expressionInfos",void 0),v([b()],ka.prototype,"description",void 0),v([b({type:[rO]})],ka.prototype,"fieldInfos",void 0),v([b({readOnly:!0})],ka.prototype,"formattedFieldInfos",null),v([b()],ka.prototype,"title",void 0),ka=v([Ae("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],ka);const I_=ka,o1e=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function r1e(t){let e=null;return o1e.some(n=>(n.pattern.test(t)&&(e=n),!!e)),e}function a1e(t,e){if(typeof e!="string"||!e)return e;const n=r1e(e);if(!n)return e;const i=e.match(n.pattern),s=i&&i[2],o=Lp(Lp(n.label,{messages:t,hierPart:s}),{appName:n.appName}),r=n.target?` target="${n.target}"`:"",a=n.target==="_blank"?' rel="noreferrer"':"";return e.replace(n.pattern,`<a${r} href="$1"${a}>${o}</a>`)}const Dh={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let er=class extends kn{constructor(e,n){super(e,n),this._featureElementInfo=null,this.viewModel=new I_,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new T_,this.addHandles(ge(()=>{var e,n;return[(e=this.viewModel)==null?void 0:e.description,(n=this.viewModel)==null?void 0:n.title]},()=>this._setupFeatureElementInfo(),gt))}destroy(){this._featureElementInfo.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(e){this.viewModel.expressionInfos=e}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(e){this.viewModel.fieldInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}renderFieldInfo(e,n){const{attributes:i}=this.viewModel,s=e.fieldName,o=e.label||s,r=i?i[s]==null?"":i[s]:"",a=!(!e.format||!e.format.dateFormat),l=typeof r=="number"&&!a?this._forceLTR(r):a1e(this.messagesURIUtils,r),c={[Dh.fieldDataDate]:a};return M("tr",{key:`fields-element-info-row-${s}-${n}`},M("th",{key:`fields-element-info-row-header-${s}-${n}`,class:Dh.fieldHeader,innerHTML:o}),M("td",{key:`fields-element-info-row-data-${s}-${n}`,class:this.classes(Dh.fieldData,c),innerHTML:l}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?M("table",{class:Dh.esriTable,summary:this.messages.fieldsSummary},M("tbody",null,e.map((n,i)=>this.renderFieldInfo(n,i)))):null}render(){var e;return M("div",{class:Dh.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:n}=this;this._featureElementInfo.set({description:e,title:n})}_forceLTR(e){return`&lrm;${e}`}};v([b()],er.prototype,"attributes",null),v([b()],er.prototype,"description",null),v([b()],er.prototype,"expressionInfos",null),v([b()],er.prototype,"fieldInfos",null),v([b()],er.prototype,"title",null),v([b({type:I_,nonNullable:!0})],er.prototype,"viewModel",void 0),v([b(),rn("esri/widgets/Feature/t9n/Feature")],er.prototype,"messages",void 0),v([b(),rn("esri/widgets/support/t9n/uriUtils")],er.prototype,"messagesURIUtils",void 0),er=v([Ae("esri.widgets.Feature.FeatureFields")],er);const A3=er,l1e=/^-?(\d+)(\.(\d+))?$/i;function c1e(t,e){return t-e}function u1e(t,e){let n,i;return n=Number(t.toFixed(e)),n<t?i=n+1/10**e:(i=n,n-=1/10**e),n=Number(n.toFixed(e)),i=Number(i.toFixed(e)),[n,i]}function d1e(t,e,n,i,s){const o=oy(t,e,n,i),r=o.previous==null||o.previous<=s,a=o.next==null||o.next<=s;return r&&a||o.previous+o.next<=2*s}function cb(t){const e=String(t),n=e.match(l1e);if(n&&n[1])return{integer:n[1].split("").length,fractional:n[3]?n[3].split("").length:0};if(e.toLowerCase().includes("e")){const i=e.split("e"),s=i[0],o=i[1];if(s&&o){const r=Number(s);let a=Number(o);const l=a>0;l||(a=Math.abs(a));const c=cb(r);return l?(c.integer+=a,a>c.fractional?c.fractional=0:c.fractional-=a):(c.fractional+=a,a>c.integer?c.integer=1:c.integer-=a),c}}return{integer:0,fractional:0}}function oy(t,e,n,i){const s={previous:null,next:null};if(n!=null){const o=t-n,r=e-n-o;s.previous=Math.floor(Math.abs(100*r/o))}if(i!=null){const o=i-t,r=i-e-o;s.next=Math.floor(Math.abs(100*r/o))}return s}function ub(t,e={}){const n=t.slice(0),{tolerance:i=2,strictBounds:s=!1,indexes:o=n.map((r,a)=>a)}=e;o.sort(c1e);for(let r=0;r<o.length;r++){const a=o[r],l=n[a],c=a===0?null:n[a-1],u=a===n.length-1?null:n[a+1],d=cb(l).fractional;if(d){let h,f=0,m=!1;for(;f<=d&&!m;){const g=u1e(l,f);h=s&&r===0?g[1]:g[0],m=d1e(l,h,c,u,i),f++}m&&(n[a]=h)}}return n}const p1e={maximumFractionDigits:20};function h1e(t){return rl(t,p1e)}const L3="<",O3=">",f1e=iO("short-date");function P3(t,e,n,i){let s="";e===0?s=`${L3} `:e===n&&(s=`${O3} `);let o=null;return o=i?Fy(t,f1e):h1e(t),s+o}const m1e=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function IC(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const e=t.visualVariables.find(r=>r.type==="color");if(!e)return null;let n=null,i=null;if(e.stops){if(e.stops.length===1)return e.stops[0].color;n=e.stops[0].value,i=e.stops[e.stops.length-1].value}const s=n+(i-n)/2,{getColor:o}=await Fe(()=>import("./UniqueValueRenderer-73d567ad.js").then(r=>r.v),["./UniqueValueRenderer-73d567ad.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./enumeration-61a13175.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./locale-30120714.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./Clonable-9b34e760.js","./LegendOptions-2e7b3d70.js","./reactiveUtils-5869e41a.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./number-2ab8ca0d.js","./Identifiable-093f90a8.js","./jsonUtils-c6684c52.js","./compilerUtils-fefa73ae.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js"],import.meta.url);return o(e,s)}async function R3(t,e){const n=t.trailCap,i=t.trailWidth||1,s=e||await IC(t)||t.color;return new em({cap:n,color:s,width:i})}const g1e=new cn([64,64,64]);function V3(t,e){const n=[],i=t.length-1;return t.length===5?n.push(0,2,4):n.push(0,i),t.map((s,o)=>n.includes(o)?P3(s,o,i,e):null)}async function xC(t,e,n){let i=!1,s=[],o=[];if(t.stops){const c=t.stops;s=c.map(u=>u.value),i=c.some(u=>!!u.label),i&&(o=c.map(u=>u.label))}const r=s[0],a=s[s.length-1];if(r==null&&a==null)return null;const l=i?null:V3(s,n);return(await Promise.all(s.map(async(c,u)=>({value:c,color:t.type==="opacity"?await v1e(c,t,e):(await Fe(()=>import("./UniqueValueRenderer-73d567ad.js").then(d=>d.v),["./UniqueValueRenderer-73d567ad.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./enumeration-61a13175.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./locale-30120714.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./Clonable-9b34e760.js","./LegendOptions-2e7b3d70.js","./reactiveUtils-5869e41a.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./number-2ab8ca0d.js","./Identifiable-093f90a8.js","./jsonUtils-c6684c52.js","./compilerUtils-fefa73ae.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js"],import.meta.url)).getColor(t,c),label:i?o[u]:l[u]})))).reverse()}async function v1e(t,e,n=g1e){const i=new cn(n),s=(await Fe(()=>import("./UniqueValueRenderer-73d567ad.js").then(o=>o.v),["./UniqueValueRenderer-73d567ad.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./enumeration-61a13175.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./locale-30120714.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./Clonable-9b34e760.js","./LegendOptions-2e7b3d70.js","./reactiveUtils-5869e41a.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./number-2ab8ca0d.js","./Identifiable-093f90a8.js","./jsonUtils-c6684c52.js","./compilerUtils-fefa73ae.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js"],import.meta.url)).getOpacity(e,t);return s!=null&&(i.a=s),i}function y1e(t){let e=!1,n=[],i=[];n=t.map(a=>a.value),e=t.some(a=>!!a.label),e&&(i=t.map(a=>a.label));const s=n[0],o=n[n.length-1];if(s==null&&o==null)return null;const r=e?null:V3(n,!1);return n.map((a,l)=>({value:a,color:F3(a,t),label:e?i[l]:r[l]})).reverse()}function F3(t,e){const{startIndex:n,endIndex:i,weight:s}=b1e(t,e);if(n===i)return e[n].color;const o=cn.blendColors(e[n].color,e[i].color,s);return new cn(o)}function b1e(t,e){let n=0,i=e.length-1;return e.some((s,o)=>t<s.value?(i=o,!0):(n=o,!1)),{startIndex:n,endIndex:i,weight:(t-e[n].value)/(e[i].value-e[n].value)}}function _1e(t,e){let n=[];if(t&&t.type==="multipart")t.colorRamps.reverse().forEach((i,s)=>{s===0?n.push({value:e.max,color:new cn(i.toColor),label:"high"}):n.push({value:null,color:new cn(i.toColor),label:""}),s===t.colorRamps.length-1?n.push({value:e.min,color:new cn(i.fromColor),label:"low"}):n.push({value:null,color:new cn(i.fromColor),label:""})});else{let i,s;t&&t.type==="algorithmic"?(i=t.fromColor,s=t.toColor):(i=[0,0,0,1],s=[255,255,255,1]),n=[{value:e.max,color:new cn(s),label:"high"},{value:e.min,color:new cn(i),label:"low"}]}return n}function D3(t){if(!t.colorStops)return[];const e=[...t.colorStops].filter(i=>{var s;return((s=i.color)==null?void 0:s.a)>0});let n=e.length-1;if(e&&e[0]){const i=e[n];i&&i.ratio!==1&&(e.push(new cB({ratio:1,color:i.color})),n++)}return e.map((i,s)=>{var r,a;let o="";return s===0?o=((r=t.legendOptions)==null?void 0:r.minLabel)||"low":s===n&&(o=((a=t.legendOptions)==null?void 0:a.maxLabel)||"high"),{color:i.color,label:o,ratio:i.ratio}}).reverse()}Tt.getLogger("esri.renderers.support.utils");async function to(t,e,n){Xh(t,e,()=>[]).push(...n)}async function w1e(t){var n,i;const e=new Map;if(!t)return e;if("visualVariables"in t&&t.visualVariables){const s=t.visualVariables.filter(o=>o.type==="color");for(const o of s){const r=(await xC(o)).map(a=>a.color);await to(e,o.field||o.valueExpression,r)}}if(t.type==="heatmap"){const s=D3(t).map(o=>o.color);await to(e,t.field||t.valueExpression,s)}else if(t.type==="pie-chart"){for(const s of t.attributes)await to(e,s.field||s.valueExpression,[s.color]);await to(e,"default",[(n=t==null?void 0:t.othersCategory)==null?void 0:n.color,ad(t.backgroundFillSymbol,null)])}else if(t.type==="dot-density"){for(const s of t.attributes)await to(e,s.field||s.valueExpression,[s.color]);await to(e,"default",[t.backgroundColor])}else if(t.type==="unique-value")if(((i=t.authoringInfo)==null?void 0:i.type)==="predominance")for(const s of t.uniqueValueInfos??[])await to(e,s.value.toString(),[ad(s.symbol,null)]);else{const s=(t.uniqueValueInfos??[]).map(c=>ad(c.symbol,null)),{field:o,field2:r,field3:a,valueExpression:l}=t;(o||l)&&await to(e,o||l,s),r&&await to(e,r,s),a&&await to(e,a,s)}else if(t.type==="class-breaks"){const s=t.classBreakInfos.map(a=>ad(a.symbol,null)),{field:o,valueExpression:r}=t;await to(e,o??r,s)}else t.type==="simple"&&await to(e,"default",[ad(t.symbol,null)]);return"defaultSymbol"in t&&t.defaultSymbol&&await to(e,"default",[ad(t.defaultSymbol,null)]),e.forEach((s,o)=>{const r=r8(s.filter(Boolean),(a,l)=>JSON.stringify(a)===JSON.stringify(l));e.set(o,r)}),e}const C1e="esri.widgets.Feature.support.relatedFeatureUtils",y2=Tt.getLogger(C1e),b2=new Map;function MC(t){if(!Wa(t))return null;const[e,n]=t.split("/").slice(1);return{layerId:e,fieldName:n}}function S1e(t,e){if(!e.relationships)return null;let n=null;const{relationships:i}=e;return i.some(s=>s.id===parseInt(t,10)&&(n=s,!0)),n}function E1e({originRelationship:t,relationships:e,layerId:n}){let i;return e&&e.some(s=>(`${s.relatedTableId}`===n&&s.id===t.id&&(i=s),!!i)),i}function k1e(t,e){const n=e.toLowerCase();for(const i in t)if(i.toLowerCase()===n)return t[i];return null}function T1e(t,e){const n=S1e(t,e);if(n)return{url:`${e.url}/${n.relatedTableId}`,sourceSpatialReference:e.spatialReference,relation:n,relatedFields:[],outStatistics:[]}}function I1e(t,e){if(!e||!t)return;const{features:n,statsFeatures:i}=t,s=n&&n.value;e.relatedFeatures=s?s.features:[];const o=i&&i.value;e.relatedStatsFeatures=o?o.features:[]}function x1e(t,e,n,i){const s=new D0;return s.outFields=["*"],s.relationshipId=typeof e.id=="number"?e.id:parseInt(e.id,10),s.objectIds=[t.attributes[n.objectIdField]],n.queryRelatedFeatures(s,i)}function M1e(t,e,n){let i=0;const s=[];for(;i<e.length;)s.push(`${t} IN (${e.slice(i,n+i)})`),i+=n;return s.join(" OR ")}async function $1e(t,e,n,i){const s=n.layerId.toString(),{layerInfo:o,relation:r,relatedFields:a,outStatistics:l,url:c,sourceSpatialReference:u}=e,d=E1e({originRelationship:r,relationships:o.relationships,layerId:s});if(d.relationshipTableId&&d.keyFieldInRelationshipTable){const f=(await x1e(t,d,n,i))[t.attributes[n.objectIdField]];if(!f)return null;const m=f.features.map(g=>g.attributes[o.objectIdField]);if((l==null?void 0:l.length)>0&&o.supportsStatistics){const g=new kv;g.where=M1e(o.objectIdField,m,1e3),g.outFields=a,g.outStatistics=l,g.sourceSpatialReference=u;const y={features:Promise.resolve(f),statsFeatures:q_(c,g)};return Ni(y)}}const h=d==null?void 0:d.keyField;if(h){const f=Ev(R1e(o.fields,h)),m=k1e(t.attributes,r.keyField),g=f?`${h}=${m}`:`${h}='${m}'`,y=q_(c,new kv({where:g,outFields:e.relatedFields,sourceSpatialReference:u}),i),_=e.outStatistics&&e.outStatistics.length>0&&o.supportsStatistics?q_(c,new kv({where:g,outFields:e.relatedFields,outStatistics:e.outStatistics,sourceSpatialReference:u}),i):null,C={features:y};return _&&(C.statsFeatures=_),Ni(C)}return null}function A1e(t,e){return go(t,{query:{f:"json"},signal:e&&e.signal})}function L1e({relatedInfos:t,layer:e},n){const i={};return t.forEach((s,o)=>{const{relation:r}=s;if(!r){const d=new Ue("relation-required","A relation is required on a layer to retrieve related records.");throw y2.error(d),d}const{relatedTableId:a}=r;if(typeof a!="number"){const d=new Ue("A related table ID is required on a layer to retrieve related records.");throw y2.error(d),d}const l=`${e.url}/${a}`,c=b2.get(l),u=c||A1e(l,n);c||b2.set(l,u),i[o]=u}),Ni(i)}function O1e({graphic:t,relatedInfos:e,layer:n},i){const s={};return e.forEach((o,r)=>{o.layerInfo&&(s[r]=$1e(t,o,n,i))}),Ni(s)}function P1e({relatedInfo:t,fieldName:e,fieldInfo:n}){if(t.relatedFields.push(e),n.statisticType){const i=new dB({statisticType:n.statisticType,onStatisticField:e,outStatisticFieldName:e});t.outStatistics.push(i)}}function R1e(t,e){if(t!=null){e=e.toLowerCase();for(const n of t)if(n&&n.name.toLowerCase()===e)return n}return null}const _2={chartAnimation:!0};let xi=class extends dt{constructor(e){super(e),this.abilities={..._2},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{..._2,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:n}=this,i=(e+n)%n;this.activeMediaInfoIndex=i}_pageContentElementMedia(e){const{activeMediaInfoIndex:n}=this,i=n+e;this._setContentElementMedia(i)}_formatMediaInfos(){const{attributes:e,mediaInfos:n,formattedAttributes:i,expressionAttributes:s,fieldInfoMap:o,layer:r}=this;return n==null?void 0:n.map(a=>{const l=a==null?void 0:a.clone();if(!l)return null;if(l.title=Lu({attributes:e,fieldInfoMap:o,globalAttributes:i,expressionAttributes:s,layer:r,text:l.title}),l.caption=Lu({attributes:e,fieldInfoMap:o,globalAttributes:i,expressionAttributes:s,layer:r,text:l.caption}),l.altText=Lu({attributes:e,fieldInfoMap:o,globalAttributes:i,expressionAttributes:s,layer:r,text:l.altText}),l.type==="image"){const{value:c}=l;return this._setImageValue({value:c,formattedAttributes:i,layer:r}),l.value.sourceURL?l:void 0}if(l.type==="pie-chart"||l.type==="line-chart"||l.type==="column-chart"||l.type==="bar-chart"){const{value:c}=l;return this._setChartValue({value:c,chartType:l.type,attributes:e,formattedAttributes:i,layer:r,expressionAttributes:s}),l}return null}).filter(Boolean)}_setImageValue(e){const{fieldInfoMap:n}=this,{value:i,formattedAttributes:s,layer:o}=e,{linkURL:r,sourceURL:a}=i;if(a){const l=TC(a,o);i.sourceURL=kC({formattedAttributes:s,template:l,fieldInfoMap:n})}if(r){const l=TC(r,o);i.linkURL=kC({formattedAttributes:s,template:l,fieldInfoMap:n})}}_setChartValue(e){const{value:n,attributes:i,formattedAttributes:s,chartType:o,layer:r,expressionAttributes:a}=e,{popupTemplate:l,relatedInfos:c}=this,{fields:u,normalizeField:d}=n;if(n.fields=I0e(u,r),d&&(n.normalizeField=Wm(d,r)),!u.some(f=>!!(s[f]!=null||Wa(f)&&c.size)))return;const h=l==null?void 0:l.fieldInfos;u.forEach(f=>{if(Wa(f))return void(n.series=[...n.series,...this._getRelatedChartInfos({fieldInfos:h,fieldName:f,formattedAttributes:s,chartType:o,value:n})]);const m=this._getChartOption({value:n,attributes:i,chartType:o,formattedAttributes:s,expressionAttributes:a,fieldName:f,fieldInfos:h});n.series.push(m)})}_getRelatedChartInfos(e){var g;const{fieldInfos:n,fieldName:i,formattedAttributes:s,chartType:o,value:r}=e,a=[],l=MC(i),{layerId:c,fieldName:u}=l,d=(g=this.relatedInfos)==null?void 0:g.get(c.toString());if(!d)return a;const{relatedFeatures:h,relation:f}=d;if(!f||!h)return a;const{cardinality:m}=f;return h.forEach(y=>{const{attributes:_}=y;_&&Object.keys(_).forEach(C=>{C===u&&a.push(this._getChartOption({value:r,attributes:_,formattedAttributes:s,fieldName:i,chartType:o,relatedFieldName:C,fieldInfos:n}))})}),m==="one-to-many"||m==="many-to-many"?a:[a[0]]}_getTooltip({label:e,value:n,chartType:i}){return i==="pie-chart"?`${e}`:`${e}: ${n}`}_getChartOption(e){var E;const{value:n,attributes:i,formattedAttributes:s,expressionAttributes:o,fieldName:r,relatedFieldName:a,fieldInfos:l,chartType:c}=e,{layer:u,fieldInfoMap:d}=this,{normalizeField:h,tooltipField:f}=n,m=h?Wa(h)?i[MC(h).fieldName]:i[h]:null,g=Yk(r)&&o&&o[r]!==void 0?o[r]:a&&i[a]!==void 0?i[a]:i[r]!==void 0?i[r]:s[r],y=new Y8({fieldName:r,value:g===void 0?null:g&&m?g/m:g});if(Wa(r)){const k=d.get(r.toLowerCase()),A=d.get(f.toLowerCase()),$=(k==null?void 0:k.fieldName)??r,L=s[(A==null?void 0:A.fieldName)??f]??(k==null?void 0:k.label)??(k==null?void 0:k.fieldName)??a,O=s[$];return y.tooltip=this._getTooltip({label:L,value:O,chartType:c}),y}const _=E3(l,r),C=Wm(r,u),w=f&&s[f]!==void 0?s[f]:C3(_||new rO({fieldName:C}),(E=this.popupTemplate)==null?void 0:E.expressionInfos),S=s[C];return y.tooltip=this._getTooltip({label:w,value:S,chartType:c}),y}};v([b()],xi.prototype,"abilities",void 0),v([ii("abilities")],xi.prototype,"castAbilities",null),v([b()],xi.prototype,"activeMediaInfoIndex",void 0),v([b({readOnly:!0})],xi.prototype,"activeMediaInfo",null),v([b()],xi.prototype,"attributes",void 0),v([b()],xi.prototype,"description",void 0),v([b()],xi.prototype,"fieldInfoMap",void 0),v([b()],xi.prototype,"formattedAttributes",void 0),v([b()],xi.prototype,"expressionAttributes",void 0),v([b({readOnly:!0})],xi.prototype,"formattedMediaInfos",null),v([b()],xi.prototype,"layer",void 0),v([b({readOnly:!0})],xi.prototype,"formattedMediaInfoCount",null),v([b()],xi.prototype,"mediaInfos",void 0),v([b()],xi.prototype,"popupTemplate",void 0),v([b()],xi.prototype,"relatedInfos",void 0),v([b()],xi.prototype,"title",void 0),xi=v([Ae("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],xi);const Ou=xi;var w2=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],V1e=[].concat(w2.slice(30,39),w2.slice(28,30).reverse()),F1e=[{name:"default",colors:V1e},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const C2="en-us",Jk=new Map([["ar",()=>Fe(()=>import("./ar-7e4d7001.js"),["./ar-7e4d7001.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.a)],["bg-bg",()=>Fe(()=>import("./bg_BG-fa0eaeae.js"),["./bg_BG-fa0eaeae.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.b)],["bs-ba",()=>Fe(()=>import("./bs_BA-4f949e9b.js"),["./bs_BA-4f949e9b.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.b)],["ca-es",()=>Fe(()=>import("./ca_ES-ac250c21.js"),["./ca_ES-ac250c21.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.c)],["cs-cz",()=>Fe(()=>import("./cs_CZ-41aa2dde.js"),["./cs_CZ-41aa2dde.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.c)],["da-dk",()=>Fe(()=>import("./da_DK-3cc83778.js"),["./da_DK-3cc83778.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.d)],["de-de",()=>Fe(()=>import("./de_DE-7cf156b8.js"),["./de_DE-7cf156b8.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.d)],["de-ch",()=>Fe(()=>import("./de_CH-b40119c2.js"),["./de_CH-b40119c2.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.d)],["el-gr",()=>Fe(()=>import("./el_GR-f5b4e421.js"),["./el_GR-f5b4e421.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.e)],["en-us",()=>Fe(()=>import("./en_US-b653138f.js"),["./en_US-b653138f.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.e)],["en-ca",()=>Fe(()=>import("./en_CA-b653138f.js"),["./en_CA-b653138f.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.e)],["es-es",()=>Fe(()=>import("./es_ES-21713ea8.js"),["./es_ES-21713ea8.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.e)],["et-ee",()=>Fe(()=>import("./et_EE-7e4a5525.js"),["./et_EE-7e4a5525.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.e)],["fi-fi",()=>Fe(()=>import("./fi_FI-9ff24319.js"),["./fi_FI-9ff24319.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.f)],["fr-fr",()=>Fe(()=>import("./fr_FR-51c37695.js"),["./fr_FR-51c37695.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.f)],["he-il",()=>Fe(()=>import("./he_IL-5c441159.js"),["./he_IL-5c441159.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.h)],["hr-hr",()=>Fe(()=>import("./hr_HR-f42ffa87.js"),["./hr_HR-f42ffa87.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.h)],["hu-hu",()=>Fe(()=>import("./hu_HU-5fba6ab9.js"),["./hu_HU-5fba6ab9.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.h)],["id-id",()=>Fe(()=>import("./id_ID-981fbb86.js"),["./id_ID-981fbb86.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.i)],["it-it",()=>Fe(()=>import("./it_IT-c635b784.js"),["./it_IT-c635b784.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.i)],["ja-jp",()=>Fe(()=>import("./ja_JP-e2cf7b21.js"),["./ja_JP-e2cf7b21.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.j)],["ko-kr",()=>Fe(()=>import("./ko_KR-32aae4f2.js"),["./ko_KR-32aae4f2.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.k)],["lt-lt",()=>Fe(()=>import("./lt_LT-3c0b9d54.js"),["./lt_LT-3c0b9d54.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.l)],["lv-lv",()=>Fe(()=>import("./lv_LV-c1cc4a4c.js"),["./lv_LV-c1cc4a4c.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.l)],["nb-no",()=>Fe(()=>import("./nb_NO-5958d98d.js"),["./nb_NO-5958d98d.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.n)],["nl-nl",()=>Fe(()=>import("./nl_NL-004b20fd.js"),["./nl_NL-004b20fd.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.n)],["pl-pl",()=>Fe(()=>import("./pl_PL-d6d01c5e.js"),["./pl_PL-d6d01c5e.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.p)],["pt-br",()=>Fe(()=>import("./pt_BR-a08a6ce1.js"),["./pt_BR-a08a6ce1.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.p)],["pt-pt",()=>Fe(()=>import("./pt_PT-d532c840.js"),["./pt_PT-d532c840.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.p)],["ro-ro",()=>Fe(()=>import("./ro_RO-e4007f77.js"),["./ro_RO-e4007f77.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.r)],["ru-ru",()=>Fe(()=>import("./ru_RU-905ac2e8.js"),["./ru_RU-905ac2e8.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.r)],["sk-sk",()=>Fe(()=>import("./sk_SK-cae815ce.js"),["./sk_SK-cae815ce.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.s)],["sl-sl",()=>Fe(()=>import("./sl_SL-50353bbe.js"),["./sl_SL-50353bbe.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.s)],["sr-rs",()=>Fe(()=>import("./sr_RS-9a9b8450.js"),["./sr_RS-9a9b8450.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.s)],["sv-se",()=>Fe(()=>import("./sv_SE-346c1643.js"),["./sv_SE-346c1643.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.s)],["th-th",()=>Fe(()=>import("./th_TH-210af5ed.js"),["./th_TH-210af5ed.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.t)],["tr-tr",()=>Fe(()=>import("./tr_TR-855c517f.js"),["./tr_TR-855c517f.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.t)],["uk-ua",()=>Fe(()=>import("./uk_UA-7de21af4.js"),["./uk_UA-7de21af4.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.u)],["vi-vn",()=>Fe(()=>import("./vi_VN-f87f03fa.js"),["./vi_VN-f87f03fa.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.v)],["zh-cn",()=>Fe(()=>import("./zh_Hans-79f10982.js"),["./zh_Hans-79f10982.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.z)],["zh-hk",()=>Fe(()=>import("./zh_Hant-abc409cd.js"),["./zh_Hant-abc409cd.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.z)],["zh-tw",()=>Fe(()=>import("./zh_Hant-abc409cd.js"),["./zh_Hant-abc409cd.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(t=>t.z)]]);function D1e(t){const e=t.split("-")[0].toLowerCase();let n=null;for(const i of Jk.keys())if(i.startsWith(e)){n=i;break}return n}function N1e(t){return t?Jk.has(t.toLowerCase())?t.toLowerCase():D1e(t)||C2:C2}let pd,Nh;async function B1e(t=z0()){if(t=N1e(t),pd&&t===Nh)return pd;pd=Fe(()=>import("./index-3c8f1bc3.js"),["./index-3c8f1bc3.js","./_commonjsHelpers-a430e9ea.js"],import.meta.url).then(e=>e.i),Nh=t;try{const[e,n]=await Promise.all([pd,Jk.get(Nh)()]);Nh===t&&(e.am4core.options.defaultLocale=n.default),e.am4core.options.suppressWarnings=!0,e.am4core.options.autoDispose=!0}catch{return pd=null,Nh=null,null}return pd}function z1e(t,e="default"){const n=F1e.find(i=>i.name===e);return n?n.colors.map(i=>t.color(i)):null}const Qn={base:"esri-feature-media",mediaContainer:"esri-feature-media__container",mediaItemContainer:"esri-feature-media__item-container",mediaItem:"esri-feature-media__item",mediaItemTitle:"esri-feature-media__item-title",mediaItemCaption:"esri-feature-media__item-caption",mediaPrevious:"esri-feature-media__previous",mediaPreviousIconLTR:"esri-feature-media__previous-icon",mediaPreviousIconRTL:"esri-feature-media__previous-icon--rtl",mediaNext:"esri-feature-media__next",mediaNextIconLTR:"esri-feature-media__next-icon",mediaNextIconRTL:"esri-feature-media__next-icon--rtl",mediaChart:"esri-feature-media__chart",mediaButton:"esri-feature-media__button",mediaIcon:"esri-feature-media__icon",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},Hw=.05,Uw=.95,Ww=15,ha="color",_l="tooltip",Bh="value",S2="default-line-value";let Ws=class extends kn{constructor(e,n){super(e,n),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.viewModel=new Ou,this.messages=null,this._getChartDependencies=async i=>{const s=await B1e(),{destroyed:o,viewModel:r}=this;if(o||!r||!i)return;const{activeMediaInfo:a}=r,l=await this._getRendererColors(s);this._renderChart({chartDiv:i,mediaInfo:a,chartsModule:s,colorMap:l})}}initialize(){this._featureElementInfo=new T_,this.addHandles([ge(()=>{var e,n;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(n=this.viewModel)==null?void 0:n.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),gt),ge(()=>{var e,n;return[(e=this.viewModel)==null?void 0:e.description,(n=this.viewModel)==null?void 0:n.title]},()=>this._setupFeatureElementInfo(),gt)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(e){this.viewModel.activeMediaInfoIndex=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(e){this.viewModel.fieldInfoMap=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(e){this.viewModel.mediaInfos=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(e){this.viewModel.relatedInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;return M("div",{bind:this,class:Qn.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?M("div",{key:"media-element-container",class:Qn.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:n}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:s}=this.viewModel,{value:o,refreshInterval:r,altText:a,title:l,type:c}=e,{sourceURL:u,linkURL:d}=o,h=w3(d)?"_blank":"_self",f=h==="_blank"?"noreferrer":"",m=r?n:null,g=m?m.timestamp:0,y=m?m.sourceURL:u,_=M("img",{alt:a||l,key:`media-${c}-${i}-${s}-${g}`,src:y});return(d?M("a",{title:l,href:d,rel:f,target:h},_):null)||_}renderChartMediaInfo(e){const{activeMediaInfoIndex:n,formattedMediaInfoCount:i}=this.viewModel;return M("div",{key:`media-${e.type}-${n}-${i}`,bind:this,class:Qn.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const n=e.title?M("div",{key:"media-title",class:Qn.mediaItemTitle,innerHTML:e.title}):null,i=e.caption?M("div",{key:"media-caption",class:Qn.mediaItemCaption,innerHTML:e.caption}):null;return M("div",{key:"media-container",class:Qn.mediaItemContainer},M("div",{key:"media-item-container",class:Qn.mediaItem},this.renderMediaInfoType()),n,i)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const n=e==="previous",i=n?this.messages.previous:this.messages.next,s=n?this.classes(Qn.mediaButton,Qn.mediaPrevious):this.classes(Qn.mediaButton,Qn.mediaNext),o=n?this.classes(Qn.mediaIcon,Qn.mediaPreviousIconLTR,Qn.iconLeftTriangleArrow):this.classes(Qn.mediaIcon,Qn.mediaNextIconLTR,Qn.iconRightTriangleArrow),r=n?this.classes(Qn.mediaIcon,Qn.mediaPreviousIconRTL,Qn.iconRightTriangleArrow):this.classes(Qn.mediaIcon,Qn.mediaNextIconRTL,Qn.iconLeftTriangleArrow),a=n?"media-previous":"media-next",l=n?this._previous:this._next;return M("button",{type:"button",key:a,title:i,"aria-label":i,tabIndex:0,class:s,bind:this,onclick:l},M("span",{"aria-hidden":"true",class:o}),M("span",{"aria-hidden":"true",class:r}))}_setupFeatureElementInfo(){const{description:e,title:n}=this;this._featureElementInfo.set({description:e,title:n})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}async _getRendererColors(e){var a,l;const{am4core:n}=e,i=new Map,s=(l=(a=this.viewModel)==null?void 0:a.layer)==null?void 0:l.renderer,o="default";if(!s)return i;const r=await w1e(s);return r.delete(o),Array.from(r.values()).every(c=>(c==null?void 0:c.length)===1)&&(i.set(S2,n.color({r:50,g:50,b:50,a:1})),Array.from(r.keys()).forEach(c=>{c&&i.set(c,n.color(r.get(c)[0].toCss(!0)))})),i}_handleMediaKeyup(e){const n=ec(e);n==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),n==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:n}=this.viewModel,{chartsModule:i,chartDiv:s,mediaInfo:o,colorMap:r}=e,{value:a,type:l}=o,{am4core:c}=i,u=z1e(c);function d(m){m instanceof c.ColorSet&&u&&(m.list=u)}Gm()&&c.useTheme(i.am4themes_dark);const h=window.matchMedia("(prefers-reduced-motion: reduce)");n.chartAnimation&&!h.matches?c.useTheme(i.am4themes_animated):c.unuseTheme(i.am4themes_animated),c.useTheme(d);const f=l==="pie-chart"?this._createPieChart(e):this._createXYChart(e);s.setAttribute("aria-label",o.altText||o.title),f.data=a.series.map(m=>({[_l]:m.tooltip,[Bh]:m.value,[ha]:r.get(m.fieldName)})).filter(m=>l!=="pie-chart"||m.value>0)}_customizeChartTooltip(e,n){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=n.color("#ffffff"),e.background.fill=n.color({r:0,g:0,b:0,a:.7})}_createPieChart(e){const{chartDiv:n,chartsModule:i}=e,{am4core:s,am4charts:o}=i,r=s.create(n,o.PieChart);r.rtl=yo(this.container);const a=r.series.push(new o.PieSeries);return a.labels.template.disabled=!0,a.ticks.template.disabled=!0,a.dataFields.value=Bh,a.dataFields.category=_l,this._customizeChartTooltip(a.tooltip,s),a.slices.template.propertyFields.fill=ha,a.slices.template.propertyFields.stroke=ha,r}_getMinSeriesValue(e){let n=0;return e.forEach(i=>n=Math.min(i.value,n)),n}_createColumnChart(e,n){const{chartsModule:i,mediaInfo:s}=n,{value:o}=s,{am4core:r,am4charts:a}=i,l=e.xAxes.push(new a.CategoryAxis);l.dataFields.category=_l,l.renderer.labels.template.disabled=!0,this._customizeChartTooltip(l.tooltip,r),l.tooltip.events.on("sizechanged",()=>{l.tooltip.dy=-l.tooltip.contentHeight});const c=e.yAxes.push(new a.ValueAxis),u=c.renderer.labels.template;c.renderer.minLabelPosition=Hw,c.renderer.maxLabelPosition=Uw,c.min=this._getMinSeriesValue(o.series),this._customizeChartTooltip(c.tooltip,r),u.wrap=!0;const d=e.series.push(new a.ColumnSeries);d.dataFields.valueY=Bh,d.dataFields.categoryX=_l,d.columns.template.propertyFields.fill=ha,d.columns.template.propertyFields.stroke=ha,e.cursor=new a.XYCursor,o.series.length>Ww&&(e.scrollbarX=new r.Scrollbar)}_createBarChart(e,n){const{chartsModule:i,mediaInfo:s}=n,{value:o}=s,{am4core:r,am4charts:a}=i,l=e.yAxes.push(new a.CategoryAxis);l.dataFields.category=_l,l.renderer.inversed=!0,l.renderer.labels.template.disabled=!0,this._customizeChartTooltip(l.tooltip,r),l.tooltip.events.on("sizechanged",()=>{l.tooltip.dx=l.tooltip.contentWidth});const c=e.xAxes.push(new a.ValueAxis),u=c.renderer.labels.template;c.renderer.minLabelPosition=Hw,c.renderer.maxLabelPosition=Uw,c.min=this._getMinSeriesValue(o.series),this._customizeChartTooltip(c.tooltip,r),u.wrap=!0;const d=e.series.push(new a.ColumnSeries);d.dataFields.valueX=Bh,d.dataFields.categoryY=_l,d.columns.template.propertyFields.fill=ha,d.columns.template.propertyFields.stroke=ha,e.cursor=new a.XYCursor,o.series.length>Ww&&(e.scrollbarY=new r.Scrollbar)}_createLineChart(e,n){const{chartsModule:i,mediaInfo:s,colorMap:o}=n,{value:r}=s,{am4core:a,am4charts:l}=i,c=e.xAxes.push(new l.CategoryAxis);c.dataFields.category=_l,c.renderer.labels.template.disabled=!0,this._customizeChartTooltip(c.tooltip,a),c.tooltip.events.on("sizechanged",()=>{c.tooltip.dy=-c.tooltip.contentHeight});const u=e.yAxes.push(new l.ValueAxis),d=u.renderer.labels.template;u.renderer.minLabelPosition=Hw,u.renderer.maxLabelPosition=Uw,u.min=this._getMinSeriesValue(r.series),this._customizeChartTooltip(u.tooltip,a),d.wrap=!0;const h=e.series.push(new l.LineSeries);h.dataFields.categoryX=_l,h.dataFields.valueY=Bh,h.strokeWidth=1;const f=o.get(S2);f&&(h.stroke=f);const m=h.bullets.push(new l.CircleBullet);m.propertyFields.fill=ha,m.propertyFields.stroke=ha,e.cursor=new l.XYCursor,r.series.length>Ww&&(e.scrollbarX=new a.Scrollbar)}_createXYChart(e){const{chartDiv:n,chartsModule:i,mediaInfo:s}=e,{type:o}=s,{am4core:r,am4charts:a}=i,l=r.create(n,a.XYChart);return l.rtl=yo(this.container),o==="column-chart"&&this._createColumnChart(l,e),o==="bar-chart"&&this._createBarChart(l,e),o==="line-chart"&&this._createLineChart(l,e),l}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const n=Date.now();this._refreshIntervalInfo={timestamp:n,sourceURL:this._getImageSource(e,n)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:n,value:i}=e;if(!n)return;const s=6e4*n;this._updateMediaInfoTimestamp(i.sourceURL);const o=setInterval(()=>{this._updateMediaInfoTimestamp(i.sourceURL)},s);this._refreshTimer=o}_getImageSource(e,n){const i=e.includes("?")?"&":"?",[s,o=""]=e.split("#");return`${s}${i}timestamp=${n}${o?"#":""}${o}`}};v([b()],Ws.prototype,"attributes",null),v([b()],Ws.prototype,"activeMediaInfoIndex",null),v([b()],Ws.prototype,"description",null),v([b()],Ws.prototype,"fieldInfoMap",null),v([b()],Ws.prototype,"layer",null),v([b()],Ws.prototype,"mediaInfos",null),v([b()],Ws.prototype,"popupTemplate",null),v([b()],Ws.prototype,"relatedInfos",null),v([b()],Ws.prototype,"title",null),v([b({type:Ou})],Ws.prototype,"viewModel",void 0),v([b(),rn("esri/widgets/Feature/t9n/Feature")],Ws.prototype,"messages",void 0),Ws=v([Ae("esri.widgets.Feature.FeatureMedia")],Ws);const N3=Ws,H1e=["$datastore","$map","$layer","$aggregatedfeatures"],U1e="esri.widgets.Feature.support.arcadeFeatureUtils",W1e=Tt.getLogger(U1e);function G1e(t){return typeof t=="string"?gg(Xk(t)):Array.isArray(t)?j1e(t):(t==null?void 0:t.declaredClass)==="esri.arcade.Dictionary"?q1e(t):t}function j1e(t){return`<ul class="esri-widget__list">${t.map(e=>`<li>${typeof e=="string"?gg(Xk(e)):e}</li>`).join("")}</ul>`}function q1e(t){return`<table class="esri-widget__table">${t.keys().map(e=>{const n=t.field(e);return`<tr><th>${e}</th><td>${typeof n=="string"?gg(Xk(n)):n}</td></tr>`}).join("")}</table>`}function K1e({aggregatedFeatures:t,arcadeUtils:e,featureSetVars:n,context:i,viewInfo:s,map:o,graphic:r,interceptor:a}){n.forEach(l=>{const c=l.toLowerCase(),u={map:o,spatialReference:s.sr,interceptor:a};if(c==="$map"&&(i.vars[c]=e.convertMapToFeatureSetCollection(u)),c==="$layer"&&(i.vars[c]=e.convertFeatureLayerToFeatureSet({layer:r.sourceLayer,spatialReference:s.sr,interceptor:a})),c==="$datastore"&&(i.vars[c]=e.convertServiceUrlToWorkspace({url:r.sourceLayer.url,spatialReference:s.sr,interceptor:a})),c==="$aggregatedfeatures"){const d=r.layer,{fields:h,objectIdField:f,geometryType:m,spatialReference:g,displayField:y}=d,_=new Dr({fields:h,objectIdField:f,geometryType:m,spatialReference:g,displayField:y,...d.type==="feature"?{templates:d.templates,typeIdField:d.typeIdField,types:d.types}:null,source:t});i.vars[c]=e.convertFeatureLayerToFeatureSet({layer:_,spatialReference:s.sr,interceptor:a})}})}function B3(){return Fe(()=>import("./arcadeUtils-45f95991.js").then(t=>t.aw),["./arcadeUtils-45f95991.js","./geometry-eec1b371.js","./ensureType-25b8cc06.js","./string-480f3e3f.js","./typedArrayUtil-d9bc5fbd.js","./Error-57322e92.js","./Extent-a1a1de42.js","./cast-a534ae90.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./preload-helper-41c905a7.js","./datetime-4f774298.js","./number-87bee5a3.js","./locale-30120714.js","./Field-1d4f9ca4.js","./enumeration-61a13175.js","./fieldType-b34e5d2d.js","./jsonUtils-c6684c52.js","./featureConversionUtils-d2229ed4.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./request-24011425.js","./unitUtils-dd6fb8ee.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./sizeVariableUtils-d4870b0d.js"],import.meta.url)}function Y1e(t){return"createQuery"in t&&"queryFeatures"in t}async function Z1e({graphic:t,view:e}){const{isAggregate:n,layer:i}=t;if(!n||!i||(e==null?void 0:e.type)!=="2d")return[];const s=await e.whenLayerView(i);if(!Y1e(s))return[];const o=s.createQuery();o.aggregateIds=[t.getObjectId()];const{features:r}=await s.queryFeatures(o);return r}async function z3({expressionInfo:t,arcadeUtils:e,interceptor:n,spatialReference:i,map:s,graphic:o,view:r}){if(!t||!t.expression)return null;const a=e.createSyntaxTree(t.expression),l=H1e.filter(f=>e.hasVariable(a,f)),[c]=await Promise.all([Z1e({graphic:o,view:r}),e.loadScriptDependencies(a,!0,l)]),u=e.getViewInfo({spatialReference:i}),d=e.createExecContext(o,u);d.interceptor=n,d.useAsync=!0,K1e({aggregatedFeatures:c,arcadeUtils:e,featureSetVars:l,context:d,viewInfo:u,map:s,graphic:o,interceptor:n});const h=e.createFunction(a,d);return e.executeAsyncFunction(h,d).catch(f=>W1e.error("arcade-execution-error",{error:f,graphic:o,expressionInfo:t}))}async function X1e({expressionInfos:t,spatialReference:e,graphic:n,interceptor:i,map:s,view:o}){if(!t||!t.length)return{};const r=await B3(),a={};for(const u of t)a[`expression/${u.name}`]=z3({expressionInfo:u,arcadeUtils:r,interceptor:i,spatialReference:e,map:s,graphic:n,view:o});const l=await Ni(a),c={};for(const u in l)c[u]=G1e(l[u].value);return c}const Q1e=1;let ro=class extends Li(dt){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:n}=this;n&&n.abort(),this._abortController=null},this._createVM=()=>{var s,o;const n=(s=this.contentElement)==null?void 0:s.type;(o=this.contentElementViewModel)==null||o.destroy();const i=n==="fields"?new I_:n==="media"?new Ou:n==="text"?new lb:null;this._set("contentElementViewModel",i)},this._compile=async()=>{this._cancelQuery();const n=new AbortController;this._abortController=n,await this._compileExpression(),this._abortController===n&&(this._abortController=null)},this._compileThrottled=Cp(this._compile,Q1e,this),this._compileExpression=async()=>{const{expressionInfo:n,graphic:i,interceptor:s,spatialReference:o,map:r,view:a,_abortController:l}=this;if(!(n&&i&&o&&r))return void this._set("contentElement",null);const c=await B3();if(l!==this._abortController)return;const u=await z3({arcadeUtils:c,expressionInfo:n,graphic:i,interceptor:s,map:r,spatialReference:o,view:a});if(!u||u.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const d=await u.castAsJsonAsync(l.signal),h=d==null?void 0:d.type,f=h==="media"?Z8.fromJSON(d):h==="text"?aO.fromJSON(d):h==="fields"?X8.fromJSON(d):null;this._set("contentElement",f)},this.handles.add([ge(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),gt),ge(()=>[this.contentElement],()=>this._createVM(),gt)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get state(){const{_abortController:e,contentElement:n,contentElementViewModel:i}=this;return e?"loading":n||i?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)??null}set map(e){this._override("map",e)}};v([b()],ro.prototype,"_abortController",void 0),v([b({type:Q8})],ro.prototype,"expressionInfo",void 0),v([b({type:Ls})],ro.prototype,"graphic",void 0),v([b({readOnly:!0})],ro.prototype,"contentElement",void 0),v([b({readOnly:!0})],ro.prototype,"contentElementViewModel",void 0),v([b()],ro.prototype,"interceptor",void 0),v([b()],ro.prototype,"spatialReference",null),v([b({readOnly:!0})],ro.prototype,"state",null),v([b()],ro.prototype,"map",null),v([b()],ro.prototype,"view",void 0),ro=v([Ae("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],ro);const eT=ro,Xg={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let ry=class extends kn{constructor(e,n){super(e,n),this.viewModel=new eT}initialize(){this.addHandles(ge(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),gt))}destroy(){this._destroyContentWidget()}renderLoading(){return M("div",{key:"loading-container",class:Xg.loadingSpinnerContainer},M("span",{class:this.classes(Xg.iconLoading,Xg.spinner)}))}render(){var n;const{state:e}=this.viewModel;return M("div",{class:Xg.base},e==="loading"?this.renderLoading():e==="disabled"?null:(n=this._contentWidget)==null?void 0:n.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:n}=this.viewModel,i=n==null?void 0:n.type;this._destroyContentWidget();const s=e?i==="fields"?new A3({viewModel:e}):i==="media"?new N3({viewModel:e}):i==="text"?new sy({viewModel:e}):null:null;this._contentWidget=s,this.scheduleRender()}};v([b({type:eT})],ry.prototype,"viewModel",void 0),ry=v([Ae("esri.widgets.Feature.FeatureExpression")],ry);const J1e=ry,Gw=100;let An=class extends GL(dh(Li(dt))){constructor(e){super(e),this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:n}=this;n&&n.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:n}=this;n&&n.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:n}=this;n&&n.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const n=new AbortController;this._queryAbortController=n,await cc(this._query()),this._queryAbortController===n&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._cancelQueryFeatureCount();const n=new AbortController;this._queryFeatureCountAbortController=n,await cc(this._queryFeatureCount()),this._queryFeatureCountAbortController===n&&(this._queryFeatureCountAbortController=null)},this._queryPageController=async()=>{const n=new AbortController;this._queryPageAbortController=n,await cc(this._queryPage()),this._queryPageAbortController===n&&(this._queryPageAbortController=null)},this._queryThrottled=Cp(this._queryController,Gw,this),this._queryFeatureCountThrottled=Cp(this._queryFeatureCountController,Gw,this),this._queryPageThrottled=Cp(this._queryPageController,Gw,this),this._query=async()=>{const{_queryAbortController:n,relatedFeatures:i}=this;this._destroyRelatedFeatureViewModels(),this.featurePage=1,i.removeAll(),i.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:n==null?void 0:n.signal})))},this.handles.add([ge(()=>[this.displayCount,this.graphic,this.layer,this.map,this.orderByFieldsFixedCasing,this.relationshipId,this.featuresPerPage,this.showAllEnabled],()=>this._queryThrottled(),gt),ge(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageThrottled()),ge(()=>[this.layer,this.relationshipId,this.objectId],()=>this._queryFeatureCountThrottled())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.removeAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(e){const{featuresPerPage:n,featureCount:i}=this,s=1,o=Math.ceil(i/n)||1;this._set("featurePage",Math.min(Math.max(e,s),o))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:e,relatedLayer:n}=this;return e&&(n!=null&&n.loaded)?e.map(i=>{const s=i.clone(),o=Wm(i.field,n);return s.field=o,s}):e}get itemDescriptionFieldName(){var e,n;return((n=(e=this.orderByFieldsFixedCasing)==null?void 0:e[0])==null?void 0:n.field)||null}set displayCount(e){this._set("displayCount",Math.min(Math.max(e,0),10))}get displayCount(){return this._get("displayCount")}get objectId(){var e,n;return((n=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:n[this.objectIdField])??null}get objectIdField(){var e;return((e=this.layer)==null?void 0:e.objectIdField)||null}get relatedFeatures(){return this._get("relatedFeatures")||new Ht}get relatedLayer(){const{layer:e,map:n,relationship:i}=this;return e!=null&&e.loaded?q0e(n,e,i):null}get relationship(){var i;const{relationshipId:e,layer:n}=this;return typeof e=="number"?((i=n==null?void 0:n.relationships)==null?void 0:i.find(({id:s})=>s===e))??null:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new Ht}get state(){const{_queryAbortController:e,_queryFeatureCountAbortController:n,_queryPageAbortController:i,graphic:s,relatedLayer:o}=this;return n?"loading":e||i?"querying":s&&o?"ready":"disabled"}_destroyRelatedFeatureViewModels(){var e;(e=this.relatedFeatureViewModels)==null||e.forEach(n=>!n.destroyed&&n.destroy()),this.relatedFeatureViewModels.removeAll()}async _queryFeatureCount(){var u,d,h,f;const{layer:e,relatedLayer:n,relationshipId:i,objectId:s,_queryFeatureCountAbortController:o}=this;if(await(e==null?void 0:e.load()),!n||typeof s!="number"||!((d=(u=e==null?void 0:e.capabilities)==null?void 0:u.queryRelated)!=null&&d.supportsCount))return void this._set("featureCount",0);await n.load();const r=n.createQuery(),a=((f=(h=e.capabilities)==null?void 0:h.queryRelated)==null?void 0:f.supportsCacheHint)??!1,l=new D0({cacheHint:a,relationshipId:i,returnGeometry:!1,objectIds:[s],where:r.where}),c=await e.queryRelatedFeaturesCount(l,{signal:o==null?void 0:o.signal});this._set("featureCount",c[s]||0)}_sliceFeatures(e){const{showAllEnabled:n,displayCount:i}=this;return n?e:i?e.slice(0,i):[]}async _queryPage(){const{relatedFeatures:e,featurePage:n,showAllEnabled:i,_queryPageAbortController:s}=this;!i||n<2||e.addMany(await this._queryRelatedFeatures({signal:s==null?void 0:s.signal}))}async _queryRelatedFeatures(e){var k,A,$,L,O;const{orderByFieldsFixedCasing:n,showAllEnabled:i,featuresPerPage:s,displayCount:o,layer:r,relationshipId:a,featurePage:l,featureCount:c,relatedLayer:u}=this;await(r==null?void 0:r.load());const{relationship:d,objectId:h}=this;if(!d||typeof h!="number"||!((A=(k=r==null?void 0:r.capabilities)==null?void 0:k.queryRelated)!=null&&A.supportsPagination))return[];const f=i?((l-1)*s+c)%c:0,m=i?s:o;if(!u)return[];await u.load();const g=u.objectIdField,y=[...n==null?void 0:n.map(B=>B.field),g],_=n==null?void 0:n.map(B=>`${B.field} ${B.order}`),C=((L=($=r.capabilities)==null?void 0:$.queryRelated)==null?void 0:L.supportsCacheHint)||!1,w=u.createQuery(),S=new D0({orderByFields:_,start:f,num:m,outFields:y,cacheHint:C,relationshipId:a,returnGeometry:!1,objectIds:[h],where:w.where}),E=((O=(await r.queryRelatedFeatures(S,{signal:e==null?void 0:e.signal}))[h])==null?void 0:O.features)||[];return E.forEach(B=>B.sourceLayer=u),E}};v([b()],An.prototype,"_queryAbortController",void 0),v([b()],An.prototype,"_queryPageAbortController",void 0),v([b()],An.prototype,"_queryFeatureCountAbortController",void 0),v([b({value:1})],An.prototype,"featurePage",null),v([b()],An.prototype,"featuresPerPage",void 0),v([b({readOnly:!0})],An.prototype,"orderByFieldsFixedCasing",null),v([b()],An.prototype,"description",void 0),v([b({readOnly:!0})],An.prototype,"itemDescriptionFieldName",null),v([b({value:3})],An.prototype,"displayCount",null),v([b({type:Ls})],An.prototype,"graphic",void 0),v([b()],An.prototype,"layer",void 0),v([b()],An.prototype,"map",void 0),v([b({readOnly:!0})],An.prototype,"objectId",null),v([b({readOnly:!0})],An.prototype,"objectIdField",null),v([b()],An.prototype,"orderByFields",void 0),v([b({readOnly:!0})],An.prototype,"relatedFeatures",null),v([b({readOnly:!0})],An.prototype,"relatedLayer",null),v([b({readOnly:!0})],An.prototype,"relationship",null),v([b({readOnly:!0})],An.prototype,"featureCount",void 0),v([b({readOnly:!0})],An.prototype,"relatedFeatureViewModels",null),v([b()],An.prototype,"relationshipId",void 0),v([b()],An.prototype,"showAllEnabled",void 0),v([b({readOnly:!0})],An.prototype,"state",null),v([b()],An.prototype,"title",void 0),An=v([Ae("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],An);const tT=An,fa={base:"esri-feature-relationship",esriWidget:"esri-widget",listContainer:"esri-feature-relationship__list",listContainerQuerying:"esri-feature-relationship__list--querying",featureObserver:"esri-feature__feature-observer",stickySpinnerContainer:"esri-feature__sticky-loading-container",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner",iconLoading:"esri-icon-loading-indicator esri-rotating"},E2={title:!0,description:!0};let _s=class extends kn{constructor(e,n){super(e,n),this._featureElementInfo=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([i])=>{i!=null&&i.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.headingLevel=2,this.viewModel=new tT,this.messages=null,this.messagesCommon=null,this.visibleElements={...E2},this._increaseFeaturePage=()=>{const{state:i,showAllEnabled:s,relatedFeatures:o,featuresPerPage:r,featurePage:a}=this.viewModel;i==="ready"&&s&&o.length>=r*a&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new T_,this.addHandles([ge(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),gt),ge(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),Dn(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return Promise.all([Fe(()=>import("./calcite-list-637f1ba8.js"),["./calcite-list-637f1ba8.js","./dom-5b7af1bf.js","./interactive-52dcf836.js"],import.meta.url),Fe(()=>import("./calcite-list-item-2b0d81b3.js"),["./calcite-list-item-2b0d81b3.js","./dom-5b7af1bf.js","./conditionalSlot-e2a39862.js","./observers-c77bfda3.js","./interactive-52dcf836.js"],import.meta.url),Fe(()=>import("./calcite-icon-5dd27db1.js"),["./calcite-icon-5dd27db1.js","./icon-1a289254.js","./dom-5b7af1bf.js","./observers-c77bfda3.js"],import.meta.url),Fe(()=>import("./calcite-notice-4f7be2b2.js"),["./calcite-notice-4f7be2b2.js","./dom-5b7af1bf.js","./conditionalSlot-e2a39862.js","./observers-c77bfda3.js","./icon-1a289254.js"],import.meta.url)])}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=sn(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:n,displayCount:i}=this.viewModel;return!e&&(n>i||i===0)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get featureCountDescription(){const{messages:e}=this,{featureCount:n}=this.viewModel;return Si(n===1?e==null?void 0:e.numberRecord:e==null?void 0:e.numberRecords,{number:n})}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}castVisibleElements(e){return{...E2,...e}}renderStickyLoading(){return this.viewModel.state==="querying"?M("div",{key:"sticky-loader",class:fa.stickySpinnerContainer},this.renderLoadingIcon()):null}renderLoadingIcon(){return M("span",{class:this.classes(fa.iconLoading,fa.spinner)})}renderLoading(){return M("div",{key:"loading-container",class:fa.loadingSpinnerContainer},this.renderLoadingIcon())}renderShowAllIconNode(){return M("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})}renderChevronIconNode(){const e=yo(this.container)?"chevron-left":"chevron-right";return M("calcite-icon",{scale:"s",icon:e,slot:"content-end"})}renderRelatedFeature(e){var o,r;const{itemDescriptionFieldName:n}=this.viewModel,i=e.title;e.description=n&&((o=e.formattedAttributes)==null?void 0:o.global[n]);const s=e.state==="loading";return M("calcite-list-item",{key:e.uid,label:s?`${(r=this.messagesCommon)==null?void 0:r.loading}…`:i,description:s?"…":e.description,onclick:()=>this.emit("select-record",{featureViewModel:e})},this.renderChevronIconNode())}renderShowAllListItem(){var e;return this.displayShowAllButton?M("calcite-list-item",{key:"show-all-item",label:(e=this.messages)==null?void 0:e.showAll,description:this.featureCountDescription,onclick:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null}renderNoRelatedFeaturesMessage(){var e;return M("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,color:"blue",scale:"s",width:"full"},M("div",{slot:"message"},(e=this.messages)==null?void 0:e.noRelatedFeatures))}renderFeatureObserver(){return M("div",{key:"feature-observer",class:fa.featureObserver,bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})}renderList(){const{relatedFeatureViewModels:e}=this.viewModel;return M("calcite-list",null,e.toArray().map(n=>this.renderRelatedFeature(n)),this.renderShowAllListItem())}renderRelatedFeatures(){const{displayListItems:e}=this,{state:n}=this.viewModel;return M("div",{key:"list-container",class:this.classes(fa.listContainer,{[fa.listContainerQuerying]:n==="querying"})},e?this.renderList():n==="ready"?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())}renderRelationshipNotFound(){var e;return M("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,color:"red",scale:"s",width:"full"},M("div",{slot:"message"},(e=this.messages)==null?void 0:e.relationshipNotFound))}render(){var n;const{state:e}=this.viewModel;return M("div",{class:this.classes(fa.base,fa.esriWidget)},(n=this._featureElementInfo)==null?void 0:n.render(),e==="loading"?this.renderLoading():e==="disabled"?this.renderRelationshipNotFound():this.renderRelatedFeatures())}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,n="related-feature-viewmodels";this.removeHandles(n),e==null||e.forEach(i=>{this.addHandles(ge(()=>[i.title,i.state],()=>this.scheduleRender(),gt),n)}),this.scheduleRender()}_setupFeatureElementInfo(){const{headingLevel:e,visibleElements:n}=this,i=n.description&&this.description,s=n.title&&this.title;this._featureElementInfo.set({description:i,title:s,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:n}=this.viewModel;await LS(0),this._relatedFeatureIntersectionObserverNode&&e==="ready"&&n&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};v([b()],_s.prototype,"_relatedFeatureIntersectionObserverNode",void 0),v([b({readOnly:!0})],_s.prototype,"displayShowAllButton",null),v([b({readOnly:!0})],_s.prototype,"displayListItems",null),v([b()],_s.prototype,"description",null),v([b({readOnly:!0})],_s.prototype,"featureCountDescription",null),v([b()],_s.prototype,"headingLevel",void 0),v([b()],_s.prototype,"title",null),v([b({type:tT})],_s.prototype,"viewModel",void 0),v([b(),rn("esri/widgets/Feature/t9n/Feature")],_s.prototype,"messages",void 0),v([b(),rn("esri/t9n/common")],_s.prototype,"messagesCommon",void 0),v([b()],_s.prototype,"visibleElements",void 0),v([ii("visibleElements")],_s.prototype,"castVisibleElements",null),_s=v([Ae("esri.widgets.Feature.FeatureRelationship")],_s);const k2=_s;let eCe=class{constructor(e,n){this.preLayerQueryCallback=e,this.preRequestCallback=n,this.preLayerQueryCallback||(this.preLayerQueryCallback=i=>{}),this.preRequestCallback||(this.preLayerQueryCallback=i=>{})}};var of;const tCe=1,T2="content-view-models",I2="relationship-view-models",x2={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};let Bn=of=class extends dh(dt){constructor(t){super(t),this._handles=new si,this._error=null,this._featureAbortController=null,this._graphicChangedThrottled=Cp(this._graphicChanged,tCe,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...x2},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=e=>{const{abilities:n}=this;return e.type==="attachments"&&n.attachmentsContent||e.type==="custom"&&n.customContent||e.type==="fields"&&n.fieldsContent||e.type==="media"&&n.mediaContent||e.type==="text"&&n.textContent||e.type==="expression"&&n.expressionContent||e.type==="relationship"&&n.relationshipContent},this._handles.add(ge(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this._graphicChangedThrottled(),gt))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return q(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return N0e(d2(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return _3(this.graphic)}castAbilities(t){return{...x2,...t}}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(t){this._set("graphic",t?t.clone():null)}get spatialReference(){var t;return((t=this.view)==null?void 0:t.spatialReference)??null}set spatialReference(t){this._override("spatialReference",t)}get map(){var t;return((t=this.view)==null?void 0:t.map)||null}set map(t){this._override("map",t)}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(t,e){const n=this.contentViewModels[t];n instanceof Ou&&n.setActiveMedia(e)}nextMedia(t){const e=this.contentViewModels[t];e instanceof Ou&&e.next()}previousMedia(t){const e=this.contentViewModels[t];e instanceof Ou&&e.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:t}=this;if(!t)return;const e=new AbortController;this._featureAbortController=e;try{await this._queryFeature({signal:e.signal})}catch(n){gc(n)||(this._error=n,Tt.getLogger(this.declaredClass).error("error","The popupTemplate could not be displayed for this feature.",{error:n,graphic:t,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===e&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:t}=this;t&&t.abort(),this._featureAbortController=null}_compileContentElement(t,e){return t.type==="attachments"?this._compileAttachments(t,e):t.type==="custom"?this._compileCustom(t,e):t.type==="fields"?this._compileFields(t,e):t.type==="media"?this._compileMedia(t,e):t.type==="text"?this._compileText(t,e):t.type==="expression"?this._compileExpression(t,e):t.type==="relationship"?this._compileRelationship(t,e):void 0}_compileContent(t){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(t)?t.filter(this._isAllowedContentType).map((e,n)=>this._compileContentElement(e,n)):typeof t=="string"?this._compileText(new aO({text:t}),0).text:t}_destroyContentViewModels(){var t,e;(t=this._handles)==null||t.remove(I2),(e=this._handles)==null||e.remove(T2),this.contentViewModels.forEach(n=>n&&!n.destroyed&&n.destroy()),this._set("contentViewModels",[])}_matchesFeature(t,e){var s;const n=(s=t==null?void 0:t.graphic)==null?void 0:s.getObjectId(),i=e==null?void 0:e.getObjectId();return q(n)&&q(i)&&n===i}_setRelatedFeaturesViewModels({relatedFeatureViewModels:t,relatedFeatures:e,map:n}){e==null||e.filter(Boolean).forEach(i=>{t.find(s=>this._matchesFeature(s,i))||t.add(new of({abilities:{relationshipContent:!1},map:n,graphic:i}))}),t.forEach(i=>{(e==null?void 0:e.find(o=>this._matchesFeature(i,o)))||t.remove(i)})}_setExpressionContentVM(t,e){const{formattedAttributes:n}=this,{contentElement:i,contentElementViewModel:s}=t,o=i==null?void 0:i.type;s&&o&&(o==="fields"&&(this._createFieldsFormattedAttributes({contentElement:i,contentElementIndex:e,formattedAttributes:n}),s.set(this._createFieldsVMParams(i,e))),o==="media"&&(this._createMediaFormattedAttributes({contentElement:i,contentElementIndex:e,formattedAttributes:n}),s.set(this._createMediaVMParams(i,e))),o==="text"&&s.set(this._createTextVMParams(i)))}_compileRelationship(t,e){const{displayCount:n,orderByFields:i,relationshipId:s,title:o,description:r}=t,{_sourceLayer:a,graphic:l,map:c}=this,u=new tT({displayCount:n,graphic:l,orderByFields:i,relationshipId:s,layer:a,map:c,...this._compileTitleAndDesc({title:o,description:r})});return this.contentViewModels[e]=u,this._handles.add(Dn(()=>u.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(u)),I2),t}_compileExpression(t,e){const{expressionInfo:n}=t,{graphic:i,map:s,spatialReference:o,view:r}=this,a=new eT({expressionInfo:n,graphic:i,interceptor:of.interceptor,map:s,spatialReference:o,view:r});return this.contentViewModels[e]=a,this._handles.add(ge(()=>a.contentElementViewModel,()=>this._setExpressionContentVM(a,e),gt),T2),t}_compileAttachments(t,e){const{graphic:n}=this,{description:i,title:s}=t;return this.contentViewModels[e]=new Qk({graphic:n,...this._compileTitleAndDesc({title:s,description:i})}),t}_compileCustom(t,e){const{graphic:n}=this,{creator:i,destroyer:s}=t;return this.contentViewModels[e]=new lb({graphic:n,creator:i,destroyer:s}),t}_compileTitleAndDesc({title:t,description:e}){const{_fieldInfoMap:n,_sourceLayer:i,graphic:s,formattedAttributes:o,_expressionAttributes:r}=this,{attributes:a}=s,l=o.global;return{title:Lu({attributes:a,fieldInfoMap:n,globalAttributes:l,expressionAttributes:r,layer:i,text:t}),description:Lu({attributes:a,fieldInfoMap:n,globalAttributes:l,expressionAttributes:r,layer:i,text:e})}}_createFieldsVMParams(t,e){var c;const{_effectivePopupTemplate:n,formattedAttributes:i}=this,s={...i.global,...i.content[e]},o=(c=(t==null?void 0:t.fieldInfos)||(n==null?void 0:n.fieldInfos))==null?void 0:c.filter(({fieldName:u})=>Yk(u)||Wa(u)||s.hasOwnProperty(u)),r=n==null?void 0:n.expressionInfos,{description:a,title:l}=t;return{attributes:s,expressionInfos:r,fieldInfos:o,...this._compileTitleAndDesc({title:l,description:a})}}_compileFields(t,e){const n=t.clone(),i=new I_(this._createFieldsVMParams(t,e));return this.contentViewModels[e]=i,n.fieldInfos=i.formattedFieldInfos.slice(0),n}_createMediaVMParams(t,e){const{abilities:n,graphic:i,_fieldInfoMap:s,formattedAttributes:o,_effectivePopupTemplate:r,relatedInfos:a,_sourceLayer:l,_expressionAttributes:c}=this,{attributes:u}=i,{description:d,mediaInfos:h,title:f}=t;return{abilities:{chartAnimation:n.chartAnimation},activeMediaInfoIndex:t.activeMediaInfoIndex||0,attributes:u,layer:l,fieldInfoMap:s,formattedAttributes:{...o.global,...o.content[e]},expressionAttributes:c,mediaInfos:h,popupTemplate:r,relatedInfos:a,...this._compileTitleAndDesc({title:f,description:d})}}_compileMedia(t,e){const n=t.clone(),i=new Ou(this._createMediaVMParams(t,e));return n.mediaInfos=i.formattedMediaInfos.slice(0),this.contentViewModels[e]=i,n}_createTextVMParams(t){const{graphic:e,_fieldInfoMap:n,_sourceLayer:i,_expressionAttributes:s}=this;if(t&&t.text){const{attributes:o}=e,r=this.formattedAttributes.global;t.text=Lu({attributes:o,fieldInfoMap:n,globalAttributes:r,expressionAttributes:s,layer:i,text:t.text})}return{graphic:e,creator:t.text}}_compileText(t,e){const n=t.clone();return this.contentViewModels[e]=new lb(this._createTextVMParams(n)),n}_compileLastEditInfo(){const{_effectivePopupTemplate:t,_sourceLayer:e,graphic:n}=this;if(!t)return;const{lastEditInfoEnabled:i}=t,s=e==null?void 0:e.editFieldsInfo;return i&&s?D0e(s,n.attributes):void 0}_compileTitle(t){const{_fieldInfoMap:e,_sourceLayer:n,graphic:i,_expressionAttributes:s}=this,{attributes:o}=i,r=this.formattedAttributes.global;return Lu({attributes:o,fieldInfoMap:e,globalAttributes:r,expressionAttributes:s,layer:n,text:t})}async _getTitle(){const{_effectivePopupTemplate:t,graphic:e}=this,n=t==null?void 0:t.title;return ab(n,{graphic:e})}async _getContent(){const{_effectivePopupTemplate:t,graphic:e}=this,n=t==null?void 0:t.content;return ab(n,{graphic:e})}async _queryFeature(t){const{_featureAbortController:e,_sourceLayer:n,graphic:i,_effectivePopupTemplate:s,spatialReference:o,map:r,view:a}=this;if(e!==this._featureAbortController||!i)return;await H0e({graphic:i,popupTemplate:s,layer:n,spatialReference:o},t);const{content:{value:l},title:{value:c}}=await Ni({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:u}}=await Ni({checkForRelatedFeatures:this._checkForRelatedFeatures(t),expressionAttributes:X1e({expressionInfos:s==null?void 0:s.expressionInfos,spatialReference:o,graphic:i,map:r,interceptor:of.interceptor,view:a})});e===this._featureAbortController&&i&&(this._expressionAttributes=u,this._graphicExpressionAttributes={...i.attributes,...u},this._set("formattedAttributes",this._createFormattedAttributes(l)),this._set("title",this._compileTitle(c)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(l)||null))}_createMediaFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:n}){const{_effectivePopupTemplate:i,graphic:s,relatedInfos:o,_sourceLayer:r,_fieldInfoMap:a,_graphicExpressionAttributes:l}=this;n.content[e]=Dw({fieldInfos:i==null?void 0:i.fieldInfos,graphic:s,attributes:{...l,...t.attributes},layer:r,fieldInfoMap:a,relatedInfos:o})}_createFieldsFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:n}){if(t.fieldInfos){const{graphic:i,relatedInfos:s,_sourceLayer:o,_fieldInfoMap:r,_graphicExpressionAttributes:a}=this;n.content[e]=Dw({fieldInfos:t.fieldInfos,graphic:i,attributes:{...a,...t.attributes},layer:o,fieldInfoMap:r,relatedInfos:s})}}_createFormattedAttributes(t){const{_effectivePopupTemplate:e,graphic:n,relatedInfos:i,_sourceLayer:s,_fieldInfoMap:o,_graphicExpressionAttributes:r}=this,a=e==null?void 0:e.fieldInfos,l={global:Dw({fieldInfos:a,graphic:n,attributes:r,layer:s,fieldInfoMap:o,relatedInfos:i}),content:[]};return Array.isArray(t)&&t.forEach((c,u)=>{c.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:c,contentElementIndex:u,formattedAttributes:l}),c.type==="media"&&this._createMediaFormattedAttributes({contentElement:c,contentElementIndex:u,formattedAttributes:l})}),l}_checkForRelatedFeatures(t){const{graphic:e,_effectivePopupTemplate:n}=this;return this._queryRelatedInfos(e,d2(n),t)}async _queryRelatedInfos(t,e,n){const{relatedInfos:i,_sourceLayer:s}=this;i.clear();const o=q(s.associatedLayer)?await s.associatedLayer.load(n):s;if(!o)return;const r=e.filter(c=>c&&Wa(c.fieldName));if(!r||!r.length)return;e.forEach(c=>this._configureRelatedInfo(c,o));const a=await L1e({relatedInfos:i,layer:o},n);Object.keys(a).forEach(c=>{var h;const u=i.get(c.toString()),d=(h=a[c])==null?void 0:h.value;u&&d&&(u.layerInfo=d.data)});const l=await O1e({graphic:t,relatedInfos:i,layer:o},n);Object.keys(l).forEach(c=>{var u;I1e((u=l[c])==null?void 0:u.value,i.get(c.toString()))})}_configureRelatedInfo(t,e){const{relatedInfos:n}=this,i=MC(t.fieldName);if(!i)return;const{layerId:s,fieldName:o}=i;if(!s)return;const r=n.get(s.toString())||T1e(s,e);r&&(P1e({relatedInfo:r,fieldName:o,fieldInfo:t}),this.relatedInfos.set(s,r))}};Bn.interceptor=new eCe(G0e,j0e),v([b()],Bn.prototype,"_error",void 0),v([b()],Bn.prototype,"_featureAbortController",void 0),v([b({readOnly:!0})],Bn.prototype,"_effectivePopupTemplate",null),v([b({readOnly:!0})],Bn.prototype,"_fieldInfoMap",null),v([b({readOnly:!0})],Bn.prototype,"_sourceLayer",null),v([b()],Bn.prototype,"abilities",void 0),v([ii("abilities")],Bn.prototype,"castAbilities",null),v([b({readOnly:!0})],Bn.prototype,"content",void 0),v([b({readOnly:!0})],Bn.prototype,"contentViewModels",void 0),v([b()],Bn.prototype,"description",void 0),v([b({type:Boolean})],Bn.prototype,"defaultPopupTemplateEnabled",void 0),v([b({readOnly:!0})],Bn.prototype,"state",null),v([b({readOnly:!0})],Bn.prototype,"formattedAttributes",void 0),v([b({type:Ls,value:null})],Bn.prototype,"graphic",null),v([b({readOnly:!0})],Bn.prototype,"lastEditInfo",void 0),v([b({readOnly:!0})],Bn.prototype,"relatedInfos",void 0),v([b()],Bn.prototype,"spatialReference",null),v([b({readOnly:!0})],Bn.prototype,"title",void 0),v([b()],Bn.prototype,"map",null),v([b({readOnly:!0})],Bn.prototype,"waitingForContent",null),v([b()],Bn.prototype,"view",void 0),Bn=of=v([Ae("esri.widgets.FeatureViewModel")],Bn);const nT=Bn,Kn={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentNode:"esri-feature__content-node",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"},H3=t=>{let e=class extends t{constructor(){super(...arguments),this.renderNodeContent=n=>Pp(n)&&!n.destroyed?M("div",{class:Kn.contentNode,key:n},n.render()):n instanceof HTMLElement?M("div",{class:Kn.contentNode,key:n,bind:n,afterCreate:this._attachToNode}):YL(n)?M("div",{class:Kn.contentNode,key:n,bind:n.domNode,afterCreate:this._attachToNode}):null}_attachToNode(n){const i=this;n.appendChild(i)}};return e=v([Ae("esri.widgets.Feature.ContentMixin")],e),e};var $C;const M2={title:!0,content:!0,lastEditedInfo:!0},$2="relationship-handles";let Ri=$C=class extends H3(kn){constructor(t,e){super(t,e),this._contentWidgets=[],this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.visibleElements={...M2},this.viewModel=new nT}initialize(){this.addHandles(ge(()=>{var t;return(t=this.viewModel)==null?void 0:t.contentViewModels},()=>this._setupContentWidgets(),gt))}loadDependencies(){return Fe(()=>import("./calcite-notice-4f7be2b2.js"),["./calcite-notice-4f7be2b2.js","./dom-5b7af1bf.js","./conditionalSlot-e2a39862.js","./observers-c77bfda3.js","./icon-1a289254.js"],import.meta.url)}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(t){this.viewModel.spatialReference=t}get title(){return this.viewModel.title}castVisibleElements(t){return{...M2,...t}}get map(){return this.viewModel.map}set map(t){this.viewModel.map=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const{state:t}=this.viewModel,e=M("div",{class:Kn.container,key:"container"},this.renderTitle(),t==="error"?this.renderError():t==="loading"?this.renderLoading():this.renderContentContainer());return M("div",{class:this.classes(Kn.base,Kn.esriWidget)},e)}setActiveMedia(t,e){return this.viewModel.setActiveMedia(t,e)}nextMedia(t){return this.viewModel.nextMedia(t)}previousMedia(t){return this.viewModel.previousMedia(t)}renderError(){const{messagesCommon:t,messages:e,visibleElements:n}=this;return M("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},n.title?M("div",{key:"error-title",slot:"title"},t.errorMessage):null,M("div",{key:"error-message",slot:"message"},e.loadingError))}renderLoading(){return M("div",{key:"loading-container",class:Kn.loadingSpinnerContainer},M("span",{class:this.classes(Kn.iconLoading,Kn.spinner)}))}renderContentContainer(){const{visibleElements:t}=this;return t.content?M("div",{class:Kn.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:t,title:e}=this;return t.title?M(Is,{level:this.headingLevel,class:Kn.title,innerHTML:e}):null}renderContent(){const t=this.viewModel.content,e="content";if(!t)return null;if(Array.isArray(t))return t.length?M("div",{class:Kn.contentNode,key:`${e}-content-elements`},t.map(this.renderContentElement,this)):null;if(typeof t=="string"){const n=this._contentWidgets[0];return!n||n.destroyed?null:M("div",{class:Kn.contentNode,key:`${e}-content`},n.render())}return this.renderNodeContent(t)}renderContentElement(t,e){const{visibleElements:n}=this;if(typeof n.content!="boolean"&&!n.content[t.type])return null;switch(t.type){case"attachments":return this.renderAttachments(e);case"custom":return this.renderCustom(t,e);case"fields":return this.renderFields(e);case"media":return this.renderMedia(e);case"text":return this.renderText(t,e);case"expression":return this.renderExpression(e);case"relationship":return this.renderRelationship(e);default:return null}}renderAttachments(t){const e=this._contentWidgets[t];if(!e||e.destroyed)return null;const{state:n,attachmentInfos:i}=e.viewModel;return n==="loading"||i.length>0?M("div",{key:this._buildKey("attachments-element",t),class:this.classes(Kn.contentElement)},e.render()):null}renderRelationship(t){const e=this._contentWidgets[t];return e&&!e.destroyed&&this.flowItems?M("div",{key:this._buildKey("relationship-element",t),class:Kn.contentElement},e.render()):null}renderExpression(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:M("div",{key:this._buildKey("expression-element",t),class:Kn.contentElement},e.render())}renderCustom(t,e){const{creator:n}=t,i=this._contentWidgets[e];return!i||i.destroyed?null:n?M("div",{key:this._buildKey("custom-element",e),class:Kn.contentElement},i.render()):null}renderFields(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:M("div",{key:this._buildKey("fields-element",t),class:Kn.contentElement},e.render())}renderMedia(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:M("div",{key:this._buildKey("media-element",t),class:Kn.contentElement},e.render())}renderLastEditInfo(){const{visibleElements:t,messages:e}=this,{lastEditInfo:n}=this.viewModel;if(!n||!t.lastEditedInfo)return null;const{date:i,user:s}=n,o=n.type==="edit"?s?e.lastEditedByUser:e.lastEdited:s?e.lastCreatedByUser:e.lastCreated,r=Si(o,{date:i,user:s});return M("div",{key:"edit-info-element",class:this.classes(Kn.lastEditedInfo,Kn.contentElement)},r)}renderText(t,e){const n=t.text,i=this._contentWidgets[e];return!i||i.destroyed?null:n?M("div",{key:this._buildKey("text-element",e),class:this.classes(Kn.contentElement,Kn.text)},i.render()):null}_buildKey(t,...e){return`${t}__${this.get("viewModel.graphic.uid")||"0"}-${e.join("-")}`}_destroyContentWidget(t){t&&(t.viewModel=null,!t.destroyed&&t.destroy())}_destroyContentWidgets(){this.removeHandles($2),this._contentWidgets.forEach(t=>this._destroyContentWidget(t)),this._contentWidgets=[]}_addFeatureRelationshipHandles(t){const{flowItems:e,visibleElements:n}=this;this.addHandles([Dn(()=>t,"select-record",({featureViewModel:i})=>{e&&(i.abilities={relationshipContent:!0},e.push(new $C({flowItems:e,viewModel:i,visibleElements:n})))}),Dn(()=>t,"show-all-records",()=>{if(!e)return;const{viewModel:i}=t;i.showAllEnabled=!0;const s=new k2({visibleElements:{title:!1,description:!1},viewModel:i});this._addFeatureRelationshipHandles(s),e.push(s)})],$2)}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:t,visibleElements:e}=this,n=this.get("viewModel.content"),{contentViewModels:i}=this.viewModel;if(Array.isArray(n))n.forEach((s,o)=>{if(s.type==="attachments"&&(this._contentWidgets[o]=new X0e({displayType:s.displayType,headingLevel:e.title?t+1:t,viewModel:i[o]})),s.type==="fields"&&(this._contentWidgets[o]=new A3({viewModel:i[o]})),s.type==="media"&&(this._contentWidgets[o]=new N3({viewModel:i[o]})),s.type==="text"&&(this._contentWidgets[o]=new sy({viewModel:i[o]})),s.type==="custom"&&(this._contentWidgets[o]=new sy({viewModel:i[o]})),s.type==="expression"&&(this._contentWidgets[o]=new J1e({viewModel:i[o]})),s.type==="relationship"){const r=new k2({viewModel:i[o]});this._addFeatureRelationshipHandles(r),this._contentWidgets[o]=r}},this);else{const s=i[0];s&&!s.destroyed&&(this._contentWidgets[0]=new sy({viewModel:s}))}this.scheduleRender()}};v([b()],Ri.prototype,"graphic",null),v([b()],Ri.prototype,"defaultPopupTemplateEnabled",null),v([b()],Ri.prototype,"flowItems",void 0),v([b()],Ri.prototype,"headingLevel",void 0),v([b()],Ri.prototype,"label",null),v([b(),rn("esri/widgets/Feature/t9n/Feature")],Ri.prototype,"messages",void 0),v([b(),rn("esri/t9n/common")],Ri.prototype,"messagesCommon",void 0),v([b(),rn("esri/widgets/support/t9n/uriUtils")],Ri.prototype,"messagesURIUtils",void 0),v([b()],Ri.prototype,"spatialReference",null),v([b({readOnly:!0})],Ri.prototype,"title",null),v([b()],Ri.prototype,"visibleElements",void 0),v([ii("visibleElements")],Ri.prototype,"castVisibleElements",null),v([b()],Ri.prototype,"map",null),v([b()],Ri.prototype,"view",null),v([b({type:nT})],Ri.prototype,"viewModel",void 0),Ri=$C=v([Ae("esri.widgets.Feature")],Ri);const nCe=Ri;var U3;const ay=Symbol("anchorHandles");let qc=class extends Ii.EventedAccessor{constructor(e){super(e),this[U3]=new si,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[ay].add([ji(()=>Ha(this.screenLocationEnabled?this.view:null,n=>[n.size,n.type==="3d"?n.camera:n.viewpoint]),()=>this.notifyChange("screenLocation")),ge(()=>this.screenLocation,(n,i)=>{q(n)&&q(i)&&this.emit("view-change")})])}destroy(){this.view=null,this[ay]=sn(this[ay])}get screenLocation(){const{location:e,view:n,screenLocationEnabled:i}=this;return i&&q(e)&&q(n)&&n.ready?n.toScreen(e):null}};U3=ay,v([b()],qc.prototype,"location",void 0),v([b()],qc.prototype,"screenLocation",null),v([b()],qc.prototype,"screenLocationEnabled",void 0),v([b()],qc.prototype,"view",void 0),qc=v([Ae("esri.widgets.support.AnchorElementViewModel")],qc);const W3=qc,iCe="esri.widgets.CompassViewModel";let ly=class extends W3{constructor(e){super(e),this.visible=!1}};v([b()],ly.prototype,"visible",void 0),ly=v([Ae(iCe)],ly);const iT=ly,jw={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let Kc=class extends kn{constructor(e,n){super(e,n),this._animationDelay=500,this._animationPromise=null,this.viewModel=new iT}initialize(){this.addHandles(ge(()=>this.visible,e=>this._visibleChange(e)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}show(e){const{location:n,promise:i}=e;n&&(this.viewModel.location=n),this.visible=!0;const s=()=>this.hide();i&&i.catch(()=>{}).then(s)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:n}=this.viewModel,i=!!n,s=e&&i,o=!e&&i,r={[jw.spinnerStart]:s,[jw.spinnerFinish]:o},a=this._getPositionStyles();return M("div",{class:this.classes(jw.base,r),styles:a})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const n=LS(this._animationDelay);this._animationPromise=n,n.catch(()=>{}).then(()=>{this._animationPromise===n&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:n}=this.viewModel;if(ke(n)||ke(e))return{};const{padding:i}=n;return{left:e.x-i.left+"px",top:e.y-i.top+"px"}}};v([b()],Kc.prototype,"location",null),v([b()],Kc.prototype,"view",null),v([b({type:iT})],Kc.prototype,"viewModel",void 0),v([b()],Kc.prototype,"visible",null),Kc=v([Ae("esri.widgets.Spinner")],Kc);const G3=Kc,sCe="OBJECTID";var Ti;(function(t){t[t.size=22]="size",t[t.lineWidth=50]="lineWidth",t[t.maxSize=120]="maxSize",t[t.maxOutlineSize=80]="maxOutlineSize",t[t.tallSymbolWidth=20]="tallSymbolWidth"})(Ti||(Ti={}));const AC={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function oCe(t,e,n){const i=Ti.size;let s=i,o=i;t<1?s*=.75:t>1&&(o*=1.25);const r=0,a=0;let l=i,c=i;return e&&n&&(s=o=l=c=0),[{type:"path",path:[{command:"M",values:[l,r]},{command:"L",values:[n?l:.875*l,r]},{command:"L",values:[n?s-.5*l:a,o-.5*c]},{command:"L",values:[s-.5*l,o-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,r]},{command:"L",values:[l,e?r:.125*c]},{command:"L",values:[s-.5*l,e?o-.5*c:c]},{command:"L",values:[s-.5*l,o-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s-.5*l,o-.5*c]},{command:"L",values:[n?s-.5*l:a,o-.5*c]},{command:"L",values:[n?s-.5*l:a,e?o-.5*c:c]},{command:"L",values:[s-.5*l,e?o-.5*c:c]},{command:"Z",values:[]}]}]}function rCe(t){const e=Ti.size,n=.5*t,i=0,s=0;return[{type:"path",path:[{command:"M",values:[s,.7*e*.5]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+n]},{command:"L",values:[s,.7*e+n-.7*e*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+n]},{command:"L",values:[e,n]},{command:"L",values:[e,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,i]},{command:"L",values:[e,i]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[s,.7*e*.5]},{command:"Z",values:[]}]}]}function aCe(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function lCe(t,e){let n=e?Ti.tallSymbolWidth:t;const i=t,s=e?4:6;n<=Ti.size?n-=.5*s:n-=s;const o=0,r=0,a=e?.35*n:.5*n;return[{type:"path",path:[{command:"M",values:[.5*n,o]},{command:"L",values:[n,.5*a]},{command:"L",values:[.5*n,a]},{command:"L",values:[r,.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,.5*a]},{command:"L",values:[.5*n,a]},{command:"L",values:[.5*n,i]},{command:"L",values:[r,i-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*n,a]},{command:"L",values:[.5*n,i]},{command:"L",values:[n,i-.5*a]},{command:"L",values:[n,.5*a]},{command:"Z",values:[]}]}]}function cCe(t,e){let n=e?Ti.tallSymbolWidth:t;const i=t,s=e?4:6;n<=Ti.size?n-=.5*s:n-=s;const o=.5*n,r=.15*n,a=0,l=i-r;return[{type:"ellipse",cx:.5*n,cy:l,rx:o,ry:r},{type:"path",path:[{command:"M",values:[a,r]},{command:"L",values:[a,l]},{command:"L",values:[n,l]},{command:"L",values:[n,r]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*n,cy:r,rx:o,ry:r}]}function uCe(t,e){let n=e?Ti.tallSymbolWidth:t;const i=t,s=e?4:6;n<=Ti.size?n-=.5*s:n-=s;const o=.15*n,r=i-o;return[{type:"ellipse",cx:.5*n,cy:r,rx:.5*n,ry:o},{type:"path",path:[{command:"M",values:[.5*n,0]},{command:"L",values:[n,r]},{command:"L",values:[0,r]},{command:"Z",values:[]}]}]}function dCe(t){let e=t;const n=t,i=6;e<Ti.size?e-=.5*i:e-=i;const s=.15*e,o=0;return[{type:"path",path:[{command:"M",values:[0,o]},{command:"L",values:[e,o]},{command:"L",values:[.5*e,n-s]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*e,cy:o,rx:.5*e,ry:s}]}function pCe(t){let e=t;const n=t,i=4;e<Ti.size?e-=.5*i:e-=i;const s=0,o=0,r=e,a=n,l=Math.floor(t/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*r,s]},{command:"L",values:[r,.5*a-l]},{command:"L",values:[.45*r-l,.5*a+l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*r,s]},{command:"L",values:[.45*r-l,.5*a+l]},{command:"L",values:[o,.5*a-l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,.5*a-l]},{command:"L",values:[.45*r-l,.5*a+l]},{command:"L",values:[.45*r,n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*r,n]},{command:"L",values:[r,.5*a-l]},{command:"L",values:[.45*r-l,.5*a+l]},{command:"Z",values:[]}]}]}function hCe(t){const e=t,n=2;let i=t;i<Ti.size?i-=.5*n:i-=n;const s=0,o=0;return[{type:"path",path:[{command:"M",values:[.45*e,s]},{command:"L",values:[e,i]},{command:"L",values:[.45*e,.6*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*e,s]},{command:"L",values:[.45*e,.6*i]},{command:"L",values:[o,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,i]},{command:"L",values:[.45*e,.6*i]},{command:"L",values:[e,i]},{command:"Z",values:[]}]}]}function fc(t,e){return Math.round(Math.min(Math.max(t+255*e*.75,0),255))}function aRe(t,e){if(t==null)return new cn;if("type"in t&&(t.type==="linear"||t.type==="pattern"))return t;const n=new cn(t);return new cn([fc(n.r,e),fc(n.g,e),fc(n.b,e),n.a])}const fCe="http://www.w3.org/2000/svg";let mCe=0,gCe=0;const A2=Ts("android"),vCe=Ts("chrome")||A2&&A2>=4?"auto":"optimizeLegibility",yCe={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},bCe=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let Yn={},hn={};const L2={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},_Ce=Math.PI;let wCe=1;function Jd(t,e){const n=t*(_Ce/180);return Math.abs(e*Math.sin(n))+Math.abs(e*Math.cos(n))}function j3(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function sT(t,e,n,i){if(t){if(t.type==="circle")return M("circle",{fill:e,"fill-rule":"evenodd",stroke:n.color,"stroke-width":n.width,"stroke-linecap":n.cap,"stroke-linejoin":n.join,"stroke-dasharray":n.dashArray,"stroke-dashoffset":n.dashOffset,"stroke-miterlimit":"4",cx:t.cx,cy:t.cy,r:t.r});if(t.type==="ellipse")return M("ellipse",{fill:e,"fill-rule":"evenodd",stroke:n.color,"stroke-width":n.width,"stroke-linecap":n.cap,"stroke-linejoin":n.join,"stroke-dasharray":n.dashArray,"stroke-miterlimit":"4",cx:t.cx,cy:t.cy,rx:t.rx,ry:t.ry});if(t.type==="rect")return M("rect",{fill:e,"fill-rule":"evenodd",stroke:n.color,"stroke-width":n.width,"stroke-linecap":n.cap,"stroke-linejoin":n.join,"stroke-dasharray":n.dashArray,"stroke-miterlimit":"4",x:t.x,y:t.y,width:t.width,height:t.height});if(t.type==="image")return M("image",{href:t.src,x:t.x,y:t.y,width:t.width,height:t.height,preserveAspectRatio:"none"});if(t.type==="path"){const s=typeof t.path!="string"?j3(t.path):t.path;return M("path",{fill:e,"fill-rule":"evenodd",stroke:n.color,"stroke-width":n.width,"stroke-linecap":n.cap,"stroke-linejoin":n.join,"stroke-dasharray":n.dashArray,"stroke-miterlimit":"4",d:s})}if(t.type==="text")return FS(i),M("text",{"dominant-baseline":i.dominantBaseline,fill:e,"fill-rule":"evenodd",stroke:n.color,"stroke-width":n.width,"stroke-linecap":n.cap,"stroke-linejoin":n.join,"stroke-dasharray":n.dashArray,"stroke-miterlimit":"4","text-anchor":i.align,"text-decoration":i.decoration,kerning:i.kerning,rotate:i.rotate,"text-rendering":vCe,"font-style":i.font.style,"font-variant":i.font.variant,"font-weight":i.font.weight,"font-size":i.font.size,"font-family":i.font.family,x:t.x,y:t.y},t.text)}return null}function oT(t){const e={fill:"none",pattern:null,linearGradient:null};if(t){if("type"in t&&t.type==="pattern"){const n="patternId-"+ ++mCe;e.fill=`url(#${n})`,e.pattern={id:n,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}}}else if("type"in t&&t.type==="linear"){const n="linearGradientId-"+ ++gCe;e.fill=`url(#${n})`,e.linearGradient={id:n,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(i=>({offset:i.offset,color:i.color&&new cn(i.color).toString()}))}}else if(t){const n=new cn(t);e.fill=n.toString()}}return e}function rT(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};if(t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new cn(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashArray&&(e.dashOffset=t.dashoffset),t.style)){let n=null;if(t.style in L2&&(n=L2[t.style]),Array.isArray(n)){n=n.slice(0);const i=t.width??0;for(let s=0;s<n.length;++s)n[s]*=i;if(t.cap!=="butt"){for(let s=0;s<n.length;s+=2)n[s]-=i,n[s]<1&&(n[s]=1);for(let s=1;s<n.length;s+=2)n[s]+=i}n=n.join(",")}e.dashArray=n}return e}function q3(t,e){const n={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const i=t.alignBaseline,s=i==="baseline"?"auto":i==="top"?"text-top":i==="bottom"?"hanging":i;n.align=t.align,n.dominantBaseline=s,n.decoration=t.decoration,n.kerning=t.kerning?"auto":"0",n.rotate=t.rotated?"90":"0",FS(e),n.font.style=e.style||"normal",n.font.variant=e.variant||"normal",n.font.weight=e.weight||"normal",n.font.size=e.size&&e.size.toString()||"10pt",n.font.family=e.family||"serif"}return n}function K3(t){const{pattern:e,linearGradient:n}=t;if(e)return M("pattern",{id:e.id,patternUnits:"userSpaceOnUse",x:e.x,y:e.y,width:e.width,height:e.height},M("image",{x:e.image.x,y:e.image.y,width:e.image.width,height:e.image.height,href:e.image.href}));if(n){const i=n.stops.map((s,o)=>M("stop",{key:`${o}-stop`,offset:s.offset,"stop-color":s.color}));return M("linearGradient",{id:n.id,gradientUnits:"userSpaceOnUse",x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2},i)}return null}function CCe(t,e){if(!t)return null;const n=[];for(const i of t){const{shape:s,fill:o,stroke:r,font:a}=i,l=oT(o),c=rT(r),u=s.type==="text"?q3(s,a):null,d=sT(s,l.fill,c,u);d&&n.push(d)}return M("mask",{id:e,maskUnits:"userSpaceOnUse"},M("g",null,n))}function O2(t,e,n){return nm(t,WS(t),[e,n])}function P2(t,e,n,i,s){return GS(t,WS(t),[e,n]),t[4]=t[4]*e-i*e+i,t[5]=t[5]*n-s*n+s,t}function SCe(t,e,n,i){const s=e%360*Math.PI/180;Ob(t,WS(t),s);const o=Math.cos(s),r=Math.sin(s),a=t[4],l=t[5];return t[4]=a*o-l*r+i*r-n*o+n,t[5]=l*o+a*r-n*r-i*o+i,t}function vs(t,e){Yn&&"left"in Yn?(Yn.left!=null&&Yn.left>t&&(Yn.left=t),(Yn.right==null||Yn.right<t)&&(Yn.right=t),(Yn.top==null||Yn.top>e)&&(Yn.top=e),(Yn.bottom==null||Yn.bottom<e)&&(Yn.bottom=e)):Yn={left:t,bottom:e,right:t,top:e}}function R2(t){const e=t.args,n=e.length;let i;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(i=0;i<n;i+=2)vs(e[i],e[i+1]);hn.x=e[n-2],hn.y=e[n-1];break;case"H":for(i=0;i<n;++i)vs(e[i],hn.y);hn.x=e[n-1];break;case"V":for(i=0;i<n;++i)vs(hn.x,e[i]);hn.y=e[n-1];break;case"m":{let s=0;for(("x"in hn)||(vs(hn.x=e[0],hn.y=e[1]),s=2),i=s;i<n;i+=2)vs(hn.x+=e[i],hn.y+=e[i+1]);break}case"l":case"t":for(i=0;i<n;i+=2)vs(hn.x+=e[i],hn.y+=e[i+1]);break;case"h":for(i=0;i<n;++i)vs(hn.x+=e[i],hn.y);break;case"v":for(i=0;i<n;++i)vs(hn.x,hn.y+=e[i]);break;case"c":for(i=0;i<n;i+=6)vs(hn.x+e[i],hn.y+e[i+1]),vs(hn.x+e[i+2],hn.y+e[i+3]),vs(hn.x+=e[i+4],hn.y+=e[i+5]);break;case"s":case"q":for(i=0;i<n;i+=4)vs(hn.x+e[i],hn.y+e[i+1]),vs(hn.x+=e[i+2],hn.y+=e[i+3]);break;case"A":for(i=0;i<n;i+=7)vs(e[i+5],e[i+6]);hn.x=e[n-2],hn.y=e[n-1];break;case"a":for(i=0;i<n;i+=7)vs(hn.x+=e[i+5],hn.y+=e[i+6])}}function V2(t,e,n){const i=yCe[t.toLowerCase()];let s;typeof i=="number"&&(i?e.length>=i&&(s={action:t,args:e.slice(0,e.length-e.length%i)},n.push(s),R2(s)):(s={action:t,args:[]},n.push(s),R2(s)))}function ECe(t){const e=(typeof t.path!="string"?j3(t.path):t.path).match(bCe),n=[];if(Yn={},hn={},!e)return null;let i="",s=[];const o=e.length;for(let a=0;a<o;++a){const l=e[a],c=parseFloat(l);isNaN(c)?(i&&V2(i,s,n),s=[],i=l):s.push(c)}V2(i,s,n);const r={x:0,y:0,width:0,height:0};return Yn&&"left"in Yn&&(r.x=Yn.left,r.y=Yn.top,r.width=Yn.right-Yn.left,r.height=Yn.bottom-Yn.top),r}function Y3(t){const e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){const n=$b(ECe(t));e.x=n.x,e.y=n.y,e.width=n.width,e.height=n.height}return e}function Z3(t){const e={x:0,y:0,width:0,height:0};let n=null,i=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY;for(const o of t)n?(n.x=Math.min(n.x,o.x),n.y=Math.min(n.y,o.y),i=Math.max(i,o.x+o.width),s=Math.max(s,o.y+o.height)):(n=e,n.x=o.x,n.y=o.y,i=o.x+o.width,s=o.y+o.height);return n&&(n.width=i-n.x,n.height=s-n.y),n}function LC(t,e,n,i,s,o,r,a,l){let c=(r&&o?Jd(o,e):e)/2,u=(r&&o?Jd(o,n):n)/2;if(l){const C=l[0],w=l[1];c=(r&&o?Jd(o,C):C)/2,u=(r&&o?Jd(o,w):w)/2}const d=t.width+i,h=t.height+i,f=H0(),m=H0();let g=!1;if(s&&d!==0&&h!==0){const C=e!==n?e/n:d/h,w=e>n?e:n;let S=1,E=1;isNaN(w)||(C>1?(S=w/d,E=w/C/h):(E=w/h,S=w*C/d)),Mh(m,m,P2(f,S,E,c,u)),g=!0}const y=t.x+(d-i)/2,_=t.y+(h-i)/2;if(Mh(m,m,O2(f,c-y,u-_)),!g&&(d>e||h>n)){const C=d/e>h/n,w=(C?e:n)/(C?d:h);Mh(m,m,P2(f,w,w,y,_))}return o&&Mh(m,m,SCe(f,o,y,_)),a&&Mh(m,m,O2(f,a[0],a[1])),`matrix(${m[0]},${m[1]},${m[2]},${m[3]},${m[4]},${m[5]})`}function kCe(t,e,n){const i=t==null?void 0:t.effects.find(c=>c.type==="bloom");if(!i)return null;const{strength:s,radius:o}=i,r=s>0?o:0,a=(s+r)*e,l=4*s+1;return M("filter",{id:`bloom${n}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},M("feMorphology",{operator:"dilate",radius:(s+.5*r)*(5**(e/100)*(.4+e/100)),in:"SourceGraphic",result:"dilate"}),M("feGaussianBlur",{in:"dilate",stdDeviation:a/25,result:"blur"}),M("feGaussianBlur",{in:"blur",stdDeviation:a/50,result:"intensityBlur"}),M("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},M("feFuncR",{type:"linear",slope:l}),M("feFuncG",{type:"linear",slope:l}),M("feFuncB",{type:"linear",slope:l})),M("feMerge",null,M("feMergeNode",{in:"intensityBlur"}),M("feMergeNode",{in:"intensityBrightness"}),M("feGaussianBlur",{stdDeviation:s/10})))}function X3(t,e,n,i={}){var c;const s=[],o=[],r=++wCe,a=kCe(i.effectView,e,r);let l=null;if(a){const u=(c=i.effectView)==null?void 0:c.effects.find(m=>m.type==="bloom"),d=(u.strength?u.strength+u.radius/2:0)/3,h=e+e*d,f=n+n*d;l=[Math.max(h,10),Math.max(f,10)]}for(let u=0;u<t.length;u++){const d=t[u],h=[],f=[];let m=0,g=0,y=0;for(const w of d){const{shape:S,fill:E,stroke:k,font:A,offset:$}=w;i.ignoreStrokeWidth||(m+=k&&k.width||0);const L=oT(E),O=rT(k),B=S.type==="text"?q3(S,A):null;s.push(K3(L)),h.push(sT(S,L.fill,O,B)),f.push(Y3(S)),$&&(g+=$[0],y+=$[1])}const _=LC($b(Z3(f)),e,n,m,i.scale??!1,i.rotation,i.useRotationSize??!1,[g,y],l);let C=null;if(i.masking){const w=`mask-${u}`,S=i.masking[u];s.push(CCe(S,w)),C=`url(#${w})`}o.push(C?M("g",{mask:C},M("g",{transform:_},h)):M("g",{transform:_},h))}return i.useRotationSize&&i.rotation&&(e=Jd(i.rotation,e),n=Jd(i.rotation,n)),a&&(FS(l),e=l[0],n=l[1]),M("svg",{xmlns:fCe,width:e,height:n,style:"display: block;"},a,M("defs",null,s),a?M("g",{filter:`url(#bloom${r})`},o):o)}const TCe=Py();function vg(t,e,n){const i=Math.ceil(e[0]),s=Math.ceil(e[1]);if(!t.some(r=>!!r.length))return null;const o=n&&n.node||document.createElement("div");return n.opacity!=null&&(o.style.opacity=n.opacity.toString()),n.effectView!=null&&(o.style.filter=Jf(n.effectView)),TCe.append(o,X3.bind(null,t,i,s,n)),o}function ICe(t,e){t=Math.ceil(t),e=Math.ceil(e);const n=document.createElement("canvas");n.width=t,n.height=e,n.style.width=t+"px",n.style.height=e+"px";const i=n.getContext("2d");return i.clearRect(0,0,t,e),i}function xCe(t,e,n){return t?go(t,{responseType:"image"}).then(i=>{const s=i.data,o=s.width,r=s.height,a=o/r;let l=e;if(n){const c=Math.max(o,r);l=Math.min(l,c)}return{image:s,width:a<=1?Math.ceil(l*a):l,height:a<=1?l:Math.ceil(l/a)}}):Promise.reject(new Ue("renderUtils: imageDataSize","href not provided."))}function MCe(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function $Ce(t,e,n,i,s){switch(s){case"multiply":t[e+0]*=n[0],t[e+1]*=n[1],t[e+2]*=n[2],t[e+3]*=n[3];break;default:{const o=US({r:t[e+0],g:t[e+1],b:t[e+2]});o.h=i.h,o.s=i.s,o.v=o.v/100*i.v;const r=hO(o);t[e+0]=r.r,t[e+1]=r.g,t[e+2]=r.b,t[e+3]*=n[3];break}}}function ACe(t,e,n,i,s){return xCe(t,e,s).then(o=>{const r=o.width?o.width:e,a=o.height?o.height:e;if(o.image&&MCe(n,i)){let l=o.image.width,c=o.image.height;Ts("edge")&&/\.svg$/i.test(t)&&(l-=1,c-=1);const u=ICe(r,a);u.drawImage(o.image,0,0,l,c,0,0,r,a);const d=u.getImageData(0,0,r,a),h=[n.r/255,n.g/255,n.b/255,n.a],f=US(n);for(let m=0;m<d.data.length;m+=4)$Ce(d.data,m,h,f,i);u.putImageData(d,0,0),t=u.canvas.toDataURL("image/png")}else{const l=sI&&sI.findCredential(t);if(l&&l.token){const c=t.includes("?")?"&":"?";t=`${t}${c}token=${l.token}`}}return{url:t,width:r,height:a}}).catch(()=>({url:t,width:e,height:e}))}let hd=null;const F2=[255,255,255];function D2(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function LCe(t,e,n){const{backgroundColor:i,outline:s,dotSize:o}=t,r=n&&n.swatchSize||Ti.size,a=.8,l=Math.round(r*r/o**2*a),c=window.devicePixelRatio,u=document.createElement("canvas"),d=r*c;u.width=d,u.height=d,u.style.width=u.width/c+"px",u.style.height=u.height/c+"px";const h=u.getContext("2d");if(i&&(h.fillStyle=i.toCss(!0),h.fillRect(0,0,d,d),h.fill()),h.fillStyle=e.toCss(!0),hd&&hd.length/2===l)for(let m=0;m<2*l;m+=2){const g=hd[m],y=hd[m+1];h.fillRect(g,y,o*c,o*c),h.fill()}else{hd=[];for(let m=0;m<2*l;m+=2){const g=D2(0,d),y=D2(0,d);hd.push(g,y),h.fillRect(g,y,o*c,o*c),h.fill()}}s&&(s.color&&(h.strokeStyle=s.color.toCss(!0)),h.lineWidth=s.width,h.strokeRect(0,0,d,d));const f=new Image(r,r);return f.src=u.toDataURL(),f}function OCe(t,e={}){const n=e.radius||40,i=2*Math.PI*n,s=t.length,o=i/s,r=[],a=B0(e.outline);(a==null?void 0:a.width)!=null&&(a.width*=2),(a||e.backgroundColor)&&r.push({shape:{type:"circle",cx:n,cy:n,r:n},fill:e.backgroundColor,stroke:a,offset:[0,0]});const l=e.values,c=l&&l.length===s&&l.reduce((m,g)=>m+g,0)===100,u=[0];for(let m=0;m<s;m++){let g=null;c&&(g=l[m]*i/100,u.push(g+u[m])),r.push({shape:{type:"circle",cx:n,cy:n,r:n/2},fill:[0,0,0,0],stroke:{width:n,dashArray:`${(g??o)/2} ${i}`,dashoffset:"-"+(c?u[m]/2:m*(o/2)),color:t[m]},offset:[0,0]})}let d=null;const h=2*n+((a==null?void 0:a.width)||0),f=e.holePercentage;if(f){a&&r.push({shape:{type:"circle",cx:n,cy:n,r:n*f},fill:null,stroke:a,offset:[0,0]});const m=h/2;d=[[{shape:{type:"circle",cx:m,cy:m,r:m},fill:F2,stroke:a?{...a,color:F2}:null,offset:[0,0]},{shape:{type:"circle",cx:m,cy:m,r:n*f},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return vg([r],[h,h],{effectView:e.effectList,ignoreStrokeWidth:!0,masking:d,rotation:-90})}function Yc(t,e={}){const s=e.align==="horizontal",o=s?75:24,r=s?24:75,{width:a=o,height:l=r,gradient:c=!0}=e,u=window.devicePixelRatio,d=a*u,h=l*u,f=document.createElement("canvas");f.width=d,f.height=h,f.style.width=`${a}px`,f.style.height=`${l}px`;const m=f.getContext("2d"),g=s?d:0,y=s?0:h;if(c){const C=m.createLinearGradient(0,0,g,y),w=t.length,S=w===1?0:1/(w-1);t.forEach((E,k)=>C.addColorStop(k*S,E.toString())),m.fillStyle=C,m.fillRect(0,0,d,h)}else{const C=s?d/t.length:d,w=s?h:h/t.length;let S=0,E=0;for(const k of t)m.fillStyle=k.toString(),m.fillRect(S,E,C,w),S=s?S+C:0,E=s?0:E+w}const _=document.createElement("div");return _.style.width=`${a}px`,_.style.height=`${l}px`,PCe(_,e==null?void 0:e.effectList),_.appendChild(f),_}function PCe(t,e){if(!e)return;t.style.filter=Jf(e);const n=e.effects;if(n){for(const i of n)if((i==null?void 0:i.type)==="drop-shadow"){i.offsetX<0?t.style.marginLeft=`${Math.abs(i.offsetX)}px`:t.style.marginRight=`${i.offsetX}px`;break}}}async function aT(t,e){switch(t.type){case"web-style":{const{previewWebStyleSymbol:n}=await Fe(()=>import("./previewWebStyleSymbol-a68015dc.js"),["./previewWebStyleSymbol-a68015dc.js","./request-24011425.js","./preload-helper-41c905a7.js","./Error-57322e92.js","./string-480f3e3f.js","./typedArrayUtil-d9bc5fbd.js","./promiseUtils-32d9c228.js","./screenUtils-90993e16.js","./cast-a534ae90.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./Basemap-59ed9516.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./deprecate-0d93948c.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./loadAll-01cdf0a9.js","./asyncUtils-087555fc.js","./Extent-a1a1de42.js","./Portal-c6e03126.js","./locale-30120714.js","./PortalGroup-d495847c.js","./jsonMap-190c5593.js","./PortalUser-1016c43c.js","./PortalItem-e4ba4b94.js","./assets-cd44347b.js","./messages-28bf3b89.js","./writeUtils-3bde6e49.js","./layerUtils-68eea656.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./compilerUtils-fefa73ae.js","./enumeration-61a13175.js","./opacityUtils-1333f803.js","./CollectionFlattener-f43a0fce.js","./TablesMixin-55858fba.js","./Layer-cea228f0.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./Identifiable-093f90a8.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./fieldUtils-b2df74c4.js","./arcadeOnDemand-a976a73c.js","./number-2ab8ca0d.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./persistableUrlUtils-d0777bec.js","./jsonUtils-c6684c52.js","./Cyclical-078b4564.js","./reactiveUtils-5869e41a.js","./workers-af024c50.js","./Connection-b591250e.js","./Queue-275a6362.js","./intl-7d39a8c0.js","./projection-acd73147.js","./unitUtils-dd6fb8ee.js","./mat4-7dde83b1.js","./zscale-48bab05e.js","./TileInfo-c5c8c8d2.js","./widget-4abc68df.js","./uuid-73213768.js","./dom-5b7af1bf.js","./HandleOwner-2edbba46.js","./byteSizeEstimations-90c5a50d.js","./executeQueryJSON-29279a46.js","./normalizeUtils-0f537694.js","./query-b7b3a76b.js","./pbfQueryUtils-c922ef32.js","./pbf-8b0546e8.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./queryZScale-3c8de33a.js","./FeatureSet-deb2029d.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./RelationshipQuery-c27267ab.js","./LegendOptions-2e7b3d70.js","./utils-4469bf65.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./ItemCache-bf1028d4.js","./MemCache-1d2f56ee.js","./utils-c81a5c52.js","./jsonUtils-1c5cdf77.js","./UniqueValueRenderer-73d567ad.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./lengthUtils-92fed992.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./featureConversionUtils-d2229ed4.js","./TopFeaturesQuery-9aca00bf.js","./FeatureLayer-534ff006.js","./MultiOriginJSONSupport-b8792dfa.js","./LayerFloorInfo-f184c8f5.js","./FeatureLayerBase-c0aa3674.js","./HeightModelInfo-34f16d74.js","./arcgisLayerUrl-bed3cba1.js","./OperationalLayer-9c50475b.js","./ElevationInfo-80227ecc.js","./editsZScale-12d81957.js","./APIKeyMixin-b6e4f897.js","./ArcGISService-aada3b5d.js","./CustomParametersMixin-a5d06ccc.js","./EditBusLayer-b5dc3689.js","./FeatureReductionLayer-fcaeb34a.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./OrderedLayer-9623e905.js","./PortalLayer-12f4a535.js","./RefreshableLayer-49182ab8.js","./ScaleRangeLayer-c072e266.js","./TemporalLayer-c74d13d4.js","./TimeInfo-f76d6c20.js","./FeatureTemplate-c4496b93.js","./FeatureType-0be9420b.js","./fieldProperties-4207e953.js","./FieldsIndex-02142c8a.js","./versionUtils-fabd8b3a.js","./styleUtils-08eaa4d2.js","./popupUtils-1ecc877c.js","./colorUtils-82440b70.js","./mat2d-d0b91e3e.js","./Scheduler-5e6ccc87.js","./GraphicsLayer-b332f442.js","./ViewingMode-915d19cb.js","./unitBezier-881ac1eb.js","./vec2-ab9f47bf.js","./vec2f64-30dc1443.js","./mat3-9a8d9db7.js","./mat3f32-d3d088e8.js","./vec2f32-461e65a9.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./capabilities-d08b6e58.js","./context-util-d4c193b5.js","./Subtype-a3103d84.js","./datetime-4f774298.js","./elevationInfoUtils-c3025fae.js","./QueryEngineResult-92e13fe4.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./WhereClause-6c9440a1.js","./utils-44a68fd6.js","./json-48e3ea08.js","./Util-289ce3b5.js","./EffectView-dffeb0bc.js","./ExportImageParameters-ba01802d.js","./sublayerUtils-eea48c01.js","./webStyleSymbolUtils-0b165621.js","./devEnvironmentUtils-5002a058.js","./dehydratedFeatures-3dcd65f1.js","./enums-4b2a86a0.js","./plane-46a8c767.js","./sphere-622880b9.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./quat-ec16a584.js"],import.meta.url);return n(t,aT,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:n}=await Fe(()=>Promise.resolve().then(()=>Dxe),void 0,import.meta.url);return n(t,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:n}=await Fe(()=>import("./previewSymbol2D-09fd703c.js"),["./previewSymbol2D-09fd703c.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./typedArrayUtil-d9bc5fbd.js","./ensureType-25b8cc06.js","./string-480f3e3f.js","./Error-57322e92.js","./fontUtils-4ed0e787.js","./screenUtils-90993e16.js","./utils-4469bf65.js","./preload-helper-41c905a7.js","./symbols-9fcb6cc2.js","./cast-a534ae90.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./CIMSymbol-72a9d286.js","./enumeration-61a13175.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./Symbol-8266348e.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./locale-30120714.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./Clonable-9b34e760.js","./asyncUtils-087555fc.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./assets-cd44347b.js","./ItemCache-bf1028d4.js","./MemCache-1d2f56ee.js","./utils-c81a5c52.js","./Basemap-59ed9516.js","./deprecate-0d93948c.js","./loadAll-01cdf0a9.js","./PortalItem-e4ba4b94.js","./messages-28bf3b89.js","./writeUtils-3bde6e49.js","./layerUtils-68eea656.js","./compilerUtils-fefa73ae.js","./CollectionFlattener-f43a0fce.js","./TablesMixin-55858fba.js","./Layer-cea228f0.js","./Identifiable-093f90a8.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./number-2ab8ca0d.js","./jsonUtils-c6684c52.js","./Cyclical-078b4564.js","./reactiveUtils-5869e41a.js","./workers-af024c50.js","./Connection-b591250e.js","./Queue-275a6362.js","./intl-7d39a8c0.js","./projection-acd73147.js","./unitUtils-dd6fb8ee.js","./zscale-48bab05e.js","./TileInfo-c5c8c8d2.js","./widget-4abc68df.js","./uuid-73213768.js","./dom-5b7af1bf.js","./HandleOwner-2edbba46.js","./byteSizeEstimations-90c5a50d.js","./executeQueryJSON-29279a46.js","./normalizeUtils-0f537694.js","./query-b7b3a76b.js","./pbfQueryUtils-c922ef32.js","./pbf-8b0546e8.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./queryZScale-3c8de33a.js","./FeatureSet-deb2029d.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./RelationshipQuery-c27267ab.js","./LegendOptions-2e7b3d70.js","./jsonUtils-1c5cdf77.js","./UniqueValueRenderer-73d567ad.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./lengthUtils-92fed992.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./featureConversionUtils-d2229ed4.js","./TopFeaturesQuery-9aca00bf.js","./FeatureLayer-534ff006.js","./MultiOriginJSONSupport-b8792dfa.js","./LayerFloorInfo-f184c8f5.js","./FeatureLayerBase-c0aa3674.js","./HeightModelInfo-34f16d74.js","./arcgisLayerUrl-bed3cba1.js","./OperationalLayer-9c50475b.js","./ElevationInfo-80227ecc.js","./editsZScale-12d81957.js","./APIKeyMixin-b6e4f897.js","./ArcGISService-aada3b5d.js","./CustomParametersMixin-a5d06ccc.js","./EditBusLayer-b5dc3689.js","./FeatureReductionLayer-fcaeb34a.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./OrderedLayer-9623e905.js","./PortalLayer-12f4a535.js","./RefreshableLayer-49182ab8.js","./ScaleRangeLayer-c072e266.js","./TemporalLayer-c74d13d4.js","./TimeInfo-f76d6c20.js","./FeatureTemplate-c4496b93.js","./FeatureType-0be9420b.js","./fieldProperties-4207e953.js","./FieldsIndex-02142c8a.js","./versionUtils-fabd8b3a.js","./styleUtils-08eaa4d2.js","./popupUtils-1ecc877c.js","./colorUtils-82440b70.js","./mat2d-d0b91e3e.js","./Scheduler-5e6ccc87.js","./GraphicsLayer-b332f442.js","./ViewingMode-915d19cb.js","./unitBezier-881ac1eb.js","./vec2-ab9f47bf.js","./vec2f64-30dc1443.js","./mat3-9a8d9db7.js","./mat3f32-d3d088e8.js","./vec2f32-461e65a9.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./capabilities-d08b6e58.js","./context-util-d4c193b5.js","./Subtype-a3103d84.js","./datetime-4f774298.js","./elevationInfoUtils-c3025fae.js","./QueryEngineResult-92e13fe4.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./WhereClause-6c9440a1.js","./utils-44a68fd6.js","./json-48e3ea08.js","./Util-289ce3b5.js","./EffectView-dffeb0bc.js","./ExportImageParameters-ba01802d.js","./sublayerUtils-eea48c01.js","./webStyleSymbolUtils-0b165621.js","./devEnvironmentUtils-5002a058.js","./dehydratedFeatures-3dcd65f1.js","./enums-4b2a86a0.js","./plane-46a8c767.js","./sphere-622880b9.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./quat-ec16a584.js"],import.meta.url);return n(t,e)}case"cim":{const{previewCIMSymbol:n}=await Fe(()=>import("./previewCIMSymbol-78746ff9.js"),["./previewCIMSymbol-78746ff9.js","./screenUtils-90993e16.js","./cimAnalyzer-a68275f3.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./typedArrayUtil-d9bc5fbd.js","./ensureType-25b8cc06.js","./string-480f3e3f.js","./Error-57322e92.js","./fontUtils-4ed0e787.js","./arcadeOnDemand-a976a73c.js","./preload-helper-41c905a7.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./cast-a534ae90.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./BidiEngine-836b7ef6.js","./aaBoundingRect-b340cf8c.js","./jsonUtils-c6684c52.js","./enums-4b2a86a0.js","./utils-c81a5c52.js","./alignmentUtils-ae955d28.js","./definitions-2d0dd0cd.js","./mat2d-d0b91e3e.js","./vec2-ab9f47bf.js","./vec2f32-461e65a9.js","./number-954e4ab6.js","./Rect-ea14f53a.js","./callExpressionWithFeature-13fe9b68.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./colorRamps-8d7efc14.js","./enumeration-61a13175.js","./Symbol-8266348e.js","./GeometryUtils-eebff0a0.js","./floatRGBA-090399ba.js","./CIMSymbolRasterizer-546ef564.js","./request-24011425.js","./Rasterizer-2c1558a6.js","./_commonjsHelpers-a430e9ea.js","./imageutils-0a369a69.js","./rasterizingUtils-22a741bf.js","./utils-4469bf65.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./fieldUtils-b2df74c4.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./persistableUrlUtils-d0777bec.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./locale-30120714.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./Clonable-9b34e760.js","./asyncUtils-087555fc.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./assets-cd44347b.js","./ItemCache-bf1028d4.js","./MemCache-1d2f56ee.js","./Basemap-59ed9516.js","./deprecate-0d93948c.js","./loadAll-01cdf0a9.js","./PortalItem-e4ba4b94.js","./messages-28bf3b89.js","./writeUtils-3bde6e49.js","./layerUtils-68eea656.js","./compilerUtils-fefa73ae.js","./CollectionFlattener-f43a0fce.js","./TablesMixin-55858fba.js","./Layer-cea228f0.js","./Identifiable-093f90a8.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./number-2ab8ca0d.js","./Cyclical-078b4564.js","./reactiveUtils-5869e41a.js","./workers-af024c50.js","./Connection-b591250e.js","./Queue-275a6362.js","./intl-7d39a8c0.js","./projection-acd73147.js","./unitUtils-dd6fb8ee.js","./zscale-48bab05e.js","./TileInfo-c5c8c8d2.js","./widget-4abc68df.js","./uuid-73213768.js","./dom-5b7af1bf.js","./HandleOwner-2edbba46.js","./byteSizeEstimations-90c5a50d.js","./executeQueryJSON-29279a46.js","./normalizeUtils-0f537694.js","./query-b7b3a76b.js","./pbfQueryUtils-c922ef32.js","./pbf-8b0546e8.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./queryZScale-3c8de33a.js","./FeatureSet-deb2029d.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./RelationshipQuery-c27267ab.js","./LegendOptions-2e7b3d70.js","./jsonUtils-1c5cdf77.js","./UniqueValueRenderer-73d567ad.js","./diffUtils-8a8cb5bc.js","./sizeVariableUtils-d4870b0d.js","./lengthUtils-92fed992.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./featureConversionUtils-d2229ed4.js","./TopFeaturesQuery-9aca00bf.js","./FeatureLayer-534ff006.js","./MultiOriginJSONSupport-b8792dfa.js","./LayerFloorInfo-f184c8f5.js","./FeatureLayerBase-c0aa3674.js","./HeightModelInfo-34f16d74.js","./arcgisLayerUrl-bed3cba1.js","./OperationalLayer-9c50475b.js","./ElevationInfo-80227ecc.js","./editsZScale-12d81957.js","./APIKeyMixin-b6e4f897.js","./ArcGISService-aada3b5d.js","./CustomParametersMixin-a5d06ccc.js","./EditBusLayer-b5dc3689.js","./FeatureReductionLayer-fcaeb34a.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./OrderedLayer-9623e905.js","./PortalLayer-12f4a535.js","./RefreshableLayer-49182ab8.js","./ScaleRangeLayer-c072e266.js","./TemporalLayer-c74d13d4.js","./TimeInfo-f76d6c20.js","./FeatureTemplate-c4496b93.js","./FeatureType-0be9420b.js","./fieldProperties-4207e953.js","./FieldsIndex-02142c8a.js","./versionUtils-fabd8b3a.js","./styleUtils-08eaa4d2.js","./popupUtils-1ecc877c.js","./colorUtils-82440b70.js","./Scheduler-5e6ccc87.js","./GraphicsLayer-b332f442.js","./ViewingMode-915d19cb.js","./unitBezier-881ac1eb.js","./vec2f64-30dc1443.js","./mat3-9a8d9db7.js","./mat3f32-d3d088e8.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./capabilities-d08b6e58.js","./context-util-d4c193b5.js","./Subtype-a3103d84.js","./datetime-4f774298.js","./elevationInfoUtils-c3025fae.js","./QueryEngineResult-92e13fe4.js","./WhereClause-6c9440a1.js","./utils-44a68fd6.js","./json-48e3ea08.js","./Util-289ce3b5.js","./EffectView-dffeb0bc.js","./ExportImageParameters-ba01802d.js","./sublayerUtils-eea48c01.js","./webStyleSymbolUtils-0b165621.js","./devEnvironmentUtils-5002a058.js","./dehydratedFeatures-3dcd65f1.js","./plane-46a8c767.js","./sphere-622880b9.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./quat-ec16a584.js"],import.meta.url);return n(t,e)}default:return}}function Q3(t){return t&&"opacity"in t?t.opacity*Q3(t.parent):1}async function db(t,e){if(!t)return;const n=t.sourceLayer,i=(q(e)&&e.useSourceLayer?n:t.layer)??n,s=Q3(i);if(q(t.symbol)&&(!q(e)||e.ignoreGraphicSymbol!==!0)){const y=t.symbol.type==="web-style"?await t.symbol.fetchSymbol({...e,cache:q(e)?e.webStyleCache:null}):t.symbol.clone();return K_(y,null,s),y}const o=(q(e)?e.renderer:null)??(i&&"renderer"in i?i.renderer:null);let r=o&&"getSymbolAsync"in o?await o.getSymbolAsync(t,e):null;if(!r)return;if(r=r.type==="web-style"?await r.fetchSymbol({...e,cache:q(e)?e.webStyleCache:null}):r.clone(),!(o&&"visualVariables"in o&&o.visualVariables&&o.visualVariables.length))return K_(r,null,s),r;if("arcadeRequiredForVisualVariables"in o&&o.arcadeRequiredForVisualVariables&&(ke(e)||ke(e.arcade))){const y={...zt(e)};y.arcade=await zS(),e=y}const a=await Fe(()=>import("./UniqueValueRenderer-73d567ad.js").then(y=>y.v),["./UniqueValueRenderer-73d567ad.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./enumeration-61a13175.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./locale-30120714.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./Clonable-9b34e760.js","./LegendOptions-2e7b3d70.js","./reactiveUtils-5869e41a.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./number-2ab8ca0d.js","./Identifiable-093f90a8.js","./jsonUtils-c6684c52.js","./compilerUtils-fefa73ae.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js"],import.meta.url),l=[],c=[],u=[],d=[];for(const y of o.visualVariables)switch(y.type){case"color":l.push(y);break;case"opacity":c.push(y);break;case"rotation":d.push(y);break;case"size":y.target||u.push(y)}const h=!!l.length&&l[l.length-1],f=h?a.getColor(h,t,e):null,m=!!c.length&&c[c.length-1];let g=m?a.getOpacity(m,t,e):null;if(s!=null&&(g=g!=null?g*s:s),K_(r,f,g),u.length){const y=a.getAllSizes(u,t,e);await eB(r,y)}for(const y of d)tB(r,a.getRotationAngle(y,t,e),y.axis);return r}let RCe=class{constructor(e,n){this._owner=n,this._properties={},this._afterDispatchHandle=null;for(const i in e){const s=e[i],o=new j5(s,void 0,void 0,2,2);this._properties[i]={pool:o,acquired:[]}}this._afterDispatchHandle=q5(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const n=this._properties[e];for(const i of n.acquired)ZT(i)||n.pool.release(i);n.pool.destroy(),n.pool=null,n.acquired=null}this._properties=null,this._owner=null}get(e){const n=this._owner._get(e),i=this._properties[e];let s=i.pool.acquire();for(i.acquired.push(s);s===n;)i.acquired.push(s),s=i.pool.acquire();return s}_release(){for(const e in this._properties){const n=this._properties[e];let i=0;for(const s of n.acquired)ZT(s)?n.acquired[i++]=s:n.pool.release(s);n.acquired.length=i}}};const VCe=Ts("mac")?"Meta":"Ctrl",x_={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let t=48;t<58;t++)x_[t]=String.fromCharCode(t);for(let t=1;t<25;t++)x_[111+t]=`F${t}`;for(let t=65;t<91;t++)x_[t]=[String.fromCharCode(t+32),String.fromCharCode(t)];function FCe(t){if(t.key!==void 0)return ec(t);const e=x_[t.keyCode];return Array.isArray(e)?t.shiftKey?e[1]:e[0]:e}function DCe(t){switch(t){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let NCe=class{constructor(e,n=[]){this.eventType=e,this.keyModifiers=n}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const n=e.modifiers;for(const i of this.keyModifiers)if(!n.has(i))return!1;return!0}};const N2=Tt.getLogger("esri.views.input.InputHandler");let Oi=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const n=this._incoming[e];for(const i of n)this._incomingEventMatches.push(i.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?N2.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback(n=>this._handleEvent(n)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,n,i){let s;typeof n=="function"?(i=n,s=[]):s=n||[];const o=typeof e=="string"?new NCe(e,s):e,r=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=u=>{const d=this._incoming[u.match.eventType];if(d){const h=d.indexOf(u);d.splice(h,1),r(),this._manager&&this._manager.updateDependencies()}},l=new BCe(o,i,{onPause:a,onRemove:a,onResume:u=>{const d=this._incoming[u.match.eventType];d&&!d.includes(u)&&(d.push(u),r(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[o.eventType];return c||(c=[],this._incoming[o.eventType]=c),c.push(l),r(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const n=new zCe(e,{onEmit:(i,s,o,r)=>{var a;(a=this._manager)==null||a.emit(i.eventType,s,o,r)},onRemove:i=>{var s;delete this._outgoing[i.eventType],(s=this._manager)==null||s.updateDependencies()}});return this._outgoing[e]=n,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),n}startCapturingPointer(e){var n;(n=this._manager)==null||n.setPointerCapture(e,!0)}stopCapturingPointer(e){var n;(n=this._manager)==null||n.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):N2.error("This InputHandler is not registered with an InputManager")}_handleEvent(e){var i;const n=this._incoming[e.type];if(n){for(const s of n)if(s.match.matches(e)&&((i=s.callback)==null||i.call(s,e),e.shouldStopPropagation()))break}}},BCe=class{constructor(e,n,i){this.match=e,this._callback=n,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},zCe=class{constructor(e,n){this.eventType=e,this._removed=!1,this._handler=n}emit(e,n,i){this._removed||this._handler.onEmit(this,e,n,i)}remove(){this._removed=!0,this._handler.onRemove(this)}},HCe=class extends Oi{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",n=>{this._update(n.data)})}_update(e){const n=e.native.pointerType==="touch"?"touch":"mouse",{x:i,y:s}=e;n===this._value&&this._x===i&&this._y===s||(this._value=n,this._x=i,this._y=s,this._onChange(n,i,s))}},UCe=class extends Oi{constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=new vB(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}get multiTouchActive(){return this._multiTouchActive.get()}_update(){this._multiTouchActive.set(this._activeTouchPointerIds.size>1)}},Or=class extends dt{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=VCe,this._latestPointerType="mouse",this._propertiesPool=new RCe({latestPointerLocation:GCe},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const n of e)this.uninstallHandlers(n);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}installHandlers(e,n,i=nt.INTERNAL){if(this._nameToGroup[e])return void Tt.getLogger(this.declaredClass).error("There is already an InputHandler group registered under the name `"+e+"`");if(n.length===0)return void Tt.getLogger(this.declaredClass).error("Can't register a group of zero handlers");const s={name:e,handlers:n.map(o=>({handler:o,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=s;for(let o=s.handlers.length-1;o>=0;o--){const r=s.handlers[o];this._handlers.push(r),r.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,c,u,d)=>{this._emitInputEvent(r.priorityIndex+1,a,l,c,d,u)},setPointerCapture:(a,l)=>{this._setPointerCapture(s,r,a,l)},setEventCallback:a=>{r.eventCallback=a},setUninstallCallback:a=>{r.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const n=this._nameToGroup[e];n?(n.handlers.forEach(i=>{var s;i.removed=!0,(s=i.uninstallCallback)==null||s.call(i)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):Tt.getLogger(this.declaredClass).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,n=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const s=this._handlers[i];s.priorityIndex=i,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const s=this._handlersPriority[i];s.priorityIndex=i;let o=s.handler.hasSideEffects;if(!o){for(const r of s.handler.outgoingEventTypes)if(e.has(r)){o=!0;break}}if(o)for(const r of s.handler.incomingEventMatches){e.add(r.eventType);for(const a of r.keyModifiers)DCe(a)||n.add(a)}s.active=o}this._sourceEvents=e,this._keyModifiers=n,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,n,i){this._latestPointerType=e;const s=this._get("latestPointerLocation");if(ke(s)||s.x!==n||s.y!==i){const o=this._propertiesPool.get("latestPointerLocation");o.x=n,o.y=i,this._set("latestPointerLocation",o)}}_onEventReceived(e,n){if(e==="pointer-capture-lost"){const o=n;this._pointerCaptures.delete(o.native.pointerId)}this._updateKeyModifiers(e,n);const i=this.test.timestamp!=null?this.test.timestamp:n.native?n.native.timestamp:void 0,s=n.native?n.native.cancelable:void 0;this._emitInputEventFromSource(e,n,i,s)}_updateKeyModifiers(e,n){if(!n)return;let i=!1;const s=()=>{if(!i){const a=new Set;this._activeKeyModifiers.forEach(l=>{a.add(l)}),this._activeKeyModifiers=a,i=!0}},o=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(s(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(s(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const a=n.key;this._keyModifiers.has(a)&&o(a,e==="key-down")}const r=n.native;o("Alt",!(!r||!r.altKey)),o("Ctrl",!(!r||!r.ctrlKey)),o("Shift",!(!r||!r.shiftKey)),o("Meta",!(!r||!r.metaKey)),o("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new HCe((e,n,i)=>this._setLatestPointer(e,n,i)),this._multiTouchHandler=new UCe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],nt.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,nt.INTERNAL)}_setPointerCapture(e,n,i,s){const o=e.name+"-"+n.priorityIndex,r=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,r),s?(r.add(o),r.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):r.has(o)&&(r.delete(o),r.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,n,i,s){this._emitInputEvent(0,e,n,i,s)}_emitInputEvent(e,n,i,s,o,r){const a=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=o!==void 0&&o,c={event:new WCe(n,i,a,r||this._activeKeyModifiers,l),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(e){this._currentPropagation={events:new mI,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var n,i;const e=$b(this._currentPropagation);for(;e.events.length>0;){const{event:s,priorityIndex:o}=e.events.pop(),r=s.data&&s.data.eventId;if(!(r!=null&&this._stoppedPropagationEventIds.has(r)))for(e.currentHandler=this._handlersPriority[o];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!s.shouldStopPropagation()&&((i=(n=e.currentHandler).eventCallback)==null||i.call(n,s)),s.shouldStopPropagation()){r!=null&&this._stoppedPropagationEventIds.add(r);break}if(s.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:s,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}_pausePropagation(e){const n=new mI;n.push(e);const i=this._currentPropagation;if(i){for(;i.events.length;)n.push(i.events.pop());i.events=n,i.currentHandler=null}}_compareHandlerPriority(e,n){if(e.handler.hasSideEffects!==n.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==n.groupPriority)return e.groupPriority>n.groupPriority?-1:1;for(const i of e.handler.incomingEventMatches)for(const s of n.handler.incomingEventMatches){if(i.eventType!==s.eventType)continue;const o=i.keyModifiers.filter(r=>s.keyModifiers.includes(r));if(o.length===i.keyModifiers.length!=(o.length===s.keyModifiers.length))return i.keyModifiers.length>s.keyModifiers.length?-1:1}return e.priorityIndex>n.priorityIndex?-1:1}_sortHandlersPriority(e){const n=[];for(const i of e){let s=0;for(;s<n.length&&this._compareHandlerPriority(i,n[s])>=0;)s++;n.splice(s,0,i)}return n}get debug(){const e=n=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},n(),this._setPointerCapture=i};return{injectEvent:(n,i)=>{e(()=>{this._onEventReceived(n,i)})},disablePointerCapture:e}}};v([b({readOnly:!0})],Or.prototype,"hasPendingInputs",null),v([b({constructOnly:!0})],Or.prototype,"eventSource",void 0),v([b({constructOnly:!0})],Or.prototype,"recognizers",void 0),v([b()],Or.prototype,"_latestPointerType",void 0),v([b()],Or.prototype,"latestPointerType",null),v([b()],Or.prototype,"multiTouchActive",null),v([b({readOnly:!0})],Or.prototype,"latestPointerLocation",void 0),Or=v([Ae("esri.views.input.InputManager")],Or);let WCe=class{constructor(e,n,i,s,o){this.type=e,this.data=n,this.timestamp=i,this.modifiers=s,this.cancelable=o,this._propagationState=Zl.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Zl.STOPPED}shouldStopPropagation(){return(this._propagationState&Zl.STOPPED)!=0}async(e){this._propagationState|=Zl.PAUSED;const n=(i,s)=>{this._propagationState&=~Zl.PAUSED;const o=this._resumeCallback;if(this._resumeCallback=null,o&&o(),s)throw i;return i};return(typeof e=="function"?e():e).then(i=>n(i,!1),i=>n(i,!0))}shouldPausePropagation(e){return!!(this._propagationState&Zl.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var Zl;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(Zl||(Zl={}));const nt={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let GCe=class{};function OC(t){return t&&typeof t.highlight=="function"}function yRe(t,e,n){return ke(t)||t>n&&(e===0||t<e)}const M_={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},Pu=new uh({id:"zoom-to-feature",title:"{messages.zoom}",className:M_.iconZoom}),B2=new uh({id:"remove-selected-feature",title:"{messages.remove}",className:M_.iconTrash}),ep=new uh({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:M_.iconZoom}),tp=new uh({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:M_.iconBrowseClusteredFeatures}),jCe="esri.widgets.Popup.PopupViewModel",pb=Tt.getLogger(jCe),qCe=t=>{const{event:e,view:n}=t,{action:i}=e,s=n&&n.popup;if(!i)return Promise.reject(new Ue("trigger-action:missing-arguments","Event has no action"));if(!s)return Promise.reject(new Ue("trigger-action:missing-arguments","view.popup is missing"));const{disabled:o,id:r}=i;if(!r)return Promise.reject(new Ue("trigger-action:invalid-action","action.id is missing"));if(o)return Promise.reject(new Ue("trigger-action:invalid-action","Action is disabled"));if(r===Pu.id)return YCe(s.viewModel).catch(J5);if(r===ep.id)return ZCe(s.viewModel);if(r===tp.id)return s.featureMenuOpen=!s.featureMenuOpen,s.viewModel.browseClusterEnabled=!s.viewModel.browseClusterEnabled,Promise.resolve();if(s.viewModel.browseClusterEnabled=!1,r===B2.id){s.close();const{selectedFeature:a}=s;if(!a)return Promise.reject(new Ue(`trigger-action:${B2.id}`,"selectedFeature is required",{selectedFeature:a}));const{sourceLayer:l}=a;return l?l.remove(a):n.graphics.remove(a),Promise.resolve()}return Promise.resolve()};function J3(t){const{selectedFeature:e,location:n,view:i}=t;return i?i.type==="3d"?e||n:t.get("selectedFeature.geometry")||n:null}function yu(t){var e,n;return(t==null?void 0:t.isAggregate)&&((n=(e=t==null?void 0:t.sourceLayer)==null?void 0:e.featureReduction)==null?void 0:n.type)==="cluster"}async function KCe(t,e){if((e==null?void 0:e.type)!=="3d"||!t||t.declaredClass!=="esri.Graphic")return!0;const n=e.getViewForGraphic(t);if(n&&"whenGraphicBounds"in n){let i;try{i=await n.whenGraphicBounds(t,{useViewElevation:!0})}catch{}return!i||!i.boundingBox||i.boundingBox[0]===i.boundingBox[3]&&i.boundingBox[1]===i.boundingBox[4]&&i.boundingBox[2]===i.boundingBox[5]}return!0}async function YCe(t){const{location:e,selectedFeature:n,view:i,zoomFactor:s}=t,o=J3(t);if(!o){const c=new Ue("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:o,view:i});throw pb.error(c),c}const r=i.scale/s,a=t.get("selectedFeature.geometry")||e,l=a&&a.type==="point"&&await KCe(n,i);Pu.active=!0,Pu.disabled=!0;try{await t.zoomTo({target:{target:o,scale:l?r:void 0}})}catch{const u=new Ue("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:n});pb.error(u)}finally{Pu.active=!1,Pu.disabled=!1,t.zoomToLocation=null,l&&(t.location=a)}}async function ZCe(t){const{selectedFeature:e,view:n}=t;if((n==null?void 0:n.type)!=="2d"){const a=new Ue("zoomToCluster:invalid-view","View must be 2d MapView.",{view:n});throw pb.error(a),a}if(!yu(e)){const a=new Ue("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:e});throw pb.error(a),a}const i=e.sourceLayer,s=await n.whenLayerView(i),o=s.createQuery();o.aggregateIds=[e.getObjectId()],ep.active=!0,ep.disabled=!0;const{extent:r}=await s.queryExtent(o);await t.zoomTo({target:r}),ep.active=!1,ep.disabled=!1}async function XCe(t){const{selectedFeature:e,view:n}=t,i=e.sourceLayer,s=await n.whenLayerView(i),o=s.createQuery();o.aggregateIds=[e.getObjectId()];const{extent:r}=await s.queryExtent(o);t.selectedClusterBoundaryFeature.geometry=r,n.graphics.add(t.selectedClusterBoundaryFeature)}async function QCe(t){const{selectedFeature:e,view:n}=t,i=e.sourceLayer,s=await n.whenLayerView(i),o=s.createQuery();o.aggregateIds=[e.getObjectId()],tp.active=!0,tp.disabled=!0;const{features:r}=await s.queryFeatures(o);tp.active=!1,tp.disabled=!1,n.popup.open({features:[e].concat(r),featureMenuOpen:!0})}function JCe(t){const e=t.features.filter(n=>yu(n));e.length&&(t.features=e)}const lT=t=>{let e=class extends t{constructor(...n){super(...n),this.goToOverride=null,this.view=null}callGoTo(n){const{view:i}=this;return this.goToOverride?this.goToOverride(i,n):i.goTo(n.target,n.options)}};return v([b()],e.prototype,"goToOverride",void 0),v([b()],e.prototype,"view",void 0),e=v([Ae("esri.widgets.support.GoTo")],e),e},Ff=Ht.ofType({key:"type",defaultKeyValue:"button",base:BS,typeMap:{button:uh,toggle:lO}}),eSe=()=>[Pu.clone()],tSe=()=>[ep.clone(),tp.clone()];let Qt=class extends lT(W3){constructor(e){super(e),this._handles=new si,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new Ff,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new Ls({symbol:new tm({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}initialize(){this._handles.add([ge(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),ge(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),ge(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),ge(()=>{var e,n;return(n=(e=this.view)==null?void 0:e.animation)==null?void 0:n.state},e=>this._animationStateChange(e)),ge(()=>this.location,e=>this._locationChange(e)),ge(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),ge(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),ge(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),ge(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>qCe({event:e,view:this.view})),ji(()=>!this.waitingForResult,()=>this._waitingForResultChange(),_c),ge(()=>{var e,n;return[this.features,(e=this.view)==null?void 0:e.map,(n=this.view)==null?void 0:n.spatialReference]},()=>this._updateFeatureVMs()),ge(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),ji(()=>!this.visible,()=>this.browseClusterEnabled=!1),ge(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new Ff;e.removeAll();const{actions:n,defaultActions:i,defaultPopupTemplateEnabled:s,includeDefaultActions:o,selectedFeature:r}=this,a=o?i.concat(n):n,l=r&&(typeof r.getEffectivePopupTemplate=="function"&&r.getEffectivePopupTemplate(s)||r.popupTemplate),c=l&&l.actions,u=l&&l.overwriteActions?c:c?c.concat(a):a;return u&&u.filter(Boolean).forEach(d=>e.add(d)),e}get defaultActions(){const e=this._get("defaultActions")||new Ff;return e.removeAll(),e.addMany(yu(this.selectedFeature)?tSe():eSe()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const n=e||[];this._set("features",n);const{pendingPromisesCount:i,promiseCount:s,selectedFeatureIndex:o}=this,r=s&&n.length;r&&i&&o===-1?this.selectedFeatureIndex=0:r&&o!==-1||(this.selectedFeatureIndex=n.length?0:-1)}get location(){return this._get("location")||null}set location(e){const n=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&n&&(e=RS(e)),this._set("location",e)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(n=>{this._pendingPromises.add(n);const i=o=>{this._pendingPromises.has(n)&&this._updateFeatures(o),this._updatePendingPromises(n)},s=()=>this._updatePendingPromises(n);n.then(i,s)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:n}=this;return n===-1?null:e[n]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:n}=this;e=isNaN(e)||e<-1||!n?-1:(e+n)%n,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,n=J3(this);return n?this.callGoTo({target:{target:n,scale:e.scale}}):Promise.reject(new Ue("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:n,view:e}))}zoomTo(e){return this.callGoTo(e)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,n){const{view:i}=this;if(!i||!e)throw new Ue("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:i});return i.fetchPopupFeatures(e,{event:n&&n.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:n&&n.signal})}open(e){const n={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:i}=n;delete n.fetchFeatures,i&&this._setFetchFeaturesPromises(n.location);const s=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const o of s)delete n[o];this.set(n)}triggerAction(e){const n=this.allActions.getItemAt(e);n&&!n.disabled&&this.emit("trigger-action",{action:n})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){JCe(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:n}=this;(e==null?void 0:e.type)==="2d"?yu(n)?(await XCe(this),await QCe(this)):Tt.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",n):Tt.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",n)}_animationStateChange(e){this.zoomToLocation||(Pu.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var n;const e=(n=this.view)==null?void 0:n.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(yu(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=[this.selectedFeature])}_locationChange(e){const{selectedFeature:n,updateLocationEnabled:i}=this;i&&e&&(!n||n.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:n,featurePage:i,featuresPerPage:s,featureViewModels:o}=this;if(i===null)return;const r=((i-1)*s+n)%n,a=r+s;o.slice(r,a).forEach((l,c)=>{l&&!l.graphic&&(l.graphic=e[r+c])})}async _selectedFeatureChange(e){if(!e)return;const{location:n,updateLocationEnabled:i,view:s}=this;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(s.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),yu(e)?void 0:(e.symbol=await db(e),this._selectedClusterFeature=e,void s.graphics.add(this._selectedClusterFeature));!i&&n||!e.geometry?i&&!e.geometry&&this.centerAtLocation().then(()=>{this.location=s.center.clone()}):this.location=zt(this._getPointFromGeometry(e.geometry))}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(n=>{const{clientOnlyGraphics:i,promisesPerLayerView:s}=n,o=Promise.resolve(i),r=s.map(a=>a.promise);this.promises=[o,...r]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:n,featureViewModels:i}=this;if(yu(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!n||!n.length)return;const s=i.slice(0),o=[];n.forEach((r,a)=>{var c,u;if(!r)return;let l=null;if(s.some((d,h)=>(d&&d.graphic===r&&(l=d,s.splice(h,1)),!!l)),l)o[a]=l;else{const d=new nT({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(c=this.view)==null?void 0:c.spatialReference,graphic:r===e?r:null,map:(u=this.view)==null?void 0:u.map,view:this.view});o[a]=d}}),s.forEach(r=>r&&!r.destroyed&&r.destroy()),this._set("featureViewModels",o)}_getScreenPoint(e){const{view:n}=this;return n&&e&&typeof n.toScreen=="function"?n.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:n,autoOpenEnabled:i}=this;if(n.remove(e),i&&this.view){const s=this.view.on("click",o=>{o.pointerType==="mouse"&&o.button!==0||this._fetchFeaturesAndOpen(o)},nt.WIDGET);n.add(s,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,n){this._cancelFetchingFeatures();const i=new AbortController,{signal:s}=i;this._fetchFeaturesController=i,this.notifyChange("waitingForResult");const o=this.fetchFeatures(e,{signal:s,event:n});return o.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),o}_fetchFeaturesAndOpen(e){const{screenPoint:n,mapPoint:i}=e,{view:s}=this;this._fetchFeaturesWithController(n,e).then(o=>{const{clientOnlyGraphics:r,promisesPerLayerView:a,location:l}=o,c=[Promise.resolve(r),...a.map(u=>u.promise)];return s.popup.open({location:l||i,promises:c}),o})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(e){var n;return ke(e)?null:e.type==="point"?e:e.type==="extent"?e.center:e.type==="polygon"?e.centroid:e.type==="multipoint"||e.type==="polyline"?(n=e.extent)==null?void 0:n.center:null}async _getLayerView(e,n){return await e.when(),e.whenLayerView(n)}_getHighlightLayer(e){const{layer:n,sourceLayer:i}=e;return i&&"layer"in i&&i.layer?i.layer:(i==null?void 0:i.type)==="map-notes"||(i==null?void 0:i.type)==="subtype-group"?i:n}_getHighlightTarget(e,n){const i=n.type==="imagery"?void 0:"objectIdField"in n?n.objectIdField||sCe:null,s=e.attributes;return s&&i&&s[i]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:n,view:i,activeFeature:s,visible:o}=this;if(!(s&&i&&n&&o))return;const r=this._getHighlightLayer(s);if(!(r&&r instanceof fI))return;const a=this._getLayerView(i,r);this._highlightActiveFeaturePromise=a;const l=await a;if(!(l&&OC(l)&&this._highlightActiveFeaturePromise===a&&this.activeFeature&&this.highlightEnabled))return;const c=l.highlight(this._getHighlightTarget(s,r));this._handles.add(c,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:n,highlightEnabled:i,view:s,visible:o}=this;if(!(n&&s&&i&&o))return;const r=this._getHighlightLayer(n);if(!(r&&r instanceof fI))return;const a=this._getLayerView(s,r);this._highlightSelectedFeaturePromise=a;const l=await a;if(!(l&&OC(l)&&this._highlightSelectedFeaturePromise===a&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const c=l.highlight(this._getHighlightTarget(n,r));this._handles.add(c,e)}_updateFeatures(e){const{features:n}=this;if(!e||!e.length)return;if(!n.length)return void(this.features=e);const i=e.filter(s=>!n.includes(s));this.features=n.concat(i)}};v([b()],Qt.prototype,"featurePage",void 0),v([b()],Qt.prototype,"isLoadingFeature",null),v([b({type:Ff})],Qt.prototype,"actions",void 0),v([b({readOnly:!0})],Qt.prototype,"active",null),v([b()],Qt.prototype,"activeFeature",void 0),v([b({readOnly:!0})],Qt.prototype,"allActions",null),v([b({type:Boolean})],Qt.prototype,"defaultPopupTemplateEnabled",void 0),v([b()],Qt.prototype,"autoCloseEnabled",void 0),v([b()],Qt.prototype,"autoOpenEnabled",void 0),v([b()],Qt.prototype,"browseClusterEnabled",void 0),v([b()],Qt.prototype,"content",void 0),v([b({type:Ff,readOnly:!0})],Qt.prototype,"defaultActions",null),v([b({readOnly:!0})],Qt.prototype,"featureCount",null),v([b()],Qt.prototype,"features",null),v([b()],Qt.prototype,"featuresPerPage",void 0),v([b()],Qt.prototype,"featureViewModelAbilities",void 0),v([b({readOnly:!0})],Qt.prototype,"featureViewModels",void 0),v([b()],Qt.prototype,"highlightEnabled",void 0),v([b()],Qt.prototype,"includeDefaultActions",void 0),v([b({type:Kt})],Qt.prototype,"location",null),v([b({readOnly:!0})],Qt.prototype,"pendingPromisesCount",null),v([b({readOnly:!0})],Qt.prototype,"selectedClusterBoundaryFeature",void 0),v([b({readOnly:!0})],Qt.prototype,"waitingForResult",null),v([b({readOnly:!0})],Qt.prototype,"promiseCount",null),v([b()],Qt.prototype,"promises",null),v([b({value:null,readOnly:!0})],Qt.prototype,"selectedFeature",null),v([b({value:-1})],Qt.prototype,"selectedFeatureIndex",null),v([b({readOnly:!0})],Qt.prototype,"selectedFeatureViewModel",null),v([b({readOnly:!0})],Qt.prototype,"state",null),v([b()],Qt.prototype,"title",void 0),v([b()],Qt.prototype,"updateLocationEnabled",void 0),v([b()],Qt.prototype,"view",void 0),v([b()],Qt.prototype,"visible",void 0),v([b()],Qt.prototype,"zoomFactor",void 0),v([b()],Qt.prototype,"zoomToLocation",void 0),v([b()],Qt.prototype,"centerAtLocation",null),Qt=v([Ae("esri.widgets.Popup.PopupViewModel")],Qt);const eN=Qt,z2="selected-index",nSe=0,H2="popup-spinner",We={calciteThemeLight:"calcite-theme-light",calciteThemeDark:"calcite-theme-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",actionExit:"esri-popup__action--exit",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button",collapseIcon:"esri-popup__collapse-icon"},U2={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},W2="esri-popup";function ma(t,e){return e===void 0?`${W2}__${t}`:`${W2}__${t}-${e}`}const G2={closeButton:!0,featureNavigation:!0};let St=class extends H3(kn){constructor(e,n){super(e,n),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new si,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([i])=>{i!=null&&i.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=Cp(()=>this._displaySpinner(),nSe),this._exitRelatedRecordsActions=new WeakMap,this._flowItems=new Ht,this.alignment="auto",this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureMenuOpen=!1,this.headingLevel=2,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.spinnerEnabled=!0,this.viewModel=new eN,this.visibleElements={...G2},this._addSelectedFeatureIndexHandle(),this.addHandles([ge(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},()=>this._positionContainer()),ge(()=>{var i;return[(i=this.viewModel)==null?void 0:i.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),ge(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},(i,s)=>{!!i!=!!s&&this.reposition()}),ge(()=>{var i,s,o,r,a,l;return[(s=(i=this.viewModel)==null?void 0:i.view)==null?void 0:s.padding,(r=(o=this.viewModel)==null?void 0:o.view)==null?void 0:r.size,(a=this.viewModel)==null?void 0:a.active,(l=this.viewModel)==null?void 0:l.location,this.alignment]},()=>this.reposition()),ge(()=>this.spinnerEnabled,i=>this._spinnerEnabledChange(i)),ge(()=>{var i,s;return(s=(i=this.viewModel)==null?void 0:i.view)==null?void 0:s.size},(i,s)=>this._updateDockEnabledForViewSize(i,s)),ge(()=>{var i;return(i=this.viewModel)==null?void 0:i.view},(i,s)=>this._viewChange(i,s)),ge(()=>{var i,s;return(s=(i=this.viewModel)==null?void 0:i.view)==null?void 0:s.ready},(i,s)=>this._viewReadyChange(i,s)),ge(()=>{var i,s;return[(i=this.viewModel)==null?void 0:i.waitingForResult,(s=this.viewModel)==null?void 0:s.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),ge(()=>this.selectedFeatureWidget,()=>this._destroyFlowItemWidgets()),ge(()=>{var i,s,o,r;return[(s=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:s.title,(r=(o=this.selectedFeatureWidget)==null?void 0:o.viewModel)==null?void 0:r.state]},()=>this._setTitleFromFeatureWidget()),ge(()=>{var i,s,o,r;return[(s=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:s.content,(r=(o=this.selectedFeatureWidget)==null?void 0:o.viewModel)==null?void 0:r.state]},()=>this._setContentFromFeatureWidget()),ji(()=>!this.collapsed,()=>{var i,s;((s=(i=this.viewModel)==null?void 0:i.view)==null?void 0:s.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),Dn(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},"change",()=>this._watchActions()),ge(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},()=>this._watchActions(),gt),ge(()=>{var i;return(i=this.viewModel)==null?void 0:i.featureViewModels},()=>this._featureMenuViewportScrollTop()),Dn(()=>this._flowItems,"change",()=>{this.notifyChange("_activeFlowItemWidget"),this.scheduleRender()}),ge(()=>{var i,s,o,r;return[(s=(i=this._activeFlowItemWidget)==null?void 0:i.viewModel)==null?void 0:s.state,(r=(o=this._activeFlowItemWidget)==null?void 0:o.viewModel)==null?void 0:r.title]},()=>this.scheduleRender())])}loadDependencies(){return Promise.all([Fe(()=>import("./calcite-flow-67c8e2bc.js"),["./calcite-flow-67c8e2bc.js","./dom-5b7af1bf.js","./observers-c77bfda3.js"],import.meta.url),Fe(()=>import("./calcite-flow-item-8eba8c39.js"),["./calcite-flow-item-8eba8c39.js","./dom-5b7af1bf.js","./panel-ae4dd30c.js","./popover-dcfb3586.js","./floating-ui-bda1a599.js","./preload-helper-41c905a7.js","./guid-e49c4e43.js","./openCloseComponent-587e936b.js","./key-1fec8108.js","./action-ae390733.js","./observers-c77bfda3.js","./interactive-52dcf836.js","./icon-1a289254.js","./loader-632408c9.js","./action-menu-d50c4d74.js","./scrim-41440f97.js","./tooltip-87951009.js"],import.meta.url),Fe(()=>import("./calcite-action-9d25f314.js"),["./calcite-action-9d25f314.js","./action-ae390733.js","./dom-5b7af1bf.js","./observers-c77bfda3.js","./interactive-52dcf836.js","./icon-1a289254.js","./loader-632408c9.js","./guid-e49c4e43.js"],import.meta.url),Fe(()=>import("./calcite-tooltip-2c1ea5a7.js"),["./calcite-tooltip-2c1ea5a7.js","./tooltip-87951009.js","./dom-5b7af1bf.js","./guid-e49c4e43.js","./floating-ui-bda1a599.js","./preload-helper-41c905a7.js"],import.meta.url),Fe(()=>import("./calcite-icon-5dd27db1.js"),["./calcite-icon-5dd27db1.js","./icon-1a289254.js","./dom-5b7af1bf.js","./observers-c77bfda3.js"],import.meta.url)])}destroy(){var e,n;this._destroyFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(n=this._featureMenuIntersectionObserver)==null||n.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){const{selectedFeatureWidget:e,viewModel:n}=this;if(!e)return!!(n!=null&&n.content);const i=e.viewModel;if(i!=null&&i.waitingForContent||(i==null?void 0:i.state)==="error")return!0;const s=i==null?void 0:i.content;return Array.isArray(s)?!!s.length:!!s}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}get _activeFlowItemWidget(){const{_flowItems:e}=this;return e.getItemAt(e.length-1)||null}get actions(){return this.viewModel.actions}set actions(e){this.viewModel.actions=e}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(e){this.viewModel.autoCloseEnabled=e}get autoOpenEnabled(){return this.viewModel.autoOpenEnabled}set autoOpenEnabled(e){this.viewModel.autoOpenEnabled=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get content(){return this.viewModel.content}set content(e){this.viewModel.content=e}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||U2}set dockOptions(e){const n={...U2},i=this.get("viewModel.view.breakpoints"),s={};i&&(s.width=i.xsmall,s.height=i.xsmall);const o={...n,...e},r={...n.breakpoint,...s},{breakpoint:a}=o;a===!0?o.breakpoint=r:typeof a=="object"&&(o.breakpoint={...r,...a}),this._set("dockOptions",o),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get features(){return this.viewModel.features}set features(e){this.viewModel.features=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(e){this.viewModel.highlightEnabled=e}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get promises(){return this.viewModel.promises}set promises(e){this.viewModel.promises=e}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(e){this.viewModel.selectedFeatureIndex=e}get selectedFeatureWidget(){const{_feature:e,visibleElements:n,headingLevel:i,_flowItems:s}=this,{selectedFeatureViewModel:o}=this.viewModel,r={...n,title:!1};return o?(e?(e.viewModel=o,e.visibleElements=r):this._feature=new nCe({flowItems:s,headingLevel:i+1,viewModel:o,visibleElements:r}),this._feature):null}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(e){this.viewModel.updateLocationEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}castVisibleElements(e){return{...G2,...e}}blur(){const{active:e}=this.viewModel;e||Tt.getLogger(this.declaredClass).warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,n){return this.viewModel.fetchFeatures(e,n)}focus(){const{active:e}=this.viewModel;e||Tt.getLogger(this.declaredClass).warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var o,r;this._handles.remove(z2);const n=!!e&&!!e.featureMenuOpen,i=!!e&&!!e.actionsMenuOpen,s={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:i,featureMenuOpen:n};((r=(o=this.viewModel)==null?void 0:o.view)==null?void 0:r.widthBreakpoint)==="xsmall"&&(s.collapsed=!0),this.set(s),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){return this.viewModel.triggerAction(e)}render(){var g,y,_,C;const{actionsMenuOpen:e,dockEnabled:n,featureMenuVisible:i,dividedActions:s,currentAlignment:o,currentDockPosition:r}=this,{active:a}=this.viewModel,{menuActions:l}=s,c=a&&l.length>1&&e,u=a&&n,d=a&&!n,h=(y=(g=this.selectedFeature)==null?void 0:g.layer)==null?void 0:y.title,f=(C=(_=this.selectedFeature)==null?void 0:_.layer)==null?void 0:C.id,m={[We.alignTopCenter]:o==="top-center",[We.alignBottomCenter]:o==="bottom-center",[We.alignTopLeft]:o==="top-left",[We.alignBottomLeft]:o==="bottom-left",[We.alignTopRight]:o==="top-right",[We.alignBottomRight]:o==="bottom-right",[We.isDocked]:u,[We.shadow]:d,[We.isDockedTopLeft]:r==="top-left",[We.isDockedTopCenter]:r==="top-center",[We.isDockedTopRight]:r==="top-right",[We.isDockedBottomLeft]:r==="bottom-left",[We.isDockedBottomCenter]:r==="bottom-center",[We.isDockedBottomRight]:r==="bottom-right",[We.isFeatureMenuOpen]:i,[We.isActionsMenuOpen]:c};return M("div",{class:this.classes(We.base,m),role:"presentation","data-layer-title":h,"data-layer-id":f,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},a?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return M("span",{"aria-hidden":"true",class:this.classes(We.icon,We.iconLoading,We.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?M("div",{key:ma("loading-container"),role:"presentation",class:We.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=yo(this.container),n={[We.iconRightTriangleArrow]:e,[We.paginationPreviousIconRTL]:e,[We.iconLeftTriangleArrow]:!e,[We.paginationPreviousIconLTR]:!e};return M("span",{"aria-hidden":"true",class:this.classes(We.icon,n)})}renderPreviousButton(){const{messages:e}=this;return M("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(We.button,We.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=yo(this.container),n={[We.iconLeftTriangleArrow]:e,[We.paginationNextIconRTL]:e,[We.iconRightTriangleArrow]:!e,[We.paginationNextIconLTR]:!e};return M("span",{"aria-hidden":"true",class:this.classes(We.icon,n)})}renderNextButton(){const{messages:e}=this;return M("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(We.button,We.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:n,messagesCommon:i}=this,{featureCount:s,selectedFeatureIndex:o}=this.viewModel;return M("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(We.button,We.featureMenuButton),"aria-haspopup":"true","aria-controls":n,"aria-expanded":e.toString(),"aria-label":i.menu,title:i.menu},this._getPageText(s,o))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:e}=this,n=this._wouldDockTo(),i={[We.iconUndock]:e,[We.iconDock]:!e,[We.iconDockToRight]:!e&&(n==="top-right"||n==="bottom-right"),[We.iconDockToLeft]:!e&&(n==="top-left"||n==="bottom-left"),[We.iconDockToTop]:!e&&n==="top-center",[We.iconDockToBottom]:!e&&n==="bottom-center"};return M("span",{"aria-hidden":"true",class:this.classes(i,We.icon)})}renderDockButton(){var o,r,a;const{dockEnabled:e,messages:n}=this,i=(r=(o=this.viewModel)==null?void 0:o.view)==null?void 0:r.widthBreakpoint,s=e?n.undock:n.dock;return i!=="xsmall"&&((a=this.dockOptions)!=null&&a.buttonEnabled)?M("div",{role:"button","aria-label":s,title:s,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(We.button,We.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:n,collapsible:i,contentCollapsed:s,messagesCommon:o}=this,r={[We.headerContainerButton]:i},a=M(Is,{level:this.headingLevel,class:We.headerTitle,innerHTML:e}),l=i?M("button",{key:`${e}--collapsible`,id:n,title:s?o.expand:o.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(We.headerContainer,r),"aria-expanded":s?"false":"true",onclick:this._toggleCollapsed,type:"button"},a,M("calcite-icon",{class:We.collapseIcon,key:"collapse-icon",icon:s?"chevron-down":"chevron-up",scale:"m"})):M("div",{key:e,id:n,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(We.headerContainer,r)},a);return e?l:null}renderCloseIcon(){return M("span",{"aria-hidden":"true",class:this.classes(We.icon,We.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:n}=this;return e.closeButton?M("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:We.button,"aria-label":n.close,title:n.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return M("header",{class:We.header},this.renderTitle(),M("div",{class:We.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:n,contentCollapsed:i,_flowItems:s,messagesCommon:o}=this,{content:r}=this.viewModel,a=s.toArray(),l={[We.contentHasFlows]:!!a.length};return n&&!i?M("div",{key:r,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:this.classes(We.content,l)},M("calcite-flow",{bind:this,onCalciteFlowItemBack:this._handleBackClick},M("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode","intl-back":o.back,afterCreate:Ry,key:"root-flow-item"},this.renderContent()),a.map(c=>this.renderFlowItem(c))),a.map(c=>this.renderFlowItemTooltip(c))):null}renderFlowItem(e){const{messages:n,messagesCommon:i}=this,s=Gm();return M("calcite-flow-item",{class:this.classes({[We.calciteThemeDark]:!s,[We.calciteThemeLight]:s}),heading:e.title,"intl-back":i.back,description:this._getFlowItemDescription(e),key:`flow-item-${e.viewModel.uid}`},M("calcite-action",{class:We.actionExit,icon:"move-up",label:n==null?void 0:n.exitRelatedRecords,text:n==null?void 0:n.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:o=>this._storeExitRelatedRecordsAction(e,o),onclick:this._destroyFlowItemWidgets}),M("div",{class:this.classes(We.contentFlowItem,{[We.calciteThemeDark]:s,[We.calciteThemeLight]:!s})},e.render()))}renderFlowItemTooltip(e){const{messages:n,_exitRelatedRecordsActions:i}=this,s=Gm();return M("calcite-tooltip",{class:this.classes({[We.calciteThemeDark]:!s,[We.calciteThemeLight]:s}),key:`exit-related-records-tooltip-${e.viewModel.uid}`,label:n==null?void 0:n.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:i.get(e),placement:"top"},n==null?void 0:n.exitRelatedRecords)}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:n,actionsMenuOpen:i,dividedActions:s,messagesCommon:o}=this,r=i?o.close:o.open,{menuActions:a}=s;return a.length?M("div",{key:ma("actions-menu-button"),class:this.classes(We.button,We.actionsMenuButton),role:"button",id:n,"aria-haspopup":"true","aria-controls":i?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":r,title:r},M("span",{"aria-hidden":"true",class:We.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:n,actionsMenuOpen:i,dividedActions:s}=this,{menuActions:o}=s;return o.length&&i?M("ul",{id:e,role:"menu","aria-labelledby":n,key:ma("actions"),class:We.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},o.toArray().map(r=>this.renderAction({action:r,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return!!e.length&&e.toArray().map(n=>this.renderAction({action:n,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:e,menuActions:n}=this.dividedActions,i=!!e.length,s=!!n.length;return i||s?M("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":s.toString(),class:We.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?M("section",{key:ma("navigation"),class:this.classes(We.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:n}=this,{inlineActions:i,menuActions:s}=n,o=!!i.length,r=!!s.length,a={[We.footerHasPagination]:e,[We.footerHasActions]:o,[We.footerHasActionsMenu]:r};return e||o?M("div",{key:ma("feature-buttons"),class:this.classes(We.footer,a)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:n,isLoadingFeature:i}=this.viewModel,s=Si(e.selectedFeatures,{total:n.length});return M("section",{key:ma("menu"),class:We.featureMenu},M("strong",{class:We.featureMenuHeader},s),M("nav",{bind:this,class:We.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:Ry},this.renderFeatureMenu(),M("div",{class:We.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),i?M("div",{class:We.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:M("div",{key:ma("pointer"),class:We.pointer,role:"presentation"},M("div",{class:this.classes(We.pointerDirection,We.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:n,currentDockPosition:i,titleId:s,contentId:o,collapsible:r,hasContent:a,contentCollapsed:l,visibleElements:c}=this,{title:u}=this.viewModel,d=n==="bottom-left"||n==="bottom-center"||n==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right",h=n==="top-left"||n==="top-center"||n==="top-right"||i==="bottom-left"||i==="bottom-center"||i==="bottom-right",f={[We.shadow]:e,[We.isCollapsible]:r,[We.isCollapsed]:l};return M("div",{class:this.classes(We.main,We.widget,f),tabIndex:c.closeButton?null:-1,role:"dialog","aria-labelledby":u?s:"","aria-describedby":a&&!l?o:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},d?this.renderFooter():null,d?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),h?this.renderFooter():null,h?this.renderFeatureMenuContainer():null)}renderContent(){var n;const e=(n=this.viewModel)==null?void 0:n.content;return e?typeof e=="string"?M("div",{class:Kn.contentNode,key:e,innerHTML:e}):this.renderNodeContent(e):null}renderActionText(e){return M("span",{key:"text",class:We.actionText},e)}renderActionIcon(e){const n=this._getActionClass(e),i=this._getActionImage(e),s={[We.iconLoading]:e.active,[We.rotating]:e.active,[We.icon]:!!n,[We.actionImage]:!e.active&&!!i};return n&&(s[n]=!e.active),M("span",{key:"icon","aria-hidden":"true",class:this.classes(We.icon,s),styles:this._getIconStyles(i)})}renderAction(e){const{action:n,type:i}=e,s=this._getActionTitle(n),o={[We.action]:n.type!=="toggle",[We.actionToggle]:n.type==="toggle",[We.actionToggleOn]:n.type==="toggle"&&n.value,[We.buttonDisabled]:n.disabled},r=[this.renderActionIcon(n),this.renderActionText(s)],a=i==="menu-item"?M("li",{key:n.uid,role:"menuitem",tabIndex:0,title:s,"aria-label":s,class:this.classes(We.button,o),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":n.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},r):M("div",{key:n.uid,role:"button",tabIndex:0,title:s,"aria-label":s,class:this.classes(We.button,o),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":n.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},r);return n.visible?a:null}renderFeatureMenuItem(e,n){const{messages:i,messagesCommon:s}=this,{selectedFeatureIndex:o,selectedFeatureViewModel:r}=this.viewModel,a=e===r,l={[We.featureMenuSelected]:a},c=a?M("span",{key:ma(`feature-menu-selected-feature-${o}`),title:i.selectedFeature,"aria-label":i.selectedFeature,class:We.iconCheckMark}):null,u=M("span",{innerHTML:e.title||s.untitled});return M("li",{role:"menuitem",tabIndex:-1,key:ma(`feature-menu-feature-${o}`),class:this.classes(l,We.featureMenuItem),bind:this,"data-feature-index":n,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},M("span",{class:We.featureMenuTitle},u,c))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:n}=this.viewModel;return n.length>1?M("ol",{class:We.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},n.filter(i=>!!i.graphic).map((i,s)=>this.renderFeatureMenuItem(i,s))):null}_storeExitRelatedRecordsAction(e,n){this._exitRelatedRecordsActions.set(e,n),this.scheduleRender()}_getFlowItemDescription(e){return"featureCountDescription"in e?e.featureCountDescription:e.viewModel.description}_destroyFlowItemWidgets(){this._flowItems.removeAll().forEach(e=>{"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e.viewModel=null,e.destroy()})}_handleBackClick(){const e=this._flowItems.pop();this._exitRelatedRecordsActions.delete(e),"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e&&(e.viewModel=null,e.destroy())}_getActionTitle(e){const{messages:n,selectedFeature:i,messagesCommon:s}=this,{id:o}=e,r=i==null?void 0:i.attributes,a=o==="zoom-to-feature"?Si(e.title,{messages:n}):o==="remove-selected-feature"?Si(e.title,{messages:s}):o==="zoom-to-clustered-features"||o==="browse-clustered-features"?Si(e.title,{messages:n}):e.title;return a&&r?Si(a,r):a}_getActionClass(e){const{selectedFeature:n}=this,i=n==null?void 0:n.attributes,{className:s,image:o}=e,r=o||s?s:We.iconDefaultAction;return r&&i?Si(r,i):r}_getActionImage(e){const{selectedFeature:n}=this,i=n==null?void 0:n.attributes,{image:s}=e;return s&&i?Si(s,i):s}_createFeatureUpdatedAnimation(){return L8("enter",We.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:n}=this;if(typeof e!="number")return null;const i=Math.round(e);return Math.max(n?i-1:i,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const n="actions";this._handles.remove(n),e&&e.forEach(i=>{this._handles.add(ge(()=>[i.uid,i.active,i.className,i.disabled,i.id,i.title,i.image,i.visible],()=>this.scheduleRender()),n)})}_divideActions(){const{allActions:e}=this.viewModel,n=e.filter(r=>r.visible),i=this._getInlineActionCount(),s=i===null,o=i===0;return{inlineActions:s?n.slice(0):o?new Ht:n.slice(0,i),menuActions:s?new Ht:o?n.slice(0):n.slice(i)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var i,s;const{selectedFeatureWidget:e,messagesCommon:n}=this;e&&(this.viewModel.title=((i=e.viewModel)==null?void 0:i.state)==="error"?n.errorMessage:((s=e.viewModel)==null?void 0:s.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){ec(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){ec(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(e){const{viewModel:n}=this,i=e.currentTarget["data-feature-index"];n.activeFeature=n.features[i]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(e){const n=ec(e),{_featureMenuNode:i}=this,s=e.currentTarget["data-feature-index"];if(!i)return;const o=i.querySelectorAll("li"),r=o.length;n!=="ArrowUp"?n!=="ArrowDown"?n!=="Home"?n!=="End"||(e.stopPropagation(),o[o.length-1].focus()):(e.stopPropagation(),o[0].focus()):(e.stopPropagation(),o[(s+1+r)%r].focus()):(e.stopPropagation(),o[(s-1+r)%r].focus())}_handleActionMenuItemKeyup(e){const n=ec(e),{_actionsMenuNode:i}=this,s=e.currentTarget.dataset.actionUid,{menuActions:o}=this.dividedActions,r=o.findIndex(c=>c.uid===s);if(!i)return;const a=i.querySelectorAll("li"),l=a.length;n!=="ArrowUp"?n!=="ArrowDown"?n!=="Home"?n!=="End"||(e.stopPropagation(),a[a.length-1].focus()):(e.stopPropagation(),a[0].focus()):(e.stopPropagation(),a[(r+1+l)%l].focus()):(e.stopPropagation(),a[(r-1+l)%l].focus())}_handleMainKeyup(e){const n=ec(e);n==="ArrowLeft"&&(e.stopPropagation(),this.previous()),n==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const n=this.get("viewModel.view");this._createSpinner(n)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:n,waitingForResult:i}=this.viewModel;i?e.show({location:n}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e.shouldFocus&&(await na(()=>{var n;return((n=this.viewModel)==null?void 0:n.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const e=ge(()=>{var n;return(n=this.viewModel)==null?void 0:n.selectedFeatureIndex},(n,i)=>this._selectedFeatureIndexUpdated(n,i));this._handles.add(e,z2)}_selectedFeatureIndexUpdated(e,n){const{featureCount:i}=this;i&&e!==n&&e!==-1&&(this._destroyFlowItemWidgets(),this.actionsMenuOpen=!1,this.featureMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,n){return e.x>-1&&e.y>-1&&e.x<=n.width&&e.y<=n.height}_isOutsideView(e){const{popupHeight:n,popupWidth:i,screenLocation:s,side:o,view:r}=e;if(isNaN(i)||isNaN(n)||!r||!s)return!1;const a=r.padding;return o==="right"&&s.x+i/2>r.width-a.right||o==="left"&&s.x-i/2<a.left||o==="top"&&s.y-n<a.top||o==="bottom"&&s.y+n>r.height-a.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:n,_containerNode:i,_mainContainerNode:s,viewModel:o}=this,{screenLocation:r,view:a}=o;if(ke(r)||!a||!i)return"top-center";if(!this._isScreenLocationWithinView(r,a))return this._get("currentAlignment")||"top-center";function l(S){return parseInt(S.replace(/[^-\d\.]/g,""),10)}const c=s?window.getComputedStyle(s,null):null,u=c?l(c.getPropertyValue("max-height")):0,d=c?l(c.getPropertyValue("height")):0,{height:h,width:f}=i.getBoundingClientRect(),m=f+n,g=Math.max(h,u,d)+n,y=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:r,side:"right",view:a}),_=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:r,side:"left",view:a}),C=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:r,side:"top",view:a}),w=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:r,side:"bottom",view:a});return _?C?"bottom-right":"top-right":y?C?"bottom-left":"top-left":C?w?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:n}=this;return n||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const n=["left","right"];return yo(this.container)&&n.reverse(),e.replace(/leading/gi,n[0]).replace(/trailing/gi,n[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var a;if(e!=="auto")return e;const n=(a=this.viewModel)==null?void 0:a.view,i=yo(this.container)?"top-left":"top-right";if(!n)return i;const s=n.padding||{left:0,right:0,top:0,bottom:0},o=n.width-s.left-s.right,{breakpoints:r}=n;return r&&o<=r.xsmall?"bottom-center":i}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!e)return;const{screenLocation:n}=this.viewModel,{width:i}=e.getBoundingClientRect(),s=this._calculatePositionStyle(n,i);s&&(e.style.top=s.top,e.style.left=s.left,e.style.bottom=s.bottom,e.style.right=s.right)}_calculateFullWidth(e){const{currentAlignment:n,_pointerOffsetInPx:i}=this;return n==="top-left"||n==="bottom-left"||n==="top-right"||n==="bottom-right"?e+i:e}_calculateAlignmentPosition(e,n,i,s){const{currentAlignment:o,_pointerOffsetInPx:r}=this,a=s/2,l=i.height-n,c=i.width-e,{padding:u}=this.view;return o==="bottom-center"?{top:n+r-u.top,left:e-a-u.left}:o==="top-left"?{bottom:l+r-u.bottom,right:c+r-u.right}:o==="bottom-left"?{top:n+r-u.top,right:c+r-u.right}:o==="top-right"?{bottom:l+r-u.bottom,left:e+r-u.left}:o==="bottom-right"?{top:n+r-u.top,left:e+r-u.left}:o==="top-center"?{bottom:l+r-u.bottom,left:e-a-u.left}:void 0}_calculatePositionStyle(e,n){const{dockEnabled:i,view:s}=this;if(!s)return;if(i)return{left:"",top:"",right:"",bottom:""};if(ke(e)||!n)return;const o=this._calculateFullWidth(n),r=this._calculateAlignmentPosition(e.x,e.y,s,o);return r?{top:r.top!==void 0?`${r.top}px`:"auto",left:r.left!==void 0?`${r.left}px`:"auto",bottom:r.bottom!==void 0?`${r.bottom}px`:"auto",right:r.right!==void 0?`${r.right}px`:"auto"}:void 0}_viewChange(e,n){e&&n&&(this.close(),this.clear())}_viewReadyChange(e,n){if(e){const i=this.get("viewModel.view");this._wireUpView(i)}else n&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:n}=this;n&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,n,i){const[s,o]=e,[r,a]=n,{width:l,height:c}=i;return s<=l&&r>l||s>l&&r<=l||o<=c&&a>c||o>c&&a<=c}_updateDockEnabledForViewSize(e,n){if(!e||!n)return;const i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},s=i.left+i.right,o=i.top+i.bottom,r=[],a=[];r[0]=e[0]-s,r[1]=e[1]-o,a[0]=n[0]-s,a[1]=n[1]-o;const{dockOptions:l}=this,c=l.breakpoint;this._dockingThresholdCrossed(r,a,c)&&this._setDockEnabledForViewSize(l),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const n=e.querySelectorAll("li");n.length&&n[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const n=e.querySelectorAll("li");n.length&&n[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:n}=this;if(!n)return;const i=n.active&&!e;n.screenLocationEnabled=i}_shouldDockAtCurrentViewSize(e){var l,c;const n=e.breakpoint,i=(c=(l=this.viewModel)==null?void 0:l.view)==null?void 0:c.ui;if(!i)return!1;const{width:s,height:o}=i;if(isNaN(s)||isNaN(o))return!1;const r=n.hasOwnProperty("width")&&s<=n.width,a=n.hasOwnProperty("height")&&o<=n.height;return r||a}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,n){return this.featureNavigationVisible?Si(this.messages.pageText,{index:n+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:n}=this;e&&(n&&n.ui&&n.ui.remove(this._spinner,H2),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new G3({view:e}),e.ui.add(this._spinner,{key:H2,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const n=e.currentTarget.dataset.actionUid,{allActions:i}=this.viewModel,s=i.findIndex(r=>r.uid===n),o=i.getItemAt(s);o&&o.type==="toggle"&&(o.value=!o.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(s)}_selectFeature(e){const n=e.currentTarget["data-feature-index"];isNaN(n)||(this.viewModel.selectedFeatureIndex=n),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};v([b({readOnly:!0})],St.prototype,"actionsMenuId",null),v([b({readOnly:!0})],St.prototype,"actionsMenuButtonId",null),v([b({readOnly:!0})],St.prototype,"featureMenuId",null),v([b({readOnly:!0})],St.prototype,"titleId",null),v([b({readOnly:!0})],St.prototype,"contentId",null),v([b({readOnly:!0})],St.prototype,"hasContent",null),v([b({readOnly:!0})],St.prototype,"featureNavigationVisible",null),v([b({readOnly:!0})],St.prototype,"collapsible",null),v([b({readOnly:!0})],St.prototype,"featureMenuVisible",null),v([b({readOnly:!0})],St.prototype,"contentCollapsed",null),v([b({readOnly:!0})],St.prototype,"dividedActions",null),v([b({readOnly:!0,dependsOn:["_flowItems.length"]})],St.prototype,"_activeFlowItemWidget",null),v([b()],St.prototype,"actions",null),v([b()],St.prototype,"actionsMenuOpen",null),v([b()],St.prototype,"alignment",void 0),v([b()],St.prototype,"autoCloseEnabled",null),v([b()],St.prototype,"autoOpenEnabled",null),v([b()],St.prototype,"defaultPopupTemplateEnabled",null),v([b()],St.prototype,"content",null),v([b()],St.prototype,"collapsed",void 0),v([b()],St.prototype,"collapseEnabled",void 0),v([b({readOnly:!0})],St.prototype,"currentAlignment",null),v([b({readOnly:!0})],St.prototype,"currentDockPosition",null),v([b()],St.prototype,"dockOptions",null),v([b()],St.prototype,"dockEnabled",void 0),v([b({readOnly:!0})],St.prototype,"featureCount",null),v([b()],St.prototype,"featureMenuOpen",void 0),v([b()],St.prototype,"features",null),v([b()],St.prototype,"goToOverride",null),v([b()],St.prototype,"headingLevel",void 0),v([b()],St.prototype,"highlightEnabled",null),v([b()],St.prototype,"location",null),v([b()],St.prototype,"label",null),v([b()],St.prototype,"maxInlineActions",void 0),v([b(),rn("esri/widgets/Popup/t9n/Popup")],St.prototype,"messages",void 0),v([b(),rn("esri/t9n/common")],St.prototype,"messagesCommon",void 0),v([b()],St.prototype,"promises",null),v([b({readOnly:!0})],St.prototype,"selectedFeature",null),v([b()],St.prototype,"selectedFeatureIndex",null),v([b({readOnly:!0})],St.prototype,"selectedFeatureWidget",null),v([b()],St.prototype,"spinnerEnabled",void 0),v([b()],St.prototype,"title",null),v([b()],St.prototype,"updateLocationEnabled",null),v([b()],St.prototype,"view",null),v([b({type:eN}),Sh(["triggerAction","trigger-action"])],St.prototype,"viewModel",void 0),v([b()],St.prototype,"visible",null),v([b()],St.prototype,"visibleElements",void 0),v([ii("visibleElements")],St.prototype,"castVisibleElements",null),v([Sn()],St.prototype,"_close",null),v([Sn()],St.prototype,"_toggleDockEnabled",null),v([Sn()],St.prototype,"_toggleFeatureMenu",null),v([Sn()],St.prototype,"_toggleActionsMenu",null),v([Sn()],St.prototype,"_triggerAction",null),v([Sn()],St.prototype,"_selectFeature",null),v([Sn()],St.prototype,"_next",null),v([Sn()],St.prototype,"_previous",null),St=v([Ae("esri.widgets.Popup")],St);const j2=St,qw=[0,0];function iSe(t){const e=(t.ownerDocument||window.document).defaultView,n=t.getBoundingClientRect();return qw[0]=n.left+((e==null?void 0:e.pageXOffset)??0),qw[1]=n.top+((e==null?void 0:e.pageYOffset)??0),qw}function q2(t){t&&(XL(t),t.parentNode&&t.parentNode.removeChild(t))}function sSe(t){const e=document.createElement("div");return t.appendChild(e),e}const zh=16,Qg=750,oSe=512,rSe=2,aSe=t=>{let e=class extends t{constructor(...n){var i;super(...n),this._freqInfo={freq:zh,time:Qg},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,n.length!==0&&((i=n[0])==null?void 0:i.popup)!==void 0||(this.popup=new j2({view:this})),this.handles.add([ge(()=>this.cursor,s=>{const{surface:o}=this;o&&o.setAttribute("data-cursor",s)}),ge(()=>this.interacting,s=>{const{surface:o}=this;o&&o.setAttribute("data-interacting",s.toString())})])}initialize(){this.handles.add(ge(()=>this.ui,(n,i)=>this._handleUIChange(n,i))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=sn(this.ui),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(n){const i=this._get("container"),s=ZL(n),o=s instanceof HTMLDivElement?s:null;if(o||typeof n!="string"||Tt.getLogger(this.declaredClass).error("#container",`element with id '${n}' not found`),i===o)return;const r="dom-size";if(this.handles.remove(r),this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(q2(this.root),this._set("root",null)),this.userContent&&(rI(this.userContent,i),q2(this.userContent),this._set("userContent",null))),!o)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);o.classList.add("esri-view");const a=document.createElement("div");a.className="esri-view-user-storage",rI(o,a),o.appendChild(a),this._set("userContent",a);const l=document.createElement("div");l.className="esri-view-root",o.insertBefore(l,o.firstChild),this._set("root",l);const c=document.createElement("div");c.className="esri-view-surface",c.setAttribute("role","application"),c.tabIndex=0,l.appendChild(c),this._set("surface",c);const u=new r2;l.appendChild(u.surface),this._set("overlay",u),ge(()=>u.needsRender,d=>{d&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=$p({render:()=>{var h;return(h=this.overlay)==null?void 0:h.render()}}):this._overlayRenderTaskHandle=Bi(this._overlayRenderTaskHandle)}),this.forceDOMReadyCycle(),this.handles.add(ge(()=>this.size,d=>{const[h,f]=d,m="esri-view-surface--inset-outline";h>=document.body.clientWidth||f>=document.body.clientHeight?c.classList.add(m):c.classList.remove(m)},gt),r),this._set("container",o),this._startMeasuring()}get focused(){const n=document.activeElement===this.surface;return document.hasFocus()&&n}set popup(n){const i=this._get("popup");i&&i!==n&&i.destroy(),this._set("popup",n)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(n,i,s){const o=this.position;return n-=o?o[0]:0,i-=o?o[1]:0,s?(s[0]=n,s[1]=i):s=[n,i],s}containerToPage(n,i,s){const o=this.position;return n+=o?o[0]:0,i+=o?o[1]:0,s?(s[0]=n,s[1]=i):s=[n,i],s}_handleUIChange(n,i){i&&(this.handles.remove("ui"),i.destroy()),n&&this._wireUI(n),this._set("ui",n)}_wireUI(n){this.handles.remove("ui"),n&&(n.view=this,this.handles.add([ge(()=>this.root,i=>{n.container=i?sSe(i):null},gt),ge(()=>this.popup,(i,s)=>{const o="popup",r="manual";s&&n.remove(s,o),i&&(i.view=n.view,n.add(i,{key:o,position:r}))},gt)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const n=this._freqInfo;n.freq=zh,n.time=Qg,this.handles.add([(()=>{const i=()=>{n.freq=zh,n.time=Qg};return window.addEventListener("resize",i),{remove(){window.removeEventListener("resize",i)}}})(),$p({prepare:i=>{const s=this._measure(),o=this._freqInfo;if(o.time+=i.deltaTime,s&&(o.freq=zh,this._get("resizing")||this._set("resizing",!0)),o.time<o.freq)return;o.time=0;const r=this._position();o.freq=r||s?zh:Math.min(Qg,o.freq*rSe),!s&&o.freq>=oSe&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const n=this.container,i=n?n.clientWidth:0,s=n?n.clientHeight:0;if(i===0||s===0)return this.suspended||this._set("suspended",!0),!1;const o=this.width,r=this.height;return i===o&&s===r?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:r,width:i,height:s}),!0)}_position(){const n=this.container,i=this.position,s=n&&iSe(n);return!!s&&(!i||s[0]!==i[0]||s[1]!==i[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return v([b()],e.prototype,"container",null),v([b({readOnly:!0})],e.prototype,"focused",null),v([b({readOnly:!0})],e.prototype,"height",void 0),v([b({type:j2})],e.prototype,"popup",null),v([b({type:r2})],e.prototype,"overlay",void 0),v([b({readOnly:!0})],e.prototype,"position",void 0),v([b({readOnly:!0})],e.prototype,"resizing",void 0),v([b({readOnly:!0})],e.prototype,"root",void 0),v([b({value:null,readOnly:!0})],e.prototype,"size",null),v([b({readOnly:!0})],e.prototype,"surface",void 0),v([b({readOnly:!0})],e.prototype,"suspended",void 0),v([b()],e.prototype,"ui",void 0),v([b({readOnly:!0})],e.prototype,"userContent",void 0),v([b({readOnly:!0})],e.prototype,"width",void 0),v([b()],e.prototype,"widthBreakpoint",void 0),e=v([Ae("esri.views.DOMContainer")],e),e},lSe=t=>{let e=class extends t{async fetchPopupFeatures(n,i){await this.when();const{location:s,queryArea:o,layerViewsAndGraphics:r,clientOnlyGraphics:a}=await this._prepareFetchPopupFeatures(n,i),l=Promise.resolve(a),c=this._queryLayerPopupFeatures(o,r,i),u=c.map(d=>d.promise);return{location:s,clientOnlyGraphics:a,allGraphicsPromise:VL([l,...u]).then(d=>Array.from(new Set(d.flat()))),promisesPerLayerView:c}}_queryLayerPopupFeatures(n,i,s){return i.map(({layerView:o,graphics:r})=>{const a={clientGraphics:r,event:q(s)?s.event:null,signal:q(s)?s.signal:null,defaultPopupTemplateEnabled:!!q(s)&&!!s.defaultPopupTemplateEnabled},l=o.fetchPopupFeatures(n,a);return{layerView:o,promise:l}})}_isValidPopupGraphic(n,i){return n&&!!n.getEffectivePopupTemplate(q(i)&&i.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(n,i){const{clientGraphics:s,queryArea:o,location:r}=await this._popupHitTestGraphics(n,i),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:l,clientOnlyGraphics:c}=this._graphicsPerFetchPopupLayerView(s,a);return{clientOnlyGraphics:c,layerViewsAndGraphics:l,queryArea:o,location:r}}async _popupHitTestGraphics(n,i){const{results:s,mapPoint:o}=await this.popupHitTest(n),r=s.filter(l=>l.type==="graphic"&&this._isValidPopupGraphic(l.graphic,i)),a=r.length?r[0].mapPoint:null;return{clientGraphics:r.map(l=>l.graphic),queryArea:o,location:o||a}}_getFetchPopupLayerViews(){const n=[];return this.allLayerViews.forEach(i=>{this._isValidPopupLayerView(i)&&n.push(i)}),q(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&n.push(this.graphicsView),n.reverse()}_isValidPopupLayerView(n){return q(n)&&(!("layer"in n)||!n.suspended)&&"fetchPopupFeatures"in n}_graphicsPerFetchPopupLayerView(n,i){const s=[],o=new Map,r=i.map(a=>{const l=[];return"layer"in a?o.set(a.layer,l):o.set(a.graphics,l),{layerView:a,graphics:l}});for(const a of n){const l=o.get(a.layer)||o.get(a.sourceLayer)||null;l?l.push(a):s.push(a)}return{layerViewsAndGraphics:r,clientOnlyGraphics:s}}};return e=v([Ae("esri.views.PopupView")],e),e};let hb=class extends wB{constructor(e){super(e),this.handles.add(this.on("before-add",n=>{ke(n.item)||n.item.parent===this.owner&&(Tt.getLogger(this.declaredClass).warn("Analysis inside the collection must be unique. Not adding this element again."),n.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};hb=v([Ae("esri.support.AnalysesCollection")],hb);let Ll=class extends dt{constructor(e){super(e),this.view=null,this.baseLayerViews=new Ht,this.referenceLayerViews=new Ht,this._loadingHandle=ge(()=>{var n,i;return(i=(n=this.view)==null?void 0:n.map)==null?void 0:i.basemap},n=>{n&&n.load().catch(()=>{})},gt)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var n,i;if(this.view&&this.view.suspended)return!1;const e=(i=(n=this.view)==null?void 0:n.map)==null?void 0:i.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(s=>s.updating)||this.referenceLayerViews.some(s=>s.updating))}};v([b({constructOnly:!0})],Ll.prototype,"view",void 0),v([b({readOnly:!0})],Ll.prototype,"baseLayerViews",void 0),v([b({readOnly:!0})],Ll.prototype,"referenceLayerViews",void 0),v([b({readOnly:!0})],Ll.prototype,"suspended",null),v([b({type:Boolean,readOnly:!0})],Ll.prototype,"updating",null),Ll=v([Ae("esri.views.BasemapView")],Ll);let cSe=class{constructor(e,n,i){this.layer=e,this.view=n,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=FL(),this._started=!1,this.done=!1,$y(this._controller.signal,()=>{const s=new Ue("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(s)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:e}=this;if(!e)return;const{layer:n,view:i}=this;n.emit("layerview-destroy",{view:i,layerView:e}),i.emit("layerview-destroy",{layer:n,layerView:e}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){var s,o;if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:n,view:i}=this;this._map=i.map;try{let r,a;if(await n.load({signal:e}),"prefetchResources"in n&&await n.prefetchResources({signal:e}),n.createLayerView)r=await n.createLayerView(i,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(n))throw new Ue("layer:view-not-supported","No layerview implementation was found");const u=await this.layerViewImporter.importLayerView(n);xs(e),r="default"in u?new u.default({layer:n,view:i}):new u({layer:n,view:i})}const l=()=>{a=Bi(a),r.destroyed||r.destroy(),r.layer=null,r.parent=null,r.view=null,this.done=!0};a=$y(e,l),xs(e);try{await r.when()}catch(u){throw l(),u}if(!((o=(s=this._map)==null?void 0:s.allLayers)==null?void 0:o.includes(n)))return l(),void this._deferred.reject(new Ue("view:no-layerview-for-layer","The layer has been removed from the map",{layer:n}));this.layerView=r,n.emit("layerview-create",{view:i,layerView:r}),i.emit("layerview-create",{layer:n,layerView:r}),this.done=!0,this._deferred.resolve(r)}catch(r){n.emit("layerview-create-error",{view:i,error:r}),i.emit("layerview-create-error",{layer:n,error:r}),this.done=!0,this._deferred.reject(new Ue("layerview:create-error","layerview creation failed",{layer:n,error:r}))}}},Mo=class extends dt{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new NS,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i;const n=(i=this.view.map)==null?void 0:i.allLayers;if(n)for(const s of n)this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>(ke(this._workPromise)&&(this._workPromise=FL(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(K5(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var a,l,c;const n=this.view.map;if(this._map!==n&&(this.clear(),this._map=n),ke(this._workPromise))return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=[],s=u=>{if(!ke(u))for(const d of u)d&&(i.push(d),this._createLayerView(d),"layers"in d&&d.layers&&s(d.layers))};for(const u of this._rootCollectionNames)s(this.get(u));this._refreshCollections();for(const[u,d]of this._layerLayerViewInfoMap)i.includes(u)||(this._layerLayerViewInfoMap.delete(d.layer),d.destroy());const o=i.filter(u=>u.type==="group").map(u=>u.layers),r=[(a=n==null?void 0:n.ground)==null?void 0:a.layers,(l=n==null?void 0:n.basemap)==null?void 0:l.baseLayers,(c=n==null?void 0:n.basemap)==null?void 0:c.referenceLayers,n==null?void 0:n.layers,...o].filter(u=>!!u);this.addHandles(r.map(u=>this._watchUpdatingTracking.addOnCollectionChange(()=>u,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([Dn(()=>{var e,n;return(n=(e=this.view)==null?void 0:e.map)==null?void 0:n.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),ge(()=>{const e=this.view,n=e==null?void 0:e.map;return[n==null?void 0:n.basemap,n==null?void 0:n.ground,n==null?void 0:n.layers,e==null?void 0:e.ready]},()=>this._reschedule(),us)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null,q(this._workPromise)&&(this._workPromise.reject(Op()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return q(this._workPromise)||this._watchUpdatingTracking.updating||Ym(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const n of this._layerLayerViewInfoMap.values())n.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e))throw new Ue("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,n]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(n),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,n,i){if(!e||!n)return void(n&&n.removeAll());let s=0;for(const o of e){const r=this._layerLayerViewInfoMap.get(o);if(!r||!r.layerView)continue;const a=r.layerView;a.layer=o,a.parent=i,n.getItemAt(s)!==a&&n.splice(s,0,a),o.layers&&this._populateLayerViewsOwners(o.layers,a.layerViews,a),s+=1}s<n.length&&n.splice(s,n.length)}_createLayerView(e){if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const n=new cSe(e,this.view,this.layerViewImporter);n.promise.then(()=>this._refreshCollections(),i=>{i&&(gc(i)||i.name==="cancelled:layerview-create")||Tt.getLogger(this.declaredClass).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,n),this.view.ready&&n.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};v([b()],Mo.prototype,"_workPromise",void 0),v([b({readOnly:!0})],Mo.prototype,"_watchUpdatingTracking",void 0),v([b({readOnly:!0})],Mo.prototype,"_layersToLayerViews",null),v([b({readOnly:!0})],Mo.prototype,"_rootCollectionNames",null),v([b()],Mo.prototype,"layerViewImporter",void 0),v([b()],Mo.prototype,"supportsGround",void 0),v([b({readOnly:!0})],Mo.prototype,"updating",null),v([b({readOnly:!0})],Mo.prototype,"updatingRemaining",null),v([b({constructOnly:!0})],Mo.prototype,"view",void 0),Mo=v([Ae("esri.views.LayerViewManager")],Mo);const uSe=Mo;let ao=class extends dt{constructor(e){super(e),this.factor=1.5,this.offset=hi(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};v([b({type:Number})],ao.prototype,"factor",void 0),v([b({nonNullable:!0})],ao.prototype,"offset",void 0),v([b()],ao.prototype,"position",void 0),v([b({type:Number,range:{min:0}})],ao.prototype,"size",void 0),v([b()],ao.prototype,"maskUrl",void 0),v([b()],ao.prototype,"maskEnabled",void 0),v([b()],ao.prototype,"overlayUrl",void 0),v([b()],ao.prototype,"overlayEnabled",void 0),v([b({readOnly:!0})],ao.prototype,"version",null),v([b({type:Boolean})],ao.prototype,"visible",void 0),ao=v([Ae("esri.views.Magnifier")],ao);const tN=ao;let rf=class extends dt{constructor(e,n){super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(n==null?void 0:n.registerTask(Pb.TEXTURE_UNLOAD))??qS}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,n,i){const s=this.makeUid(e);let o=this._textureRequests.get(s);return o||(o={referenceCount:0,texture:n(),textureAsync:null,abortController:null,onRemove:i},this._stage&&(this._stage.add(o.texture),this._stage.loadImmediate(o.texture)),this._textureRequests.set(s,o)),o.referenceCount++,{uid:s,texture:o.texture,release:()=>this._release(s)}}_release(e){const n=this._textureRequests.get(e);n?(n.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),n.referenceCount--,n.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const n=this._textureRequests.get(e);!n||n.referenceCount>0||(this._releaseTextureRequest(n),this._textureRequests.delete(e))}_releaseTextureRequest(e){var n;e.onRemove&&e.onRemove(),e.texture?(n=this._stage)==null||n.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,n=null){return q(n)?`${e}.${n}px`:e}};v([b()],rf.prototype,"_frameTask",void 0),v([b()],rf.prototype,"updating",null),rf=v([Ae("esri.views.3d.support.TextureCollection")],rf);var K2;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(K2||(K2={}));const nN=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],iN={};function sN(t){return!!iN[t]}function dSe(t){for(const e of t)if(!sN(e))return!1;return!0}nN.forEach(t=>{iN[t]=!0});let pSe=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:n,priority:i},s)=>this.inputManager.installHandlers(s,[n],i))}disconnect(){this.inputManager&&this._handlers.forEach((e,n)=>this.inputManager.uninstallHandlers(n)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,n,i,s){const o=Array.isArray(e)?e:e.split(",");if(!dSe(o))return o.some(sN)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let r,a;Array.isArray(n)?a=n:(r=n,a=[]),typeof i=="function"?r=i:s=i,s=s??nt.DEFAULT;const l=this._createUniqueGroupName(),c=new hSe(this.view,o,a,r);this._handlers.set(l,{handler:c,priority:s});for(const u of o){const d=this._handlerCounts.get(u)||0;this._handlerCounts.set(u,d+1)}return this.inputManager&&this.inputManager.installHandlers(l,[c],s),{remove:()=>this._removeHandler(l,o)}}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,n){if(this._handlers.has(e)){this._handlers.delete(e);for(const i of n){const s=this._handlerCounts.get(i);s===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",i):s===1?this._handlerCounts.delete(i):this._handlerCounts.set(i,s-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},hSe=class extends Oi{constructor(e,n,i,s){super(!0),this.view=e;for(const o of n)switch(o){case"click":this.registerIncoming("click",i,r=>s(this._wrapClick(r)));break;case"double-click":this.registerIncoming("double-click",i,r=>s(this._wrapDoubleClick(r)));break;case"immediate-click":this.registerIncoming("immediate-click",i,r=>s(this._wrapImmediateClick(r)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,r=>s(this._wrapImmediateDoubleClick(r)));break;case"hold":this.registerIncoming("hold",i,r=>s(this._wrapHold(r)));break;case"drag":this.registerIncoming("drag",i,r=>{const a=this._wrapDrag(r);a&&s(a)});break;case"key-down":this.registerIncoming("key-down",i,r=>s(this._wrapKeyDown(r)));break;case"key-up":this.registerIncoming("key-up",i,r=>s(this._wrapKeyUp(r)));break;case"pointer-down":this.registerIncoming("pointer-down",i,r=>s(this._wrapPointer(r,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,r=>s(this._wrapPointer(r,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,r=>s(this._wrapPointer(r,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,r=>s(this._wrapPointerDrag(r)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,r=>s(this._wrapMouseWheel(r)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,r=>s(this._wrapPointer(r,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,r=>s(this._wrapPointer(r,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,r=>{s(this._wrapGamepad(r))});break;case"focus":this.registerIncoming("focus",i,r=>{s(this._wrapFocus(r))});break;case"blur":this.registerIncoming("blur",i,r=>{s(this._wrapBlur(r))})}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:n=>e.async(n),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:n=>e.async(n),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:n,button:i,buttons:s,x:o,y:r,native:a,eventId:l}=e.data,{cancelable:c,timestamp:u}=e;return{type:"click",pointerType:n,button:i,buttons:s,x:o,y:r,native:a,timestamp:u,screenPoint:hi(o,r),mapPoint:this._getMapPoint(o,r),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),async:d=>e.async(d),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:n,button:i,buttons:s,x:o,y:r,native:a,eventId:l}=e.data,{cancelable:c,timestamp:u}=e;return{type:"double-click",pointerType:n,button:i,buttons:s,x:o,y:r,native:a,timestamp:u,mapPoint:this._getMapPoint(o,r),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),async:d=>e.async(d),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:n,button:i,buttons:s,x:o,y:r,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:u,timestamp:d}=e;return{type:"immediate-click",pointerId:c,pointerType:n,button:i,buttons:s,x:o,y:r,native:a,timestamp:d,mapPoint:this._getMapPoint(o,r),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:h=>e.async(h),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:n,button:i,buttons:s,x:o,y:r,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:u,timestamp:d}=e;return{type:"immediate-double-click",pointerId:c,pointerType:n,button:i,buttons:s,x:o,y:r,native:a,timestamp:d,mapPoint:this._getMapPoint(o,r),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:h=>e.async(h),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:n,button:i,buttons:s,x:o,y:r,native:a}=e.data,{cancelable:l,timestamp:c}=e;return{type:"hold",pointerType:n,button:i,buttons:s,x:o,y:r,native:a,timestamp:c,mapPoint:this._getMapPoint(o,r),cancelable:l,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,n){return this.view.toMap(hi(e,n),{exclude:[]})}_wrapDrag(e){const n=e.data,{x:i,y:s}=n.center,{action:o,pointerType:r,button:a}=n;if(o==="start"&&(this._latestDragStart=n),!this._latestDragStart)return;const l=n.pointer.native,c=n.buttons,{cancelable:u,timestamp:d}=e,h={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return o==="end"&&(this._latestDragStart=void 0),{type:"drag",action:o,x:i,y:s,origin:h,pointerType:r,button:a,buttons:c,radius:n.radius,angle:qL(n.angle),native:l,timestamp:d,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:n,repeat:i,native:s}=e.data,{cancelable:o,timestamp:r}=e;return{type:"key-down",key:n,repeat:i,native:s,timestamp:r,cancelable:o,stopPropagation:()=>e.stopPropagation(),async:a=>e.async(a),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:n,native:i}=e.data,{cancelable:s,timestamp:o}=e;return{type:"key-up",key:n,native:i,timestamp:o,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:r=>e.async(r),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,n){const{x:i,y:s,button:o,buttons:r,native:a,eventId:l}=e.data,c=a.pointerId,u=a.pointerType,{cancelable:d,timestamp:h}=e;return{type:n,x:i,y:s,pointerId:c,pointerType:u,button:o,buttons:r,native:a,timestamp:h,eventId:l,cancelable:d,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:n,y:i,buttons:s,native:o,eventId:r}=e.data.currentEvent,{button:a}=e.data.startEvent,l=e.data.startEvent.native.pointerId,c=e.data.startEvent.native.pointerType,u=e.data.action,d={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:h,timestamp:f}=e;return{type:"pointer-drag",x:n,y:i,pointerId:l,pointerType:c,button:a,buttons:s,action:u,origin:d,native:o,timestamp:f,eventId:r,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:n,data:i,timestamp:s}=e,{x:o,y:r,deltaY:a,native:l}=i;return{type:"mouse-wheel",x:o,y:r,deltaY:a,native:l,timestamp:s,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:c=>e.async(c),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:n,state:i,device:s}=e.data,{cancelable:o,timestamp:r}=e,{buttons:a,axes:l}=i;return{type:"gamepad",device:s,timestamp:r,action:n,buttons:a,axes:l,cancelable:o,stopPropagation:()=>e.stopPropagation(),async:c=>e.async(c),preventDefault:()=>e.preventDefault()}}};var Do,Y2,Z2;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(Do||(Do={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(Y2||(Y2={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(Z2||(Z2={}));function fSe(t){return[t.on("before-add",e=>{const n=e.item;if(n==null||t.includes(n))return Tt.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();n.onAdd()}),t.on("after-remove",e=>{const n=e.item;n.active&&(n.view.activeTool=null),n.destroy()})]}function PC(t){return t.visible&&t.getEditableFlag(Do.USER)&&t.getEditableFlag(Do.MANAGER)}function In(t){return hi(t.x,t.y)}function oN(t,e){const n=(t instanceof HTMLElement?t:t.surface).getBoundingClientRect();return hi(e.clientX-n.left,e.clientY-n.top)}function X2(t,e){return e instanceof Event?oN(t,e):In(e)}function Q2(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let mSe=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(e,n){const i=()=>e.stopPropagation();switch(e.type){case"pointer-move":J2(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(i(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!eA(e))break;const s=In(e),o=this._intersect(s,e.pointerType,n.forEachTool);if(ke(o))break;const r=o.manipulator,a=o.tool;!(q(r)&&q(a)&&r.interactive)||r.grabbable&&r.grabbableForEvent(e)||!r.grabbing||r.dragging||this._ungrabManipulatorBeforeDragging(r,e,n),q(r)&&q(a)&&r.interactive&&r.grabbable&&r.grabbableForEvent(e)&&!r.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:r,tool:a,start:s,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&ke(n.activeTool)&&(this._revertToNullActiveTool=!0,n.setActiveTool(o.tool)),r.grabbing=!0,r.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:s}),i());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,n);break;case"pointer-drag":{if(!eA(e))break;const s=this._grabbedManipulators.get(e.pointerId),o=Ha(s,({manipulator:u})=>u),r=Ha(s,({tool:u})=>u);if(ke(o)||ke(r))break;const a=In(e);a.x=bc(a.x,0,n.view.width),a.y=bc(a.y,0,n.view.height);const l=zt(s).start,c=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(o.dragging=!0,c?o.events.emit("drag",{action:"update",start:l,screenPoint:a}):o.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:r,manipulator:o,start:l}));break;case"end":o.dragging=!1,c&&o.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,n)}i();break}case"immediate-click":{const s=In(e),o=this._intersect(s,e.pointerType,n.forEachTool);if(gSe(e)||n.forEachTool(c=>{if((!q(o)||o.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let u=!1;c.manipulators.forEach(({manipulator:d})=>{d.selected&&(d.selected=!1,u=!0)}),u&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}}),ke(o))break;const{manipulator:r,tool:a}=o;if(!r.interactive)break;r.selectable&&a.automaticManipulatorSelection&&(r.selected=!r.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=e.native.shiftKey;r.events.emit("immediate-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:i});break}case"click":{const s=In(e),o=this._intersect(s,e.pointerType,n.forEachTool),r=q(o)?o.manipulator:null;if(ke(r)||!r.interactive)break;const a=e.native.shiftKey;r.events.emit(e.type,{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:a}),i();break}case"double-click":{const s=In(e),o=this._intersect(s,e.pointerType,n.forEachTool),r=q(o)?o.manipulator:null;if(ke(r)||!r.interactive)break;const a=e.native.shiftKey;r.events.emit("double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:i});break}case"immediate-double-click":{const s=In(e),o=this._intersect(s,e.pointerType,n.forEachTool),r=q(o)?o.manipulator:null;if(ke(r)||!r.interactive)break;const a=e.native.shiftKey;r.events.emit("immediate-double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:i});break}}this._onFocusChange(n.forEachTool)}_ungrabManipulatorBeforeDragging(e,n,i){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:n.pointerType,screenPoint:In(n)}),this._grabbedManipulators.forEach(({manipulator:s},o)=>{s===e&&this._grabbedManipulators.delete(o)}),this._afterManipulatorUngrab(i.setActiveTool)}_handlePointerEnd(e,n){const i=Ha(this._grabbedManipulators.get(e.pointerId),({manipulator:s})=>s);ke(i)||i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:In(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorUngrab(n.setActiveTool))}_cursorFromMap(e){let n=null;return Ym(e,({manipulator:i})=>!(ke(i)||!i.interactive)&&(i.grabbing&&i.grabCursor?(n=i.grabCursor,!0):!!i.cursor&&(n=i.cursor,!0))),n}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const n=new Set,i=new Set;this._grabbedManipulators.forEach(({tool:s})=>{n.add(s)}),this._hoveredManipulators.forEach(({tool:s})=>{i.add(s)}),e(s=>{s.hasGrabbedManipulators=n.has(s),s.hasHoveredManipulators=i.has(s);const o=this._grabbedManipulators.values(),r=Y5(o,({tool:a})=>a===s);s.firstGrabbedManipulator=q(r)?r.manipulator:null})}clearPointers(e,{forEachTool:n,setActiveTool:i},s=!0,o){const r=(a,l)=>a===e&&(ke(o)||o===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:c},u)=>{r(a,l)&&(this._grabbedManipulators.delete(u),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},c)=>{r(a,l)&&(this._draggedManipulators.delete(c),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},c)=>{r(a,l)&&(this._hoveredManipulators.delete(c),l.hovering=!1)}),this._afterManipulatorUngrab(i),this._onFocusChange(n)}_intersect(e,n,i){let s=null;return i(o=>{if(o.manipulators==null||!PC(o))return!1;const r=o.manipulators.intersect(e,n);return!ke(r)&&(s={tool:o,manipulator:r},!0)}),s}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((n,i)=>{this._updateHoveredStateForPointerAtScreenPosition(hi(n.x,n.y),i,n.pointerType,e)})}handleHoverEvent(e,n){e.type!=="pointer-up"&&e.type!=="immediate-click"&&e.type!=="pointer-move"||!J2(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(In(e),e.pointerId,e.pointerType,n)}_updateHoveredStateForPointerAtScreenPosition(e,n,i,s){let o=this._intersect(e,i,s);const r=Ha(this._hoveredManipulators.get(n),({manipulator:a})=>a);q(o)&&!o.manipulator.interactive&&(o=null),q(o)&&r===o.manipulator||(q(r)&&(r.hovering=!1),q(o)?(o.manipulator.hovering=!0,this._hoveredManipulators.set(n,o)):this._hoveredManipulators.delete(n),this._onFocusChange(s))}_afterManipulatorUngrab(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}};function J2(t){return t==="mouse"}function eA(t){return t.pointerType!=="mouse"||t.button===0}function gSe(t){return!!t.native.shiftKey}const tA="attached",Kw="tools";let Ta=class extends Zm{constructor(e){super(e),this._manipulatorState=new mSe,this.tools=new Ht,this.cursor=null,this._forEachTool=n=>{for(const i of this.tools.items)if(n(i))return}}initialize(){this.handles.add([this.view.on(nN,e=>{this._handleInputEvent(e)},nt.TOOL),...fSe(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(q(e)&&!this.view.ready)return void Tt.getLogger(this.declaredClass).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const n=this.activeTool;this._set("activeTool",e),q(n)&&n.deactivate(),q(e)&&e.activate(),this._removeIncompleteTools(e);for(const i of this.tools){this._updateToolEditableFlag(i);const s=PC(i);!ke(this.activeTool)&&s||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!s)}this._updateCursor()}get updating(){var e;return this.updatingHandles.updating||this.tools.some(n=>n.updating)||(((e=this.textures)==null?void 0:e.updating)??!1)}attach(){this.view.type==="3d"?(this._set("textures",new rf(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([ge(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}),this.view.elevationProvider.on("elevation-change",e=>{this._forEachManipulator(n=>{n.onElevationChange!=null&&n.onElevationChange(e)})}),lc(()=>this._set("textures",sn(this.textures)))],tA)):this.handles.add(ge(()=>this.view.extent,()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}))}detach(){q(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(tA)}_forEachManipulator(e){this._forEachTool(n=>{n.manipulators&&n.manipulators.forEach(({manipulator:i})=>e(i,n))})}_handleInputEvent(e){let n=!1;const i={...e,stopPropagation:()=>{n=!0,e.stopPropagation()}};q(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(s=>{!n&&s.visible&&s.handleInputEvent(i)}),!n&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),!n&&q(this.activeTool)&&this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(Kw),this._forEachTool(e=>{if(e instanceof dt){const n=ge(()=>[e.cursor,e.visible,e.editable],()=>{PC(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(n,Kw)}e.manipulators&&this.handles.add([e.manipulators.on("after-remove",n=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,n.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],Kw)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){e.setEditableFlag(Do.MANAGER,ke(this.activeTool)||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;ke(e)&&this._forEachTool(n=>!(!q(n.cursor)||!n.visible)&&(e=n.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(n=>(ke(e)||n!==e)&&!n.created&&n.removeIncompleteOnCancel).forEach(n=>{this.tools.remove(n)})}};v([b({constructOnly:!0,nonNullable:!0})],Ta.prototype,"view",void 0),v([b({readOnly:!0,nonNullable:!0})],Ta.prototype,"textures",void 0),v([b({value:null})],Ta.prototype,"activeTool",null),v([b({readOnly:!0,type:Ht})],Ta.prototype,"tools",void 0),v([b({readOnly:!0})],Ta.prototype,"cursor",void 0),v([b({readOnly:!0})],Ta.prototype,"updating",null),Ta=v([Ae("esri.views.ToolViewManager")],Ta);const vSe=Ta;let Ld=class extends dt{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":ySe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return bSe[this.deviceType]}};v([b({nonNullable:!0,readOnly:!0})],Ld.prototype,"nativeIndex",void 0),v([b({type:String,readOnly:!0})],Ld.prototype,"deviceType",null),v([b({type:Number,readOnly:!0})],Ld.prototype,"axisThreshold",null),Ld=v([Ae("esri.views.input.gamepad.GamepadInputDevice")],Ld);const ySe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),bSe={standard:.15,spacemouse:.025,unknown:0},cT=Ld;let af=class extends dt{constructor(...e){super(...e),this.devices=new Ht,this.enabledFocusMode="document"}};v([b({type:Ht.ofType(cT),readOnly:!0})],af.prototype,"devices",void 0),v([b({type:["document","view","none"]})],af.prototype,"enabledFocusMode",void 0),af=v([Ae("esri.views.input.gamepad.GamepadSettings")],af);const _Se=af;let cy=class extends dt{constructor(){super(...arguments),this.gamepad=new _Se}};v([b({readOnly:!0})],cy.prototype,"gamepad",void 0),cy=v([Ae("esri.views.input.Input")],cy);const wSe=cy;let Ol=class extends dt{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};v([b({type:Boolean,nonNullable:!0})],Ol.prototype,"enabled",void 0),v([b({type:cT})],Ol.prototype,"device",void 0),v([b({type:["pan","zoom"],nonNullable:!0})],Ol.prototype,"mode",void 0),v([b({type:["forward-down","forward-up"],nonNullable:!0})],Ol.prototype,"tiltDirection",void 0),v([b({type:Number,nonNullable:!0})],Ol.prototype,"velocityFactor",void 0),Ol=v([Ae("esri.views.navigation.gamepad.GamepadSettings")],Ol);const rN=Ol;let Zc=class extends dt{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new rN,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};v([b({type:Boolean})],Zc.prototype,"browserTouchPanEnabled",void 0),v([b({type:rN,nonNullable:!0})],Zc.prototype,"gamepad",void 0),v([b({type:Boolean})],Zc.prototype,"momentumEnabled",void 0),v([b({type:Boolean})],Zc.prototype,"mouseWheelZoomEnabled",void 0),Zc=v([Ae("esri.views.navigation.Navigation")],Zc);const aN=Zc;function VRe(t,e,n){const i=lN(t),s=e,o=CSe(i,s,n);if(i){const r=Rb.deriveUnitFromSR(i,t.spatialReference).heightUnit;if(!n&&r!==i.heightUnit){const a=new Ue("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${r})`,{horizontalUnit:r});return new Ue("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:i,error:a})}}if(!SSe(t)||o===Ks.Unsupported)return new Ue("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:i});switch(o){case Ks.Units:{const r=(i==null?void 0:i.heightUnit)||"unknown",a=(s==null?void 0:s.heightUnit)||"unknown",l=new Ue("layerview:incompatible-height-unit",`The vertical units of the layer (${r}) must match the vertical units of the scene (${a})`,{layerUnit:r,sceneUnit:a});return new Ue("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:s,error:l})}case Ks.HeightModel:{const r=(i==null?void 0:i.heightModel)||"unknown",a=(s==null?void 0:s.heightModel)||"unknown",l=new Ue("layerview:incompatible-height-model",`The height model of the layer (${r}) must match the height model of the scene (${a})`,{layerHeightModel:r,sceneHeightModel:a});return new Ue("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:s,error:l})}case Ks.CRS:{const r=(i==null?void 0:i.vertCRS)||"unknown",a=(s==null?void 0:s.vertCRS)||"unknown",l=new Ue("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${r}) must match the vertical datum of the scene (${a})`,{layerDatum:r,sceneDatum:a});return new Ue("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:s,error:l})}}return null}function CSe(t,e,n){if(!nA(t)||!nA(e))return Ks.Unsupported;if(t==null||e==null)return Ks.Ok;if(!n&&t.heightUnit!==e.heightUnit)return Ks.Units;if(t.heightModel!==e.heightModel)return Ks.HeightModel;switch(t.heightModel){case"gravity-related-height":return Ks.Ok;case"ellipsoidal":return t.vertCRS===e.vertCRS?Ks.Ok:Ks.CRS;default:return Ks.Unsupported}}var Ks;function nA(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function SSe(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!dN(t)}function lN(t){var i;const e=t.url?Tv(t.url):void 0;return!(((i=t.spatialReference)==null?void 0:i.vcsWkid)==null&&q(e)&&e.serverType==="ImageServer")&&cN(t)&&t.heightModelInfo?t.heightModelInfo:dN(t)?Rb.deriveUnitFromSR(kSe,t.spatialReference):null}function cN(t){return"heightModelInfo"in t}function uN(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":return!0;default:return!1}}function dN(t){return uN(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):pN(t)}function ESe(t){return t.layers!=null||pN(t)||uN(t)||cN(t)}function pN(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(Ks||(Ks={}));const kSe=new Rb({heightModel:"gravity-related-height"});let RC,Yw=null;async function TSe(t){Yw||(Yw=Fe(()=>import("./geometryServiceUtils-abbabb11.js"),["./geometryServiceUtils-abbabb11.js","./Error-57322e92.js","./string-480f3e3f.js","./typedArrayUtil-d9bc5fbd.js","./Portal-c6e03126.js","./preload-helper-41c905a7.js","./cast-a534ae90.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./request-24011425.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./Extent-a1a1de42.js","./locale-30120714.js","./PortalGroup-d495847c.js","./jsonMap-190c5593.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./Polyline-b571c705.js","./normalizeUtils-0f537694.js","./geometry-eec1b371.js","./typeUtils-cd52dc20.js"],import.meta.url).then(e=>RC=e)),await Yw,xs(t)}async function hN(t,e,n,i){if(!t)return null;const s=t.spatialReference;return Gu()||lh(s,e)?fr(t,e):RC?RC.projectGeometry(t,e,n,i):(await Promise.race([TSe(i),ch(i)]),hN(t,e,n,i))}let _n=class extends dt{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Kr(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return q(this.userSpatialReference)?this.userSpatialReference:zt(this._spatialReferenceTask.spatialReference)}get extent(){return zt(this._extentTask.extent)}get heightModelInfo(){return zt(this._heightModelInfoTask.heightModelInfo)}get vcsWkid(){return zt(this._heightModelInfoTask.vcsWkid)}get latestVcsWkid(){return zt(this._heightModelInfoTask.latestVcsWkid)}get viewingMode(){return ke(this.userSpatialReference)||this.userSpatialReference.equals(zt(this._spatialReferenceTask.spatialReference))?zt(this._spatialReferenceTask.viewingMode):null}get tileInfo(){return zt(this._tileInfoTask.tileInfo)}get mapCollections(){var i,s,o,r;const e=(i=this.map)==null?void 0:i.call(this),n=[];return q(this.priorityCollection)&&n.push(this.priorityCollection),n.push({parent:e==null?void 0:e.basemap,layers:(s=e==null?void 0:e.basemap)==null?void 0:s.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(o=e==null?void 0:e.ground)==null?void 0:o.layers},{parent:e==null?void 0:e.basemap,layers:(r=e==null?void 0:e.basemap)==null?void 0:r.referenceLayers}),n}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:n}=this._allLayers;let i=null;for(const o of e){const r=this._getSupportedSpatialReferences(o);if(r.length>0){const a=this._narrowDownSpatialReferenceCandidates(i,r);q(a)&&(i=a)}if(q(i)&&i.length===1)break}if(n&&(ke(i)||i.length!==1))return{updating:!0};const s=this._pickSpatialReferenceCandidate(i);return{spatialReference:q(s)?s.spatialReference:null,viewingMode:q(s)?s.viewingMode:null,updating:!1}}get _tileInfoTask(){var i,s,o,r,a,l,c;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:n}=this._collectLayers([{parent:(s=(i=this.map)==null?void 0:i.call(this))==null?void 0:s.basemap,layers:(a=(r=(o=this.map)==null?void 0:o.call(this))==null?void 0:r.basemap)==null?void 0:a.baseLayers},{layers:(c=(l=this.map)==null?void 0:l.call(this))==null?void 0:c.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const u=e[0].tileInfo;return{tileInfo:u&&u.spatialReference.equals(this.spatialReference)?u:null,updating:!1}}return{updating:n}}get _heightModelInfoTask(){var i,s,o;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))!=null&&i.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:n}=this._allLayers;for(const r of e)if(ESe(r)){const a=lN(r);if(a)return{heightModelInfo:a,vcsWkid:(s=r.spatialReference)==null?void 0:s.vcsWkid,latestVcsWkid:(o=r.spatialReference)==null?void 0:o.latestVcsWkid,updating:!1}}return{updating:n}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,n=e.updating,i=[];for(const s of e.layers){const o="fullExtents"in s&&s.fullExtents||(q(s.fullExtent)?[s.fullExtent]:[]),r=this.requiresExtentInSpatialReference?null:o[0],a=o.find(l=>l.spatialReference.equals(this.spatialReference))??r;if(a)return{candidates:[{extent:a,layer:s}],updating:!1};if(this._getSupportedSpatialReferences(s).length>0)for(const l of o)i.push({extent:l,layer:s})}return{candidates:i,updating:n}}get _extentTask(){const{candidates:e,updating:n}=this._extentCandidatesTask;if(n)return{updating:n};if(ke(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),s=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:q(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(q(this._projectExtentTask.task)&&(this._projectExtentTask.task=Kr(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:s.clone(),task:mO(async o=>{try{const r=await hN(i.extent,s,i.layer.portalItem,o);this._projectExtentTask={...this._projectExtentTask,task:null,output:r}}catch{if(OS(o))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,n){if(ke(e))return n;const i=[],s=(o,r)=>q(o)?q(r)?o===r&&o:o:r;for(const o of e)for(const r of n){if(!o.spatialReference.equals(r.spatialReference))continue;const a=s(o.viewingMode,r.viewingMode);if(a!==!1){i.push({spatialReference:o.spatialReference,viewingMode:a});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(e){const n=this.defaultSpatialReference;return ke(e)||e.length<1?q(n)?{spatialReference:n,viewingMode:null}:null:(q(n)&&e.length>1&&e.some(({spatialReference:i})=>i.equals(n))&&(e=e.filter(({spatialReference:i})=>i.equals(n))),e.length>1&&e.some(({viewingMode:i})=>i!==mr.Local)&&(e=e.filter(({viewingMode:i})=>i!==mr.Local)),e[0])}_getSupportedSpatialReferences(e){const n="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(n.length===0)return[];const i=[];for(const s of n){const o=this.getSpatialReferenceSupport({spatialReference:s,layer:e});if(q(o)){const r=q(o.constraints)?o.constraints:[{spatialReference:s,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of r)(!this.requiresExtentInSpatialReference||ke(this.userSpatialReference)||a.equals(this.userSpatialReference))&&i.push({spatialReference:a,viewingMode:l})}}return i}_pickExtentCandidate(e){const n=this.spatialReference;return e.find(({extent:i})=>n.equals(i.spatialReference))||e[0]}_collectLayers(e){var i;if(this._loadMaybe((i=this.map)==null?void 0:i.call(this))!=="loaded")return{layers:[],updating:!0};const n={layers:[],preloading:-1,updating:!1};for(const s of e)if(this._collectCollection(s,n),n.preloading===this.sourcePreloadCount)break;return{layers:n.layers,updating:n.updating}}_collectCollection(e,n){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return n.updating=!0,void++n.preloading;case"failed":return}for(const i of e.layers){switch(this._loadMaybe(i)){case"failed":continue;case"loading":n.updating=!0,++n.preloading;break;case"loaded":n.updating||n.layers.push(i),"layers"in i&&this._collectCollection({layers:i.layers},n)}if(n.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e?e.loadStatus==="not-loaded"?(e.load().catch(()=>{}),"loading"):e.loadStatus:"loaded"}};v([b()],_n.prototype,"required",void 0),v([b({constructOnly:!0})],_n.prototype,"map",void 0),v([b({constructOnly:!0})],_n.prototype,"getSpatialReferenceSupport",void 0),v([b()],_n.prototype,"defaultSpatialReference",void 0),v([b()],_n.prototype,"userSpatialReference",void 0),v([b()],_n.prototype,"sourcePreloadCount",void 0),v([b()],_n.prototype,"priorityCollection",void 0),v([b()],_n.prototype,"requiresExtentInSpatialReference",void 0),v([b()],_n.prototype,"suspended",void 0),v([b({readOnly:!0})],_n.prototype,"ready",null),v([b({readOnly:!0})],_n.prototype,"heightModelInfoReady",null),v([b({readOnly:!0})],_n.prototype,"spatialReference",null),v([b({readOnly:!0})],_n.prototype,"extent",null),v([b({readOnly:!0})],_n.prototype,"heightModelInfo",null),v([b({readOnly:!0})],_n.prototype,"vcsWkid",null),v([b({readOnly:!0})],_n.prototype,"latestVcsWkid",null),v([b({readOnly:!0})],_n.prototype,"viewingMode",null),v([b({readOnly:!0})],_n.prototype,"tileInfo",null),v([b({readOnly:!0})],_n.prototype,"mapCollections",null),v([b({readOnly:!0})],_n.prototype,"_allLayers",null),v([b({readOnly:!0})],_n.prototype,"_spatialReferenceTask",null),v([b({readOnly:!0})],_n.prototype,"_tileInfoTask",null),v([b({readOnly:!0})],_n.prototype,"_heightModelInfoTask",null),v([b({readOnly:!0})],_n.prototype,"_extentCandidatesTask",null),v([b()],_n.prototype,"_extentTask",null),v([b()],_n.prototype,"_projectExtentTask",void 0),_n=v([Ae("esri.views.support.DefaultsFromMap")],_n);var uy;let At=uy=class extends Li(Ii.EventedMixin(KS(dt))){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new Oy({getCollections:()=>{var e,n,i;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(n=this.groundView)==null?void 0:n.layerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:e=>e.layerViews}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new gO,this.analyses=new hb,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Ht,this.magnifier=new tN,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new wSe,this.navigation=new aN,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new pSe(this),this.persistableViewModels=new Ht,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(ge(()=>this.preconditionsReady,e=>{var n,i;e?(this._currentSpatialReference=this.spatialReference,uy.views.add(this)):(this._currentSpatialReference=null,uy.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?((n=this.toolViewManager)==null||n.detach(),q(this.analysisViewManager)&&this.analysisViewManager.detach(),(i=this.layerViewManager)==null||i.clear(),this._teardown()):e&&!this.ready&&(this._startup(),q(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},_c))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,na(()=>this.ready)))),this.basemapView=new Ll({view:this}),this.layerViewManager=new uSe({view:this,layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new vSe({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([ge(()=>this.initialExtentRequired,t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:t},{sync:!0,initial:!0}),ge(()=>this.ready,t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)},{sync:!0}),ge(()=>this._userSpatialReference,t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let t=null;this.handles.add([ge(()=>{var e;return(e=this.defaultsFromMap)==null?void 0:e.ready},e=>{var i;const n=((i=this.map)==null?void 0:i.allLayers.length)>0;if(e&&!this.spatialReference&&n){if(q(t))return;const s=lc(()=>t=Kr(t));t=mO(async o=>{try{await LS(this.spatialReferenceWarningDelay,null,o)}catch{return}finally{t=null}Tt.getLogger(this.declaredClass).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(s,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=sn(this.graphics),this.analyses=sn(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),sn(this.analysisViewManager),this.toolViewManager=sn(this.toolViewManager),this.layerViewManager=sn(this.layerViewManager),this.basemapView=sn(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const t=this.map;this.map=null,t==null||t.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return Tt.getLogger(this.declaredClass).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var t;return(t=this.toolViewManager)==null?void 0:t.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new _n({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:t=>this.getSpatialReferenceSupport(t),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var t;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Wu.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((t=this.defaultsFromMap)!=null&&t.ready)||!this.typeSpecificPreconditionsReady)}set map(t){t!==this._get("map")&&(t!=null&&t.destroyed&&(Tt.getLogger(this.declaredClass).warn("#map","The provided map is already destroyed",{map:t}),t=null),Wu.isLoadable(t)&&t.load().catch(()=>{}),this.constructed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",t))}get spatialReference(){var e,n;let t=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return t&&((n=(e=this.defaultsFromMap)==null?void 0:e.required)!=null&&n.heightModelInfo)&&(t=t.clone(),t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),t}set spatialReference(t){const e=!vc(t,this._get("spatialReference"));this._set("_userSpatialReference",t),e&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){var t;return(t=this.toolViewManager)==null?void 0:t.tools}get initialExtent(){var t;return(t=this.defaultsFromMap)==null?void 0:t.extent}get cursor(){const t=this.toolViewManager?this.toolViewManager.cursor:null;return q(t)?t:this._cursor||"default"}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(t){return this.layerViewManager.whenLayerView(t)}getDefaultSpatialReference(){var t;return(t=this.defaultsFromMap)==null?void 0:t.spatialReference}getDefaultHeightModelInfo(){var t;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((t=this.defaultsFromMap)==null?void 0:t.heightModelInfo)??null}importLayerView(t){throw new Ue("importLayerView() not implemented")}hasLayerViewModule(t){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return q(this.getSpatialReferenceSupport({spatialReference:t}))}when(t,e){return this.isResolved()&&!this.ready&&Tt.getLogger(this.declaredClass).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,e)}forceReadyCycle(){this.ready&&(ji(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}};At.views=new Ht,v([b()],At.prototype,"_userSpatialReference",void 0),v([b()],At.prototype,"activeTool",null),v([b({readOnly:!0})],At.prototype,"allLayerViews",void 0),v([b()],At.prototype,"groundView",void 0),v([b()],At.prototype,"animation",null),v([b()],At.prototype,"basemapView",void 0),v([b({readOnly:!0})],At.prototype,"_defaultsFromMapSettings",null),v([b()],At.prototype,"defaultsFromMap",null),v([b()],At.prototype,"fatalError",void 0),v([b({type:ol})],At.prototype,"extent",null),v([b(gI(gO,"graphics"))],At.prototype,"graphics",void 0),v([b(gI(hb,"analyses"))],At.prototype,"analyses",void 0),v([b({readOnly:!0,type:Rb})],At.prototype,"heightModelInfo",null),v([b({readOnly:!0})],At.prototype,"interacting",null),v([b({readOnly:!0})],At.prototype,"navigating",null),v([b({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],At.prototype,"preconditionsReady",null),v([b({readOnly:!0})],At.prototype,"typeSpecificPreconditionsReady",void 0),v([b({type:Ht,readOnly:!0})],At.prototype,"layerViews",void 0),v([b({type:tN})],At.prototype,"magnifier",void 0),v([b({value:null,type:m3})],At.prototype,"map",null),v([b()],At.prototype,"padding",void 0),v([b({readOnly:!0})],At.prototype,"ready",void 0),v([b({type:yc})],At.prototype,"spatialReference",null),v([b()],At.prototype,"spatialReferenceWarningDelay",void 0),v([b()],At.prototype,"stationary",null),v([b({readOnly:!0})],At.prototype,"supportsGround",void 0),v([b({type:yB})],At.prototype,"timeExtent",void 0),v([b()],At.prototype,"tools",null),v([b()],At.prototype,"toolViewManager",void 0),v([b({readOnly:!0})],At.prototype,"type",void 0),v([b({type:Number})],At.prototype,"scale",void 0),v([b({readOnly:!0})],At.prototype,"updating",void 0),v([b({readOnly:!0})],At.prototype,"initialExtentRequired",void 0),v([b({readOnly:!0})],At.prototype,"initialExtent",null),v([b()],At.prototype,"cursor",null),v([b({readOnly:!0})],At.prototype,"input",void 0),v([b({type:aN,nonNullable:!0})],At.prototype,"navigation",void 0),v([b()],At.prototype,"layerViewManager",void 0),v([b()],At.prototype,"analysisViewManager",void 0),v([b()],At.prototype,"width",void 0),v([b()],At.prototype,"height",void 0),v([b({readOnly:!0})],At.prototype,"resizing",void 0),v([b({value:null,readOnly:!0})],At.prototype,"size",null),v([b({readOnly:!0})],At.prototype,"suspended",void 0),v([b({readOnly:!0})],At.prototype,"viewEvents",void 0),v([b({readOnly:!0})],At.prototype,"persistableViewModels",void 0),v([b()],At.prototype,"_isValid",void 0),v([b()],At.prototype,"_readyCycleForced",void 0),v([b()],At.prototype,"_currentSpatialReference",void 0),At=uy=v([Ae("esri.views.View")],At);const ISe=At;let Pl=class extends _B{constructor(e){super(e),this.state="running",this.target=null,this._dfd=null}initialize(){this.addResolvingPromise(new Promise((e,n)=>this._dfd={resolve:e,reject:n}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._dfd)==null||e.reject(new Ue("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._dfd)==null||e.resolve())}update(e,n){n||(n=e8(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",n)}};v([b({readOnly:!0})],Pl.prototype,"done",null),v([b({readOnly:!0,type:String})],Pl.prototype,"state",void 0),v([b()],Pl.prototype,"target",void 0),Pl=v([Ae("esri.views.ViewAnimation")],Pl),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Pl||(Pl={}));const VC=Pl;function Qr(){return[1,0,0,1,0,0]}function fN(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function xSe(t,e,n,i,s,o){return[t,e,n,i,s,o]}function MSe(t,e){return new Float64Array(t,e,6)}Object.freeze(Object.defineProperty({__proto__:null,create:Qr,clone:fN,fromValues:xSe,createView:MSe},Symbol.toStringTag,{value:"Module"}));const mN=96,gN=39.37,$Se=180/Math.PI;function vN(t){return t.wkid?t:t.spatialReference||yc.WGS84}function uT(t,e){return e.type?Ji(t,e.x,e.y):im(t,e)}function yN(t){return Vy(t)}function Df(t,e){const n=Math.max(1,e[0]),i=Math.max(1,e[1]);return Math.max(t.width/n,t.height/i)*NSe(t.spatialReference)}async function lf(t,e,n,i){let s,o;if(!t||Array.isArray(t)&&!t.length)return null;if(Ht.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const a=t.every(u=>"attributes"in u),l=t.some(u=>!u.geometry);let c=t;if(a&&l&&e&&e.allLayerViews){const u=new Map;for(const m of t){const g=m.layer,y=u.get(g)||[],_=m.attributes[g.objectIdField];_!=null&&y.push(_),u.set(g,y)}const d=[];u.forEach((m,g)=>{const y=e.allLayerViews.find(_=>_.layer.id===g.id);if("queryFeatures"in y){const _=g.createQuery();_.objectIds=m,_.returnGeometry=!0,d.push(y.queryFeatures(_))}});const h=await Promise.all(d),f=[];for(const m of h)if(m&&m.features&&m.features.length)for(const g of m.features)q(g.geometry)&&f.push(g.geometry);c=f}for(const u of c)i=await lf(u,e,n,i);return i}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")s=new Kt(t);else if(t instanceof n8)s=t;else if("geometry"in t){if(t.geometry)s=t.geometry;else if(t.layer){const a=t.layer,l=e.allLayerViews.find(c=>c.layer.id===a.id);if("queryFeatures"in l){const c=a.createQuery();c.objectIds=[t.attributes[a.objectIdField]],c.returnGeometry=!0;const u=await l.queryFeatures(c);s=Ay(u,"features",0,"geometry")}}}if(ke(s)||(o=s.type==="point"?new ol({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference}):s.extent,!o))return null;Gu()||lh(o.spatialReference,n)||await ch();const r=fr(o,n);return r?i=i?i.union(r):r:null}function ASe(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer&&t.layer.minScale&&t.layer.maxScale){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,n=0;for(const i of t){const s=i.layer;s&&s.minScale&&s.maxScale&&(e=s.minScale<e?s.minScale:e,n=s.maxScale>n?s.maxScale:n)}return e&&n?{min:e,max:n}:null}}}function Zw(t,e){return vc(vN(t),e)?t:fr(t,e)}async function LSe(t,e){if(!t||!e)return new dr({targetGeometry:new Kt,scale:0,rotation:0});let n=e.spatialReference;const{constraints:i,padding:s,viewpoint:o,size:r}=e,a=[s?r[0]-s.left-s.right:r[0],s?r[1]-s.top-s.bottom:r[1]];let l=null;t instanceof dr?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let c=null;l&&l.targetGeometry?c=l.targetGeometry:t instanceof ol?c=t:(t||t&&("center"in t||"extent"in t||"target"in t))&&(c=await lf(t.center,e,n)||await lf(t.extent,e,n)||await lf(t.target,e,n)||await lf(t,e,n)),!c&&o&&o.targetGeometry?c=o.targetGeometry:!c&&e.extent&&(c=e.extent),n||(n=vN(e.spatialReference||e.extent||c)),Gu()||vc(c.spatialReference,n)||lh(c,n)||await ch();const u=Zw(c.center?c.center:c,n);let d=null;if(l&&q(l.targetGeometry)&&l.targetGeometry.type==="point")d=l.scale;else if("scale"in t&&t.scale)d=t.scale;else if("zoom"in t&&t.zoom!==-1&&i&&i.effectiveLODs)d=i.zoomToScale(t.zoom);else if(Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0){const g=Zw(e.extent,n);d=q(g)?Df(g,a):e.extent?Df(e.extent,a):o.scale}else d=Df(Zw(c.extent,n),a);const h=ASe(t);h&&(h.min&&h.min>d?d=h.min:h.max&&h.max<d&&(d=h.max));let f=0;l?f=l.rotation:t.hasOwnProperty("rotation")?f=t.rotation:o&&(f=o.rotation);let m=new dr({targetGeometry:u,scale:d,rotation:f});return i&&(m=i.fit(m),i.constrainByGeometry(m),i.rotationEnabled||(m.rotation=f)),m}function Er(t,e){const n=t.targetGeometry,i=e.targetGeometry;return n.x=i.x,n.y=i.y,n.spatialReference=i.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function OSe(t,e,n){return n?Ji(t,.5*(e[0]-n.right+n.left),.5*(e[1]-n.bottom+n.top)):Xm(t,e,.5)}const PSe=function(){const t=Jt();return function(e,n,i){const s=n.targetGeometry;uT(t,s);const o=.5*Eh(n);return e.xmin=t[0]-o*i[0],e.ymin=t[1]-o*i[1],e.xmax=t[0]+o*i[0],e.ymax=t[1]+o*i[1],e.spatialReference=s.spatialReference,e}}();function RSe(t,e,n,i,s){return FC(t,e,n.center),t.scale=Df(n,i),s&&s.constraints&&s.constraints.constrain(t),t}function VSe(t,e,n,i){return hT(t,e,n,i),jS(t,t)}const bN=function(){const t=Jt();return function(e,n,i){return ZS(e,BSe(e,n),OSe(t,n,i))}}(),FSe=function(){const t=Qr(),e=Jt();return function(n,i,s,o){const r=Eh(i),a=dT(i);return Ji(e,r,r),gB(t,e),Ob(t,t,a),nm(t,t,bN(e,s,o)),nm(t,t,[0,o.top-o.bottom]),Ji(n,t[4],t[5])}}();function Eh(t){return t.scale*DSe(t.targetGeometry)}function DSe(t){return q(t)&&BL(t.spatialReference)?1/(yN(t.spatialReference)*gN*mN):1}function dT(t){return vO(t.rotation)||0}function NSe(t){return BL(t)?yN(t)*gN*mN:1}function BSe(t,e){return Xm(t,e,.5)}const pT=function(){const t=Jt(),e=Jt(),n=Jt();return function(i,s,o,r,a,l){return SB(t,s),Xm(e,o,.5*l),Ji(n,1/r*l,-1/r*l),fO(i,e),a&&Ob(i,i,a),GS(i,i,n),nm(i,i,t),i}}(),hT=function(){const t=Jt();return function(e,n,i,s){const o=Eh(n),r=dT(n);return uT(t,n.targetGeometry),pT(e,t,i,o,r,s)}}(),zSe=function(){const t=Jt();return function(e,n,i,s){const o=Eh(n);return uT(t,n.targetGeometry),pT(e,t,i,o,0,s)}}();function HSe(t){const e=VS(t);return e?e.valid[1]-e.valid[0]:0}function USe(t,e){return Math.round(HSe(t)/e)}const WSe=function(){const t=Jt(),e=Jt(),n=[0,0,0];return function(i,s,o){di(t,i,s),W0(t,t),di(e,i,o),W0(e,e),yO(n,t,e);let r=Math.acos(Ic(t,e)/(G0(t)*G0(e)))*$Se;return n[2]<0&&(r=-r),isNaN(r)&&(r=0),r}}(),GSe=function(){const t=Jt();return function(e,n,i,s){const o=e.targetGeometry;return Er(e,n),FSe(t,n,i,s),o.x+=t[0],o.y+=t[1],e}}(),FC=function(t,e,n){Er(t,e);const i=t.targetGeometry;return i.x=n.x,i.y=n.y,i.spatialReference=n.spatialReference,t},jSe=function(){const t=Jt();return function(e,n,i,s,o){o||(o="center"),ZS(t,i,s),Xm(t,t,.5);const r=t[0],a=t[1];switch(o){case"center":Ji(t,0,0);break;case"left":Ji(t,-r,0);break;case"top":Ji(t,0,a);break;case"right":Ji(t,r,0);break;case"bottom":Ji(t,0,-a);break;case"top-left":Ji(t,-r,a);break;case"bottom-left":Ji(t,-r,-a);break;case"top-right":Ji(t,r,a);break;case"bottom-right":Ji(t,r,-a)}return $_(e,n,t),e}}();function NRe(t,e,n){return Er(t,e),t.rotation+=n,t}function qSe(t,e,n){return Er(t,e),t.rotation=n,t}const KSe=function(){const t=Jt();return function(e,n,i,s,o){return Er(e,n),isNaN(i)||i===0||(wN(t,s,n,o),e.scale=n.scale*i,CN(t,t,e,o),$_(e,e,Ji(t,t[0]-s[0],s[1]-t[1]))),e}}();function iA(t,e,n){return Er(t,e),t.scale=n,t}const _N=function(){const t=Jt();return function(e,n,i,s,o,r){return Er(e,n),isNaN(i)||i===0||(wN(t,o,n,r),e.scale=n.scale*i,e.rotation+=s,CN(t,t,e,r),$_(e,e,Ji(t,t[0]-o[0],o[1]-t[1]))),e}}(),BRe=function(){const t=Jt(),e=Jt();return function(n,i,s,o,r,a,l){return bN(e,a,l),bO(t,r,e),o?_N(n,i,s,o,t,a):KSe(n,i,s,t,a)}}(),wN=function(){const t=Qr();return function(e,n,i,s){return Va(e,n,VSe(t,i,s,1))}}(),CN=function(){const t=Qr();return function(e,n,i,s){return Va(e,n,hT(t,i,s,1))}}(),$_=function(){const t=Jt(),e=Qr();return function(n,i,s){Er(n,i);const o=Eh(i),r=n.targetGeometry;return mB(e,dT(i)),GS(e,e,Cf(o,o)),Va(t,s,e),r.x+=t[0],r.y+=t[1],n}}();let YSe=class{constructor(e,n,i,s){const o=e.targetGeometry,r=n.targetGeometry;s?typeof s=="string"&&(s=CB(s)||U0.ease):s=U0.ease,this.easing=s,this.duration=i,this.sCenterX=o.x,this.sCenterY=o.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=r.x,this.tCenterY=r.y,this.tScale=n.scale,this.tRotation=n.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,n){const i=this.easing(n);let s,o,r,a;n>=1?(s=this.tCenterX,o=this.tCenterY,r=this.tRotation,a=this.tScale):(s=this.sCenterX+i*this.dCenterX,o=this.sCenterY+i*this.dCenterY,r=this.sRotation+i*this.dRotation,a=this.sScale+i*this.dScale),e.targetGeometry.x=s,e.targetGeometry.y=o,e.scale=a,e.rotation=r}},Ia=class extends dt{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=U0.ease,this.view=null,this.viewpoint=null,this.viewpoint=new dr({targetGeometry:new Kt,scale:0,rotation:0}),this._updateTask=$p({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,n,i){this.stop();const s=this.viewpoint;Er(s,n),this.transition=new YSe(this.viewpoint,e.target,i&&i.duration||this.duration,i&&i.easing||this.easing);const o=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,n){this.stop(),this.updateFunction=n,this.viewpoint=e;const i=new VC({target:e.clone()}),s=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const n=this.animation;if(n&&n.state!==VC.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const i=(performance.now()-this._startTime)/this.transition.duration,s=i>=1;this.transition.applyRatio(this.viewpoint,i),s&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};v([b()],Ia.prototype,"animation",void 0),v([b()],Ia.prototype,"duration",void 0),v([b()],Ia.prototype,"transition",void 0),v([b()],Ia.prototype,"easing",void 0),v([b()],Ia.prototype,"view",void 0),v([b()],Ia.prototype,"viewpoint",void 0),Ia=v([Ae("esri.views.2d.AnimationManager")],Ia);const ZSe=Ia;let XSe=class{constructor(e){this.view=e,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;const{basemapView:n,graphicsView:i,labelManager:s,layerViews:o,state:{id:r}}=this.view;n.baseLayerViews.forEach(this._updateLayerView,this),o.forEach(this._updateLayerView,this),n.referenceLayerViews.forEach(this._updateLayerView,this),q(s)&&(s.lastUpdateId!==r&&(s.viewChange(),s.lastUpdateId=r),s.updateRequested&&s.processUpdate(this._updateParameters)),q(i)&&(i.lastUpdateId!==r&&(i.viewChange(),i.lastUpdateId=r),i.updateRequested&&i.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=ge(()=>e.stationary,n=>{this.stationary=n,this.requestFrame()}),this._frameTaskHandle=$p(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){const n=this.view.state,i=e.lastUpdateId;i!=null&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),i!==n.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=n.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this)}};function _i(){return Promise.all([Fe(()=>import("./webglDeps-6709fdb1.js"),["./webglDeps-6709fdb1.js","./VertexArrayObject-3630ef4f.js","./Error-57322e92.js","./string-480f3e3f.js","./typedArrayUtil-d9bc5fbd.js","./Texture-411ca148.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./context-util-d4c193b5.js","./enums-64ab819c.js","./ProgramTemplate-f021fc55.js","./programUtils-71c4f47c.js","./NestedMap-1b5db22e.js"],import.meta.url),Fe(()=>import("./mapViewDeps-04b8fbf0.js"),["./mapViewDeps-04b8fbf0.js","./Error-57322e92.js","./string-480f3e3f.js","./typedArrayUtil-d9bc5fbd.js","./promiseUtils-32d9c228.js","./reactiveUtils-5869e41a.js","./cast-a534ae90.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./mat3f32-d3d088e8.js","./Rasterizer-2c1558a6.js","./request-24011425.js","./preload-helper-41c905a7.js","./_commonjsHelpers-a430e9ea.js","./imageutils-0a369a69.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./cimAnalyzer-a68275f3.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./fontUtils-4ed0e787.js","./screenUtils-90993e16.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./BidiEngine-836b7ef6.js","./aaBoundingRect-b340cf8c.js","./jsonUtils-c6684c52.js","./enums-4b2a86a0.js","./utils-c81a5c52.js","./alignmentUtils-ae955d28.js","./definitions-2d0dd0cd.js","./mat2d-d0b91e3e.js","./vec2-ab9f47bf.js","./vec2f32-461e65a9.js","./number-954e4ab6.js","./Rect-ea14f53a.js","./callExpressionWithFeature-13fe9b68.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./colorRamps-8d7efc14.js","./enumeration-61a13175.js","./Symbol-8266348e.js","./GeometryUtils-eebff0a0.js","./floatRGBA-090399ba.js","./rasterizingUtils-22a741bf.js","./utils-0d179f64.js","./EffectView-dffeb0bc.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./Evented-cbf5f368.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./Utils-a4216b91.js","./enums-64ab819c.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexElementDescriptor-2925c6af.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./BufferPool-602adb50.js","./WGLContainer-b2d1fffc.js","./mat3-9a8d9db7.js","./pixelUtils-cc2ca9c3.js","./vec2f64-30dc1443.js","./VertexArrayObject-3630ef4f.js","./vec4f32-2f36231b.js","./ProgramTemplate-f021fc55.js","./StyleDefinition-7d58136b.js","./config-1337d16e.js","./GeometryUtils-c093d234.js","./earcut-58237617.js","./featureConversionUtils-d2229ed4.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./enums-bfc9e4e9.js","./programUtils-71c4f47c.js","./NestedMap-1b5db22e.js","./RenderingContext-b74012a7.js","./OrderIndependentTransparency-68bd812c.js","./pbf-8b0546e8.js","./Matcher-acc26e80.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./Queue-275a6362.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./Clonable-9b34e760.js","./visualVariablesUtils-c668eb89.js","./visualVariablesUtils-3304d1a5.js","./tileUtils-dbff68ee.js","./TileClipper-31a81f15.js","./assets-cd44347b.js","./Geometry-daada628.js","./defaultsJSON-59981e75.js","./LRUCache-b9228ca3.js","./MemCache-1d2f56ee.js","./ExpandedCIM-5a2216e6.js","./devEnvironmentUtils-5002a058.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./locale-30120714.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./persistableUrlUtils-d0777bec.js","./styleUtils-391927cf.js","./CircularArray-a936678e.js","./imageUtils-c2d0d1ae.js","./HandleOwner-2edbba46.js","./FeatureSetReader-3d68adfe.js","./centroid-56c5816c.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./sizeVariableUtils-d4870b0d.js","./BaseGraphicContainer-3ea19653.js","./normalizeUtilsSync-6d84346c.js","./normalizeUtils-0f537694.js","./utils-44a68fd6.js","./projection-acd73147.js","./SimpleObservable-8e532943.js","./zscale-48bab05e.js","./json-48e3ea08.js","./labelingInfo-c70ad911.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./fieldUtils-b2df74c4.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./Collection-7c37b74e.js","./collectionUtils-0365f48b.js","./labelUtils-4f4b54c6.js","./jsonUtils-8c02ff16.js","./FeatureContainer-e57c4b30.js","./TileContainer-a618bf74.js","./capabilities-d08b6e58.js","./schemaUtils-76874a61.js","./LayerFloorInfo-f184c8f5.js","./diffUtils-8a8cb5bc.js","./createSymbolSchema-1bb8123a.js","./rendererUtils-c63e720f.js","./FeatureReductionLayer-fcaeb34a.js","./BlendLayer-813950f9.js","./PopupTemplate-f97bb051.js","./number-2ab8ca0d.js","./Identifiable-093f90a8.js","./UniqueValueRenderer-73d567ad.js","./LegendOptions-2e7b3d70.js","./Graphic-6c08e65d.js","./compilerUtils-fefa73ae.js","./jsonUtils-1c5cdf77.js","./DictionaryLoader-2a334243.js","./deprecate-0d93948c.js","./OperationalLayer-9c50475b.js","./ElevationInfo-80227ecc.js","./util-0a217e96.js","./ComputedAttributeStorage-87b4df43.js","./FieldsIndex-02142c8a.js","./vec3f32-4322908d.js","./GraphicContainer-6eb8d408.js","./asyncUtils-087555fc.js","./requestImageUtils-d2d7b1fb.js","./Basemap-59ed9516.js","./loadAll-01cdf0a9.js","./PortalItem-e4ba4b94.js","./messages-28bf3b89.js","./writeUtils-3bde6e49.js","./layerUtils-68eea656.js","./CollectionFlattener-f43a0fce.js","./TablesMixin-55858fba.js","./Layer-cea228f0.js","./Cyclical-078b4564.js","./workers-af024c50.js","./Connection-b591250e.js","./intl-7d39a8c0.js","./TileInfo-c5c8c8d2.js","./widget-4abc68df.js","./uuid-73213768.js","./dom-5b7af1bf.js","./byteSizeEstimations-90c5a50d.js","./executeQueryJSON-29279a46.js","./query-b7b3a76b.js","./pbfQueryUtils-c922ef32.js","./queryZScale-3c8de33a.js","./FeatureSet-deb2029d.js","./RelationshipQuery-c27267ab.js","./utils-4469bf65.js","./ItemCache-bf1028d4.js","./TopFeaturesQuery-9aca00bf.js","./FeatureLayer-534ff006.js","./MultiOriginJSONSupport-b8792dfa.js","./FeatureLayerBase-c0aa3674.js","./HeightModelInfo-34f16d74.js","./arcgisLayerUrl-bed3cba1.js","./editsZScale-12d81957.js","./APIKeyMixin-b6e4f897.js","./ArcGISService-aada3b5d.js","./CustomParametersMixin-a5d06ccc.js","./EditBusLayer-b5dc3689.js","./OrderedLayer-9623e905.js","./PortalLayer-12f4a535.js","./RefreshableLayer-49182ab8.js","./ScaleRangeLayer-c072e266.js","./TemporalLayer-c74d13d4.js","./TimeInfo-f76d6c20.js","./FeatureTemplate-c4496b93.js","./FeatureType-0be9420b.js","./fieldProperties-4207e953.js","./versionUtils-fabd8b3a.js","./styleUtils-08eaa4d2.js","./popupUtils-1ecc877c.js","./colorUtils-82440b70.js","./Scheduler-5e6ccc87.js","./GraphicsLayer-b332f442.js","./ViewingMode-915d19cb.js","./unitBezier-881ac1eb.js","./Subtype-a3103d84.js","./datetime-4f774298.js","./elevationInfoUtils-c3025fae.js","./QueryEngineResult-92e13fe4.js","./WhereClause-6c9440a1.js","./Util-289ce3b5.js","./ExportImageParameters-ba01802d.js","./sublayerUtils-eea48c01.js","./webStyleSymbolUtils-0b165621.js","./dehydratedFeatures-3dcd65f1.js","./plane-46a8c767.js","./sphere-622880b9.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./quat-ec16a584.js"],import.meta.url)])}const Hh=()=>_i().then(()=>Fe(()=>import("./TileLayerView2D-3b8cb1c0.js"),["./TileLayerView2D-3b8cb1c0.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./reactiveUtils-5869e41a.js","./Extent-a1a1de42.js","./imageUtils-20773273.js","./BitmapTileContainer-1ef594fb.js","./aaBoundingRect-b340cf8c.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./mat3f32-d3d088e8.js","./Bitmap-ff7d2c07.js","./mat3-9a8d9db7.js","./vec2f32-461e65a9.js","./utils-0d179f64.js","./EffectView-dffeb0bc.js","./parser-01f6451e.js","./colorUtils-639f4d25.js","./screenUtils-90993e16.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./Evented-cbf5f368.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./enums-4b2a86a0.js","./enums-64ab819c.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexElementDescriptor-2925c6af.js","./definitions-2d0dd0cd.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./Color-af6e0c66.js","./TileContainer-a618bf74.js","./TileKey-9cae9369.js","./WGLContainer-b2d1fffc.js","./pixelUtils-cc2ca9c3.js","./vec2f64-30dc1443.js","./VertexArrayObject-3630ef4f.js","./vec4f32-2f36231b.js","./ProgramTemplate-f021fc55.js","./StyleDefinition-7d58136b.js","./config-1337d16e.js","./GeometryUtils-c093d234.js","./earcut-58237617.js","./vec2-ab9f47bf.js","./featureConversionUtils-d2229ed4.js","./jsonUtils-c6684c52.js","./Polyline-b571c705.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./LayerView2D-fc5f87cc.js","./Collection-7c37b74e.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./geometry-eec1b371.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./TileStore-8f580dbf.js","./Queue-275a6362.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./enumeration-61a13175.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./Clonable-9b34e760.js","./TileStrategy-a5366189.js","./LayerView-a849dd77.js","./HandleOwner-2edbba46.js","./Identifiable-093f90a8.js","./Promise-368b703a.js","./RefreshableLayerView-2de321c7.js","./Basemap-59ed9516.js","./preload-helper-41c905a7.js","./deprecate-0d93948c.js","./Loadable-46524a7e.js","./loadAll-01cdf0a9.js","./asyncUtils-087555fc.js","./request-24011425.js","./Portal-c6e03126.js","./locale-30120714.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./PortalItem-e4ba4b94.js","./assets-cd44347b.js","./messages-28bf3b89.js","./writeUtils-3bde6e49.js","./layerUtils-68eea656.js","./compilerUtils-fefa73ae.js","./opacityUtils-1333f803.js","./CollectionFlattener-f43a0fce.js","./TablesMixin-55858fba.js","./Layer-cea228f0.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./fieldUtils-b2df74c4.js","./arcadeOnDemand-a976a73c.js","./number-2ab8ca0d.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./persistableUrlUtils-d0777bec.js","./Cyclical-078b4564.js","./workers-af024c50.js","./Connection-b591250e.js","./intl-7d39a8c0.js","./projection-acd73147.js","./unitUtils-dd6fb8ee.js","./zscale-48bab05e.js","./TileInfo-c5c8c8d2.js","./widget-4abc68df.js","./uuid-73213768.js","./dom-5b7af1bf.js","./byteSizeEstimations-90c5a50d.js","./executeQueryJSON-29279a46.js","./normalizeUtils-0f537694.js","./query-b7b3a76b.js","./pbfQueryUtils-c922ef32.js","./pbf-8b0546e8.js","./queryZScale-3c8de33a.js","./FeatureSet-deb2029d.js","./RelationshipQuery-c27267ab.js","./LegendOptions-2e7b3d70.js","./utils-4469bf65.js","./BlendLayer-813950f9.js","./ItemCache-bf1028d4.js","./MemCache-1d2f56ee.js","./utils-c81a5c52.js","./jsonUtils-1c5cdf77.js","./UniqueValueRenderer-73d567ad.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./lengthUtils-92fed992.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./TopFeaturesQuery-9aca00bf.js","./FeatureLayer-534ff006.js","./MultiOriginJSONSupport-b8792dfa.js","./LayerFloorInfo-f184c8f5.js","./FeatureLayerBase-c0aa3674.js","./HeightModelInfo-34f16d74.js","./arcgisLayerUrl-bed3cba1.js","./OperationalLayer-9c50475b.js","./ElevationInfo-80227ecc.js","./editsZScale-12d81957.js","./APIKeyMixin-b6e4f897.js","./ArcGISService-aada3b5d.js","./CustomParametersMixin-a5d06ccc.js","./EditBusLayer-b5dc3689.js","./FeatureReductionLayer-fcaeb34a.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./OrderedLayer-9623e905.js","./PortalLayer-12f4a535.js","./RefreshableLayer-49182ab8.js","./ScaleRangeLayer-c072e266.js","./TemporalLayer-c74d13d4.js","./TimeInfo-f76d6c20.js","./FeatureTemplate-c4496b93.js","./FeatureType-0be9420b.js","./fieldProperties-4207e953.js","./FieldsIndex-02142c8a.js","./versionUtils-fabd8b3a.js","./styleUtils-08eaa4d2.js","./popupUtils-1ecc877c.js","./colorUtils-82440b70.js","./mat2d-d0b91e3e.js","./Scheduler-5e6ccc87.js","./GraphicsLayer-b332f442.js","./ViewingMode-915d19cb.js","./unitBezier-881ac1eb.js","./capabilities-d08b6e58.js","./Subtype-a3103d84.js","./datetime-4f774298.js","./elevationInfoUtils-c3025fae.js","./QueryEngineResult-92e13fe4.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./WhereClause-6c9440a1.js","./utils-44a68fd6.js","./json-48e3ea08.js","./Util-289ce3b5.js","./ExportImageParameters-ba01802d.js","./sublayerUtils-eea48c01.js","./webStyleSymbolUtils-0b165621.js","./devEnvironmentUtils-5002a058.js","./dehydratedFeatures-3dcd65f1.js","./plane-46a8c767.js","./sphere-622880b9.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./quat-ec16a584.js"],import.meta.url)),Uh=()=>_i().then(()=>Fe(()=>import("./FeatureLayerView2D-92538871.js"),["./FeatureLayerView2D-92538871.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./Graphic-6c08e65d.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./enumeration-61a13175.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./reactiveUtils-5869e41a.js","./EffectView-dffeb0bc.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./FeatureReductionLayer-fcaeb34a.js","./BlendLayer-813950f9.js","./TimeExtent-2004eecf.js","./Query-13124a97.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./UniqueValueRenderer-73d567ad.js","./LegendOptions-2e7b3d70.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./compilerUtils-fefa73ae.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./jsonUtils-1c5cdf77.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./MemCache-1d2f56ee.js","./deprecate-0d93948c.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./OperationalLayer-9c50475b.js","./ElevationInfo-80227ecc.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./FeatureSet-deb2029d.js","./definitions-2d0dd0cd.js","./LayerView2D-fc5f87cc.js","./utils-0d179f64.js","./mat3f32-d3d088e8.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./enums-4b2a86a0.js","./enums-64ab819c.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexElementDescriptor-2925c6af.js","./schemaUtils-76874a61.js","./LayerFloorInfo-f184c8f5.js","./visualVariablesUtils-3304d1a5.js","./createSymbolSchema-1bb8123a.js","./cimAnalyzer-a68275f3.js","./fontUtils-4ed0e787.js","./BidiEngine-836b7ef6.js","./utils-c81a5c52.js","./mat2d-d0b91e3e.js","./vec2-ab9f47bf.js","./vec2f32-461e65a9.js","./Rect-ea14f53a.js","./callExpressionWithFeature-13fe9b68.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./GeometryUtils-eebff0a0.js","./floatRGBA-090399ba.js","./ExpandedCIM-5a2216e6.js","./rendererUtils-c63e720f.js","./capabilities-d08b6e58.js","./util-0a217e96.js","./TileStore-8f580dbf.js","./Queue-275a6362.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./workers-af024c50.js","./Connection-b591250e.js","./assets-cd44347b.js","./intl-7d39a8c0.js","./messages-28bf3b89.js","./ExportImageParameters-ba01802d.js","./HandleOwner-2edbba46.js","./sublayerUtils-eea48c01.js","./popupUtils-b4549770.js","./LayerView-a849dd77.js","./RefreshableLayerView-2de321c7.js"],import.meta.url)),sA={"base-dynamic":()=>_i().then(()=>Fe(()=>import("./BaseDynamicLayerView2D-ca9a3fc4.js"),["./BaseDynamicLayerView2D-ca9a3fc4.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./BitmapContainer-b9fd36c2.js","./WGLContainer-b2d1fffc.js","./mat3f32-d3d088e8.js","./enums-64ab819c.js","./mat3-9a8d9db7.js","./common-c186b691.js","./vec2f32-461e65a9.js","./pixelUtils-cc2ca9c3.js","./utils-0d179f64.js","./EffectView-dffeb0bc.js","./parser-01f6451e.js","./colorUtils-639f4d25.js","./screenUtils-90993e16.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./vec3f64-6cd30318.js","./Evented-cbf5f368.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec4-46a9b36d.js","./enums-4b2a86a0.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexElementDescriptor-2925c6af.js","./definitions-2d0dd0cd.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./Color-af6e0c66.js","./vec2f64-30dc1443.js","./VertexArrayObject-3630ef4f.js","./vec4f32-2f36231b.js","./ProgramTemplate-f021fc55.js","./StyleDefinition-7d58136b.js","./config-1337d16e.js","./GeometryUtils-c093d234.js","./reactiveUtils-5869e41a.js","./earcut-58237617.js","./vec2-ab9f47bf.js","./featureConversionUtils-d2229ed4.js","./jsonUtils-c6684c52.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./LayerView2D-fc5f87cc.js","./Collection-7c37b74e.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./geometry-eec1b371.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./ExportStrategy-333562f0.js","./aaBoundingRect-b340cf8c.js","./TileInfo-c5c8c8d2.js","./unitUtils-dd6fb8ee.js","./Bitmap-ff7d2c07.js","./TileStore-8f580dbf.js","./Queue-275a6362.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./enumeration-61a13175.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./Clonable-9b34e760.js","./LayerView-a849dd77.js","./HandleOwner-2edbba46.js","./Identifiable-093f90a8.js","./Promise-368b703a.js","./RefreshableLayerView-2de321c7.js"],import.meta.url)),"base-tile":Hh,"bing-maps":Hh,csv:Uh,"geo-rss":()=>_i().then(()=>Fe(()=>import("./GeoRSSLayerView2D-037ac4ce.js"),["./GeoRSSLayerView2D-037ac4ce.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./enumeration-61a13175.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./reactiveUtils-5869e41a.js","./jsonUtils-1c5cdf77.js","./UniqueValueRenderer-73d567ad.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./LegendOptions-2e7b3d70.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./Graphic-6c08e65d.js","./jsonUtils-c6684c52.js","./compilerUtils-fefa73ae.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./MemCache-1d2f56ee.js","./deprecate-0d93948c.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./FeatureSet-deb2029d.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./LayerView2D-fc5f87cc.js","./utils-0d179f64.js","./mat3f32-d3d088e8.js","./EffectView-dffeb0bc.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./enums-4b2a86a0.js","./enums-64ab819c.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexElementDescriptor-2925c6af.js","./definitions-2d0dd0cd.js","./GraphicContainer-6eb8d408.js","./BaseGraphicContainer-3ea19653.js","./cimAnalyzer-a68275f3.js","./fontUtils-4ed0e787.js","./BidiEngine-836b7ef6.js","./utils-c81a5c52.js","./mat2d-d0b91e3e.js","./vec2-ab9f47bf.js","./vec2f32-461e65a9.js","./Rect-ea14f53a.js","./callExpressionWithFeature-13fe9b68.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./GeometryUtils-eebff0a0.js","./floatRGBA-090399ba.js","./HandleOwner-2edbba46.js","./normalizeUtilsSync-6d84346c.js","./normalizeUtils-0f537694.js","./utils-44a68fd6.js","./projection-acd73147.js","./assets-cd44347b.js","./zscale-48bab05e.js","./featureConversionUtils-d2229ed4.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./json-48e3ea08.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./VertexArrayObject-3630ef4f.js","./FeatureContainer-e57c4b30.js","./mat3-9a8d9db7.js","./TileContainer-a618bf74.js","./TileKey-9cae9369.js","./WGLContainer-b2d1fffc.js","./pixelUtils-cc2ca9c3.js","./vec2f64-30dc1443.js","./vec4f32-2f36231b.js","./ProgramTemplate-f021fc55.js","./StyleDefinition-7d58136b.js","./config-1337d16e.js","./GeometryUtils-c093d234.js","./earcut-58237617.js","./Queue-275a6362.js","./visualVariablesUtils-c668eb89.js","./visualVariablesUtils-3304d1a5.js","./capabilities-d08b6e58.js","./Matcher-acc26e80.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./tileUtils-dbff68ee.js","./TileClipper-31a81f15.js","./Geometry-daada628.js","./ExpandedCIM-5a2216e6.js","./devEnvironmentUtils-5002a058.js","./schemaUtils-76874a61.js","./LayerFloorInfo-f184c8f5.js","./createSymbolSchema-1bb8123a.js","./rendererUtils-c63e720f.js","./FeatureReductionLayer-fcaeb34a.js","./BlendLayer-813950f9.js","./OperationalLayer-9c50475b.js","./ElevationInfo-80227ecc.js","./util-0a217e96.js","./ComputedAttributeStorage-87b4df43.js","./FeatureSetReader-3d68adfe.js","./centroid-56c5816c.js","./FieldsIndex-02142c8a.js","./vec3f32-4322908d.js","./LayerView-a849dd77.js"],import.meta.url)),feature:Uh,geojson:Uh,graphics:()=>_i().then(()=>Fe(()=>import("./GraphicsLayerView2D-7f41c0d7.js"),["./GraphicsLayerView2D-7f41c0d7.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./Graphic-6c08e65d.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./enumeration-61a13175.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./LayerView2D-fc5f87cc.js","./reactiveUtils-5869e41a.js","./utils-0d179f64.js","./mat3f32-d3d088e8.js","./EffectView-dffeb0bc.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./enums-4b2a86a0.js","./enums-64ab819c.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexElementDescriptor-2925c6af.js","./definitions-2d0dd0cd.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./GraphicContainer-6eb8d408.js","./BaseGraphicContainer-3ea19653.js","./cimAnalyzer-a68275f3.js","./fontUtils-4ed0e787.js","./BidiEngine-836b7ef6.js","./utils-c81a5c52.js","./mat2d-d0b91e3e.js","./vec2-ab9f47bf.js","./vec2f32-461e65a9.js","./Rect-ea14f53a.js","./callExpressionWithFeature-13fe9b68.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./colorRamps-8d7efc14.js","./GeometryUtils-eebff0a0.js","./floatRGBA-090399ba.js","./HandleOwner-2edbba46.js","./normalizeUtilsSync-6d84346c.js","./normalizeUtils-0f537694.js","./utils-44a68fd6.js","./unitUtils-dd6fb8ee.js","./projection-acd73147.js","./assets-cd44347b.js","./zscale-48bab05e.js","./featureConversionUtils-d2229ed4.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./json-48e3ea08.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./jsonUtils-8c02ff16.js","./VertexArrayObject-3630ef4f.js","./FeatureContainer-e57c4b30.js","./mat3-9a8d9db7.js","./TileContainer-a618bf74.js","./TileKey-9cae9369.js","./WGLContainer-b2d1fffc.js","./pixelUtils-cc2ca9c3.js","./vec2f64-30dc1443.js","./vec4f32-2f36231b.js","./ProgramTemplate-f021fc55.js","./StyleDefinition-7d58136b.js","./config-1337d16e.js","./GeometryUtils-c093d234.js","./earcut-58237617.js","./Queue-275a6362.js","./visualVariablesUtils-c668eb89.js","./visualVariablesUtils-3304d1a5.js","./lengthUtils-92fed992.js","./capabilities-d08b6e58.js","./Matcher-acc26e80.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./tileUtils-dbff68ee.js","./TileClipper-31a81f15.js","./Geometry-daada628.js","./LRUCache-b9228ca3.js","./MemCache-1d2f56ee.js","./ExpandedCIM-5a2216e6.js","./devEnvironmentUtils-5002a058.js","./styleUtils-391927cf.js","./schemaUtils-76874a61.js","./LayerFloorInfo-f184c8f5.js","./diffUtils-8a8cb5bc.js","./createSymbolSchema-1bb8123a.js","./rendererUtils-c63e720f.js","./FeatureReductionLayer-fcaeb34a.js","./BlendLayer-813950f9.js","./UniqueValueRenderer-73d567ad.js","./LegendOptions-2e7b3d70.js","./sizeVariableUtils-d4870b0d.js","./compilerUtils-fefa73ae.js","./jsonUtils-1c5cdf77.js","./DictionaryLoader-2a334243.js","./deprecate-0d93948c.js","./OperationalLayer-9c50475b.js","./ElevationInfo-80227ecc.js","./util-0a217e96.js","./ComputedAttributeStorage-87b4df43.js","./FeatureSetReader-3d68adfe.js","./centroid-56c5816c.js","./FieldsIndex-02142c8a.js","./vec3f32-4322908d.js","./LayerView-a849dd77.js"],import.meta.url)),group:()=>_i().then(()=>Fe(()=>import("./GroupLayerView2D-697d8818.js"),["./GroupLayerView2D-697d8818.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./GroupContainer-e381229e.js","./WGLContainer-b2d1fffc.js","./mat3f32-d3d088e8.js","./enums-64ab819c.js","./mat3-9a8d9db7.js","./common-c186b691.js","./vec2f32-461e65a9.js","./pixelUtils-cc2ca9c3.js","./utils-0d179f64.js","./EffectView-dffeb0bc.js","./parser-01f6451e.js","./colorUtils-639f4d25.js","./screenUtils-90993e16.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./vec3f64-6cd30318.js","./Evented-cbf5f368.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec4-46a9b36d.js","./enums-4b2a86a0.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexElementDescriptor-2925c6af.js","./definitions-2d0dd0cd.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./Color-af6e0c66.js","./vec2f64-30dc1443.js","./VertexArrayObject-3630ef4f.js","./vec4f32-2f36231b.js","./ProgramTemplate-f021fc55.js","./StyleDefinition-7d58136b.js","./config-1337d16e.js","./GeometryUtils-c093d234.js","./reactiveUtils-5869e41a.js","./earcut-58237617.js","./vec2-ab9f47bf.js","./featureConversionUtils-d2229ed4.js","./jsonUtils-c6684c52.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./LayerView2D-fc5f87cc.js","./Collection-7c37b74e.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./geometry-eec1b371.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./LayerView-a849dd77.js","./HandleOwner-2edbba46.js","./Identifiable-093f90a8.js","./Promise-368b703a.js"],import.meta.url)),imagery:()=>_i().then(()=>Fe(()=>import("./ImageryLayerView2D-a00540e9.js"),["./ImageryLayerView2D-a00540e9.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./Graphic-6c08e65d.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./enumeration-61a13175.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./reactiveUtils-5869e41a.js","./GraphicsLayer-b332f442.js","./HandleOwner-2edbba46.js","./Layer-cea228f0.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./ScaleRangeLayer-c072e266.js","./ElevationInfo-80227ecc.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./RasterVFDisplayObject-2150bbff.js","./VertexArrayObject-3630ef4f.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./dataUtils-9a2072d5.js","./pixelUtils-cc2ca9c3.js","./WGLContainer-b2d1fffc.js","./mat3f32-d3d088e8.js","./mat3-9a8d9db7.js","./vec2f32-461e65a9.js","./utils-0d179f64.js","./EffectView-dffeb0bc.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./enums-4b2a86a0.js","./definitions-2d0dd0cd.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./vec2f64-30dc1443.js","./vec4f32-2f36231b.js","./ProgramTemplate-f021fc55.js","./StyleDefinition-7d58136b.js","./config-1337d16e.js","./GeometryUtils-c093d234.js","./earcut-58237617.js","./vec2-ab9f47bf.js","./featureConversionUtils-d2229ed4.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./LayerView2D-fc5f87cc.js","./BaseGraphicContainer-3ea19653.js","./cimAnalyzer-a68275f3.js","./fontUtils-4ed0e787.js","./BidiEngine-836b7ef6.js","./utils-c81a5c52.js","./mat2d-d0b91e3e.js","./Rect-ea14f53a.js","./callExpressionWithFeature-13fe9b68.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./colorRamps-8d7efc14.js","./GeometryUtils-eebff0a0.js","./floatRGBA-090399ba.js","./normalizeUtilsSync-6d84346c.js","./normalizeUtils-0f537694.js","./utils-44a68fd6.js","./projection-acd73147.js","./assets-cd44347b.js","./zscale-48bab05e.js","./json-48e3ea08.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./jsonUtils-8c02ff16.js","./FeatureContainer-e57c4b30.js","./TileContainer-a618bf74.js","./TileKey-9cae9369.js","./Queue-275a6362.js","./visualVariablesUtils-c668eb89.js","./visualVariablesUtils-3304d1a5.js","./capabilities-d08b6e58.js","./Matcher-acc26e80.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./tileUtils-dbff68ee.js","./TileClipper-31a81f15.js","./Geometry-daada628.js","./LRUCache-b9228ca3.js","./MemCache-1d2f56ee.js","./ExpandedCIM-5a2216e6.js","./devEnvironmentUtils-5002a058.js","./styleUtils-391927cf.js","./schemaUtils-76874a61.js","./LayerFloorInfo-f184c8f5.js","./diffUtils-8a8cb5bc.js","./createSymbolSchema-1bb8123a.js","./rendererUtils-c63e720f.js","./FeatureReductionLayer-fcaeb34a.js","./UniqueValueRenderer-73d567ad.js","./LegendOptions-2e7b3d70.js","./sizeVariableUtils-d4870b0d.js","./compilerUtils-fefa73ae.js","./jsonUtils-1c5cdf77.js","./DictionaryLoader-2a334243.js","./deprecate-0d93948c.js","./OperationalLayer-9c50475b.js","./util-0a217e96.js","./ComputedAttributeStorage-87b4df43.js","./FeatureSetReader-3d68adfe.js","./centroid-56c5816c.js","./FieldsIndex-02142c8a.js","./vec3f32-4322908d.js","./HighlightGraphicContainer-48751e5c.js","./BitmapContainer-b9fd36c2.js","./Bitmap-ff7d2c07.js","./ExportStrategy-333562f0.js","./TileInfo-c5c8c8d2.js","./rasterProjectionHelper-47b61708.js","./popupUtils-b4549770.js","./LayerView-a849dd77.js","./RefreshableLayerView-2de321c7.js"],import.meta.url)),"imagery-tile":()=>_i().then(()=>Fe(()=>import("./ImageryTileLayerView2D-212f9b1d.js"),["./ImageryTileLayerView2D-212f9b1d.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./Graphic-6c08e65d.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./enumeration-61a13175.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./reactiveUtils-5869e41a.js","./multidimensionalUtils-cd526d1d.js","./RasterVFDisplayObject-2150bbff.js","./HandleOwner-2edbba46.js","./VertexArrayObject-3630ef4f.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./dataUtils-9a2072d5.js","./pixelUtils-cc2ca9c3.js","./WGLContainer-b2d1fffc.js","./mat3f32-d3d088e8.js","./mat3-9a8d9db7.js","./vec2f32-461e65a9.js","./utils-0d179f64.js","./EffectView-dffeb0bc.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./enums-4b2a86a0.js","./definitions-2d0dd0cd.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./vec2f64-30dc1443.js","./vec4f32-2f36231b.js","./ProgramTemplate-f021fc55.js","./StyleDefinition-7d58136b.js","./config-1337d16e.js","./GeometryUtils-c093d234.js","./earcut-58237617.js","./vec2-ab9f47bf.js","./featureConversionUtils-d2229ed4.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./LayerView2D-fc5f87cc.js","./TileContainer-a618bf74.js","./TileKey-9cae9369.js","./TileInfo-c5c8c8d2.js","./unitUtils-dd6fb8ee.js","./RawBlockCache-389ca765.js","./rasterProjectionHelper-47b61708.js","./projection-acd73147.js","./assets-cd44347b.js","./zscale-48bab05e.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./Queue-275a6362.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./capabilities-d08b6e58.js","./util-0a217e96.js","./OperationalLayer-9c50475b.js","./ElevationInfo-80227ecc.js","./lengthUtils-92fed992.js","./popupUtils-b4549770.js","./LayerView-a849dd77.js","./RefreshableLayerView-2de321c7.js","./Basemap-59ed9516.js","./deprecate-0d93948c.js","./loadAll-01cdf0a9.js","./asyncUtils-087555fc.js","./PortalItem-e4ba4b94.js","./messages-28bf3b89.js","./writeUtils-3bde6e49.js","./layerUtils-68eea656.js","./compilerUtils-fefa73ae.js","./CollectionFlattener-f43a0fce.js","./TablesMixin-55858fba.js","./Layer-cea228f0.js","./Cyclical-078b4564.js","./workers-af024c50.js","./Connection-b591250e.js","./intl-7d39a8c0.js","./widget-4abc68df.js","./uuid-73213768.js","./dom-5b7af1bf.js","./byteSizeEstimations-90c5a50d.js","./executeQueryJSON-29279a46.js","./normalizeUtils-0f537694.js","./query-b7b3a76b.js","./pbfQueryUtils-c922ef32.js","./pbf-8b0546e8.js","./queryZScale-3c8de33a.js","./FeatureSet-deb2029d.js","./RelationshipQuery-c27267ab.js","./LegendOptions-2e7b3d70.js","./utils-4469bf65.js","./BlendLayer-813950f9.js","./ItemCache-bf1028d4.js","./MemCache-1d2f56ee.js","./utils-c81a5c52.js","./jsonUtils-1c5cdf77.js","./UniqueValueRenderer-73d567ad.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./TopFeaturesQuery-9aca00bf.js","./FeatureLayer-534ff006.js","./MultiOriginJSONSupport-b8792dfa.js","./LayerFloorInfo-f184c8f5.js","./FeatureLayerBase-c0aa3674.js","./HeightModelInfo-34f16d74.js","./arcgisLayerUrl-bed3cba1.js","./editsZScale-12d81957.js","./APIKeyMixin-b6e4f897.js","./ArcGISService-aada3b5d.js","./CustomParametersMixin-a5d06ccc.js","./EditBusLayer-b5dc3689.js","./FeatureReductionLayer-fcaeb34a.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./OrderedLayer-9623e905.js","./PortalLayer-12f4a535.js","./RefreshableLayer-49182ab8.js","./ScaleRangeLayer-c072e266.js","./TemporalLayer-c74d13d4.js","./TimeInfo-f76d6c20.js","./FeatureTemplate-c4496b93.js","./FeatureType-0be9420b.js","./fieldProperties-4207e953.js","./FieldsIndex-02142c8a.js","./versionUtils-fabd8b3a.js","./styleUtils-08eaa4d2.js","./popupUtils-1ecc877c.js","./colorUtils-82440b70.js","./mat2d-d0b91e3e.js","./Scheduler-5e6ccc87.js","./GraphicsLayer-b332f442.js","./ViewingMode-915d19cb.js","./unitBezier-881ac1eb.js","./Subtype-a3103d84.js","./datetime-4f774298.js","./elevationInfoUtils-c3025fae.js","./QueryEngineResult-92e13fe4.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./WhereClause-6c9440a1.js","./utils-44a68fd6.js","./json-48e3ea08.js","./Util-289ce3b5.js","./ExportImageParameters-ba01802d.js","./sublayerUtils-eea48c01.js","./webStyleSymbolUtils-0b165621.js","./devEnvironmentUtils-5002a058.js","./dehydratedFeatures-3dcd65f1.js","./plane-46a8c767.js","./sphere-622880b9.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./quat-ec16a584.js"],import.meta.url)),kml:()=>_i().then(()=>Fe(()=>import("./KMLLayerView2D-226a0870.js"),["./KMLLayerView2D-226a0870.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./request-24011425.js","./preload-helper-41c905a7.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./reactiveUtils-5869e41a.js","./Extent-a1a1de42.js","./projection-acd73147.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./unitUtils-dd6fb8ee.js","./jsonMap-190c5593.js","./mat4-7dde83b1.js","./Polyline-b571c705.js","./assets-cd44347b.js","./aaBoundingRect-b340cf8c.js","./zscale-48bab05e.js","./kmlUtils-f1a96969.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./fieldUtils-b2df74c4.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./typeUtils-cd52dc20.js","./enumeration-61a13175.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./aaBoundingBox-4a83dbbc.js","./jsonUtils-1c5cdf77.js","./UniqueValueRenderer-73d567ad.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./LegendOptions-2e7b3d70.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./Graphic-6c08e65d.js","./jsonUtils-c6684c52.js","./compilerUtils-fefa73ae.js","./lengthUtils-92fed992.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./MemCache-1d2f56ee.js","./deprecate-0d93948c.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./FeatureSet-deb2029d.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./normalizeUtils-0f537694.js","./GraphicsLayer-b332f442.js","./HandleOwner-2edbba46.js","./Layer-cea228f0.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./ScaleRangeLayer-c072e266.js","./ElevationInfo-80227ecc.js","./Bitmap-ff7d2c07.js","./mat3-9a8d9db7.js","./mat3f32-d3d088e8.js","./vec2f32-461e65a9.js","./utils-0d179f64.js","./EffectView-dffeb0bc.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./enums-4b2a86a0.js","./enums-64ab819c.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexElementDescriptor-2925c6af.js","./definitions-2d0dd0cd.js","./BitmapContainer-b9fd36c2.js","./WGLContainer-b2d1fffc.js","./pixelUtils-cc2ca9c3.js","./vec2f64-30dc1443.js","./VertexArrayObject-3630ef4f.js","./vec4f32-2f36231b.js","./ProgramTemplate-f021fc55.js","./StyleDefinition-7d58136b.js","./config-1337d16e.js","./GeometryUtils-c093d234.js","./earcut-58237617.js","./vec2-ab9f47bf.js","./featureConversionUtils-d2229ed4.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./LayerView2D-fc5f87cc.js","./GraphicContainer-6eb8d408.js","./BaseGraphicContainer-3ea19653.js","./cimAnalyzer-a68275f3.js","./fontUtils-4ed0e787.js","./BidiEngine-836b7ef6.js","./utils-c81a5c52.js","./mat2d-d0b91e3e.js","./Rect-ea14f53a.js","./callExpressionWithFeature-13fe9b68.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./GeometryUtils-eebff0a0.js","./floatRGBA-090399ba.js","./normalizeUtilsSync-6d84346c.js","./utils-44a68fd6.js","./json-48e3ea08.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./FeatureContainer-e57c4b30.js","./TileContainer-a618bf74.js","./TileKey-9cae9369.js","./Queue-275a6362.js","./visualVariablesUtils-c668eb89.js","./visualVariablesUtils-3304d1a5.js","./capabilities-d08b6e58.js","./Matcher-acc26e80.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./tileUtils-dbff68ee.js","./TileClipper-31a81f15.js","./Geometry-daada628.js","./ExpandedCIM-5a2216e6.js","./devEnvironmentUtils-5002a058.js","./schemaUtils-76874a61.js","./LayerFloorInfo-f184c8f5.js","./createSymbolSchema-1bb8123a.js","./rendererUtils-c63e720f.js","./FeatureReductionLayer-fcaeb34a.js","./OperationalLayer-9c50475b.js","./util-0a217e96.js","./ComputedAttributeStorage-87b4df43.js","./FeatureSetReader-3d68adfe.js","./centroid-56c5816c.js","./FieldsIndex-02142c8a.js","./vec3f32-4322908d.js","./LayerView-a849dd77.js","./rasterProjectionHelper-47b61708.js","./RenderingContext-b74012a7.js","./programUtils-71c4f47c.js","./NestedMap-1b5db22e.js","./OrderIndependentTransparency-68bd812c.js"],import.meta.url)),"map-image":()=>_i().then(()=>Fe(()=>import("./MapImageLayerView2D-265f819b.js"),["./MapImageLayerView2D-265f819b.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./Graphic-6c08e65d.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./enumeration-61a13175.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./reactiveUtils-5869e41a.js","./BitmapContainer-b9fd36c2.js","./WGLContainer-b2d1fffc.js","./mat3f32-d3d088e8.js","./enums-64ab819c.js","./mat3-9a8d9db7.js","./vec2f32-461e65a9.js","./pixelUtils-cc2ca9c3.js","./utils-0d179f64.js","./EffectView-dffeb0bc.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./enums-4b2a86a0.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexElementDescriptor-2925c6af.js","./definitions-2d0dd0cd.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./vec2f64-30dc1443.js","./VertexArrayObject-3630ef4f.js","./vec4f32-2f36231b.js","./ProgramTemplate-f021fc55.js","./StyleDefinition-7d58136b.js","./config-1337d16e.js","./GeometryUtils-c093d234.js","./earcut-58237617.js","./vec2-ab9f47bf.js","./featureConversionUtils-d2229ed4.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./LayerView2D-fc5f87cc.js","./BaseGraphicContainer-3ea19653.js","./cimAnalyzer-a68275f3.js","./fontUtils-4ed0e787.js","./BidiEngine-836b7ef6.js","./utils-c81a5c52.js","./mat2d-d0b91e3e.js","./Rect-ea14f53a.js","./callExpressionWithFeature-13fe9b68.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./colorRamps-8d7efc14.js","./GeometryUtils-eebff0a0.js","./floatRGBA-090399ba.js","./HandleOwner-2edbba46.js","./normalizeUtilsSync-6d84346c.js","./normalizeUtils-0f537694.js","./utils-44a68fd6.js","./unitUtils-dd6fb8ee.js","./projection-acd73147.js","./assets-cd44347b.js","./zscale-48bab05e.js","./json-48e3ea08.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./jsonUtils-8c02ff16.js","./FeatureContainer-e57c4b30.js","./TileContainer-a618bf74.js","./TileKey-9cae9369.js","./Queue-275a6362.js","./visualVariablesUtils-c668eb89.js","./visualVariablesUtils-3304d1a5.js","./lengthUtils-92fed992.js","./capabilities-d08b6e58.js","./Matcher-acc26e80.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./tileUtils-dbff68ee.js","./TileClipper-31a81f15.js","./Geometry-daada628.js","./LRUCache-b9228ca3.js","./MemCache-1d2f56ee.js","./ExpandedCIM-5a2216e6.js","./devEnvironmentUtils-5002a058.js","./styleUtils-391927cf.js","./schemaUtils-76874a61.js","./LayerFloorInfo-f184c8f5.js","./diffUtils-8a8cb5bc.js","./createSymbolSchema-1bb8123a.js","./rendererUtils-c63e720f.js","./FeatureReductionLayer-fcaeb34a.js","./BlendLayer-813950f9.js","./UniqueValueRenderer-73d567ad.js","./LegendOptions-2e7b3d70.js","./sizeVariableUtils-d4870b0d.js","./compilerUtils-fefa73ae.js","./jsonUtils-1c5cdf77.js","./DictionaryLoader-2a334243.js","./deprecate-0d93948c.js","./OperationalLayer-9c50475b.js","./ElevationInfo-80227ecc.js","./util-0a217e96.js","./ComputedAttributeStorage-87b4df43.js","./FeatureSetReader-3d68adfe.js","./centroid-56c5816c.js","./FieldsIndex-02142c8a.js","./vec3f32-4322908d.js","./HighlightGraphicContainer-48751e5c.js","./ExportStrategy-333562f0.js","./TileInfo-c5c8c8d2.js","./Bitmap-ff7d2c07.js","./LayerView-a849dd77.js","./scaleUtils-c3568f87.js","./ExportImageParameters-ba01802d.js","./sublayerUtils-eea48c01.js","./GraphicsLayer-b332f442.js","./Layer-cea228f0.js","./ScaleRangeLayer-c072e266.js","./popupUtils-b4549770.js","./RefreshableLayerView-2de321c7.js","./Basemap-59ed9516.js","./loadAll-01cdf0a9.js","./asyncUtils-087555fc.js","./PortalItem-e4ba4b94.js","./messages-28bf3b89.js","./writeUtils-3bde6e49.js","./layerUtils-68eea656.js","./CollectionFlattener-f43a0fce.js","./TablesMixin-55858fba.js","./Cyclical-078b4564.js","./workers-af024c50.js","./Connection-b591250e.js","./intl-7d39a8c0.js","./widget-4abc68df.js","./uuid-73213768.js","./dom-5b7af1bf.js","./byteSizeEstimations-90c5a50d.js","./executeQueryJSON-29279a46.js","./query-b7b3a76b.js","./pbfQueryUtils-c922ef32.js","./pbf-8b0546e8.js","./queryZScale-3c8de33a.js","./FeatureSet-deb2029d.js","./RelationshipQuery-c27267ab.js","./utils-4469bf65.js","./ItemCache-bf1028d4.js","./TopFeaturesQuery-9aca00bf.js","./FeatureLayer-534ff006.js","./MultiOriginJSONSupport-b8792dfa.js","./FeatureLayerBase-c0aa3674.js","./HeightModelInfo-34f16d74.js","./arcgisLayerUrl-bed3cba1.js","./editsZScale-12d81957.js","./APIKeyMixin-b6e4f897.js","./ArcGISService-aada3b5d.js","./CustomParametersMixin-a5d06ccc.js","./EditBusLayer-b5dc3689.js","./OrderedLayer-9623e905.js","./PortalLayer-12f4a535.js","./RefreshableLayer-49182ab8.js","./TemporalLayer-c74d13d4.js","./TimeInfo-f76d6c20.js","./FeatureTemplate-c4496b93.js","./FeatureType-0be9420b.js","./fieldProperties-4207e953.js","./versionUtils-fabd8b3a.js","./styleUtils-08eaa4d2.js","./popupUtils-1ecc877c.js","./colorUtils-82440b70.js","./Scheduler-5e6ccc87.js","./ViewingMode-915d19cb.js","./unitBezier-881ac1eb.js","./Subtype-a3103d84.js","./datetime-4f774298.js","./elevationInfoUtils-c3025fae.js","./QueryEngineResult-92e13fe4.js","./WhereClause-6c9440a1.js","./Util-289ce3b5.js","./webStyleSymbolUtils-0b165621.js","./dehydratedFeatures-3dcd65f1.js","./plane-46a8c767.js","./sphere-622880b9.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./quat-ec16a584.js"],import.meta.url)),"map-notes":()=>_i().then(()=>Fe(()=>import("./MapNotesLayerView2D-b999fa7d.js"),["./MapNotesLayerView2D-b999fa7d.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./Graphic-6c08e65d.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./enumeration-61a13175.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./reactiveUtils-5869e41a.js","./utils-0d179f64.js","./mat3f32-d3d088e8.js","./EffectView-dffeb0bc.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./enums-4b2a86a0.js","./enums-64ab819c.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexElementDescriptor-2925c6af.js","./definitions-2d0dd0cd.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./GroupContainer-e381229e.js","./WGLContainer-b2d1fffc.js","./mat3-9a8d9db7.js","./vec2f32-461e65a9.js","./pixelUtils-cc2ca9c3.js","./vec2f64-30dc1443.js","./VertexArrayObject-3630ef4f.js","./vec4f32-2f36231b.js","./ProgramTemplate-f021fc55.js","./StyleDefinition-7d58136b.js","./config-1337d16e.js","./GeometryUtils-c093d234.js","./earcut-58237617.js","./vec2-ab9f47bf.js","./featureConversionUtils-d2229ed4.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./LayerView2D-fc5f87cc.js","./GraphicContainer-6eb8d408.js","./BaseGraphicContainer-3ea19653.js","./cimAnalyzer-a68275f3.js","./fontUtils-4ed0e787.js","./BidiEngine-836b7ef6.js","./utils-c81a5c52.js","./mat2d-d0b91e3e.js","./Rect-ea14f53a.js","./callExpressionWithFeature-13fe9b68.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./colorRamps-8d7efc14.js","./GeometryUtils-eebff0a0.js","./floatRGBA-090399ba.js","./HandleOwner-2edbba46.js","./normalizeUtilsSync-6d84346c.js","./normalizeUtils-0f537694.js","./utils-44a68fd6.js","./unitUtils-dd6fb8ee.js","./projection-acd73147.js","./assets-cd44347b.js","./zscale-48bab05e.js","./json-48e3ea08.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./jsonUtils-8c02ff16.js","./FeatureContainer-e57c4b30.js","./TileContainer-a618bf74.js","./TileKey-9cae9369.js","./Queue-275a6362.js","./visualVariablesUtils-c668eb89.js","./visualVariablesUtils-3304d1a5.js","./lengthUtils-92fed992.js","./capabilities-d08b6e58.js","./Matcher-acc26e80.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./tileUtils-dbff68ee.js","./TileClipper-31a81f15.js","./Geometry-daada628.js","./LRUCache-b9228ca3.js","./MemCache-1d2f56ee.js","./ExpandedCIM-5a2216e6.js","./devEnvironmentUtils-5002a058.js","./styleUtils-391927cf.js","./schemaUtils-76874a61.js","./LayerFloorInfo-f184c8f5.js","./diffUtils-8a8cb5bc.js","./createSymbolSchema-1bb8123a.js","./rendererUtils-c63e720f.js","./FeatureReductionLayer-fcaeb34a.js","./BlendLayer-813950f9.js","./UniqueValueRenderer-73d567ad.js","./LegendOptions-2e7b3d70.js","./sizeVariableUtils-d4870b0d.js","./compilerUtils-fefa73ae.js","./jsonUtils-1c5cdf77.js","./DictionaryLoader-2a334243.js","./deprecate-0d93948c.js","./OperationalLayer-9c50475b.js","./ElevationInfo-80227ecc.js","./util-0a217e96.js","./ComputedAttributeStorage-87b4df43.js","./FeatureSetReader-3d68adfe.js","./centroid-56c5816c.js","./FieldsIndex-02142c8a.js","./vec3f32-4322908d.js","./LayerView-a849dd77.js"],import.meta.url)),media:()=>_i().then(()=>Fe(()=>import("./MediaLayerView2D-aa441f1c.js"),["./MediaLayerView2D-aa441f1c.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./reactiveUtils-5869e41a.js","./aaBoundingRect-b340cf8c.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./projection-acd73147.js","./preload-helper-41c905a7.js","./unitUtils-dd6fb8ee.js","./mat4-7dde83b1.js","./assets-cd44347b.js","./request-24011425.js","./zscale-48bab05e.js","./normalizeUtilsSync-6d84346c.js","./jsonUtils-c6684c52.js","./normalizeUtils-0f537694.js","./TileStrategy-a5366189.js","./vec2-ab9f47bf.js","./TileStore-8f580dbf.js","./Queue-275a6362.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./enumeration-61a13175.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./Clonable-9b34e760.js","./mat3-9a8d9db7.js","./quatf64-c94bd656.js","./vec2f64-30dc1443.js","./utils-0d179f64.js","./mat3f32-d3d088e8.js","./EffectView-dffeb0bc.js","./parser-01f6451e.js","./colorUtils-639f4d25.js","./screenUtils-90993e16.js","./mat4f32-77b3d8ac.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./enums-4b2a86a0.js","./enums-64ab819c.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexElementDescriptor-2925c6af.js","./definitions-2d0dd0cd.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./Color-af6e0c66.js","./VertexArrayObject-3630ef4f.js","./vec2f32-461e65a9.js","./vec3f32-4322908d.js","./WGLContainer-b2d1fffc.js","./pixelUtils-cc2ca9c3.js","./vec4f32-2f36231b.js","./ProgramTemplate-f021fc55.js","./StyleDefinition-7d58136b.js","./config-1337d16e.js","./GeometryUtils-c093d234.js","./earcut-58237617.js","./featureConversionUtils-d2229ed4.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./LayerView2D-fc5f87cc.js","./collectionUtils-0365f48b.js","./LayerView-a849dd77.js","./HandleOwner-2edbba46.js","./Identifiable-093f90a8.js","./Promise-368b703a.js","./Basemap-59ed9516.js","./deprecate-0d93948c.js","./Loadable-46524a7e.js","./loadAll-01cdf0a9.js","./asyncUtils-087555fc.js","./Portal-c6e03126.js","./locale-30120714.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./PortalItem-e4ba4b94.js","./messages-28bf3b89.js","./writeUtils-3bde6e49.js","./layerUtils-68eea656.js","./compilerUtils-fefa73ae.js","./opacityUtils-1333f803.js","./CollectionFlattener-f43a0fce.js","./TablesMixin-55858fba.js","./Layer-cea228f0.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./fieldUtils-b2df74c4.js","./arcadeOnDemand-a976a73c.js","./number-2ab8ca0d.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./persistableUrlUtils-d0777bec.js","./Cyclical-078b4564.js","./workers-af024c50.js","./Connection-b591250e.js","./intl-7d39a8c0.js","./TileInfo-c5c8c8d2.js","./widget-4abc68df.js","./uuid-73213768.js","./dom-5b7af1bf.js","./byteSizeEstimations-90c5a50d.js","./executeQueryJSON-29279a46.js","./query-b7b3a76b.js","./pbfQueryUtils-c922ef32.js","./pbf-8b0546e8.js","./queryZScale-3c8de33a.js","./FeatureSet-deb2029d.js","./RelationshipQuery-c27267ab.js","./LegendOptions-2e7b3d70.js","./utils-4469bf65.js","./BlendLayer-813950f9.js","./ItemCache-bf1028d4.js","./MemCache-1d2f56ee.js","./utils-c81a5c52.js","./jsonUtils-1c5cdf77.js","./UniqueValueRenderer-73d567ad.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./lengthUtils-92fed992.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./TopFeaturesQuery-9aca00bf.js","./FeatureLayer-534ff006.js","./MultiOriginJSONSupport-b8792dfa.js","./LayerFloorInfo-f184c8f5.js","./FeatureLayerBase-c0aa3674.js","./HeightModelInfo-34f16d74.js","./arcgisLayerUrl-bed3cba1.js","./OperationalLayer-9c50475b.js","./ElevationInfo-80227ecc.js","./editsZScale-12d81957.js","./APIKeyMixin-b6e4f897.js","./ArcGISService-aada3b5d.js","./CustomParametersMixin-a5d06ccc.js","./EditBusLayer-b5dc3689.js","./FeatureReductionLayer-fcaeb34a.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./OrderedLayer-9623e905.js","./PortalLayer-12f4a535.js","./RefreshableLayer-49182ab8.js","./ScaleRangeLayer-c072e266.js","./TemporalLayer-c74d13d4.js","./TimeInfo-f76d6c20.js","./FeatureTemplate-c4496b93.js","./FeatureType-0be9420b.js","./fieldProperties-4207e953.js","./FieldsIndex-02142c8a.js","./versionUtils-fabd8b3a.js","./styleUtils-08eaa4d2.js","./popupUtils-1ecc877c.js","./colorUtils-82440b70.js","./mat2d-d0b91e3e.js","./Scheduler-5e6ccc87.js","./GraphicsLayer-b332f442.js","./ViewingMode-915d19cb.js","./unitBezier-881ac1eb.js","./capabilities-d08b6e58.js","./Subtype-a3103d84.js","./datetime-4f774298.js","./elevationInfoUtils-c3025fae.js","./QueryEngineResult-92e13fe4.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./WhereClause-6c9440a1.js","./utils-44a68fd6.js","./json-48e3ea08.js","./Util-289ce3b5.js","./ExportImageParameters-ba01802d.js","./sublayerUtils-eea48c01.js","./webStyleSymbolUtils-0b165621.js","./devEnvironmentUtils-5002a058.js","./dehydratedFeatures-3dcd65f1.js","./plane-46a8c767.js","./sphere-622880b9.js","./mat4f64-fbeb2cd1.js","./quat-ec16a584.js"],import.meta.url)),"ogc-feature":()=>_i().then(()=>Fe(()=>import("./OGCFeatureLayerView2D-d632738d.js"),["./OGCFeatureLayerView2D-d632738d.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./FeatureLayerView2D-92538871.js","./Graphic-6c08e65d.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./enumeration-61a13175.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./reactiveUtils-5869e41a.js","./EffectView-dffeb0bc.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./FeatureReductionLayer-fcaeb34a.js","./BlendLayer-813950f9.js","./TimeExtent-2004eecf.js","./Query-13124a97.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./UniqueValueRenderer-73d567ad.js","./LegendOptions-2e7b3d70.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./compilerUtils-fefa73ae.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./jsonUtils-1c5cdf77.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./MemCache-1d2f56ee.js","./deprecate-0d93948c.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./OperationalLayer-9c50475b.js","./ElevationInfo-80227ecc.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./FeatureSet-deb2029d.js","./definitions-2d0dd0cd.js","./LayerView2D-fc5f87cc.js","./utils-0d179f64.js","./mat3f32-d3d088e8.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./enums-4b2a86a0.js","./enums-64ab819c.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexElementDescriptor-2925c6af.js","./schemaUtils-76874a61.js","./LayerFloorInfo-f184c8f5.js","./visualVariablesUtils-3304d1a5.js","./createSymbolSchema-1bb8123a.js","./cimAnalyzer-a68275f3.js","./fontUtils-4ed0e787.js","./BidiEngine-836b7ef6.js","./utils-c81a5c52.js","./mat2d-d0b91e3e.js","./vec2-ab9f47bf.js","./vec2f32-461e65a9.js","./Rect-ea14f53a.js","./callExpressionWithFeature-13fe9b68.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./GeometryUtils-eebff0a0.js","./floatRGBA-090399ba.js","./ExpandedCIM-5a2216e6.js","./rendererUtils-c63e720f.js","./capabilities-d08b6e58.js","./util-0a217e96.js","./TileStore-8f580dbf.js","./Queue-275a6362.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./workers-af024c50.js","./Connection-b591250e.js","./assets-cd44347b.js","./intl-7d39a8c0.js","./messages-28bf3b89.js","./ExportImageParameters-ba01802d.js","./HandleOwner-2edbba46.js","./sublayerUtils-eea48c01.js","./popupUtils-b4549770.js","./LayerView-a849dd77.js","./RefreshableLayerView-2de321c7.js"],import.meta.url)),"open-street-map":Hh,"oriented-imagery":Uh,route:()=>_i().then(()=>Fe(()=>import("./RouteLayerView2D-01bbf74e.js"),["./RouteLayerView2D-01bbf74e.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./CollectionFlattener-f43a0fce.js","./reactiveUtils-5869e41a.js","./Stop-d697dd75.js","./Graphic-6c08e65d.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./enumeration-61a13175.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./LayerView2D-fc5f87cc.js","./utils-0d179f64.js","./mat3f32-d3d088e8.js","./EffectView-dffeb0bc.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./enums-4b2a86a0.js","./enums-64ab819c.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexElementDescriptor-2925c6af.js","./definitions-2d0dd0cd.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./GraphicContainer-6eb8d408.js","./BaseGraphicContainer-3ea19653.js","./cimAnalyzer-a68275f3.js","./fontUtils-4ed0e787.js","./BidiEngine-836b7ef6.js","./utils-c81a5c52.js","./mat2d-d0b91e3e.js","./vec2-ab9f47bf.js","./vec2f32-461e65a9.js","./Rect-ea14f53a.js","./callExpressionWithFeature-13fe9b68.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./colorRamps-8d7efc14.js","./GeometryUtils-eebff0a0.js","./floatRGBA-090399ba.js","./HandleOwner-2edbba46.js","./normalizeUtilsSync-6d84346c.js","./normalizeUtils-0f537694.js","./utils-44a68fd6.js","./unitUtils-dd6fb8ee.js","./projection-acd73147.js","./assets-cd44347b.js","./zscale-48bab05e.js","./featureConversionUtils-d2229ed4.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./json-48e3ea08.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./jsonUtils-8c02ff16.js","./VertexArrayObject-3630ef4f.js","./FeatureContainer-e57c4b30.js","./mat3-9a8d9db7.js","./TileContainer-a618bf74.js","./TileKey-9cae9369.js","./WGLContainer-b2d1fffc.js","./pixelUtils-cc2ca9c3.js","./vec2f64-30dc1443.js","./vec4f32-2f36231b.js","./ProgramTemplate-f021fc55.js","./StyleDefinition-7d58136b.js","./config-1337d16e.js","./GeometryUtils-c093d234.js","./earcut-58237617.js","./Queue-275a6362.js","./visualVariablesUtils-c668eb89.js","./visualVariablesUtils-3304d1a5.js","./lengthUtils-92fed992.js","./capabilities-d08b6e58.js","./Matcher-acc26e80.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./tileUtils-dbff68ee.js","./TileClipper-31a81f15.js","./Geometry-daada628.js","./LRUCache-b9228ca3.js","./MemCache-1d2f56ee.js","./ExpandedCIM-5a2216e6.js","./devEnvironmentUtils-5002a058.js","./styleUtils-391927cf.js","./schemaUtils-76874a61.js","./LayerFloorInfo-f184c8f5.js","./diffUtils-8a8cb5bc.js","./createSymbolSchema-1bb8123a.js","./rendererUtils-c63e720f.js","./FeatureReductionLayer-fcaeb34a.js","./BlendLayer-813950f9.js","./UniqueValueRenderer-73d567ad.js","./LegendOptions-2e7b3d70.js","./sizeVariableUtils-d4870b0d.js","./compilerUtils-fefa73ae.js","./jsonUtils-1c5cdf77.js","./DictionaryLoader-2a334243.js","./deprecate-0d93948c.js","./OperationalLayer-9c50475b.js","./ElevationInfo-80227ecc.js","./util-0a217e96.js","./ComputedAttributeStorage-87b4df43.js","./FeatureSetReader-3d68adfe.js","./centroid-56c5816c.js","./FieldsIndex-02142c8a.js","./vec3f32-4322908d.js","./LayerView-a849dd77.js"],import.meta.url)),stream:()=>_i().then(()=>Fe(()=>import("./StreamLayerView2D-465cd3ad.js"),["./StreamLayerView2D-465cd3ad.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./reactiveUtils-5869e41a.js","./FeatureSet-deb2029d.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./enumeration-61a13175.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./FeatureLayerView2D-92538871.js","./EffectView-dffeb0bc.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./FeatureReductionLayer-fcaeb34a.js","./BlendLayer-813950f9.js","./TimeExtent-2004eecf.js","./Query-13124a97.js","./UniqueValueRenderer-73d567ad.js","./LegendOptions-2e7b3d70.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./compilerUtils-fefa73ae.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./jsonUtils-1c5cdf77.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./MemCache-1d2f56ee.js","./deprecate-0d93948c.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./OperationalLayer-9c50475b.js","./ElevationInfo-80227ecc.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./definitions-2d0dd0cd.js","./LayerView2D-fc5f87cc.js","./utils-0d179f64.js","./mat3f32-d3d088e8.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./enums-4b2a86a0.js","./enums-64ab819c.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexElementDescriptor-2925c6af.js","./schemaUtils-76874a61.js","./LayerFloorInfo-f184c8f5.js","./visualVariablesUtils-3304d1a5.js","./createSymbolSchema-1bb8123a.js","./cimAnalyzer-a68275f3.js","./fontUtils-4ed0e787.js","./BidiEngine-836b7ef6.js","./utils-c81a5c52.js","./mat2d-d0b91e3e.js","./vec2-ab9f47bf.js","./vec2f32-461e65a9.js","./Rect-ea14f53a.js","./callExpressionWithFeature-13fe9b68.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./GeometryUtils-eebff0a0.js","./floatRGBA-090399ba.js","./ExpandedCIM-5a2216e6.js","./rendererUtils-c63e720f.js","./capabilities-d08b6e58.js","./util-0a217e96.js","./TileStore-8f580dbf.js","./Queue-275a6362.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./workers-af024c50.js","./Connection-b591250e.js","./assets-cd44347b.js","./intl-7d39a8c0.js","./messages-28bf3b89.js","./ExportImageParameters-ba01802d.js","./HandleOwner-2edbba46.js","./sublayerUtils-eea48c01.js","./popupUtils-b4549770.js","./LayerView-a849dd77.js","./RefreshableLayerView-2de321c7.js"],import.meta.url)),"subtype-group":()=>_i().then(()=>Fe(()=>import("./SubtypeGroupLayerView2D-6044ff47.js"),["./SubtypeGroupLayerView2D-6044ff47.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./reactiveUtils-5869e41a.js","./FeatureReductionLayer-fcaeb34a.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./colorUtils-639f4d25.js","./screenUtils-90993e16.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./vec3f64-6cd30318.js","./common-c186b691.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./TimeExtent-2004eecf.js","./Query-13124a97.js","./enumeration-61a13175.js","./jsonUtils-c6684c52.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./Clonable-9b34e760.js","./PopupTemplate-f97bb051.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./UniqueValueRenderer-73d567ad.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec4-46a9b36d.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./LegendOptions-2e7b3d70.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./Graphic-6c08e65d.js","./compilerUtils-fefa73ae.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./jsonUtils-1c5cdf77.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./MemCache-1d2f56ee.js","./deprecate-0d93948c.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./OperationalLayer-9c50475b.js","./ElevationInfo-80227ecc.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./FeatureLayerView2D-92538871.js","./EffectView-dffeb0bc.js","./FeatureSet-deb2029d.js","./definitions-2d0dd0cd.js","./LayerView2D-fc5f87cc.js","./utils-0d179f64.js","./mat3f32-d3d088e8.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./enums-4b2a86a0.js","./enums-64ab819c.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexElementDescriptor-2925c6af.js","./schemaUtils-76874a61.js","./LayerFloorInfo-f184c8f5.js","./visualVariablesUtils-3304d1a5.js","./createSymbolSchema-1bb8123a.js","./cimAnalyzer-a68275f3.js","./fontUtils-4ed0e787.js","./BidiEngine-836b7ef6.js","./utils-c81a5c52.js","./mat2d-d0b91e3e.js","./vec2-ab9f47bf.js","./vec2f32-461e65a9.js","./Rect-ea14f53a.js","./callExpressionWithFeature-13fe9b68.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./GeometryUtils-eebff0a0.js","./floatRGBA-090399ba.js","./ExpandedCIM-5a2216e6.js","./rendererUtils-c63e720f.js","./capabilities-d08b6e58.js","./util-0a217e96.js","./TileStore-8f580dbf.js","./Queue-275a6362.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./workers-af024c50.js","./Connection-b591250e.js","./assets-cd44347b.js","./intl-7d39a8c0.js","./messages-28bf3b89.js","./ExportImageParameters-ba01802d.js","./HandleOwner-2edbba46.js","./sublayerUtils-eea48c01.js","./popupUtils-b4549770.js","./LayerView-a849dd77.js","./RefreshableLayerView-2de321c7.js"],import.meta.url)),tile:Hh,"vector-tile":()=>_i().then(()=>Fe(()=>import("./VectorTileLayerView2D-829bca25.js"),["./VectorTileLayerView2D-829bca25.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./Graphic-6c08e65d.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./enumeration-61a13175.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./reactiveUtils-5869e41a.js","./diffUtils-8a8cb5bc.js","./enums-bfc9e4e9.js","./workers-af024c50.js","./Connection-b591250e.js","./Queue-275a6362.js","./assets-cd44347b.js","./intl-7d39a8c0.js","./messages-28bf3b89.js","./Rect-ea14f53a.js","./enums-64ab819c.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./pbf-8b0546e8.js","./rasterizingUtils-22a741bf.js","./floatRGBA-090399ba.js","./TileKey-9cae9369.js","./LRUCache-b9228ca3.js","./MemCache-1d2f56ee.js","./TileStore-8f580dbf.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./mat3-9a8d9db7.js","./mat3f32-d3d088e8.js","./VertexArrayObject-3630ef4f.js","./config-1337d16e.js","./TileContainer-a618bf74.js","./utils-0d179f64.js","./EffectView-dffeb0bc.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./enums-4b2a86a0.js","./VertexElementDescriptor-2925c6af.js","./definitions-2d0dd0cd.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./WGLContainer-b2d1fffc.js","./vec2f32-461e65a9.js","./pixelUtils-cc2ca9c3.js","./vec2f64-30dc1443.js","./vec4f32-2f36231b.js","./ProgramTemplate-f021fc55.js","./StyleDefinition-7d58136b.js","./GeometryUtils-c093d234.js","./earcut-58237617.js","./vec2-ab9f47bf.js","./featureConversionUtils-d2229ed4.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./StyleRepository-8b3e04ef.js","./colorUtils-82440b70.js","./unitBezier-881ac1eb.js","./GeometryUtils-eebff0a0.js","./Geometry-daada628.js","./LayerView2D-fc5f87cc.js","./TileInfo-c5c8c8d2.js","./unitUtils-dd6fb8ee.js","./TileStrategy-a5366189.js","./LayerView-a849dd77.js","./HandleOwner-2edbba46.js"],import.meta.url)),wcs:()=>_i().then(()=>Fe(()=>import("./ImageryTileLayerView2D-212f9b1d.js"),["./ImageryTileLayerView2D-212f9b1d.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./Graphic-6c08e65d.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./enumeration-61a13175.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./reactiveUtils-5869e41a.js","./multidimensionalUtils-cd526d1d.js","./RasterVFDisplayObject-2150bbff.js","./HandleOwner-2edbba46.js","./VertexArrayObject-3630ef4f.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./dataUtils-9a2072d5.js","./pixelUtils-cc2ca9c3.js","./WGLContainer-b2d1fffc.js","./mat3f32-d3d088e8.js","./mat3-9a8d9db7.js","./vec2f32-461e65a9.js","./utils-0d179f64.js","./EffectView-dffeb0bc.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./enums-4b2a86a0.js","./definitions-2d0dd0cd.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./vec2f64-30dc1443.js","./vec4f32-2f36231b.js","./ProgramTemplate-f021fc55.js","./StyleDefinition-7d58136b.js","./config-1337d16e.js","./GeometryUtils-c093d234.js","./earcut-58237617.js","./vec2-ab9f47bf.js","./featureConversionUtils-d2229ed4.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./LayerView2D-fc5f87cc.js","./TileContainer-a618bf74.js","./TileKey-9cae9369.js","./TileInfo-c5c8c8d2.js","./unitUtils-dd6fb8ee.js","./RawBlockCache-389ca765.js","./rasterProjectionHelper-47b61708.js","./projection-acd73147.js","./assets-cd44347b.js","./zscale-48bab05e.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./Queue-275a6362.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./capabilities-d08b6e58.js","./util-0a217e96.js","./OperationalLayer-9c50475b.js","./ElevationInfo-80227ecc.js","./lengthUtils-92fed992.js","./popupUtils-b4549770.js","./LayerView-a849dd77.js","./RefreshableLayerView-2de321c7.js","./Basemap-59ed9516.js","./deprecate-0d93948c.js","./loadAll-01cdf0a9.js","./asyncUtils-087555fc.js","./PortalItem-e4ba4b94.js","./messages-28bf3b89.js","./writeUtils-3bde6e49.js","./layerUtils-68eea656.js","./compilerUtils-fefa73ae.js","./CollectionFlattener-f43a0fce.js","./TablesMixin-55858fba.js","./Layer-cea228f0.js","./Cyclical-078b4564.js","./workers-af024c50.js","./Connection-b591250e.js","./intl-7d39a8c0.js","./widget-4abc68df.js","./uuid-73213768.js","./dom-5b7af1bf.js","./byteSizeEstimations-90c5a50d.js","./executeQueryJSON-29279a46.js","./normalizeUtils-0f537694.js","./query-b7b3a76b.js","./pbfQueryUtils-c922ef32.js","./pbf-8b0546e8.js","./queryZScale-3c8de33a.js","./FeatureSet-deb2029d.js","./RelationshipQuery-c27267ab.js","./LegendOptions-2e7b3d70.js","./utils-4469bf65.js","./BlendLayer-813950f9.js","./ItemCache-bf1028d4.js","./MemCache-1d2f56ee.js","./utils-c81a5c52.js","./jsonUtils-1c5cdf77.js","./UniqueValueRenderer-73d567ad.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./TopFeaturesQuery-9aca00bf.js","./FeatureLayer-534ff006.js","./MultiOriginJSONSupport-b8792dfa.js","./LayerFloorInfo-f184c8f5.js","./FeatureLayerBase-c0aa3674.js","./HeightModelInfo-34f16d74.js","./arcgisLayerUrl-bed3cba1.js","./editsZScale-12d81957.js","./APIKeyMixin-b6e4f897.js","./ArcGISService-aada3b5d.js","./CustomParametersMixin-a5d06ccc.js","./EditBusLayer-b5dc3689.js","./FeatureReductionLayer-fcaeb34a.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./OrderedLayer-9623e905.js","./PortalLayer-12f4a535.js","./RefreshableLayer-49182ab8.js","./ScaleRangeLayer-c072e266.js","./TemporalLayer-c74d13d4.js","./TimeInfo-f76d6c20.js","./FeatureTemplate-c4496b93.js","./FeatureType-0be9420b.js","./fieldProperties-4207e953.js","./FieldsIndex-02142c8a.js","./versionUtils-fabd8b3a.js","./styleUtils-08eaa4d2.js","./popupUtils-1ecc877c.js","./colorUtils-82440b70.js","./mat2d-d0b91e3e.js","./Scheduler-5e6ccc87.js","./GraphicsLayer-b332f442.js","./ViewingMode-915d19cb.js","./unitBezier-881ac1eb.js","./Subtype-a3103d84.js","./datetime-4f774298.js","./elevationInfoUtils-c3025fae.js","./QueryEngineResult-92e13fe4.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./WhereClause-6c9440a1.js","./utils-44a68fd6.js","./json-48e3ea08.js","./Util-289ce3b5.js","./ExportImageParameters-ba01802d.js","./sublayerUtils-eea48c01.js","./webStyleSymbolUtils-0b165621.js","./devEnvironmentUtils-5002a058.js","./dehydratedFeatures-3dcd65f1.js","./plane-46a8c767.js","./sphere-622880b9.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./quat-ec16a584.js"],import.meta.url)),"web-tile":Hh,wfs:Uh,wms:()=>_i().then(()=>Fe(()=>import("./WMSLayerView2D-cdde5569.js"),["./WMSLayerView2D-cdde5569.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./reactiveUtils-5869e41a.js","./Extent-a1a1de42.js","./BitmapContainer-b9fd36c2.js","./WGLContainer-b2d1fffc.js","./mat3f32-d3d088e8.js","./enums-64ab819c.js","./mat3-9a8d9db7.js","./common-c186b691.js","./vec2f32-461e65a9.js","./pixelUtils-cc2ca9c3.js","./utils-0d179f64.js","./EffectView-dffeb0bc.js","./parser-01f6451e.js","./colorUtils-639f4d25.js","./screenUtils-90993e16.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./vec3f64-6cd30318.js","./Evented-cbf5f368.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec4-46a9b36d.js","./enums-4b2a86a0.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexElementDescriptor-2925c6af.js","./definitions-2d0dd0cd.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./Color-af6e0c66.js","./vec2f64-30dc1443.js","./VertexArrayObject-3630ef4f.js","./vec4f32-2f36231b.js","./ProgramTemplate-f021fc55.js","./StyleDefinition-7d58136b.js","./config-1337d16e.js","./GeometryUtils-c093d234.js","./earcut-58237617.js","./vec2-ab9f47bf.js","./featureConversionUtils-d2229ed4.js","./jsonUtils-c6684c52.js","./Polyline-b571c705.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./LayerView2D-fc5f87cc.js","./Collection-7c37b74e.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./geometry-eec1b371.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./ExportStrategy-333562f0.js","./aaBoundingRect-b340cf8c.js","./TileInfo-c5c8c8d2.js","./unitUtils-dd6fb8ee.js","./Bitmap-ff7d2c07.js","./TileStore-8f580dbf.js","./Queue-275a6362.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./enumeration-61a13175.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./Clonable-9b34e760.js","./LayerView-a849dd77.js","./HandleOwner-2edbba46.js","./Identifiable-093f90a8.js","./Promise-368b703a.js","./RefreshableLayerView-2de321c7.js","./OperationalLayer-9c50475b.js","./request-24011425.js","./preload-helper-41c905a7.js","./persistableUrlUtils-d0777bec.js","./ElevationInfo-80227ecc.js","./fieldUtils-b2df74c4.js","./arcadeOnDemand-a976a73c.js","./lengthUtils-92fed992.js","./opacityUtils-1333f803.js","./ExportWMSImageParameters-025572bf.js"],import.meta.url)),wmts:()=>_i().then(()=>Fe(()=>import("./WMTSLayerView2D-3c4a73c6.js"),["./WMTSLayerView2D-3c4a73c6.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./reactiveUtils-5869e41a.js","./Extent-a1a1de42.js","./imageUtils-20773273.js","./BitmapTileContainer-1ef594fb.js","./aaBoundingRect-b340cf8c.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./mat3f32-d3d088e8.js","./Bitmap-ff7d2c07.js","./mat3-9a8d9db7.js","./vec2f32-461e65a9.js","./utils-0d179f64.js","./EffectView-dffeb0bc.js","./parser-01f6451e.js","./colorUtils-639f4d25.js","./screenUtils-90993e16.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./Evented-cbf5f368.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./alignmentUtils-ae955d28.js","./Utils-a4216b91.js","./number-954e4ab6.js","./enums-4b2a86a0.js","./enums-64ab819c.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexElementDescriptor-2925c6af.js","./definitions-2d0dd0cd.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./Color-af6e0c66.js","./TileContainer-a618bf74.js","./TileKey-9cae9369.js","./WGLContainer-b2d1fffc.js","./pixelUtils-cc2ca9c3.js","./vec2f64-30dc1443.js","./VertexArrayObject-3630ef4f.js","./vec4f32-2f36231b.js","./ProgramTemplate-f021fc55.js","./StyleDefinition-7d58136b.js","./config-1337d16e.js","./GeometryUtils-c093d234.js","./earcut-58237617.js","./vec2-ab9f47bf.js","./featureConversionUtils-d2229ed4.js","./jsonUtils-c6684c52.js","./Polyline-b571c705.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./LayerView2D-fc5f87cc.js","./Collection-7c37b74e.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./geometry-eec1b371.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./TileStore-8f580dbf.js","./Queue-275a6362.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./enumeration-61a13175.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./Clonable-9b34e760.js","./TileStrategy-a5366189.js","./LayerView-a849dd77.js","./HandleOwner-2edbba46.js","./Identifiable-093f90a8.js","./Promise-368b703a.js","./RefreshableLayerView-2de321c7.js"],import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function QSe(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",n=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new Ue(`${n}:view-not-supported`,`${e} is not supported in 2D`)}const oA={hasLayerViewModule:t=>q(sA[t.type]),importLayerView:t=>{const e=sA[t.type];if(ke(e))throw QSe(t);return e(t)}};function JSe(t,e){const{spatialReference:n}=e,i=[e.x,e.y];let s=Number.POSITIVE_INFINITY,o=0,r=0;const a=[0,0],l=t.type==="extent"?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:t.rings;for(const c of l)for(let u=0;u<c.length-1;u++){pB(a,i,c,u);const d=Qm(i,a);d<s&&(s=d,o=a[0],r=a[1])}return{coordinate:new Kt({x:o,y:r,spatialReference:n}),distance:s}}var DC;let bu=DC=class extends HS(dt){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(ke(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return fr(this.geometry,this.spatialReference)}catch(t){return Tt.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(ke(this.normalizedGeometry))return t;const n=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?zL(this.normalizedGeometry,n):i8(this.normalizedGeometry,n))return t;const{coordinate:i}=JSe(this.normalizedGeometry,n);return i&&(t.targetGeometry=i),t}clone(){var t,e;return new DC({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};v([b({constructOnly:!0})],bu.prototype,"geometry",void 0),v([b({readOnly:!0})],bu.prototype,"normalizedGeometry",null),v([b({constructOnly:!0})],bu.prototype,"spatialReference",void 0),bu=DC=v([Ae("esri.views.2d.constraints.GeometryConstraint")],bu);var NC;let cf=NC=class extends HS(dt){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new NC({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};v([b()],cf.prototype,"enabled",void 0),v([b()],cf.prototype,"rotationEnabled",void 0),cf=NC=v([Ae("esri.views.2d.constraints.RotationConstraint")],cf);const SN=cf;var BC;let Gs=BC=class extends HS(dt){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:n,maxScale:i,minZoom:s,maxZoom:o}=this,r=-1,a=-1,l=!1,c=!1;if(n!==0&&i!==0&&n<i&&([n,i]=[i,n]),!e||!e.length)return this._set("effectiveMinScale",n),void this._set("effectiveMaxScale",i);e=e.map(u=>u.clone()),e.sort((u,d)=>d.scale-u.scale),e.forEach((u,d)=>u.level=d);for(const u of e)!l&&n>0&&n>=u.scale&&(r=u.level,l=!0),!c&&i>0&&i>=u.scale&&(a=t?t.level:-1,c=!0),t=u;s===-1&&(s=n===0?0:r),o===-1&&(o=i===0?e.length-1:a),s=Math.max(s,0),s=Math.min(s,e.length-1),o=Math.max(o,0),o=Math.min(o,e.length-1),s>o&&([s,o]=[o,s]),n=e[s].scale,i=e[o].scale,e.splice(0,s),e.splice(o-s+1,e.length),e.forEach((u,d)=>{this._lodByScale[u.scale]=u,this._scales[d]=u.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",o),this._set("effectiveMinScale",n),this._set("effectiveMaxScale",i)}constrain(t,e){if(e&&t.scale===e.scale)return t;const n=this.effectiveMinScale,i=this.effectiveMaxScale,s=t.targetGeometry,o=e&&e.targetGeometry,r=i!==0&&t.scale<i,a=n!==0&&t.scale>n;if(r||a){const l=a?n:i;if(e&&o){const c=(l-e.scale)/(t.scale-e.scale);s.x=o.x+(s.x-o.x)*c,s.y=o.y+(s.y-o.y)*c}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),n=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(n>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const n=Math.round(t-.5),i=Math.round(t);return e[i]+(i-t)*(e[n]-e[i])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let n,i;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let s=0;s<e.length-1;s++){if(n=e[s],i=e[s+1],i===t)return s+this.effectiveMinZoom+1;if(n>t&&i<t)return s+this.effectiveMinZoom+1-(t-i)/(n-i)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const n=Math.round(this.scaleToZoom(t));return this.zoomToScale(n+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const n=Math.round(this.scaleToZoom(t));return this.zoomToScale(n-1)}clone(){return new BC({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,n)=>Math.abs(n-t)<=Math.abs(e-t)?n:e,this._scales[0])),this._lodByScale[t].scale}};v([b({readOnly:!0})],Gs.prototype,"effectiveLODs",void 0),v([b({readOnly:!0})],Gs.prototype,"effectiveMinZoom",void 0),v([b({readOnly:!0})],Gs.prototype,"effectiveMaxZoom",void 0),v([b({readOnly:!0})],Gs.prototype,"effectiveMinScale",void 0),v([b({readOnly:!0})],Gs.prototype,"effectiveMaxScale",void 0),v([b()],Gs.prototype,"lods",void 0),v([b()],Gs.prototype,"minZoom",void 0),v([b()],Gs.prototype,"maxZoom",void 0),v([b()],Gs.prototype,"minScale",void 0),v([b()],Gs.prototype,"maxScale",void 0),v([b()],Gs.prototype,"snapToZoom",void 0),Gs=BC=v([Ae("esri.views.2d.constraints.ZoomConstraint")],Gs);const EN=Gs,eEe={base:null,key:"type",typeMap:{extent:ol,polygon:cp}};let ri=class extends dt{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,n,i;return`${(e=this._zoom)==null?void 0:e.uid}/${(n=this._rotation)==null?void 0:n.uid}/${(i=this._geometry)==null?void 0:i.uid}`}get _defaultLODs(){var i,s,o;const e=(s=(i=this.view)==null?void 0:i.defaultsFromMap)==null?void 0:s.tileInfo,n=(o=this.view)==null?void 0:o.spatialReference;return e&&n&&e.spatialReference.equals(n)?e.lods:null}get _geometry(){var e;return new bu({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new SN({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),n=this.lods||this._defaultLODs,i=this.minZoom,s=this.maxZoom,o=this.minScale,r=this.maxScale,a=this.snapToZoom;return e&&e.lods===n&&e.minZoom===i&&e.maxZoom===s&&e.minScale===o&&e.maxScale===r&&e.snapToZoom===a?e:new EN({lods:n,minZoom:i,maxZoom:s,minScale:o,maxScale:r,snapToZoom:a})}canZoomInTo(e){const n=this.effectiveMaxScale;return n===0||e>=n}canZoomOutTo(e){const n=this.effectiveMinScale;return n===0||e<=n}constrain(e,n){return this._zoom.constrain(e,n),this._rotation.constrain(e,n),this._geometry.constrain(e,n),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};v([b({readOnly:!0})],ri.prototype,"effectiveLODs",null),v([b({readOnly:!0})],ri.prototype,"effectiveMinScale",null),v([b({readOnly:!0})],ri.prototype,"effectiveMaxScale",null),v([b({readOnly:!0})],ri.prototype,"effectiveMinZoom",null),v([b({readOnly:!0})],ri.prototype,"effectiveMaxZoom",null),v([b({types:eEe,value:null})],ri.prototype,"geometry",null),v([b({type:[A8]})],ri.prototype,"lods",void 0),v([b()],ri.prototype,"minScale",void 0),v([b()],ri.prototype,"maxScale",void 0),v([b()],ri.prototype,"minZoom",void 0),v([b()],ri.prototype,"maxZoom",void 0),v([b()],ri.prototype,"rotationEnabled",void 0),v([b()],ri.prototype,"snapToZoom",void 0),v([b()],ri.prototype,"view",void 0),v([b({readOnly:!0})],ri.prototype,"version",null),v([b()],ri.prototype,"_defaultLODs",null),v([b({type:bu})],ri.prototype,"_geometry",null),v([b({type:SN})],ri.prototype,"_rotation",null),v([b({readOnly:!0,type:EN})],ri.prototype,"_zoom",null),ri=v([Ae("esri.views.2d.MapViewConstraints")],ri);const kN=ri;function tEe(t){return t instanceof Float32Array&&t.length>=2}function nEe(t){return Array.isArray(t)&&t.length>=2}function Xw(t){return tEe(t)||nEe(t)}var zC;const ga=[0,0];let Rl=zC=class extends Ju{constructor(t){super(t),this._viewpoint2D={center:Jt(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new ol,this.id=0,this.inverseTransform=Qr(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Qr(),this.transformNoRotation=Qr(),this.displayMat3=Y_(),this.displayViewMat3=Y_(),this.viewMat3=Y_(),this.viewMat2d=H0(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,n=t.targetGeometry;e.center[0]=n.x,e.center[1]=n.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=n.spatialReference}this._update()}copy(t){const e=this.size,n=this.viewpoint;return n&&e?(this.viewpoint=Er(n,t.viewpoint),this._set("size",im(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new zC({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,n){return Xw(e)?Va(t,e,this.inverseTransform):(ga[0]=e,ga[1]=n,Va(t,ga,this.inverseTransform))}toScreen(t,e,n){return Xw(e)?Va(t,e,this.transform):(ga[0]=e,ga[1]=n,Va(t,ga,this.transform))}toScreenNoRotation(t,e,n){return Xw(e)?Va(t,e,this.transformNoRotation):(ga[0]=e,ga[1]=n,Va(t,ga,this.transformNoRotation))}getScreenTransform(t,e){const{center:n}=this._viewpoint2D,i=this._get("pixelRatio")||1,s=this._get("size");return pT(t,n,s,e,0,i),t}_update(){const{center:t,spatialReference:e,scale:n,rotation:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,o=this._get("size"),r=new dr({targetGeometry:new Kt(t[0],t[1],e),scale:n,rotation:i});if(this._set("viewpoint",r),!o||!e||!n)return;this.resolution=Eh(r),this.rotation=i,this.scale=n,this.spatialReference=e,im(this.center,t);const a=o[0]!==0?2/o[0]:0,l=o[1]!==0?-2/o[1]:0;IB(this.displayMat3,a,0,0,0,l,0,-1,1,1);const c=xB(this.viewMat3),u=wI(o[0]/2,o[1]/2),d=wI(-o[0]/2,-o[1]/2),h=vO(i);_I(c,c,u),MB(c,c,h),_I(c,c,d),$B(this.displayViewMat3,this.displayMat3,c);const f=fO(this.viewMat2d,u);return Ob(f,f,h),nm(f,f,d),PSe(this.extent,r,o),hT(this.transform,r,o,s),jS(this.inverseTransform,this.transform),zSe(this.transformNoRotation,r,o,s),this.worldScreenWidth=USe(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};v([b({readOnly:!0})],Rl.prototype,"id",void 0),v([b({value:1,json:{write:!0}})],Rl.prototype,"pixelRatio",null),v([b({json:{write:!0}})],Rl.prototype,"size",null),v([b()],Rl.prototype,"spatialReference",void 0),v([b({type:dr,json:{write:!0}})],Rl.prototype,"viewpoint",null),Rl=zC=v([Ae("esri.views.2d.ViewState")],Rl);const rA=Rl;var HC,UC;let Da=HC=class extends dt{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new HC({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};v([b()],Da.prototype,"left",void 0),v([b()],Da.prototype,"top",void 0),v([b()],Da.prototype,"right",void 0),v([b()],Da.prototype,"bottom",void 0),Da=HC=v([Ae("esri.views.2d.PaddedViewState.Padding")],Da);let Od=UC=class extends rA{constructor(...t){super(...t),this.paddedViewState=new rA,this._updateContent=(()=>{const e=Jt();return()=>{const n=this._get("size"),i=this._get("padding");if(!n||!i)return;const s=this.paddedViewState;Ji(e,i.left+i.right,i.top+i.bottom),di(e,n,e),im(s.size,e);const o=s.viewpoint;o&&(this.viewpoint=o)}})(),this.addHandles(ge(()=>[this.size,this.padding],()=>this._updateContent(),_c)),this.padding=new Da,this.size=[0,0]}set padding(t){this._set("padding",t||new Da)}set viewpoint(t){if(t){const e=t.clone();this.paddedViewState.viewpoint=t,GSe(e,t,this._get("size"),this._get("padding"));const n=this._viewpoint2D,i=e.targetGeometry;n.center[0]=i.x,n.center[1]=i.y,n.rotation=e.rotation,n.scale=e.scale,n.spatialReference=i.spatialReference,this._update()}}clone(){return new UC({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};v([b()],Od.prototype,"paddedViewState",void 0),v([b({type:Da})],Od.prototype,"padding",null),v([b()],Od.prototype,"viewpoint",null),Od=UC=v([Ae("esri.views.2d.PaddedViewState")],Od);const iEe=Od;function fT(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}let aA=class extends Oi{constructor(e,n){super(!0),this._view=e,this.registerIncoming("double-click",n,i=>this._handleDoubleClick(i,n))}_handleDoubleClick(e,n){fT(e.data,"primary")&&(e.stopPropagation(),n?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},sEe=class extends Oi{constructor(e,n,i){super(!0),this.view=e,this.pointerType=n,this.registerIncoming("double-tap-drag",i,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(e){const{data:n}=e,{pointerType:i}=n;if(i!==this.pointerType)return;e.stopPropagation();const{action:s,delta:o}=n,{view:r}=this,{mapViewNavigation:a}=r;switch(s){case"begin":{const{scale:l}=r;this._startScale=l,this._currentScale=l,this._previousDelta=o,a.begin();break}case"update":{if(this._previousDelta.y===o.y)return;this._previousDelta=o;const l=1.015**o.y,c=this._startScale*l,u=c/this._currentScale;a.setViewpointImmediate(u),this._currentScale=c;break}case"end":{const{constraints:l}=r,{effectiveLODs:c,snapToZoom:u}=l;if(!u||!c)return void a.end();const d=l.snapScale(this._currentScale),h=(o.y>0?Math.max(d,l.snapToPreviousScale(this._startScale)):Math.min(d,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(h);break}}}},A_=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const n=e.data,i=n.pointers.size;switch(n.action){case"start":this._currentCount=i,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var n,i;this._startEvent=e,(i=(n=this._callbacks).condition)!=null&&i.call(n,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var n,i;(i=(n=this._callbacks).condition)!=null&&i.call(n,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var n,i;(i=(n=this._callbacks).condition)!=null&&i.call(n,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},oEe=class extends Oi{constructor(e,n,i){super(!0),this.view=e,this.pointerAction=n,this.registerIncoming("drag",i,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new A_({start:(n,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(n,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(n,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(n,i)=>n===1&&fT(i.data,this.pointerAction)})}_handleDrag(e){const n=this.view.mapViewNavigation;n.pinch.zoomMomentum||n.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},rEe=class extends Oi{constructor(e,n,i){super(!0),this._view=e,this.pointerAction=n;const s=this._view.mapViewNavigation;this._dragEventSeparator=new A_({start:(o,r)=>{s.rotate.begin(this._view,r.data),r.stopPropagation()},update:(o,r)=>{s.rotate.update(this._view,r.data),r.stopPropagation()},end:(o,r)=>{s.rotate.end(),r.stopPropagation()},condition:(o,r)=>o===1&&fT(r.data,this.pointerAction)}),this.registerIncoming("drag",i,o=>this._dragEventSeparator.handle(o))}};function Xo(t){let e=t*t;return t<0&&(e*=-1),e}function aEe(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function lEe(t,e,n){const i=n,s=t.state,o=t.device,r=e.tiltDirection==="forward-down"?1:-1,a=1;return o.deviceType==="standard"?(i.translation[0]=Xo(s.axes[0]),i.translation[1]=Xo(s.axes[1]),i.translation[2]=Xo(s.buttons[7])-Xo(s.buttons[6]),i.heading=Xo(s.axes[2]),i.tilt=Xo(s.axes[3])):o.deviceType==="spacemouse"&&(i.translation[0]=1.2*Xo(s.axes[0]),i.translation[1]=1.2*Xo(s.axes[1]),i.translation[2]=2*-Xo(s.axes[2]),i.heading=1.2*Xo(s.axes[5]),i.tilt=1.2*Xo(s.axes[3])),i.tilt*=r,Vb(i.translation,i.translation,a),i}function cEe(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let uEe=class extends Oi{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new si,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",n=>this._handleGamePadEvent(n)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([ge(()=>{var n;return(n=this._view.navigation.gamepad)==null?void 0:n.enabled},n=>{n?(this._handle.resume(),this._frameTask||(this._frameTask=$p({update:i=>this._frameUpdate(i.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},gt)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const n=this._view.navigation.gamepad.device;n&&e.data.device!==n||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,aEe(this._transformation)):(this._currentDevice=e.data.device,lEe(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const n=this._transformation;if(cEe(n))return;const i=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,o=pEe*s*e;$_(i,i,[n.translation[0]*o,-n.translation[1]*o]);const r=1+n.translation[2]*hEe*e,a=this._view.constraints.rotationEnabled?-n.heading*dEe*e:0,l=this._view.size,c=[l[0]/2,l[1]];_N(i,i,r,a,c,l);const u=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=u}};const dEe=.06,pEe=.7,hEe=6e-4;let fEe=class extends Oi{constructor(e,n,i){super(!0),this.view=e,this.keys=n,this._pressed=!1,this._keyMap={[n.left]:"left",[n.right]:"right",[n.up]:"up",[n.down]:"down"},this.registerIncoming("key-down",i,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",i,s=>this._handleKeyUp(s)),this.registerIncoming("blur",i,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,n){const i=this._keyMap[e.data.key];if(this._pressed=i!=null,this._pressed){if(n)switch(this.view.mapViewNavigation.begin(),i){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},mEe=class extends Oi{constructor(e,n,i){super(!0),this.view=e,this.keys=n,this._pressed=!1,this._keyToDirection={[n.clockwiseOption1]:"clockwise",[n.clockwiseOption2]:"clockwise",[n.counterClockwiseOption1]:"counterClockwise",[n.counterClockwiseOption2]:"counterClockwise",[n.resetOption1]:"reset",[n.resetOption2]:"reset"},this.registerIncoming("key-down",i,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",i,s=>this._handleKeyUp(s)),this.registerIncoming("blur",i,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,n){const i=e.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[e.data.key];if(this._pressed=s!=null,this._pressed){if(n)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var np;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(np||(np={}));let gEe=class extends Oi{constructor(e,n,i){super(!0),this.view=e,this.keys=n,this._keysToZoomAction={},this.registerIncoming("key-down",i,s=>this._handleKeyDown(s)),n.zoomIn.forEach(s=>this._keysToZoomAction[s]=np.IN),n.zoomOut.forEach(s=>this._keysToZoomAction[s]=np.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const n=e.modifiers;if(n.size>0&&!n.has("Shift"))return;const{key:i}=e.data;if(!(i in this._keysToZoomAction))return;const s=this._keysToZoomAction[i],{mapViewNavigation:o}=this.view;let r=null;switch(s){case np.IN:r=o.zoomIn();break;case np.OUT:r=o.zoomOut();break;default:return}o.begin(),r.then(()=>o.end()),e.stopPropagation()}};const vEe=.6;let yEe=class extends Oi{constructor(e,n){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",n,i=>this._handleMouseWheel(i))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const n=this._view.mapViewNavigation,{x:i,y:s,deltaY:o}=e.data,r=1/vEe**(1/60*o),a=n.zoom(r,[i,s]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,n.end()}))}},bEe=class extends Oi{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const n=this.view.mapViewNavigation;this._dragEventSeparator=new A_({start:(i,s)=>{n.pinch.begin(this.view,s.data),s.stopPropagation()},update:(i,s)=>{n.pinch.update(this.view,s.data),s.stopPropagation()},end:(i,s)=>{n.pinch.end(this.view),s.stopPropagation()},condition:i=>i>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function lA(t){const e=t.native;return e?{buttons:e.buttons.map(n=>n.pressed?n.value?n.value:1:0),axes:e.axes.map(n=>CEe(n,t.axisThreshold))}:{buttons:[],axes:[]}}function _Ee(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let n=0;n<t.axes.length;n++)if(t.axes[n]!==e.axes[n])return!1;for(let n=0;n<t.buttons.length;n++)if(t.buttons[n]!==e.buttons[n])return!1;return!0}function wEe(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function CEe(t,e){const n=Math.abs(t);return n<e?0:Math.sign(t)*(n-e)/(1-e)}let SEe=class{constructor(e,n){this._element=e,this._input=n,this._hasEventListeners=!1,this._onConnectGamepad=o=>{this._connectGamepad(o.gamepad)},this._onDisconnectGamepad=o=>{const r=o.gamepad,a=r.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(r,lA(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const i="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=i&&s,this.supported&&(this._forEachGamepad(o=>this._connectGamepad(o)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const n=new cT(e);n.deviceType!=="unknown"&&(this._inputDevices[e.index]=n,this._input.gamepad.devices.add(n)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=$p({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),n=this._element.contains(document.activeElement),i=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!n;this._forEachGamepad(s=>{const o=this._inputDevices[s.index];if(!o)return;const r=this._latestUpdate[s.index],a=lA(o),l=i||wEe(a);r&&(r.timestamp===s.timestamp||!r.active&&l||_Ee(r.state,a))||this._emitGamepadEvent(s,a,!l)})}_forEachGamepad(e){const n=window.navigator.getGamepads();for(let i=0;i<n.length;i++){const s=n[i];this._validate(s)&&e(s)}}_emitGamepadEvent(e,n,i){const s=this._latestUpdate[e.index],o=s&&s.active;if(!o&&!i)return;const r=!o&&i?"start":o&&i?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:n,active:i},this._callback&&this._callback({device:this._inputDevices[e.index],state:n,action:r})}_validate(e){if(!e||!e.connected)return!1;for(let n=0;n<e.axes.length;n++)if(isNaN(e.axes[n]))return!1;return!0}};const cA=Ts("trident"),uA=Ts("edge"),EEe=Ts("chrome"),kEe=Ts("ff"),TEe=Ts("safari"),fd={touchNone:"esri-view-surface--touch-none",touchPan:"esri-view-surface--touch-pan"};let mT=class{constructor(e,n){this._input=n,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new SEe(e,this._input),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)}),this._gamepadSource=sn(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const n in this._active)if(!e||!e.has(n)){const i=this._active[n];this._element.removeEventListener(Qw[n],i),delete this._active[n]}e&&e.forEach(n=>{if(!this._active[n]&&Qw[n]){const i=(this._eventHandlers[n]||this._handleDefault).bind(this,n);this._element.addEventListener(Qw[n],i),this._active[n]=i}}),this._gamepadSource.hasEventListeners=e&&e.has("gamepad")}setPointerCapture(e,n){n?(this._element.setPointerCapture(e.pointerId),this._activePointerCaptures.add(e.pointerId)):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?fd.touchNone:fd.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?fd.touchPan:fd.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(fd.touchNone),this._element.classList.remove(fd.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,n){const i=oN(this._element,e);return mT.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),n.x=i.x,n.y=i.y,n}_handleKey(e,n){const i=FCe(n);i&&e==="key-up"&&this._keyDownState.delete(i);const s={native:n,key:i,repeat:i&&this._keyDownState.has(i)};i&&e==="key-down"&&this._keyDownState.add(s.key),this._callback(e,s)}_handlePointer(e,n){const i=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,pointerType:n.pointerType,button:n.button,buttons:n.buttons,eventId:this._eventId++});this._callback(e,i)}_handlePointerPreventDefault(e,n){const i=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,pointerType:n.pointerType,button:n.button,buttons:n.buttons,eventId:this._eventId++});n.preventDefault(),this._callback(e,i)}_handleMouseWheel(e,n){let i=n.deltaY;switch(n.deltaMode){case 0:(cA||uA)&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}cA||uA?i*=.7:EEe||TEe?i*=.6:kEe&&(i*=1.375);const s=100,o=Math.abs(i);o>s&&(i=i/o*200/(1+Math.exp(-.02*(o-s))));const r=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,deltaY:i});this._callback(e,r)}_handlePointerCaptureLost(e,n){this._activePointerCaptures.delete(n.pointerId),this._handleDefault(e,n)}_handleDefault(e,n){const i={native:n};n.preventDefault(),this._callback(e,i)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}};mT.test={disableSubpixelCoordinates:!1};const Qw={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let IEe=class extends Oi{constructor(){super(!0),this.registerIncoming("context-menu",e=>{e.data.native.preventDefault()})}};function gT(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function xEe(t,e){const n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}function MEe(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:hi()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[w,S]=t,[E,k]=[S.x-w.x,S.y-w.y];return e.radius=Math.sqrt(E*E+k*k)/2,e.center.x=(w.x+S.x)/2,e.center.y=(w.y+S.y)/2,e}let n=0,i=0;for(let w=0;w<t.length;w++)n+=t[w].x,i+=t[w].y;n/=t.length,i/=t.length;const s=t.map(w=>w.x-n),o=t.map(w=>w.y-i);let r=0,a=0,l=0,c=0,u=0,d=0,h=0;for(let w=0;w<s.length;w++){const S=s[w],E=o[w],k=S*S,A=E*E;r+=k,a+=A,l+=S*E,c+=k*S,u+=A*E,d+=S*A,h+=E*k}const f=.5*(c+d),m=.5*(u+h),g=r*a-l*l,y=(f*a-m*l)/g,_=(r*m-l*f)/g,C=hi(y+n,_+i);return{radius:Math.sqrt(y*y+_*_+(r+a)/t.length),center:C}}function Uu(t){const{native:e}=t,{pointerId:n,button:i,pointerType:s}=e;return s==="mouse"?`${n}:${i}`:`${s}`}const Ho={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};let $Ee=class extends Oi{constructor(e=Ho.maximumDoubleClickDelay,n=Ho.maximumDoubleClickDistance,i=Ho.maximumDoubleTouchDelay,s=Ho.maximumDoubleTouchDistance,o=xb){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=s,this._clock=o,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=Bi(e.doubleClickTimer))}get hasPendingInputs(){return Ym(this._pointerState,e=>e.doubleClickTimer!=null)}_clearDoubleClickTimer(e,n){const i=this._pointerState.get(e);i&&(i.doubleClickTimer=Bi(i.doubleClickTimer),n&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const n=this._pointerState.get(e);n.pointerDownCount===1&&this._click.emit(n.event.data,void 0,n.event.modifiers),n.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){const{pointerId:n,pointerType:i,button:s}=e.native;return i==="mouse"?`${n}:${s}`:`${i}`}_handleImmediateClick(e){const n=e.data,{pointerType:i}=n.native,s=this._getPointerId(n);if(!this._pointerState.has(s))return void this._startClick(e);const o=this._pointerState.get(s),{data:r,modifiers:a}=o.event,l=i==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;gT(r,n)>l?(this._clearDoubleClickTimer(s,!0),this._startClick(e)):(this._clearDoubleClickTimer(s,!1),o.pointerDownCount===2&&this._doubleClick.emit(r,void 0,a))}_handlePointerDown(e){const n=Uu(e.data),i=this._pointerState.get(n);i&&(i.pointerDownCount+=1)}_startClick(e){const{data:n}=e,{native:{pointerType:i}}=n,s=Uu(n),o=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,r=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),o),a=1;this._pointerState.set(s,{event:e,doubleClickTimer:r,pointerDownCount:a}),this.refreshHasPendingInputs()}},AEe=class extends Oi{constructor(e=Ho.maximumDoubleClickDelay,n=Ho.maximumDoubleClickDistance,i=Ho.maximumDoubleTouchDelay,s=Ho.maximumDoubleTouchDistance,o=xb){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=s,this._clock=o,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=hi(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new A_({start:(r,a)=>this._dragStart(r,a),update:(r,a)=>this._dragUpdate(a),end:(r,a)=>this._dragEnd(a)}),this.registerIncoming("drag",r=>this._dragEventSeparator.handle(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=Bi(e.doubleTapTimeout)})}get hasPendingInputs(){return Ym(this._pointerState,e=>e.doubleTapTimeout!=null)}_clearPointerDown(e){const n=this._pointerState.get(e);n&&(n.doubleTapTimeout=Bi(n.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,n,i){const{button:s,buttons:o,pointer:r,pointers:a,pointerType:l,timestamp:c}=i;return{action:e,delta:n,button:s,buttons:o,pointer:r,pointers:a,pointerType:l,timestamp:c}}_dragStart(e,n){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:s}=n,{center:o}=i;this._dragStartCenter=o;const r=this._createDoubleTapDragData("begin",hi(0,0),i);this._doubleTapDrag.emit(r,void 0,s),n.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:n,modifiers:i}=e,{center:s}=n,o=hi(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),r=this._createDoubleTapDragData("update",o,n);this._doubleTapDrag.emit(r,void 0,i),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:n,modifiers:i}=e,{center:s}=n,o=hi(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),r=this._createDoubleTapDragData("end",o,n);this._doubleTapDrag.emit(r,void 0,i),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:n}=e,i=Uu(n),s=this._pointerState.get(i),{pointerType:o}=n.native;if(s){const r=o==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(i),gT(s.event.data,n)>r?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:n}=e,{pointerType:i}=n.native,s=Uu(n),o=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,r=this._clock.setTimeout(()=>this._clearPointerDown(s),o);this._pointerState.set(s,{event:e,doubleTapTimeout:r}),this.refreshHasPendingInputs()}},LEe=class extends Oi{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,n,i,s){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:n.buttons,timestamp:s,pointers:OEe(this._activePointerMap),pointer:n,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(e){const n=e.native.pointerId,i=Jg(this._activePointerMap).angle,s={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(n,s);const o=dy(s,TN(this._activePointerMap));s.initialAngle=o,s.lastAngle=o,this._updatePointerAngles(i)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const n=e.native.pointerId,i=this._activePointerMap.get(n);i?i.event=e:this._addPointer(e)}_removePointer(e){const n=Jg(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(n)}_updatePointerAngles(e){const n=Jg(this._activePointerMap);this._activePointerMap.forEach(i=>{i.initialAngle=dy(i,n)-e,i.lastAngle=dy(i,n)-e})}_emitEvent(e,n,i){const s=Jg(this._activePointerMap);this._drag.emit(this._createPayload(e,n,s,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const n=e.data.native.pointerId,i=j_(e.timestamp);this._activePointerMap.get(n)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(n)):(this._removePointer(n),this._emitEvent("removed",e.data,j_(e.timestamp))))}_handlePointerDrag(e){const n=e.data,i=n.currentEvent,s=j_(e.timestamp);switch(n.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,s)):(this._addPointer(i),this._emitEvent("added",i,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function TN(t){const e=[];return t.forEach(n=>{e.push(hi(n.event.x,n.event.y))}),MEe(e)}function Jg(t){const e=TN(t);let n=0;return t.forEach(i=>{let s=dy(i,e),o=s-i.lastAngle;for(;o>Math.PI;)o-=2*Math.PI;for(;o<-Math.PI;)o+=2*Math.PI;s=i.lastAngle+o,i.lastAngle=s;const r=s-i.initialAngle;n+=r}),n/=t.size||1,{angle:n,radius:e.radius,center:e.center}}function OEe(t){const e=new Map;return t.forEach((n,i)=>e.set(i,n.event)),e}function dy(t,e){const n=t.event,i=n.x-e.center.x,s=n.y-e.center.y;return Math.atan2(s,i)}var dA;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(dA||(dA={}));let PEe=class extends Oi{constructor(e=Ho.maximumDoubleClickDelay,n=Ho.maximumDoubleClickDistance,i=Ho.maximumDoubleTouchDelay,s=Ho.maximumDoubleTouchDistance,o=xb){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=s,this._clock=o,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const n=e.data,i=Uu(n);if(!this._pointerState.has(i)){const s={downButton:n.native.button,immediateDoubleClick:null};this._pointerState.set(i,s),this.startCapturingPointer(n.native)}}_handlePointerUp(e){const n=e.data,i=Uu(n),s=this._pointerState.get(i);if(s&&s.downButton===n.native.button){const o=s.immediateDoubleClick;if(o){o.timeoutHandle.remove();const r=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;gT(o,e.data)>r?this._startImmediateDoubleClick(e,s):(this._immediateDoubleClick.emit(e.data,void 0,o.modifiers),this._removeState(n))}else this._startImmediateDoubleClick(e,s)}}_startImmediateDoubleClick(e,n){const i=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;n.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),i)}}_removeState(e){const n=Uu(e);this._pointerState.delete(n),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}};const Wh={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};let REe=class extends Oi{constructor(e=Wh.maximumClickDelay,n=Wh.movementUntilMouseDrag,i=Wh.movementUntilPenDrag,s=Wh.movementUntilTouchDrag,o=Wh.holdDelay,r=xb){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=n,this._movementUntilPenDrag=i,this._movementUntilTouchDrag=s,this._holdDelay=o,this._clock=r,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=Bi(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const n=e.data,i=n.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const r=this._pointerState.get(i);if(r){if(!r.isDragging){const a=r.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),r.holdEmitted=!0}r.holdTimeout=null}},this._holdDelay));const o={startEvent:n,previousEvent:n,startTimestamp:e.timestamp,isDragging:!1,downButton:n.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(i,o),this.startCapturingPointer(n.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,n,i){return{action:e,startEvent:n.startEvent,previousEvent:n.previousEvent,currentEvent:i}}_handlePointerMove(e){const n=e.data,i=n.native.pointerId,s=this._pointerState.get(i);s&&(s.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",s,n),void 0,s.modifiers):xEe(n,s.startEvent)>this._getDragThreshold(n.native.pointerType)&&this._startDragging(e),s.previousEvent=n)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const n=e.data,i=n.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=e.modifiers,s.isDragging=!0,i===s.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",s,n)):this._pointerDrag.emit(this._createPointerDragData("start",s,s.previousEvent),e.timestamp))})}_handlePointerLoss(e,n){const i=e.data,s=i.native.pointerId,o=this._pointerState.get(s);o&&(o.holdTimeout!=null&&(o.holdTimeout.remove(),o.holdTimeout=null),o.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",o,n==="pointer-up"?i:o.previousEvent),void 0,o.modifiers):n==="pointer-up"&&o.downButton===i.native.button&&e.timestamp-o.startTimestamp<=this._maximumClickDelay&&!o.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(s),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}};const ev={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Xc=class extends dt{constructor(){super(...arguments),this._handles=new si}initialize(){const e=()=>{var n;return(n=this.view)==null?void 0:n.ready};this._handles.add([ji(()=>!e(),()=>this._disconnect()),ji(e,()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=sn(this._inputManager)}_connect(){const e=this.view.surface,n=new mT(e,this.view.input),i=[new PEe,new REe,new $Ee,new LEe(this.view.navigation),new AEe],s=new Or({eventSource:n,recognizers:i});s.installHandlers("prevent-context-menu",[new IEe],nt.INTERNAL),s.installHandlers("navigation",[new bEe(this.view),new uEe(this.view),new yEe(this.view),new aA(this.view),new aA(this.view,[ev.counter]),new oEe(this.view,"primary"),new fEe(this.view,ev.pan),new gEe(this.view,ev.zoom),new mEe(this.view,ev.rotate),new rEe(this.view,"secondary"),new sEe(this.view,"touch")],nt.INTERNAL),this.view.viewEvents.connect(s),this._source=n,this._inputManager=s,ge(()=>{var o,r;return(r=(o=this.view)==null?void 0:o.navigation)==null?void 0:r.browserTouchPanEnabled},o=>{this._source&&(this._source.browserTouchPanningEnabled=!o)},gt)}get test(){return{inputManager:this._inputManager}}};v([b()],Xc.prototype,"view",void 0),v([b()],Xc.prototype,"latestPointerType",null),v([b()],Xc.prototype,"latestPointerLocation",null),v([b()],Xc.prototype,"multiTouchActive",null),Xc=v([Ae("esri.views.2d.input.MapViewInputManager")],Xc);const VEe=Xc;let FEe=0,Vl=class extends dt{constructor(){super(...arguments),this.color=new cn([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return FEe++}};v([b({readOnly:!0})],Vl.prototype,"version",null),v([b({type:cn})],Vl.prototype,"color",void 0),v([b({type:cn})],Vl.prototype,"haloColor",void 0),v([b()],Vl.prototype,"haloOpacity",void 0),v([b()],Vl.prototype,"fillOpacity",void 0),Vl=v([Ae("esri.views.2d.support.HighlightOptions")],Vl);const IN=Vl,DEe=t=>t.includes("Brush");let xN=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),DEe(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};function NEe(t,e,n,i,s,o,r,a){let l;t.ignorePadding&&(i={left:0,right:0,top:0,bottom:0}),t.width!=null&&t.height!=null?l=[t.width,t.height]:t.width==null&&t.height!=null?l=[t.height,t.height]:t.width!=null&&t.height==null?l=[t.width,t.width]:t.width==null&&t.height==null&&(l=null);const c=n[0]-(i.left+i.right),u=n[1]-(i.top+i.bottom);let d,h,f=t.area||{x:0,y:0,width:c,height:u};if(l){const m=c/u,g=l[0]/l[1];if(g>m){const y=f.width/g;f={x:f.x,y:Math.round(f.y+(f.height-y)/2),width:f.width,height:Math.round(y)}}else{const y=f.height*g;f={x:Math.round(f.x+(f.width-y)/2),y:f.y,width:Math.round(y),height:f.height}}}else l=[f.width,f.height];return l[0]>f.width?(d=Math.min(l[0]/f.width,e),h=l[0]/f.width/d):(d=1,h=l[0]/f.width),{resolutionScale:d,cropArea:{x:Math.round((f.x+i.left)*d),y:Math.round((f.y+i.top)*d),width:Math.round(f.width*d),height:Math.round(f.height*d)},outputScale:h,format:s,quality:o,children:r,rotation:a}}function BEe(t,e,n){const{ctx:i,canvas:s}=MN(t,n),o=i.getImageData(0,0,t.width,t.height),r=UEe(s,e);return $N(s),{dataUrl:r,data:o}}function zEe(t,e){const{ctx:n,canvas:i}=MN(t,e),s=n.getImageData(0,0,t.width,t.height);return $N(i),s}function MN(t,e){const n=HEe();e.premultipliedAlpha&&KEe(t),n.width=t.width,n.height=t.height;const i=n.getContext("2d");return i.putImageData(t,0,0),e.flipY&&qEe(i),{ctx:i,canvas:n}}function $N(t){t.width=0,t.height=0}function HEe(){return ke(Jw)&&(Jw=document.createElement("canvas")),Jw}let Jw=null;function UEe(t,e){const n=YEe[e.format],i=e.quality/100;return t.toDataURL(n,i)}function WEe(t,e){const n=jEe(t),i=XEe[n];return{format:n,quality:bc(e??i,0,100)}}function GEe(t,e){return e/Math.max(t[0],t[1])}function hVe(t,e,n,i=0,s=0,o=t.width-i,r=t.height-s,a=!1){const{data:l}=t,{width:c,height:u,data:d}=e,h=o/c,f=r/u,m=Math.ceil(h/2),g=Math.ceil(f/2),y=t.width;for(let _=0;_<u;_++)for(let C=0;C<c;C++){const w=4*(C+(a?u-_-1:_)*c);let S=0,E=0,k=0,A=0,$=0,L=0;const O=(_+.5)*f;for(let B=Math.floor(_*f);B<(_+1)*f;B++){const V=Math.abs(O-(B+.5))/g,P=(C+.5)*h,z=V*V;for(let U=Math.floor(C*h);U<(C+1)*h;U++){const W=Math.abs(P-(U+.5))/m,R=Math.sqrt(z+W*W);if(R>=1)continue;let D=2*R*R*R-3*R*R+1;const N=4*(i+U+(s+B)*y);L+=D*l[N+3],E+=D,!n&&l[N+3]<255&&(D=D*l[N+3]/255),k+=D*l[N],A+=D*l[N+1],$+=D*l[N+2],S+=D}}d[w]=k/S,d[w+1]=A/S,d[w+2]=$/S,d[w+3]=L/E}return e}function jEe(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return ZEe}}function qEe(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function KEe(t){const e=t.data,n=e.length;for(let i=0;i<n;i+=4){const s=e[i+3];if(s!==255&&s>0){const o=255/s;e[i+0]=e[i+0]*o,e[i+1]=e[i+1]*o,e[i+2]=e[i+2]*o}}}const YEe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},pA=98,ZEe="png",XEe={png:100,jpg:pA,jpeg:pA};function QEe(t){const e=RB(t);if(!e.available)return new Ue("webgl:required","WebGL is required but not supported.");if(t==="3d"&&e.majorPerformanceCaveat)return new Ue("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!e.supportsHighPrecisionFragment)return new Ue("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!e.supportsVertexShaderSamplers)return new Ue("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(e.type===VB.WEBGL1){if(!e.supportsElementIndexUint)return new Ue("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!e.supportsStandardDerivatives)return new Ue("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!e.supportsInstancedArrays)return new Ue("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function JEe(t){return t&&"nodeType"in t}function eke(t){return t&&typeof t.render=="function"}const hA={component:"esri-component"};let Qc=class extends dt{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const n=this._get("node");e!==n&&(e&&e.classList.add(hA.component),n&&n.classList.remove(hA.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||JEe(e)?(this._set("widget",null),ZL(e)):(eke(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};v([b({dependsOn:[]})],Qc.prototype,"id",null),v([b()],Qc.prototype,"node",null),v([ii("node")],Qc.prototype,"castNode",null),v([b({readOnly:!0})],Qc.prototype,"widget",void 0),Qc=v([Ae("esri.views.ui.Component")],Qc);const py=Qc,tke={left:0,top:0,bottom:0,right:0},AN={bottom:30,top:15,right:15,left:15},e0="manual",ys={ui:"esri-ui",corner:"esri-ui-corner",innerContainer:"esri-ui-inner-container",manualContainer:"esri-ui-manual-container",cornerContainer:"esri-ui-corner-container",topLeft:"esri-ui-top-left",topRight:"esri-ui-top-right",bottomLeft:"esri-ui-bottom-left",bottomRight:"esri-ui-bottom-right"};function nke(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function t0(t){const e=t,n=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(n===null||n===Object.prototype)&&("component"in e||"index"in e||"position"in e)?t:null}function n0(t,{top:e,bottom:n,left:i,right:s}){t.style.top=e,t.style.bottom=n,t.style.left=i,t.style.right=s}let xa=class extends Ii.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new si,this.view=null,this._applyViewPadding=()=>{const n=this.container;n&&n0(n,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const n=this._innerContainer;n&&n0(n,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([ge(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,gt),ge(()=>this.padding,this._applyUIPadding,gt)])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(e){const n=this._get("container");e!==n&&(e&&(e.classList.add(ys.ui),i1e(e),this._attachContainers(e)),n&&(n.classList.remove(ys.ui),n0(n,{top:"",bottom:"",left:"",right:""}),XL(n)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const n=this._getViewPadding(),i=n.top+n.bottom;return Math.max(e-i,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...AN,...e}}get width(){const e=this.get("view.width")||0;if(e===0)return e;const n=this._getViewPadding(),i=n.left+n.right;return Math.max(e-i,0)}add(e,n){let i,s;if(Array.isArray(e))return void e.forEach(r=>this.add(r,n));const o=t0(e);o&&({index:i,position:n,component:e,key:s}=o),n&&typeof n=="object"&&({index:i,key:s,position:n}=n),!e||n&&!this._isValidPosition(n)||this._add(e,n,i,s)}remove(e,n){if(!e)return;if(Array.isArray(e))return e.map(s=>this.remove(s,n));const i=this._find(e);if(i){const s=this._componentToKey;if(s.has(e)&&s.get(e)!==n)return;const o=this._components.indexOf(i);return i.node.parentNode&&i.node.parentNode.removeChild(i.node),this._componentToKey.delete(e),this._components.splice(o,1)[0]}}empty(e){return Array.isArray(e)?e.map(n=>this.empty(n)).reduce((n,i)=>n.concat(i)):(e=e||e0)===e0?Array.prototype.slice.call(this._manualContainer.children).filter(n=>!n.classList.contains(ys.corner)).map(n=>this.remove(n)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,n){if(Array.isArray(e)&&e.forEach(r=>this.move(r,n)),!e)return;let i;const s=t0(e)||t0(n);if(s&&(i=s.index,n=s.position,e=s.component||e),n&&!this._isValidPosition(n))return;const o=this.remove(e);o&&this.add(o,{position:n,index:i})}find(e){if(!e)return null;const n=this._findById(e);return n&&(n.widget||n.node)}getPosition(e){for(const n in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[n].contains(e))return n;return null}_add(e,n,i,s){e instanceof py||(e=new py({node:e})),this._place({component:e,position:n,index:i}),this._components.push(e),s&&this._componentToKey.set(e,s)}_find(e){return e?e instanceof py?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||tke}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(ys.innerContainer),e.classList.add(ys.cornerContainer);const n=document.createElement("div");n.classList.add(ys.innerContainer),n.classList.add(ys.manualContainer);const i=document.createElement("div");i.classList.add(ys.topLeft),i.classList.add(ys.corner),e.appendChild(i);const s=document.createElement("div");s.classList.add(ys.topRight),s.classList.add(ys.corner),e.appendChild(s);const o=document.createElement("div");o.classList.add(ys.bottomLeft),o.classList.add(ys.corner),e.appendChild(o);const r=document.createElement("div");r.classList.add(ys.bottomRight),r.classList.add(ys.corner),e.appendChild(r),this._innerContainer=e,this._manualContainer=n;const a=yo();this._cornerNameToContainerLookup={"top-left":i,"top-right":s,"bottom-left":o,"bottom-right":r,"top-leading":a?s:i,"top-trailing":a?i:s,"bottom-leading":a?r:o,"bottom-trailing":a?o:r},this._positionNameToContainerLookup={manual:n,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const n=e.component,i=e.position||e0,s=e.index,o=this._positionNameToContainerLookup[i],r=s>-1;if(nke(n.widget)&&n.widget.startup(),!r)return void o.appendChild(n.node);const a=Array.prototype.slice.call(o.children);if(s===0)return void(o.firstChild?aI(n.node,o.firstChild):o.appendChild(n.node));s>=a.length?o.appendChild(n.node):aI(n.node,a[s])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let n,i=null;return this._components.some(s=>(n=s===e,n&&(i=s),n)),i}_findById(e){let n,i=null;return this._components.some(s=>(n=s.id===e,n&&(i=s),n)),i}_findByNode(e){let n,i=null;return this._components.some(s=>(n=s.node===e,n&&(i=s),n)),i}};v([b()],xa.prototype,"container",null),v([b()],xa.prototype,"height",null),v([b({value:AN})],xa.prototype,"padding",null),v([ii("padding")],xa.prototype,"castPadding",null),v([b()],xa.prototype,"view",void 0),v([b()],xa.prototype,"width",null),xa=v([Ae("esri.views.ui.UI")],xa);const ike=xa;function fA(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function ske(t,e){return t.length!==e.length||t.some((n,i)=>n.text!==e[i].text)}function tv(t,e,n){!n||!e||t.find(i=>i.layerView===e&&i.text===n)||t.push({text:n,layerView:e})}function oke(t){return t.type==="bing-maps"}const wl=[];let Pd=class extends Zm{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Ht,this.view=null,this._allLayerViewsChange=n=>{this.handles.remove("suspension");const i=this.get("view.allLayerViews");i&&this.handles.add(i.map(s=>ge(()=>{var o;return[s.suspended,(o=s.layer)==null?void 0:o.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),n&&n.removed&&n.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.handles.add([Dn(()=>{var n;return(n=this.view)==null?void 0:n.allLayerViews},"change",n=>this._allLayerViewsChange(n),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),ji(()=>{var n;return((n=this.view)==null?void 0:n.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.get("view.allLayerViews");wl.length=0,e?(e.forEach(n=>{var o;if(n.suspended||!((o=n.layer)!=null&&o.attributionVisible))return;const i=n.layer;if(fA(i,"user"))return void tv(wl,n,i.copyright);if(i.hasAttributionData){if(this._fetchedAttributionData.has(n)){const r=this._fetchedAttributionData.get(n);return void(r?tv(wl,n,this._getDynamicAttribution(r,this.view,i)):fA(i)&&tv(wl,n,i.copyright))}return void this._fetchAttributionData(n)}const s=i.get("portalItem.accessInformation");tv(wl,n,s||i.copyright)}),ske(this.items,wl)&&(this.items.removeAll(),this.items.addMany(wl)),wl.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const n=await bB(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=n.ok?this._createContributionIndex(n.value,oke(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,n){const i=e.contributors,s={};if(!i)return s;for(let o=0;o<i.length;o++){const r=i[o],a=r.coverageAreas;if(!a)return;for(const l of a){const c=l.bbox,u=l.zoomMin-(n&&l.zoomMin?1:0),d=l.zoomMax-(n&&l.zoomMax?1:0),h={xmin:c[1],ymin:c[0],xmax:c[3],ymax:c[2],spatialReference:yc.WGS84},f={extent:RS(h),attribution:r.attribution||"",score:l.score!=null?l.score:100,id:o};for(let m=u;m<=d;m++)s[m]=s[m]||[],s[m].push(f)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(e,n,i){const{extent:s,scale:o}=n;let r=i.tileInfo.scaleToZoom(o);if(r=Math.min(e.maxKey,Math.round(r)),!s||r==null||r<=-1)return"";const a=e[r],l=s8(s.center.clone().normalize(),n.spatialReference),c={};return a?a.filter(u=>{const d=!c[u.id]&&l&&zL(u.extent,l);return d&&(c[u.id]=!0),d}).sort((u,d)=>d.score-u.score||u.objectId-d.objectId).map(u=>u.attribution).join(", "):""}};v([b({readOnly:!0,type:Ht})],Pd.prototype,"items",void 0),v([b({readOnly:!0})],Pd.prototype,"state",null),v([b()],Pd.prototype,"view",void 0),Pd=v([Ae("esri.widgets.Attribution.AttributionViewModel")],Pd);const LN=Pd,Cl={base:"esri-attribution esri-widget",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let ws=class extends kn{constructor(e,n){super(e,n),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:s})=>this._checkSourceTextOverflow(s))),this.iconClass=Cl.widgetIcon,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new LN}initialize(){this.addHandles(Dn(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,n)=>(e.includes(n.text)||e.push(n.text),e),[]).join(this.itemDelimiter)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[Cl.open]:this._isOpen};return M("div",{bind:this,class:this.classes(Cl.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return M("div",{class:Cl.poweredBy},"Powered by"," ",M("a",{class:Cl.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,n=this._isInteractive,i=n?"0":"",{attributionText:s}=this,o={[Cl.sourcesOpen]:e,[Cl.interactive]:n};return M("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Cl.sources,o),innerHTML:s,tabindex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let n=!1;const{clientHeight:i,clientWidth:s,scrollWidth:o}=e,r=o>s,a=this._attributionTextOverflowed!==r;if(this._attributionTextOverflowed=r,a&&(n=!0),this._isOpen){const l=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,l&&(this._isOpen=!1,n=!0)}n&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};v([b()],ws.prototype,"_isOpen",void 0),v([b()],ws.prototype,"_isInteractive",null),v([b()],ws.prototype,"_attributionTextOverflowed",void 0),v([b()],ws.prototype,"_prevSourceNodeHeight",void 0),v([b({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],ws.prototype,"attributionText",null),v([b()],ws.prototype,"iconClass",void 0),v([b()],ws.prototype,"itemDelimiter",void 0),v([b()],ws.prototype,"label",null),v([b(),rn("esri/widgets/Attribution/t9n/Attribution")],ws.prototype,"messages",void 0),v([b()],ws.prototype,"view",null),v([b({type:LN})],ws.prototype,"viewModel",void 0),v([Sn()],ws.prototype,"_toggleState",null),ws=v([Ae("esri.widgets.Attribution")],ws);const rke=ws,ake="esri.widgets.CompassViewModel";let Jc=class extends lT(dt){constructor(e){super(e),this._handles=new si,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(ge(()=>this.view,this._updateRotationWatcher,gt))}destroy(){this._handles=Bi(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const e={};this.view.type==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const n=-e.heading;this.orientation={x:0,y:0,z:n}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?ge(()=>e==null?void 0:e.rotation,this._updateForRotation,gt):ge(()=>e==null?void 0:e.camera,this._updateForCamera,gt))}};v([b({readOnly:!0})],Jc.prototype,"canShowNorth",null),v([b()],Jc.prototype,"orientation",void 0),v([b({readOnly:!0})],Jc.prototype,"state",null),v([b()],Jc.prototype,"view",void 0),Jc=v([Ae(ake)],Jc);const ON=Jc,Sl={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let Pr=class extends kn{constructor(e,n){super(e,n),this.iconClass=Sl.widgetIcon,this.messages=null,this.viewModel=new ON}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:n}=this.viewModel,i=n==="disabled",s=(n==="rotation"?"rotation":"compass")=="compass",o=i?-1:0,r={[Sl.disabled]:i,[Sl.interactive]:!i},a={[Sl.northIcon]:s,[Sl.rotationIcon]:!s},{messages:l}=this;return M("div",{bind:this,class:this.classes(Sl.base,r),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:o,"aria-label":l.reset,title:l.reset},M("span",{"aria-hidden":"true",class:this.classes(Sl.icon,a),styles:this._toRotationTransform(e)}),M("span",{class:Sl.text},l.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};v([b()],Pr.prototype,"goToOverride",null),v([b()],Pr.prototype,"iconClass",void 0),v([b()],Pr.prototype,"label",null),v([b(),rn("esri/widgets/Compass/t9n/Compass")],Pr.prototype,"messages",void 0),v([b()],Pr.prototype,"view",null),v([b({type:ON})],Pr.prototype,"viewModel",void 0),v([Sn()],Pr.prototype,"_reset",null),Pr=v([Ae("esri.widgets.Compass")],Pr);const PN=Pr;let Rd=class extends dt{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.own(ji(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.get("view.ready")&&this.view.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};v([b({readOnly:!0})],Rd.prototype,"state",null),v([b()],Rd.prototype,"navigationMode",void 0),v([b()],Rd.prototype,"view",void 0),Rd=v([Ae("esri.widgets.NavigationToggleViewModel")],Rd);const RN=Rd,Io={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let Rr=class extends kn{constructor(e,n){super(e,n),this.iconClass=Io.widgetIcon,this.messages=null,this.viewModel=new RN}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",n=this.get("viewModel.navigationMode")==="pan",i={[Io.disabled]:e,[Io.isLayoutHorizontal]:this.layout==="horizontal"},s={[Io.activeButton]:n},o={[Io.activeButton]:!n},r=e?-1:0,a=this.messages.toggle;return M("div",{bind:this,class:this.classes(Io.base,i),onclick:this._toggle,onkeydown:this._toggle,tabIndex:r,"aria-label":a,title:a},M("div",{class:this.classes(Io.button,Io.panButton,s)},M("span",{class:Io.panIcon})),M("div",{class:this.classes(Io.button,Io.rotateButton,o)},M("span",{class:Io.rotationIcon})))}_toggle(){this.toggle()}};v([b()],Rr.prototype,"iconClass",void 0),v([b()],Rr.prototype,"label",null),v([b({value:"vertical"})],Rr.prototype,"layout",null),v([b(),rn("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Rr.prototype,"messages",void 0),v([b()],Rr.prototype,"view",null),v([b({type:RN})],Rr.prototype,"viewModel",void 0),v([Sn()],Rr.prototype,"_toggle",null),Rr=v([Ae("esri.widgets.NavigationToggle")],Rr);const lke=Rr,Gh={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let Fl=class extends kn{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,n={[Gh.disabled]:!this.enabled,[Gh.interactive]:this.enabled},i={[this.iconClass]:!!this.iconClass};return M("div",{bind:this,class:this.classes(Gh.button,n),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},M("span",{"aria-hidden":"true",role:"presentation",class:this.classes(Gh.icon,i)}),M("span",{class:Gh.iconText},this.title))}_triggerAction(){this.action.call(this)}};v([b()],Fl.prototype,"action",void 0),v([b()],Fl.prototype,"enabled",void 0),v([b()],Fl.prototype,"iconClass",void 0),v([b()],Fl.prototype,"title",void 0),v([Sn()],Fl.prototype,"_triggerAction",null),Fl=v([Ae("esri.widgets.IconButton")],Fl);const mA=Fl;let Vd=class extends dt{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),n=this.get("view.constraints.effectiveMaxScale");return n===0||e>n}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),n=this.get("view.constraints.effectiveMinScale");return n===0||e<n}};v([b({readOnly:!0})],Vd.prototype,"canZoomIn",null),v([b({readOnly:!0})],Vd.prototype,"canZoomOut",null),v([b()],Vd.prototype,"view",void 0),Vd=v([Ae("esri.widgets.Zoom.ZoomConditions2D")],Vd);const cke=Vd;let Fd=class extends dt{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};v([b({readOnly:!0})],Fd.prototype,"canZoomIn",null),v([b({readOnly:!0})],Fd.prototype,"canZoomOut",null),v([b()],Fd.prototype,"view",void 0),Fd=v([Ae("esri.widgets.Zoom.ZoomConditions3D")],Fd);const uke=Fd;let Dl=class extends dt{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return q(this._zoomConditions)&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return q(this._zoomConditions)&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new cke({view:e}):e.type==="3d"&&(this._zoomConditions=new uke({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():cc(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():cc(e.goTo({zoomFactor:.5}))}};v([b()],Dl.prototype,"_zoomConditions",void 0),v([b()],Dl.prototype,"canZoomIn",null),v([b()],Dl.prototype,"canZoomOut",null),v([b({readOnly:!0})],Dl.prototype,"state",null),v([b()],Dl.prototype,"view",null),Dl=v([Ae("esri.widgets.Zoom.ZoomViewModel")],Dl);const VN=Dl,jh={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Ma=class extends kn{constructor(e,n){super(e,n),this.iconClass=jh.widgetIcon,this.messages=null,this.viewModel=new VN}initialize(){this._zoomInButton=new mA({action:this.zoomIn.bind(this),iconClass:jh.zoomInIcon}),this._zoomOutButton=new mA({action:this.zoomOut.bind(this),iconClass:jh.zoomOutIcon})}destroy(){this._zoomInButton=sn(this._zoomInButton),this._zoomOutButton=sn(this._zoomOutButton)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,n={[jh.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:s}=e;this._zoomInButton.enabled=i,this._zoomOutButton.enabled=s;const{zoomIn:o,zoomOut:r}=this.messages;return this._zoomInButton.title=o,this._zoomOutButton.title=r,M("div",{class:this.classes(jh.base,n)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};v([b()],Ma.prototype,"iconClass",void 0),v([b()],Ma.prototype,"label",null),v([b({value:"vertical"})],Ma.prototype,"layout",null),v([b(),rn("esri/widgets/Zoom/t9n/Zoom")],Ma.prototype,"messages",void 0),v([b()],Ma.prototype,"view",null),v([b({type:VN})],Ma.prototype,"viewModel",void 0),Ma=v([Ae("esri.widgets.Zoom")],Ma);const FN=Ma;function dke(t){return t&&t.view!==void 0}let hy=class extends ike{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this._handles.add([ge(()=>this.components,this._componentsWatcher.bind(this),gt),ge(()=>this.view,this._updateViewAwareWidgets.bind(this),gt)])}_add(e,n,i,s){if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}super._add(e,n,i,s)}_removeComponents(e){e.forEach(n=>{const i=this._find(n);i&&(this.remove(i),i.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(n=>{const i=this._find(n),s=i&&i.widget;dke(s)&&(s.view=e)})}_componentsWatcher(e,n){this._removeComponents(n),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:n}=this.padding;this.padding=n}}_addComponents(e){this.constructed&&e.forEach(n=>this.add(this._createComponent(n),this._defaultPositionLookup[n]))}_createComponent(e){const n=this._createWidget(e);if(n)return new py({id:e,node:n})}_createWidget(e){return e==="attribution"?this._createAttribution():e==="compass"?this._createCompass():e==="navigation-toggle"?this._createNavigationToggle():e==="zoom"?this._createZoom():void 0}_createAttribution(){return new rke({view:this.view})}_createCompass(){return new PN({view:this.view})}_createNavigationToggle(){return new lke({view:this.view})}_createZoom(){return new FN({view:this.view})}};v([b()],hy.prototype,"components",void 0),hy=v([Ae("esri.views.ui.DefaultUI")],hy);const pke=hy;let fy=class extends pke{constructor(e){super(e),this.components=["attribution","zoom"]}};v([b()],fy.prototype,"components",void 0),fy=v([Ae("esri.views.ui.2d.DefaultUI2D")],fy);const DN=fy;var WC;let my=WC=class extends Ju{constructor(t){super(t),this.color=new cn([0,0,0,1])}clone(){return new WC(hr({color:this.color}))}};v([b({type:cn,json:{write:!0}})],my.prototype,"color",void 0),my=WC=v([Ae("esri.webmap.background.ColorBackground")],my);const hke=my;let NN,BN,zN,HN,UN,WN;async function fke(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:n,MapViewNavigation:i,MagnifierView2D:s,Stage:o}]=await Promise.all([Fe(()=>import("./webglDeps-6709fdb1.js"),["./webglDeps-6709fdb1.js","./VertexArrayObject-3630ef4f.js","./Error-57322e92.js","./string-480f3e3f.js","./typedArrayUtil-d9bc5fbd.js","./Texture-411ca148.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./context-util-d4c193b5.js","./enums-64ab819c.js","./ProgramTemplate-f021fc55.js","./programUtils-71c4f47c.js","./NestedMap-1b5db22e.js"],import.meta.url),Fe(()=>import("./mapViewDeps-04b8fbf0.js"),["./mapViewDeps-04b8fbf0.js","./Error-57322e92.js","./string-480f3e3f.js","./typedArrayUtil-d9bc5fbd.js","./promiseUtils-32d9c228.js","./reactiveUtils-5869e41a.js","./cast-a534ae90.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./mat3f32-d3d088e8.js","./Rasterizer-2c1558a6.js","./request-24011425.js","./preload-helper-41c905a7.js","./_commonjsHelpers-a430e9ea.js","./imageutils-0a369a69.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./cimAnalyzer-a68275f3.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./fontUtils-4ed0e787.js","./screenUtils-90993e16.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./BidiEngine-836b7ef6.js","./aaBoundingRect-b340cf8c.js","./jsonUtils-c6684c52.js","./enums-4b2a86a0.js","./utils-c81a5c52.js","./alignmentUtils-ae955d28.js","./definitions-2d0dd0cd.js","./mat2d-d0b91e3e.js","./vec2-ab9f47bf.js","./vec2f32-461e65a9.js","./number-954e4ab6.js","./Rect-ea14f53a.js","./callExpressionWithFeature-13fe9b68.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./colorRamps-8d7efc14.js","./enumeration-61a13175.js","./Symbol-8266348e.js","./GeometryUtils-eebff0a0.js","./floatRGBA-090399ba.js","./rasterizingUtils-22a741bf.js","./utils-0d179f64.js","./EffectView-dffeb0bc.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./Evented-cbf5f368.js","./enums-4ca4641f.js","./MaterialKey-a0a08f8b.js","./Utils-a4216b91.js","./enums-64ab819c.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexElementDescriptor-2925c6af.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./BufferPool-602adb50.js","./WGLContainer-b2d1fffc.js","./mat3-9a8d9db7.js","./pixelUtils-cc2ca9c3.js","./vec2f64-30dc1443.js","./VertexArrayObject-3630ef4f.js","./vec4f32-2f36231b.js","./ProgramTemplate-f021fc55.js","./StyleDefinition-7d58136b.js","./config-1337d16e.js","./GeometryUtils-c093d234.js","./earcut-58237617.js","./featureConversionUtils-d2229ed4.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./enums-bfc9e4e9.js","./programUtils-71c4f47c.js","./NestedMap-1b5db22e.js","./RenderingContext-b74012a7.js","./OrderIndependentTransparency-68bd812c.js","./pbf-8b0546e8.js","./Matcher-acc26e80.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./Queue-275a6362.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./Clonable-9b34e760.js","./visualVariablesUtils-c668eb89.js","./visualVariablesUtils-3304d1a5.js","./tileUtils-dbff68ee.js","./TileClipper-31a81f15.js","./assets-cd44347b.js","./Geometry-daada628.js","./defaultsJSON-59981e75.js","./LRUCache-b9228ca3.js","./MemCache-1d2f56ee.js","./ExpandedCIM-5a2216e6.js","./devEnvironmentUtils-5002a058.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./locale-30120714.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./persistableUrlUtils-d0777bec.js","./styleUtils-391927cf.js","./CircularArray-a936678e.js","./imageUtils-c2d0d1ae.js","./HandleOwner-2edbba46.js","./FeatureSetReader-3d68adfe.js","./centroid-56c5816c.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./sizeVariableUtils-d4870b0d.js","./BaseGraphicContainer-3ea19653.js","./normalizeUtilsSync-6d84346c.js","./normalizeUtils-0f537694.js","./utils-44a68fd6.js","./projection-acd73147.js","./SimpleObservable-8e532943.js","./zscale-48bab05e.js","./json-48e3ea08.js","./labelingInfo-c70ad911.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./fieldUtils-b2df74c4.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./Collection-7c37b74e.js","./collectionUtils-0365f48b.js","./labelUtils-4f4b54c6.js","./jsonUtils-8c02ff16.js","./FeatureContainer-e57c4b30.js","./TileContainer-a618bf74.js","./capabilities-d08b6e58.js","./schemaUtils-76874a61.js","./LayerFloorInfo-f184c8f5.js","./diffUtils-8a8cb5bc.js","./createSymbolSchema-1bb8123a.js","./rendererUtils-c63e720f.js","./FeatureReductionLayer-fcaeb34a.js","./BlendLayer-813950f9.js","./PopupTemplate-f97bb051.js","./number-2ab8ca0d.js","./Identifiable-093f90a8.js","./UniqueValueRenderer-73d567ad.js","./LegendOptions-2e7b3d70.js","./Graphic-6c08e65d.js","./compilerUtils-fefa73ae.js","./jsonUtils-1c5cdf77.js","./DictionaryLoader-2a334243.js","./deprecate-0d93948c.js","./OperationalLayer-9c50475b.js","./ElevationInfo-80227ecc.js","./util-0a217e96.js","./ComputedAttributeStorage-87b4df43.js","./FieldsIndex-02142c8a.js","./vec3f32-4322908d.js","./GraphicContainer-6eb8d408.js","./asyncUtils-087555fc.js","./requestImageUtils-d2d7b1fb.js","./Basemap-59ed9516.js","./loadAll-01cdf0a9.js","./PortalItem-e4ba4b94.js","./messages-28bf3b89.js","./writeUtils-3bde6e49.js","./layerUtils-68eea656.js","./CollectionFlattener-f43a0fce.js","./TablesMixin-55858fba.js","./Layer-cea228f0.js","./Cyclical-078b4564.js","./workers-af024c50.js","./Connection-b591250e.js","./intl-7d39a8c0.js","./TileInfo-c5c8c8d2.js","./widget-4abc68df.js","./uuid-73213768.js","./dom-5b7af1bf.js","./byteSizeEstimations-90c5a50d.js","./executeQueryJSON-29279a46.js","./query-b7b3a76b.js","./pbfQueryUtils-c922ef32.js","./queryZScale-3c8de33a.js","./FeatureSet-deb2029d.js","./RelationshipQuery-c27267ab.js","./utils-4469bf65.js","./ItemCache-bf1028d4.js","./TopFeaturesQuery-9aca00bf.js","./FeatureLayer-534ff006.js","./MultiOriginJSONSupport-b8792dfa.js","./FeatureLayerBase-c0aa3674.js","./HeightModelInfo-34f16d74.js","./arcgisLayerUrl-bed3cba1.js","./editsZScale-12d81957.js","./APIKeyMixin-b6e4f897.js","./ArcGISService-aada3b5d.js","./CustomParametersMixin-a5d06ccc.js","./EditBusLayer-b5dc3689.js","./OrderedLayer-9623e905.js","./PortalLayer-12f4a535.js","./RefreshableLayer-49182ab8.js","./ScaleRangeLayer-c072e266.js","./TemporalLayer-c74d13d4.js","./TimeInfo-f76d6c20.js","./FeatureTemplate-c4496b93.js","./FeatureType-0be9420b.js","./fieldProperties-4207e953.js","./versionUtils-fabd8b3a.js","./styleUtils-08eaa4d2.js","./popupUtils-1ecc877c.js","./colorUtils-82440b70.js","./Scheduler-5e6ccc87.js","./GraphicsLayer-b332f442.js","./ViewingMode-915d19cb.js","./unitBezier-881ac1eb.js","./Subtype-a3103d84.js","./datetime-4f774298.js","./elevationInfoUtils-c3025fae.js","./QueryEngineResult-92e13fe4.js","./WhereClause-6c9440a1.js","./Util-289ce3b5.js","./ExportImageParameters-ba01802d.js","./sublayerUtils-eea48c01.js","./webStyleSymbolUtils-0b165621.js","./dehydratedFeatures-3dcd65f1.js","./plane-46a8c767.js","./sphere-622880b9.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./quat-ec16a584.js"],import.meta.url)]);BN=t,zN=e,HN=n,UN=i,WN=s,NN=o}const gA=160;function mke(t){return t&&t.declaredClass==="esri.Viewpoint"}let Rt=class extends d0e(aSe(lSe(ISe))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Oy({getCollections:()=>{var n,i;return[(n=this.basemapView)==null?void 0:n.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!1,this.supportsGround=!1,this._stationaryTimer=null,this.frameTask=new XSe(this),this._pePromise=null,this.floors=new Ht,this.highlightOptions=new IN,this.inputManager=new VEe({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new xN,this.type="2d",this.ui=new DN,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new kN,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([ge(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(gA)},_c),this.on("resize",n=>this._resizeHandler(n)),ge(()=>{var n;return(n=this.animationManager)==null?void 0:n.animation},n=>{this.animation=n})]),I8()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new AB(this.featuresTilingScheme)}get initialExtentRequired(){var a;const{scale:e,constraints:n,center:i,viewpoint:s,extent:o}=this;let r=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((a=this.map.initialViewProperties)!=null&&a.viewpoint))&&!o&&(n!=null&&n.effectiveLODs||(r=-1),(!i||e===0&&r===-1)&&(!s||!q(s.targetGeometry)||s.targetGeometry.type!=="extent"&&!s.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!Gu()||(this._pePromise||(this._pePromise=ch().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const n=this.spatialReference,i=zt(e.targetGeometry);return!!lh(i.spatialReference,n)||this._projectionEngineLoaded}set animation(e){const n=this._get("animation");if(e===n)return;if(n&&n.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{var s;e===this._get("animation")&&(this._set("animation",null),(s=this.frameTask)==null||s.requestFrame()),this.frameTask&&(this.frameTask.animationInProgress=!1)};e.when(i,i)}get background(){return vke(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:n}=this.state.paddedViewState;return new Kt({x:e[0],y:e[1],spatialReference:n})}set center(e){if(e==null)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let n;try{n=this._project(e,this.spatialReference)}catch(s){return void Tt.getLogger(this.declaredClass).error(new Ue("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:s}))}const i=this.viewpoint;FC(i,i,n),this.viewpoint=i}set constraints(e){const n=this._get("constraints");n&&(this.handles.remove("map-view-constraints"),n.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(ge(()=>e.version,()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))},_c),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void Tt.getLogger(this.declaredClass).error(new Ue("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let n;try{n=this._project(e,this.spatialReference)}catch(s){return void Tt.getLogger(this.declaredClass).error(new Ue("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const i=this.viewpoint;RSe(i,i,n,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const n=this.viewpoint;qSe(n,n,e),this.viewpoint=n}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}const n=this.viewpoint;iA(n,n,e),this.viewpoint=n}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){var n,i,s;const e=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(o=>!o.destroyed&&!("layerViews"in o)&&o.updating===!0));if(Ts("esri-2d-log-updating")){const o=this.allLayerViews.reduce((r,a)=>({...r,[a.layer.id]:!a.destroyed&&!("layerViews"in a)&&a.updating}),{});console.log(`Updating MapView: ${e}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(n=this.layerViewManager)==null?void 0:n.updating}
-> labelManager.updating: ${(i=this.labelManager)==null?void 0:i.updating}
-> graphicsView.updating: ${(s=this.graphicsView)==null?void 0:s.updating}
-> allLayerViews: ${JSON.stringify(o)}
`)}return e}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let n,i;try{n=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?i=new Ue("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):ke(e.targetGeometry)&&(i=new Ue("mapview:invalid-viewpoint","geometry not defined"))}catch(o){i=new Ue("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(i)return void Tt.getLogger(this.declaredClass).error(i);this._scaleBeforeChangingSpatialReference=null;const s=new dr({targetGeometry:new Kt,scale:0,rotation:0});Er(s,n),this.constraints.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this.frameTask.requestFrame(),this._set("viewpoint",s)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const n=this.viewpoint;iA(n,n,this.constraints.zoomToScale(e)),this.viewpoint=n,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,n){if(e)return this.animation&&(this.animation=null),this._createAnimation(),na(()=>this.ready,n).then(()=>{const i={animate:!0,...n},s=LSe(e,this);return this.animation.update(s),this._gotoTask={},i.animate?this._gotoAnimated(s,i):this._gotoImmediate(s,i)});Tt.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined")}async hitTest(e,n){const i=Q2(e)?X2(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let s=new Set,o=!1,r=null,a=null;n!=null&&n.include?yA(n.include,vA(this,d=>s.add(d),d=>{r||(r=new Set),r.add(d)},d=>s.add(d),()=>o=!0)):(o=!0,s=new Set(this.allLayerViews)),n!=null&&n.exclude&&yA(n.exclude,vA(this,d=>s.delete(d),d=>{a||(a=new Set),a.add(d)}));const l=this.allLayerViews.filter(d=>!d.suspended&&s.has(d)).reverse(),c=this.toMap(i);let u=[...o?this.graphicsView.hitTest(c).map(d=>({type:"graphic",graphic:d,layer:null,mapPoint:c})):[],...await Promise.all(l.map(d=>d.hitTest(c,i)).toArray())].filter(q).flat().filter(q);return r&&(u=u.filter(d=>!("graphic"in d)||!d.graphic||r.has(GC(d.graphic)))),a&&(u=u.filter(d=>!("graphic"in d)||!d.graphic||a.has(GC(d.graphic)))),{screenPoint:i,results:u}}async takeScreenshot(e){const n=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(n);return BEe(i,{format:n.format,quality:n.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(e){const n=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(n);return zEe(i,this._pixelFormat)}_createScreenshotPlan(e){e=e||{};const n=this.supersampleScreenshotsEnabled?Math.min(4,GEe(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach(r=>{const a=this.allLayerViews.find(l=>l.layer.id===r.id);a&&"container"in a&&a.container&&i.push(a.container)})):i=this._stage.children;const{format:s,quality:o}=WEe(e.format,e.quality);return NEe(e,n,this.size,this.padding,s,o,i,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const n=Q2(e)?X2(this,e):e,i=[0,0],[s,o]=this.state.toMap(i,[n.x,n.y]),r=this.spatialReference;return new Kt({x:s,y:o,spatialReference:r})}toScreen(e){if(!this.ready)return null;const n=this._project(e,this.spatialReference),i=[n.x,n.y];return this.state.toScreen(i,i),hi(i[0],i[1])}on(e,n,i,s){return this.inputManager&&this.viewEvents.on(e,n,i,s)||super.on(e,n)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,n,i;return this.map&&"initialViewProperties"in this.map&&((n=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:n.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}hasLayerViewModule(e){return oA.hasLayerViewModule(e)}importLayerView(e){return oA.importLayerView(e)}pixelSizeAt(){return this.ready?this.state.resolution:(Tt.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(n=>({...n,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=QEe(this.type);return Ts("safari")&&Ts("safari")<9&&(e=new Ue("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:Ts("safari")})),q(e)?(Tt.getLogger(this.declaredClass).warn("#validate()",e.message),Promise.reject(e)):fke()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new VC),this.animation}_cancellableGoTo(e,n,i){const s=()=>e===this._gotoTask,o=i.then(()=>{s()&&(this.animation=null)}).catch(a=>{throw s()&&(this.animation=null,n.done||(n.stop(),this.frameTask.animationInProgress=!1)),a}),r=new Promise(a=>a(o));return n.when().catch(()=>{s()&&r.cancel&&r.cancel()}),r}_gotoImmediate(e,n){const i=this._gotoTask,s=this.animation,o=e.then(r=>{if(xs(n),i!==this._gotoTask)throw new Ue("view:goto-interrupted","Goto was interrupted");this.viewpoint=s.target=r,s.finish()});return this._cancellableGoTo(i,s,o)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const n=performance.now()-this._lastStationaryEventTimestamp;n<gA&&(this._stationaryTimer=this._flipStationary(n))},e)),this._stationaryTimer}_getDefaultViewpoint(){var _,C,w,S;const{constraints:e,initialExtent:n,map:i,padding:s,size:o}=this;if(!e)return null;const r=i&&"initialViewProperties"in i&&i.initialViewProperties,a={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};e.effectiveLODs?a.zoom!==-1&&(a.scale=e.zoomToScale(a.zoom)):a.zoom=-1;let l=null,c=null,u=0;const d=a.viewpoint&&a.viewpoint.rotation,h=a.viewpoint&&a.viewpoint.targetGeometry;q(h)&&(h.type==="extent"?l=h:h.type==="point"&&(c=h,u=a.viewpoint.scale));const f=a.extent||l||((C=zt((_=r==null?void 0:r.viewpoint)==null?void 0:_.targetGeometry))==null?void 0:C.extent)||n,m=a.center||c||(f==null?void 0:f.center),g=a.scale||u||((w=r==null?void 0:r.viewpoint)==null?void 0:w.scale)||f&&Df(f,[o[0]-s.left-s.right,o[1]-s.top-s.bottom]),y=a.rotation||d||((S=r==null?void 0:r.viewpoint)==null?void 0:S.rotation)||0;return m&&g?new dr({targetGeometry:m,scale:g,rotation:y}):null}_gotoAnimated(e,n){const i=this._gotoTask,s=this.animation,o=e.then(r=>{if(xs(n),i!==this._gotoTask)throw new Ue("view:goto-interrupted","Goto was interrupted");return s.update(r),this.animationManager.animate(s,this.viewpoint,n),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,s,o)}_project(e,n){var o;const i=e&&e.targetGeometry||e;if(!n)return e;if(!i)return null;if(n.imageCoordinateSystem||(o=i.spatialReference)!=null&&o.imageCoordinateSystem||vc(n,i.spatialReference))return e;const s=fr(i,n);if(!s)throw new Ue("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:n});return mke(e)?(e.targetGeometry=s,e):s}_resizeHandler(e){if(!this.ready)return;const n=this.state;let i=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.concat();n.size=[e.width,e.height],jSe(i,i,s,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i}_startup(){var l,c;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint(),n=e.targetGeometry;try{this._project(e,this.spatialReference)}catch(u){Tt.getLogger(this.declaredClass).warn(new XT("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:n.toJSON(),spatialReference:this.spatialReference,error:u})),e.targetGeometry=((l=this.defaultsFromMap.extent)==null?void 0:l.center)||new Kt({x:0,y:0,spatialReference:this.spatialReference})}(c=this.constraints)==null||c.fit(e),this._set("state",new iEe({padding:this._get("padding"),size:this.size,viewpoint:e})),this.graphics.owner=this;const i=new NN(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new WN,this._magnifierView.magnifier=this.magnifier;const s=new HN({view:this});this._set("labelManager",s);const o=new ZSe({view:this});this._set("animationManager",o);const r=new UN({view:this,animationManager:o});this._set("mapViewNavigation",r),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("post-render",()=>this._set("rendering",i.renderRequested)),i.on("will-render",()=>this._set("rendering",i.renderRequested)),i.on("webgl-error",u=>this.fatalError=u.error),ge(()=>this.stationary,u=>i.stationary=u,us),ge(()=>this.background,u=>{i.background=u,this._magnifierView.background=u},us),ge(()=>this.magnifier,u=>this._magnifierView.magnifier=u,us),ge(()=>this.renderingOptions,u=>i.renderingOptions=u,us),ge(()=>this.highlightOptions,u=>i.highlightOptions=u,us),ge(()=>this.state.id,()=>i.state=this.state,us)],"map-view"),this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach(u=>u(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,n],spatialReference:i,rotation:s,scale:o}=this.state.paddedViewState,r=new Kt({x:e,y:n,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",r),this._set("zoom",-1),this._set("rotation",s),this._set("scale",o),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(n=>{this._stage.addChild(n.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new LB(wf.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const n=new BN({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new zN(e)});this.frameTask.graphicsView=n,this._set("graphicsView",n)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const l of this.allLayerViews)l.processDetach();this._destroySpatialReferenceDependentProperties();const n=this.state.paddedViewState.clone();if(ke(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=n.scale;else{const l=n.viewpoint.clone();l.scale=this._scaleBeforeChangingSpatialReference,n.viewpoint=l}const i=n.clone(),[s,o]=n.center;let r=null;try{r=this._project(new Kt({x:s,y:o,spatialReference:n.spatialReference}),e)}catch(l){Gu()||Tt.getLogger(this.declaredClass).warn(new XT("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:r.toJSON(),spatialReference:e,error:l}))}r||(r=new Kt({x:0,y:0,spatialReference:e}));const a=FC(new dr({targetGeometry:new Kt,scale:0,rotation:0}),n.viewpoint,r);i.viewpoint=a;try{const c=[n.size[0]/2,n.size[1]/2],u=[c[0]+20,c[1]],d=n.toMap([0,0],u),{x:h,y:f}=this._project(new Kt({x:d[0],y:d[1],spatialReference:n.spatialReference}),e);d[0]=h,d[1]=f,i.toScreen(d,d);const m=WSe(c,d,u),g=Math.hypot(d[0]-c[0],d[1]-c[1])/20;!Number.isFinite(g)||Math.abs(g)>4?(a.rotation=0,a.targetGeometry=new Kt({x:0,y:0,spatialReference:e})):(a.scale*=g,a.scale>Ts("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(m)?m:0)}catch{}this._get("constraints").constrain(a,null),this._get("state").viewpoint=a,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const l of this.allLayerViews)l.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};Rt.type="2d",v([b({readOnly:!0})],Rt.prototype,"animationManager",void 0),v([b({constructOnly:!0})],Rt.prototype,"deactivatedWebGLExtensions",void 0),v([b({constructOnly:!0})],Rt.prototype,"debugWebGLExtensions",void 0),v([b({readOnly:!0})],Rt.prototype,"featuresTilingScheme",void 0),v([b({readOnly:!0})],Rt.prototype,"fullOpacity",void 0),v([b({readOnly:!0})],Rt.prototype,"graphicsTileStore",null),v([b()],Rt.prototype,"graphicsView",void 0),v([b({readOnly:!0})],Rt.prototype,"state",void 0),v([b()],Rt.prototype,"initialExtentRequired",null),v([b()],Rt.prototype,"labelManager",void 0),v([b({readOnly:!0})],Rt.prototype,"resourceManager",null),v([b({readOnly:!0})],Rt.prototype,"textureManager",null),v([b({readOnly:!0})],Rt.prototype,"mapViewNavigation",void 0),v([b({constructOnly:!0})],Rt.prototype,"renderCanvas",void 0),v([b()],Rt.prototype,"renderingOptions",void 0),v([b({readOnly:!0})],Rt.prototype,"rendering",void 0),v([b({constructOnly:!0})],Rt.prototype,"supersampleScreenshotsEnabled",void 0),v([b({readOnly:!0})],Rt.prototype,"supportsGround",void 0),v([b()],Rt.prototype,"_stationaryTimer",void 0),v([b()],Rt.prototype,"_defaultsFromMapSettings",null),v([b()],Rt.prototype,"_pePromise",void 0),v([b({readOnly:!0})],Rt.prototype,"typeSpecificPreconditionsReady",null),v([b()],Rt.prototype,"animation",null),v([b({type:hke})],Rt.prototype,"background",null),v([b({value:null,type:Kt,dependsOn:["state.id","ready"]})],Rt.prototype,"center",null),v([b({type:kN})],Rt.prototype,"constraints",null),v([b({value:null,type:ol,dependsOn:["state.id","ready"]})],Rt.prototype,"extent",null),v([b()],Rt.prototype,"floors",void 0),v([b({type:IN})],Rt.prototype,"highlightOptions",void 0),v([b({readOnly:!0})],Rt.prototype,"inputManager",void 0),v([b()],Rt.prototype,"map",void 0),v([b({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Rt.prototype,"padding",null),v([b()],Rt.prototype,"resizeAlign",void 0),v([b({readOnly:!0,dependsOn:["state.id"]})],Rt.prototype,"resolution",null),v([b({value:0,type:Number,dependsOn:["state.id","ready"]})],Rt.prototype,"rotation",null),v([b({value:0,type:Number,dependsOn:["state.id","ready"]})],Rt.prototype,"scale",null),v([b({constructOnly:!0})],Rt.prototype,"spatialReferenceLocked",void 0),v([b()],Rt.prototype,"stationary",null),v([b({type:xN,readOnly:!0})],Rt.prototype,"timeline",void 0),v([b({readOnly:!0})],Rt.prototype,"type",void 0),v([b({readOnly:!0})],Rt.prototype,"updating",null),v([b({value:null,type:dr,dependsOn:["state.id","ready"]})],Rt.prototype,"viewpoint",null),v([b({value:-1,dependsOn:["state.id","ready"]})],Rt.prototype,"zoom",null),v([b({readOnly:!0})],Rt.prototype,"navigating",null),v([b({type:DN})],Rt.prototype,"ui",void 0),Rt=v([Ae("esri.views.MapView")],Rt);const gke=Rt;function GC(t){var n,i;const e=t.getObjectId();return e?`${((n=t.layer)==null?void 0:n.uid)??((i=t.sourceLayer)==null?void 0:i.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function vA(t,e,n,i,s){return o=>{if(o instanceof Ls){if(o.layer===t)s==null||s();else{const r=t.allLayerViews.find(a=>a.layer===o.layer);r&&(i==null||i(r))}n(GC(o))}else{const r=t.allLayerViews.find(a=>a.layer===o);r&&e(r)}}}function yA(t,e){if(t)if(QT(t))for(const n of t)if(QT(n))for(const i of n)e(i);else e(n);else e(t)}function vke(t){return(t==null?void 0:t.declaredClass)==="esri.WebMap"}let eu=class extends dt{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.codedValue=null}};v([b()],eu.prototype,"objectType",void 0),v([b()],eu.prototype,"maxValue",void 0),v([b()],eu.prototype,"minValue",void 0),v([b()],eu.prototype,"codedValue",void 0),eu=v([Ae("esri.layers.support.ContingentValue")],eu);const Fi=eu;let tu=class extends dt{constructor(e){super(e),this.isRetired=!1}};v([b()],tu.prototype,"id",void 0),v([b()],tu.prototype,"isRetired",void 0),v([b()],tu.prototype,"subtype",void 0),v([b()],tu.prototype,"values",void 0),tu=v([Ae("esri.layers.support.Contingency")],tu);const bA=tu;let uf=class extends dt{constructor(e){super(e)}};v([b()],uf.prototype,"fieldGroup",void 0),v([b()],uf.prototype,"type",void 0),uf=v([Ae("esri.layers.support.ContingencyConstraintViolation")],uf);const _A=uf;let df=class extends dt{constructor(e){super(e)}};v([b()],df.prototype,"contingentValuesAllGroups",void 0),v([b()],df.prototype,"contingentValuesByFieldGroup",void 0),df=v([Ae("esri.layers.support.ContingentValuesResult")],df);const yke=df;let nu=class extends dt{constructor(e){super(e),this.fields=null,this.isEditingRestrictive=!1}};v([b()],nu.prototype,"name",void 0),v([b()],nu.prototype,"fields",void 0),v([b()],nu.prototype,"isEditingRestrictive",void 0),v([b()],nu.prototype,"contingencies",void 0),nu=v([Ae("esri.layers.support.FieldGroup")],nu);const jC=nu;var Nl;let iu=Nl=class extends OL(Wu){constructor(t){super(t),this.request=go,this.fieldGroups=null,this.fieldGroupDefinitions=null}initialize(){}static async createLoadedLayerContingentValuesCache(t){await t.load();const e=t.sourceJSON;if(t.layerId===void 0)return null;const n=e.hasContingentValuesDefinition;if(n)return new Nl({layer:t}).load();if(n===void 0){const i=Tv(t.url);if(ke(i))return null;const s=i.url.path;if((await Nl._staticFetchEnterpriseFeatureRoot(s)).supportsQueryDataElements){const o=t.layerId.toString(),r=await Nl._staticFetchEnterpriseFieldGroup(s,o);if(r){const a=r.map(l=>({name:l.name,isEditingRestrictive:l.isEditingRestrictive,fields:l.fieldNames.names}));return new Nl({layer:t,fieldGroupDefinitions:a}).load()}}}return null}async load(t){const e=this.layer.load(t).then(()=>this._initializeContingentValues(this.fieldGroupDefinitions,t));return this.addResolvingPromise(e),this}validateContingencyConstraints(t,e){const n=this.layer.typeIdField,i=Object.keys(t),s=[],o=[];for(const r of this.fieldGroups){const a=r.isEditingRestrictive?"error":"warning";if(e&&!r.fields.some(d=>e.includes(d)))continue;if(!r.fields.every(d=>i.includes(d))){o.push(new _A({fieldGroup:r,type:a}));continue}let l=!1;const c=t[n],u=r.contingencies.filter(d=>!(!d.isRetired&&d.subtype)||d.subtype.code===c);for(const d of u){let h=!0;for(const f in d.values){const m=d.values[f];if(m.objectType!=="any"){if(m.objectType==="null"){if(t[f]!=null){h=!1;break}}else if(m.objectType==="code"){if(t[f]!==m.codedValue.code){h=!1;break}}else if(m.objectType==="range"){const g=t[f];if(g<m.minValue||g>m.maxValue){h=!1;break}}}}if(h){l=!0;break}}l||s.push(new _A({fieldGroup:r,type:a}))}return{invalid:s,incomplete:o}}getContingentValues(t,e,n=!1){const i=t[this.layer.typeIdField],s=i!=null,o={};let r=[];const a=this.fieldGroups.filter(l=>l.fields.includes(e));r.push(new Fi({objectType:"any"}));for(const l of a){let c=[];const u=l.contingencies.filter(f=>!(f.isRetired||f.subtype&&s&&f.subtype.code!==i));let d=!1;const h={};for(const f of u){let m,g=!0;for(const y in f.values){const _=f.values[y];if(e!==y){if(t[y]!==void 0&&_.objectType!=="any"){if(_.objectType==="null")t[y]!==null&&(g=!1);else if(_.objectType==="code")t[y]!==_.codedValue.code&&(g=!1);else if(_.objectType==="range"){const C=t[y];(C<_.minValue||C>_.maxValue)&&(g=!1)}}}else m=_,d=d||_.objectType==="range"}if(m&&g){if(m.objectType==="any"){c.length=0,c.push(m);break}const y=this._generateKey(m);h[y]||c.push(m),h[y]=!0}}d&&(c=this._joinRange(c)),o[l.name]=c,r=n?this._filterIntersection(r,c):null}return a.length===1&&n&&(r=[]),new yke({contingentValuesAllGroups:r,contingentValuesByFieldGroup:o})}_generateKey(t){switch(t.objectType){case"any":return"@any@";case"null":return"@null@";case"code":return t.codedValue.name+t.codedValue.code.toString();case"range":return t.minValue.toString()+"-"+t.maxValue.toString()}}_joinRange(t){let e,n;t.sort((s,o)=>s.objectType==="null"?-1:o.objectType==="null"?1:s.minValue-o.minValue);const i=[];for(const s of t)s.objectType!=="null"?e!==void 0?n<s.minValue?(i.push(new Fi({objectType:"range",minValue:e,maxValue:n})),e=s.minValue,n=s.maxValue):n<s.maxValue&&(n=s.maxValue):(e=s.minValue,n=s.maxValue):i.push(s);return i.push(new Fi({objectType:"range",minValue:e,maxValue:n})),i}_filterIntersection(t,e){var s,o;if(t.length===0||e.length===0)return[];if(t[0].objectType==="any")return e;if(e[0].objectType==="any")return t;const n=t[0].objectType==="range"||((s=t[1])==null?void 0:s.objectType)==="range",i=e[0].objectType==="range"||((o=e[1])==null?void 0:o.objectType)==="range";return n||i?this._intersectRanges(t,e):this._intersectValues(t,e)}_intersectRanges(t,e){const n=[];let i,s=0;for(const o of t)for(;s<e.length;s++){const r=e[s];if(o.objectType==="null"&&r.objectType==="null")n.push(new Fi({objectType:"null"}));else{if(o.objectType==="null")break;if(r.objectType==="null")continue}if(o.maxValue<r.minValue)break;if(o.maxValue===r.minValue){n.push(new Fi({objectType:"range",minValue:o.maxValue,maxValue:r.minValue}));break}if(!(o.minValue>r.maxValue))if(o.minValue!==r.maxValue){if(i=o.minValue>r.minValue?o.minValue:r.minValue,o.maxValue<r.maxValue){n.push(new Fi({objectType:"range",minValue:i,maxValue:o.maxValue}));break}n.push(new Fi({objectType:"range",minValue:i,maxValue:r.maxValue}))}else n.push(new Fi({objectType:"range",minValue:o.minValue,maxValue:r.maxValue}))}return n}_intersectValues(t,e){const n=[];for(const i of t)e.some(s=>{if(i.objectType===s.objectType)switch(i.objectType){case"any":case"null":return!0;case"code":return i.codedValue.code===s.codedValue.code&&i.codedValue.name===s.codedValue.name}return!1})&&n.push(i);return n}static async _staticFetchEnterpriseFeatureRoot(t,e){return go(t,{responseType:"json",query:{f:"json"},...e}).then(n=>n.data)}static async _staticFetchEnterpriseFieldGroup(t,e,n){return go(`${t}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([e]),f:"json"},...n}).then(i=>{var s;return(s=i.data.layerDataElements)==null?void 0:s[0].dataElement.fieldGroups})}async _initializeContingentValues(t,e){const n=t||await this._fetchFieldGroupDefs(e);if(n.length===0)return void(this.fieldGroups=[]);const i=await this._fetchContingentValues(n,e);this.fieldGroups=i}async _fetchFieldGroupDefs(t){if(this.layer.layerId===void 0)return[];const e=this.layer.sourceJSON,n=this.layer.layerId.toString(),i=zt(Tv(this.layer.url)).url.path;return e.hasContingentValuesDefinition?(await this._fetchAGOLFieldGroup(i,n,t)).map(s=>({name:s.name,isEditingRestrictive:s.restrictive,fields:s.fields.map(o=>this.layer.fieldsIndex.normalizeFieldName(o))})):e.hasContingentValuesDefinition!==void 0?[]:this._fetchEnterpriseFeatureRoot(i,t).then(async s=>s.supportsQueryDataElements?(await this._fetchEnterpriseFieldGroup(i,n,t)).map(o=>({name:o.name,isEditingRestrictive:o.isEditingRestrictive,fields:o.fieldNames.names.map(r=>this.layer.fieldsIndex.normalizeFieldName(r))})):[])}async _fetchAGOLFieldGroup(t,e,n){return go(`${t}/${e}/fieldgroups`,{responseType:"json",query:{f:"json"},...n}).then(i=>i.data.fieldGroups)}async _fetchEnterpriseFieldGroup(t,e,n){return Nl._staticFetchEnterpriseFieldGroup(t,e,n)}async _fetchEnterpriseFeatureRoot(t,e){return Nl._staticFetchEnterpriseFeatureRoot(t,e)}async _fetchContingentValues(t,e){if(this.layer.layerId===void 0)return[];const n=this.layer.sourceJSON,i=this.layer.layerId.toString(),s=zt(Tv(this.layer.url)).url.path;if(n.hasContingentValuesDefinition){const r=await this._fetchAGOLContingentValues(s,i,e);return this._constructFieldGroupsAGOL(t,r)}const o=await this._fetchEnterpriseContingentValues(s,i,e);return this._constructFieldGroupsEnterprise(t,o)}_constructFieldGroupsAGOL(t,e){return t.map(n=>{const i=e.contingentValuesDefinition.fieldGroups.find(s=>s.name===n.name);if(i){let s=[];return s=e.contingentValuesDefinition.hasSubType?this._parseAGOLFieldGroupSubtype(n,e,i.subTypes):this._parseAGOLFieldGroup(n,e,i.contingentValues),new jC({name:n.name,isEditingRestrictive:n.isEditingRestrictive,fields:n.fields,contingencies:s})}return null}).filter(n=>n!==null)}_parseAGOLFieldGroupSubtype(t,e,n){let i=[];return n.forEach(s=>{const o=this._getSubtypeAGOL(s.name);i=i.concat(this._parseAGOLFieldGroup(t,e,s.contingentValues,o))}),i}_parseAGOLFieldGroup(t,e,n,i=null){const s=[];for(const o of n){const r=this._parseAGOLContingency(o,t,e,i);s.push(r)}return s}_parseAGOLContingency(t,e,n,i){const s=t.id,o=!!t.retired&&t.retired===1,r={};for(let a=0,l=0;a<e.fields.length;a++){const c=e.fields[a],u=n.typeCodes[t.types[a]];if(u==="Code"){let d=t.values[l];l++;const h=this._getDomain(i,c);if(this.layer.getField(c).type==="string"){const g=n.stringDicts.find(y=>y.domain===h.name);g&&(d=g.entries[d])}const f=h.codedValues.find(g=>g.code===d),m=new Fi({codedValue:f,objectType:"code"});r[c]=m}else if(u==="Range"){const d=t.values[l];l++;const h=d.range[0],f=d.range[1],m=new Fi({minValue:h,maxValue:f,objectType:"range"});r[c]=m}else if(u==="Any"){const d=new Fi({objectType:"any"});r[c]=d}else{const d=new Fi({objectType:"null"});r[c]=d}}return new bA({id:s,isRetired:o,subtype:i,values:r})}_constructFieldGroupsEnterprise(t,e){const n=e.fieldGroups;return t.map(i=>{const s=n.find(o=>o.name===i.name);if(s){const o=s.contingencies.map(r=>{const a=r.id,l=r.isRetired||!1,c=this._getSubtypeEnterprise(r.subtypeCode),u={};for(let d=0;d<i.fields.length;d++){const h=i.fields[d];let f=r.values[d];if(typeof f=="number"||typeof f=="string"){const m=this._getDomain(c,h),g=this.layer.getField(h);g.type==="string"?f=e.stringDictionary[f]:g.type==="date"&&(f=new Date(`${f}+00:00`).getTime());const y=m.codedValues.find(C=>C.code===f),_=new Fi({codedValue:y,objectType:"code"});u[h]=_}else if(typeof f=="object"){const m=f.minValue,g=f.maxValue,y=new Fi({minValue:m,maxValue:g,objectType:"range"});u[h]=y}else if(f){const m=new Fi({objectType:"any"});u[h]=m}else{const m=new Fi({objectType:"null"});u[h]=m}}return new bA({id:a,isRetired:l,subtype:c,values:u})});return new jC({name:i.name,isEditingRestrictive:i.isEditingRestrictive,fields:i.fields,contingencies:o})}return null}).filter(i=>i!==null)}async _fetchEnterpriseContingentValues(t,e,n){return go(`${t}/queryContingentValues`,{responseType:"json",query:{layers:JSON.stringify([e]),f:"json"},...n}).then(i=>{var s;return(s=i.data.contingentValueSets)==null?void 0:s[0]})}async _fetchAGOLContingentValues(t,e,n){return go(`${t}/${e}/contingentValues`,{responseType:"json",query:{f:"json"},...n}).then(i=>i.data)}_getSubtypeEnterprise(t){const e=this.layer.sourceJSON;let n;if(e.subtypes){const i=e.subtypes.find(s=>s.code===t);n=TI.fromJSON(i)}return n||null}_getSubtypeAGOL(t){const e=this.layer.sourceJSON;let n;if(e.subtypes){const i=e.subtypes.find(s=>s.name===t);n=TI.fromJSON(i)}return n||null}_getDomain(t,e){const n=t?t.domains[e]:this.layer.getFieldDomain(e);return n.type==="inherited"?this.layer.getFieldDomain(e):n}};v([b({constructOnly:!0})],iu.prototype,"layer",void 0),v([b({constructOnly:!0})],iu.prototype,"request",void 0),v([b({type:[jC]})],iu.prototype,"fieldGroups",void 0),v([b({constructOnly:!0})],iu.prototype,"fieldGroupDefinitions",void 0),iu=Nl=v([Ae("esri.layers.support.LayerContingentValuesCache")],iu);const bke=iu;let Nf=null;function _ke(t,e,n,i={}){const s=e.elementType,o="value",r=s.type==="array"?[{name:o,type:s.type,elementType:s.elementType}]:s.type==="dictionary"?[{name:o,type:s.type,properties:s.properties}]:[{name:o,type:s.type}];return new DB(t.map(a=>{const l={};return vT(l,r,{[o]:a},n,i),l[o]}))}function wke(t,e,n={}){const i=t instanceof fB?new Dr({source:t.features,geometryType:t.geometryType,fields:t.fields,spatialReference:t.spatialReference}):t;return e.constructFeatureSet(i,n.spatialReference,null,!0,n.lruCache,n.interceptor)}function Cke(t,e,n={}){const{spatialReference:i,interceptor:s,lruCache:o}=n;return typeof t=="string"?e.createFeatureSetCollectionFromService(t,i,o,s):e.createFeatureSetCollectionFromMap(t,i,o,s)}function Ske(t,e,n,i={}){const s={};return vT(s,e.properties,t,n,i),new Nf.Dictionary(s)}function vT(t,e,n,i,s={}){const o={};for(const r of Object.keys(n))o[r.toLowerCase()]=n[r];for(const r of e){const a=r.name.toLowerCase();if(s.variablesPreProcessed)t[a]=o[a];else switch(r.type){case"array":{const l=o[a];t[a]=_ke(l,r,i,s);break}case"feature":{const l=o[a];t[a]=l==null?null:Nf.Feature.createFromGraphic(l);break}case"featureSet":{const l=o[a];t[a]=i?wke(l,i,s):null;break}case"featureSetCollection":{const l=o[a];t[a]=i?Cke(l,i,s):null;break}case"dictionary":{const l=o[a];t[a]=Ske(l,r,i,s);break}case"geometry":case"boolean":case"date":case"text":case"number":t[a]=o[a]}}}function GN(t,e){for(const n of t)e.push(n),n.type==="dictionary"&&GN(n.properties,e);return e}function wA(t,e,n,i,s){const{spatialReference:o,interceptor:r,lruCache:a,services:l,console:c,abortSignal:u}=n,d={vars:{},spatialReference:o,interceptor:r,lrucache:a,useAsync:s,services:l,console:c,abortSignal:u};return e&&vT(d.vars,t.variables,e,i,n),d}function fb(t,e){switch(e.getArcadeType(t)){case"number":case"text":case"boolean":case"point":case"polygon":case"polyline":case"multipoint":case"extent":return t;case"date":return new Date(t.getTime());case"feature":{const n=(t.type,t),i="geometry"in n?n.geometry():null,s="readAttributes"in n?n.readAttributes():n.attributes;return new Ls({geometry:i,attributes:s})}case"dictionary":{const n=t,i=n.attributes,s={};for(const o of Object.keys(i))s[o]=fb(n.field(o),e);return s}case"array":return("toArray"in t?t.toArray():t).map(n=>fb(n,e))}return t}const CA={variables:[{name:"$feature",type:"feature"},{name:"$layer",type:"featureSet"},{name:"$datastore",type:"featureSetCollection"},{name:"$map",type:"featureSetCollection"}]},SA={variables:[{name:"$feature",type:"feature"},{name:"$aggregatedFeatures",type:"featureSet"}]},EA=new Map([["constraint",{variables:[{name:"$feature",type:"feature"}]}],["feature-z",{variables:[{name:"$feature",type:"feature"}]}],["field-calculation",{variables:[{name:"$feature",type:"feature"},{name:"$datastore",type:"featureSetCollection"}]}],["form-calculation",{variables:[{name:"$feature",type:"feature"},{name:"$originalFeature",type:"feature"},{name:"$layer",type:"featureSet"},{name:"$featureSet",type:"featureSet"},{name:"$datastore",type:"featureSetCollection"},{name:"$map",type:"featureSetCollection"},{name:"$editContext",type:"dictionary",properties:[{name:"editType",type:"text"}]}]}],["labeling",{variables:[{name:"$feature",type:"feature"}]}],["popup",CA],["popup-element",CA],["feature-reduction-popup",SA],["feature-reduction-popup-element",SA],["visualization",{variables:[{name:"$feature",type:"feature"},{name:"$view",type:"dictionary",properties:[{name:"scale",type:"number"}]}]}]]);function Eke(t){const e=EA.get(t);if(!e){const n=Array.from(EA.keys()).map(i=>`'${i}'`).join(", ");throw new Ue("createArcadeProfile:invalid-profile-name",`Invalid profile name '${t}'. You must specify one of the following values: ${n}`)}return hr(e)}async function kke(t,e,n={}){Nf||(Nf=await zS());const{arcade:i,arcadeUtils:s}=Nf,{loadScriptDependencies:o,referencesMember:r,scriptIsAsync:a}=i,l=GN(e.variables,[]),c=l.filter(w=>w.type==="featureSet"||w.type==="featureSetCollection").map(w=>w.name.toLowerCase()),u=i.parseScript(t,c);if(!u)throw new Ue("arcade:invalid-script","Unable to create SyntaxTree");const d=s.extractFieldNames(u),h=i.scriptTouchesGeometry(u),f=l.map(w=>w.name.toLowerCase()).filter(w=>r(u,w)),m=a(u,c);await o(u,m,c);const g={vars:{},spatialReference:null,useAsync:m};for(const w of f)g.vars[w]="any";const{lruCache:y}=n,_=i.compileScript(u,g),C=i.featureSetUtils();return{execute:(w,S={})=>{if(m)throw new Ue("arcade:invalid-execution-mode","Cannot execute the script in synchronous mode");const E=_(wA(e,w,{lruCache:y,...S},C,m));return S.rawOutput?E:fb(E,s)},executeAsync:async(w,S={})=>{const E=await _(wA(e,w,{lruCache:y,...S},C,m));return S.rawOutput?E:fb(E,s)},isAsync:m,variablesUsed:f,fieldsUsed:d,geometryUsed:h,syntaxTree:u}}var jN;const Tke=Symbol("FormExpressionArcadeExecutor");let Cs=class extends dt{constructor(e){super(e),this[jN]=!0,this._lastEvaluatedValue=null,this._abortController=new AbortController,this._stale=!1,this._updatingTracking=new NS,this._executeAsyncDebounced=Mb(async(n,i,s)=>{const o=await this.executor.executeAsync(n,{...i,abortSignal:s});return s.aborted?this._lastEvaluatedValue:(this._lastEvaluatedValue=o,this._stale=!1,o)})}get isAsync(){return this.executor.isAsync}get fieldsUsed(){return this.executor.fieldsUsed}get syntaxTree(){return this.executor.syntaxTree}get updating(){return this._updatingTracking.updating}get stale(){return this._stale}get geometryUsed(){return this.executor.geometryUsed}get variablesUsed(){return this.executor.variablesUsed}get lastEvaluatedValue(){return this._lastEvaluatedValue}abort(){this._abortController.abort()}execute(e,n){this._abortController=new AbortController;const i=this.executor.execute(e,{...n,abortSignal:this._abortController.signal});return this._lastEvaluatedValue=i,i}async executeAsync(e,n){return this._abortController=new AbortController,this._updatingTracking.addPromise(this._executeAsyncDebounced(e,n??{},this._abortController.signal))}markStale(){this._stale=!0}reset(){this.abort(),this._lastEvaluatedValue=null,this._stale=!1}};jN=Tke,v([b()],Cs.prototype,"_lastEvaluatedValue",void 0),v([b()],Cs.prototype,"_stale",void 0),v([b()],Cs.prototype,"_updatingTracking",void 0),v([b({constructOnly:!0})],Cs.prototype,"executor",void 0),v([b()],Cs.prototype,"isAsync",null),v([b()],Cs.prototype,"fieldsUsed",null),v([b()],Cs.prototype,"syntaxTree",null),v([b()],Cs.prototype,"updating",null),v([b()],Cs.prototype,"stale",null),v([b()],Cs.prototype,"geometryUsed",null),v([b()],Cs.prototype,"variablesUsed",null),v([b()],Cs.prototype,"lastEvaluatedValue",null),Cs=v([Ae("esri.widgets.FeatureForm.FormExpressionArcadeExecutor")],Cs);const Ike=async(t,e)=>{const n=Eke("form-calculation"),i=await kke(t,n,{});return e!=null&&e.fieldsIndex&&(i.fieldsUsed=B8(e.fieldsIndex,i.fieldsUsed)),new Cs({executor:i})},i0="#JSAPI_FORM_EXPRESSIONS_MANAGER_GEOMETRY",xke="esri.widgets.FeatureForm.FormExpressionsManager";let Bl=class extends dt{constructor(e){super(e),this._fieldReferencesLookup=new Map,this._fieldsAffectedLookup=new Map,this._latestFieldValues={...e.feature.attributes}}initialize(){this._dependencyGraph=this._buildDependencyGraph()}get _baseContext(){const{editType:e,layer:n,map:i,originalFeature:s,spatialReference:o}=this.arcadeContextInfo,r=(n==null?void 0:n.type)==="feature"?n:(n==null?void 0:n.type)==="scene"&&q(n.associatedLayer)?n.associatedLayer:void 0;return[{$originalfeature:s,$editcontext:{editType:e},$layer:r,$featureset:r,$datastore:n==null?void 0:n.url,$map:i},{spatialReference:o}]}set feature(e){this._latestFieldValues={...e==null?void 0:e.attributes},this._set("feature",e)}evaluateAll(){return this._evaluate(this.executors)}evaluateExpressions(e){return this._evaluate(e)}evaluateInvalidated(e){const{_fieldReferencesLookup:n,_latestFieldValues:i,feature:s}=this,o=new Set;for(const r of e)if(i[r]=s.getAttribute(r),n.has(r))for(const a of n.get(r))o.add(a);return this._evaluate([...o])}async evaluateInvalidatedByGeometry(){if(this._fieldReferencesLookup.has(i0))return this._evaluate([...this._fieldReferencesLookup.get(i0)])}resetExecutors(){for(const e of this.executors)e.reset()}_buildDependencyGraph(){const{_fieldReferencesLookup:e,_fieldsAffectedLookup:n,executors:i}=this,s=new Map(this.inputFields.map(r=>[r.name,r])),o=new Map(i.map(r=>[r,new Array]));for(const r of i){for(const a of r.fieldsUsed){Xh(e,a,()=>new Set).add(r);const l=s.get(a),{valueExpressionExecutor:c,editableExpressionExecutor:u}=l;q(c)&&(o.get(c).push(r),Xh(n,c,()=>new Set).add(l)),q(u)&&(o.get(u).push(r),Xh(n,u,()=>new Set).add(l))}r.geometryUsed&&Xh(e,i0,()=>new Set).add(r)}return o}async _evaluate(e){const n=new Map,{_dependencyGraph:i,_fieldsAffectedLookup:s,_latestFieldValues:o}=this;for(const a of e)qN(a,n,i);for(const[a,{resolver:l,dependencyPromises:c}]of n)Promise.all(c).then(async()=>{const[u,d]=this._makeContext(o);return a.executeAsync(u,d)}).then(()=>{if(s.has(a))for(const u of s.get(a))this._latestFieldValues[u.name]=u.value;l.resolve()},u=>{!u||gc(u)||kA(u)||a.markStale(),l.reject(u)});const r=(await Promise.allSettled(Array.from(n.values(),({resolver:a})=>a.promise))).filter(a=>a.status==="rejected"&&!(gc(a.reason)||kA(a.reason)));if(r.length>0)throw new AggregateError(r,"One or more expression executions failed")}_makeContext(e){const[n,i]=this._baseContext,s=this.feature.clone();return s.attributes=e,[{...n,$feature:s},i]}};v([b()],Bl.prototype,"_baseContext",null),v([b()],Bl.prototype,"feature",null),v([b()],Bl.prototype,"executors",void 0),v([b()],Bl.prototype,"inputFields",void 0),v([b()],Bl.prototype,"arcadeContextInfo",void 0),Bl=v([Ae(xke)],Bl);const qN=(t,e,n)=>{if(e.has(t))return;const i=PS();e.set(t,{resolver:i,dependencyPromises:[]}),t.abort();const s=n.get(t);for(const o of s)qN(o,e,n),e.get(o).dependencyPromises.push(i.promise)},kA=t=>t&&typeof t=="object"&&"message"in t&&t.message==="Cancelled";var Oa,mb;(function(t){t.Text="text",t.Number="number",t.Date="date",t.Unsupported="unsupported"})(Oa||(Oa={})),function(t){t.TOO_SHORT="length-validation-error::too-short"}(mb||(mb={}));const TA={type:"number"},IA={type:"number",intlOptions:{notation:"scientific"}},xA={type:"date",intlOptions:{day:"2-digit",month:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}};function MA(t){return t>=1e7||t<=-1e7}let Xt=class extends Li(dt){constructor(e){super(e),this._storedValue=null,this.editableExpressionExecutor=null,this.id=PL().toString(),this.requiredExpressionExecutor=null,this.valueExpressionExecutor=null,this.visibilityExpressionExecutor=null,this.feature=null,this.field=null,this.fieldElement=null,this.layer=null,this.error=null,this.group=null,this.messages=null}get _configAllowsEdits(){var s,o,r;const{fieldElement:e,layer:n,name:i}=this;return q(e)?e.editableExpression?this.evaluatedEditableExpression:e.editable!==!1:((r=(n==null?void 0:n.type)!=="subtype-group"?(o=(s=n==null?void 0:n.popupTemplate)==null?void 0:s.fieldInfos)==null?void 0:o.find(({fieldName:a})=>a===i):null)==null?void 0:r.isEditable)??!0}get _layerFieldAllowsEdits(){const{field:e,layer:n}=this;return(n==null?void 0:n.capabilities.operations.supportsEditing)&&(e==null?void 0:e.editable)}get isUsingValueExpression(){return this._shouldUseValueExpression()}get evaluatedEditableExpression(){const{editableExpressionExecutor:e}=this;return q(e)?!!e.lastEvaluatedValue:null}get evaluatedRequiredExpression(){const{requiredExpressionExecutor:e}=this;return q(e)?!!e.lastEvaluatedValue:null}get evaluatedVisibilityExpression(){const{visibilityExpressionExecutor:e}=this;return q(e)?!!e.lastEvaluatedValue:null}get evaluatedValueExpression(){const{valueExpressionExecutor:e}=this;return q(e)?e.lastEvaluatedValue:null}set initialFeature(e){this._set("initialFeature",e),this.notifyChange("valid")}get description(){var e;return(e=zt(this.fieldElement))==null?void 0:e.description}get domain(){var l;const{layer:e}=this,n="typeIdField"in e?e.typeIdField:null,i=n===this.name,s=(l=this.field)==null?void 0:l.domain;if(i&&!s){const c=e.type==="subtype-group"?e.sublayers.map(({subtypeCode:u,title:d})=>({id:u,name:d})):e.types.map(({id:u,name:d})=>({code:u,name:d}));return new NB({name:"__internal-type-based-coded-value-domain__",codedValues:c})}const{feature:o}=this,r=n&&this.layer.getFieldDomain(this.name,{feature:o})||s,a=Ay(this.fieldElement,"domain");return q(a)&&this._isDomainCompatible(a)?a:r}get editable(){return!!this._layerFieldAllowsEdits&&(this.evaluatedEditableExpression??this._configAllowsEdits)}get inputType(){var e,n;return(n=(e=zt(this.fieldElement))==null?void 0:e.input)==null?void 0:n.type}get errorMessage(){return this._toErrorMessage()}get hint(){var e;return(e=zt(this.fieldElement))==null?void 0:e.hint}get includeTime(){var i;const{fieldElement:e}=this,n=q(e)&&((i=e.input)==null?void 0:i.type)==="datetime-picker"?e.input.includeTime:void 0;return n===void 0||n}get label(){return q(this.fieldElement)&&this.fieldElement.label||this.field.alias||this.field.name}get maxLength(){if(this.type===Oa.Date)return-1;const{field:n,fieldElement:i}=this,s=n==null?void 0:n.length,o=q(i)&&$A(i.input)?i.input.maxLength:NaN;return!isNaN(o)&&o>=-1&&(s===-1||o<=s)?o:s}get minLength(){if(this.type===Oa.Date)return-1;const{field:n,fieldElement:i}=this,s=n==null?void 0:n.length,o=q(i)&&$A(i.input)?i.input.minLength:NaN;return!isNaN(o)&&o>=-1&&(s===-1||o<=s)?o:-1}get name(){var e;return(e=this.field)==null?void 0:e.name}get required(){const{editable:e,evaluatedRequiredExpression:n,field:i,visible:s}=this;return!!e&&((i==null?void 0:i.nullable)===!1||!(!s||!q(n))&&n)}set required(e){this._overrideIfSome("required",e)}get submittable(){const{field:e,required:n,valid:i,value:s}=this;return(!n||!ke(s))&&(!!i||this.initialFeature.getAttribute(e.name)===s)}get type(){const{field:e}=this;return Ev(e)?Oa.Number:uI(e)?Oa.Text:N0(e)?Oa.Date:Oa.Unsupported}get updating(){const{editableExpressionExecutor:e,valueExpressionExecutor:n}=this;return q(n)&&n.updating||q(e)&&e.updating}get valid(){const e=this.editable?this._validate():null;return this._set("error",e),e===null}get value(){if(this._shouldUseValueExpression()){const e=this.evaluatedValueExpression;if(this.type===Oa.Date){if(e instanceof Date)return e.getTime();if(typeof e!="number")return parseInt(e,10)}return q(e)&&typeof e=="object"?e.toString():e}return this.get("_storedValue")}set value(e){this.notifyChange("evaluatedVisibilityExpression"),this.set("_storedValue",e)}get visible(){return!this._isEditorField()&&(q(this.evaluatedVisibilityExpression)?this.evaluatedVisibilityExpression:!!q(this.fieldElement)||this._isVisibleByDefault())}_isDomainCompatible(e){const{field:n}=this;if((e==null?void 0:e.type)==="coded-value"){const i=typeof e.codedValues[0].code;if(i==="string"&&uI(n)||i==="number"&&Ev(n))return!0}return!!((e==null?void 0:e.type)==="range"&&Ev(n)||N0(n))}_validate(){const{domain:e,field:n,initialFeature:i,minLength:s,required:o,type:r,valid:a,value:l}=this,c=o&&l===null,u=a!==void 0;return!c&&i.getAttribute(n.name)===l&&u?null:c?dI.INVALID_TYPE:r==="text"&&s>-1&&typeof l=="string"&&l.length<s?mb.TOO_SHORT:e?l!==null||o?z8(e,l):null:H8(n,l)}_isVisibleByDefault(){var n;const e=(n=this.field)==null?void 0:n.type;return e!=="oid"&&e!=="global-id"&&!this._isGeometryField()}_isEditorField(){return U8(this.layer).includes(this.name)}_isGeometryField(){return W8(this.layer).includes(this.name)}_shouldUseValueExpression(){return this._layerFieldAllowsEdits&&!this._configAllowsEdits&&q(this.valueExpressionExecutor)}_toErrorMessage(){const{domain:e,field:n,messages:i,minLength:s,value:o,required:r,type:a}=this,l=this.error;if(r&&o===null)return i.validationErrors.cannotBeNull;if(l===pI.VALUE_OUT_OF_RANGE||l===G8.OUT_OF_RANGE){const c=sO(e)||oO(n);return Si(i.validationErrors.outsideRange,c,{format:{max:a==="date"?xA:MA(c.max)?IA:TA,min:a==="date"?xA:MA(c.min)?IA:TA}})}return l===pI.INVALID_CODED_VALUE?i.validationErrors.invalidCodedValue:l===dI.INVALID_TYPE?i.validationErrors.invalidType:l===mb.TOO_SHORT?Si(i.validationErrors.tooShort,{min:s}):null}};function $A(t){return!!t&&"maxLength"in t}v([b()],Xt.prototype,"_storedValue",void 0),v([b()],Xt.prototype,"_configAllowsEdits",null),v([b()],Xt.prototype,"_layerFieldAllowsEdits",null),v([b()],Xt.prototype,"editableExpressionExecutor",void 0),v([b()],Xt.prototype,"requiredExpressionExecutor",void 0),v([b()],Xt.prototype,"valueExpressionExecutor",void 0),v([b()],Xt.prototype,"isUsingValueExpression",null),v([b()],Xt.prototype,"visibilityExpressionExecutor",void 0),v([b()],Xt.prototype,"evaluatedEditableExpression",null),v([b()],Xt.prototype,"evaluatedRequiredExpression",null),v([b()],Xt.prototype,"evaluatedVisibilityExpression",null),v([b()],Xt.prototype,"evaluatedValueExpression",null),v([b()],Xt.prototype,"feature",void 0),v([b()],Xt.prototype,"field",void 0),v([b({constructOnly:!0})],Xt.prototype,"fieldElement",void 0),v([b()],Xt.prototype,"initialFeature",null),v([b()],Xt.prototype,"layer",void 0),v([b({readOnly:!0})],Xt.prototype,"description",null),v([b()],Xt.prototype,"domain",null),v([b()],Xt.prototype,"editable",null),v([b({readOnly:!0})],Xt.prototype,"inputType",null),v([b({readOnly:!0})],Xt.prototype,"error",void 0),v([b({dependsOn:["error","messages","value"]})],Xt.prototype,"errorMessage",null),v([b()],Xt.prototype,"group",void 0),v([b({readOnly:!0})],Xt.prototype,"hint",null),v([b()],Xt.prototype,"includeTime",null),v([b()],Xt.prototype,"label",null),v([b()],Xt.prototype,"maxLength",null),v([b()],Xt.prototype,"minLength",null),v([b()],Xt.prototype,"messages",void 0),v([b({readOnly:!0})],Xt.prototype,"name",null),v([b()],Xt.prototype,"required",null),v([b()],Xt.prototype,"submittable",null),v([b()],Xt.prototype,"type",null),v([b()],Xt.prototype,"updating",null),v([b()],Xt.prototype,"valid",null),v([b({value:null})],Xt.prototype,"value",null),v([b()],Xt.prototype,"visible",null),Xt=v([Ae("esri.widgets.FeatureForm.InputField")],Xt);const AA=Xt;let js=class extends Li(dt){constructor(e){super(e),this._expressionTrackingHandles=new Map,this.visibilityExpressionExecutor=null,this.feature=null,this.groupElement=null}initialize(){this.addHandles([ge(()=>[this.visible,this.inputFields],([e])=>{const{inputFields:n}=this,i=!!e&&void 0;for(const s of n)s.required=i},{initial:!0,equals:(e,n)=>n[0]===e[0]&&n[1]===e[1]})])}destroy(){for(const e of this._expressionTrackingHandles.values())e.remove()}get visibilityExpression(){var e;return(e=zt(this.groupElement))==null?void 0:e.visibilityExpression}set visibilityExpression(e){Ha(this.groupElement,n=>{n.visibilityExpression=e})}get evaluatedVisibilityExpression(){const{visibilityExpressionExecutor:e}=this;return q(e)?!!e.lastEvaluatedValue:null}get description(){var e;return(e=zt(this.groupElement))==null?void 0:e.description}set description(e){Ha(this.groupElement,n=>{n.description=e})}get inputFields(){return this._get("inputFields")}set inputFields(e){this.handles.removeAll(),e&&this.handles.add(e.map(n=>ge(()=>n.visible,()=>this._dirtyEvaluatedVisibilityExpression()))),this._set("inputFields",e)}get label(){var e;return(e=zt(this.groupElement))==null?void 0:e.label}set label(e){Ha(this.groupElement,n=>{n.label=e})}get state(){return q(this.groupElement)&&this.groupElement.initialState||"expanded"}set state(e){this._overrideIfSome("state",e)}get visible(){return this.evaluatedVisibilityExpression!==!1&&this.inputFields&&this.inputFields.some(e=>e.visible)}_dirtyEvaluatedVisibilityExpression(){const{groupElement:e}=this;q(e)&&e.visibilityExpression&&this.notifyChange("evaluatedVisibilityExpression")}};v([b()],js.prototype,"visibilityExpression",null),v([b()],js.prototype,"visibilityExpressionExecutor",void 0),v([b()],js.prototype,"evaluatedVisibilityExpression",null),v([b()],js.prototype,"description",null),v([b()],js.prototype,"feature",void 0),v([b()],js.prototype,"groupElement",void 0),v([b()],js.prototype,"initialFeature",void 0),v([b()],js.prototype,"inputFields",null),v([b()],js.prototype,"label",null),v([b()],js.prototype,"state",null),v([b()],js.prototype,"visible",null),js=v([Ae("esri.widgets.FeatureForm.InputFieldGroup")],js);const Mke=js,s0=new Ls({attributes:{}}),$ke=["editableExpression","requiredExpression","valueExpression","visibilityExpression"],Ake=["visibilityExpression"],Lke="#JSAPI_CONTINGENT_VALUE_EMPTY_HASH",md="#JSAPI_CONTINGENT_VALUE_ANY_HASH",Oke="#JSAPI_CONTINGENT_VALUE_NULL_HASH";let jn=class extends Li(KS(Ii.EventedAccessor)){constructor(e){super(e),this._expressionExecutorLookup=new Map,this._expressionLookup=new Map,this._expressionsManager=null,this._contingentValuesCache=null,this._featureClone=s0.clone(),this._initialFeature=s0.clone(),this.arcadeEditType="NA",this.contingencyConstraintViolations=new Map,this.inputFields=[],this.messages=null,this.strict=!1}initialize(){const e=async()=>{const s=await BB("esri/widgets/FeatureForm/t9n/FeatureForm");this.messages=s;for(const o of this.allInputFields)o.messages=s};e();const n=ge(()=>{var s;return[this.layer,(s=this.layer)==null?void 0:s.loaded,this.formTemplate]},()=>{q(this.layer)&&this.layer.loaded&&this._updateInputFields()},{equals:([s,o,r],[a,l,c])=>s===a&&o===l&&r===c,initial:!0}),i=ge(()=>this.layer,s=>{(s==null?void 0:s.type)==="feature"&&this.addResolvingPromise(bke.createLoadedLayerContingentValuesCache(s).then(o=>{this._contingentValuesCache=o,this.notifyChange("fieldsWithContingentValues")}))},{initial:!0});this.handles.add([pO(e),n,i])}destroy(){this.feature=null,this.layer=null,this._contingentValuesCache=sn(this._contingentValuesCache)}get _arcadeContextInfo(){const{_initialFeature:e,arcadeEditType:n,layer:i,spatialReference:s,view:o}=this;return{layer:h3(i)?i:null,originalFeature:e,editType:n,spatialReference:s,map:o==null?void 0:o.map}}get updating(){return this.updatingHandles.updating}get allInputFields(){return LA(this.inputFields)}get _layerFieldsByName(){return new Map(this.layer.fields.map(e=>[e.name,e]))}get feature(){return this._get("feature")}set feature(e){this._featureClone=e?e.clone():s0.clone(),this._initialFeature=this._featureClone.clone(),this._resetInputFieldValues(this._featureClone),this.contingencyConstraintViolations.clear(),q(this._expressionsManager)&&(this._expressionsManager.resetExecutors(),this._expressionsManager.feature=this._featureClone,this.updatingHandles.addPromise(this._expressionsManager.evaluateAll().finally(()=>this._afterExpressionsEvaluated()))),this._set("feature",e)}get fieldsWithContingentValues(){if(ke(this._contingentValuesCache))return new Set;const e=this._contingentValuesCache.fieldGroups.flatMap(n=>n.fields);return new Set(e)}get formTemplate(){return this.layer&&"formTemplate"in this.layer?this.layer.formTemplate:null}set formTemplate(e){this._override("formTemplate",e)}get joinedContingentValues(){return this._joinContingentValues()}get layer(){var e;return(e=this.feature)!=null&&e.sourceLayer&&"applyEdits"in this.feature.sourceLayer?this.feature.sourceLayer:null}set layer(e){this._override("layer",e)}get spatialReference(){var e;return((e=this.layer)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get state(){return this.messages&&this.get("layer.loaded")?"ready":"disabled"}get submittable(){return!!this.valid||this.allInputFields.filter(e=>!e.valid).every(({submittable:e})=>e)}get valid(){const e=this.allInputFields;return e.length>0&&e.every(({valid:n})=>n)}findField(e){return this.allInputFields.find(n=>n.name===e)}getValue(e){const{_featureClone:n,layer:i}=this,s=!!(i!=null&&i.getField(e));return n.getAttribute(e)??(s?null:void 0)}setValue(e,n){const{_featureClone:i,strict:s}=this,o=this.findField(e);n=n===""?null:n,o&&i.getAttribute(e)!==n&&(o.value=n,s&&!o.valid||(this._afterValueChange(o),q(this._expressionsManager)&&this.updatingHandles.addPromise(this._expressionsManager.evaluateInvalidated([o.name]).finally(()=>this._afterExpressionsEvaluated()))))}getValues(){return{...this._featureClone.attributes}}submit(){const e=this.allInputFields,n=new Set(e.filter(o=>o.valid).map(({name:o})=>o)),i=e.filter(o=>!o.valid).map(({name:o})=>o),s=this.getValues();if(this.validateContingencyConstraints(s,{includeIncompleteViolations:!0}).length>0)for(const[o,r]of this.contingencyConstraintViolations.entries())r.type==="error"&&(n.delete(o),i.push(o));this.emit("submit",{valid:[...n],invalid:i,values:s})}validateContingencyConstraints(e,n){const{_contingentValuesCache:i}=this,s=new Map;if(this.contingencyConstraintViolations=s,ke(i))return[];const{invalid:o,incomplete:r}=i.validateContingencyConstraints(e),a=[...o,...n!=null&&n.includeIncompleteViolations?r:[]];for(const l of a)for(const c of l.fieldGroup.fields)s.set(c,l);return a}notifyFeatureGeometryChanged(){const{_expressionsManager:e,feature:n,_featureClone:i}=this;i.geometry=n.geometry,q(e)&&this.updatingHandles.addPromise(e.evaluateInvalidatedByGeometry().finally(()=>this._afterExpressionsEvaluated()))}_emitChangeEvent({name:e,valid:n,value:i}){this.emit("value-change",{layer:this.layer,feature:this.feature,fieldName:e,value:i,valid:n})}_updateInputFields(){const{_featureClone:e,_initialFeature:n,formTemplate:i,inputFields:s,messages:o,layer:r}=this,a={feature:e,initialFeature:n,layer:r,messages:o},l=s.slice(),c=q(i)&&i.elements.length>0?this._updateInputFieldsFromElements(l,i.elements,a):this._updateInputFieldsFromLayerFields(l,r==null?void 0:r.fields,a);this.inputFields=c}_updateInputFieldsFromElements(e,n,i){const s=new Map;for(const a of e)if(gy(a)){r0(s,a.groupElement,a);for(const l of a.inputFields)r0(s,l.fieldElement,l)}else r0(s,a.fieldElement,a);const o=new Map,r=this._updateInputFieldsRecursive({existingInputFieldsByElement:s,updatedElements:n.filter(this._isSupportedElement),sharedInitializationProperties:i,group:null,newExpressionExecutorPromises:o});this.updatingHandles.addPromise(Promise.all(Array.from(o.values())).then(()=>{const a=Array.from(this._expressionExecutorLookup.values()),l=LA(r);return this._createExpressionsManager(a,l),zt(this._expressionsManager).evaluateAll().finally(()=>this._afterExpressionsEvaluated())}));for(const[a,l]of s.entries())s.delete(a),l.destroy();return r}_updateInputFieldsRecursive(e){const{existingInputFieldsByElement:n,updatedElements:i,sharedInitializationProperties:s,group:o,newExpressionExecutorPromises:r}=e,a=[];for(const l of i){const c=n.has(l),u=c?n.get(l):o0(l)?this._makeInputFieldGroupFromGroupElement(l,s):this._makeInputFieldFromFieldElement(l,s,o);if(a.push(u),c)if(n.delete(l),gy(u)){const{feature:d}=s;u.set({feature:d})}else u.set(s);else this._assignExpressionExecutors(u,l,r);if(o0(l)){const d=l.elements.filter(h=>this._isSupportedElement(h));u.inputFields=this._updateInputFieldsRecursive({existingInputFieldsByElement:n,updatedElements:d,sharedInitializationProperties:s,group:u,newExpressionExecutorPromises:r})}}return a}_updateInputFieldsFromLayerFields(e,n,i){if(!Array.isArray(n))return Tt.getLogger(this.declaredClass).warn(this.declaredClass,"No attribute fields found."),[];const s=new Map;for(const u of e)if(gy(u)){for(const d of u.inputFields)d.destroy();u.inputFields.length=0,u.destroy()}else q(u.fieldElement)?u.destroy():s.set(u.field,u);const o=[],{feature:r,initialFeature:a,layer:l,messages:c}=i;for(const u of n){const d=s.get(u)??new AA({field:u,feature:r,initialFeature:a,layer:l,messages:c,value:r.getAttribute(u.name)??null});o.push(d),s.delete(u)}for(const[u,d]of s.entries())s.delete(u),d.destroy();return o}_resetInputFieldValues(e){for(const n of this.allInputFields)n.value=e.getAttribute(n.name)}_makeInputFieldFromFieldElement(e,n,i=null){const{feature:s,initialFeature:o,layer:r,messages:a}=n;return new AA({fieldElement:e,field:this._layerFieldsByName.get(e.fieldName),value:s.getAttribute(e.fieldName)??null,feature:s,initialFeature:o,layer:r,group:i,messages:a})}_makeInputFieldGroupFromGroupElement(e,n){const{feature:i,initialFeature:s}=n;return new Mke({groupElement:e,inputFields:[],feature:i,initialFeature:s})}_assignExpressionExecutors(e,n,i){const s=o0(n)?Ake:$ke,o=[];for(const r of s){const a=n[r],{_expressionExecutorLookup:l}=this;if(q(a)&&a!==""){const c=`${r}Executor`,u=this._expressionLookup.get(a)??this._addToExpressionLookup(a);if(l.has(u))e[c]=l.get(u);else if(i.has(u)){const d=i.get(u).then(h=>(e[c]=h,h));i.set(u,d)}else{const d=Ike(u,this.layer).then(h=>(e[c]=h,l.set(u,h),h));i.set(u,d)}}}return o}_createExpressionsManager(e,n){const{_arcadeContextInfo:i,_featureClone:s}=this;this._expressionsManager=new Bl({executors:e,feature:s,arcadeContextInfo:i,inputFields:n})}_afterValueChange(e){const{name:n,value:i}=e;if(this.get("layer.typeIdField")===n&&"types"in this.layer){const s=new Set;this.layer.types.forEach(o=>Object.keys(o.domains).forEach(r=>s.add(r))),s.forEach(o=>{const r=this.findField(o);r&&r.notifyChange("domain")})}this._featureClone.setAttribute(n,i),this._emitChangeEvent(e)}_afterExpressionsEvaluated(){const{_featureClone:e}=this;for(const n of this.allInputFields)n.value!==e.getAttribute(n.name)&&this._afterValueChange(n)}_addToExpressionLookup(e){var o;const{_expressionLookup:n,formTemplate:i}=this,s=((o=q(i)&&q(i.expressionInfos)?Object.values(i.expressionInfos).find(r=>r.name===e):null)==null?void 0:o.expression)??e;return n.set(e,s),e!==s&&n.set(s,s),s}_isSupportedElement(e){return e.type==="field"||e.type==="group"||(Tt.getLogger(this.declaredClass).warn("form-info::unsupported-element-type","Only element types 'field' and 'group' are supported",`Element ${e.label} has unsupported type '${e.type}'`),!1)}_joinContingentValues(){const e=this._contingentValuesCache;if(ke(e))return[];const n="typeIdField"in this.layer?this.layer.typeIdField:null,i=n?this.getValue(n):null,s=[];for(const a of e.fieldGroups){const{contingencies:l,fields:c,name:u}=a,d=[];for(const h of l)h.isRetired||q(h.subtype)&&h.subtype.code!==i||d.push({values:h.values});d.length>0&&s.push({name:u,fields:c,contingencies:d})}const[o,r]=this._generateJoinPlan(s);return[...o.flatMap(a=>this._joinFieldGroupContingencies(a)),...r.flatMap(a=>a.contingencies)]}_generateJoinPlan(e){const n=new Map,i=[],s=new Set;for(const c of e)for(const u of c.fields)if(n.has(u)){const d=n.get(u),h=c,f=[d.name,h.name].sort().join("|");if(s.has(f))continue;i.push([d,h]),s.add(f),n.set(u,h)}else n.set(u,c);const o=new Set(i.flat()),r=new Set(e);for(const c of o)r.delete(c);const a=new Map,l=new Map;for(const c of new Set(i.flat())){const u=Symbol(c.name);a.set(u,new Set([c])),l.set(c,u)}for(const[c,u]of i){const d=l.get(c),h=l.get(u);if(d===h)continue;const f=a.get(d),m=a.get(h);for(const g of m)f.add(g),l.set(g,d);a.delete(h)}return[[...a.values()].map(c=>[...c]),[...r]]}_joinFieldGroupContingencies(e){const n=e.slice(),i=n.shift();let s=n.shift(),o=this._generateJoinKey(i.fields,s.fields),r=new Set([...i.fields,...s.fields]),a=new Map;for(const c of i.contingencies){const[u]=this._hashContingency(c,o.codedValueFields,!0);a.has(u)?a.get(u).push(c):a.set(u,[c])}for(;n.length>0;){const c=new Map,u=n.shift(),d=this._generateJoinKey(r,u.fields);for(const h of s.contingencies){const[f,m]=this._hashContingency(h,o.codedValueFields),g=m?this._findMatchingContingenciesWithAnyHashMask(a,f):a.get(f);if(a.has(md)&&g.push(...this._findMatchingContingenciesContainingAny(h,a.get(md),o.codedValueFields)),!ke(g))for(const y of g){const _=o.rangeFields.length>0?this._joinContingenciesWithRangeDomains(y,h,o.rangeFields):this._joinContingencies(y,h);if(ke(_))break;const[C]=this._hashContingency(_,d.codedValueFields,!0);c.has(C)?c.get(C).push(_):c.set(C,[_])}}a=c,s=u,o=d,r=new Set([...r,...s.fields])}const l=[];for(const c of s.contingencies){const[u,d]=this._hashContingency(c,o.codedValueFields),h=d?this._findMatchingContingenciesWithAnyHashMask(a,u):a.get(u);if(a.has(md)&&h.push(...this._findMatchingContingenciesContainingAny(c,a.get(md),o.codedValueFields)),!ke(h))for(const f of h){const m=o.rangeFields.length>0?this._joinContingenciesWithRangeDomains(f,c,o.rangeFields):this._joinContingencies(f,c);q(m)&&l.push(m)}}return l}_joinContingencies(e,n){const i={values:{...e.values,...n.values}};for(const[s,o]of Object.entries(i.values))o.objectType==="any"&&q(e.values[s])&&(i.values[s]=e.values[s]);return i}_joinContingenciesWithRangeDomains(e,n,i){const s=this._joinContingencies(e,n);for(const o of i){const r=e.values[o],a=n.values[o],{leftIsNull:l,rightIsNull:c,bothAreNull:u,leftIsAny:d,rightIsAny:h,bothAreAny:f,leftIsRange:m,rightIsRange:g}=this._compareObjectTypes(r.objectType,a.objectType);if(u||f)continue;if(l&&h||c&&d){s.values[o]=new Fi({objectType:"null"});continue}if(l&&g||c&&m)return null;d?(r.minValue=-1/0,r.maxValue=1/0):h&&(a.minValue=-1/0,a.maxValue=1/0);const y=Math.max(r.minValue,a.minValue),_=Math.min(r.maxValue,a.maxValue);if(y>_)return null;s.values[o]=new Fi({objectType:"range",minValue:y,maxValue:_})}return s}_findMatchingContingenciesContainingAny(e,n,i){return n.filter(s=>i.every(o=>{var l,c;const r=s.values[o],a=e.values[o];return r.objectType==="any"||a.objectType==="any"||((l=r.codedValue)==null?void 0:l.code)===((c=a.codedValue)==null?void 0:c.code)}))}_findMatchingContingenciesWithAnyHashMask(e,n){const i=RegExp(`${n}$`),s=[];for(const[o,r]of e){if(o===md)break;i.test(o)&&s.push(...r)}return s}_generateJoinKey(e,n){const i=Array.isArray(e)?new Set(e):e,s=Array.isArray(n)?new Set(n):n,o=i.size<s.size?i:s,r=o===i?s:i,a=new Set,l=new Set;for(const c of o)if(r.has(c)){const u=this.layer.getFieldDomain(c,{feature:this.feature});if(ke(u))continue;switch(u.type){case"coded-value":a.add(c);break;case"range":l.add(c)}}return{codedValueFields:[...a],rangeFields:[...l]}}_hashContingency(e,n,i=!1){var r;if(n.length<1)return[Lke,!1];const s=[];let o=!1;for(const a of n){const l=e.values[a];if(l.objectType==="any"){if(i)return[md,!0];o=!0,s.push(`${a}:.*`)}else l.objectType==="null"?s.push(`${a}:${Oke}`):s.push(`${a}:${(r=l.codedValue)==null?void 0:r.code}`)}return[s.sort().join("&"),o]}_compareObjectTypes(e,n){return{leftIsNull:e==="null",rightIsNull:n==="null",bothAreNull:e==="null"&&n==="null",leftIsAny:e==="any",rightIsAny:n==="any",bothAreAny:e==="any"&&n==="any",leftIsRange:e==="range",rightIsRange:n==="range"}}};v([b()],jn.prototype,"_arcadeContextInfo",null),v([b()],jn.prototype,"updating",null),v([b({readOnly:!0})],jn.prototype,"allInputFields",null),v([b()],jn.prototype,"_layerFieldsByName",null),v([b()],jn.prototype,"arcadeEditType",void 0),v([b()],jn.prototype,"contingencyConstraintViolations",void 0),v([b()],jn.prototype,"feature",null),v([b()],jn.prototype,"fieldsWithContingentValues",null),v([b({type:FB})],jn.prototype,"formTemplate",null),v([b()],jn.prototype,"inputFields",void 0),v([b()],jn.prototype,"joinedContingentValues",null),v([b()],jn.prototype,"layer",null),v([b()],jn.prototype,"messages",void 0),v([b()],jn.prototype,"spatialReference",null),v([b()],jn.prototype,"state",null),v([b()],jn.prototype,"strict",void 0),v([b()],jn.prototype,"submittable",null),v([b()],jn.prototype,"valid",null),v([b()],jn.prototype,"view",void 0),v([b()],jn.prototype,"getValues",null),v([b()],jn.prototype,"submit",null),jn=v([Ae("esri.widgets.FeatureForm.FeatureFormViewModel")],jn);const gy=t=>!!t.inputFields,o0=t=>t.type==="group",LA=t=>t.reduce((e,n)=>gy(n)?[...e,...n.inputFields]:[...e,n],[]),r0=(t,e,n)=>{q(e)&&t.set(e,n)},KN=jn,Wt={base:"esri-feature-form",form:"esri-feature-form__form",formHeader:"esri-feature-form__form-header",label:"esri-feature-form__label",inputFieldWrapper:"esri-feature-form__input-wrapper",inputFieldLoader:"esri-feature-form__input-loader",inputField:"esri-feature-form__input",inputDate:"esri-feature-form__input--date",inputTime:"esri-feature-form__input--time",inputRadioGroup:"esri-feature-form__input--radio-group",inputRadio:"esri-feature-form__input--radio",inputRadioLabel:"esri-feature-form__input--radio-label",inputDisabled:"esri-feature-form__input--disabled",inputSwitch:"esri-feature-form__input--switch",inputInvalid:"esri-feature-form__input--invalid",inputIconInvalid:"esri-feature-form__input-icon--invalid",errorMessage:"esri-feature-form__field-error-message",description:"esri-feature-form__description-text",dateInputPart:"esri-feature-form__date-input-part",loneDateInputPart:"esri-feature-form__date-input-part--lone",dateInputContainer:"esri-feature-form__date-input-container",dateFormatHint:"esri-feature-form__date-format-hint",group:"esri-feature-form__group",groupLabel:"esri-feature-form__group-label",groupHeader:"esri-feature-form__group-header",groupHeading:"esri-feature-form__group-header",groupTitle:"esri-feature-form__group-title",groupDescription:"esri-feature-form__group-description",groupToggleIcon:"esri-feature-form__group-toggle-icon",groupCollapsed:"esri-feature-form__group--collapsed",groupSequential:"esri-feature-form__group--sequential",groupActive:"esri-feature-form__group--active",collapseIcon:"esri-icon-up",errorIcon:"esri-icon-notice-triangle",expandIcon:"esri-icon-down",widget:"esri-widget",panel:"esri-widget--panel",input:"esri-input",select:"esri-select"},OA={datePattern:"D",timePattern:"tt"};function nv(t){return t&&t.inputFields}const qh="data-field-name";let ls=class extends kn{constructor(e,n){super(e,n),this._activeDateFieldEdit=null,this._activeInputName=null,this._activeNumberFieldEdit=null,this._fieldFocusNeeded=!1,this._fieldToInitialIncompatibleDomainValue=new Map,this._switchFieldsWithInitialIncompatibleValue=new Set,this._userUpdatedInputFieldNames=new Set,this.disabled=!1,this.groupDisplay="all",this.headingLevel=2,this.messages=null,this.messagesTemplates=null,this.viewModel=new KN,this._handleRadioInputChange=i=>{this._commitInputValue(i.target)},this._handleInputInput=i=>{this._commitInputValue(i.currentTarget,!0)},this._handleFormKeyDown=this._handleFormKeyDown.bind(this),this._handleInputBlur=this._handleInputBlur.bind(this),this._handleInputFocus=this._handleInputFocus.bind(this),this._handleNumberInputMouseDown=this._handleNumberInputMouseDown.bind(this),this._handleInputKeyDown=this._handleInputKeyDown.bind(this),this._handleOptionChange=this._handleOptionChange.bind(this),this._handleGroupClick=this._handleGroupClick.bind(this),this._handleSubmit=this._handleSubmit.bind(this),this._afterInputCreateOrUpdate=this._afterInputCreateOrUpdate.bind(this)}initialize(){this.addHandles([ge(()=>this.feature,()=>{const e=this._getFocusableInput("forward");this._activeInputName=e&&e.name,this._userUpdatedInputFieldNames.clear(),this._fieldToInitialIncompatibleDomainValue.clear(),this._switchFieldsWithInitialIncompatibleValue.clear(),this._fieldFocusNeeded=!0}),this.on("submit",e=>{if(e.invalid.length>0){const[n]=e.invalid;e.invalid.forEach(i=>this._userUpdatedInputFieldNames.add(i)),this._activeInputName=n,this._fieldFocusNeeded=!0,this.scheduleRender()}})])}loadDependencies(){return Promise.all([Fe(()=>import("./calcite-combobox-40cafeed.js"),["./calcite-combobox-40cafeed.js","./dom-5b7af1bf.js","./floating-ui-bda1a599.js","./preload-helper-41c905a7.js","./guid-e49c4e43.js","./utils2-202b6d37.js","./label2-0103af15.js","./form-9bc9e261.js","./observers-c77bfda3.js","./interactive-52dcf836.js","./openCloseComponent-587e936b.js","./conditionalSlot-e2a39862.js","./icon-1a289254.js"],import.meta.url),Fe(()=>import("./calcite-combobox-item-558b8e1f.js"),["./calcite-combobox-item-558b8e1f.js","./dom-5b7af1bf.js","./guid-e49c4e43.js","./utils2-202b6d37.js","./conditionalSlot-e2a39862.js","./observers-c77bfda3.js","./interactive-52dcf836.js","./icon-1a289254.js"],import.meta.url),Fe(()=>import("./calcite-combobox-item-group-6fcfa576.js"),["./calcite-combobox-item-group-6fcfa576.js","./dom-5b7af1bf.js","./utils2-202b6d37.js","./guid-e49c4e43.js"],import.meta.url),Fe(()=>import("./calcite-input-message-8a4f3713.js"),["./calcite-input-message-8a4f3713.js","./dom-5b7af1bf.js","./icon-1a289254.js","./observers-c77bfda3.js"],import.meta.url),Fe(()=>import("./calcite-progress-061376c7.js"),["./calcite-progress-061376c7.js","./progress-ae83f8fa.js","./dom-5b7af1bf.js"],import.meta.url),Fe(()=>import("./calcite-switch-7a55799a.js"),["./calcite-switch-7a55799a.js","./dom-5b7af1bf.js","./label2-0103af15.js","./form-9bc9e261.js","./interactive-52dcf836.js","./key-1fec8108.js"],import.meta.url)])}destroy(){this._userUpdatedInputFieldNames.clear(),this._userUpdatedInputFieldNames=null}get feature(){return this.viewModel.feature}set feature(e){this.viewModel.feature=e}get formTemplate(){return this.viewModel.formTemplate}set formTemplate(e){this.viewModel.formTemplate=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(e){this.viewModel.spatialReference=e}get strict(){return this.viewModel.strict}set strict(e){this.viewModel.strict=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}getValues(){return this.viewModel.getValues()}submit(){return this.viewModel.submit()}render(){const{state:e}=this.viewModel;return M("div",{class:this.classes(Wt.base,Wt.widget,Wt.panel)},e==="ready"?this.renderForm():null)}renderForm(){const{formTemplate:e}=this,n=q(e)&&e.title&&M(Is,{key:"title",level:this.headingLevel},e.title),i=q(e)&&e.description&&M("p",{class:Wt.description,key:"description"},e.description),s=n||i?M("div",{class:Wt.formHeader},n,i):null;return M("form",{class:Wt.form,novalidate:!0,onsubmit:this._handleSubmit,onkeydown:this._handleFormKeyDown},s,this.renderFields())}renderFields(){const{viewModel:{inputFields:e}}=this;return e.filter(n=>n.visible).map((n,i)=>nv(n)?this.renderGroup(n,i):this.renderLabeledField(n))}renderGroup(e,n){const{formTemplate:i,disabled:s}=this,{description:o,inputFields:r,label:a,state:l}=e,c=r.filter(w=>w.visible),u=this.viewModel.findField(this._activeInputName),d=!(!u||u.group!==e),h=`${this.id}_group_${n}`,f=`${this.id}_group-label_${n}`,m=`${this.id}_group-description_${n}`,g=o?M("p",{class:this.classes(Wt.groupDescription,Wt.description),id:m},o):null,y=this.groupDisplay==="sequential",_=y?d:l==="expanded",C=_?Wt.collapseIcon:Wt.expandIcon;return M("fieldset",{"aria-expanded":_.toString(),"aria-labelledby":f,"aria-describedby":o?m:"",class:this.classes(Wt.group,y?Wt.groupSequential:null,_?null:Wt.groupCollapsed,d?Wt.groupActive:null,s?Wt.inputDisabled:null),disabled:s,"data-group":e,id:h,key:n,onclick:this._handleGroupClick},M("button",{role:y?"presentation":void 0,class:Wt.groupHeader,type:"button",tabIndex:y?-1:0},M("div",{class:Wt.groupTitle},M(Is,{class:Wt.groupLabel,id:f,level:q(i)&&i.title?vu(this.headingLevel):this.headingLevel},a),g),y?null:M("span",{class:this.classes(C,Wt.groupToggleIcon)})),c.map(w=>this.renderLabeledField(w)))}_getFocusableInput(e,n){const i=this.viewModel.allInputFields,s=e==="forward"?i:i.slice().reverse();let o;if(n)if(nv(n))o=s.indexOf(n.inputFields[0]);else{let r;if(this._isInputFieldInGroup(n)&&n.group.state==="collapsed"){const{inputFields:a}=n.group;r=e==="forward"?a[a.length-1]:a[0]}else r=n;o=s.indexOf(r)+1}else o=0;for(let r=o;r<s.length;r++){const a=s[r];if(a.visible)return a}return null}renderLabeledField(e){const{feature:n,label:i,layer:s,type:o}=e;return M("label",{key:`${s.id}-${n.uid}-${e.name}`,class:Wt.label},[i,o!=="unsupported"?this.renderInputField(e):this.renderUnsupportedField(e),this.renderAuxiliaryText(e)])}renderInputField(e){const{domain:n,name:i,type:s,updating:o,value:r}=e,a=this.getCommonInputProps(e);if((n==null?void 0:n.type)==="coded-value"){if(this._inputFieldHasInputType(e,"switch")){const{fieldElement:c}=e;if(!(this._switchFieldsWithInitialIncompatibleValue.has(i)||r==null||c.input.onValue!==r&&c.input.offValue!==r))return this.renderSwitchInputField(e,a);this._switchFieldsWithInitialIncompatibleValue.add(i)}return e.inputType==="radio-buttons"?this.renderRadioButtonsInputField(e,n.codedValues.map(({code:c,name:u})=>({value:c,name:u})),a):this.renderSelectInputField(e,this._getFieldValueOptions(i,n),a)}if(e.inputType==="datetime-picker"||s==="date")return this.renderDateInputField(e,a);const l=s==="number"?M("input",{type:"number",...a,value:q(this._activeNumberFieldEdit)&&this._activeNumberFieldEdit.fieldName===e.name?this._activeNumberFieldEdit.value:`${a.value}`}):e.inputType==="text-area"?M("textarea",{...a}):M("input",{type:"text",...a});return o?M("div",{class:Wt.inputFieldWrapper},l,M("div",{class:Wt.inputFieldLoader},M("calcite-progress",{type:"indeterminate"}))):l}_parseDateTime(e,n,i){if(i){let o=da.fromJSDate(this._parseDate(e,i));const r=da.fromMillis(n.value??Date.now());return o=i==="date"?o.set({hour:r.hour,minute:r.minute,second:r.second}):o.set({day:r.day,month:r.month,year:r.year}),o.isValid?o.toMillis():null}const s=da.fromJSDate(this._parseDate(e));return s.isValid?s.toMillis():null}renderDateInputField(e,n){var f,m;const{value:i,includeTime:s}=e,{date:o,time:r}=this._formatDate(0),a=`${this.id}-${n.key}`,l=`${a}-date`,c=`${a}-time`,{_activeDateFieldEdit:u}=this;let{date:d,time:h}=this._formatDate(i);return(u==null?void 0:u.fieldName)===e.name&&(d=((f=u.date.input)==null?void 0:f.value)??d,h=((m=u.time.input)==null?void 0:m.value)??h),M("div",{key:`${n.key}-date`,class:Wt.dateInputContainer},M("div",{class:this.classes(Wt.dateInputPart,s?null:Wt.loneDateInputPart)},M("input",{"aria-label":e.label,"aria-describedby":l,type:"text",...n,"data-date-part":"date",class:this.classes(n.class,Wt.inputDate),value:d}),M("div",{class:Wt.dateFormatHint,id:l},o)),s?M("div",{class:Wt.dateInputPart,key:"time-input"},M("input",{"aria-describedby":c,"aria-label":e.label,type:"text",...n,"data-date-part":"time",class:this.classes(n.class,Wt.inputTime),value:h}),M("div",{class:Wt.dateFormatHint,id:c},r)):null)}renderUnsupportedField(e){const n=this.getCommonInputProps(e);return M("input",{afterCreate:n.afterCreate,afterUpdate:n.afterUpdate,disabled:n.disabled,class:this.classes(Wt.input,Wt.inputField,Wt.inputDisabled),onfocus:n.onfocus,readOnly:!0,tabIndex:n.tabIndex,type:"text",value:n.value,[qh]:n[qh]})}renderSelectInputField(e,n,i){const{value:s}=e,{messages:o,messagesTemplates:r}=this,a=n.map(h=>h.map(f=>M("calcite-combobox-item",{value:`${f.value}`,"text-label":f.name,key:`#${f.value}`,selected:s===f.value}))),[l,c]=a;this._registerIncompatibleValue(s,n.flat(),e,h=>{c.unshift(M("calcite-combobox-item",{value:`${h}`,"text-label":`${h}`,key:"incompatible-option",readOnly:!0}))});const u=c.length>0?[M("calcite-combobox-item-group",{key:"recommended",label:o.recommended},l),M("calcite-combobox-item-group",{key:"other",label:r.other},c)]:l,d=ke(e.fieldElement)||this._inputFieldHasInputType(e,"combo-box")&&e.fieldElement.input.showNoValueOption;if(!e.required&&d){const h="",f=this._inputFieldHasInputType(e,"combo-box")&&e.fieldElement.input.noValueOptionLabel||this.messages.empty;u.unshift(M("calcite-combobox-item",{value:h,"text-label":this.messages.empty,key:"empty-option"},f))}return M("calcite-combobox",{...i,"selection-mode":"single","overlay-positioning":"fixed",disabled:i.disabled||i.readOnly,allowCustomValues:!1,onCalciteComboboxChange:h=>this._handleOptionChange(h.target)},u)}_registerIncompatibleValue(e,n,i,s){const o=this._fieldToInitialIncompatibleDomainValue,r=o.has(i.name);(r||e!=null&&e!==""&&!n.some(a=>a.value===e)||r)&&(r||o.set(i.name,e),s==null||s(o.get(i.name)))}renderRadioButtonsInputField(e,n,i){const{value:s}=e,o=n.map(a=>this.renderRadioButton({key:a.name,label:a.name,name:e.name,value:a.value,selected:a.value===s,props:i}));this._registerIncompatibleValue(s,n,e);const r=ke(e.fieldElement)||this._inputFieldHasInputType(e,"radio-buttons")&&e.fieldElement.input.showNoValueOption;if(!e.required&&r){const a="",l=this._inputFieldHasInputType(e,"radio-buttons")&&e.fieldElement.input.noValueOptionLabel||this.messages.empty,c=s===a||s===null;o.unshift(this.renderRadioButton({key:"empty-option",label:l,name:e.name,value:a,selected:c,props:i}))}return M("div",{key:`${i.key}-radio`,class:Wt.inputRadioGroup},o)}renderSwitchInputField(e,n){const{value:i}=e,s=!!this._inputFieldHasInputType(e,"switch")&&i===e.fieldElement.input.onValue;return M("calcite-switch",{...n,class:Wt.inputSwitch,onCalciteSwitchChange:o=>{this._parseValue(o.currentTarget)},checked:s,disabled:n.disabled||n.readOnly})}renderRadioButton({key:e,name:n,value:i,selected:s,label:o,props:r}){return M("label",{key:e,class:Wt.inputRadioLabel},M("input",{...r,class:Wt.inputRadio,name:n,type:"radio",value:i,checked:s,onchange:this._handleRadioInputChange}),o)}renderAuxiliaryText(e){const n=this._userUpdatedInputFieldNames.has(e.name)&&!e.valid?e.errorMessage:q(this.viewModel.contingencyConstraintViolations.get(e.name))?this.messages.validationErrors.valuesIncompatible:q(e.valueExpressionExecutor)&&e.valueExpressionExecutor.stale?this.messages.valueExpressionError:null;return q(n)?M("calcite-input-message",{status:"invalid",icon:!0,active:!0},n):e.description?M("div",{key:"description",class:Wt.description},e.description):void 0}getCommonInputProps(e){const{disabled:n,groupDisplay:i}=this,{editable:s,group:o,hint:r,maxLength:a,minLength:l,name:c,required:u,type:d,valid:h,value:f}=e,m=this._userUpdatedInputFieldNames.has(c),g=!s,y=i==="all"&&q(o)&&o.state==="collapsed";return{afterCreate:this._afterInputCreateOrUpdate,afterUpdate:this._afterInputCreateOrUpdate,"aria-invalid":h?"false":"true",class:this.classes(Wt.input,Wt.inputField,n||g?Wt.inputDisabled:null,m&&!h?Wt.inputInvalid:null),key:c,label:c,minlength:l>-1?`${l}`:"",maxlength:a>-1?`${a}`:"",...this._getNumberFieldConstraints(e),disabled:n,readOnly:g,value:f==null?"":`${f}`,[qh]:c,onfocus:this._handleInputFocus,oninput:this._handleInputInput,onblur:this._handleInputBlur,onkeydown:this._handleInputKeyDown,onmousedown:d==="number"?this._handleNumberInputMouseDown:null,placeholder:d==="number"||d==="text"?r:"",required:u,tabIndex:y?-1:0}}_isInputFieldInGroup(e){return!nv(e)&&q(e.group)}_handleNumberInputMouseDown({target:e}){e.focus(),this.scheduleRender()}_getFieldValueOptions(e,n){const i=n.codedValues.map(({code:o,name:r})=>({value:o,name:r})),s=this.viewModel.fieldsWithContingentValues.has(e)?this._getContingentValueOptions(e):[];if(s.length>0){const o=new Set(s.map(r=>r.value));return[s,i.filter(r=>!o.has(r.value))]}return[i,[]]}_getContingentValueOptions(e){const n={};for(const o of this.viewModel.allInputFields){const{name:r,value:a}=o;!ke(a)&&r!==e&&this.viewModel.fieldsWithContingentValues.has(r)&&(n[r]=a)}const i=this.viewModel.joinedContingentValues.slice(),s=new Map;for(const o of i){const r=o.values[e];if(ke(r)||r.objectType!=="code"&&r.objectType!=="null")continue;const{code:a,name:l}=r.objectType==="null"?{code:"",name:this.messages.empty}:r.codedValue;s.has(a)||Object.entries(n).every(([c,u])=>!o.values.hasOwnProperty(c)||this._valueIsValidContingentValue(u,o.values[c]))&&s.set(a,{name:l,value:a})}return[...s.values()]}_getInputFieldFromInput(e){return this.viewModel.findField(e.getAttribute(qh))}_getNumberFieldConstraints(e){const n=sO(e.domain)||oO(e.field);return n&&n.max!==Number.MAX_VALUE&&n.min!==Number.MIN_VALUE?n:{min:null,max:null}}_afterInputCreateOrUpdate(e){const{viewModel:n}=this,i=this._getInputFieldFromInput(e),s=n.findField(this._activeInputName),o=this._fieldToInitialIncompatibleDomainValue.get(i.name)===i.value;this._fieldFocusNeeded&&s===i&&(i.inputType!=="radio-buttons"||o||e.checked)&&(this._fieldFocusNeeded=!1,this._isInputFieldInGroup(i)&&(i.group.state="expanded"),e.focus())}_handleInputFocus(e){const n=e.target,i=this._getInputFieldFromInput(n);this._activeInputName=i.name,i.type==="date"?this._syncDateFieldEdits(n):this._isNumberInputField(i)&&this._setUpNumberFieldEdit(n)}_isNumberInputField({domain:e,inputType:n="text-box",type:i}){return i==="number"&&n==="text-box"&&(!e||e.type!=="coded-value")}_handleInputBlur(e){const n=e.target,i=this._getInputFieldFromInput(n);if(i.type==="date"){const s=e.relatedTarget,o=s&&this._getInputFieldFromInput(s);if(o&&i.type==="date"&&o.type==="date"&&i.field===o.field){if(n.value!==""&&s.value===""){const r=s.getAttribute("data-date-part");s.value=this._formatDate(i.value??Date.now())[r],this._parseDate(n.value,n.getAttribute("data-date-part"))&&this._commitInputValue(e.target,!0,!1)}return}}i.type==="number"&&q(this._activeNumberFieldEdit)&&(this._activeNumberFieldEdit.input.value=`${i.value}`,this._activeNumberFieldEdit=null),this._commitInputValue(n),this.scheduleRender()}_commitInputValue(e,n=!1,i=!0){var o,r,a;const s=this._getInputFieldFromInput(e);if(this._activeDateFieldEdit){const{date:l,time:c}=this._activeDateFieldEdit,u=this._parseDateTime(e.value,s,l.active?"date":"time"),d=this.viewModel.getValue(s.name)!==null,h=l.input&&(c.input||!s.includeTime),f=u===null;if(n){if(f)return;(h||!i||d)&&this._updateDateFieldValue(s,u)}else{if(((o=l.input)==null?void 0:o.value)===""||((r=c.input)==null?void 0:r.value)==="")this._updateDateFieldValue(s,null);else if(h){const m=`${l.input.value} ${((a=c.input)==null?void 0:a.value)??""}`,g=this._parseDateTime(m,s);g===null&&d||this._updateDateFieldValue(s,g)}this._activeDateFieldEdit=null}}else q(this._activeNumberFieldEdit)&&this._isNumberInputField(s)&&(this._activeNumberFieldEdit.value=e.value),this._updateFieldValue(e)}_handleInputKeyDown(e){const{key:n,altKey:i,ctrlKey:s,metaKey:o}=e,r=this._getInputFieldFromInput(e.target);if(n==="Enter")this._isInputFieldInGroup(r)&&r.group.state==="collapsed"&&(r.group.state="expanded");else{const{type:a}=r.field,l=a==="single"||a==="double";if((a==="integer"||a==="small-integer"||l)&&(!i&&!s&&!o)&&n.length===1){const u=Number(n),d=["-","+"],h=["e","."],f=l?[...d,...h]:d;isNaN(u)&&!f.includes(n)&&e.preventDefault()}}}_setUpNumberFieldEdit(e){const n=this._getInputFieldFromInput(e);this._activeNumberFieldEdit={fieldName:n.name,input:e,value:e.value}}_syncDateFieldEdits(e){var r,a;const n=this._getInputFieldFromInput(e);if(n.type!=="date")return;const i=e.getAttribute("data-date-part"),s=i==="date"?{value:e.value,input:e,active:!0}:{...(r=this._activeDateFieldEdit)==null?void 0:r.date,active:!1},o=i==="time"?{value:e.value,input:e,active:!0}:{...(a=this._activeDateFieldEdit)==null?void 0:a.time,active:!1};this._activeDateFieldEdit={fieldName:n.name,date:s,time:o}}_updateFieldValue(e){const n=e.getAttribute(qh);if(this.viewModel.setValue(n,this._parseValue(e)),this._userUpdatedInputFieldNames.add(n),this.viewModel.fieldsWithContingentValues.has(n)){const i=Object.fromEntries(Object.entries(this.getValues()).filter(([s,o])=>q(o)));this.viewModel.validateContingencyConstraints(i)}}_updateDateFieldValue(e,n){this.viewModel.setValue(e.name,n),this._userUpdatedInputFieldNames.add(e.name)}_parseValue(e){const n=this._getInputFieldFromInput(e),i=e.value;if(this._inputFieldHasInputType(n,"switch")&&e.tagName!=="CALCITE-COMBOBOX")return e.checked?n.fieldElement.input.onValue:n.fieldElement.input.offValue;if(n.inputType==="radio-buttons"&&e.type==="radio"&&!e.checked)return n.value;const{type:s}=n;if(s==="number")return i?parseFloat(i):null;if(s==="date"){if(!i)return null;const o=Number(i);if(!isNaN(o))return o;const r=e.getAttribute("data-date-part"),a=this._parseDate(i,r);if(!a)return null;let l=da.fromJSDate(a);const c=n.domain,u=da.now();let d=u;if(c&&c.type==="range"){const m=da.fromMillis(c.maxValue);u<m&&(d=m)}const h=this.viewModel.getValue(n.name),f=h!=null?da.fromMillis(h):d;return l=r==="date"?l.set({hour:f.hour,minute:f.minute,second:f.second}):l.set({day:f.day,month:f.month,year:f.year}),l.toMillis()}return i}_handleOptionChange(e){this._commitInputValue(e),this.scheduleRender()}_handleGroupClick(e){var r;const n=e.currentTarget["data-group"],i=n.state==="expanded",s=this.groupDisplay==="sequential",o=`.${Wt.groupHeader}`;if(!(i&&!e.target.closest(o))){if(this._activeInputName=(r=this._getFocusableInput("forward",n))==null?void 0:r.name,s){const a=e.target.closest(o);if(i&&!a)return;this.viewModel.inputFields.forEach(l=>{nv(l)&&l!==n&&(l.state="collapsed")})}n.state=i?"collapsed":"expanded",this._fieldFocusNeeded=s,this.scheduleRender()}}_handleSubmit(e){e.preventDefault()}_handleFormKeyDown(e){e.key==="Enter"&&this.viewModel.submit()}_formatDate(e){if(e==null)return{date:"",time:""};const n=da.fromMillis(e,{locale:z0(),numberingSystem:"latn"});return{date:n.toLocaleString({year:"numeric",month:"2-digit",day:"2-digit"}),time:n.toFormat(OA.timePattern)}}_parseDate(e,n){if(e==null||e==="")return null;const{timePattern:i,datePattern:s}=OA,o=n?n==="date"?s:i:`${s} ${i}`,r=da.fromFormat(e,o,{locale:z0(),numberingSystem:"latn"});return r.isValid?r.toJSDate():null}_inputFieldHasInputType(e,n){var i;return q(e.fieldElement)&&((i=e.fieldElement.input)==null?void 0:i.type)===n}_valueIsValidContingentValue(e,n){var i;switch(n.objectType){case"any":return!0;case"null":return e==null;case"code":return e===((i=n.codedValue)==null?void 0:i.code);case"range":return e>=n.minValue&&e<=n.maxValue;default:return RL(n.objectType),!1}}};v([b()],ls.prototype,"disabled",void 0),v([b()],ls.prototype,"feature",null),v([b()],ls.prototype,"formTemplate",null),v([b()],ls.prototype,"groupDisplay",void 0),v([b()],ls.prototype,"headingLevel",void 0),v([b()],ls.prototype,"label",null),v([b()],ls.prototype,"layer",null),v([b(),rn("esri/widgets/FeatureForm/t9n/FeatureForm")],ls.prototype,"messages",void 0),v([b(),rn("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],ls.prototype,"messagesTemplates",void 0),v([b()],ls.prototype,"spatialReference",null),v([b()],ls.prototype,"strict",null),v([b()],ls.prototype,"view",null),v([b(),Sh(["value-change","submit"])],ls.prototype,"viewModel",void 0),ls=v([Ae("esri.widgets.FeatureForm")],ls);const Pke=ls;var qC;const YN="esri.widgets.FeatureTemplates.TemplateItem";let zl=qC=class extends Li(dt){constructor(t){super(t),this._activeFetchInfo={id:null,request:null},this.layer=null,this.template=null,this.thumbnail=null}initialize(){this.handles.add(ge(()=>{const{layer:t}=this;return[t&&"renderer"in t?t.renderer:null,this.template]},()=>{this._activeFetchInfo.id=null,this._activeFetchInfo.request=null,this._set("thumbnail",null)},gt))}get description(){var t;return(t=this.template)==null?void 0:t.description}set description(t){this.template&&(this.template.description=t)}get label(){var t;return(t=this.template)==null?void 0:t.name}set label(t){this.template&&(this.template.name=t)}clone(){const t=q(this.thumbnail)?this.thumbnail.cloneNode(!0):null,e=new qC({layer:this.layer,template:this.template});return e._set("thumbnail",t),e}static async fetchThumbnail(t,e){var s;if(Fke(t))return Tt.getLogger(YN).warn("Thumbnails for sublayers of a SubtypeGroupLayer are not yet supported."),null;const n=await Rke(t,e);if(ke(n))return null;const i={maxSize:36};return((s=t.renderer)==null?void 0:s.type)==="dictionary"&&(i.fieldMap=t.renderer.fieldMap,i.feature={attributes:e.prototype.attributes}),await aT(n,i)}};async function Rke(t,e){const{renderer:n}=t;if(n){const i=new Ls({attributes:e.prototype.attributes}),s=await n.getSymbolAsync(i);if(s)return s}return Vke(t)}async function Vke(t){const{geometryType:e}=t,n=e==="point"||e==="multipoint"?await Fe(()=>import("./symbols-9fcb6cc2.js").then(i=>i.H),["./symbols-9fcb6cc2.js","./ensureType-25b8cc06.js","./string-480f3e3f.js","./typedArrayUtil-d9bc5fbd.js","./Error-57322e92.js","./cast-a534ae90.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./CIMSymbol-72a9d286.js","./enumeration-61a13175.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./locale-30120714.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./Clonable-9b34e760.js"],import.meta.url):e==="polyline"?await Fe(()=>import("./symbols-9fcb6cc2.js").then(i=>i.E),["./symbols-9fcb6cc2.js","./ensureType-25b8cc06.js","./string-480f3e3f.js","./typedArrayUtil-d9bc5fbd.js","./Error-57322e92.js","./cast-a534ae90.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./CIMSymbol-72a9d286.js","./enumeration-61a13175.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./locale-30120714.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./Clonable-9b34e760.js"],import.meta.url):e==="polygon"||e==="mesh"||e==="multipatch"?await Fe(()=>import("./symbols-9fcb6cc2.js").then(i=>i.G),["./symbols-9fcb6cc2.js","./ensureType-25b8cc06.js","./string-480f3e3f.js","./typedArrayUtil-d9bc5fbd.js","./Error-57322e92.js","./cast-a534ae90.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./CIMSymbol-72a9d286.js","./enumeration-61a13175.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./locale-30120714.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./Clonable-9b34e760.js"],import.meta.url):null;return n?new n.default:null}function Fke(t){return t.type==="subtype-group"}v([b()],zl.prototype,"description",null),v([b()],zl.prototype,"label",null),v([b()],zl.prototype,"layer",void 0),v([b()],zl.prototype,"template",void 0),v([b({readOnly:!0})],zl.prototype,"thumbnail",void 0),zl=qC=v([Ae(YN)],zl);const KC=zl;let pf=class extends dh(dt){constructor(e){super(e),this.items=null,this.label=null}};v([b()],pf.prototype,"items",void 0),v([b()],pf.prototype,"label",void 0),pf=v([Ae("esri.widgets.FeatureTemplates.TemplateItemGroup")],pf);const Dke=pf;var hf;const Nke=({layer:t})=>({key:t,label:t.title}),Bke=({layer:t})=>({key:t.geometryType,label:t.geometryType});let cs=hf=class extends Li(Ii.EventedAccessor){constructor(t){super(t),this._itemPool=new tI(KC),this._groupPool=new tI(Dke),this.filterFunction=null,this.selectedItem=null}initialize(){this._get("groupBy")||(this.groupBy="layer")}destroy(){this._templateToLayer.clear()}get _templateToLayer(){const t=new Map;for(const[e,n]of this._featureTemplatesByLayer)for(const i of n)t.set(i,e);return t}set groupBy(t){if(this._set("groupBy",t),typeof t!="function")switch(t){case"none":this._groupByFunction=null;break;case"layer":this._groupByFunction=Nke;break;case"geometry":this._groupByFunction=Bke}else this._groupByFunction=e=>this._ensureGroupByObject(t(e))}set layers(t){const e="layers";if(this.handles.remove(e),t){const n=()=>this.notifyChange("state");this.handles.add(t.map(i=>ji(()=>i.loadStatus,n)),"layers")}this._set("layers",t)}get layers(){return this._get("layers")}get state(){const{layers:t}=this;return t&&t.length!==0?t.some(e=>e.loadStatus==="loading"||e.loadStatus==="not-loaded")?"loading":"ready":"disabled"}get _featureTemplatesByLayer(){if(!this.layers)return new Map;const t=[];for(const e of this.layers){const n="templates"in e&&e.templates?e.templates:[],i="types"in e&&e.types?zke(e.types):[];t.push([e,[...n,...i]])}return new Map(t)}get numberOfFeatureTemplates(){return Array.from(this._featureTemplatesByLayer.values()).reduce((t,e)=>t+e.length,0)}get items(){if(this.numberOfFeatureTemplates===0)return this._releasePreviousItems(),[];const t=this._featureTemplatesByLayer,e=[],n=q(this.filterFunction)?this.filterFunction:hf._nullFilterFunction;for(const[o,r]of t)if(o.loaded){const{capabilities:{operations:{supportsEditing:a,supportsAdd:l}}}=o;if(a&&l)for(const c of r)e.push({layer:o,template:c,matchesFilter:n({label:c.name})})}if(ke(this._groupByFunction)){const o=e.filter(({matchesFilter:r})=>r).map(({template:r,layer:a})=>this._createItem(r,a));return this._releasePreviousItems(),o}const i=new Map;for(const o of e){const{template:r,layer:a}=o,l=this._groupByFunction({template:r,layer:a}),{key:c,label:u}=q(l.key)?l:hf.nullGroupBy;i.has(c)||i.set(c,{label:u,templateItemInfos:[]}),i.get(c).templateItemInfos.push(o)}const s=[];for(const o of i.values()){const{label:r,templateItemInfos:a}=o,l=a.filter(({matchesFilter:u})=>u),c=n({label:r})?a:a.length>0?l:[];if(c.length>0){const u=c.map(({template:d,layer:h})=>this._createItem(d,h));s.push(this._createGroup(r,u))}}return s.length===1&&s[0].label===hf.nullGroupBy.label?(this._releasePreviousItems(),s[0].items):(this._releasePreviousItems(),s)}refresh(){this.notifyChange("items")}select(t){const e=(t==null?void 0:t.clone())||null;this._set("selectedItem",e),this.emit("select",{item:e,template:(e==null?void 0:e.template)||null})}_createItem(t,e){const n=this._itemPool.acquire();return n.set({template:t,layer:e}),n}_createGroup(t,e){const n=this._groupPool.acquire();return n.set("label",t),n.items=e,n}_releasePreviousItems(){this._destroyItems(this._get("items"))}_destroyItems(t){t&&(t[0]instanceof KC?t.forEach(e=>this._destroyItem(e)):t.forEach(e=>this._destroyGroup(e)))}_destroyGroup(t){t.items.forEach(e=>this._destroyItem(e)),t.items.length=0,this._groupPool.release(t)}_destroyItem(t){t.layer=null,t.template=null,this._itemPool.release(t)}_ensureGroupByObject(t){return typeof t=="string"?{key:t,label:t}:t}};function zke(t){return t.reduce((e,n)=>[...e,...n.templates],[])}cs.nullGroupBy={key:Symbol(),label:"Other​"},cs._nullFilterFunction=t=>!0,v([b()],cs.prototype,"_groupByFunction",void 0),v([b({readOnly:!0})],cs.prototype,"_templateToLayer",null),v([b()],cs.prototype,"filterFunction",void 0),v([b()],cs.prototype,"groupBy",null),v([b()],cs.prototype,"layers",null),v([b()],cs.prototype,"state",null),v([b({readOnly:!0})],cs.prototype,"_featureTemplatesByLayer",null),v([b({readOnly:!0})],cs.prototype,"numberOfFeatureTemplates",null),v([b({readOnly:!0})],cs.prototype,"items",null),v([b({readOnly:!0})],cs.prototype,"selectedItem",void 0),v([b()],cs.prototype,"select",null),cs=hf=v([Ae("esri.widgets.FeatureTemplates.FeatureTemplatesViewModel")],cs);const YC=cs,mc={base:"esri-item-list",list:"esri-item-list__list",group:"esri-item-list__group",scroller:"esri-item-list__scroller",groupHeader:"esri-item-list__group__header",item:"esri-item-list__list-item",itemSelected:"esri-item-list__list-item--selected",itemContainer:"esri-item-list__list-item-container",itemLabel:"esri-item-list__list-item-label",itemIcon:"esri-item-list__list-item-icon",noMatchesMessage:"esri-item-list__no-matches-message",noItemsMessage:"esri-item-list__no-items-message",filterContainer:"esri-item-list__filter-container",filterContainerSticky:"esri-item-list__filter-container--sticky",filterPlaceholder:"esri-item-list__filter-placeholder",filterInput:"esri-item-list__filter-input",filterPlaceholderText:"esri-item-list__filter-placeholder-text",searchIcon:"esri-icon-search",widget:"esri-widget",input:"esri-input"};function ZN(t){const{id:e,identify:n,filterEnabled:i=!0,headingLevel:s=4,items:o,selectedItem:r,messages:a,filterText:l="",onFilterChange:c,renderIcon:u,onItemMouseLeave:d,onItemMouseEnter:h,onItemSelect:f}=t,m=t.enableListScroll??!0;return M("div",{key:e},i?Wke({filterText:l,messages:a,onFilterChange:c,id:e}):null,Uke({enableListScroll:m,identify:n,items:o,selectedItem:r,messages:a,filterText:l,headingLevel:s,renderIcon:u,onItemMouseLeave:d,onItemMouseEnter:h,onItemSelect:f}))}function Hke(t){return!!t.items}function Uke(t){const{headingLevel:e,identify:n,items:i,renderIcon:s,filterText:o,onItemMouseLeave:r,onItemMouseEnter:a,onItemSelect:l,selectedItem:c}=t,u=t.enableListScroll?mc.scroller:null;return i.length===0?M("div",{class:mc.noMatchesMessage,key:"no-matches"},t.messages.noMatches):M("div",{class:u,key:"item-container"},i.map(d=>Hke(d)?Gke({group:d,filterText:o,headingLevel:e,identify:n,onItemMouseLeave:r,onItemMouseEnter:a,onItemSelect:l,renderIcon:s,selectedItem:c}):XN({item:d,identify:n,grouped:!0,onItemMouseLeave:r,onItemMouseEnter:a,onItemSelect:l,renderIcon:s,filterText:o,selectedItem:c})))}function Wke(t){const{messages:e,filterText:n,enableListScroll:i}=t;return M("div",{key:"filter",class:i?null:mc.filterContainerSticky},M("calcite-input",{onCalciteInputInput:s=>{const o=s.currentTarget;t.onFilterChange&&t.onFilterChange(o.value)},placeholder:e.filterPlaceholder,value:n,type:"search"}))}function XN(t){const{identify:e,item:n,selectedItem:i,grouped:s,onItemSelect:o,onItemMouseEnter:r,onItemMouseLeave:a,renderIcon:l}=t,c=`${(e==null?void 0:e(n))||n.id}__${n.label}`,u=i?`${(e==null?void 0:e(i))||i.id}__${i.label}`:"";return M("calcite-list-item",{"aria-level":s?"2":"","data-item":n,key:c,class:Kd(mc.item,c===u?mc.itemSelected:""),label:n.label,onclick:d=>{const h=d.currentTarget["data-item"];o&&o(h)},onmouseenter:d=>{const h=d.currentTarget["data-item"];r&&r(h)},onkeydown:d=>{if(!KL(d.key))return;const h=d.currentTarget["data-item"];o&&o(h)},onmouseleave:d=>{const h=d.currentTarget["data-item"];a&&a(h)},tabIndex:0},M("div",{class:mc.itemIcon,slot:"content-start"},l&&l({item:n})))}function Gke(t){const{group:e,identify:n,onItemMouseLeave:i,onItemMouseEnter:s,onItemSelect:o,filterText:r,renderIcon:a,selectedItem:l,headingLevel:c}=t;return M("div",{class:mc.group,key:e.label},M(Is,{level:c,class:mc.groupHeader},e.label),e.items.map(u=>XN({item:u,identify:n,grouped:!0,onItemMouseLeave:i,onItemMouseEnter:s,onItemSelect:o,renderIcon:a,filterText:r,selectedItem:l})))}const a0={base:"esri-feature-templates",loader:"esri-feature-templates__loader",widget:"esri-widget"};function QN(t){return"items"in t}function jke(t){return t.length>0&&QN(t[0])}function qke(t){const{label:e}=t;return QN(t)?e:`${e}–${t.layer.id}`}const PA={filter:!0};let Ss=class extends Li(kn){constructor(e,n){super(e,n),this._iconIntersectionObserver=new IntersectionObserver((i,s)=>{i.forEach(async o=>{if(o.isIntersecting){const r=o.target;if(r["data-has-icon"])return void s.unobserve(r);const a=r["data-item"],{layer:l,template:c}=a;r["data-has-icon"]=!0;const u=await KC.fetchThumbnail(l,c).catch(()=>(r["data-has-icon"]=!1,null));if(ke(u))return;r.appendChild(u)}})}),this.enableListScroll=!0,this.filterText="",this.headingLevel=4,this.messages=null,this.viewModel=new YC,this.visibleElements={...PA},this.renderItemIcon=this.renderItemIcon.bind(this),this._afterItemCreateOrUpdate=this._afterItemCreateOrUpdate.bind(this),this._afterItemRemoved=this._afterItemRemoved.bind(this)}initialize(){const e=({label:n})=>!this.filterText||n.toLowerCase().includes(this.filterText.toLowerCase());this.addHandles(ge(()=>this.viewModel,(n,i)=>{n&&!n.filterFunction&&(this.filterFunction=e),i&&i!==n&&i.filterFunction===e&&(i.filterFunction=null)},gt))}destroy(){this._iconIntersectionObserver&&(this._iconIntersectionObserver.disconnect(),this._iconIntersectionObserver=null)}loadDependencies(){return Promise.all([Fe(()=>import("./calcite-input-3a2d6757.js"),["./calcite-input-3a2d6757.js","./dom-5b7af1bf.js","./label2-0103af15.js","./form-9bc9e261.js","./key-1fec8108.js","./observers-c77bfda3.js","./interactive-52dcf836.js","./icon-1a289254.js","./progress-ae83f8fa.js"],import.meta.url),Fe(()=>import("./calcite-list-item-2b0d81b3.js"),["./calcite-list-item-2b0d81b3.js","./dom-5b7af1bf.js","./conditionalSlot-e2a39862.js","./observers-c77bfda3.js","./interactive-52dcf836.js"],import.meta.url)])}get filterFunction(){return this.viewModel.filterFunction}set filterFunction(e){this.viewModel.filterFunction=e}get groupBy(){return this.viewModel.groupBy}set groupBy(e){this.viewModel.groupBy=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layers(){return this.viewModel.layers}set layers(e){this.viewModel.layers=e}get selectedItem(){return this.viewModel.selectedItem}castVisibleElements(e){return{...PA,...e}}select(e){return this.viewModel.select(e)}render(){const{enableListScroll:e,filterText:n,headingLevel:i,messages:s,viewModel:{items:o,numberOfFeatureTemplates:r,selectedItem:a,state:l}}=this,c=this.visibleElements.filter&&r>1;if(jke(o)){const u=o.find(d=>d.label===YC.nullGroupBy.label);u&&(u.label=s.other)}return M("div",{class:this.classes(a0.base,a0.widget),"aria-label":s.widgetLabel},l==="loading"?this.renderLoader():l==="ready"?M(ZN,{id:this.id,identify:qke,filterText:n,items:o,headingLevel:i,messages:{filterPlaceholder:s.filterPlaceholder,noItems:s.noItems,noMatches:s.noMatches},filterEnabled:c,onItemSelect:u=>{this.viewModel.select(u)},onFilterChange:u=>{this.filterText=u,this.viewModel.refresh()},renderIcon:this.renderItemIcon,selectedItem:a,enableListScroll:e}):null)}renderItemIcon({item:e}){return M("span",{key:"icon",afterCreate:this._afterItemCreateOrUpdate,afterUpdate:this._afterItemCreateOrUpdate,afterRemoved:this._afterItemRemoved,"data-item":e,"data-has-icon":!1})}renderLoader(){return M("div",{class:a0.loader,key:"loader"})}_afterItemCreateOrUpdate(e){var n;(n=this._iconIntersectionObserver)==null||n.observe(e)}_afterItemRemoved(e){var n;(n=this._iconIntersectionObserver)==null||n.unobserve(e)}};v([b()],Ss.prototype,"enableListScroll",void 0),v([b()],Ss.prototype,"filterFunction",null),v([b()],Ss.prototype,"filterText",void 0),v([b()],Ss.prototype,"groupBy",null),v([b()],Ss.prototype,"headingLevel",void 0),v([b()],Ss.prototype,"label",null),v([b()],Ss.prototype,"layers",null),v([b(),rn("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],Ss.prototype,"messages",void 0),v([b({readOnly:!0})],Ss.prototype,"selectedItem",null),v([b(),Sh("select")],Ss.prototype,"viewModel",void 0),v([b()],Ss.prototype,"visibleElements",void 0),v([ii("visibleElements")],Ss.prototype,"castVisibleElements",null),Ss=v([Ae("esri.widgets.FeatureTemplates")],Ss);const Kke=Ss;function Sp(t,e,n){zB(t,"`"+e+"` is deprecated, because it instantiates the deprecated class 'esri.widgets.Editor.CreateWorkflow'",{replacement:n,version:"4.23",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-Editor-CreateFeaturesWorkflow.html"})}let su=class extends dt{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1}};v([b({constructOnly:!0})],su.prototype,"layer",void 0),v([b()],su.prototype,"enabled",void 0),v([b()],su.prototype,"updating",void 0),v([b()],su.prototype,"availability",void 0),su=v([Ae("esri.views.interactive.snapping.FeatureSnappingLayerSource")],su);const yT=su;let ff=class extends dt{constructor(e){super(e),this.creationInfo=null,this.viewModel=null}};v([b()],ff.prototype,"creationInfo",void 0),v([b()],ff.prototype,"viewModel",void 0),ff=v([Ae("esri.widgets.Editor.CreateFeaturesWorkflowData")],ff);let $o=class extends Li(Ii.EventedAccessor){constructor(e){super(e),this._indexHistory=[],this._lastStepIndex=-1,this._stepIndex=-1,this._handleKeys={afterCommit:"after-commit",beforeCommit:"before-commit"},this.data=void 0,this.started=!1,this.steps=[],this.type=null}get hasNextStep(){const{steps:e}=this;return!!(e&&this._stepIndex<e.filter(n=>!n.parent).length-1)}get hasPreviousStep(){return this._stepIndex>0}get stepId(){const{steps:e}=this,n=e&&e[this._stepIndex];return n&&n.id}async cancel(e={force:!0}){return e.force!==!1?this._cancel():new Promise((n,i)=>{this.emit("cancel-request",{controller:{allow:()=>{this._cancel().then(n)},deny:()=>i(new Ue("workflow:cancel-denied","Request to cancel workflow was denied."))}})})}async commit(){this.handles.remove(this._handleKeys.beforeCommit),await this.onCommit(this.data),this.handles.remove(this._handleKeys.afterCommit),this.emit("commit"),this.started&&await this.reset()}async go(e){const{steps:n}=this,i=n.findIndex(s=>s.id===e);this._indexHistory.push(this._stepIndex),await this._go(i)}async next(){this._indexHistory.push(this._stepIndex),await this._go(this._stepIndex+1)}async previous(e={cancelCurrentStep:!1}){await this._go(this._indexHistory.pop(),e.cancelCurrentStep)}async reset(){await this._cancel(!1),await this.start()}async start(){this._set("started",!0);const e=this._stepIndex===-1?0:this._stepIndex;await this._go(e)}async _cancel(e=!0){this.started&&(this._set("started",!1),await this.steps[this._stepIndex].tearDown({cancelled:!0}),this.data&&this.data.viewModel.sketchViewModel.layer.removeAll()),this.handles.remove([this._handleKeys.afterCommit,this._handleKeys.beforeCommit]),this._resetIndexing(e),e&&this.emit("cancel")}async _go(e=-1,n=!1){if(!(e<=-1||e>=this.steps.length)){if(!this.started)return this._stepIndex=e,void this._notifyStepProps();this._lastStepIndex>-1&&await this.steps[this._lastStepIndex].tearDown({cancelled:n}),await this.steps[e].setUp(),this._lastStepIndex=e,this._stepIndex=e,this._notifyStepProps()}}_resetIndexing(e=!0){this._stepIndex=-1,this._lastStepIndex=-1,this._indexHistory.length=0,e&&this._notifyStepProps()}_notifyStepProps(){this.notifyChange("stepId"),this.notifyChange("hasPreviousStep"),this.notifyChange("hasNextStep")}};v([b()],$o.prototype,"data",void 0),v([b()],$o.prototype,"hasNextStep",null),v([b()],$o.prototype,"hasPreviousStep",null),v([b()],$o.prototype,"onCommit",void 0),v([b()],$o.prototype,"started",void 0),v([b({readOnly:!0})],$o.prototype,"stepId",null),v([b()],$o.prototype,"steps",void 0),v([b({readOnly:!0})],$o.prototype,"type",void 0),v([b()],$o.prototype,"commit",null),$o=v([Ae("esri.widgets.Editor.Workflow")],$o);const bT=$o;function l0(t,e){return e?"xoffset"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):"yoffset"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function Yke(t){let e=0,n=0;for(let i=0;i<t.length;i++){const s=t[i].size;typeof s=="number"&&(e+=s,n++)}return e/n}function RA(t,e){return typeof t=="number"?t:t&&t.stops&&t.stops.length?Yke(t.stops):e}function Zke(t,e){if(!e)return t;const n=e.filter(r=>r.type==="size").map(r=>{const{maxSize:a,minSize:l}=r;return(RA(a,t)+RA(l,t))/2});let i=0;const s=n.length;if(s===0)return t;for(let r=0;r<s;r++)i+=n[r];const o=Math.floor(i/s);return Math.max(o,t)}function JN(t){var s;const e=t&&t.renderer,n=(t&&t.event&&t.event.pointerType)==="touch"?9:6;if(!e)return n;const i="visualVariables"in e?Zke(n,e.visualVariables):n;if(e.type==="simple")return l0(i,e.symbol);if(e.type==="unique-value"){let o=i;return(s=e.uniqueValueInfos)==null||s.forEach(r=>{o=l0(o,r.symbol)}),o}if(e.type==="class-breaks"){let o=i;return e.classBreakInfos.forEach(r=>{o=l0(o,r.symbol)}),o}return e.type==="dot-density"||e.type,i}let ou=class extends Ii.EventedAccessor{constructor(e){super(e),this.tracking=!1,this.displaying=!1,this.isDraped=!1}};v([b({constructOnly:!0})],ou.prototype,"graphic",void 0),v([b()],ou.prototype,"tracking",void 0),v([b()],ou.prototype,"displaying",void 0),v([b()],ou.prototype,"isDraped",void 0),ou=v([Ae("esri.views.3d.layers.graphics.GraphicState")],ou);function e4(t,e,n,i=new ol){let s;if(n.type==="2d")s=e*n.resolution;else if(n.type==="3d"){const u=n.overlayPixelSizeInMapUnits(t),d=n.basemapSpatialReference;s=q(d)&&!d.equals(n.spatialReference)?Vy(d)/Vy(n.spatialReference):e*u}const o=t.x-s,r=t.y-s,a=t.x+s,l=t.y+s,{spatialReference:c}=n;return i.xmin=Math.min(o,a),i.ymin=Math.min(r,l),i.xmax=Math.max(o,a),i.ymax=Math.max(r,l),i.spatialReference=c,i}function qVe(t,e,n){const i=n.toMap(t);return ke(i)?!1:e4(i,JN(),n,Xke).intersects(e)}const Xke=new ol;async function Qke(t,e){if(t.type==="2d")return t.hitTest(e);const n=await t.hitTest(e);if(n.results.length===0)return n;const i=n.results[0],s=q(i.distance)?i.distance*(1+Jke):i.distance,o=n.results.findIndex(r=>r.distance>s);return o!==-1&&(n.results=n.results.slice(0,o)),n}const Jke=.05;function t4(t){return q(t)&&t.type==="graphic"}function eTe(t){return t.find(t4)??null}function n4(t){return t.filter(t4)}function L_(t){const e=t.sourceLayer;if(e.type!=="feature"||!oTe(e.renderer))return{rotation:null,size:null};let n=null,i=null;const s=e.renderer.getVisualVariablesForType("rotation").filter(r=>(!r.axis||r.axis==="heading")&&r.field&&!r.valueExpression&&q(jB(r,t)));s.length===1&&(n=tTe(s[0],e));const o=e.renderer.getVisualVariablesForType("size").filter(r=>r.field&&!r.useSymbolValue&&!r.valueExpression&&WB(r)===GB.RealWorldSize&&q(qB(r,t)));return o.length===1&&(i=sTe(o[0],e)),{rotation:n,size:i}}function tTe(t,e){const n=(t.axis||"heading")==="heading"&&t.rotationType==="arithmetic"?-1:1,i=t.field,s=e.fields&&e.fields.filter(a=>a.name===i),o=s&&s.length===1?s[0].type:"double",r={initial:0,current:0};return{field:i,fieldType:o,getDefault:()=>Promise.resolve(0),getValue:a=>(r.current=r.initial-n*a,ZC((r.current+360)%360,o)),initValue:a=>{r.initial=a??r.current,r.current=0},isUpdatingInteractively:!1,rotationType:t.rotationType??"geographic"}}function nTe(t,e){switch(e){case"width":return t[0];case"depth":return t[1];case"height":return t[2];default:return t[2]||t[1]||t[0]}}async function iTe(t,e,n){if(ke(e))return 0;const{symbol:i}=Fp(e);if(ke(i)||i.type==="web-style"||i.type==="cim")return 0;const s=i.symbolLayers.getItemAt(0);if(!s)return 0;switch(s.type){case"icon":{const{computeIconLayerResourceSize:o}=await Fe(()=>import("./symbolLayerUtils-091fbe81.js"),["./symbolLayerUtils-091fbe81.js","./preload-helper-41c905a7.js","./request-24011425.js","./Error-57322e92.js","./string-480f3e3f.js","./typedArrayUtil-d9bc5fbd.js","./promiseUtils-32d9c228.js","./ItemCache-bf1028d4.js","./MemCache-1d2f56ee.js","./cast-a534ae90.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./aaBoundingBox-4a83dbbc.js","./Extent-a1a1de42.js","./aaBoundingRect-b340cf8c.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./symbolLayerUtils3D-c8c40895.js"],import.meta.url);return s.size||Math.min(El.icon,(await o(s,El.icon))[0])||El.icon}case"text":return s.size||El.text;case"line":return s.size||El.line;case"object":{const{computeObjectLayerResourceSize:o}=await Fe(()=>import("./symbolLayerUtils-091fbe81.js"),["./symbolLayerUtils-091fbe81.js","./preload-helper-41c905a7.js","./request-24011425.js","./Error-57322e92.js","./string-480f3e3f.js","./typedArrayUtil-d9bc5fbd.js","./promiseUtils-32d9c228.js","./ItemCache-bf1028d4.js","./MemCache-1d2f56ee.js","./cast-a534ae90.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./aaBoundingBox-4a83dbbc.js","./Extent-a1a1de42.js","./aaBoundingRect-b340cf8c.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./symbolLayerUtils3D-c8c40895.js"],import.meta.url);return nTe(await o(s,t.scale/El.viewScaleSizeFactor),n)}case"path":return(s.width!=null?s.width:s.height)||t.scale/El.viewScaleSizeFactor;case"extrude":return s.size||t.scale/El.viewScaleSizeFactor;default:return 0}}function sTe(t,e){const n=t.field,i=t.axis,s=e.fields&&e.fields.filter(c=>c.name===n),o=s&&s.length===1?s[0].type:"double",r={updating:!1,initial:0,current:0},a=UB[t.valueUnit]??1;let l;return l=t.valueRepresentation==="area"?c=>(c*a/2)**2*Math.PI:t.valueRepresentation==="radius"||t.valueRepresentation==="distance"?c=>c*a/2:c=>c*a,{field:n,fieldType:o,getDefault:async(c,u)=>ZC(l(await iTe(u,c,i)),o),getValue:(c,u)=>(r.initial||(r.initial=u.pixelSizeAt(u.center)),r.current=r.initial*c,ZC(r.current,o)),initValue:c=>{r.initial=c??r.current,r.current=0},isUpdatingInteractively:!1,displayUnit:vTe(t.valueUnit),axis:t.axis}}function ZC(t,e){switch(e){case"small-integer":case"integer":case"long":return Math.round(t);case"double":case"single":return t;default:return 0}}function oTe(t){switch(t.type){case"class-breaks":case"simple":case"unique-value":case"dot-density":case"dictionary":case"pie-chart":return!0;default:return!1}}async function Qu(t,e){const n=await db(t,{useSourceLayer:!0,ignoreGraphicSymbol:!0,webStyleCache:e}),i=HB(t.symbol,n);q(i)&&(t.symbol=n)}function rTe(t){if(t==="mesh"||t==="multipatch")throw new Error("Mesh and Multipatch not supported");return t}async function aTe(t,e,n,i){await XC(t,e,i);const s=t.on("create",async o=>{if(o.state==="cancel")return XC(t,e,i);if(o.state==="complete"){const r=o.graphic;r.sourceLayer||(r.sourceLayer=e.layer),r.attributes||(r.attributes={...e.template.prototype.attributes}),await Qu(r,i),n(r)}});return{remove:()=>{s.remove(),t.cancel()}}}async function XC(t,e,n){const i=e.layer,s={...e.template.prototype.attributes};await lTe(t,i,s,n);const o={graphicProperties:{attributes:s,sourceLayer:i},hasZ:i.capabilities.data.supportsZ};return t.layer.elevationInfo=i.elevationInfo,t.create(rTe(i.geometryType),o)}async function lTe(t,e,n,i){const s=new Ls({sourceLayer:e,attributes:n}),{rotation:o,size:r}=L_(s);let a=await db(s,{useSourceLayer:!0,webStyleCache:i}),l=!1;for(const c of[r,o])ke(c)||n[c.field]==null&&(n[c.field]=await c.getDefault(a,t.view),l=!0);switch(l&&(a=await db(s,{useSourceLayer:!0,webStyleCache:i})),a==null?void 0:a.type){case"simple-fill":case"polygon-3d":t.polygonSymbol=a;break;case"simple-line":case"line-3d":t.polylineSymbol=a;break;case"simple-marker":case"picture-marker":case"point-3d":case"cim":t.pointSymbol=a}i4(t.tooltipOptions,r,o)}function i4(t,e,n){q(e)||q(n)?t.visualVariables={size:q(e)?{unit:e.displayUnit,axis:e.axis,valueType:e.fieldType}:null,rotation:q(n)?{valueType:n.fieldType,rotationType:n.rotationType??"geographic"}:null}:t.visualVariables=null}function _T(t,e){return t&&t.find(n=>n.layer===e)}async function cTe(t,e,n,i){if(t.length===0)return[];const{updatable:s,graphicsByLayer:o}=await n.async(async()=>{const{results:r}=await Zf(Qke(e,n),i),a=new Map,l=({layer:u})=>{const d=a.get(u);if(!d){const h=new Array;return a.set(u,h),h}return d};n4(r).forEach(({graphic:u})=>l(u).push(u));const c=t.filter(({supports:u,layer:d})=>u.includes("update")&&a.has(d));return c.length!==0&&n.stopPropagation(),{updatable:c,graphicsByLayer:a}});return Zf(Ni(s.map(async({layer:r})=>{const{objectIdField:a}=r,l="displayField"in r?r.displayField:null,c=[a];r.fieldsIndex.has(l)&&c.push(l);const u=o.get(r);if(u.some(d=>c.some(h=>!(h in d.attributes)))){const d=r.createQuery();return d.outFields=c,d.returnGeometry=!1,d.objectIds=u.map(h=>h.getObjectId()),r.queryFeatures(d,{signal:i}).then(({features:h})=>h)}return u})),i)}async function uTe(t,e,n,i){if(t.length===0)return[];let s=null;const o=await n.async(async()=>{const{results:r}=await Zf(e.hitTest(n),i);if(r.length===0)return[];const a=new Set;s=n4(r),s.forEach(({graphic:c})=>c&&a.add(c.layer));const l=t.items.filter(({layer:c,supports:u})=>u.includes("update")&&a.has(c));return l.length>0&&n.stopPropagation(),l});return Zf(Ni(o.map(({layer:r})=>{const{objectIdField:a}=r,l="displayField"in r?r.displayField:null,c=[a];r.fieldsIndex.has(l)&&c.push(l);const u=r.createQuery();u.outFields=c,u.returnGeometry=!1;const d="renderer"in r?JN({renderer:r.renderer,event:n}):0;return u.geometry=e4(n.mapPoint,d,e),u.outSpatialReference=e.spatialReference,r.queryFeatures(u,{signal:i}).then(({features:h})=>(s.forEach(({graphic:f})=>{f.layer===r&&(h.find(m=>m.attributes[a]===f.attributes[r.objectIdField])||h.push(f))}),h))})),i)}async function dTe(t,e,n,i){switch(e.type){case"3d":return cTe(t,e,n,i);case"2d":return uTe(t,e,n,i)}}async function pTe(t,e,n){const i=t.layer,s=i.createQuery();return s.objectIds=[t.getAttribute(i.objectIdField)],s.outFields=["*"],s.outSpatialReference=e.spatialReference,s.returnM=i.capabilities.data.supportsM,s.returnZ=i.capabilities.data.supportsZ,(await i.queryFeatures(s,{signal:n})).features[0]}async function jm(t,e,n,i,s){let o=!1;const{rotation:r,size:a}=i;[r,a].forEach(async c=>{if(ke(c))return;const u=e.attributes[c.field];if(q(u))c.initValue(u);else{const d=await c.getDefault(e.symbol,t.view);c.initValue(d),e.setAttribute(c.field,d),o=!0}}),o&&await Qu(e,s);const l={multipleSelectionEnabled:!1};return n.geometryType==="point"&&(l.enableRotation=q(r),l.enableScaling=q(a)),i4(t.tooltipOptions,a,r),t.layer.elevationInfo=n.elevationInfo,t.update(e,l)}function hTe(t){return!q(t)||t.type!=="rotate-start"&&t.type!=="rotate"&&t.type!=="rotate-stop"?null:t}function fTe(t){return!q(t)||t.type!=="scale-start"&&t.type!=="scale"&&t.type!=="scale-stop"?null:t}async function wT(t,e,n,i,s){var c;if(!q(e.geometry)||((c=e.geometry)==null?void 0:c.type)!=="point")return;const o=i.rotation,r=hTe(n.toolEventInfo);if(q(o)&&q(r))if(r.type==="rotate-stop")o.isUpdatingInteractively=!1,o.initValue();else{o.isUpdatingInteractively=!0;const{field:u,getValue:d}=o;e.attributes[u]=d(r.angle,t)}const a=i.size,l=fTe(n.toolEventInfo);if(q(a)&&q(l))if(l.type==="scale-stop")a.isUpdatingInteractively=!1,a.initValue();else{a.isUpdatingInteractively=!0;const{field:u,getValue:d}=a;e.attributes[u]=d(l.xScale,t)}await Qu(e,s)}async function mTe(t,e,n,i,s,o){const r=t.clone();await Qu(r,o),i.map.add(n.layer),n.layer.add(r);const a=t.sourceLayer,l=i.whenLayerView(a),c=()=>{const w=t.layer,S=t.attributes[w.objectIdField];return l.then(E=>E.setVisibility(S,!1),()=>{}),{remove(){l.then(E=>E.setVisibility(S,!0),()=>{})}}};let u=null,d=null;if(i.type==="3d"){const w=new ou({graphic:r});u=AS([i.trackGraphicState(w),ge(()=>w.displaying,S=>{d=S?c():Bi(d)},gt)])}else d=c();await jm(n,r,a,e,o);let h=null;l.then(w=>h=w,()=>{});const f=e.size,m=e.rotation,g=ge(()=>t.attributes,async w=>{let S=!1;for(const E in w){const k=w[E];k!==r.attributes[E]&&(r.setAttribute(E,k),q(f)&&!f.isUpdatingInteractively&&f.field===E&&f.initValue(k),q(m)&&!m.isUpdatingInteractively&&m.field===E&&m.initValue(k),(ke(h)||h.requiredFields.includes(E))&&(S=!0))}S&&await Qu(r,o)}),y=n.on("update",async w=>{const S=w.graphics[0];if(w.state==="complete")return jm(n,S,a,e,o);await wT(i,S,w,e,o),s(S.clone(),w)}),_=n.on(["undo","redo"],async w=>{s(w.graphics[0].clone(),w)}),C=()=>{};return{interactive:{remove(){_.remove(),y.remove(),n.cancel(),g&&g.remove(),this.remove=C}},visual:{remove(){Bi(d),i.whenLayerView(a).then(w=>na(()=>!w.updating)).then(()=>{Bi(u),n.layer.remove(r),this.remove=C})}}}}const El={icon:Ru(24),text:Ru(12),line:Ru(1),viewScaleSizeFactor:100};function CT(t,e,n){let i=!1;return t.filter(s=>!!i||(i=s===e,i)).map(s=>n[s]())}function gTe(t){if(t.length!==1)return null;const e=t[0];if("items"in e){const n=e;return n.items.length===1?n.items[0]:null}return e}function s4(t,e){if(t.viewModel.refreshCreationTemplates(),e[0].id==="awaiting-feature-creation-info"){const n=gTe(t.viewModel.featureTemplatesViewModel.items);q(n)&&(t.creationInfo={layer:n.layer,template:n.template},e.shift())}return e}function vTe(t){switch(t){case"unknown":case"decimal-degrees":return null;default:return t}}const o4=t=>/-stop/.test(t)||/vertex-/.test(t);var QC;const c0=Symbol();let JC=QC=class extends bT{constructor(t){super(t),this.type="create-features",this.createFeatureState="create-new",this._featureFormHandle=null,this._visualVariableAttributes={rotation:null,size:null},this._attachmentFileInfos=new Map,this._highlightHandles=new Map,this._preventDefaultActionOnCancel=!1}get numPendingFeatures(){return this.data.viewModel.sketchViewModel.layer.graphics.length}get pendingFeatures(){return this.data.viewModel.sketchViewModel.layer.graphics}async updatePendingFeature(t,e){return this._preventDefaultActionOnCancel=!0,this.data.viewModel.sketchViewModel.cancel(),V0(this._lastActiveGraphics,t),this._startUpdating(t,e)}static create(t,e,n,i,s){const o=new QC({data:new ff({creationInfo:zt(e),viewModel:t}),onCommit:async r=>{const a=r.viewModel.sketchViewModel.layer.graphics.toArray(),l=r.creationInfo.layer,c=l.capabilities.editing.supportsGlobalId&&"globalIdField"in l,u=o._attachmentFileInfos;if(u.size===0)return void await i(l,{addFeatures:a});if(c){const f=o._getAttachmentEditsWithGlobalIds(a,l,u),m="addAttachments"in f?{globalIdUsed:!0}:void 0;return void await i(l,f,m)}const{addFeatureResults:d}=await i(l,{addFeatures:a}),h=o._getAddAttachmentsData(a,d,l,u);await s(l,h)}});return o._set("steps",this._createWorkflowSteps(o,n)),o}_fadeExistingFeatures(t){if("effect"in t){const n=t.effect;return t.effect="saturate(0.6) opacity(0.8)",lc(()=>t.effect=n)}const e=t.opacity;return t.opacity=.7,lc(()=>t.opacity=e)}_highlight(t){const e=this.data.viewModel.view;e.type==="3d"&&this._highlightHandles.set(t,e.highlight(t))}_removeHighlight(t){Bi(this._highlightHandles.get(t)),this._highlightHandles.delete(t)}async _startCreating(t){return this.createFeatureState="create-new",XC(this.data.viewModel.sketchViewModel,this.data.creationInfo,t)}async _startUpdating(t,e){var c;const{featureFormViewModel:n,layerInfos:i,sketchViewModel:s,view:o}=this.data.viewModel,r=this.data.creationInfo.layer,a=(c=_T(i,r))==null?void 0:c.formTemplate,l=o.spatialReference;return n.set({arcadeEditType:"INSERT",feature:t,formTemplate:a,spatialReference:l,view:o}),Bi(this._featureFormHandle),this._featureFormHandle=AS([n.on("value-change",async()=>{t.attributes=n.getValues(),await Qu(t,e)}),s.on(["update","undo","redo"],u=>{(u.type==="undo"||u.type==="redo"||u.type==="update"&&q(u.toolEventInfo)&&o4(u.toolEventInfo.type))&&n.notifyFeatureGeometryChanged()})]),this._removeHighlight(t),this.createFeatureState="update-pending",this._visualVariableAttributes=L_(t),jm(s,t,r,this._visualVariableAttributes,e)}static _createWorkflowSteps(t,e="awaiting-feature-creation-info"){const{data:n,handles:i}=t;let s=null,o=!0;const r=new Map,a=CT(["awaiting-feature-creation-info","creating-features","adding-attachment","editing-attachment"],e,{"awaiting-feature-creation-info":()=>({id:"awaiting-feature-creation-info",async setUp(){n.creationInfo=null,i.add(n.viewModel.featureTemplatesViewModel.on("select",({item:l})=>{n.creationInfo={layer:l.layer,template:l.template},n.viewModel.activeWorkflow.next()}),this.id)},async tearDown(){i.remove(this.id)}}),"creating-features":()=>({id:"creating-features",async setUp(){if(i.has(this.id))return;const l=n.viewModel.view,c=n.viewModel.sketchViewModel;o=c.updateOnGraphicClick,c.updateOnGraphicClick=!1,t._lastActiveGraphics=[],t._featureFormHandle=Bi(t._featureFormHandle),t._visualVariableAttributes={rotation:null,size:null};const u=l.type==="2d"?t._fadeExistingFeatures(n.creationInfo.layer):null,d=c.on("create",async w=>{if(w.state==="cancel"){if(t._preventDefaultActionOnCancel)return void(t._preventDefaultActionOnCancel=!1);if(t._lastActiveGraphics.length<1)return t._startCreating(r);const S=t._lastActiveGraphics.pop();return t._startUpdating(S,r)}if(w.state==="complete")return t._startUpdating(w.graphic,r)}),h=c.on("update",async w=>{const S=w.graphics[0];if(w.state==="complete"){if(S!==s&&(t._lastActiveGraphics.push(S),t._highlight(S)),s=null,n.viewModel.attachmentsViewModel.mode!=="add"&&n.viewModel.attachmentsViewModel.mode!=="edit"||n.viewModel.activeWorkflow.previous(),w.aborted&&t._preventDefaultActionOnCancel)return void(t._preventDefaultActionOnCancel=!1);const k=l.cursor;return l.cursor="progress",i.add([lc(()=>l.cursor=k),l.on("click",A=>A.preventDefault())],c0),na(()=>!n.viewModel.featureFormViewModel.updating).then(()=>{i.remove(c0),t._startCreating(r)})}if(w.state==="start"){t._removeHighlight(S);const k=n.viewModel.attachmentsViewModel;k.mode!=="add"&&k.mode!=="edit"||n.viewModel.activeWorkflow.previous(),k.fileInfos.removeAll(),k.graphic=S,k.mode="view",(t._attachmentFileInfos.get(S)||[]).forEach(({file:A,form:$})=>k.addFile(A,$))}await wT(l,S,w,t._visualVariableAttributes,r);const E=S.attributes;if(q(t._visualVariableAttributes.rotation)){const{field:k}=t._visualVariableAttributes.rotation;n.viewModel.featureFormViewModel.setValue(k,E[k])}if(q(t._visualVariableAttributes.size)){const{field:k}=t._visualVariableAttributes.size;n.viewModel.featureFormViewModel.setValue(k,E[k])}}),f=c.on("delete",async w=>{const S=w.graphics[0];V0(t._lastActiveGraphics,S),s=S});let m=null;const g=ge(()=>{const w=c.snappingOptions.featureSources.find(S=>S.layer===n.creationInfo.layer);return{hasFeatureLayerSource:!!w,enabled:(w==null?void 0:w.enabled)??!1}},({hasFeatureLayerSource:w,enabled:S})=>{const E=c.snappingOptions.featureSources;w?(ke(m)&&(m=new yT({layer:c.layer,enabled:S}),E.add(m)),m.enabled=S):(q(m)&&E.remove(m),m=sn(m))},us),y=l.on("immediate-click",async w=>{const{results:S}=await l.hitTest(w,{include:c.layer}),E=S.find(k=>k.type==="graphic");if(E){const k=E.graphic;if(c.activeTool==="transform"||c.activeTool==="reshape"){if(c.updateGraphics.getItemAt(0)===k)return;await t.updatePendingFeature(k,r)}}}),_=ge(()=>n.viewModel.attachmentsViewModel.mode,w=>{w==="add"&&n.viewModel.activeWorkflow.go("adding-attachment"),w==="edit"&&n.viewModel.activeWorkflow.go("editing-attachment")});await t._startCreating(r);const C={remove:()=>{Bi(t._featureFormHandle),d.remove(),h.remove(),f.remove(),g.remove(),q(m)&&c.snappingOptions.featureSources.remove(m),m=sn(m),c.cancel(),y.remove(),_.remove(),Bi(u)}};i.add(C,this.id)},async tearDown(l){l.cancelled&&(n.viewModel.sketchViewModel.layer.removeAll(),i.remove([this.id,c0]),n.viewModel.attachmentsViewModel.fileInfos.removeAll(),t._attachmentFileInfos.clear(),n.viewModel.sketchViewModel.updateOnGraphicClick=o)}}),"adding-attachment":()=>({id:"adding-attachment",parent:"creating-features",async setUp(){},async tearDown(){const{graphic:l,fileInfos:c}=n.viewModel.attachmentsViewModel;t._attachmentFileInfos.set(l,c.toArray()),n.viewModel.attachmentsViewModel.mode="view"}}),"editing-attachment":()=>({id:"editing-attachment",parent:"creating-features",async setUp(){},async tearDown(){const{graphic:l,fileInfos:c}=n.viewModel.attachmentsViewModel;t._attachmentFileInfos.set(l,c.toArray()),n.viewModel.attachmentsViewModel.mode="view"}})});return s4(n,a)}_getAddAttachmentsData(t,e,n,i){const s=[];return e.forEach((o,r)=>{if(!o.error){const a=t[r],l=i.get(a)||[];a.attributes[n.objectIdField]=o.objectId,l.forEach(({form:c})=>s.push({feature:a,attachment:c}))}}),s}_getAttachmentEditsWithGlobalIds(t,e,n){const i=[];return t.forEach((s,o)=>{const r=n.get(s)||[];let a=s.attributes[e.globalIdField];ke(a)&&(a=II(),t[o].attributes[e.globalIdField]=a),r.forEach(({file:l})=>i.push({feature:s,attachment:{globalId:II(),data:l}}))}),i.length?{addFeatures:t,addAttachments:i}:{addFeatures:t}}};JC=QC=v([Ae("esri.widgets.Editor.CreateFeaturesWorkflow")],JC);const yTe=JC;let Dd=class extends dt{constructor(e){super(e),this.creationInfo=null,this.edits=null,this.viewModel=null}};v([b()],Dd.prototype,"creationInfo",void 0),v([b()],Dd.prototype,"edits",void 0),v([b()],Dd.prototype,"viewModel",void 0),Dd=v([Ae("esri.widgets.Editor.CreateWorkflowData")],Dd);const bTe=Dd;function iv(t){return ke(t)?null:JSON.stringify(t)}let Xl=class extends Li(dt){constructor(e){super(e),this._baselineAttributesJSON=null,this._baselineGeometryJSON=null,this.feature=null}get attributesModified(){const{_baselineAttributesJSON:e,feature:n}=this;return!(!n||e===iv(n.attributes))}get geometryModified(){const{_baselineGeometryJSON:e,feature:n}=this;return!(!n||e===iv(n.geometry))}get modified(){return this.attributesModified||this.geometryModified}trackChanges(){this.feature&&(this._baselineAttributesJSON=iv(this.feature.attributes),this._baselineGeometryJSON=iv(this.feature.geometry),this.notifyChange("attributesModified"),this.notifyChange("geometryModified"))}updateAttributes(e){this.feature.attributes=e,this.notifyChange("attributesModified")}updateGeometry(e){this.feature.geometry=e,this.notifyChange("geometryModified")}};v([b()],Xl.prototype,"attributesModified",null),v([b()],Xl.prototype,"feature",void 0),v([b()],Xl.prototype,"geometryModified",null),v([b()],Xl.prototype,"modified",null),Xl=v([Ae("esri.widgets.Editor.Edits")],Xl);var eS;let tS=eS=class extends bT{constructor(t){super(t),this.type="create"}static create(t,e,n){const i=new eS({data:new bTe({edits:new Xl,viewModel:t}),onCommit:async s=>{await n(s.creationInfo.layer,{addFeatures:[s.edits.feature]})}});return i._set("steps",this._createWorkflowSteps(i,e)),i}static _createWorkflowSteps(t,e="awaiting-feature-creation-info"){const{data:n,handles:i}=t,s=new Map,o=CT(["awaiting-feature-creation-info","awaiting-feature-to-create","editing-new-feature","adding-attachment","editing-attachment"],e,{"awaiting-feature-creation-info":()=>({id:"awaiting-feature-creation-info",async setUp(){n.creationInfo=null,n.edits.feature=null,n.viewModel.featureTemplatesViewModel.select(null),i.add(n.viewModel.featureTemplatesViewModel.on("select",({item:r})=>{n.creationInfo={layer:r.layer,template:r.template},n.viewModel.activeWorkflow.next()}),this.id)},async tearDown(){i.remove(this.id)}}),"awaiting-feature-to-create":()=>({id:"awaiting-feature-to-create",async setUp(){i.add(await aTe(n.viewModel.sketchViewModel,n.creationInfo,r=>{n.edits.feature=r,n.viewModel.activeWorkflow.next()},s),this.id)},async tearDown(){i.remove(this.id)}}),"editing-new-feature":()=>({id:"editing-new-feature",async setUp(){var m;const r=n.edits.feature,a=r.sourceLayer,l=n.viewModel,c=l.sketchViewModel,u=(m=_T(l.layerInfos,a))==null?void 0:m.formTemplate,{spatialReference:d}=l.view;l.featureFormViewModel.set({arcadeEditType:"INSERT",feature:r,formTemplate:u,spatialReference:d}),c.allowDeleteKey=!1;const h=L_(r);await jm(c,r,a,h,s);const f=c.on("update",async g=>{const y=g.graphics[0];if(g.state==="complete")return jm(c,y,a,h,s);await wT(c.view,y,g,h,s);const _=y.attributes;if(q(h.rotation)){const{field:C}=h.rotation;l.featureFormViewModel.setValue(C,_[C])}if(q(h.size)){const{field:C}=h.size;l.featureFormViewModel.setValue(C,_[C])}});i.add([n.viewModel.featureFormViewModel.on("value-change",async()=>{n.edits.updateAttributes(n.viewModel.featureFormViewModel.getValues()),r.attributes=n.edits.feature.attributes,c.view.type==="3d"&&await Qu(r,s)}),f,ge(()=>n.viewModel.attachmentsViewModel.mode,g=>{g==="add"&&n.viewModel.activeWorkflow.go("adding-attachment"),g==="edit"&&n.viewModel.activeWorkflow.go("editing-attachment")})],this.id)},async tearDown(r){r.cancelled&&n.viewModel.sketchViewModel.layer.removeAll(),i.remove(this.id)}}),"adding-attachment":()=>({id:"adding-attachment",parent:"editing-new-feature",async setUp(){},async tearDown(){n.viewModel.attachmentsViewModel.mode="view"}}),"editing-attachment":()=>({id:"editing-attachment",parent:"editing-new-feature",async setUp(){},async tearDown(){n.viewModel.attachmentsViewModel.mode="view"}})});return s4(n,o)}};tS=eS=v([Ae("esri.widgets.Editor.CreateWorkflow")],tS);const _Te=tS;let ru=class extends dt{constructor(e){super(e),this.candidates=null,this.editableItem=null,this.edits=null,this.viewModel=null}};v([b()],ru.prototype,"candidates",void 0),v([b()],ru.prototype,"editableItem",void 0),v([b()],ru.prototype,"edits",void 0),v([b()],ru.prototype,"viewModel",void 0),ru=v([Ae("esri.widgets.Editor.UpdateWorkflowData")],ru);const wTe=ru;var nS;const VA="candidate-highlight";let iS=nS=class extends bT{constructor(t){super(t),this.type="update"}static create(t,e,n){const i=new nS({data:new wTe({edits:new Xl,viewModel:t}),onCommit:async s=>{const o=s.edits.feature,r=o.sourceLayer,a=o.clone();if(!s.edits.attributesModified){const{objectIdField:l}=r;a.attributes={[l]:o.getAttribute(l)}}s.edits.geometryModified||(a.geometry=null),await n(r,{updateFeatures:[a]})}});return i._set("steps",this._createWorkflowSteps(i,e)),i}highlight(t){const{data:{viewModel:{view:e}}}=this,n=t&&e.allLayerViews.items.find(({layer:i})=>i===t.layer);OC(n)&&this.handles.add(n.highlight(t),VA)}unhighlight(){this.handles.remove(VA)}static _createWorkflowSteps(t,e="awaiting-feature-to-update"){const{data:n,handles:i}=t,s=new Map;return CT(["awaiting-feature-to-update","awaiting-update-feature-candidate","editing-existing-feature","adding-attachment","editing-attachment"],e,{"awaiting-feature-to-update":()=>({id:"awaiting-feature-to-update",async setUp(){const{spinnerViewModel:o,view:r}=n.viewModel;let a=null;i.add({remove(){a&&(a.abort(),a=null)}},this.id),n.edits.feature=null;const l=r.on("immediate-click",c=>{o.location=c.mapPoint,o.visible=!0,a&&a.abort();const{editableItems:u}=n.viewModel;a=new AbortController,new Promise((d,h)=>{$y(a.signal,()=>h(Op())),d(dTe(u,r,c,a.signal))}).then(d=>{if(xs(a),n.candidates=d.reduce((h,f)=>f.error?h:[...h,...f.value],[]),n.viewModel.spinnerViewModel.visible=n.candidates.length===1,n.candidates.length!==0)if(n.candidates.length===1){const h=n.candidates[0];n.edits.feature=h,n.viewModel.activeWorkflow.go("editing-existing-feature").catch(()=>{}).then(()=>n.viewModel.spinnerViewModel.visible=!1)}else n.viewModel.activeWorkflow.next()})});r.focus(),i.add(l,this.id)},async tearDown(){i.remove(this.id)}}),"awaiting-update-feature-candidate":()=>({id:"awaiting-update-feature-candidate",async setUp(){const{edits:o}=n;o.feature=null,i.add(ge(()=>o.feature,r=>{t.unhighlight(),t.highlight(r)}),this.id)},async tearDown(){t.unhighlight(),i.remove(this.id)}}),"editing-existing-feature":()=>({id:"editing-existing-feature",async setUp(){var k;if(i.has("editing-existing-feature"))return;const o=n.edits.feature,{attachmentsViewModel:r,editableItems:a,featureFormViewModel:l,layerInfos:c,sketchViewModel:u,view:d}=n.viewModel;n.editableItem=a.find(A=>A.layer===o.layer);const h=new AbortController;i.add({remove:()=>h.abort()},this.id);const f=d.whenLayerView(o.layer),m=pTe(o,d,h.signal),g=await f,y=await m;if(OS(h))return;n.edits.updateGeometry(y.geometry),n.edits.updateAttributes(y.attributes),n.edits.trackChanges(),r.set({graphic:y,mode:"view"});const _=y.sourceLayer,C=(k=_T(c,_))==null?void 0:k.formTemplate,w=d.spatialReference;l.set({arcadeEditType:"UPDATE",feature:y,formTemplate:C,spatialReference:w,view:d});const S="createInteractiveEditSession"in g?g.createInteractiveEditSession(o):null,E=[l.on("value-change",A=>{n.edits.updateAttributes(l.getValues()),y.attributes=n.edits.feature.attributes,S&&S.setAttribute(A.fieldName,A.value)}),ge(()=>r.mode,A=>{A==="add"&&n.viewModel.activeWorkflow.go("adding-attachment"),A==="edit"&&n.viewModel.activeWorkflow.go("editing-attachment")})];if(S&&(E.push(lc(()=>S.rollback())),i.add(lc(()=>S.commit()),t._handleKeys.afterCommit)),n.editableItem.geometryUpdatesEnabled){u.allowDeleteKey=!1;const A=L_(y),{interactive:$,visual:L}=await mTe(y,A,u,d,({geometry:O,attributes:B},V)=>{if(q(A.rotation)){const{field:P}=A.rotation;l.setValue(P,B[P])}if(q(A.size)){const{field:P}=A.size;l.setValue(P,B[P])}n.edits.updateAttributes(B),n.edits.updateGeometry(O),l.feature.geometry=O,(V.type==="undo"||V.type==="redo"||V.type==="update"&&q(V.toolEventInfo)&&o4(V.toolEventInfo.type))&&l.notifyFeatureGeometryChanged()},s);E.push($,L),i.add($,t._handleKeys.beforeCommit),i.add(L,t._handleKeys.afterCommit)}else t.highlight(y);i.add(E,this.id)},async tearDown({cancelled:o}){o&&(t.unhighlight(),i.remove(this.id))}}),"adding-attachment":()=>({id:"adding-attachment",parent:"editing-existing-feature",async setUp(){},async tearDown(){n.viewModel.attachmentsViewModel.mode="view"}}),"editing-attachment":()=>({id:"editing-attachment",parent:"editing-existing-feature",async setUp(){},async tearDown(){n.viewModel.attachmentsViewModel.mode="view"}})})}};iS=nS=v([Ae("esri.widgets.Editor.UpdateWorkflow")],iS);const CTe=iS;function u0(t){switch(t){case mn.SUPPORTED:break;case mn.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case mn.GEOMETRY_MISSING:return"no geometry";case mn.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case mn.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case mn.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}var mn;(function(t){t[t.SUPPORTED=0]="SUPPORTED",t[t.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",t[t.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",t[t.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",t[t.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",t[t.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(mn||(mn={}));function STe(t){var e;if(((e=t.layer)==null?void 0:e.type)!=="graphics")return mn.GRAPHICS_LAYER_MISSING;if(ke(t.geometry))return mn.GEOMETRY_MISSING;switch(t.geometry.type){case"polygon":case"point":case"polyline":case"mesh":break;default:return mn.GEOMETRY_TYPE_UNSUPPORTED}return JS(t)!=="on-the-ground"&&eE(t)?mn.ELEVATION_MODE_UNSUPPORTED:mn.SUPPORTED}function r4(t){if(!t)return null;if(o8(t)&&t.wkid){const e=x8[t.wkid];if(e)return e}if(t.wkt){const e=ETe(t.wkt);if(e)return e}return null}function ETe(t){const e=M8.exec(t);if(!e||e.length!==2)return null;const n=e[1].split(",");if(!n||n.length<3)return null;const i=parseFloat(n[1]),s=parseFloat(n[2]);return isNaN(i)||isNaN(s)?null:{a:i,f:s===0?0:1/s}}function O_(t){const e=r4(t??yc.WGS84);if(kTe(e))return e;const n=e.a*(1-e.f);return Object.assign(e,{b:n,eSq:1-(n/e.a)**2,radius:(2*e.a+n)/3,densificationRatio:1e4/((2*e.a+n)/3)})}function kTe(t){return t!=null&&"b"in t&&"eSq"in t&&"radius"in t}function sv(t,e,n){const{a:i,eSq:s}=O_(n),o=Math.sqrt(s),r=Math.sin(e[1]*Ys),a=i*e[0]*Ys;let l;return s>0?l=i*((1-s)*(r/(1-s*(r*r))-1/(2*o)*Math.log((1-o*r)/(1+o*r))))*.5:l=i*r,t[0]=a,t[1]=l,t}function P_(t){return r4(t)!==null}function XVe(t,e="square-meters"){if(t.some(r=>!P_(r.spatialReference)))throw new Ue("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const n=[];for(let r=0;r<t.length;r++){const a=t[r],l=a.spatialReference,{radius:c,densificationRatio:u}=O_(l),d=c*u;n.push(ITe(a,d))}const i=[],s=[0,0],o=[0,0];for(let r=0;r<n.length;r++){const{rings:a,spatialReference:l}=n[r];let c=0;for(let u=0;u<a.length;u++){const d=a[u];sv(s,d[0],l),sv(o,d[d.length-1],l);let h=o[0]*s[1]-s[0]*o[1];for(let f=0;f<d.length-1;f++)sv(s,d[f+1],l),sv(o,d[f],l),h+=o[0]*s[1]-s[0]*o[1];c+=h}c=Ds(c,"square-meters",e),i.push(c/-2)}return i}function TTe(t,e="meters"){if(!t)throw new Ue("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(t.some(i=>!P_(i.spatialReference)))throw new Ue("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const n=[];for(let i=0;i<t.length;i++){const s=t[i],{spatialReference:o}=s,r=s.type==="polyline"?s.paths:s.rings;let a=0;for(let l=0;l<r.length;l++){const c=r[l];let u=0;for(let d=1;d<c.length;d++){const h=c[d-1][0],f=c[d][0],m=c[d-1][1],g=c[d][1];if(m!==g||h!==f){const y=new a4;l4(y,[h,m],[f,g],o),u+=y.distance}}a+=u}a=Ds(a,"meters",e),n.push(a)}return n}function ITe(t,e){if(t.type!=="polyline"&&t.type!=="polygon")throw new Ue("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:n}=t;if(!P_(n))throw new Ue("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const i=t.type==="polyline"?t.paths:t.rings,s=[],o=[0,0],r=new a4;for(const a of i){const l=[];s.push(l),l.push([a[0][0],a[0][1]]);let c,u,d=a[0][0],h=a[0][1];for(let f=0;f<a.length-1;f++){if(c=a[f+1][0],u=a[f+1][1],d===c&&h===u)continue;const m=[d,h];l4(r,[d,h],[c,u],n);const{azimuth:g,distance:y}=r,_=y/e;if(_>1){for(let C=1;C<=_-1;C++)vy(o,m,g,C*e,n),l.push(o.slice(0));vy(o,m,g,(y+Math.floor(_-1)*e)/2,n),l.push(o.slice(0))}vy(o,m,g,y,n),l.push(o.slice(0)),d=o[0],h=o[1]}}return t.type==="polyline"?new up({paths:s,spatialReference:n}):new cp({rings:s,spatialReference:n})}let a4=class{constructor(e=0,n,i){this.distance=e,this.azimuth=n,this.reverseAzimuth=i}};function vy(t,e,n,i,s){const o=e[0],r=e[1],a=o*Ys,l=r*Ys,c=(n??0)*Ys,{a:u,b:d,f:h}=O_(s),f=Math.sin(c),m=Math.cos(c),g=(1-h)*Math.tan(l),y=1/Math.sqrt(1+g*g),_=g*y,C=Math.atan2(g,m),w=y*f,S=w*w,E=1-S,k=E*(u*u-d*d)/(d*d),A=1+k/16384*(4096+k*(k*(320-175*k)-768)),$=k/1024*(256+k*(k*(74-47*k)-128));let L,O,B,V,P=i/(d*A),z=2*Math.PI;for(;Math.abs(P-z)>1e-12;)B=Math.cos(2*C+P),L=Math.sin(P),O=Math.cos(P),V=$*L*(B+$/4*(O*(2*B*B-1)-$/6*B*(4*L*L-3)*(4*B*B-3))),z=P,P=i/(d*A)+V;const U=_*L-y*O*m,W=Math.atan2(_*O+y*L*m,(1-h)*Math.sqrt(S+U*U)),R=Math.atan2(L*f,y*O-_*L*m),D=h/16*E*(4+h*(4-3*E)),N=W/Ys,K=(a+(R-(1-D)*h*w*(P+D*L*(B+D*O*(2*B*B-1)))))/Ys;return t[0]=K,t[1]=N,t}function l4(t,e,n,i){const s=e[0]*Ys,o=e[1]*Ys,r=n[0]*Ys,a=n[1]*Ys,{a:l,b:c,f:u,radius:d}=O_(i),h=r-s,f=Math.atan((1-u)*Math.tan(o)),m=Math.atan((1-u)*Math.tan(a)),g=Math.sin(f),y=Math.cos(f),_=Math.sin(m),C=Math.cos(m);let w,S,E,k,A,$,L,O,B,V,P=1e3,z=h;do{if(L=Math.sin(z),O=Math.cos(z),E=Math.sqrt(C*L*(C*L)+(y*_-g*C*O)*(y*_-g*C*O)),E===0)return t.distance=0,t.azimuth=void 0,t.reverseAzimuth=void 0,t;A=g*_+y*C*O,$=Math.atan2(E,A),B=y*C*L/E,S=1-B*B,k=A-2*g*_/S,isNaN(k)&&(k=0),V=u/16*S*(4+u*(4-3*S)),w=z,z=h+(1-V)*u*B*($+V*E*(k+V*A*(2*k*k-1)))}while(Math.abs(z-w)>1e-12&&--P>0);if(P===0){const K=d,ie=Math.acos(Math.sin(o)*Math.sin(a)+Math.cos(o)*Math.cos(a)*Math.cos(r-s))*K,Y=r-s,ne=Math.sin(Y)*Math.cos(a),we=Math.cos(o)*Math.sin(a)-Math.sin(o)*Math.cos(a)*Math.cos(Y),Se=Math.atan2(ne,we);return t.azimuth=Se/Ys,t.distance=ie,t.reverseAzimuth=void 0,t}const U=S*(l*l-c*c)/(c*c),W=U/1024*(256+U*(U*(74-47*U)-128)),R=c*(1+U/16384*(4096+U*(U*(320-175*U)-768)))*($-W*E*(k+W/4*(A*(2*k*k-1)-W/6*k*(4*E*E-3)*(4*k*k-3)))),D=Math.atan2(C*Math.sin(z),y*_-g*C*Math.cos(z)),N=Math.atan2(y*Math.sin(z),y*_*Math.cos(z)-g*C);return t.azimuth=D/Ys,t.distance=R,t.reverseAzimuth=N/Ys,t}var sS;let Hl=sS=class extends cp{constructor(...t){super(...t),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}normalizeCtorArgs(t,e){let n;if(t&&t.center)n=t;else{if(t&&t.rings)return super.normalizeCtorArgs(t,e);n={center:t}}return{...super.normalizeCtorArgs(),...n,...e}}initialize(){const t=this.center,e=this.numberOfPoints;if(this.hasZ=(t==null?void 0:t.hasZ)??!1,this.rings.length!==0||!t)return;const n=Ds(this.radius,this.radiusUnit,"meters"),i=t.spatialReference;let s,o="geographic";if(i.isWebMercator?o="webMercator":((i.wkid&&ic[i.wkid])!=null||i.wkt&&i.wkt.indexOf("PROJCS")===0)&&(o="projected"),this.geodesic){let r;switch(o){case"webMercator":r=HL(t);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":r=t}s=this._createGeodesicCircle(r,n,e),o==="webMercator"&&(s=RS(s))}else{let r;o==="webMercator"||o==="projected"?r=n/this._convert2Meters(1,t.spatialReference):o==="geographic"&&(r=R8(n,"meters",nO(t.spatialReference).radius)),s=this._createPlanarCircle(t,r,e)}this.spatialReference=s.spatialReference,this.addRing(s.rings[0])}clone(){const{center:t,numberOfPoints:e,radius:n,radiusUnit:i,geodesic:s}=this;return new sS({center:t==null?void 0:t.clone(),numberOfPoints:e,radius:n,radiusUnit:i,geodesic:s})}_createGeodesicCircle(t,e,n){let i=0;const s=[];for(;i<360;){const o=[0,0],r=[t.x,t.y];vy(o,r,i,e),this.hasZ&&o.push(t.z),s.push(o),i+=360/n}return s.push(s[0]),new cp(s)}_createPlanarCircle(t,e,n){const i=[],s=2*Math.PI/n;for(let o=0;o<n;++o){const r=s*o,a=[t.x+Math.cos(-r)*e,t.y+Math.sin(-r)*e];this.hasZ&&a.push(t.z),i.push(a)}return i.push(i[0]),new cp({spatialReference:t.spatialReference,rings:[i]})}_convert2Meters(t,e){let n;if(e.wkid&&ic[e.wkid]!=null)n=ic.values[ic[e.wkid]];else{const i=e.wkt,s=i.lastIndexOf(",")+1,o=i.lastIndexOf("]]");n=parseFloat(i.substring(s,o))}return t*n}};v([b({type:Kt})],Hl.prototype,"center",void 0),v([b()],Hl.prototype,"geodesic",void 0),v([b()],Hl.prototype,"numberOfPoints",void 0),v([b()],Hl.prototype,"radius",void 0),v([b()],Hl.prototype,"radiusUnit",void 0),Hl=sS=v([Ae("esri.geometry.Circle")],Hl);const xTe=Hl;function ov(t){return c4(t).result}function JVe(t){return c4(t).geometry}function c4(t){var e;return((e=t.layer)==null?void 0:e.type)!=="graphics"?{result:mn.GRAPHICS_LAYER_MISSING,geometry:null}:ke(t.geometry)?{result:mn.GEOMETRY_MISSING,geometry:null}:JS(t)!=="on-the-ground"&&eE(t)?{result:mn.ELEVATION_MODE_UNSUPPORTED,geometry:null}:t.geometry.type!=="point"&&t.geometry.type!=="polyline"&&(t.geometry.type!=="polygon"||t.geometry instanceof xTe)?{result:mn.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:mn.SUPPORTED,geometry:t.geometry}}function MTe(t){var n;if(((n=t.layer)==null?void 0:n.type)!=="graphics")return mn.GRAPHICS_LAYER_MISSING;if(ke(t.geometry))return mn.GEOMETRY_MISSING;switch(t.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return mn.SUPPORTED;default:return mn.GEOMETRY_TYPE_UNSUPPORTED}const e=q(t.symbol)&&t.symbol.type==="point-3d"&&t.symbol.symbolLayers;return e&&e.length>0&&e.some(i=>i.type==="object")?JS(t)!=="on-the-ground"&&eE(t)?mn.ELEVATION_MODE_UNSUPPORTED:mn.SUPPORTED:mn.SYMBOL_TYPE_UNSUPPORTED}function FA(t,e,n){if(!e||!t||!t.map)return;const{map:i}=t,s=i.layers.find(o=>o===e);s||i.add(e,n),n!=null&&i.layers.reorder(s,n)}function eFe(t,e){return t.allLayerViews.find(n=>{const i=n.layer;return i===e||"sublayers"in i&&q(i.sublayers)&&i.sublayers.includes(e)})}const Mt={redo:"r",undo:"z",center:"Alt",constraint:"Shift",snappingToggle:"Control",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "};let yy=class extends dt{constructor(e){super(e),this.enabled=!1}};v([b({type:Boolean,nonNullable:!0})],yy.prototype,"enabled",void 0),yy=v([Ae("esri.views.interactive.sketch.SketchLabelOptions")],yy);const R_=yy;let Bf=class extends dt{constructor(e){super(e),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};v([b({type:String,nonNullable:!0})],Bf.prototype,"mode",void 0),Bf=v([Ae("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],Bf);let ho=class extends dt{constructor(){super(...arguments),this.distance=!0,this.elevation=!0,this.size=!0,this.scale=!0,this.rotation=!0,this.orientation=!0,this.totalLength=!0,this.area=!0,this.radius=!0}toJSON(){return{distance:this.distance,size:this.size,scale:this.scale,rotation:this.rotation,orientation:this.orientation,totalLength:this.totalLength,area:this.area,radius:this.radius}}};v([b({type:Boolean,nonNullable:!0})],ho.prototype,"distance",void 0),v([b({type:Boolean,nonNullable:!0})],ho.prototype,"elevation",void 0),v([b({type:Boolean,nonNullable:!0})],ho.prototype,"size",void 0),v([b({type:Boolean,nonNullable:!0})],ho.prototype,"scale",void 0),v([b({type:Boolean,nonNullable:!0})],ho.prototype,"rotation",void 0),v([b({type:Boolean,nonNullable:!0})],ho.prototype,"orientation",void 0),v([b({type:Boolean,nonNullable:!0})],ho.prototype,"totalLength",void 0),v([b({type:Boolean,nonNullable:!0})],ho.prototype,"area",void 0),v([b({type:Boolean,nonNullable:!0})],ho.prototype,"radius",void 0),ho=v([Ae("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],ho);let au=class extends dt{constructor(e){super(e),this.enabled=!1,this.elevation=new Bf,this.visibleElements=new ho,this.visualVariables=null}toJSON(){return{enabled:this.enabled,elevation:this.elevation,visibleElements:this.visibleElements}}};v([b({type:Boolean,nonNullable:!0})],au.prototype,"enabled",void 0),v([b({type:Bf,nonNullable:!0})],au.prototype,"elevation",void 0),v([b({type:ho,nonNullable:!0})],au.prototype,"visibleElements",void 0),v([b()],au.prototype,"visualVariables",void 0),au=v([Ae("esri.widgets.Sketch.SketchTooltipOptions")],au);const V_=au;var Wi;(function(t){t[t.FEATURE=1]="FEATURE",t[t.SELF=2]="SELF",t[t.ALL=3]="ALL"})(Wi||(Wi={}));let ar=class extends Ju{constructor(){super(...arguments),this.enabled=!0}};v([b({type:Boolean})],ar.prototype,"enabled",void 0),ar=v([Ae("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],ar);let ei=class extends Ju{constructor(e){super(e),this.lineSnapper=new ar,this.parallelLineSnapper=new ar,this.rightAngleSnapper=new ar,this.rightAngleTriangleSnapper=new ar,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new cn([255,127,0]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5}};v([b({type:ar,constructOnly:!0,nonNullable:!0,json:{write:!0}})],ei.prototype,"lineSnapper",void 0),v([b({type:ar,constructOnly:!0,nonNullable:!0,json:{write:!0}})],ei.prototype,"parallelLineSnapper",void 0),v([b({type:ar,constructOnly:!0,nonNullable:!0,json:{write:!0}})],ei.prototype,"rightAngleSnapper",void 0),v([b({type:ar,constructOnly:!0,nonNullable:!0,json:{write:!0}})],ei.prototype,"rightAngleTriangleSnapper",void 0),v([b({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],ei.prototype,"shortLineThreshold",void 0),v([b({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],ei.prototype,"distance",void 0),v([b({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],ei.prototype,"pointThreshold",void 0),v([b({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],ei.prototype,"intersectionParallelLineThreshold",void 0),v([b({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],ei.prototype,"parallelLineThreshold",void 0),v([b({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],ei.prototype,"touchSensitivityMultiplier",void 0),v([b({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],ei.prototype,"pointOnLineThreshold",void 0),v([b({type:cn,nonNullable:!0})],ei.prototype,"orange",void 0),v([b({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],ei.prototype,"lineHintWidthReference",void 0),v([b({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],ei.prototype,"lineHintWidthTarget",void 0),v([b({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],ei.prototype,"lineHintFadedExtensions",void 0),v([b({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],ei.prototype,"parallelLineHintWidth",void 0),v([b({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],ei.prototype,"parallelLineHintLength",void 0),v([b({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],ei.prototype,"parallelLineHintOffset",void 0),v([b({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],ei.prototype,"rightAngleHintSize",void 0),v([b({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],ei.prototype,"rightAngleHintOutlineSize",void 0),ei=v([Ae("esri.views.interactive.snapping.Settings.Defaults")],ei);const ko=new ei;function fs(t,e){const n=t.length===e.length&&t[0]===e[0]&&t[1]===e[1];switch(t.length){case 2:return n;case 3:return n&&t[2]===e[2];case 4:return n&&t[2]===e[2]&&t[3]===e[3]}return!1}function od(t,e){const n=t.x-e.x,i=t.y-e.y;return n*n+i*i}function $Te(t,e){return Math.sqrt(od(t,e))}function ST(t,e,n){const i=n.toXYZ(t,ATe);e.sort((s,o)=>{const r=n.toXYZ(s.targetPoint,DA),a=sm(r,i),l=n.toXYZ(o.targetPoint,DA);return a-sm(l,i)})}const ATe=ht(),DA=ht();var br;function aFe(t,e){return{point:t.coordinateHelper.vectorToPoint(t.point).toJSON(),distance:t.distance,types:t.types,query:q(e)?e.toJSON():{where:"1=1"}}}function ui(t,e,n,i){const{coordinateHelper:s,elevationInfo:o}=n;if(!s.hasZ()||ke(e)||e.type!=="3d"||ke(t)||XB(o,i))return t;const r=Dp(e,t,s.spatialReference,o,i),a=s.clone(t);return a[2]=r,a}function zr(t,e,n,i=Gn){return{left:ui(t.leftVertex.pos,e,n,i),right:ui(t.rightVertex.pos,e,n,i)}}function lFe(t){return t.createQuery()}(function(t){t[t.TARGET=0]="TARGET",t[t.REFERENCE=1]="REFERENCE",t[t.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(br||(br={}));function d0(t,e){return t[0]*e[1]-t[1]*e[0]}function LTe(t,e,n){const i=Ic(n,e)/Vp(n);return Xm(t,n,i)}function p0(t,e,n,i,s=n){return di(Ep,i,n),di(oS,e,s),LTe(gb,oS,Ep),bO(t,s,gb)}function OTe(t,e,n,i){di(Ep,e,n);const s=i/G0(Ep);return Zr(t,n,Ep,s)}function PTe(t,e){const n=t.start,i=t.end,s=e.start,o=e.end,r=di(Ep,i,n),a=di(VTe,o,s),l=d0(r,a);if(Math.abs(l)<=RTe)return[];const c=di(oS,n,s),u=d0(a,c)/l,d=d0(r,c)/l;if(u>=0){if(d>=0||e.type===Xn.LINE)return[Zr(gb,n,r,u)]}else if(t.type===Xn.LINE&&(d>=0||e.type===Xn.LINE))return[Zr(gb,n,r,u)];return[]}var Xn;(function(t){t[t.RAY=0]="RAY",t[t.LINE=1]="LINE"})(Xn||(Xn={}));const RTe=1e-6,Ep=Jt(),VTe=Jt(),oS=Jt(),gb=Jt();function rS({start:t,end:e,type:n},i,s){const o=[],r=i,a=di(Ja,e,t),l=di(el,t,r),c=Vp(a),u=2*Ic(a,l),d=u*u-4*c*(Vp(l)-s*s);if(d===0){const h=-u/(2*c);(n===pr.PLANE||h>=0)&&o.push(Zr(wo(0,0,i[2]),t,a,h))}else if(d>0){const h=Math.sqrt(d),f=(-u+h)/(2*c);(n===pr.PLANE||f>=0)&&o.push(Zr(wo(0,0,i[2]),t,a,f));const m=(-u-h)/(2*c);(n===pr.PLANE||m>=0)&&o.push(Zr(wo(0,0,i[2]),t,a,m))}return o}function aS(t,e){const n=t.start,i=t.end,s=di(Ja,i,n),o=ia(el,-s[1],s[0],0),r=e.start,a=e.end,l=ds(yg,a,r),c=Hi(l,o),u=ia(f4,n[0],n[1],0),d=ds(m4,u,r),h=Hi(d,o);if(Math.abs(c)<ns)return[];const f=ph(g4,r,l,h/c);if(e.type===Xn.RAY){const m=ds(vb,f,r);if(Hi(m,l)<-ns)return[]}if(t.type===pr.HALF_PLANE){const m=ZS(vb,f,n);if(Ic(m,s)<-ns)return[]}return[om(f)]}function lS(t,e){return cS(qm(F_,e[2],t),e)}function u4(t,e){const i=h4(qm(F_,0,t),qm(BTe,0,e)),s=[];for(const o of i)s.push(kB(o));return s}function d4(t,e){return ET(t,qm(F_,t[2],e))}function FTe(t,e){return p4(qm(F_,t[2],e),t)}function DTe(t,e,n){const i=ia(Ja,t[0],t[1],e[2]),s=dp(el,i,e),o=n/OB(s);return ph(ht(),e,s,o)}function ET(t,{start:e,end:n,type:i}){const s=ds(Ja,t,e),o=ds(el,n,e),r=Hi(s,o)/Hi(o,o);return ph(ht(),e,o,i===Xn.RAY?Math.max(r,0):r)}function p4({start:t,end:e,type:n},i){const s=ds(Ja,i,t),o=ds(el,e,t);if(n===Xn.RAY&&Hi(o,s)<-ns)return QS(t,i);const r=uc(yg,o,s);return CI(r)/CI(o)}function NA({start:t,end:e,type:n},i,s){const o=[];if(Yr(t[2],i[2],ns)&&Yr(e[2],i[2],ns)){const r=t,a=i,l=di(Ja,e,r),c=di(el,r,a),u=Vp(l),d=2*Ic(l,c),h=d*d-4*u*(Vp(c)-s*s);if(h===0){const f=-d/(2*u);(n===Xn.LINE||f>=0)&&o.push(Zr(wo(0,0,i[2]),r,l,f))}else if(h>0){const f=Math.sqrt(h),m=(-d+f)/(2*u);(n===Xn.LINE||m>=0)&&o.push(Zr(wo(0,0,i[2]),r,l,m));const g=(-d-f)/(2*u);(n===Xn.LINE||g>=0)&&o.push(Zr(wo(0,0,i[2]),r,l,g))}}else{const r=ds(Ja,e,t);if(Yr(r[2],0,ns))return o;const a=(i[2]-t[2])/r[2],l=ph(el,t,r,a);if(n===Xn.RAY){const c=ds(yg,l,t);if(Hi(r,c)<-ns)return o}for(const c of uS(i,s,l))o.push(c)}return o}function h4(t,e){const n=t.start,i=t.end,s=e.start,o=e.end,r=ds(Ja,i,n),a=ds(el,o,s),l=ds(yg,s,n),c=uc(f4,r,a),u=Hi(l,c);if(!Yr(u,0,ns))return[];const d=j0(c);if(Yr(d,0,ns))return[];const h=uc(m4,l,a),f=Hi(h,c)/d,m=ph(g4,n,r,f);if(t.type===Xn.RAY){const g=ds(vb,m,n);if(Hi(r,g)<-ns)return[]}if(e.type===Xn.RAY){const g=ds(vb,m,s);if(Hi(a,g)<-ns)return[]}return[om(m)]}function cS({start:t,end:e,type:n},i){const s=ds(Ja,i,t),o=ds(el,e,t),r=uc(yg,o,s);if(j0(r)/j0(o)<ns)switch(n){case Xn.LINE:return[om(i)];case Xn.RAY:return Hi(o,s)<-ns?[]:[om(i)]}return[]}function uS(t,e,n){return Yr(t[2],n[2],ns)&&Yr(sm(n,t),e*e,ns)?[om(n)]:[]}function qm(t,e,{start:n,end:i,type:s}){return ia(t.start,n[0],n[1],e),ia(t.end,i[0],i[1],e),t.type=NTe[s],t}var pr;(function(t){t[t.PLANE=0]="PLANE",t[t.HALF_PLANE=1]="HALF_PLANE"})(pr||(pr={}));const NTe={[pr.PLANE]:Xn.LINE,[pr.HALF_PLANE]:Xn.RAY},ns=1e-6,Ja=ht(),el=ht(),yg=ht(),f4=ht(),m4=ht(),g4=ht(),vb=ht(),F_={start:ht(),end:ht(),type:Xn.LINE},BTe={start:ht(),end:ht(),type:Xn.LINE};let rd=class{constructor(e){this.coordinateHelper=e}intersect(e){return WTe(this,e)}},zTe=class extends rd{constructor(e,n){super(e),this.point=n,this.pointXYZ=e.toXYZ(n)}equals(e){return ip(e)&&fs(this.point,e.point)}check(e){const n=this.coordinateHelper.toXYZ(e,tl);return sm(n,this.pointXYZ)<ko.pointThreshold}closestTo(){return this.coordinateHelper.clone(this.point)}},v4=class extends rd{constructor(e,n,i,s){super(e),this.start=n,this.end=i,this.type=s,this.startXYZ=e.toXYZ(n),this.endXYZ=e.toXYZ(i),this.lineLike={start:this.startXYZ,end:this.endXYZ,type:this.type}}equals(e){return _u(e)&&this.type===e.type&&fs(this.start,e.start)&&fs(this.end,e.end)}check(e){const n=this.coordinateHelper.toXYZ(e,tl);return p4(this.lineLike,n)<ko.pointOnLineThreshold}closestTo(e){const n=this.coordinateHelper,i=n.toXYZ(e,tl),s=ET(i,this.lineLike);return n.fromXYZ(s)}},HTe=class extends v4{constructor(e,n,i){super(e,n,i,Xn.LINE)}},kT=class extends rd{constructor(e,n,i,s){super(e),this.intersection=n,this.first=i,this.second=s}equals(e){return e instanceof kT&&this.first.equals(e.first)&&this.second.equals(e.second)}check(){return!1}closestTo(){return this.coordinateHelper.clone(this.intersection)}},y4=class extends rd{constructor(e,n,i,s){super(e),this.basePoint=n,this.first=i,this.second=s}equals(e){return e instanceof y4&&this.first.equals(e.first)&&this.second.equals(e.second)}check(){return!1}closestTo(e){const n=this.basePoint,i=this.coordinateHelper,s=i.toXYZ(e,tl),o=ia(jTe,n[0],n[1],s[2]);return i.fromXYZ(o)}},b4=class extends rd{constructor(e,n,i){super(e),this.center=n,this.radius=i,this.centerXYZ=e.toXYZ(n)}equals(e){return sp(e)&&this.center[0]===e.center[0]&&this.center[1]===e.center[1]&&this.radius===e.radius}check(){return!1}closestTo(e){const n=this.coordinateHelper,i=n.toXYZ(e,tl),s=DTe(i,this.centerXYZ,this.radius);return s[2]=n.getZ(e,this.centerXYZ[2]),n.fromXYZ(s)}},TT=class extends rd{constructor(e,n,i,s){super(e),this.start=n,this.end=i,this.type=s,this.planeLike={start:n,end:i,type:s}}equals(e){return wu(e)&&this.type===e.type&&fs(this.start,e.start)&&fs(this.end,e.end)}check(e){const n=this.coordinateHelper.toXYZ(e,tl);return FTe(n,this.planeLike)<ko.pointOnLineThreshold}closestTo(e){const n=this.coordinateHelper,i=n.toXYZ(e,tl),s=d4(i,this.planeLike);return n.fromXYZ(s)}closestEndTo(e){const{start:n,end:i}=this;return Math.sign(Ic(di(qTe,i,n),di(KTe,e,n)))>0?i:n}},_4=class extends TT{constructor(e,n,i){super(e,n,i,pr.HALF_PLANE)}},w4=class extends TT{constructor(e,n,i){super(e,n,i,pr.PLANE)}},UTe=class extends rd{constructor(e,n,i,s){super(e),this.start=n,this.end=i,this.getZ=s,this.planeLike={start:n,end:i,type:pr.HALF_PLANE}}equals(e){return Cu(e)&&fs(this.start,e.start)&&fs(this.end,e.end)&&this.getZ===e.getZ}check(e){const n=this.coordinateHelper.toXYZ(e,tl),i=BA(this,n);return sm(n,i)<ko.pointThreshold}closestTo(e){const n=this.coordinateHelper,i=BA(this,n.toXYZ(e,tl));return n.fromXYZ(i)}addIfOnTheGround(e,n){for(const i of n){const s=this.getZ(i[0],i[1],i[2]);q(s)&&Math.abs(i[2]-s)<ns&&(i[2]=s,e.push(i))}}};function BA(t,e){const n=d4(e,t.planeLike),i=t.getZ(e[0],e[1],e[2]);return q(i)&&(n[2]=i),n}function WTe(t,e){let n=[];if(ip(t)){const{pointXYZ:i}=t;_u(e)?n=cS(e.lineLike,i):sp(e)?n=uS(e.centerXYZ,e.radius,i):wu(e)?n=lS(e.planeLike,i):Cu(e)&&(n=Kh(e,t))}else if(_u(t)){const{lineLike:i}=t;ip(e)?n=cS(i,e.pointXYZ):_u(e)?n=h4(i,e.lineLike):sp(e)?n=NA(i,e.centerXYZ,e.radius):wu(e)?n=aS(e.planeLike,i):Cu(e)&&(n=Kh(e,t))}else if(sp(t)){const{centerXYZ:i,radius:s}=t;_u(e)?n=NA(e.lineLike,i,s):ip(e)?n=uS(i,s,e.pointXYZ):wu(e)?n=rS(e.planeLike,i,s):Cu(e)&&(n=Kh(e,t))}else if(wu(t)){const{planeLike:i,coordinateHelper:s}=t;if(wu(e))return u4(i,e.planeLike).map(o=>new y4(s,s.fromXYZ(o),t,e));ip(e)?n=lS(i,e.pointXYZ):_u(e)?n=aS(i,e.lineLike):sp(e)?n=rS(i,e.centerXYZ,e.radius):Cu(e)&&(n=Kh(e,t))}else Cu(t)&&(n=Kh(t,e));return GTe(n,t,e)}function Kh(t,e){const{planeLike:n,getZ:i}=t,s=[];if(ip(e))t.addIfOnTheGround(s,lS(n,e.pointXYZ));else if(_u(e))t.addIfOnTheGround(s,aS(n,e.lineLike));else if(sp(e))t.addIfOnTheGround(s,rS(n,e.centerXYZ,e.radius));else if(wu(e)||Cu(e))for(const[o,r]of u4(n,e.planeLike)){const a=i(o,r,0);q(a)&&s.push(wo(o,r,a))}return s}function GTe(t,e,n){const i=e.coordinateHelper;return t.map(s=>new kT(i,i.fromXYZ(s),e,n))}function ip(t){return t instanceof zTe}function _u(t){return t instanceof v4}function sp(t){return t instanceof b4}function wu(t){return t instanceof TT}function Cu(t){return t instanceof UTe}const tl=ht(),jTe=ht(),qTe=Jt(),KTe=Jt();let kh=class{constructor(e,n,i,s,o){this.coordinateHelper=e,this.targetPoint=n,this.constraint=i,this.elevationInfo=s,this.domain=o}},C4=class extends kh{constructor({coordinateHelper:e,targetPoint:n,objectId:i,constraint:s,elevationInfo:o}){super(e,n,s,o,Wi.FEATURE),this.objectId=i}},bg=class{constructor(e,n){this.elevationInfo=e,this.domain=n}},_r=class extends bg{constructor(e,n,i,s,o=Wi.ALL,r=!0,a=!0){super(s,o),this.type=e,this.lineStart=n,this.lineEnd=i,this.fadeLeft=r,this.fadeRight=a}equals(e){return e instanceof _r&&this.type===e.type&&fs(this.lineStart,e.lineStart)&&fs(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}},YTe=class extends C4{constructor(e){super({...e,constraint:new HTe(e.coordinateHelper,e.edgeStart,e.edgeEnd)})}get hints(){return[new _r(br.REFERENCE,this.constraint.start,this.constraint.end,this.elevationInfo,this.domain)]}},D_=class extends bg{constructor(e,n,i,s,o=Wi.ALL){super(s,o),this.previousVertex=e,this.centerVertex=n,this.nextVertex=i}equals(e){return e instanceof D_&&fs(this.previousVertex,e.previousVertex)&&fs(this.centerVertex,e.centerVertex)&&fs(this.nextVertex,e.nextVertex)}},S4=class extends kh{constructor({coordinateHelper:e,targetPoint:n,constraint:i,previousVertex:s,otherVertex:o,otherVertexType:r,objectId:a,elevationInfo:l}){super(e,n,i,l,Wi.SELF),this.previousVertex=s,this.otherVertex=o,this.otherVertexType=r,this.objectId=a}get hints(){const e=this.previousVertex,n=this.otherVertexType===sh.CENTER?this.otherVertex:this.targetPoint,i=this.otherVertexType===sh.CENTER?this.targetPoint:this.otherVertex,s=this.elevationInfo;return[new _r(br.TARGET,n,i,s,this.domain),new _r(br.REFERENCE,e,n,s,this.domain),new D_(this.previousVertex,n,i,s,this.domain)]}};var sh;(function(t){t[t.NEXT=0]="NEXT",t[t.CENTER=1]="CENTER"})(sh||(sh={}));function zA(t,e,n,i,s=ht()){const o=e.toXYZ(t);return o[2]=Dp(i,o,e.spatialReference,n)||0,i.renderCoordsHelper.toRenderCoords(o,e.spatialReference,s),s}function ZTe(t,e,n,i,s=ht()){const o=sc(dS,t);return o[2]=Dp(i,o,e,n)||0,i.renderCoordsHelper.toRenderCoords(o,e,s),s}function Js(t,e,n,i){return IT(e.toXYZ(t),e.spatialReference,n,i)}function IT(t,e,n,i){return i.type==="2d"?(rv.x=t[0],rv.y=t[1],rv.spatialReference=e,i.toScreen(rv)):(ZTe(t,e,n,i,dS),i.state.camera.projectToScreen(dS,h0),hi(h0[0],h0[1]))}function IFe(t,e,n,i,s,o,r){if(i.mode==="absolute-height")return zA(t,n,i,s,o),void zA(e,n,i,s,r);const a=n.toXYZ(t),l=n.toXYZ(e),c=Dp(s,a,n.spatialReference,i),u=Dp(s,l,n.spatialReference,i),d=(c==null?u:u==null?c:Math.min(c,u))||0;a[2]=d,l[2]=d,s.renderCoordsHelper.toRenderCoords(a,n.spatialReference,o),s.renderCoordsHelper.toRenderCoords(l,n.spatialReference,r)}const rv=new Kt,dS=ht(),h0=Qf();let Ul=class extends Zm{constructor(e){super(e),this.options=null,this._domain=Wi.FEATURE,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}get updating(){return Ym(this.snappingSources,({snappingSource:e})=>e.updating)||this.updatingHandles.updating}get snappingSources(){const e=this._get("snappingSources")||new Map,n=new Map;if(q(this.options)&&q(this.options.featureSources))for(const i of this.options.featureSources.items){const s=i.layer.uid,o=e.get(s);if(o){e.delete(s),n.set(s,o);continue}if(!i.layer.loaded){this.updatingHandles.addPromise(i.layer.load());continue}const r=this._createSourceInfo(i);q(r)&&n.set(s,r)}for(const[,i]of e)i.destroy();return n}initialize(){this.updatingHandles.add(()=>this.snappingSources,()=>this.notifyChange("updating"),_c),q(this.view)&&this.handles.add([this.view.on("layerview-create",e=>this._updateLayerView(e.layer,e.layerView)),this.view.on("layerview-destroy",e=>this._updateLayerView(e.layer,null))])}_updateLayerView(e,n){for(const[,i]of this.snappingSources)i.snappingSource.layerSource.layer===e&&(i.layerView=n)}destroy(){this._set("options",null);for(const[,e]of this.snappingSources)e.destroy()}async fetchCandidates(e,n,i,s){if(!(n&this._domain)||ke(this.options)||!this.options.effectiveFeatureEnabled)return[];const o=[],r=this._computeScreeenSizeDistanceParameters(e,i),a={distance:r,point:e,coordinateHelper:i.coordinateHelper,types:this._types};for(const[,{snappingSource:c,layerView:u}]of this.snappingSources)!c.layerSource.enabled||q(u)&&u.suspended||o.push(c.fetchCandidates(a,s).then(d=>d.filter(h=>!this._candidateIsExcluded(c,h,i.excludeFeature))));const l=(await VL(o)).flat();return this._addRightAngleCandidates(l,e,r,i),xs(s),ST(e,l,i.coordinateHelper),l}_addRightAngleCandidates(e,n,i,s){var d,h,f,m,g,y,_,C;const o=q(s.vertexHandle)?(h=(d=s.vertexHandle.rightEdge)==null?void 0:d.rightVertex)==null?void 0:h.pos:q(s.editGeometryOperations)&&s.editGeometryOperations.data.type==="polygon"?(m=zt((f=s.editGeometryOperations.data.components[0])==null?void 0:f.getFirstVertex()))==null?void 0:m.pos:null,r=q(s.vertexHandle)?(y=(g=s.vertexHandle.leftEdge)==null?void 0:g.leftVertex)==null?void 0:y.pos:q(s.editGeometryOperations)?(C=zt((_=s.editGeometryOperations.data.components[0])==null?void 0:_.getLastVertex()))==null?void 0:C.pos:null,{view:a}=this,l=ui(o,a,s),c=ui(r,a,s),u=e.length;for(let w=0;w<u;w++)this._addRightAngleCandidate(e[w],c,n,i,s,e),this._addRightAngleCandidate(e[w],l,n,i,s,e)}_addRightAngleCandidate(e,n,i,s,o,r){const a=e instanceof YTe,l=a&&_O(e.constraint.start,e.constraint.end);if(ke(n)||!a||l)return;const c=e.constraint.closestTo(n),u=(c[0]-i[0])/s.x,d=(c[1]-i[1])/s.y;if(u*u+d*d<=1){const h=o.coordinateHelper,f=new S4({coordinateHelper:h,targetPoint:c,otherVertex:n,otherVertexType:sh.NEXT,previousVertex:e.constraint.start,constraint:new _4(h,n,c),objectId:e.objectId,elevationInfo:e.elevationInfo});r.push(f)}}_computeScreeenSizeDistanceParameters(e,n){let i=q(this.options)?this.options.distance*(n.pointer==="touch"?this.options.touchSensitivityMultiplier:1):0;return ke(this.view)?{x:i,y:i,z:i,distance:i}:this.view.type==="2d"?(i*=this.view.resolution,{x:i,y:i,z:i,distance:i}):this._computeScreenSizeDistanceParameters3D(e,i,this.view,n)}_computeScreenSizeDistanceParameters3D(e,n,i,s){const{coordinateHelper:o,elevationInfo:r}=s,{spatialReference:a}=o,l=o.hasZ()?Gn:r,c=o.toXYZ(e,QTe);c[2]=Dp(i,c,a,l,Gn),i.renderCoordsHelper.toRenderCoords(c,a,HA);const u=i.state.camera.computeScreenPixelSizeAt(HA),d=u*i.renderCoordsHelper.unitInMeters/i.mapCoordsHelper.unitInMeters,h=n*d,f=IT(c,a,Gn,i),m=f0(f,c,d,0,0,i,s),g=f0(f,c,0,d,0,i,s),y=f0(f,c,0,0,d,i,s);return{x:m===0?0:h/m,y:g===0?0:h/g,z:y===0?0:h/y,distance:u*n}}get _types(){return xI.EDGE|xI.VERTEX}_candidateIsExcluded(e,n,i){if(ke(i))return!1;const s=this._getCandidateObjectId(n);if(ke(s))return!1;const o=e.layerSource.layer;return o.type==="graphics"?i.uid===s:i.sourceLayer===o&&!(!i.attributes||!("objectIdField"in o))&&i.attributes[o.objectIdField]===s}_getCandidateObjectId(e){return e instanceof C4?e.objectId:null}_createSourceInfo(e){const n=this._createFeatureSnappingSourceType(e);if(ke(n))return null;if("loading"in n)return this.updatingHandles.addPromise(n.loading.then(()=>{this.destroyed||this.notifyChange("snappingSources")})),null;const i=q(this.view)?this.view.allLayerViews.find(s=>s.layer===e.layer):null;return new XTe(n.source,i)}_createFeatureSnappingSourceType(e){switch(e.layer.type){case"feature":case"geojson":case"csv":case"oriented-imagery":case"subtype-group":case"wfs":return this._createFeatureSnappingSourceFeatureLayer(e);case"graphics":return this._createFeatureSnappingSourceGraphicsLayer(e);case"map-notes":return this._createFeatureSnappingSourceMapNotesLayer(e);case"scene":case"building-scene":return this._createFeatureSnappingSourceSceneLayer(e)}return null}_createFeatureSnappingSourceSceneLayer(e){const{view:n}=this;if(ke(n)||n.type!=="3d")return null;const i=this._getSourceModule("scene");return q(i.module)?{source:new i.module.SceneLayerSnappingSource({layerSource:e,view:n})}:{loading:i.loader}}_createFeatureSnappingSourceFeatureLayer(e){switch(e.layer.source.type){case"feature-layer":case"oriented-imagery":{const n=this._getSourceModule("featureService");return q(n.module)?{source:new n.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:n.loader}}case"memory":case"csv":case"geojson":case"wfs":{if(e.layer.geometryType==="mesh")return null;const n=this._getSourceModule("featureCollection");return q(n.module)?{source:new n.module.FeatureCollectionSnappingSource({layerSource:e,view:this.view})}:{loading:n.loader}}}return null}_createFeatureSnappingSourceGraphicsLayer(e){const n=this._getSourceModule("graphics");return q(n.module)?{source:new n.module.GraphicsSnappingSource({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:n.loader}}_createFeatureSnappingSourceMapNotesLayer(e){const n=this._getSourceModule("notes");return q(n.module)?{source:new n.module.GraphicsSnappingSource({getGraphicsLayers:()=>q(e.layer.sublayers)?e.layer.sublayers.toArray():[],spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:n.loader}}_getSourceModule(e){const n=this._sourceModules[e];if(ke(n.loader)){const i=this._loadSourceModule(e).then(s=>{n.module=s});return n.loader=i,{module:n.module,loader:i}}return{module:n.module,loader:n.loader}}_loadSourceModule(e){const n=this.updatingHandles;switch(e){case"featureService":return n.addPromise(Fe(()=>import("./FeatureServiceSnappingSource-db6ea17c.js"),["./FeatureServiceSnappingSource-db6ea17c.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./HandleOwner-2edbba46.js","./reactiveUtils-5869e41a.js","./Scheduler-5e6ccc87.js","./SimpleObservable-8e532943.js","./elevationInfoUtils-c3025fae.js","./ElevationInfo-80227ecc.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./TileInfo-c5c8c8d2.js","./aaBoundingRect-b340cf8c.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./vec4f64-939de194.js","./boundedPlane-296928f6.js","./sphere-622880b9.js","./mat4-7dde83b1.js","./byteSizeEstimations-90c5a50d.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./vec2f64-30dc1443.js","./lineSegment-c6f0b9d1.js","./plane-46a8c767.js","./queryEngineUtils-16df41c8.js","./VertexSnappingCandidate-03b1951a.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./enumeration-61a13175.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./WorkerHandle-e4360b21.js","./workers-af024c50.js","./Connection-b591250e.js","./Queue-275a6362.js","./assets-cd44347b.js","./intl-7d39a8c0.js","./messages-28bf3b89.js","./Basemap-59ed9516.js","./deprecate-0d93948c.js","./loadAll-01cdf0a9.js","./asyncUtils-087555fc.js","./PortalItem-e4ba4b94.js","./writeUtils-3bde6e49.js","./layerUtils-68eea656.js","./compilerUtils-fefa73ae.js","./CollectionFlattener-f43a0fce.js","./TablesMixin-55858fba.js","./Layer-cea228f0.js","./Cyclical-078b4564.js","./projection-acd73147.js","./zscale-48bab05e.js","./widget-4abc68df.js","./uuid-73213768.js","./dom-5b7af1bf.js","./executeQueryJSON-29279a46.js","./normalizeUtils-0f537694.js","./query-b7b3a76b.js","./pbfQueryUtils-c922ef32.js","./pbf-8b0546e8.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./queryZScale-3c8de33a.js","./FeatureSet-deb2029d.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./RelationshipQuery-c27267ab.js","./LegendOptions-2e7b3d70.js","./utils-4469bf65.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./ItemCache-bf1028d4.js","./MemCache-1d2f56ee.js","./utils-c81a5c52.js","./jsonUtils-1c5cdf77.js","./UniqueValueRenderer-73d567ad.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./heatmapUtils-3d7c22c5.js","./featureConversionUtils-d2229ed4.js","./TopFeaturesQuery-9aca00bf.js","./FeatureLayer-534ff006.js","./MultiOriginJSONSupport-b8792dfa.js","./LayerFloorInfo-f184c8f5.js","./FeatureLayerBase-c0aa3674.js","./HeightModelInfo-34f16d74.js","./arcgisLayerUrl-bed3cba1.js","./OperationalLayer-9c50475b.js","./editsZScale-12d81957.js","./APIKeyMixin-b6e4f897.js","./ArcGISService-aada3b5d.js","./CustomParametersMixin-a5d06ccc.js","./EditBusLayer-b5dc3689.js","./FeatureReductionLayer-fcaeb34a.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./OrderedLayer-9623e905.js","./PortalLayer-12f4a535.js","./RefreshableLayer-49182ab8.js","./ScaleRangeLayer-c072e266.js","./TemporalLayer-c74d13d4.js","./TimeInfo-f76d6c20.js","./FeatureTemplate-c4496b93.js","./FeatureType-0be9420b.js","./fieldProperties-4207e953.js","./FieldsIndex-02142c8a.js","./versionUtils-fabd8b3a.js","./styleUtils-08eaa4d2.js","./popupUtils-1ecc877c.js","./colorUtils-82440b70.js","./mat2d-d0b91e3e.js","./GraphicsLayer-b332f442.js","./ViewingMode-915d19cb.js","./unitBezier-881ac1eb.js","./vec2-ab9f47bf.js","./mat3-9a8d9db7.js","./mat3f32-d3d088e8.js","./vec2f32-461e65a9.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./capabilities-d08b6e58.js","./context-util-d4c193b5.js","./Subtype-a3103d84.js","./datetime-4f774298.js","./QueryEngineResult-92e13fe4.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./WhereClause-6c9440a1.js","./utils-44a68fd6.js","./json-48e3ea08.js","./Util-289ce3b5.js","./EffectView-dffeb0bc.js","./ExportImageParameters-ba01802d.js","./sublayerUtils-eea48c01.js","./webStyleSymbolUtils-0b165621.js","./devEnvironmentUtils-5002a058.js","./dehydratedFeatures-3dcd65f1.js","./enums-4b2a86a0.js","./quat-ec16a584.js"],import.meta.url));case"featureCollection":return n.addPromise(Fe(()=>import("./FeatureCollectionSnappingSource-35dd135d.js"),["./FeatureCollectionSnappingSource-35dd135d.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./reactiveUtils-5869e41a.js","./elevationInfoUtils-c3025fae.js","./ElevationInfo-80227ecc.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./queryEngineUtils-16df41c8.js","./VertexSnappingCandidate-03b1951a.js","./symbologySnappingCandidates-1313e87e.js","./LRUCache-b9228ca3.js","./MemCache-1d2f56ee.js","./Basemap-59ed9516.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./deprecate-0d93948c.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./loadAll-01cdf0a9.js","./asyncUtils-087555fc.js","./request-24011425.js","./Portal-c6e03126.js","./locale-30120714.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./PortalItem-e4ba4b94.js","./assets-cd44347b.js","./messages-28bf3b89.js","./writeUtils-3bde6e49.js","./layerUtils-68eea656.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./compilerUtils-fefa73ae.js","./enumeration-61a13175.js","./opacityUtils-1333f803.js","./CollectionFlattener-f43a0fce.js","./TablesMixin-55858fba.js","./Layer-cea228f0.js","./Identifiable-093f90a8.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./number-2ab8ca0d.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./screenUtils-90993e16.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./persistableUrlUtils-d0777bec.js","./jsonUtils-c6684c52.js","./Cyclical-078b4564.js","./workers-af024c50.js","./Connection-b591250e.js","./Queue-275a6362.js","./intl-7d39a8c0.js","./projection-acd73147.js","./mat4-7dde83b1.js","./zscale-48bab05e.js","./TileInfo-c5c8c8d2.js","./widget-4abc68df.js","./uuid-73213768.js","./dom-5b7af1bf.js","./HandleOwner-2edbba46.js","./byteSizeEstimations-90c5a50d.js","./executeQueryJSON-29279a46.js","./normalizeUtils-0f537694.js","./query-b7b3a76b.js","./pbfQueryUtils-c922ef32.js","./pbf-8b0546e8.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./queryZScale-3c8de33a.js","./FeatureSet-deb2029d.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./RelationshipQuery-c27267ab.js","./LegendOptions-2e7b3d70.js","./utils-4469bf65.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./ItemCache-bf1028d4.js","./utils-c81a5c52.js","./jsonUtils-1c5cdf77.js","./UniqueValueRenderer-73d567ad.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./DictionaryLoader-2a334243.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./featureConversionUtils-d2229ed4.js","./TopFeaturesQuery-9aca00bf.js","./FeatureLayer-534ff006.js","./MultiOriginJSONSupport-b8792dfa.js","./LayerFloorInfo-f184c8f5.js","./FeatureLayerBase-c0aa3674.js","./HeightModelInfo-34f16d74.js","./arcgisLayerUrl-bed3cba1.js","./OperationalLayer-9c50475b.js","./editsZScale-12d81957.js","./APIKeyMixin-b6e4f897.js","./ArcGISService-aada3b5d.js","./CustomParametersMixin-a5d06ccc.js","./EditBusLayer-b5dc3689.js","./FeatureReductionLayer-fcaeb34a.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./OrderedLayer-9623e905.js","./PortalLayer-12f4a535.js","./RefreshableLayer-49182ab8.js","./ScaleRangeLayer-c072e266.js","./TemporalLayer-c74d13d4.js","./TimeInfo-f76d6c20.js","./FeatureTemplate-c4496b93.js","./FeatureType-0be9420b.js","./fieldProperties-4207e953.js","./FieldsIndex-02142c8a.js","./versionUtils-fabd8b3a.js","./styleUtils-08eaa4d2.js","./popupUtils-1ecc877c.js","./colorUtils-82440b70.js","./mat2d-d0b91e3e.js","./Scheduler-5e6ccc87.js","./GraphicsLayer-b332f442.js","./ViewingMode-915d19cb.js","./unitBezier-881ac1eb.js","./vec2-ab9f47bf.js","./vec2f64-30dc1443.js","./mat3-9a8d9db7.js","./mat3f32-d3d088e8.js","./vec2f32-461e65a9.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./capabilities-d08b6e58.js","./context-util-d4c193b5.js","./Subtype-a3103d84.js","./datetime-4f774298.js","./QueryEngineResult-92e13fe4.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./WhereClause-6c9440a1.js","./utils-44a68fd6.js","./json-48e3ea08.js","./Util-289ce3b5.js","./EffectView-dffeb0bc.js","./ExportImageParameters-ba01802d.js","./sublayerUtils-eea48c01.js","./webStyleSymbolUtils-0b165621.js","./devEnvironmentUtils-5002a058.js","./dehydratedFeatures-3dcd65f1.js","./enums-4b2a86a0.js","./plane-46a8c767.js","./sphere-622880b9.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./quat-ec16a584.js"],import.meta.url));case"graphics":case"notes":return n.addPromise(Fe(()=>import("./GraphicsSnappingSource-c0efe118.js"),["./GraphicsSnappingSource-c0efe118.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./asyncUtils-087555fc.js","./HandleOwner-2edbba46.js","./reactiveUtils-5869e41a.js","./Polyline-b571c705.js","./Extent-a1a1de42.js","./projection-acd73147.js","./preload-helper-41c905a7.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./unitUtils-dd6fb8ee.js","./jsonMap-190c5593.js","./SimpleObservable-8e532943.js","./mat4-7dde83b1.js","./assets-cd44347b.js","./request-24011425.js","./aaBoundingRect-b340cf8c.js","./zscale-48bab05e.js","./normalizeUtilsSync-6d84346c.js","./jsonUtils-c6684c52.js","./normalizeUtils-0f537694.js","./geometry-eec1b371.js","./typeUtils-cd52dc20.js","./featureConversionUtils-d2229ed4.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./FeatureStore-5d216b73.js","./Evented-cbf5f368.js","./aaBoundingBox-4a83dbbc.js","./PooledRBush-0bffad50.js","./quickselect-322ec8e1.js","./optimizedFeatureQueryEngineAdapter-be75ae94.js","./centroid-56c5816c.js","./QueryEngine-209cef0c.js","./MemCache-1d2f56ee.js","./QueryEngineResult-92e13fe4.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./colorRamps-8d7efc14.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./enumeration-61a13175.js","./Symbol-8266348e.js","./ItemCache-bf1028d4.js","./WhereClause-6c9440a1.js","./utils-44a68fd6.js","./json-48e3ea08.js","./fieldUtils-b2df74c4.js","./arcadeOnDemand-a976a73c.js","./QueryEngineCapabilities-42e44ded.js","./timeSupport-de4019f0.js","./FieldsIndex-02142c8a.js","./Scheduler-5e6ccc87.js","./elevationInfoUtils-c3025fae.js","./ElevationInfo-80227ecc.js","./lengthUtils-92fed992.js","./utils-4469bf65.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./persistableUrlUtils-d0777bec.js","./Collection-7c37b74e.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./locale-30120714.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./Clonable-9b34e760.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./utils-c81a5c52.js","./queryEngineUtils-16df41c8.js","./VertexSnappingCandidate-03b1951a.js","./symbologySnappingCandidates-1313e87e.js","./LRUCache-b9228ca3.js","./Basemap-59ed9516.js","./deprecate-0d93948c.js","./loadAll-01cdf0a9.js","./PortalItem-e4ba4b94.js","./messages-28bf3b89.js","./writeUtils-3bde6e49.js","./layerUtils-68eea656.js","./compilerUtils-fefa73ae.js","./CollectionFlattener-f43a0fce.js","./TablesMixin-55858fba.js","./Layer-cea228f0.js","./Identifiable-093f90a8.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./number-2ab8ca0d.js","./Cyclical-078b4564.js","./workers-af024c50.js","./Connection-b591250e.js","./Queue-275a6362.js","./intl-7d39a8c0.js","./TileInfo-c5c8c8d2.js","./widget-4abc68df.js","./uuid-73213768.js","./dom-5b7af1bf.js","./byteSizeEstimations-90c5a50d.js","./executeQueryJSON-29279a46.js","./query-b7b3a76b.js","./pbfQueryUtils-c922ef32.js","./pbf-8b0546e8.js","./queryZScale-3c8de33a.js","./FeatureSet-deb2029d.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./RelationshipQuery-c27267ab.js","./LegendOptions-2e7b3d70.js","./jsonUtils-1c5cdf77.js","./UniqueValueRenderer-73d567ad.js","./diffUtils-8a8cb5bc.js","./sizeVariableUtils-d4870b0d.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./DictionaryLoader-2a334243.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./TopFeaturesQuery-9aca00bf.js","./FeatureLayer-534ff006.js","./MultiOriginJSONSupport-b8792dfa.js","./LayerFloorInfo-f184c8f5.js","./FeatureLayerBase-c0aa3674.js","./HeightModelInfo-34f16d74.js","./arcgisLayerUrl-bed3cba1.js","./OperationalLayer-9c50475b.js","./editsZScale-12d81957.js","./APIKeyMixin-b6e4f897.js","./ArcGISService-aada3b5d.js","./CustomParametersMixin-a5d06ccc.js","./EditBusLayer-b5dc3689.js","./FeatureReductionLayer-fcaeb34a.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./OrderedLayer-9623e905.js","./PortalLayer-12f4a535.js","./RefreshableLayer-49182ab8.js","./ScaleRangeLayer-c072e266.js","./TemporalLayer-c74d13d4.js","./TimeInfo-f76d6c20.js","./FeatureTemplate-c4496b93.js","./FeatureType-0be9420b.js","./fieldProperties-4207e953.js","./versionUtils-fabd8b3a.js","./styleUtils-08eaa4d2.js","./popupUtils-1ecc877c.js","./colorUtils-82440b70.js","./mat2d-d0b91e3e.js","./GraphicsLayer-b332f442.js","./ViewingMode-915d19cb.js","./unitBezier-881ac1eb.js","./vec2-ab9f47bf.js","./vec2f64-30dc1443.js","./mat3-9a8d9db7.js","./mat3f32-d3d088e8.js","./vec2f32-461e65a9.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./capabilities-d08b6e58.js","./context-util-d4c193b5.js","./Subtype-a3103d84.js","./datetime-4f774298.js","./Util-289ce3b5.js","./EffectView-dffeb0bc.js","./ExportImageParameters-ba01802d.js","./sublayerUtils-eea48c01.js","./webStyleSymbolUtils-0b165621.js","./devEnvironmentUtils-5002a058.js","./dehydratedFeatures-3dcd65f1.js","./enums-4b2a86a0.js","./plane-46a8c767.js","./sphere-622880b9.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./quat-ec16a584.js"],import.meta.url));case"scene":return n.addPromise(Fe(()=>import("./SceneLayerSnappingSource-b115b53f.js"),["./SceneLayerSnappingSource-b115b53f.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./HandleOwner-2edbba46.js","./reactiveUtils-5869e41a.js","./WorkerHandle-e4360b21.js","./workers-af024c50.js","./preload-helper-41c905a7.js","./Connection-b591250e.js","./Queue-275a6362.js","./request-24011425.js","./assets-cd44347b.js","./intl-7d39a8c0.js","./number-2ab8ca0d.js","./jsonMap-190c5593.js","./locale-30120714.js","./messages-28bf3b89.js","./workerHelper-641d0601.js","./BufferView-478024d2.js","./vec2-ab9f47bf.js","./common-c186b691.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./vec4-46a9b36d.js","./InterleavedLayout-b5930508.js","./types-e1c0a5bf.js","./edgeProcessing-5c860c29.js","./deduplicate-d92c3cc2.js","./mathUtils-57aba1ea.js","./VertexAttribute-9c5c630d.js","./glUtil-7aa58841.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./sphere-622880b9.js","./mat4-7dde83b1.js","./vec4f64-939de194.js","./byteSizeEstimations-90c5a50d.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./vec2f64-30dc1443.js","./elevationInfoUtils-c3025fae.js","./ElevationInfo-80227ecc.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./VertexSnappingCandidate-03b1951a.js","./Basemap-59ed9516.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./deprecate-0d93948c.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./loadAll-01cdf0a9.js","./asyncUtils-087555fc.js","./Portal-c6e03126.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./PortalItem-e4ba4b94.js","./writeUtils-3bde6e49.js","./layerUtils-68eea656.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./compilerUtils-fefa73ae.js","./enumeration-61a13175.js","./opacityUtils-1333f803.js","./CollectionFlattener-f43a0fce.js","./TablesMixin-55858fba.js","./Layer-cea228f0.js","./Identifiable-093f90a8.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./screenUtils-90993e16.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./persistableUrlUtils-d0777bec.js","./jsonUtils-c6684c52.js","./Cyclical-078b4564.js","./projection-acd73147.js","./zscale-48bab05e.js","./TileInfo-c5c8c8d2.js","./widget-4abc68df.js","./uuid-73213768.js","./dom-5b7af1bf.js","./executeQueryJSON-29279a46.js","./normalizeUtils-0f537694.js","./query-b7b3a76b.js","./pbfQueryUtils-c922ef32.js","./pbf-8b0546e8.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./queryZScale-3c8de33a.js","./FeatureSet-deb2029d.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./RelationshipQuery-c27267ab.js","./LegendOptions-2e7b3d70.js","./utils-4469bf65.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./ItemCache-bf1028d4.js","./MemCache-1d2f56ee.js","./utils-c81a5c52.js","./jsonUtils-1c5cdf77.js","./UniqueValueRenderer-73d567ad.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./heatmapUtils-3d7c22c5.js","./featureConversionUtils-d2229ed4.js","./TopFeaturesQuery-9aca00bf.js","./FeatureLayer-534ff006.js","./MultiOriginJSONSupport-b8792dfa.js","./LayerFloorInfo-f184c8f5.js","./FeatureLayerBase-c0aa3674.js","./HeightModelInfo-34f16d74.js","./arcgisLayerUrl-bed3cba1.js","./OperationalLayer-9c50475b.js","./editsZScale-12d81957.js","./APIKeyMixin-b6e4f897.js","./ArcGISService-aada3b5d.js","./CustomParametersMixin-a5d06ccc.js","./EditBusLayer-b5dc3689.js","./FeatureReductionLayer-fcaeb34a.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./OrderedLayer-9623e905.js","./PortalLayer-12f4a535.js","./RefreshableLayer-49182ab8.js","./ScaleRangeLayer-c072e266.js","./TemporalLayer-c74d13d4.js","./TimeInfo-f76d6c20.js","./FeatureTemplate-c4496b93.js","./FeatureType-0be9420b.js","./fieldProperties-4207e953.js","./FieldsIndex-02142c8a.js","./versionUtils-fabd8b3a.js","./styleUtils-08eaa4d2.js","./popupUtils-1ecc877c.js","./colorUtils-82440b70.js","./mat2d-d0b91e3e.js","./Scheduler-5e6ccc87.js","./GraphicsLayer-b332f442.js","./ViewingMode-915d19cb.js","./unitBezier-881ac1eb.js","./mat3-9a8d9db7.js","./mat3f32-d3d088e8.js","./vec2f32-461e65a9.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./capabilities-d08b6e58.js","./context-util-d4c193b5.js","./Subtype-a3103d84.js","./datetime-4f774298.js","./QueryEngineResult-92e13fe4.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./WhereClause-6c9440a1.js","./utils-44a68fd6.js","./json-48e3ea08.js","./Util-289ce3b5.js","./EffectView-dffeb0bc.js","./ExportImageParameters-ba01802d.js","./sublayerUtils-eea48c01.js","./webStyleSymbolUtils-0b165621.js","./devEnvironmentUtils-5002a058.js","./dehydratedFeatures-3dcd65f1.js","./enums-4b2a86a0.js","./plane-46a8c767.js","./quat-ec16a584.js"],import.meta.url))}return null}};v([b({constructOnly:!0})],Ul.prototype,"spatialReference",void 0),v([b({constructOnly:!0})],Ul.prototype,"view",void 0),v([b()],Ul.prototype,"options",void 0),v([b({readOnly:!0})],Ul.prototype,"updating",null),v([b({readOnly:!0})],Ul.prototype,"snappingSources",null),Ul=v([Ae("esri.views.interactive.snapping.FeatureSnappingEngine")],Ul);let XTe=class{constructor(e,n){this.snappingSource=e,this.layerView=n,this.handles=new si;const i=this.snappingSource.layerSource.layer;if("refresh"in i){const s=i;this.handles.add(s.on("refresh",()=>e.refresh()))}this.handles.add([ge(()=>e.updating,s=>e.layerSource.updating=s,us),ge(()=>e.availability,s=>e.layerSource.availability=s,us)])}destroy(){this.snappingSource.destroy(),this.handles.destroy()}};function f0(t,e,n,i,s,o,{coordinateHelper:r}){const a=sc(JTe,e);a[0]+=n,a[1]+=i,a[2]+=s;const l=IT(a,r.spatialReference,Gn,o);return $Te(l,t)}const QTe=ht(),HA=ht(),JTe=ht();let N_=class{constructor(e,n){this.view=e,this.options=n,this.squaredShortLineThreshold=ko.shortLineThreshold*ko.shortLineThreshold}snap(e,n){return q(n.vertexHandle)?n.vertexHandle.type!=="vertex"?[]:this.snapExistingVertex(e,n):this.snapNewVertex(e,n)}edgeExceedsShortLineThreshold(e,n){return this.exceedsShortLineThreshold(e.leftVertex.pos,e.rightVertex.pos,n)}exceedsShortLineThreshold(e,n,{elevationInfo:i,editGeometryOperations:s}){const o=s.data.coordinateHelper;return this.squaredShortLineThreshold===0||od(Js(n,o,i,this.view),Js(e,o,i,this.view))>this.squaredShortLineThreshold}squaredProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityTreshold}get _squaredMouseProximityTreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:n}=this.options,i=e*n;return i*i}},eIe=class extends kh{constructor({coordinateHelper:e,lineStart:n,lineEnd:i,targetPoint:s,elevationInfo:o}){super(e,s,new w4(e,n,i),o,Wi.SELF),this._referenceLineHint=new _r(br.REFERENCE_EXTENSION,n,i,o,this.domain)}get hints(){return[this._referenceLineHint,new _r(br.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.elevationInfo,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}},tIe=class extends N_{snapNewVertex(e,n){const i=n.editGeometryOperations.data.components[0],s=i.edges.length,o=[];if(s<1)return o;const r=n.coordinateHelper,a=Js(e,r,Gn,this.view),{view:l}=this,c=i.edges[s-1];let u=c;do{if(this.edgeExceedsShortLineThreshold(u,n)){const d=zr(u,l,n);this._processCandidateProposal(d.left,d.right,e,a,n,o)}u=u.leftVertex.leftEdge}while(u&&u!==c);return o}snapExistingVertex(e,n){const i=[],s=zt(n.vertexHandle),o=s.component;if(o.edges.length<2)return i;const{view:r}=this,{coordinateHelper:a}=n,l=Js(e,a,Gn,r),c=s.leftEdge,u=s.rightEdge;c&&u&&this.edgeExceedsShortLineThreshold(c,n)&&this.edgeExceedsShortLineThreshold(u,n)&&this._processCandidateProposal(ui(c.leftVertex.pos,r,n),ui(u.rightVertex.pos,r,n),e,l,n,i);const d=o.edges[0];let h=d;do{if(h!==s.leftEdge&&h!==s.rightEdge&&this.edgeExceedsShortLineThreshold(h,n)){const f=zr(h,r,n);this._processCandidateProposal(f.left,f.right,e,l,n,i)}h=h.rightVertex.rightEdge}while(h&&h!==d);return i}_processCandidateProposal(e,n,i,s,o,r){const{coordinateHelper:a,pointer:l}=o;a.toXYZ(e,E4),a.toXYZ(n,k4);const c=a.toXYZ(i,iIe),u=ET(c,nIe),d=a.fromXYZ(u);od(s,Js(d,a,Gn,this.view))<this.squaredProximityThreshold(l)&&r.push(new eIe({coordinateHelper:a,lineStart:e,lineEnd:n,targetPoint:d,elevationInfo:a.hasZ()?Gn:null}))}};const E4=ht(),k4=ht(),nIe={start:E4,end:k4,type:Xn.LINE},iIe=ht();let xT=class extends bg{constructor(e,n,i,s=Wi.ALL){super(i,s),this.lineStart=e,this.lineEnd=n}equals(e){return e instanceof xT&&fs(this.lineStart,e.lineStart)&&fs(this.lineEnd,e.lineEnd)}},sIe=class extends kh{constructor({coordinateHelper:e,referenceLine:n,lineStart:i,targetPoint:s,elevationInfo:o}){const r=e.toXYZ(i,oIe),a=e.toXYZ(n.left,rIe),l=e.toXYZ(n.right,aIe);dp(r,du(r,r,l),a),super(e,s,new w4(e,i,e.fromXYZ(r)),o,Wi.SELF),this._referenceLines=[{edge:n,fadeLeft:!0,fadeRight:!0}]}get hints(){const e=this.elevationInfo;return[new _r(br.TARGET,this.constraint.start,this.targetPoint,e,this.domain),new xT(this.constraint.start,this.targetPoint,e,this.domain),...this._referenceLines.map(n=>new _r(br.REFERENCE,n.edge.left,n.edge.right,e,this.domain,n.fadeLeft,n.fadeRight))]}addReferenceLine(e){const n={edge:e,fadeLeft:!0,fadeRight:!0},{coordinateHelper:i}=this;this._referenceLines.forEach(s=>{i.equals(e.right,s.edge.left)&&(s.fadeLeft=!1,n.fadeRight=!1),i.equals(e.right,s.edge.right)&&(s.fadeRight=!1,n.fadeRight=!1),i.equals(e.left,s.edge.right)&&(s.fadeRight=!1,n.fadeLeft=!1),i.equals(e.left,s.edge.left)&&(s.fadeLeft=!1,n.fadeLeft=!1)}),this._referenceLines.push(n)}};const oIe=ht(),rIe=ht(),aIe=ht();let lIe=class extends N_{snapNewVertex(e,n){const i=n.editGeometryOperations.data.components[0],s=i.edges.length,o=i.vertices.length,r=[];if(s<2)return r;const{view:a}=this,l=Js(e,n.coordinateHelper,Gn,a),c=ui(i.vertices[o-1].pos,a,n),u=ui(i.vertices[0].pos,a,n),d=i.edges[s-1];let h=d;do{if(this.edgeExceedsShortLineThreshold(h,n)){const f=zr(h,a,n);this._checkEdgeForParalleLines(f,c,e,l,n,r),this._checkEdgeForParalleLines(f,u,e,l,n,r)}h=h.leftVertex.leftEdge}while(h&&h!==d);return r}snapExistingVertex(e,n){const i=[],s=zt(n.vertexHandle),o=s.component;if(o.edges.length<3)return i;const{view:r}=this,a=Js(e,n.coordinateHelper,Gn,r),l=s.leftEdge,c=s.rightEdge,u=o.vertices[0],d=ui(u.pos,r,n),h=o.vertices.length,f=o.vertices[h-1],m=ui(f.pos,r,n),g=o.edges[0];let y=g;do{if(y!==l&&y!==c&&this.edgeExceedsShortLineThreshold(y,n)){const _=zr(y,r,n);l&&this._checkEdgeForParalleLines(_,ui(l.leftVertex.pos,r,n),e,a,n,i),c&&this._checkEdgeForParalleLines(_,ui(c.rightVertex.pos,r,n),e,a,n,i),s===u?this._checkEdgeForParalleLines(_,m,e,a,n,i):s===f&&this._checkEdgeForParalleLines(_,d,e,a,n,i)}y=y.rightVertex.rightEdge}while(y&&y!==g);return i}_checkEdgeForParalleLines(e,n,i,s,o,r){const a=e.left,l=e.right;if(p0(gd,n,a,l),yI(gd,n)<ko.parallelLineThreshold)return;p0(gd,i,a,l,n);const{coordinateHelper:c,pointer:u}=o,d=c.fromXYZ(gd,c.getZ(i,0));if(od(s,Js(d,c,Gn,this.view))<this.squaredProximityThreshold(u)){if(this._parallelToPreviousCandidate(e,r))return;r.push(new sIe({coordinateHelper:c,referenceLine:e,lineStart:n,targetPoint:d,elevationInfo:c.hasZ()?Gn:null}))}}_parallelToPreviousCandidate(e,n){const i=e.left,s=e.right;for(const o of n)if(p0(gd,s,o.constraint.start,o.constraint.end,i),yI(gd,s)<ko.parallelLineThreshold)return o.addReferenceLine(e),!0;return!1}};const gd=Jt();let cIe=class extends N_{snapNewVertex(e,n){const i=n.editGeometryOperations.data.components[0],s=i.vertices.length,o=[];if(s<2)return o;const{view:r}=this,a=Js(e,n.coordinateHelper,Gn,r),l=i.vertices[s-1];if(this.edgeExceedsShortLineThreshold(l.leftEdge,n)){const u=ui(l.pos,r,n),d=zr(l.leftEdge,r,n);this._checkForSnappingCandidate(o,d,u,e,d.left,u,n,e,a)}const c=i.vertices[0];if(this.edgeExceedsShortLineThreshold(c.rightEdge,n)){const u=ui(c.pos,r,n),d=zr(c.rightEdge,r,n);this._checkForSnappingCandidate(o,d,u,e,d.right,u,n,e,a)}return o}snapExistingVertex(e,n){const i=[],s=zt(n.vertexHandle),o=s.component,r=o.vertices.length;if(r<3)return i;const{view:a}=this,l=Js(e,n.coordinateHelper,Gn,a),c=s.leftEdge,u=s.rightEdge,d=o.vertices[0],h=o.vertices[r-1];if(!c){const f=d.rightEdge.rightVertex.rightEdge;if(this.edgeExceedsShortLineThreshold(f,n)){const m=zr(f,a,n),g=ui(d.rightEdge.rightVertex.pos,a,n);this._checkForSnappingCandidate(i,m,g,e,m.right,g,n,e,l)}return i}if(!u){const f=h.leftEdge.leftVertex.leftEdge;if(this.edgeExceedsShortLineThreshold(f,n)){const m=zr(f,a,n),g=ui(h.leftEdge.leftVertex.pos,a,n);this._checkForSnappingCandidate(i,m,g,e,m.left,g,n,e,l)}return i}if(c&&c.leftVertex.leftEdge){const f=c.leftVertex.leftEdge;if(this.edgeExceedsShortLineThreshold(f,n)){const m=zr(f,a,n),g=ui(c.leftVertex.pos,a,n);this._checkForSnappingCandidate(i,m,g,e,m.left,g,n,e,l)}}if(u&&u.rightVertex.rightEdge){const f=u.rightVertex.rightEdge;if(this.edgeExceedsShortLineThreshold(f,n)){const m=zr(f,a,n),g=ui(u.rightVertex.pos,a,n);this._checkForSnappingCandidate(i,m,g,e,m.right,g,n,e,l)}}return i}_checkForSnappingCandidate(e,n,i,s,o,r,a,l,c){const{coordinateHelper:u,pointer:d}=a;di(Yh,n.right,n.left);const h=ia(pIe,Yh[1],-Yh[0],0),f=Ic(h,di(Yh,s,i))/Vp(h),m=u.fromXYZ(Zr(Yh,r,h,f),u.getZ(l,0));if(od(c,Js(m,u,Gn,this.view))<this.squaredProximityThreshold(d)){const g=u.toXYZ(r,uIe),y=ph(dIe,g,h,Math.sign(f)),_=u.fromXYZ(y);e.push(new S4({coordinateHelper:u,targetPoint:m,constraint:new _4(u,r,_),previousVertex:o,otherVertex:r,otherVertexType:sh.CENTER,elevationInfo:u.hasZ()?Gn:null}))}}};const Yh=Jt(),uIe=ht(),dIe=ht(),pIe=ht();let hIe=class extends kh{constructor({coordinateHelper:e,targetPoint:n,point1:i,point2:s,elevationInfo:o}){super(e,n,new b4(e,e.arrayToVector(XS(fIe,i,s,.5)),.5*Qm(i,s)),o,Wi.SELF),this._p1=i,this._p2=s}get hints(){const e=this.elevationInfo;return[new _r(br.REFERENCE,this.targetPoint,this._p1,e,this.domain),new _r(br.REFERENCE,this.targetPoint,this._p2,e,this.domain),new D_(this._p1,this.targetPoint,this._p2,e,this.domain)]}};const fIe=Jt();let mIe=class extends N_{snapNewVertex(e,n){const i=n.editGeometryOperations.data.components[0],s=[],o=i.vertices.length;if(n.editGeometryOperations.data.type!=="polygon"||o<2)return s;const{view:r}=this,a=i.vertices[0],l=i.vertices[o-1],c=ui(a.pos,r,n),u=ui(l.pos,r,n);return this._processCandidateProposal(c,u,e,n,s),s}snapExistingVertex(e,n){const i=[],s=zt(n.vertexHandle),o=s.component;if(o.edges.length<2||n.editGeometryOperations.data.type==="polyline"&&(s.index===0||s.index===o.vertices.length-1))return i;const{view:r}=this,a=ui(s.leftEdge.leftVertex.pos,r,n),l=ui(s.rightEdge.rightVertex.pos,r,n);return this._processCandidateProposal(a,l,e,n,i),i}_processCandidateProposal(e,n,i,s,o){if(!this.exceedsShortLineThreshold(e,n,s))return;const r=XS(gIe,e,n,.5),a=.5*Qm(e,n),l=OTe(vIe,i,r,a),{coordinateHelper:c,pointer:u}=s,d=c.fromXYZ(l,c.getZ(i,0)),h=Js(i,c,Gn,this.view);od(h,Js(d,c,Gn,this.view))<this.squaredProximityThreshold(u)&&o.push(new hIe({coordinateHelper:c,targetPoint:d,point1:e,point2:n,elevationInfo:c.hasZ()?Gn:null}))}};const gIe=Jt(),vIe=Jt();let Nd=class extends dt{constructor(e){super(e),this.updating=!1,this._snappers=new Ht,this._domain=Wi.SELF}initialize(){this._snappers.push(new lIe(this.view,this.options),new tIe(this.view,this.options),new cIe(this.view,this.options),new mIe(this.view,this.options))}set options(e){this._set("options",e);for(const n of this._snappers)n.options=e}async fetchCandidates(e,n,i){if(!(n&this._domain&&this.options.effectiveSelfEnabled))return[];const s=[];for(const o of this._snappers.items)for(const r of o.snap(e,i))s.push(r);return ST(e,s,i.coordinateHelper),s}};v([b({readOnly:!0})],Nd.prototype,"updating",void 0),v([b({constructOnly:!0})],Nd.prototype,"view",void 0),v([b()],Nd.prototype,"options",null),Nd=v([Ae("esri.views.interactive.snapping.SelfSnappingEngine")],Nd);function yIe(t,e){return[new Nd({view:t,options:e}),new Ul({view:t,options:e,spatialReference:t.spatialReference})]}let lo=class extends dt{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.featureSources=new Ht,this.distance=ko.distance,this.touchSensitivityMultiplier=ko.touchSensitivityMultiplier}get effectiveEnabled(){return this.enabledToggled?!this.enabled:this.enabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}};v([b()],lo.prototype,"enabled",void 0),v([b()],lo.prototype,"enabledToggled",void 0),v([b()],lo.prototype,"selfEnabled",void 0),v([b()],lo.prototype,"featureEnabled",void 0),v([b({type:Ht.ofType(yT)})],lo.prototype,"featureSources",void 0),v([b()],lo.prototype,"distance",void 0),v([b()],lo.prototype,"touchSensitivityMultiplier",void 0),v([b({readOnly:!0})],lo.prototype,"effectiveEnabled",null),v([b({readOnly:!0})],lo.prototype,"effectiveSelfEnabled",null),v([b({readOnly:!0})],lo.prototype,"effectiveFeatureEnabled",null),lo=v([Ae("esri.views.interactive.snapping.SnappingOptions")],lo);const MT=lo;let $T=class extends bg{constructor(e,n,i=Wi.ALL){super(n,i),this.intersectionPoint=e}equals(e){return e instanceof $T&&fs(this.intersectionPoint,e.intersectionPoint)}},av=class extends kh{constructor(e,n,i,s,o){super(e,n,new kT(e,n,i.constraint,s.constraint),o,Wi.ALL),this.first=i,this.second=s}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new $T(this.targetPoint,this.elevationInfo,this.domain)]}},Vr=class extends Ii.EventedMixin(Zm){constructor(e){super(e),this.options=new MT,this.snappingEnginesFactory=yIe,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Pa.MAIN}initialize(){this.handles.add([ge(()=>{const{effectiveFeatureEnabled:e,effectiveSelfEnabled:n,touchSensitivityMultiplier:i,distance:s}=this.options;return{effectiveFeatureEnabled:e,effectiveSelfEnabled:n,touchSensitivityMultiplier:i,distance:s}},()=>{this.doneSnapping(),this.emit("changed")},_c),ge(()=>this.options,e=>{for(const n of this._engines)n.options=e},_c),ge(()=>({viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,snappingEnginesFactory:this.snappingEnginesFactory}),({viewReady:e,snappingEnginesFactory:n})=>this._recreateEngines(e,n),us)])}destroy(){this._destroyEngines()}get updating(){return this._engines.some(e=>e.updating)}_recreateEngines(e,n){if(this._destroyEngines(),!e)return;const{view:i,options:s}=this;this._engines=n(i,s)}_destroyEngines(){for(const e of this._engines)e.destroy();this._engines=[]}get _squaredMouseProximityTreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:n}=this.options,i=e*n;return i*i}async snap(e){return bIe(e)?this._snapMultiPoint(e):this._snapSinglePoint(e)}update(e){const{point:n,context:i}=e;this._removeVisualization();const s=this._currentMainCandidate;if(ke(s))return n;const o=this._selectUpdateInput(e);if(ke(o))return n;const{coordinateHelper:{spatialReference:r}}=i,a=fr(this._convertPointElevation(o,i),r);if(ke(a))return n;const{view:l}=this,{coordinateHelper:c,elevationInfo:u,visualizer:d}=i,h=[],f=c.pointToVector(a),m=s.constraint.closestTo(f);if(!this._arePointsWithinScreenThreshold(f,m,i))return this._resetSnappingState(),n;s.targetPoint=m,h.push(...s.hints);for(const y of this._currentOtherActiveCandidates)y.targetPoint=m,h.push(...y.hints);q(d)&&this.handles.add(d.draw(h,{coordinateHelper:c,elevationInfo:UA(i),view:l,selfSnappingZ:i.selfSnappingZ}),lv);const g=c.vectorToDehydratedPoint(m);return this._convertPointElevation(g,i,Gn,u)}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:e,scenePoint:n}){switch(this._currentSnappedType){case Pa.MAIN:return e;case Pa.SCENE:return n}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Pa.MAIN}_removeVisualization(){this.handles.remove(lv)}async _snapSinglePoint({point:e,context:n,signal:i}){const{coordinateHelper:s}=n,{view:o}=this,r=this._convertPointElevation(e,n),a=s.pointToVector(r),l=await this._fetchCandidates(a,Wi.ALL,n,i);return this._createSnapResult(a,Pa.MAIN,l,o,n,i)}async _snapMultiPoint({point:e,scenePoint:n,context:i,signal:s}){const{view:o}=this,{coordinateHelper:r}=i,{spatialReference:a}=r;await $8(n.spatialReference,a);const l=fr(this._convertPointElevation(n,i),a),c=r.pointToVector(l),u=await this._fetchCandidates(c,Wi.FEATURE,i,s);if(u.length>0){const m=await this._fetchCandidates(c,Wi.SELF,i,s);return this._createSnapResult(c,Pa.SCENE,[...u,...m],o,i,s)}const d=this._convertPointElevation(e,i),h=r.pointToVector(d),f=await this._fetchCandidates(h,Wi.SELF,i,s);return this._createSnapResult(h,Pa.MAIN,f,o,i,s)}async _fetchCandidates(e,n,i,s){return(await Promise.all(this._engines.map(o=>o.fetchCandidates(e,n,i,s)))).flat()}_createSnapResult(e,n,i,s,o,r){return{get valid(){return!OS(r)},apply:()=>{const{elevationInfo:a,coordinateHelper:l}=o,{snappedPoint:c,hints:u}=this._processCandidates(e,n,i,o);return this._removeVisualization(),q(o.visualizer)&&this.handles.add(o.visualizer.draw(u,{coordinateHelper:l,elevationInfo:UA(o),view:s,selfSnappingZ:o.selfSnappingZ}),lv),this._convertPointElevation(c,o,Gn,a)}}}_processCandidates(e,n,i,s){const{coordinateHelper:o}=s;if(i.length<1)return this.doneSnapping(),{snappedPoint:o.vectorToDehydratedPoint(e),hints:[]};this._currentSnappedType!==n&&this._resetSnappingState(),ST(e,i,o);const r=this._currentMainCandidate;if(q(r)){const a=this._findOldConstraintInNewCandidates(r,i);if(a>=0){if(!(i[a]instanceof av))return this._intersectWithOtherCandidates(a,i,e,n,s);if(this._arePointsWithinScreenThreshold(e,r.targetPoint,s))return this._updateSnappingCandidate(r,n,i,s)}}return this._intersectWithOtherCandidates(0,i,e,n,s)}_findOldConstraintInNewCandidates(e,n){return e instanceof av?this._findOldCandidateIndex(n,e.first)>=0&&this._findOldCandidateIndex(n,e.second)>=0?0:-1:this._findOldCandidateIndex(n,e)}_intersectWithOtherCandidates(e,n,i,s,o){const{coordinateHelper:r}=o,a=n[e],l=[];for(let c=0;c<n.length;++c){if(c===e)continue;const u=n[c];for(const d of a.constraint.intersect(u.constraint)){const h=r.fromXYZ(d.closestTo(a.targetPoint),a.targetPoint[2]);l.push([new av(r,h,a,u,u.elevationInfo),this._squaredScreenDistance(i,h,r)])}}return l.length>0&&(l.sort((c,u)=>c[1]-u[1]),l[0][1]<this._squaredPointProximityThreshold(o.pointer))?this._updateSnappingCandidate(l[0][0],s,n,o):this._updateSnappingCandidate(a,s,n,o)}_updateSnappingCandidate(e,n,i,s){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=n;const o=this._currentMainCandidate.targetPoint,r=[];r.push(...e.hints);for(const a of i){if(e instanceof av){if(a.constraint.equals(e.first.constraint)||a.constraint.equals(e.second.constraint))continue}else if(a.constraint.equals(e.constraint))continue;a.constraint.check(o)&&(a.targetPoint=o,this._currentOtherActiveCandidates.push(a),r.push(...a.hints))}return{snappedPoint:s.coordinateHelper.vectorToDehydratedPoint(o),hints:r}}_squaredPointProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityTreshold}_arePointsWithinScreenThreshold(e,n,i){return this._squaredScreenDistance(e,n,i.coordinateHelper)<this._squaredPointProximityThreshold(i.pointer)}_squaredScreenDistance(e,n,i){return od(this._toScreen(e,i),this._toScreen(n,i))}_toScreen(e,n){return Js(e,n,Gn,this.view)}_findOldCandidateIndex(e,n){let i=-1;for(let s=0;s<e.length;++s)if(n.constraint.equals(e[s].constraint)){i=s;break}return i}_convertPointElevation(e,n,i=n.elevationInfo,s=Gn){const{view:o}=this;if(!(q(e)&&n.coordinateHelper.hasZ()&&q(o)&&o.type==="3d"))return e;const r=hr(e);return r.z=tE(o,r,i,s),r}get test(){return{visualizationsActive:this.handles.has(lv),engines:this._engines}}};var Pa;v([b({constructOnly:!0})],Vr.prototype,"view",void 0),v([b()],Vr.prototype,"options",void 0),v([b({readOnly:!0})],Vr.prototype,"updating",null),v([b()],Vr.prototype,"snappingEnginesFactory",void 0),v([b()],Vr.prototype,"_engines",void 0),v([b()],Vr.prototype,"_squaredMouseProximityTreshold",null),v([b()],Vr.prototype,"_squaredTouchProximityThreshold",null),Vr=v([Ae("esri.views.interactive.snapping.SnappingManager")],Vr),function(t){t[t.MAIN=0]="MAIN",t[t.SCENE=1]="SCENE"}(Pa||(Pa={}));const lv="visualization-handle";function bIe(t){return q(t.scenePoint)}function UA({coordinateHelper:t,elevationInfo:e}){return t.hasZ()?Gn:e}let Zi=class extends Ii.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:RL(this.activeComponent)}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){this.activeComponent.reset()}refreshComponent(){const e=this.activeComponent;e&&(e.type!=="box"&&e.type!=="reshape"&&e.type!=="graphic-mover"||e.refresh())}set undo(e){this._set("undo",()=>{this.canUndo()&&e()})}set redo(e){this._set("redo",()=>{this.canRedo()&&e()})}};v([b()],Zi.prototype,"activeComponent",void 0),v([b()],Zi.prototype,"cancelled",void 0),v([b()],Zi.prototype,"history",void 0),v([b()],Zi.prototype,"tool",null),v([b()],Zi.prototype,"type",void 0),v([b()],Zi.prototype,"canUndo",null),v([b()],Zi.prototype,"canRedo",null),v([b()],Zi.prototype,"onEnd",void 0),v([b()],Zi.prototype,"undo",null),v([b()],Zi.prototype,"redo",null),v([b()],Zi.prototype,"toggleTool",void 0),v([b()],Zi.prototype,"addToSelection",void 0),v([b()],Zi.prototype,"removeFromSelection",void 0),Zi=v([Ae("esri.widgets.Sketch.support.OperationHandle")],Zi);let by=class extends Zi{};v([b()],by.prototype,"activeComponent",void 0),by=v([Ae("esri.widgets.Sketch.support.CreateOperationHandle")],by);let Na=class extends Zi{};v([b()],Na.prototype,"activeComponent",void 0),Na=v([Ae("esri.widgets.Sketch.support.UpdateOperationHandle")],Na);const WA={defaultZ:0},cv={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,tool:"transform"};let wn=class extends Ii.EventedAccessor{constructor(e){super(e),this._numUpdating=0,this._handles=new si,this._internalGraphicsLayer=new YS({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandles=new si,this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.labelOptions=new R_,this.layer=null,this.pointSymbol=new lr({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new tm({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new em({color:[130,130,130,1],width:2}),this._snappingManager=null,this.tooltipOptions=new V_,this.updateGraphics=new Ht,this.updateOnGraphicClick=!0,this.updatePointSymbol=new lr({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}}),this.updatePolygonSymbol=new tm({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}}),this.updatePolylineSymbol=new em({color:[12,207,255],width:2}),this.vertexSymbol=new lr({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalAutoOpenEnabled=null,this.defaultCreateOptions=WA,this.defaultUpdateOptions=cv,this.snappingOptions=new MT}initialize(){this._handles.add([Dn(()=>{var e,n;return(n=(e=this.view)==null?void 0:e.map)==null?void 0:n.layers},"change",e=>{e.removed.includes(this.layer)&&this.cancel()}),Dn(()=>{var e;return(e=this.layer)==null?void 0:e.graphics},"change",e=>{if(q(this._operationHandle))for(const n of e.removed)this.updateGraphics.includes(n)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(n):this._operationHandle.cancel())}),ge(()=>{var e;return((e=this.layer)==null?void 0:e.elevationInfo)??null},e=>{e!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=e)},us),ge(()=>this.view,e=>{sn(this._snappingManager),e&&(this._snappingManager=new Vr({view:e,options:this.snappingOptions}),e.type==="2d"?Fe(()=>import("./editingTools-c6d50374.js"),["./editingTools-c6d50374.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./enumeration-61a13175.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./DrawGraphicTool-926abcc3.js","./HandleOwner-2edbba46.js","./reactiveUtils-5869e41a.js","./automaticLengthMeasurementUtils-83ea356f.js","./intl-7d39a8c0.js","./messages-28bf3b89.js","./assets-cd44347b.js","./unitUtils-dd6fb8ee.js","./widget-4abc68df.js","./uuid-73213768.js","./dom-5b7af1bf.js","./projection-acd73147.js","./mat4-7dde83b1.js","./zscale-48bab05e.js","./geometryEngine-0f4f9d5a.js","./geometryEngineBase-3dd302e0.js","./hydrated-00dd97bc.js","./GraphicsLayer-b332f442.js","./Layer-cea228f0.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./ScaleRangeLayer-c072e266.js","./ElevationInfo-80227ecc.js","./lengthUtils-92fed992.js","./elevationInfoUtils-c3025fae.js","./automaticAreaMeasurementUtils-26544a0e.js","./earcut-58237617.js","./plane-46a8c767.js","./sphere-622880b9.js","./vec4f64-939de194.js","./byteSizeEstimations-90c5a50d.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./vec2f64-30dc1443.js","./triangle-8cd02c5d.js","./lineSegment-c6f0b9d1.js","./Basemap-59ed9516.js","./deprecate-0d93948c.js","./loadAll-01cdf0a9.js","./asyncUtils-087555fc.js","./PortalItem-e4ba4b94.js","./writeUtils-3bde6e49.js","./layerUtils-68eea656.js","./compilerUtils-fefa73ae.js","./CollectionFlattener-f43a0fce.js","./TablesMixin-55858fba.js","./Cyclical-078b4564.js","./workers-af024c50.js","./Connection-b591250e.js","./Queue-275a6362.js","./TileInfo-c5c8c8d2.js","./executeQueryJSON-29279a46.js","./normalizeUtils-0f537694.js","./query-b7b3a76b.js","./pbfQueryUtils-c922ef32.js","./pbf-8b0546e8.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./queryZScale-3c8de33a.js","./FeatureSet-deb2029d.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./RelationshipQuery-c27267ab.js","./LegendOptions-2e7b3d70.js","./utils-4469bf65.js","./ItemCache-bf1028d4.js","./MemCache-1d2f56ee.js","./utils-c81a5c52.js","./jsonUtils-1c5cdf77.js","./UniqueValueRenderer-73d567ad.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./heatmapUtils-3d7c22c5.js","./featureConversionUtils-d2229ed4.js","./TopFeaturesQuery-9aca00bf.js","./FeatureLayer-534ff006.js","./MultiOriginJSONSupport-b8792dfa.js","./LayerFloorInfo-f184c8f5.js","./FeatureLayerBase-c0aa3674.js","./HeightModelInfo-34f16d74.js","./arcgisLayerUrl-bed3cba1.js","./OperationalLayer-9c50475b.js","./editsZScale-12d81957.js","./APIKeyMixin-b6e4f897.js","./ArcGISService-aada3b5d.js","./CustomParametersMixin-a5d06ccc.js","./EditBusLayer-b5dc3689.js","./FeatureReductionLayer-fcaeb34a.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./OrderedLayer-9623e905.js","./PortalLayer-12f4a535.js","./RefreshableLayer-49182ab8.js","./TemporalLayer-c74d13d4.js","./TimeInfo-f76d6c20.js","./FeatureTemplate-c4496b93.js","./FeatureType-0be9420b.js","./fieldProperties-4207e953.js","./FieldsIndex-02142c8a.js","./versionUtils-fabd8b3a.js","./styleUtils-08eaa4d2.js","./popupUtils-1ecc877c.js","./colorUtils-82440b70.js","./mat2d-d0b91e3e.js","./Scheduler-5e6ccc87.js","./ViewingMode-915d19cb.js","./unitBezier-881ac1eb.js","./vec2-ab9f47bf.js","./mat3-9a8d9db7.js","./mat3f32-d3d088e8.js","./vec2f32-461e65a9.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./capabilities-d08b6e58.js","./context-util-d4c193b5.js","./Subtype-a3103d84.js","./datetime-4f774298.js","./QueryEngineResult-92e13fe4.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./WhereClause-6c9440a1.js","./utils-44a68fd6.js","./json-48e3ea08.js","./Util-289ce3b5.js","./EffectView-dffeb0bc.js","./ExportImageParameters-ba01802d.js","./sublayerUtils-eea48c01.js","./webStyleSymbolUtils-0b165621.js","./devEnvironmentUtils-5002a058.js","./dehydratedFeatures-3dcd65f1.js","./enums-4b2a86a0.js","./quat-ec16a584.js"],import.meta.url):e.type==="3d"&&(Fe(()=>import("./editingTools-9ef48f71.js").then(n=>n.e),["./editingTools-9ef48f71.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./reactiveUtils-5869e41a.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./elevationInfoUtils-c3025fae.js","./ElevationInfo-80227ecc.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./screenUtils-90993e16.js","./asyncUtils-087555fc.js","./automaticLengthMeasurementUtils-83ea356f.js","./intl-7d39a8c0.js","./number-2ab8ca0d.js","./locale-30120714.js","./messages-28bf3b89.js","./request-24011425.js","./assets-cd44347b.js","./widget-4abc68df.js","./Evented-cbf5f368.js","./Promise-368b703a.js","./uuid-73213768.js","./dom-5b7af1bf.js","./projection-acd73147.js","./mathUtils-57aba1ea.js","./vec4-46a9b36d.js","./SimpleObservable-8e532943.js","./mat4-7dde83b1.js","./aaBoundingRect-b340cf8c.js","./zscale-48bab05e.js","./geometryEngine-0f4f9d5a.js","./geometryEngineBase-3dd302e0.js","./hydrated-00dd97bc.js","./vec2-ab9f47bf.js","./vec2f64-30dc1443.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./vec4f32-2f36231b.js","./Octree-8ed6dc77.js","./sphere-622880b9.js","./vec4f64-939de194.js","./byteSizeEstimations-90c5a50d.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./plane-46a8c767.js","./Util-289ce3b5.js","./lineSegment-c6f0b9d1.js","./ViewingMode-915d19cb.js","./glUtil-7aa58841.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./InterleavedLayout-b5930508.js","./BufferView-478024d2.js","./types-e1c0a5bf.js","./SSAOHelper-dbb21920.js","./OrderIndependentTransparency-68bd812c.js","./triangle-8cd02c5d.js","./Indices-d9b791ce.js","./VertexAttribute-9c5c630d.js","./ScreenSpacePass-6db805f2.js","./compilerUtils-fefa73ae.js","./requestImageUtils-d2d7b1fb.js","./SSAO.glsl-3068f7bf.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexArrayObject-3630ef4f.js","./mat4f32-77b3d8ac.js","./aaBoundingBox-4a83dbbc.js","./mat3-9a8d9db7.js","./quat-ec16a584.js","./vec3f32-4322908d.js","./SSAOBlur.glsl-ea338452.js","./NativeLineMaterial-cca722e5.js","./triangulationUtils-6b510de4.js","./earcut-58237617.js","./deduplicate-d92c3cc2.js","./dehydratedFeatures-3dcd65f1.js","./Field-1d4f9ca4.js","./enumeration-61a13175.js","./fieldType-b34e5d2d.js","./vec2f32-461e65a9.js","./NestedMap-1b5db22e.js","./floatRGBA-090399ba.js","./boundedPlane-296928f6.js","./MemCache-1d2f56ee.js","./Scheduler-5e6ccc87.js","./colorUtils-82440b70.js","./Identifiable-093f90a8.js","./DrawGraphicTool-926abcc3.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./HandleOwner-2edbba46.js","./GraphicsLayer-b332f442.js","./Layer-cea228f0.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./ScaleRangeLayer-c072e266.js","./automaticAreaMeasurementUtils-26544a0e.js","./GraphicManipulator-473c875a.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./jsonUtils-8c02ff16.js","./TranslateTooltipInfos-40f8c2db.js","./utils-4469bf65.js","./ItemCache-bf1028d4.js","./utils-c81a5c52.js","./Cyclical-078b4564.js","./axisAngleDegrees-700f0205.js","./persistable-f6bec6f5.js","./multiOriginJSONSupportUtils-c978f4c3.js","./ExtentTooltipInfos-f4055dd0.js"],import.meta.url),Fe(()=>import("./GraphicsLayerView3D-1d44a32c.js").then(n=>n.G),["./GraphicsLayerView3D-1d44a32c.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./reactiveUtils-5869e41a.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./dehydratedFeatures-3dcd65f1.js","./byteSizeEstimations-90c5a50d.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./Field-1d4f9ca4.js","./enumeration-61a13175.js","./fieldType-b34e5d2d.js","./elevationInfoUtils-c3025fae.js","./ElevationInfo-80227ecc.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./NativeLineMaterial-cca722e5.js","./vec3f32-4322908d.js","./plane-46a8c767.js","./sphere-622880b9.js","./mat4-7dde83b1.js","./vec4f64-939de194.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./vec2f64-30dc1443.js","./OrderIndependentTransparency-68bd812c.js","./enums-64ab819c.js","./SSAOHelper-dbb21920.js","./Util-289ce3b5.js","./triangle-8cd02c5d.js","./lineSegment-c6f0b9d1.js","./Indices-d9b791ce.js","./VertexAttribute-9c5c630d.js","./ScreenSpacePass-6db805f2.js","./vec2-ab9f47bf.js","./compilerUtils-fefa73ae.js","./Evented-cbf5f368.js","./request-24011425.js","./requestImageUtils-d2d7b1fb.js","./SSAO.glsl-3068f7bf.js","./assets-cd44347b.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexArrayObject-3630ef4f.js","./mat4f32-77b3d8ac.js","./BufferView-478024d2.js","./ViewingMode-915d19cb.js","./mat3-9a8d9db7.js","./quat-ec16a584.js","./SSAOBlur.glsl-ea338452.js","./VertexElementDescriptor-2925c6af.js","./InterleavedLayout-b5930508.js","./types-e1c0a5bf.js","./projection-acd73147.js","./SimpleObservable-8e532943.js","./zscale-48bab05e.js","./triangulationUtils-6b510de4.js","./earcut-58237617.js","./deduplicate-d92c3cc2.js","./vec2f32-461e65a9.js","./NestedMap-1b5db22e.js","./screenUtils-90993e16.js","./Octree-8ed6dc77.js","./floatRGBA-090399ba.js","./boundedPlane-296928f6.js","./glUtil-7aa58841.js","./MemCache-1d2f56ee.js","./Scheduler-5e6ccc87.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./HandleOwner-2edbba46.js","./diffUtils-8a8cb5bc.js","./Layer-cea228f0.js","./UniqueValueRenderer-73d567ad.js","./LegendOptions-2e7b3d70.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./jsonUtils-1c5cdf77.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./deprecate-0d93948c.js","./heatmapUtils-3d7c22c5.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./OptimizedFeature-73582c6e.js","./optimizedFeatureQueryEngineAdapter-be75ae94.js","./centroid-56c5816c.js","./asyncUtils-087555fc.js","./edgeUtils-60e0d20c.js","./featureConversionUtils-d2229ed4.js","./OptimizedFeatureSet-1d1ac4b9.js","./vec33-ec7b196f.js","./QueryEngineResult-92e13fe4.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./ItemCache-bf1028d4.js","./WhereClause-6c9440a1.js","./utils-44a68fd6.js","./normalizeUtils-0f537694.js","./json-48e3ea08.js","./objectResourceUtils-02c07fd0.js","./devEnvironmentUtils-5002a058.js","./DefaultMaterial_COLOR_GAMMA-ccf18a3a.js","./Version-b16872d5.js","./mat3f32-d3d088e8.js","./symbolColorUtils-dd198128.js","./utils-4469bf65.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./utils-c81a5c52.js","./callExpressionWithFeature-13fe9b68.js","./MeshComponent-da2d633e.js","./imageUtils-c2d0d1ae.js","./projection-9ba51a79.js","./PooledRBush-0bffad50.js","./quickselect-322ec8e1.js","./geometryServiceUtils-abbabb11.js","./LayerView-a849dd77.js"],import.meta.url)))},us),ge(()=>{var e;return(e=this.view)==null?void 0:e.spatialReference},(e,n)=>{e&&n&&!e.equals(n)&&this.cancel()})])}destroy(){this.cancel(),this._handles=sn(this._handles),this._viewHandles=sn(this._viewHandles),this._removeDefaultLayer(),this._snappingManager=sn(this._snappingManager),this._set("view",null),this.emit("destroy")}get _defaultUpdateTool(){return this.view.type==="3d"?"move":"transform"}get updating(){return this._numUpdating>0}get activeTool(){return this._operationHandle&&this._operationHandle.tool?this._operationHandle.tool:null}get activeComponent(){return this._operationHandle?this._operationHandle.activeComponent:null}get createGraphic(){return!q(this.activeComponent)||this.activeComponent.type!=="draw-3d"&&this.activeComponent.type!=="draw-2d"?this._get("createGraphic"):zt(this.activeComponent.graphic)}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...WA,...e})}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",{...cv,...e,reshapeOptions:{...cv.reshapeOptions,...e==null?void 0:e.reshapeOptions}})}set snappingOptions(e){q(this._snappingManager)&&(this._snappingManager.options=e),this._set("snappingOptions",e)}get state(){var i;const e=!(!((i=this.view)!=null&&i.ready)||!this.layer),n=this._operationHandle;return e&&n?"active":e?"ready":"disabled"}get view(){return this._get("view")}set view(e){const n=this._get("view");if(n){const{container:s,map:o}=n;s&&(n.cursor=null),o&&o.remove(this._internalGraphicsLayer),this._viewHandles.removeAll(),this.cancel()}const i="view-ready";this._handles.remove(i),e&&this._handles.add(ji(()=>e.ready,s=>{this._viewHandles.removeAll(),s&&this._viewHandles.add(this._generateViewHandles(e))},us),i),this._set("view",e)}cancel(){this._moduleLoaderAbortController=Kr(this._moduleLoaderAbortController),this._viewReadyAbortController=Kr(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:e,updateGraphics:n}=this;if(e==="active"&&n.length){const{activeTool:i,layer:s}=this,o=n.toArray();s.removeMany(o),this.cancel(),this._emitDeleteEvent({graphics:o,tool:i})}}async create(e,n){if(this.cancel(),await this._waitViewReady(),this.state==="disabled")throw this.layer||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),this.view||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),Op();if(q(this.view.activeTool)&&(this.view.activeTool=null),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");FA(this.view,this._internalGraphicsLayer);const i=await this._setupCreateOperation(e,n);if(ke(i)||this.destroyed)return void this.view.map.remove(this._internalGraphicsLayer);const s=()=>{if(i===this._operationHandle){const o=this.createGraphic,r=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),i.cancelled||o==null||this.layer.add(o),this.emit("create",{graphic:o,state:r?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"})}};i.on("complete",s),this._operationHandle=i,this.view.ready&&this.view.focus()}async update(e,n){this.cancel(),await this._waitViewReady();const{layer:i,view:s,state:o}=this;if(o==="disabled")throw s||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),i||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),Op();q(this.view.activeTool)&&(this.view.activeTool=null);const r=Array.isArray(e)?e:[e];if(e==null||!r||!r.length)return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(r.some(l=>l.layer!==i?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):!!ke(l.geometry)&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)))return;const a=await this._setupUpdateOperation(r,n);this.destroyed||ke(a)||vi(a)||(FA(this.view,this._internalGraphicsLayer),this._setUpdateOperationHandle(a,n),this.emit("update",{graphics:r,state:"start",aborted:!1,tool:a.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(e){this._beginAsyncOperation(),e=Array.isArray(e)?e:[e];for(const n of e)q(n.geometry)&&n.geometry.type!=="mesh"&&!vc(n.geometry.spatialReference,this.view.spatialReference)&&(lh(n.geometry.spatialReference,this.view.spatialReference)||Gu()||await ch(),n.geometry=fr(n.geometry,this.view.spatialReference));this._endAsyncOperation()}undo(){this.canUndo()&&this._operationHandle.undo()}redo(){this.canRedo()&&this._operationHandle.redo()}canUndo(){return!(!this._operationHandle||!this._operationHandle.canUndo())}canRedo(){return!(!this._operationHandle||!this._operationHandle.canRedo())}toggleUpdateTool(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()}async _getFirstHit(e){const n=this.view;if(n.type==="2d"){const o=[];this.view.map.allLayers.forEach(a=>{a.type!=="vector-tile"&&a.type!=="imagery"||o.push(a)});const r=await this.view.hitTest(e,{exclude:o});return eTe(r.results)}const i=[this.view.map.ground];n.map.allLayers.forEach(o=>{o.type==="integrated-mesh"&&i.push(o)});const s=await n.hitTest(e,{exclude:i});if(s.results.length>0){const o=s.results[0];if(q(o)&&o.type==="graphic"&&o.graphic&&(!s.ground.mapPoint||n.map.ground.opacity<1||s.ground.distance-Xf(o.distance,0)>-Math.min(3*s.ground.distance,n.viewingMode==="global"?nO(n.renderCoordsHelper.spatialReference).radius/n.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return o}return null}_generateViewHandles(e){return[e.on("immediate-click",async n=>{const i=this.state==="active"&&this._operationHandle.type==="create";if(this.state==="disabled"||i||!this.updateOnGraphicClick)return;this._beginAsyncOperation();const s=await n.async(()=>this._getFirstHit(In(n)));let o=null;if(q(s)){const r=s.graphic;this.updateGraphics.includes(r)||r.layer===this.layer?(n.stopPropagation(),o=r):e.type!=="2d"||this._isComponentGraphic(r)||this.state!=="active"||this.cancel()}else this.state==="active"&&this.cancel();q(o)&&!this.updateGraphics.includes(o)&&await this.update([o],{...this.defaultUpdateOptions,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions}}),this._endAsyncOperation()},nt.WIDGET)]}async _setupCreateOperation(e,n){const i={hasZ:this.view.type==="3d",...this.defaultCreateOptions,...n},s=await this._setupDrawGraphicTool(e,this.view,i);return ke(s)?null:(this.view.tools.add(s),this.view.activeTool=s,this._setupCreateOperationHandle(s))}async _setupDrawGraphicTool(e,n,i){if(e==="multipoint"&&n.type==="3d")return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;const s=e!=="rectangle",o=e!=="rectangle";this.snappingOptions.enabledToggled=!1;const r={view:n,mode:e==="rectangle"||e==="circle"?"hybrid":"click",...i,snapToScene:!1,geometryType:e,graphicSymbol:this._getGraphicSymbolFromTool(e),snappingManager:this._snappingManager,forceUniformSize:o,centered:s};return this.view.type==="2d"?this._makeDrawGraphicTool2D(r):this._makeDrawGraphicTool3D(r)}async _makeDrawGraphicTool2D(e){const n=await this._requireModule(Fe(()=>import("./editingTools-c6d50374.js"),["./editingTools-c6d50374.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./enumeration-61a13175.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./DrawGraphicTool-926abcc3.js","./HandleOwner-2edbba46.js","./reactiveUtils-5869e41a.js","./automaticLengthMeasurementUtils-83ea356f.js","./intl-7d39a8c0.js","./messages-28bf3b89.js","./assets-cd44347b.js","./unitUtils-dd6fb8ee.js","./widget-4abc68df.js","./uuid-73213768.js","./dom-5b7af1bf.js","./projection-acd73147.js","./mat4-7dde83b1.js","./zscale-48bab05e.js","./geometryEngine-0f4f9d5a.js","./geometryEngineBase-3dd302e0.js","./hydrated-00dd97bc.js","./GraphicsLayer-b332f442.js","./Layer-cea228f0.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./ScaleRangeLayer-c072e266.js","./ElevationInfo-80227ecc.js","./lengthUtils-92fed992.js","./elevationInfoUtils-c3025fae.js","./automaticAreaMeasurementUtils-26544a0e.js","./earcut-58237617.js","./plane-46a8c767.js","./sphere-622880b9.js","./vec4f64-939de194.js","./byteSizeEstimations-90c5a50d.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./vec2f64-30dc1443.js","./triangle-8cd02c5d.js","./lineSegment-c6f0b9d1.js","./Basemap-59ed9516.js","./deprecate-0d93948c.js","./loadAll-01cdf0a9.js","./asyncUtils-087555fc.js","./PortalItem-e4ba4b94.js","./writeUtils-3bde6e49.js","./layerUtils-68eea656.js","./compilerUtils-fefa73ae.js","./CollectionFlattener-f43a0fce.js","./TablesMixin-55858fba.js","./Cyclical-078b4564.js","./workers-af024c50.js","./Connection-b591250e.js","./Queue-275a6362.js","./TileInfo-c5c8c8d2.js","./executeQueryJSON-29279a46.js","./normalizeUtils-0f537694.js","./query-b7b3a76b.js","./pbfQueryUtils-c922ef32.js","./pbf-8b0546e8.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./queryZScale-3c8de33a.js","./FeatureSet-deb2029d.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./RelationshipQuery-c27267ab.js","./LegendOptions-2e7b3d70.js","./utils-4469bf65.js","./ItemCache-bf1028d4.js","./MemCache-1d2f56ee.js","./utils-c81a5c52.js","./jsonUtils-1c5cdf77.js","./UniqueValueRenderer-73d567ad.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./heatmapUtils-3d7c22c5.js","./featureConversionUtils-d2229ed4.js","./TopFeaturesQuery-9aca00bf.js","./FeatureLayer-534ff006.js","./MultiOriginJSONSupport-b8792dfa.js","./LayerFloorInfo-f184c8f5.js","./FeatureLayerBase-c0aa3674.js","./HeightModelInfo-34f16d74.js","./arcgisLayerUrl-bed3cba1.js","./OperationalLayer-9c50475b.js","./editsZScale-12d81957.js","./APIKeyMixin-b6e4f897.js","./ArcGISService-aada3b5d.js","./CustomParametersMixin-a5d06ccc.js","./EditBusLayer-b5dc3689.js","./FeatureReductionLayer-fcaeb34a.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./OrderedLayer-9623e905.js","./PortalLayer-12f4a535.js","./RefreshableLayer-49182ab8.js","./TemporalLayer-c74d13d4.js","./TimeInfo-f76d6c20.js","./FeatureTemplate-c4496b93.js","./FeatureType-0be9420b.js","./fieldProperties-4207e953.js","./FieldsIndex-02142c8a.js","./versionUtils-fabd8b3a.js","./styleUtils-08eaa4d2.js","./popupUtils-1ecc877c.js","./colorUtils-82440b70.js","./mat2d-d0b91e3e.js","./Scheduler-5e6ccc87.js","./ViewingMode-915d19cb.js","./unitBezier-881ac1eb.js","./vec2-ab9f47bf.js","./mat3-9a8d9db7.js","./mat3f32-d3d088e8.js","./vec2f32-461e65a9.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./capabilities-d08b6e58.js","./context-util-d4c193b5.js","./Subtype-a3103d84.js","./datetime-4f774298.js","./QueryEngineResult-92e13fe4.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./WhereClause-6c9440a1.js","./utils-44a68fd6.js","./json-48e3ea08.js","./Util-289ce3b5.js","./EffectView-dffeb0bc.js","./ExportImageParameters-ba01802d.js","./sublayerUtils-eea48c01.js","./webStyleSymbolUtils-0b165621.js","./devEnvironmentUtils-5002a058.js","./dehydratedFeatures-3dcd65f1.js","./enums-4b2a86a0.js","./quat-ec16a584.js"],import.meta.url));return vi(n)||this.destroyed?null:new n.module.DrawGraphicTool2D({...e,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:_Ie(e.geometryType)?this.activeFillSymbol:null,tooltipOptions:this.tooltipOptions})}async _makeDrawGraphicTool3D(e){const n=await this._requireModule(Fe(()=>import("./editingTools-9ef48f71.js").then(s=>s.e),["./editingTools-9ef48f71.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./reactiveUtils-5869e41a.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./elevationInfoUtils-c3025fae.js","./ElevationInfo-80227ecc.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./screenUtils-90993e16.js","./asyncUtils-087555fc.js","./automaticLengthMeasurementUtils-83ea356f.js","./intl-7d39a8c0.js","./number-2ab8ca0d.js","./locale-30120714.js","./messages-28bf3b89.js","./request-24011425.js","./assets-cd44347b.js","./widget-4abc68df.js","./Evented-cbf5f368.js","./Promise-368b703a.js","./uuid-73213768.js","./dom-5b7af1bf.js","./projection-acd73147.js","./mathUtils-57aba1ea.js","./vec4-46a9b36d.js","./SimpleObservable-8e532943.js","./mat4-7dde83b1.js","./aaBoundingRect-b340cf8c.js","./zscale-48bab05e.js","./geometryEngine-0f4f9d5a.js","./geometryEngineBase-3dd302e0.js","./hydrated-00dd97bc.js","./vec2-ab9f47bf.js","./vec2f64-30dc1443.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./vec4f32-2f36231b.js","./Octree-8ed6dc77.js","./sphere-622880b9.js","./vec4f64-939de194.js","./byteSizeEstimations-90c5a50d.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./plane-46a8c767.js","./Util-289ce3b5.js","./lineSegment-c6f0b9d1.js","./ViewingMode-915d19cb.js","./glUtil-7aa58841.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./InterleavedLayout-b5930508.js","./BufferView-478024d2.js","./types-e1c0a5bf.js","./SSAOHelper-dbb21920.js","./OrderIndependentTransparency-68bd812c.js","./triangle-8cd02c5d.js","./Indices-d9b791ce.js","./VertexAttribute-9c5c630d.js","./ScreenSpacePass-6db805f2.js","./compilerUtils-fefa73ae.js","./requestImageUtils-d2d7b1fb.js","./SSAO.glsl-3068f7bf.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexArrayObject-3630ef4f.js","./mat4f32-77b3d8ac.js","./aaBoundingBox-4a83dbbc.js","./mat3-9a8d9db7.js","./quat-ec16a584.js","./vec3f32-4322908d.js","./SSAOBlur.glsl-ea338452.js","./NativeLineMaterial-cca722e5.js","./triangulationUtils-6b510de4.js","./earcut-58237617.js","./deduplicate-d92c3cc2.js","./dehydratedFeatures-3dcd65f1.js","./Field-1d4f9ca4.js","./enumeration-61a13175.js","./fieldType-b34e5d2d.js","./vec2f32-461e65a9.js","./NestedMap-1b5db22e.js","./floatRGBA-090399ba.js","./boundedPlane-296928f6.js","./MemCache-1d2f56ee.js","./Scheduler-5e6ccc87.js","./colorUtils-82440b70.js","./Identifiable-093f90a8.js","./DrawGraphicTool-926abcc3.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./HandleOwner-2edbba46.js","./GraphicsLayer-b332f442.js","./Layer-cea228f0.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./ScaleRangeLayer-c072e266.js","./automaticAreaMeasurementUtils-26544a0e.js","./GraphicManipulator-473c875a.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./jsonUtils-8c02ff16.js","./TranslateTooltipInfos-40f8c2db.js","./utils-4469bf65.js","./ItemCache-bf1028d4.js","./utils-c81a5c52.js","./Cyclical-078b4564.js","./axisAngleDegrees-700f0205.js","./persistable-f6bec6f5.js","./multiOriginJSONSupportUtils-c978f4c3.js","./ExtentTooltipInfos-f4055dd0.js"],import.meta.url));if(vi(n)||this.destroyed)return null;const{elevationInfo:i}=this.layer;return new n.module.DrawGraphicTool3D({...e,elevationInfo:i,snapToScene:!q(i)||i.mode==="absolute-height",labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions})}_setupCreateOperationHandle(e){let n=null;const i=e.forceUniformSize,s=e.centered,o=[this.view.on("key-down",a=>{if(a.key===Mt.pan)a.stopPropagation(),a.repeat||(e.enabled=!1);else if(a.key===Mt.complete)a.stopPropagation(),e.completeCreateOperation();else if(a.key!==Mt.vertexAdd||a.repeat)a.key===Mt.undo?(a.stopPropagation(),r.undo()):a.key===Mt.redo?(a.stopPropagation(),r.redo()):a.key!==Mt.snappingToggle||e.geometryType==="rectangle"||e.geometryType==="circle"||a.repeat?a.key!==Mt.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"||a.repeat?a.key===Mt.center&&(a.repeat||(e.centered=!s,a.stopPropagation())):(e.forceUniformSize=!i,a.stopPropagation()):(this.snappingOptions.enabledToggled=!0,a.stopPropagation());else{const l=e.drawOperation.geometryType;l!=="polyline"&&l!=="polygon"&&l!=="multipoint"||(a.stopPropagation(),e.drawOperation.commitStagedVertex())}},nt.WIDGET),this.view.on("key-up",a=>{a.key===Mt.pan?e.enabled=!0:a.key===Mt.snappingToggle&&e.geometryType!=="rectangle"&&e.geometryType!=="circle"?(this.snappingOptions.enabledToggled=!1,a.stopPropagation()):a.key!==Mt.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"?a.key===Mt.center&&(e.centered=s,a.stopPropagation()):(e.forceUniformSize=i,a.stopPropagation())},nt.WIDGET),e.on("vertex-add",a=>{switch(n=ke(n)?"start":"active",a.operation){case"apply":this.emit("create",{graphic:zt(e.graphic),state:n,tool:this.activeTool,toolEventInfo:a,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[zt(e.graphic)],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[zt(e.graphic)],tool:e.geometryType})}}),e.on("cursor-update",a=>{e.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:zt(e.graphic),state:"active",tool:this.activeTool,toolEventInfo:{coordinates:a.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),e.on("vertex-remove",a=>{switch(a.operation){case"apply":this.emit("create",{graphic:zt(e.graphic),state:"active",tool:this.activeTool,toolEventInfo:a,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[zt(e.graphic)],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[zt(e.graphic)],tool:e.geometryType})}}),e.on("complete",a=>{this._set("createGraphic",zt(a.graphic)),n="complete",a.aborted?r&&r.cancel():r&&r.complete()}),ge(()=>this._getGraphicSymbolFromTool(e.geometryType),a=>{e.graphicSymbol=a})],r=new by({activeComponent:e,tool:e.geometryType,type:"create",onEnd:()=>{var a;o.forEach(l=>l.remove()),o.length=0,(a=this.view.tools)==null||a.remove(e)},undo:()=>{e.canUndo&&e.undo()},redo:()=>{e.canRedo&&e.redo()},canUndo:()=>e.canUndo,canRedo:()=>e.canRedo});return r}_getGraphicSymbolFromTool(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol;default:return null}}async _setupUpdateOperation(e,n){const{layer:i,view:s}=this,o={tool:this._defaultUpdateTool,...this.defaultUpdateOptions,...n,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...n==null?void 0:n.reshapeOptions}};let r=o.tool;for(const a of e)i.remove(a),i.add(a);if(s.type==="3d"){if(e.length===0)return null;switch(r){case"move":return this._setupMove3DOperation(e,o,s,r);case"reshape":{if(e.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const a=ov(e[0]);return a===mn.SUPPORTED?this._setupReshape3DOperation(e[0],o,s):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${u0(a)}).`),null)}case"transform":return this._setupGraphicTransform3DOperation(e,o,s)}}switch(r){case"move":return this._setupMove2DOperation(e,o,s);case"reshape":{if(e.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const a=ov(e[0]);return a===mn.SUPPORTED?this._setupTransformOrReshape2DOperation(e,r,o,s):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${u0(a)}).`),null)}case"transform":if(e.length===1){const a=Ay(e[0].geometry,"type");a!=="point"&&a!=="multipoint"||(r="reshape")}return this._setupTransformOrReshape2DOperation(e,r,o,s)}}async _setupMove3DOperation(e,n,i,s,o=!1){for(const u of e){const d=STe(u);if(d!==mn.SUPPORTED)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${u0(d)}).`),null}const r=await this._requireModule(Fe(()=>import("./editingTools-9ef48f71.js").then(u=>u.e),["./editingTools-9ef48f71.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./reactiveUtils-5869e41a.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./elevationInfoUtils-c3025fae.js","./ElevationInfo-80227ecc.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./screenUtils-90993e16.js","./asyncUtils-087555fc.js","./automaticLengthMeasurementUtils-83ea356f.js","./intl-7d39a8c0.js","./number-2ab8ca0d.js","./locale-30120714.js","./messages-28bf3b89.js","./request-24011425.js","./assets-cd44347b.js","./widget-4abc68df.js","./Evented-cbf5f368.js","./Promise-368b703a.js","./uuid-73213768.js","./dom-5b7af1bf.js","./projection-acd73147.js","./mathUtils-57aba1ea.js","./vec4-46a9b36d.js","./SimpleObservable-8e532943.js","./mat4-7dde83b1.js","./aaBoundingRect-b340cf8c.js","./zscale-48bab05e.js","./geometryEngine-0f4f9d5a.js","./geometryEngineBase-3dd302e0.js","./hydrated-00dd97bc.js","./vec2-ab9f47bf.js","./vec2f64-30dc1443.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./vec4f32-2f36231b.js","./Octree-8ed6dc77.js","./sphere-622880b9.js","./vec4f64-939de194.js","./byteSizeEstimations-90c5a50d.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./plane-46a8c767.js","./Util-289ce3b5.js","./lineSegment-c6f0b9d1.js","./ViewingMode-915d19cb.js","./glUtil-7aa58841.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./InterleavedLayout-b5930508.js","./BufferView-478024d2.js","./types-e1c0a5bf.js","./SSAOHelper-dbb21920.js","./OrderIndependentTransparency-68bd812c.js","./triangle-8cd02c5d.js","./Indices-d9b791ce.js","./VertexAttribute-9c5c630d.js","./ScreenSpacePass-6db805f2.js","./compilerUtils-fefa73ae.js","./requestImageUtils-d2d7b1fb.js","./SSAO.glsl-3068f7bf.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexArrayObject-3630ef4f.js","./mat4f32-77b3d8ac.js","./aaBoundingBox-4a83dbbc.js","./mat3-9a8d9db7.js","./quat-ec16a584.js","./vec3f32-4322908d.js","./SSAOBlur.glsl-ea338452.js","./NativeLineMaterial-cca722e5.js","./triangulationUtils-6b510de4.js","./earcut-58237617.js","./deduplicate-d92c3cc2.js","./dehydratedFeatures-3dcd65f1.js","./Field-1d4f9ca4.js","./enumeration-61a13175.js","./fieldType-b34e5d2d.js","./vec2f32-461e65a9.js","./NestedMap-1b5db22e.js","./floatRGBA-090399ba.js","./boundedPlane-296928f6.js","./MemCache-1d2f56ee.js","./Scheduler-5e6ccc87.js","./colorUtils-82440b70.js","./Identifiable-093f90a8.js","./DrawGraphicTool-926abcc3.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./HandleOwner-2edbba46.js","./GraphicsLayer-b332f442.js","./Layer-cea228f0.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./ScaleRangeLayer-c072e266.js","./automaticAreaMeasurementUtils-26544a0e.js","./GraphicManipulator-473c875a.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./jsonUtils-8c02ff16.js","./TranslateTooltipInfos-40f8c2db.js","./utils-4469bf65.js","./ItemCache-bf1028d4.js","./utils-c81a5c52.js","./Cyclical-078b4564.js","./axisAngleDegrees-700f0205.js","./persistable-f6bec6f5.js","./multiOriginJSONSupportUtils-c978f4c3.js","./ExtentTooltipInfos-f4055dd0.js"],import.meta.url));if(vi(r))return r;const a=new r.module.GraphicMoveTool({view:i,enableZ:n.enableZ,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});this.view.tools.add(a),a.graphics.addMany(e),o||this.updateGraphics.addMany(e);const l=[],c=new Na({activeComponent:a,tool:s,type:"update",onEnd:()=>{var u;l.forEach(d=>d.remove()),l.length=0,(u=this.view.tools)==null||u.remove(a),a.destroyed||a.destroy()},undo:()=>{uv(c,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},redo:()=>{dv(c,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:u=>{this.updateGraphics.push(u),a.graphics.push(u),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[u],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:u=>{const d=this.updateGraphics.indexOf(u);c.history.undo.forEach(h=>h.updates.splice(d,1)),c.history.redo.forEach(h=>h.updates.splice(d,1)),this.updateGraphics.remove(u),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[u],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?a.graphics.remove(u):c.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||n.toggleToolOnClick===!1||s!=="transform")return;const u=this.updateGraphics.getItemAt(0);if(ov(u)!==mn.SUPPORTED)return;const d=await this._setupReshape3DOperation(u,n,i,!0);vi(d)||(c.onEnd(),c.destroy(),this._setUpdateOperationHandle(d,n))}});return l.push(...this._getHandlesForComponent(c,n),this.view.on("immediate-click",u=>this._getCommonUpdateOperationClickHandlers(c,u,n),nt.WIDGET),i.on("key-down",u=>{this._getCommonUpdateOperationKeyDownHandlers(c,u),u.key===Mt.snappingToggle&&(this.snappingOptions.enabledToggled=!0,u.stopPropagation())},nt.WIDGET),i.on("key-up",u=>{u.key===Mt.snappingToggle&&(this.snappingOptions.enabledToggled=!1,u.stopPropagation())},nt.WIDGET)),c}_setupGraphicTransform3DOperation(e,n,i,s=!1){if(e.length===1&&MTe(e[0])===mn.SUPPORTED){const o=e[0],r=o.geometry;if(q(r)&&(r.type==="point"||r.type==="mesh"))return this._setupPointTransform3DOperation(o,n,i);if(q(r)&&(r.type==="polygon"||r.type==="polyline"))return this._setupPolyTransform3DOperation(o,n,i,s)}return this._setupMove3DOperation(e,n,i,"transform",s)}async _setupPointTransform3DOperation(e,n,i){const s="transform",{enableRotation:o,enableScaling:r,enableZ:a}=n,l=await this._requireModule(Fe(()=>import("./editingTools-9ef48f71.js").then(h=>h.e),["./editingTools-9ef48f71.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./reactiveUtils-5869e41a.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./elevationInfoUtils-c3025fae.js","./ElevationInfo-80227ecc.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./screenUtils-90993e16.js","./asyncUtils-087555fc.js","./automaticLengthMeasurementUtils-83ea356f.js","./intl-7d39a8c0.js","./number-2ab8ca0d.js","./locale-30120714.js","./messages-28bf3b89.js","./request-24011425.js","./assets-cd44347b.js","./widget-4abc68df.js","./Evented-cbf5f368.js","./Promise-368b703a.js","./uuid-73213768.js","./dom-5b7af1bf.js","./projection-acd73147.js","./mathUtils-57aba1ea.js","./vec4-46a9b36d.js","./SimpleObservable-8e532943.js","./mat4-7dde83b1.js","./aaBoundingRect-b340cf8c.js","./zscale-48bab05e.js","./geometryEngine-0f4f9d5a.js","./geometryEngineBase-3dd302e0.js","./hydrated-00dd97bc.js","./vec2-ab9f47bf.js","./vec2f64-30dc1443.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./vec4f32-2f36231b.js","./Octree-8ed6dc77.js","./sphere-622880b9.js","./vec4f64-939de194.js","./byteSizeEstimations-90c5a50d.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./plane-46a8c767.js","./Util-289ce3b5.js","./lineSegment-c6f0b9d1.js","./ViewingMode-915d19cb.js","./glUtil-7aa58841.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./InterleavedLayout-b5930508.js","./BufferView-478024d2.js","./types-e1c0a5bf.js","./SSAOHelper-dbb21920.js","./OrderIndependentTransparency-68bd812c.js","./triangle-8cd02c5d.js","./Indices-d9b791ce.js","./VertexAttribute-9c5c630d.js","./ScreenSpacePass-6db805f2.js","./compilerUtils-fefa73ae.js","./requestImageUtils-d2d7b1fb.js","./SSAO.glsl-3068f7bf.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexArrayObject-3630ef4f.js","./mat4f32-77b3d8ac.js","./aaBoundingBox-4a83dbbc.js","./mat3-9a8d9db7.js","./quat-ec16a584.js","./vec3f32-4322908d.js","./SSAOBlur.glsl-ea338452.js","./NativeLineMaterial-cca722e5.js","./triangulationUtils-6b510de4.js","./earcut-58237617.js","./deduplicate-d92c3cc2.js","./dehydratedFeatures-3dcd65f1.js","./Field-1d4f9ca4.js","./enumeration-61a13175.js","./fieldType-b34e5d2d.js","./vec2f32-461e65a9.js","./NestedMap-1b5db22e.js","./floatRGBA-090399ba.js","./boundedPlane-296928f6.js","./MemCache-1d2f56ee.js","./Scheduler-5e6ccc87.js","./colorUtils-82440b70.js","./Identifiable-093f90a8.js","./DrawGraphicTool-926abcc3.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./HandleOwner-2edbba46.js","./GraphicsLayer-b332f442.js","./Layer-cea228f0.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./ScaleRangeLayer-c072e266.js","./automaticAreaMeasurementUtils-26544a0e.js","./GraphicManipulator-473c875a.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./jsonUtils-8c02ff16.js","./TranslateTooltipInfos-40f8c2db.js","./utils-4469bf65.js","./ItemCache-bf1028d4.js","./utils-c81a5c52.js","./Cyclical-078b4564.js","./axisAngleDegrees-700f0205.js","./persistable-f6bec6f5.js","./multiOriginJSONSupportUtils-c978f4c3.js","./ExtentTooltipInfos-f4055dd0.js"],import.meta.url));if(vi(l))return l;const c=new l.module.GraphicTransformTool({graphic:e,view:i,enableRotation:o,enableScaling:r,enableZ:a,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});this.view.tools.add(c),this.updateGraphics.add(e);const u=[],d=new Na({activeComponent:c,tool:s,type:"update",onEnd:()=>{var h;u.forEach(f=>f.remove()),u.length=0,(h=this.view.tools)==null||h.remove(c),c.destroyed||c.destroy()},undo:()=>{uv(d,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},redo:()=>{dv(d,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:async h=>{this.updateGraphics.add(h),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[h],removed:[],type:"selection-change"},type:"update"});const f=await this._setupMove3DOperation(this.updateGraphics.toArray(),n,i,"transform",!0);vi(f)||(d.onEnd(),d.destroy(),this._setUpdateOperationHandle(f,n))},removeFromSelection:h=>{this.updateGraphics.remove(h),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[h],type:"selection-change"},type:"update"}),d.complete()},toggleTool:()=>{}});return u.push(...this._getHandlesForComponent(d,n),this.view.on("immediate-click",h=>this._getCommonUpdateOperationClickHandlers(d,h,n),nt.WIDGET),i.on("key-down",h=>{this._getCommonUpdateOperationKeyDownHandlers(d,h),h.key===Mt.snappingToggle&&(this.snappingOptions.enabledToggled=!0,h.stopPropagation())},nt.WIDGET),i.on("key-up",h=>{h.key===Mt.snappingToggle&&(this.snappingOptions.enabledToggled=!1,h.stopPropagation())},nt.WIDGET)),d}async _setupPolyTransform3DOperation(e,n,i,s=!1){const o="transform",{enableRotation:r,enableScaling:a,enableZ:l,preserveAspectRatio:c}=n,u=await this._requireModule(Fe(()=>import("./editingTools-9ef48f71.js").then(m=>m.e),["./editingTools-9ef48f71.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./reactiveUtils-5869e41a.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./elevationInfoUtils-c3025fae.js","./ElevationInfo-80227ecc.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./screenUtils-90993e16.js","./asyncUtils-087555fc.js","./automaticLengthMeasurementUtils-83ea356f.js","./intl-7d39a8c0.js","./number-2ab8ca0d.js","./locale-30120714.js","./messages-28bf3b89.js","./request-24011425.js","./assets-cd44347b.js","./widget-4abc68df.js","./Evented-cbf5f368.js","./Promise-368b703a.js","./uuid-73213768.js","./dom-5b7af1bf.js","./projection-acd73147.js","./mathUtils-57aba1ea.js","./vec4-46a9b36d.js","./SimpleObservable-8e532943.js","./mat4-7dde83b1.js","./aaBoundingRect-b340cf8c.js","./zscale-48bab05e.js","./geometryEngine-0f4f9d5a.js","./geometryEngineBase-3dd302e0.js","./hydrated-00dd97bc.js","./vec2-ab9f47bf.js","./vec2f64-30dc1443.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./vec4f32-2f36231b.js","./Octree-8ed6dc77.js","./sphere-622880b9.js","./vec4f64-939de194.js","./byteSizeEstimations-90c5a50d.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./plane-46a8c767.js","./Util-289ce3b5.js","./lineSegment-c6f0b9d1.js","./ViewingMode-915d19cb.js","./glUtil-7aa58841.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./InterleavedLayout-b5930508.js","./BufferView-478024d2.js","./types-e1c0a5bf.js","./SSAOHelper-dbb21920.js","./OrderIndependentTransparency-68bd812c.js","./triangle-8cd02c5d.js","./Indices-d9b791ce.js","./VertexAttribute-9c5c630d.js","./ScreenSpacePass-6db805f2.js","./compilerUtils-fefa73ae.js","./requestImageUtils-d2d7b1fb.js","./SSAO.glsl-3068f7bf.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexArrayObject-3630ef4f.js","./mat4f32-77b3d8ac.js","./aaBoundingBox-4a83dbbc.js","./mat3-9a8d9db7.js","./quat-ec16a584.js","./vec3f32-4322908d.js","./SSAOBlur.glsl-ea338452.js","./NativeLineMaterial-cca722e5.js","./triangulationUtils-6b510de4.js","./earcut-58237617.js","./deduplicate-d92c3cc2.js","./dehydratedFeatures-3dcd65f1.js","./Field-1d4f9ca4.js","./enumeration-61a13175.js","./fieldType-b34e5d2d.js","./vec2f32-461e65a9.js","./NestedMap-1b5db22e.js","./floatRGBA-090399ba.js","./boundedPlane-296928f6.js","./MemCache-1d2f56ee.js","./Scheduler-5e6ccc87.js","./colorUtils-82440b70.js","./Identifiable-093f90a8.js","./DrawGraphicTool-926abcc3.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./HandleOwner-2edbba46.js","./GraphicsLayer-b332f442.js","./Layer-cea228f0.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./ScaleRangeLayer-c072e266.js","./automaticAreaMeasurementUtils-26544a0e.js","./GraphicManipulator-473c875a.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./jsonUtils-8c02ff16.js","./TranslateTooltipInfos-40f8c2db.js","./utils-4469bf65.js","./ItemCache-bf1028d4.js","./utils-c81a5c52.js","./Cyclical-078b4564.js","./axisAngleDegrees-700f0205.js","./persistable-f6bec6f5.js","./multiOriginJSONSupportUtils-c978f4c3.js","./ExtentTooltipInfos-f4055dd0.js"],import.meta.url));if(vi(u))return u;const d=new u.module.ExtentTransformTool({graphic:e,view:i,enableRotation:r,enableScaling:a,enableZ:l,preserveAspectRatio:c,tooltipOptions:this.tooltipOptions});this.view.tools.add(d),s||this.updateGraphics.add(e);const h=[],f=new Na({activeComponent:d,tool:o,type:"update",onEnd:()=>{var m;h.forEach(g=>g.remove()),h.length=0,(m=this.view.tools)==null||m.remove(d),d.destroyed||d.destroy()},canUndo:()=>d.canUndo,undo:()=>{d.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:o})},canRedo:()=>d.canRedo,redo:()=>{d.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:o})},addToSelection:async m=>{this.updateGraphics.add(m),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[m],removed:[],type:"selection-change"},type:"update"});const g=await this._setupMove3DOperation(this.updateGraphics.toArray(),n,i,"transform",!0);vi(g)||(f.onEnd(),f.destroy(),this._setUpdateOperationHandle(g,n))},removeFromSelection:m=>{this.updateGraphics.remove(m),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[m],type:"selection-change"},type:"update"}),f.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||n.toggleToolOnClick===!1)return;const m=this.updateGraphics.getItemAt(0);if(ov(m)!==mn.SUPPORTED)return;const g=await this._setupReshape3DOperation(m,n,i,!0);vi(g)||(f.onEnd(),f.destroy(),this._setUpdateOperationHandle(g,n))}});return h.push(...this._getHandlesForComponent(f,n),this.view.on("immediate-click",m=>this._getCommonUpdateOperationClickHandlers(f,m,n),nt.WIDGET),this.view.on("key-down",m=>this._getCommonUpdateOperationKeyDownHandlers(f,m),nt.WIDGET),this.view.on("key-down",m=>{m.key!==Mt.constraint||m.repeat||(d.preserveAspectRatio=!d.preserveAspectRatio,m.stopPropagation())},nt.WIDGET),this.view.on("key-up",m=>{m.key===Mt.constraint&&(d.preserveAspectRatio=!d.preserveAspectRatio,m.stopPropagation())},nt.WIDGET)),f}async _setupMove2DOperation(e,n,i){const s="move";this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const o=await this._getGraphicMover(e,n,i);if(vi(o))return o;const r=new Na({activeComponent:o,tool:s,type:"update",onEnd:()=>{var u;this._displayDefaultCursor(),c.forEach(d=>d.remove()),l.forEach(d=>d.remove()),c=[],l=[],o.destroy(),(u=this._internalGraphicsLayer)==null||u.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const u=this.updateGraphics.toArray();uv(r,u),r.refreshComponent(),this._emitUndoEvent({graphics:u,tool:s})},redo:()=>{const u=this.updateGraphics.toArray();dv(r,u),r.refreshComponent(),this._emitRedoEvent({graphics:u,tool:s})},addToSelection:async u=>{await this._updateSpatialReference(u),this.updateGraphics.push(u),o.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[u],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:u=>{const d=this.updateGraphics.indexOf(u);r.history.undo.forEach(f=>f.updates.splice(d,1)),r.history.redo.forEach(f=>f.updates.splice(d,1)),this.updateGraphics.remove(u);const h=this.updateGraphics.toArray();this.emit("update",{graphics:h,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[u],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?o.graphics=h:r.complete()}});let a=!1,l=[i.on("immediate-click",u=>this._getCommonUpdateOperationClickHandlers(r,u,n),nt.WIDGET),i.on("key-down",u=>{this._getCommonUpdateOperationKeyDownHandlers(r,u),u.key!==Mt.constraint||u.repeat||(a=!0,o.enableMoveAllGraphics=!o.enableMoveAllGraphics)},nt.WIDGET),i.on("key-up",u=>{u.key===Mt.constraint&&a&&(a=!1,o.enableMoveAllGraphics=!o.enableMoveAllGraphics)},nt.WIDGET)],c=this._getHandlesForComponent(r,n);return r}async _setupReshape3DOperation(e,n,i,s=!1){const o="reshape",r=await this._requireModule(Fe(()=>import("./editingTools-9ef48f71.js").then(u=>u.e),["./editingTools-9ef48f71.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./reactiveUtils-5869e41a.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./elevationInfoUtils-c3025fae.js","./ElevationInfo-80227ecc.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./screenUtils-90993e16.js","./asyncUtils-087555fc.js","./automaticLengthMeasurementUtils-83ea356f.js","./intl-7d39a8c0.js","./number-2ab8ca0d.js","./locale-30120714.js","./messages-28bf3b89.js","./request-24011425.js","./assets-cd44347b.js","./widget-4abc68df.js","./Evented-cbf5f368.js","./Promise-368b703a.js","./uuid-73213768.js","./dom-5b7af1bf.js","./projection-acd73147.js","./mathUtils-57aba1ea.js","./vec4-46a9b36d.js","./SimpleObservable-8e532943.js","./mat4-7dde83b1.js","./aaBoundingRect-b340cf8c.js","./zscale-48bab05e.js","./geometryEngine-0f4f9d5a.js","./geometryEngineBase-3dd302e0.js","./hydrated-00dd97bc.js","./vec2-ab9f47bf.js","./vec2f64-30dc1443.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./vec4f32-2f36231b.js","./Octree-8ed6dc77.js","./sphere-622880b9.js","./vec4f64-939de194.js","./byteSizeEstimations-90c5a50d.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./plane-46a8c767.js","./Util-289ce3b5.js","./lineSegment-c6f0b9d1.js","./ViewingMode-915d19cb.js","./glUtil-7aa58841.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./InterleavedLayout-b5930508.js","./BufferView-478024d2.js","./types-e1c0a5bf.js","./SSAOHelper-dbb21920.js","./OrderIndependentTransparency-68bd812c.js","./triangle-8cd02c5d.js","./Indices-d9b791ce.js","./VertexAttribute-9c5c630d.js","./ScreenSpacePass-6db805f2.js","./compilerUtils-fefa73ae.js","./requestImageUtils-d2d7b1fb.js","./SSAO.glsl-3068f7bf.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexArrayObject-3630ef4f.js","./mat4f32-77b3d8ac.js","./aaBoundingBox-4a83dbbc.js","./mat3-9a8d9db7.js","./quat-ec16a584.js","./vec3f32-4322908d.js","./SSAOBlur.glsl-ea338452.js","./NativeLineMaterial-cca722e5.js","./triangulationUtils-6b510de4.js","./earcut-58237617.js","./deduplicate-d92c3cc2.js","./dehydratedFeatures-3dcd65f1.js","./Field-1d4f9ca4.js","./enumeration-61a13175.js","./fieldType-b34e5d2d.js","./vec2f32-461e65a9.js","./NestedMap-1b5db22e.js","./floatRGBA-090399ba.js","./boundedPlane-296928f6.js","./MemCache-1d2f56ee.js","./Scheduler-5e6ccc87.js","./colorUtils-82440b70.js","./Identifiable-093f90a8.js","./DrawGraphicTool-926abcc3.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./HandleOwner-2edbba46.js","./GraphicsLayer-b332f442.js","./Layer-cea228f0.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./ScaleRangeLayer-c072e266.js","./automaticAreaMeasurementUtils-26544a0e.js","./GraphicManipulator-473c875a.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./jsonUtils-8c02ff16.js","./TranslateTooltipInfos-40f8c2db.js","./utils-4469bf65.js","./ItemCache-bf1028d4.js","./utils-c81a5c52.js","./Cyclical-078b4564.js","./axisAngleDegrees-700f0205.js","./persistable-f6bec6f5.js","./multiOriginJSONSupportUtils-c978f4c3.js","./ExtentTooltipInfos-f4055dd0.js"],import.meta.url));if(vi(r))return r;this.snappingOptions.enabledToggled=!1;const a=new r.module.GraphicReshapeTool({view:i,graphic:e,enableZVertex:n.enableZ&&n.reshapeOptions.vertexOperation==="move",enableZShape:n.enableZ&&n.reshapeOptions.shapeOperation==="move",enableMoveGraphic:n.reshapeOptions.shapeOperation==="move"||n.reshapeOptions.shapeOperation==="move-xy",enableMidpoints:n.reshapeOptions.edgeOperation==="split",enableEdgeOffset:n.reshapeOptions.edgeOperation==="offset",snappingManager:this._snappingManager,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions});i.tools.add(a),s||this.updateGraphics.add(e);const l=[],c=new Na({activeComponent:a,tool:o,type:"update",onEnd:()=>{var u;l.forEach(d=>d.remove()),l.length=0,(u=this.view.tools)==null||u.remove(a),a.destroyed||a.destroy()},canUndo:()=>a.canUndo,undo:()=>{a.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:o})},canRedo:()=>a.canRedo,redo:()=>{a.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:o})},addToSelection:async u=>{this.updateGraphics.add(u),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[u],removed:[],type:"selection-change"},type:"update"});const d=await this._setupMove3DOperation(this.updateGraphics.toArray(),n,i,"transform",!0);vi(d)||(c.onEnd(),c.destroy(),this._setUpdateOperationHandle(d,n))},removeFromSelection:u=>{this.updateGraphics.remove(u),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[u],type:"selection-change"},type:"update"}),c.complete()},toggleTool:async()=>{if(n.toggleToolOnClick===!1)return;const u=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),n,i,!0);vi(u)||(c.onEnd(),c.destroy(),this._setUpdateOperationHandle(u,n))}});return l.push(...this._getHandlesForComponent(c,n),i.on("immediate-click",u=>this._getCommonUpdateOperationClickHandlers(c,u,n),nt.WIDGET),i.on("key-down",u=>{this._getCommonUpdateOperationKeyDownHandlers(c,u),u.key===Mt.snappingToggle&&(this.snappingOptions.enabledToggled=!0,u.stopPropagation())},nt.WIDGET),i.on("key-up",u=>{u.key===Mt.snappingToggle&&(this.snappingOptions.enabledToggled=!1,u.stopPropagation())},nt.WIDGET)),c}async _setupTransformOrReshape2DOperation(e,n,i,s){this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const o=n==="transform"?await this._getBox(e,i,s):await this._getReshape(e,i,s);if(vi(o))return o;const r=new Na({activeComponent:o,type:"update",onEnd:()=>{l.forEach(c=>c.remove()),a.forEach(c=>c.remove()),l=[],a=[],r.activeComponent&&!r.activeComponent.destroyed&&r.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{uv(r,this.updateGraphics.toArray()),r.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r.tool})},redo:()=>{dv(r,this.updateGraphics.toArray()),r.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r.tool})},addToSelection:async c=>{let u=r.activeComponent;if(u.type==="reshape"){const d=[...this.updateGraphics,c];this.updateGraphics.removeAll();const h=await this._setupMove2DOperation(d,i,s);if(vi(h))return;r.onEnd(),r.destroy(),this._setUpdateOperationHandle(h,i)}else this.updateGraphics.add(c),u.graphics=this.updateGraphics.toArray(),u.refresh(),r.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[c],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async c=>{const u=this.updateGraphics.indexOf(c);r.history.undo.forEach(h=>h.updates.splice(u,1)),r.history.redo.forEach(h=>h.updates.splice(u,1)),this.updateGraphics.remove(c);const d=this.updateGraphics.toArray();if(d.length===0)r.complete();else{const h=d[0].geometry;d.length!==1||!q(h)||h.type!=="point"&&h.type!=="multipoint"?r.activeComponent.graphics=d:r.toggleTool()}this.emit("update",{graphics:d,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[c],type:"selection-change"},type:"update"})},toggleTool:async()=>{if(this.updateGraphics.length>1)return;const c=this.updateGraphics.getItemAt(0),u=c.geometry;if(q(u)&&(r.tool==="reshape"&&(u.type==="point"||u.type==="multipoint")||r.tool==="transform"&&u.type==="extent"))return;let d=null;r.tool==="transform"?d=await this._getReshape([c],i,s):r.tool==="reshape"&&(d=await this._getBox([c],i,s)),vi(d)||(r.activeComponent.destroy(),r.activeComponent=d,r.activeComponent&&(l.forEach(h=>h.remove()),l=this._getHandlesForComponent(r,i)))}});let a=[s.on("immediate-click",c=>this._getCommonUpdateOperationClickHandlers(r,c,i),nt.WIDGET),s.on("key-down",c=>{if(this._getCommonUpdateOperationKeyDownHandlers(r,c),c.key!==Mt.snappingToggle||c.repeat||(this.snappingOptions.enabledToggled=!0,c.stopPropagation()),c.key===Mt.constraint&&!c.repeat&&r){const u=r.activeComponent;u&&u.type==="box"&&(u.preserveAspectRatio=!u.preserveAspectRatio)}},nt.WIDGET),s.on("key-up",c=>{var u;if(c.key===Mt.snappingToggle&&((u=r==null?void 0:r.activeComponent)==null?void 0:u.type)==="reshape"&&(this.snappingOptions.enabledToggled=!1,c.stopPropagation()),c.key===Mt.constraint&&r){const d=r.activeComponent;d&&d.type==="box"&&(d.preserveAspectRatio=!d.preserveAspectRatio)}},nt.WIDGET)],l=this._getHandlesForComponent(r,i);return r}async _getGraphicMover(e,n,i){const{enableMoveAllGraphics:s}=n,o=await this._requireModule(Fe(()=>import("./GraphicMover-a40d20da.js").then(r=>r.G),["./GraphicMover-a40d20da.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./enumeration-61a13175.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./locale-30120714.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./Clonable-9b34e760.js","./reactiveUtils-5869e41a.js","./GraphicsLayer-b332f442.js","./HandleOwner-2edbba46.js","./Layer-cea228f0.js","./Identifiable-093f90a8.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./mat4-7dde83b1.js","./ScaleRangeLayer-c072e266.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./number-2ab8ca0d.js","./jsonUtils-c6684c52.js","./ElevationInfo-80227ecc.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./GraphicManipulator-473c875a.js","./vec2-ab9f47bf.js","./projection-acd73147.js","./assets-cd44347b.js","./zscale-48bab05e.js","./elevationInfoUtils-c3025fae.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./jsonUtils-8c02ff16.js"],import.meta.url));return vi(o)?o:new o.module.default({enableMoveAllGraphics:s,highlightsEnabled:!0,indicatorsEnabled:!1,graphics:e,view:i,callbacks:{onGraphicMoveStart:({dx:r,dy:a,graphic:l})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:r,dy:a,mover:l,type:"move-start"},type:"update"})},onGraphicMove:({dx:r,dy:a,graphic:l})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:r,dy:a,mover:l,type:"move"},type:"update"}),onGraphicMoveStop:({dx:r,dy:a,graphic:l})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:r,dy:a,mover:l,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(e,n,i){const{enableRotation:s,enableScaling:o,preserveAspectRatio:r}=n,a=await this._requireModule(Fe(()=>import("./Box-318f7f6e.js"),["./Box-318f7f6e.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./enumeration-61a13175.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./automaticLengthMeasurementUtils-83ea356f.js","./reactiveUtils-5869e41a.js","./intl-7d39a8c0.js","./messages-28bf3b89.js","./assets-cd44347b.js","./unitUtils-dd6fb8ee.js","./widget-4abc68df.js","./uuid-73213768.js","./dom-5b7af1bf.js","./projection-acd73147.js","./mat4-7dde83b1.js","./zscale-48bab05e.js","./geometryEngine-0f4f9d5a.js","./geometryEngineBase-3dd302e0.js","./hydrated-00dd97bc.js","./GraphicMover-a40d20da.js","./GraphicsLayer-b332f442.js","./HandleOwner-2edbba46.js","./Layer-cea228f0.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./ScaleRangeLayer-c072e266.js","./ElevationInfo-80227ecc.js","./lengthUtils-92fed992.js","./GraphicManipulator-473c875a.js","./vec2-ab9f47bf.js","./elevationInfoUtils-c3025fae.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./jsonUtils-8c02ff16.js","./ExtentTooltipInfos-f4055dd0.js","./TranslateTooltipInfos-40f8c2db.js","./Basemap-59ed9516.js","./deprecate-0d93948c.js","./loadAll-01cdf0a9.js","./asyncUtils-087555fc.js","./PortalItem-e4ba4b94.js","./writeUtils-3bde6e49.js","./layerUtils-68eea656.js","./compilerUtils-fefa73ae.js","./CollectionFlattener-f43a0fce.js","./TablesMixin-55858fba.js","./Cyclical-078b4564.js","./workers-af024c50.js","./Connection-b591250e.js","./Queue-275a6362.js","./TileInfo-c5c8c8d2.js","./byteSizeEstimations-90c5a50d.js","./executeQueryJSON-29279a46.js","./normalizeUtils-0f537694.js","./query-b7b3a76b.js","./pbfQueryUtils-c922ef32.js","./pbf-8b0546e8.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./queryZScale-3c8de33a.js","./FeatureSet-deb2029d.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./RelationshipQuery-c27267ab.js","./LegendOptions-2e7b3d70.js","./utils-4469bf65.js","./ItemCache-bf1028d4.js","./MemCache-1d2f56ee.js","./utils-c81a5c52.js","./jsonUtils-1c5cdf77.js","./UniqueValueRenderer-73d567ad.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./styleUtils-391927cf.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./heatmapUtils-3d7c22c5.js","./vec4f64-939de194.js","./featureConversionUtils-d2229ed4.js","./TopFeaturesQuery-9aca00bf.js","./FeatureLayer-534ff006.js","./MultiOriginJSONSupport-b8792dfa.js","./LayerFloorInfo-f184c8f5.js","./FeatureLayerBase-c0aa3674.js","./HeightModelInfo-34f16d74.js","./arcgisLayerUrl-bed3cba1.js","./OperationalLayer-9c50475b.js","./editsZScale-12d81957.js","./APIKeyMixin-b6e4f897.js","./ArcGISService-aada3b5d.js","./CustomParametersMixin-a5d06ccc.js","./EditBusLayer-b5dc3689.js","./FeatureReductionLayer-fcaeb34a.js","./OrderedLayer-9623e905.js","./PortalLayer-12f4a535.js","./RefreshableLayer-49182ab8.js","./TemporalLayer-c74d13d4.js","./TimeInfo-f76d6c20.js","./FeatureTemplate-c4496b93.js","./FeatureType-0be9420b.js","./fieldProperties-4207e953.js","./FieldsIndex-02142c8a.js","./versionUtils-fabd8b3a.js","./styleUtils-08eaa4d2.js","./popupUtils-1ecc877c.js","./colorUtils-82440b70.js","./mat2d-d0b91e3e.js","./Scheduler-5e6ccc87.js","./ViewingMode-915d19cb.js","./unitBezier-881ac1eb.js","./vec2f64-30dc1443.js","./mat3-9a8d9db7.js","./mat3f32-d3d088e8.js","./vec2f32-461e65a9.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./capabilities-d08b6e58.js","./context-util-d4c193b5.js","./Subtype-a3103d84.js","./datetime-4f774298.js","./QueryEngineResult-92e13fe4.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./WhereClause-6c9440a1.js","./utils-44a68fd6.js","./json-48e3ea08.js","./Util-289ce3b5.js","./EffectView-dffeb0bc.js","./ExportImageParameters-ba01802d.js","./sublayerUtils-eea48c01.js","./webStyleSymbolUtils-0b165621.js","./devEnvironmentUtils-5002a058.js","./dehydratedFeatures-3dcd65f1.js","./enums-4b2a86a0.js","./plane-46a8c767.js","./sphere-622880b9.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./quat-ec16a584.js"],import.meta.url));return vi(a)?a:new a.module.default({graphics:e,enableRotation:s,enableScaling:o,preserveAspectRatio:r,layer:this._internalGraphicsLayer,view:i,tooltipOptions:this.tooltipOptions,callbacks:{onMoveStart:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"}),onMove:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"}),onMoveStop:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"}),onScaleStart:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"}),onScale:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"}),onScaleStop:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"}),onRotateStart:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"}),onRotate:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"}),onRotateStop:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"})}})}async _getReshape(e,n,i){var a,l;const s=((a=n.reshapeOptions)==null?void 0:a.edgeOperation)==="split",o=((l=n.reshapeOptions)==null?void 0:l.shapeOperation)==="move",r=await this._requireModule(Fe(()=>import("./Reshape-1cec0d7b.js"),["./Reshape-1cec0d7b.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./geometry-eec1b371.js","./Extent-a1a1de42.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./jsonMap-190c5593.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./Clonable-9b34e760.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./enumeration-61a13175.js","./number-2ab8ca0d.js","./locale-30120714.js","./Identifiable-093f90a8.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./jsonUtils-c6684c52.js","./asyncUtils-087555fc.js","./automaticLengthMeasurementUtils-83ea356f.js","./reactiveUtils-5869e41a.js","./intl-7d39a8c0.js","./messages-28bf3b89.js","./assets-cd44347b.js","./unitUtils-dd6fb8ee.js","./widget-4abc68df.js","./uuid-73213768.js","./dom-5b7af1bf.js","./projection-acd73147.js","./mat4-7dde83b1.js","./zscale-48bab05e.js","./geometryEngine-0f4f9d5a.js","./geometryEngineBase-3dd302e0.js","./hydrated-00dd97bc.js","./GraphicsLayer-b332f442.js","./HandleOwner-2edbba46.js","./Layer-cea228f0.js","./BlendLayer-813950f9.js","./parser-01f6451e.js","./mat4f32-77b3d8ac.js","./ScaleRangeLayer-c072e266.js","./ElevationInfo-80227ecc.js","./lengthUtils-92fed992.js","./ViewingMode-915d19cb.js","./GraphicMover-a40d20da.js","./GraphicManipulator-473c875a.js","./vec2-ab9f47bf.js","./elevationInfoUtils-c3025fae.js","./labelingInfo-c70ad911.js","./labelUtils-4f4b54c6.js","./defaultsJSON-59981e75.js","./jsonUtils-8c02ff16.js","./TranslateTooltipInfos-40f8c2db.js","./automaticAreaMeasurementUtils-26544a0e.js","./earcut-58237617.js","./plane-46a8c767.js","./sphere-622880b9.js","./vec4f64-939de194.js","./byteSizeEstimations-90c5a50d.js","./quatf64-c94bd656.js","./mat4f64-fbeb2cd1.js","./vec2f64-30dc1443.js","./triangle-8cd02c5d.js","./lineSegment-c6f0b9d1.js","./Basemap-59ed9516.js","./deprecate-0d93948c.js","./loadAll-01cdf0a9.js","./PortalItem-e4ba4b94.js","./writeUtils-3bde6e49.js","./layerUtils-68eea656.js","./compilerUtils-fefa73ae.js","./CollectionFlattener-f43a0fce.js","./TablesMixin-55858fba.js","./Cyclical-078b4564.js","./workers-af024c50.js","./Connection-b591250e.js","./Queue-275a6362.js","./TileInfo-c5c8c8d2.js","./executeQueryJSON-29279a46.js","./normalizeUtils-0f537694.js","./query-b7b3a76b.js","./pbfQueryUtils-c922ef32.js","./pbf-8b0546e8.js","./OptimizedFeature-73582c6e.js","./OptimizedFeatureSet-1d1ac4b9.js","./queryZScale-3c8de33a.js","./FeatureSet-deb2029d.js","./Field-1d4f9ca4.js","./fieldType-b34e5d2d.js","./Query-13124a97.js","./TimeExtent-2004eecf.js","./RelationshipQuery-c27267ab.js","./LegendOptions-2e7b3d70.js","./utils-4469bf65.js","./ItemCache-bf1028d4.js","./MemCache-1d2f56ee.js","./utils-c81a5c52.js","./jsonUtils-1c5cdf77.js","./UniqueValueRenderer-73d567ad.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./styleUtils-391927cf.js","./DictionaryLoader-2a334243.js","./LRUCache-b9228ca3.js","./heatmapUtils-3d7c22c5.js","./featureConversionUtils-d2229ed4.js","./TopFeaturesQuery-9aca00bf.js","./FeatureLayer-534ff006.js","./MultiOriginJSONSupport-b8792dfa.js","./LayerFloorInfo-f184c8f5.js","./FeatureLayerBase-c0aa3674.js","./HeightModelInfo-34f16d74.js","./arcgisLayerUrl-bed3cba1.js","./OperationalLayer-9c50475b.js","./editsZScale-12d81957.js","./APIKeyMixin-b6e4f897.js","./ArcGISService-aada3b5d.js","./CustomParametersMixin-a5d06ccc.js","./EditBusLayer-b5dc3689.js","./FeatureReductionLayer-fcaeb34a.js","./OrderedLayer-9623e905.js","./PortalLayer-12f4a535.js","./RefreshableLayer-49182ab8.js","./TemporalLayer-c74d13d4.js","./TimeInfo-f76d6c20.js","./FeatureTemplate-c4496b93.js","./FeatureType-0be9420b.js","./fieldProperties-4207e953.js","./FieldsIndex-02142c8a.js","./versionUtils-fabd8b3a.js","./styleUtils-08eaa4d2.js","./popupUtils-1ecc877c.js","./colorUtils-82440b70.js","./mat2d-d0b91e3e.js","./Scheduler-5e6ccc87.js","./unitBezier-881ac1eb.js","./mat3-9a8d9db7.js","./mat3f32-d3d088e8.js","./vec2f32-461e65a9.js","./TileStrategy-a5366189.js","./TileStore-8f580dbf.js","./TileKey-9cae9369.js","./rbush-8e36784a.js","./quickselect-322ec8e1.js","./capabilities-d08b6e58.js","./context-util-d4c193b5.js","./Subtype-a3103d84.js","./datetime-4f774298.js","./QueryEngineResult-92e13fe4.js","./utils-52ad3c09.js","./generateRendererUtils-2f0b667c.js","./WhereClause-6c9440a1.js","./utils-44a68fd6.js","./json-48e3ea08.js","./Util-289ce3b5.js","./EffectView-dffeb0bc.js","./ExportImageParameters-ba01802d.js","./sublayerUtils-eea48c01.js","./webStyleSymbolUtils-0b165621.js","./devEnvironmentUtils-5002a058.js","./dehydratedFeatures-3dcd65f1.js","./enums-4b2a86a0.js","./quat-ec16a584.js"],import.meta.url));return vi(r)?r:new r.module.default({enableMidpoints:s,enableMovement:o,graphic:e[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions,view:i,callbacks:{onReshapeStart:c=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...c},type:"update"}),onReshape:c=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...c},type:"update"}),onReshapeStop:({mover:c,type:u})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:c,type:u},type:"update"}),onMoveStart:({dx:c,dy:u,mover:d,type:h})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:c,dy:u,mover:d,type:h},type:"update"}),onMove:({dx:c,dy:u,mover:d,type:h})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:c,dy:u,mover:d,type:h},type:"update"}),onMoveStop:({dx:c,dy:u,mover:d,type:h})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:c,dy:u,mover:d,type:h},type:"update"}),onVertexAdd:({added:c,type:u,vertices:d})=>{const h=c.map(f=>Rp(f.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:h,vertices:d,type:u},type:"update"})},onVertexRemove:({removed:c,type:u,vertices:d})=>{const h=c.map(f=>Rp(f.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:h,vertices:d,type:u},type:"update"})}}})}_getHandlesForComponent(e,n){const i=e.activeComponent;switch(i.type){case"graphic-mover":return[i.on("graphic-click",({graphic:s,viewEvent:o})=>{var r;(r=o.native)!=null&&r.shiftKey&&(o.stopPropagation(),e.removeFromSelection(s))}),i.on("graphic-move-start",s=>e.addToHistory(va(s.allGraphics)))];case"box":return[i.on("graphic-click",s=>this._onTransformOrReshape2DGraphicClick(e,n,s)),i.on("move-start",s=>e.addToHistory(va(s.graphics))),i.on("rotate-start",s=>e.addToHistory(va(s.graphics))),i.on("scale-start",s=>e.addToHistory(va(s.graphics)))];case"reshape":return[i.on("graphic-click",s=>this._onTransformOrReshape2DGraphicClick(e,n,s)),i.on("move-start",s=>e.addToHistory(va([s.mover]))),i.on("reshape-start",s=>e.addToHistory(va([s.graphic]))),i.on("vertex-add",s=>e.addToHistory(va([s.oldGraphic]))),i.on("vertex-remove",s=>e.addToHistory(va([s.oldGraphic])))];case"move-3d":return[i.on("graphic-move-start",s=>{e.addToHistory(va(s.allGraphics)),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:s.allGraphics.length>0?s.allGraphics[0]:null,type:"move-start"},type:"update"})}),i.on("graphic-move",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:s.dx,dy:s.dy,mover:s.allGraphics.length>0?s.allGraphics[0]:null,type:"move"},type:"update"})}),i.on("graphic-move-stop",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:s.allGraphics.length>0?s.allGraphics[0]:null,type:"move-stop"},type:"update"})}),i.on("immediate-click",s=>{s.shiftKey?this._toggleSelection([s.graphic],e,n):e.toggleTool()})];case"transform-3d":return[i.on("record-undo",({record:s})=>{e.addToHistory({updates:[s]})}),i.on("graphic-translate-start",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.graphic,dx:s.dxScreen,dy:s.dyScreen,type:"move-start"},type:"update"})}),i.on("graphic-translate-stop",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.graphic,dx:s.dxScreen,dy:s.dyScreen,type:"move-stop"},type:"update"})}),i.on("graphic-rotate-start",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.graphic,angle:s.angle,type:"rotate-start"},type:"update"})}),i.on("graphic-rotate-stop",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.graphic,angle:s.angle,type:"rotate-stop"},type:"update"})}),i.on("graphic-scale-start",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.graphic,xScale:s.xScale,yScale:s.yScale,type:"scale-start"},type:"update"})}),i.on("graphic-scale-stop",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.graphic,xScale:s.xScale,yScale:s.yScale,type:"scale-stop"},type:"update"})}),i.on("graphic-translate",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.graphic,dx:s.dxScreen,dy:s.dyScreen,type:"move"},type:"update"})}),i.on("graphic-rotate",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.graphic,angle:s.angle,type:"rotate"},type:"update"})}),i.on("graphic-scale",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.graphic,xScale:s.xScale,yScale:s.yScale,type:"scale"},type:"update"})}),i.on("immediate-click",s=>{s.shiftKey?this._toggleSelection([s.graphic],e,n):e.toggleTool()})];case"reshape-3d":return[i.on("reshape",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:s,type:"update"})}),i.on("move",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:s,type:"update"})}),i.on("vertex-add",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:s,type:"update"})}),i.on("vertex-remove",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:s,type:"update"})}),i.on("immediate-click",s=>{s.shiftKey?this._toggleSelection([s.graphic],e,n):e.toggleTool()})];default:return}}_onTransformOrReshape2DGraphicClick(e,n,i){var r;const{graphic:s,viewEvent:o}=i;return(r=o.native)!=null&&r.shiftKey&&s.layer===this.layer?(o.stopPropagation(),e.removeFromSelection(s)):n.toggleToolOnClick?(o.stopPropagation(),e.toggleTool()):void 0}_setUpdateOperationHandle(e,n){this._operationHandle=e;const i=this.view.map;this._disablePopup(n);const s=()=>{if(e===this._operationHandle){const o=this.updateGraphics.toArray(),r=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),i&&i.remove(this._internalGraphicsLayer),this._restorePopup(n),this.emit("update",{graphics:o,state:"complete",aborted:e.cancelled,tool:r,toolEventInfo:null,type:"update"})}};e.on("complete",s)}async _getCommonUpdateOperationClickHandlers(e,n,i){const s=In(n),o=await n.async(()=>this._getFirstHit(s));if(ke(o))return void e.complete();if(n.native.shiftKey&&this._toggleSelection([o.graphic],e,i))return void n.stopPropagation();this.updateGraphics.includes(o.graphic)?n.stopPropagation():e.complete()}_toggleSelection(e,n,i){const s=!!i.multipleSelectionEnabled;return e.some(o=>o!=null&&!(!s||o.layer!==this.layer)&&(this.updateGraphics.includes(o)?n.removeFromSelection(o):n.addToSelection(o),!0))}_getCommonUpdateOperationKeyDownHandlers(e,n){if(!e)return;const i=n.key;i===Mt.undo&&e.canUndo()?(n.stopPropagation(),e.undo()):i===Mt.redo&&e.canRedo()?(n.stopPropagation(),e.redo()):i===Mt.cancel?(n.stopPropagation(),e.cancel()):this.allowDeleteKey&&Mt.delete.includes(i)&&this._onDeleteKey(n)}_onDeleteKey(e){if(!this._operationHandle||this._operationHandle.type!=="update")return;const n=this.activeComponent,i=this.updateGraphics.toArray();ke(n)||n.type==="reshape-3d"||(n.type!=="reshape"||i.length===1&&Ay(i[0].geometry,"type")==="point")&&(e.stopPropagation(),this.delete())}_removeDefaultLayer(){this._internalGraphicsLayer&&(this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=sn(this._internalGraphicsLayer))}_isComponentGraphic(e){const{activeComponent:n}=this;return!(!e||ke(n))&&(e.attributes&&e.attributes.esriSketchTool||n.type==="draw-2d"&&n.graphic===e||(n.type==="box"||n.type==="reshape")&&n.isUIGraphic(e))}_displayPointerCursor(){this.view&&this.view.container&&this.view.cursor!=="pointer"&&(this.view.cursor="pointer")}_displayGrabbingCursor(){this.view&&this.view.container&&this.view.cursor!=="grabbing"&&(this.view.cursor="grabbing")}_displayDefaultCursor(){this.view&&this.view.container&&this.view.cursor!==null&&(this.view.cursor=null)}_logError(e,n,i){Tt.getLogger(this.declaredClass).error(new Ue(e,n,i))}async _requireModule(e){const n=new AbortController;this._moduleLoaderAbortController=n;const i=await e;return this._moduleLoaderAbortController!==n||n.signal.aborted?{requireError:"aborted"}:{module:i}}_emitUndoEvent(e){this.emit("undo",{...e,type:"undo"})}_emitRedoEvent(e){this.emit("redo",{...e,type:"redo"})}_emitDeleteEvent(e){this.emit("delete",{...e,type:"delete"})}get test(){return{operationHandle:this._operationHandle,defaultUpdateOptions:cv}}wait(){return na(()=>!this.updating)}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(e){var n;return((n=this.view)==null?void 0:n.type)!=="3d"||this.updateOnGraphicClick||q(e)&&e.toggleToolOnClick}_disablePopup(e){if(!this._disablePopupEnabled(e))return;const n=this.view.popup;n&&ke(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=n.autoOpenEnabled,n.autoOpenEnabled=!1)}_restorePopup(e){if(!this._disablePopupEnabled(e))return;const n=this.view.popup;n&&q(this._originalAutoOpenEnabled)&&(n.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)}async _waitViewReady(){const e=this.view;e&&(Kr(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await Zf(na(()=>e==null?void 0:e.ready),this._viewReadyAbortController.signal))}};function _Ie(t){return t==="polygon"||t==="rectangle"||t==="circle"}function uv(t,e){T4("undo",t.history.undo,t.history.redo,e)}function dv(t,e){T4("redo",t.history.redo,t.history.undo,e)}function T4(t,e,n,i){const s=e.pop().updates,o=[];i.forEach((r,a)=>{const l=s[a];l!=null&&("geometry"in l&&q(l.geometry)&&(o.push({geometry:r.geometry}),r.geometry=l.geometry),"symbol"in l&&q(l.symbol)&&(o.push({symbol:r.symbol}),r.symbol=l.symbol),"undo"in l&&(o.push(l),l[t](r)))}),n.push({updates:o})}function va(t){return{updates:t.map(e=>({geometry:e.geometry}))}}function vi(t){return"requireError"in t&&t.requireError==="aborted"}v([b()],wn.prototype,"updating",null),v([b()],wn.prototype,"_operationHandle",void 0),v([b({readOnly:!0})],wn.prototype,"activeTool",null),v([b()],wn.prototype,"activeFillSymbol",void 0),v([b()],wn.prototype,"activeLineSymbol",void 0),v([b()],wn.prototype,"activeVertexSymbol",void 0),v([b()],wn.prototype,"allowDeleteKey",void 0),v([b({readOnly:!0})],wn.prototype,"createGraphic",null),v([b()],wn.prototype,"defaultCreateOptions",null),v([b()],wn.prototype,"defaultUpdateOptions",null),v([b({type:R_,nonNullable:!0})],wn.prototype,"labelOptions",void 0),v([b()],wn.prototype,"layer",void 0),v([b({types:Vc})],wn.prototype,"pointSymbol",void 0),v([b({types:Vc})],wn.prototype,"polygonSymbol",void 0),v([b({types:Vc})],wn.prototype,"polylineSymbol",void 0),v([b({type:MT,nonNullable:!0})],wn.prototype,"snappingOptions",null),v([b()],wn.prototype,"_snappingManager",void 0),v([b({readOnly:!0})],wn.prototype,"state",null),v([b({type:V_,nonNullable:!0})],wn.prototype,"tooltipOptions",void 0),v([b({readOnly:!0})],wn.prototype,"updateGraphics",void 0),v([b()],wn.prototype,"updateOnGraphicClick",void 0),v([b({types:Vc})],wn.prototype,"updatePointSymbol",void 0),v([b({types:Vc})],wn.prototype,"updatePolygonSymbol",void 0),v([b({types:Vc})],wn.prototype,"updatePolylineSymbol",void 0),v([b({types:Vc})],wn.prototype,"vertexSymbol",void 0),v([b({value:null})],wn.prototype,"view",null),wn=v([Ae("esri.widgets.Sketch.SketchViewModel")],wn);const wIe=wn,I4="esri.widgets.Editor.EditorViewModel",_y=Tt.getLogger(I4),x4=["create","create-features","update"];function ya(t,e,n){_y.error(new Ue(t,e,n))}function CIe(t,e){return t&&t.find(n=>n.layer===e)}let ai=class extends Li(Ii.EventedAccessor){constructor(e){super(e),this._sketchGraphicsLayer=new YS({listMode:"hide",internal:!0}),this.activeWorkflow=null,this._activityQueue=[],this.failures=[],this.attachmentsViewModel=new k_({abilities:{editing:!0}}),this.featureFormViewModel=new KN,this.featureTemplatesViewModel=new YC,this.layerInfos=null,this.sketchViewModel=new wIe({layer:this._sketchGraphicsLayer}),this.spinnerViewModel=new iT}initialize(){this.handles.add([Dn(()=>this.activeWorkflow,"cancel",()=>this.emit("workflow-cancel")),Dn(()=>this.activeWorkflow,"commit",()=>this.emit("workflow-commit")),ji(()=>{var e;return(e=this.view)==null?void 0:e.map},e=>{e.add(this._sketchGraphicsLayer)},gt),ge(()=>this.editableItems.toArray(),()=>{const{activeWorkflow:e}=this;if(this.refreshCreationTemplates(),!e)return;const{stepId:n}=e;e.type!=="create"?e.type==="update"&&(n==="awaiting-feature-to-update"&&!this.canUpdate||n==="awaiting-update-feature-candidate"&&!e.data.candidates.some(i=>{const s=this.editableItems.find(o=>o.layer===i.layer);return s&&s.supports.includes("update")}))&&this._cancelWorkflow():n!=="awaiting-feature-creation-info"||this.canCreate||this._cancelWorkflow()})])}destroy(){this._cancelWorkflow().then(()=>{var e;(e=this.view)!=null&&e.map&&this.view.map.remove(this._sketchGraphicsLayer),this.view=null})}get allowedWorkflows(){return this._get("allowedWorkflows")}set allowedWorkflows(e){e&&e.length!==0||(e=[...x4]),this._set("allowedWorkflows",e)}get canCreate(){return this.editableItems.some(e=>e.supports.includes("create"))}get canUpdate(){return this.editableItems.some(e=>e.supports.includes("update"))}get editableItems(){var r,a,l;const e=(r=this.view)==null?void 0:r.allLayerViews;if(!e)return new Ht;const n=(l=(a=this.view)==null?void 0:a.map)==null?void 0:l.editableLayers,i=new Set(n),s=n==null?void 0:n.filter(c=>c.visible&&c.capabilities.operations.supportsAdd&&!c.capabilities.operations.supportsQuery),o=e.filter(c=>i.has(c.layer)).map(({layer:c,suspended:u})=>this._getEditableItemFromLayer(c,u)).reverse();return s==null||s.forEach(c=>o.push(this._getEditableItemFromLayer(c,!1))),o}get labelOptions(){return this.sketchViewModel.labelOptions}set labelOptions(e){this.sketchViewModel.labelOptions=e}get snappingOptions(){return this.sketchViewModel.snappingOptions}set snappingOptions(e){this.sketchViewModel.snappingOptions=e}get state(){if(!this.get("view.ready")||this.editableItems.length===0)return"disabled";const e=this.attachmentsViewModel.mode;if(e==="add")return"adding-attachment";if(e==="edit")return"editing-attachment";const{activeWorkflow:n}=this;return n?n.stepId:"ready"}get syncing(){return this._activityQueue.length>0}get tooltipOptions(){return this.sketchViewModel.tooltipOptions}set tooltipOptions(e){this.sketchViewModel.tooltipOptions=e}set view(e){this.sketchViewModel.view=e,this.spinnerViewModel.view=e,this._set("view",e)}async startCreateWorkflowAtFeatureTypeSelection(){if(Sp(_y,"startCreateWorkflowAtFeatureTypeSelection","startCreateFeaturesWorkflowAtFeatureTypeSelection"),!this.canCreate)return void ya("editing:unsupported-workflow","Create workflow is unsupported or disabled.");await this._cancelWorkflow();const e=this._createCreateWorkflow();await e.start(),this._set("activeWorkflow",e)}async startCreateFeaturesWorkflowAtFeatureTypeSelection(){return this.startCreateFeaturesWorkflow()}async startCreateWorkflowAtFeatureCreation(e){if(Sp(_y,"startCreateWorkflowAtFeatureCreation","startCreateFeaturesWorkflowAtFeatureCreation"),!this.canCreate)return void ya("editing:unsupported-workflow","Create workflow is unsupported or disabled.");await this._cancelWorkflow();const n=this._createCreateWorkflow("awaiting-feature-to-create");n.data.creationInfo=e,await n.start(),this._set("activeWorkflow",n)}async startCreateFeaturesWorkflowAtFeatureCreation(e){return this.startCreateFeaturesWorkflow(e,"creating-features")}async startCreateFeaturesWorkflow(e,n="awaiting-feature-creation-info"){if(!this.canCreate)throw new Ue("editing:unsupported-workflow","Creating features is unsupported or disabled.");await this._cancelWorkflow();const i=this._createCreateFeaturesWorkflow(e,n);await i.start(),this._set("activeWorkflow",i)}async startCreateWorkflowAtFeatureEdit(e){if(Sp(_y,"startCreateWorkflowAtFeatureEdit"),!this.canCreate)return void ya("editing:unsupported-workflow","Create workflow is unsupported or disabled.");await this._cancelWorkflow();const n=this._createCreateWorkflow("editing-new-feature");n.data.edits.feature=e,await n.start(),this._set("activeWorkflow",n)}async startUpdateWorkflowAtFeatureSelection(){if(!this.canUpdate)return void ya("editing:unsupported-workflow","Update workflow is unsupported or disabled.");await this._cancelWorkflow();const e=this._createUpdateWorkflow();await e.start(),this._set("activeWorkflow",e)}async startUpdateWorkflowAtMultipleFeatureSelection(e){if(!this.canUpdate)return void ya("editing:unsupported-workflow","Update workflow is unsupported or disabled.");await this._cancelWorkflow();const n=this._createUpdateWorkflow("awaiting-update-feature-candidate");n.data.candidates=e,await n.start(),this._set("activeWorkflow",n)}async startUpdateWorkflowAtFeatureEdit(e){if(!this.canUpdate)return void ya("editing:unsupported-workflow","Update workflow is unsupported or disabled.");await this._cancelWorkflow();const n=this._createUpdateWorkflow("editing-existing-feature");n.data.edits.feature=e,await n.start(),this._set("activeWorkflow",n)}async deleteFeatureFromWorkflow(){const{activeWorkflow:e}=this;e&&e.type==="update"?(await this._delete(e.data.edits.feature),await e.reset()):ya("editing:unsupported-workflow","Deleting requires an active update workflow.")}async cancelWorkflow(e){return this._cancelWorkflow({warn:!0,...e})}refreshCreationTemplates(){const e=[];for(const{layer:n,supports:i}of this.editableItems)n.loaded&&i.includes("create")&&e.push(n);this.featureTemplatesViewModel.layers=e}async _cancelWorkflow(e){const n=this.activeWorkflow;if(!n)return void(e&&e.warn&&ya("editing:no-active-workflow","There is no active workflow to cancel."));if(!e||e.force!==!1)return this.emit("workflow-cancel"),this._set("activeWorkflow",null),void await n.cancel(e);await n.cancel(e),this._set("activeWorkflow",null)}_createCreateFeaturesWorkflow(e,n){return yTe.create(this,e,n,(i,s,o)=>this._applyEdits(i,s,o),(i,s)=>this._addAttachments(i,s))}_createCreateWorkflow(e){return _Te.create(this,e,(n,i,s)=>this._applyEdits(n,i,s))}_createUpdateWorkflow(e){return CTe.create(this,e,(n,i)=>this._applyEdits(n,i))}async _delete(e){const n=e.sourceLayer;"applyEdits"in n&&await this._applyEdits(n,{deleteFeatures:[e]})}_addAttachments(e,n){const i=[];return n==null||n.forEach(s=>i.push(this._addAttachment(e,s.feature,s.attachment))),Promise.all(i)}async _addAttachment(e,n,i){let s=null;return await this._queueOperation(async()=>(s=await e.addAttachment(n,i).catch(o=>{throw(o==null?void 0:o.error)||o}),s)),s}async _applyEdits(e,n,i){let s=null;return await this._queueOperation(async()=>{if(e.capabilities.operations.supportsQuery){const o=await this.view.whenLayerView(e);return s=await e.applyEdits(n,i),await na(()=>!o.updating),s}return s=await e.applyEdits(n,i),s}),s}_queueOperation(e){this._activityQueue.push(e),this.notifyChange("syncing");const n=(i,s)=>{const o=s.indexOf(i);o>-1&&s.splice(o,1)};return e().then(i=>{if("error"in i&&i.error)throw i.error;if("addFeatureResults"in i){const{addFeatureResults:s,deleteFeatureResults:o,updateFeatureResults:r}=i,a=s.find(l=>!!l.error)||r.find(l=>!!l.error)||o.find(l=>!!l.error);if(a)throw a.error}return i}).catch(i=>{ya("editing:operation-error","An error occurred.",{error:i});const s={error:i,retry:()=>(n(s,this.failures),this._queueOperation(e)),cancel:()=>{n(s,this.failures)}};this._set("failures",[...this.failures,s])}).then(()=>{n(e,this._activityQueue),this.notifyChange("syncing")})}_getEditableItemFromLayer(e,n=!0){const{data:i,editing:s,operations:o}=e.capabilities,r=CIe(this.layerInfos,e),a=!(!i.supportsAttachment||r&&r.allowAttachments===!1),l=s.supportsGeometryUpdate&&(!r||r.geometryUpdatesEnabled!==!1),c=!r||r.attributeUpdatesEnabled!==!1;if(n)return{hasAttachments:a,layer:e,supports:[],geometryUpdatesEnabled:l,attributeUpdatesEnabled:c};const u=[];return o.supportsAdd&&(this.allowedWorkflows.includes("create")||this.allowedWorkflows.includes("create-features"))&&(!r||r.enabled!==!1&&r.addEnabled!==!1)&&u.push("create"),o.supportsUpdate&&this.allowedWorkflows.includes("update")&&(!r||r.enabled!==!1&&r.updateEnabled!==!1)&&u.push("update"),(r&&r.deleteEnabled)!==!1&&o.supportsDelete&&u.push("delete"),{hasAttachments:a,layer:e,supports:u,geometryUpdatesEnabled:l,attributeUpdatesEnabled:c}}};v([b({readOnly:!0})],ai.prototype,"activeWorkflow",void 0),v([b({readOnly:!0})],ai.prototype,"_activityQueue",void 0),v([b({value:[...x4]})],ai.prototype,"allowedWorkflows",null),v([b({readOnly:!0})],ai.prototype,"canCreate",null),v([b({readOnly:!0})],ai.prototype,"canUpdate",null),v([b({readOnly:!0})],ai.prototype,"editableItems",null),v([b({readOnly:!0})],ai.prototype,"failures",void 0),v([b()],ai.prototype,"attachmentsViewModel",void 0),v([b()],ai.prototype,"featureFormViewModel",void 0),v([b()],ai.prototype,"featureTemplatesViewModel",void 0),v([b()],ai.prototype,"labelOptions",null),v([b()],ai.prototype,"layerInfos",void 0),v([b()],ai.prototype,"sketchViewModel",void 0),v([b()],ai.prototype,"snappingOptions",null),v([b()],ai.prototype,"spinnerViewModel",void 0),v([b()],ai.prototype,"state",null),v([b({readOnly:!0})],ai.prototype,"syncing",null),v([b()],ai.prototype,"tooltipOptions",null),v([b()],ai.prototype,"view",null),ai=v([Ae(I4)],ai);const SIe=ai,M4={hide:"hide",hideChildren:"hide-children"};function yb(t){if(t)return t.listMode!=null?t.listMode:void 0}function EIe(t){if(t)return t.minScale!=null?t.minScale:void 0}function kIe(t){if(t)return t.maxScale!=null?t.maxScale:void 0}function TIe(t){if(!t)return"inherited";const e=t.get("layer.capabilities.exportMap.supportsSublayerVisibility");if(typeof e=="boolean")return e?"independent":"inherited";const n=t.get("capabilities.exportMap.supportsSublayerVisibility");return typeof n=="boolean"?n?"independent":"inherited":t.visibilityMode!=null?t.visibilityMode:"independent"}function AT(t){if(t){if(!("type"in t))return"sublayers";if(!(t.listMode===M4.hideChildren||t.type==="wmts"))return t.type==="group"?"layers":"sublayers"}}function IIe(t){const e=t&&(t.get("layer.layer")||t.layer);if(!e)return!1;const n=e.get("capabilities.exportMap.supportsDynamicLayers");return typeof n!="boolean"||n}function LT(t){return yb(t)!==M4.hide}function xIe(t,e){if(!t||isNaN(e))return!1;const n=EIe(t),i=kIe(t),s=!isNaN(n)&&n>0&&e>n,o=!isNaN(i)&&i>0&&e<i;return s||o}function $4(t,e){t&&t.sort((n,i)=>{const s=e.indexOf(n.uid),o=e.indexOf(i.uid);return s>o?-1:s<o?1:0})}function MIe(t,e){const n=t==null?void 0:t.layer;if(!n)return;const i=AT(n);i&&$4(n.get(i),e)}function GA(t){const e=t==null?void 0:t.layer;return e&&e.type==="group"?e.layers:null}function m0(t,e){var i;const n=(i=t.layer)==null?void 0:i.uid;return n&&e.find(s=>{var o;return((o=s.layer)==null?void 0:o.uid)===n})}function $Ie(t){const e=AIe(t)?t:null,n=t==null?void 0:t.parent,i=(n==null?void 0:n.type)==="map-image"&&e.source,s="";return i&&n?{layer:n,title:s,sublayerIds:[i.mapLayerId]}:{layer:t,title:s}}function AIe(t){return!!(t!=null&&t.layer)}var pS;let Wl=pS=class extends BS{constructor(t){super(t),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new pS({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};v([b()],Wl.prototype,"displayValueEnabled",void 0),v([b()],Wl.prototype,"max",void 0),v([b()],Wl.prototype,"min",void 0),v([b()],Wl.prototype,"step",void 0),v([b()],Wl.prototype,"value",void 0),Wl=pS=v([Ae("esri.support.Action.ActionSlider")],Wl);const LIe=Wl,ba={base:"esri-layer-list-panel",content:"esri-layer-list-panel__content",contentLegend:"esri-layer-list-panel__content--legend",contentString:"esri-layer-list-panel__content--string",contentElement:"esri-layer-list-panel__content--html-element",contentWidget:"esri-layer-list-panel__content--widget"},OIe="legends";let Ao=class extends dh(kn){constructor(e,n){super(e,n),this._legend=null,this._handles=new si,this.content=null,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles(ge(()=>this.content,e=>this._createLegend(e),gt))}destroy(){const{_legend:e}=this;e&&e.destroy(),this._legend=null}get className(){const{image:e}=this,n=this._getFirstWidget();return this._get("className")||!e&&n?n.iconClass:""}set className(e){this._override("className",e)}get disabled(){var s;const{listItem:e,_legend:n,content:i}=this;return!e||!(Array.isArray(i)&&i.length>1)&&!!n&&(!((s=n.activeLayerInfos)!=null&&s.length)||!e.visibleAtCurrentScale)}set disabled(e){this._overrideIfSome("disabled",e)}get title(){const e=this._getFirstWidget();return this._get("title")||e?e.label:""}set title(e){this._override("title",e)}render(){return M("div",{class:ba.base},this._renderContents())}_renderContent(e){const{_legend:n,disabled:i}=this;return!e||i?null:e==="legend"&&n?M("div",{class:this.classes(ba.content,ba.contentLegend),key:n},n.render()):typeof e=="string"?M("div",{class:this.classes(ba.content,ba.contentString),key:e,innerHTML:e}):Pp(e)?M("div",{class:this.classes(ba.content,ba.contentWidget),key:e},e.render()):e instanceof HTMLElement?M("div",{class:this.classes(ba.content,ba.contentElement),key:e,bind:e,afterCreate:this._attachToNode}):null}_renderContents(){const{content:e}=this;return Array.isArray(e)?e.map(n=>this._renderContent(n)):this._renderContent(e)}_getLegendOptions(){const{listItem:e}=this;if(!e)return{};const{layer:n,view:i}=e;return n&&i?{view:i,layerInfos:[$Ie(n)]}:{}}_createLegend(e){this._hasLegend(e)&&!this._legend&&Fe(()=>Promise.resolve().then(()=>WMe),void 0,import.meta.url).then(({default:n})=>{const{_handles:i,listItem:s}=this,o=new n(this._getLegendOptions());this._legend=o,this.notifyChange("className"),this.notifyChange("title");const r=ge(()=>{var a,l;return[s==null?void 0:s.view,s==null?void 0:s.layer,(a=s==null?void 0:s.layer)==null?void 0:a.source,(l=s==null?void 0:s.layer)==null?void 0:l.parent]},()=>this._updateLegend(o),gt);i.add(r,OIe),this.scheduleRender()})}_hasLegend(e){const n="legend";return e===n||!!Array.isArray(e)&&e.includes(n)}_attachToNode(e){e.appendChild(this)}_updateLegend(e){e.set(this._getLegendOptions()),this.scheduleRender()}_getWidget(e){return e==="legend"?this._legend:Pp(e)?e:null}_getFirstWidget(){const{content:e}=this;if(Array.isArray(e)){let n=null;return e.some(i=>{const s=this._getWidget(i);return s&&(n=s),!!s}),n}return this._getWidget(e)}};v([b()],Ao.prototype,"_legend",void 0),v([b()],Ao.prototype,"className",null),v([b()],Ao.prototype,"content",void 0),v([b()],Ao.prototype,"disabled",null),v([b()],Ao.prototype,"image",void 0),v([b()],Ao.prototype,"listItem",void 0),v([b()],Ao.prototype,"title",null),v([b()],Ao.prototype,"open",void 0),v([b()],Ao.prototype,"visible",void 0),Ao=v([Ae("esri.widgets.LayerList.ListItemPanel")],Ao);const A4=Ao;var mf;const PIe=Ht.ofType({key:"type",defaultKeyValue:"button",base:BS,typeMap:{button:uh,toggle:lO,slider:LIe}}),L4=Ht.ofType(PIe),pv="layer",g0="child-list-mode",RIe="hide",VIe="esri.widgets.LayerList.ListItem";let Ln=mf=class extends dh(Li(dt)){constructor(t){super(t),this.actionsSections=new L4,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(Ht.ofType(mf)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.layerView=null,this.listItemCreatedFunction=null,this.open=!1,this.panel=null,this.parent=null,this.sortable=!0,this.view=null}initialize(){if(this.handles.add([ge(()=>this.layer,t=>this._watchLayerProperties(t),gt),ge(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),gt),ge(()=>this.view,t=>this._updateChildrenView(t),gt),ge(()=>this.panel,t=>this._setListItemOnPanel(t),gt),ge(()=>[this.layer,this.view],()=>this._getLayerView(),gt)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){var t;return(t=this.layer)==null?void 0:t.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}castPanel(t){return this.get("panel.open")&&!t.hasOwnProperty("open")&&(t.open=!0),t?new A4(t):null}get title(){const t=this.get("layer.layer");return(!t||t&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){const{layer:t,checkPublishStatusEnabled:e}=this;return e&&t&&"publishingInfo"in t&&t.publishingInfo.status==="publishing"}get updating(){const{layerView:t,connectionStatus:e,layer:n,publishing:i}=this;return!i&&!e&&(t?t.updating:(n==null?void 0:n.loadStatus)==="loading"||!1)}get visible(){var t;return(t=this.layer)==null?void 0:t.visible}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){return!xIe(this.layer,this.get("view.scale"))}get visibilityMode(){return TIe(this.layer)}clone(){return new mf({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){const e=this.children;e&&e.forEach(n=>n.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(n=>n.view=t)}_addChildren(t){if(this.handles.remove(g0),this.children.removeAll(),!t)return;t.forEach(n=>{this.handles.add(ge(()=>n.listMode,()=>this._addChildren(t)),g0)});const e=t.filter(n=>yb(n)!==RIe);this.children.addMany(this._makeChildren(e))}_watchSublayerChanges(t){t&&this.handles.add(t.on("change",()=>{this._addChildren(t)}),pv)}_initializeChildLayers(t){this._addChildren(t),this._watchSublayerChanges(t)}_makeChildren(t){return t.map(e=>LT(e)?new mf({layer:e,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).reverse()}_watchLayerProperties(t){if(!this.handles||(this.handles.remove(pv),this.handles.remove(g0),!t))return;if(this.handles.add(ge(()=>t.listMode,()=>this._watchLayerProperties(t)),pv),yb(t)==="hide-children")return void this.children.removeAll();const e=AT(t);e&&this.handles.add(ge(()=>t[e],()=>{t.hasOwnProperty(e)&&this._initializeChildLayers(t[e])},gt),pv)}async _getLayerView(){const{layer:t,view:e}=this;if(t&&e)try{const n=await e.whenLayerView(t);if(n.layer!==this.layer)return;this._set("layerView",n)}catch{}}};v([b({type:L4})],Ln.prototype,"actionsSections",void 0),v([b()],Ln.prototype,"actionsOpen",void 0),v([b()],Ln.prototype,"checkPublishStatusEnabled",void 0),v([b({type:Ht})],Ln.prototype,"children",void 0),v([b()],Ln.prototype,"childrenSortable",void 0),v([b({readOnly:!0})],Ln.prototype,"connectionStatus",null),v([b({readOnly:!0})],Ln.prototype,"error",null),v([b()],Ln.prototype,"hidden",void 0),v([b({readOnly:!0})],Ln.prototype,"incompatible",null),v([b()],Ln.prototype,"layer",void 0),v([b({readOnly:!0})],Ln.prototype,"layerView",void 0),v([b()],Ln.prototype,"listItemCreatedFunction",void 0),v([b()],Ln.prototype,"open",void 0),v([b({type:A4})],Ln.prototype,"panel",void 0),v([ii("panel")],Ln.prototype,"castPanel",null),v([b()],Ln.prototype,"parent",void 0),v([b()],Ln.prototype,"sortable",void 0),v([b()],Ln.prototype,"title",null),v([b({readOnly:!0})],Ln.prototype,"publishing",null),v([b({readOnly:!0})],Ln.prototype,"updating",null),v([b()],Ln.prototype,"view",void 0),v([b()],Ln.prototype,"visible",null),v([b({readOnly:!0})],Ln.prototype,"visibleAtCurrentScale",null),v([b({readOnly:!0})],Ln.prototype,"visibilityMode",null),Ln=mf=v([Ae(VIe)],Ln);const B_=Ln,no={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode",children:"children"},FIe="hide",O4=Ht.ofType(B_);let Gl=class extends Ii.EventedAccessor{constructor(e){super(e),this._handles=new si,this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.operationalItems=new O4,this.view=null}initialize(){this._handles.add([ge(()=>{var e;return[this.view,(e=this.view)==null?void 0:e.ready]},()=>this._viewHandles(),gt),ge(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],no.view)}destroy(){this._handles.destroy(),this._handles=null,this.view=null,this.operationalItems.removeAll()}get state(){const e=this.get("view");return this.get("view.ready")?"ready":e?"loading":"disabled"}triggerAction(e,n){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:n})}moveListItem(e,n,i,s){var f,m;const o=e==null?void 0:e.layer;if(!o)return;const r=(m=(f=this.view)==null?void 0:f.map)==null?void 0:m.layers,a=n?GA(n):r,l=i?GA(i):r;if(!a||!l)return;const{operationalItems:c}=this,u=(n==null?void 0:n.children)||c,d=(i==null?void 0:i.children)||c,h=l.length-s;e.parent=i||null,u.includes(e)&&u.remove(e),a.includes(o)&&a.remove(o),d.includes(e)||d.add(e,h),l.includes(o)||l.add(o,h)}_createLayerViewHandles(e){const{_handles:n}=this;n.remove(no.layerViews),this._compileList(),e&&n.add(e.on("change",()=>this._compileList()),no.layerViews)}_createMapLayerHandles(e){const{_handles:n}=this;n.remove(no.mapLayers),this._compileList(),e&&n.add(e.on("change",()=>this._compileList()),no.mapLayers)}_createListItem(e){const{view:n,listItemCreatedFunction:i,checkPublishStatusEnabled:s}=this;return new B_({checkPublishStatusEnabled:s,layer:e,listItemCreatedFunction:i,view:n})}_removeAllItems(){const{_handles:e,operationalItems:n}=this;n.forEach(i=>{e.remove(`${no.children}-${i.uid}`)}),n.removeAll()}_getViewableLayers(e){if(e)return e.filter(n=>yb(n)!==FIe)}_watchLayersListMode(e){const{_handles:n}=this;n.remove(no.layerListMode),e&&e.forEach(i=>{"listMode"in i&&n.add(ge(()=>i.listMode,()=>this._compileList()),no.layerListMode)})}_compileList(){const e=this.get("view.map.layers");this._watchLayersListMode(e);const n=this._getViewableLayers(e);n&&n.length?(this._createNewItems(n),this._removeItems(n),this._sortItems(n)):this._removeAllItems()}_createNewItems(e){const{operationalItems:n}=this;e.forEach(i=>{n.find(s=>s.layer===i)||n.add(this._createListItem(i))})}_removeItems(e){const{_handles:n,operationalItems:i}=this,s=[];i.forEach(o=>{o&&e&&e.includes(o.layer)||(n.remove(`${no.children}-${o.uid}`),s.push(o))}),i.removeMany(s)}_sortItems(e){const{operationalItems:n}=this;n.sort((i,s)=>{const o=e.indexOf(i.layer),r=e.indexOf(s.layer);return o>r?-1:o<r?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{_handles:e,view:n}=this;e.remove([no.mapLayers,no.layerViews,no.viewLayers]),this._compileList(),n&&n.ready&&e.add([ge(()=>{var i,s;return(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.allLayers},i=>this._createMapLayerHandles(i),gt),ge(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),gt)],no.viewLayers)}};v([b()],Gl.prototype,"checkPublishStatusEnabled",void 0),v([b()],Gl.prototype,"listItemCreatedFunction",void 0),v([b({type:O4})],Gl.prototype,"operationalItems",void 0),v([b({readOnly:!0})],Gl.prototype,"state",null),v([b()],Gl.prototype,"view",void 0),Gl=v([Ae("esri.widgets.LayerList.LayerListViewModel")],Gl);const OT=Gl,PT=t=>DIe(t)||NIe(t),DIe=t=>{if(!("type"in t))return!1;switch(t.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":return!0;default:return!1}},NIe=t=>{const e=AT(t);if(t.hasOwnProperty(e)&&q(t[e])){for(const n of t[e])if(PT(n))return!0}return!1};var hS;let jl=hS=class extends B_{constructor(t){super(t),this.children=new Ht}get enabled(){return!!q(this.featureSource)&&this.featureSource.enabled}get featureSource(){const{layer:t,getFeatureSnappingSources:e}=this;return e().find(n=>n.layer===t)}_initializeChildLayers(t){if(!t)return;const e=t.filter(PT);super._initializeChildLayers(e)}_makeChildren(t){return t.map(e=>LT(e)?new hS({layer:e,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).reverse()}};v([b()],jl.prototype,"children",void 0),v([b()],jl.prototype,"enabled",null),v([b({constructOnly:!0})],jl.prototype,"getFeatureSnappingSources",void 0),v([b()],jl.prototype,"featureSource",null),v([b()],jl.prototype,"parent",void 0),jl=hS=v([Ae("esri.widgets.support.SnappingControls.SnappingListItem")],jl);let gf=class extends OT{constructor(){super(...arguments),this.featureSnappingSources=new Ht}get operationalItemsFlat(){return this.operationalItems.flatten(e=>e.children)}_compileList(){const e=this.get("view.map.layers");if(!e)return;const n=e.filter(PT);this._watchLayersListMode(n);const i=this._getViewableLayers(n);i&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createListItem(e){return new jl({layer:e,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};v([b()],gf.prototype,"featureSnappingSources",void 0),v([b()],gf.prototype,"operationalItems",void 0),gf=v([Ae("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],gf);const BIe="esri.widgets.support.SnappingControls.SnappingControlsViewModel";let lu=class extends Li(dt){constructor(e){super(e),this.layerListViewModel=new gf,this.snappingOptions=null,this.view=null}initialize(){this.handles.add([ge(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:e,view:n})=>{e.view=n},gt),ge(()=>{var e;return{viewModel:this.layerListViewModel,sources:(e=this.snappingOptions)==null?void 0:e.featureSources}},({viewModel:e,sources:n})=>{e.featureSnappingSources=n},gt)])}get state(){return this.get("snappingOptions")?"ready":"disabled"}enableSnappingForLayer(e){(this._findSnappingSourceForLayer(e)??this._makeSnappingSourceForLayer(e)).enabled=!0}disableSnappingForLayer(e){const n=this._findSnappingSourceForLayer(e);n&&(n.enabled=!1)}updateEnabledFeatureSources(e){for(const n of this.snappingOptions.featureSources)LT(n.layer)&&(n.enabled=e.includes(n.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find(n=>n.layer.id===e)}_makeSnappingSourceForLayer(e){const{layer:n}=this.layerListViewModel.operationalItemsFlat.find(s=>s.layer.id===e);if(!n)throw new Ue("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);const i=new yT({layer:n});return this.snappingOptions.featureSources.add(i),i}};v([b({constructOnly:!0})],lu.prototype,"layerListViewModel",void 0),v([b({constructOnly:!0})],lu.prototype,"snappingOptions",void 0),v([b()],lu.prototype,"state",null),v([b({constructOnly:!0})],lu.prototype,"view",void 0),lu=v([Ae(BIe)],lu);const zIe=lu,jA={header:!0,enabledToggle:!0,selfEnabledToggle:!0,featureEnabledToggle:!0,layerList:!0},xo={base:"esri-snapping-controls",container:"esri-snapping-controls__container",panel:"esri-snapping-controls__panel",item:"esri-snapping-controls__item",toggleBlock:"esri-snapping-controls__toggle-block",layerListBlock:"esri-snapping-controls__layer-list-block",layerList:"esri-snapping-controls__layer-list",layerListFilter:"esri-snapping-controls__layer-list__filter",layerListItem:"esri-snapping-controls__layer-list__item",layerListItemCheckbox:"esri-snapping-controls__layer-list__item__checkbox",layerListItemLabel:"esri-snapping-controls__layer-list__item__label",nestedContainer:"esri-snapping-controls__nested-container",disabled:"esri-disabled",esriWidget:"esri-widget",widgetIcon:"esri-icon-vertex-gps"};let Lo=class extends kn{constructor(e,n){super((()=>{const{view:i,viewModel:s,snappingOptions:o,...r}=e;return r})(),n),this._layerListFilter=null,this.messages=null,this.messagesCommon=null,this.visibleElements={...jA},this._defaultViewModel=null,e!=null&&e.viewModel?this.viewModel=e.viewModel:(this._defaultViewModel=new zIe({snappingOptions:e.snappingOptions,view:e.view}),this.viewModel=this._defaultViewModel)}destroy(){this._defaultViewModel=sn(this._defaultViewModel)}loadDependencies(){return Promise.all([Fe(()=>import("./calcite-accordion-bc845b43.js"),["./calcite-accordion-bc845b43.js","./dom-5b7af1bf.js"],import.meta.url),Fe(()=>import("./calcite-accordion-item-b6330f44.js"),["./calcite-accordion-item-b6330f44.js","./dom-5b7af1bf.js","./conditionalSlot-e2a39862.js","./observers-c77bfda3.js","./icon-1a289254.js"],import.meta.url),Fe(()=>import("./calcite-block-07b2d551.js"),["./calcite-block-07b2d551.js","./dom-5b7af1bf.js","./popover-dcfb3586.js","./floating-ui-bda1a599.js","./preload-helper-41c905a7.js","./guid-e49c4e43.js","./openCloseComponent-587e936b.js","./key-1fec8108.js","./action-ae390733.js","./observers-c77bfda3.js","./interactive-52dcf836.js","./icon-1a289254.js","./loader-632408c9.js","./conditionalSlot-e2a39862.js","./action-menu-d50c4d74.js","./scrim-41440f97.js"],import.meta.url),Fe(()=>import("./calcite-checkbox-f1ac6128.js"),["./calcite-checkbox-f1ac6128.js","./dom-5b7af1bf.js","./guid-e49c4e43.js","./form-9bc9e261.js","./label2-0103af15.js","./interactive-52dcf836.js","./key-1fec8108.js"],import.meta.url),Fe(()=>import("./calcite-input-3a2d6757.js"),["./calcite-input-3a2d6757.js","./dom-5b7af1bf.js","./label2-0103af15.js","./form-9bc9e261.js","./key-1fec8108.js","./observers-c77bfda3.js","./interactive-52dcf836.js","./icon-1a289254.js","./progress-ae83f8fa.js"],import.meta.url),Fe(()=>import("./calcite-label-321be7cc.js"),["./calcite-label-321be7cc.js","./dom-5b7af1bf.js","./label2-0103af15.js"],import.meta.url),Fe(()=>import("./calcite-list-637f1ba8.js"),["./calcite-list-637f1ba8.js","./dom-5b7af1bf.js","./interactive-52dcf836.js"],import.meta.url),Fe(()=>import("./calcite-list-item-2b0d81b3.js"),["./calcite-list-item-2b0d81b3.js","./dom-5b7af1bf.js","./conditionalSlot-e2a39862.js","./observers-c77bfda3.js","./interactive-52dcf836.js"],import.meta.url),Fe(()=>import("./calcite-panel-8cbe33fc.js"),["./calcite-panel-8cbe33fc.js","./panel-ae4dd30c.js","./dom-5b7af1bf.js","./popover-dcfb3586.js","./floating-ui-bda1a599.js","./preload-helper-41c905a7.js","./guid-e49c4e43.js","./openCloseComponent-587e936b.js","./key-1fec8108.js","./action-ae390733.js","./observers-c77bfda3.js","./interactive-52dcf836.js","./icon-1a289254.js","./loader-632408c9.js","./action-menu-d50c4d74.js","./scrim-41440f97.js"],import.meta.url),Fe(()=>import("./calcite-switch-7a55799a.js"),["./calcite-switch-7a55799a.js","./dom-5b7af1bf.js","./label2-0103af15.js","./form-9bc9e261.js","./interactive-52dcf836.js","./key-1fec8108.js"],import.meta.url)])}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){e!==this._get("viewModel")&&((ke(this._defaultViewModel)||this._defaultViewModel!==e)&&(this._defaultViewModel=sn(this._defaultViewModel)),this._set("viewModel",e))}castVisibleElements(e){return{...jA,...e}}render(){const{label:e,visibleElements:{header:n}}=this;return M("div",{"aria-label":e,class:this.classes(xo.base,xo.esriWidget)},M("div",{class:xo.container},n?this.renderHeaderView():this.renderContent()))}renderHeaderView(){return M("calcite-panel",{heading:this.label,class:xo.panel},this.renderContent())}renderContent(){return[this.renderToggles(),this.renderLayerList()]}renderToggles(){const{visibleElements:{enabledToggle:e,selfEnabledToggle:n,featureEnabledToggle:i}}=this;if(e||n||i)return M("calcite-block",{class:xo.toggleBlock,key:"toggle-block",heading:"",open:!0},this.renderEnabledToggle(),M("div",{class:xo.nestedContainer},this.renderSelfEnabledToggle(),this.renderFeatureEnabledToggle()))}renderEnabledToggle(){if(!this.visibleElements.enabledToggle)return;const{messages:{enableSnapping:e},viewModel:{snappingOptions:{enabled:n,enabledToggled:i}}}=this;return M("calcite-label",{layout:"inline-space-between"},e,M("calcite-switch",{checked:n,disabled:i,bind:this,onCalciteSwitchChange:this._enableSnappingSwitchChange}))}renderSelfEnabledToggle(){if(!this.visibleElements.selfEnabledToggle)return;const{messages:{geometryGuides:e},viewModel:{snappingOptions:{enabled:n,selfEnabled:i,enabledToggled:s}}}=this;return M("calcite-label",{layout:"inline-space-between",key:"self-enabled-toggle"},e,M("calcite-switch",{checked:i,disabled:s||!n,bind:this,onCalciteSwitchChange:this._selfEnabledSwitchChange}))}renderFeatureEnabledToggle(){if(!this.visibleElements.featureEnabledToggle)return;const{messages:{featureToFeature:e},viewModel:{snappingOptions:{enabled:n,featureEnabled:i,enabledToggled:s}}}=this;return M("calcite-label",{layout:"inline-space-between",key:"feature-enabled-toggle"},e,M("calcite-switch",{checked:i,disabled:s||!n,bind:this,onCalciteSwitchChange:this._featureEnabledSwitchChange}))}renderLayerList(){if(!this.visibleElements.layerList)return;const{messages:e,messagesCommon:n}=this,i=({target:{value:o}})=>this._layerListFilter=o===""?null:new RegExp(o,"i"),s=this.viewModel.layerListViewModel.operationalItems.length>9?M("calcite-input",{class:xo.layerListFilter,clearable:!0,placeholder:e==null?void 0:e.searchLayers,onCalciteInputInput:i}):null;return M("calcite-block",{key:"list-block","intl-collapse":n==null?void 0:n.collapse,"intl-expand":n==null?void 0:n.expand,heading:e.snappingLayers,class:xo.layerListBlock,open:!0,collapsible:!0},s,M("calcite-list",{class:xo.layerList},this.renderLayerListItemCollection(this.viewModel.layerListViewModel.operationalItems,zt(this._layerListFilter))))}renderLayerListItemCollection(e,n){return e.map(i=>{if(!n||this._itemTitleMatchesFilter(i,n))return i.children.length>0?this.renderLayerListItemGroup(i):this.renderLayerListItem(i);const s=i.children.filter(o=>this._itemTitleMatchesFilter(o,n));return s.length>0?this.renderLayerListItemGroup(i,s):null}).toArray()}renderLayerListItem(e){const{messages:{untitledLayer:n}}=this,i=e.title||n,s=e.enabled,o=M("calcite-checkbox",{value:e.layer.id,checked:s,bind:this,onCalciteCheckboxChange:a=>this._handleLayerListItemChange(a.target)}),r=()=>{const a=!o.properties.checked;this._handleLayerListItemChange({checked:a,value:o.properties.value})};return M("calcite-list-item",{key:`${this.id}-list-item-${e.uid}`,onclick:r},M("calcite-label",{class:xo.layerListItem,slot:"content-start",tabIndex:-1,layout:"inline","disable-spacing":"true"},M("div",{class:xo.layerListItemCheckbox},o),M("div",{class:xo.layerListItemLabel},i)))}renderLayerListItemGroup(e,n){const i=e.title||this.messages.untitledLayer,s=e.title&&e.title!==""?e.title:PL(),o=!!n,r=n??e.children;return M("calcite-list-item",{key:s},M("calcite-accordion",{"icon-position":"start",appearance:"transparent",afterCreate:a=>{a.append(...Array.from(a.children).map(l=>(l.remove(),l)))}},M("calcite-accordion-item",{active:o,"item-title":i,key:e.uid},M("calcite-list",null,[...this.renderLayerListItemCollection(r)]))))}_enableSnappingSwitchChange(e){this.snappingOptions.enabled=e.target.checked}_featureEnabledSwitchChange(e){this.snappingOptions.featureEnabled=e.target.checked}_itemTitleMatchesFilter(e,n){return n.test(e.title)}_selfEnabledSwitchChange(e){this.snappingOptions.selfEnabled=e.target.checked}async _handleLayerListItemChange(e){e.checked?this.viewModel.enableSnappingForLayer(e.value):this.viewModel.disableSnappingForLayer(e.value)}};v([b()],Lo.prototype,"_layerListFilter",void 0),v([b()],Lo.prototype,"label",null),v([b(),rn("esri/widgets/support/SnappingControls/t9n/SnappingControls")],Lo.prototype,"messages",void 0),v([b(),rn("esri/t9n/common")],Lo.prototype,"messagesCommon",void 0),v([b()],Lo.prototype,"snappingOptions",null),v([b()],Lo.prototype,"view",null),v([b()],Lo.prototype,"viewModel",null),v([b()],Lo.prototype,"visibleElements",void 0),v([ii("visibleElements")],Lo.prototype,"castVisibleElements",null),Lo=v([Ae("esri.widgets.support.SnappingControls")],Lo);const HIe=Lo,ln={base:"esri-editor esri-widget esri-widget--panel",message:"esri-editor__message",controls:"esri-editor__controls",controlButton:"esri-editor__control-button",progressBar:"esri-editor__progress-bar",panelToolbar:"esri-editor__panel-toolbar",panelToolbarSnappingButton:"esri-editor__panel-toolbar__snapping-button",panelContent:"esri-editor__panel-content",panelContentMessage:"esri-editor__panel-content__message",panelContentSection:"esri-editor__panel-content__section",panelContentSectionGroup:"esri-editor__panel-content__section__group",snappingControlsPopover:"esri-editor__snapping-controls-popover",updateFeaturesActionButtons:"esri-editor__update-features-action-buttons",updateFeaturesActionButtonsButton:"esri-editor__update-features-action-buttons--button",featureTemplatesContainer:"esri-editor__feature-templates-container",promptContainer:"esri-editor__prompt",promptHeader:"esri-editor__prompt__header",promptHeading:"esri-editor__prompt__header__heading",promptMessage:"esri-editor__prompt__message",promptDivider:"esri-editor__prompt__divider",promptActions:"esri-editor__prompt__actions",warningIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-edit",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonSecondary:"esri-button--secondary",buttonTertiary:"esri-button--tertiary"},v0={undoRedoButtons:!1,snappingControls:!0,snappingControlsElements:{header:!1,enabledToggle:!0,selfEnabledToggle:!0,featureEnabledToggle:!0,layerList:!0}};function UIe(t){t.focus()}const P4="esri.widgets.Editor",y0=Tt.getLogger(P4);let Cn=class extends Li(kn){constructor(e,n){super(e,n),this._candidateCommitted=!1,this._featureForm=new Pke,this._stateStack=[],this._attachments=new x3({visibleElements:{addSubmitButton:!1,cancelAddButton:!1,cancelUpdateButton:!1,deleteButton:!1,errorMessage:!1,progressBar:!1,updateButton:!1}}),this._featureTemplates=new Kke({enableListScroll:!1}),this._filterText="",this._prompt=null,this._spinner=new G3,this._snappingButton=null,this._snappingPopover=null,this.useDeprecatedCreateWorkflow=!1,this.headingLevel=4,this.iconClass=ln.widgetIcon,this.messages=null,this.messagesCommon=null,this.messagesTemplates=null,this.supportingWidgetDefaults=null,this.viewModel=new SIe,this.visibleElements={...v0},this._setCandidateFeature=(i,s=!1)=>{if(this._candidateCommitted)return;const o=this._assertActiveUpdateWorkflow();o.data.edits.feature=i,s&&(o.next(),this._candidateCommitted=!0)},this._handleSave=this._handleSave.bind(this),this._handleBack=this._handleBack.bind(this),this._handleDone=this._handleDone.bind(this),this._handleDelete=this._handleDelete.bind(this),this._handleAdd=this._handleAdd.bind(this),this._handleEdit=this._handleEdit.bind(this),this._handleAttachmentAdd=this._handleAttachmentAdd.bind(this),this._handleAttachmentUpdate=this._handleAttachmentUpdate.bind(this),this._handleAttachmentDelete=this._handleAttachmentDelete.bind(this),this.EditorPanel=this.EditorPanel.bind(this)}initialize(){const{view:e,snappingOptions:n}=this;this._snappingControls=new HIe({snappingOptions:n,view:e,visibleElements:this.visibleElements.snappingControlsElements}),this.addHandles([ge(()=>this.headingLevel,i=>{this._featureForm.headingLevel=vu(i),this._featureTemplates.headingLevel=vu(i)},gt),this.viewModel.featureTemplatesViewModel.on("select",({item:i})=>this.useDeprecatedCreateWorkflow?this.startCreateWorkflowAtFeatureCreation(i):this.startCreateFeaturesWorkflowAtFeatureCreation(i)),ge(()=>this.viewModel.state,(i,s)=>{const o=this._stateStack.indexOf(i);o===-1?this._stateStack.push(s):this._stateStack.splice(o)}),ge(()=>this.viewModel,i=>{this._featureForm.viewModel=i?i.featureFormViewModel:null,this._attachments.viewModel=i?i.attachmentsViewModel:null,this._featureTemplates.viewModel=i?i.featureTemplatesViewModel:null,this._spinner.viewModel=i?i.spinnerViewModel:null},gt),ge(()=>this.view,(i,s)=>{const o=`editor-${this.id}-spinner`;s&&s.ui.remove(this._spinner,o),i&&i.ui.add(this._spinner,{key:o,position:"manual"})},gt),Dn(()=>{var i;return(i=this.viewModel)==null?void 0:i.sketchViewModel},"create",()=>{this.scheduleRender()}),Dn(()=>{var i;return(i=this.viewModel)==null?void 0:i.activeWorkflow},"cancel-request",({controller:i})=>{const{messages:s,messagesCommon:o}=this;this._prompt={title:s.cancelRequestTitle,message:s.cancelRequestWarningMessage,context:"danger",actions:{primary:{label:o.form.yes,action:()=>{i.allow(),this._prompt=null}},secondary:{label:o.form.no,action:()=>(i.deny(),this._prompt=null)}}},this.scheduleRender()}),ge(()=>this.supportingWidgetDefaults,i=>{i&&(this._featureForm.set(i.featureForm),this._attachments.set(i.attachments),this._featureTemplates.set(i.featureTemplates),this.viewModel.sketchViewModel.set(i.sketch))},gt),ge(()=>{var i;return(i=this._attachments)==null?void 0:i.error},i=>{if(!i)return;const{messages:s,messagesCommon:o}=this;this._prompt={title:s.errorWarningTitle,message:i.message,context:"warning",actions:{primary:{label:o.form.ok,action:()=>{this._prompt=null}}}}}),ge(()=>{var i;return(i=this.viewModel)==null?void 0:i.failures},i=>{if(!i)return;const{messages:s}=this,[{error:o,retry:r,cancel:a}]=i;this._prompt={title:s.errorWarningTitle,message:Si(s.errorWarningMessageTemplate,{errorMessage:o.message}),context:"warning",actions:{primary:{label:s.retry,action:()=>{r(),this._prompt=null}},secondary:{label:s.ignore,action:()=>(a(),this._prompt=null)}}}}),ge(()=>{var i;return(i=this.viewModel)==null?void 0:i.state},i=>{if(i==="awaiting-feature-to-update"&&(this._filterText=""),i==="awaiting-update-feature-candidate"&&(this._candidateCommitted=!1),i==="editing-existing-feature"){const{activeWorkflow:s}=this.viewModel;this._featureForm.disabled=(s==null?void 0:s.type)==="update"&&(s==null?void 0:s.data.editableItem.attributeUpdatesEnabled)===!1}}),ge(()=>{var i,s;return[(i=this._attachments)==null?void 0:i.selectedFile,(s=this._attachments)==null?void 0:s.submitting]},()=>this.scheduleRender()),ge(()=>{var i;return(i=this.viewModel)==null?void 0:i.activeWorkflow},()=>this._featureForm.disabled=!1),ji(()=>{var i;return!((i=this.viewModel)!=null&&i.activeWorkflow)},()=>this._featureTemplates.filterText=""),Dn(()=>this.view,"key-down",i=>{var s;i.key==="Escape"&&((s=this.viewModel)!=null&&s.activeWorkflow)&&this._handleBack()})])}destroy(){this._attachments.destroy(),this._featureForm.destroy(),this._featureTemplates.destroy(),this._snappingControls.destroy()}loadDependencies(){return Promise.all([Fe(()=>import("./calcite-action-9d25f314.js"),["./calcite-action-9d25f314.js","./action-ae390733.js","./dom-5b7af1bf.js","./observers-c77bfda3.js","./interactive-52dcf836.js","./icon-1a289254.js","./loader-632408c9.js","./guid-e49c4e43.js"],import.meta.url),Fe(()=>import("./calcite-button-4c16684d.js"),["./calcite-button-4c16684d.js","./dom-5b7af1bf.js","./label2-0103af15.js","./observers-c77bfda3.js","./interactive-52dcf836.js","./form-9bc9e261.js","./icon-1a289254.js","./loader-632408c9.js","./guid-e49c4e43.js"],import.meta.url),Fe(()=>import("./calcite-flow-67c8e2bc.js"),["./calcite-flow-67c8e2bc.js","./dom-5b7af1bf.js","./observers-c77bfda3.js"],import.meta.url),Fe(()=>import("./calcite-icon-5dd27db1.js"),["./calcite-icon-5dd27db1.js","./icon-1a289254.js","./dom-5b7af1bf.js","./observers-c77bfda3.js"],import.meta.url),Fe(()=>import("./calcite-flow-item-8eba8c39.js"),["./calcite-flow-item-8eba8c39.js","./dom-5b7af1bf.js","./panel-ae4dd30c.js","./popover-dcfb3586.js","./floating-ui-bda1a599.js","./preload-helper-41c905a7.js","./guid-e49c4e43.js","./openCloseComponent-587e936b.js","./key-1fec8108.js","./action-ae390733.js","./observers-c77bfda3.js","./interactive-52dcf836.js","./icon-1a289254.js","./loader-632408c9.js","./action-menu-d50c4d74.js","./scrim-41440f97.js","./tooltip-87951009.js"],import.meta.url),Fe(()=>import("./calcite-popover-44683d52.js"),["./calcite-popover-44683d52.js","./popover-dcfb3586.js","./dom-5b7af1bf.js","./floating-ui-bda1a599.js","./preload-helper-41c905a7.js","./guid-e49c4e43.js","./openCloseComponent-587e936b.js","./key-1fec8108.js","./action-ae390733.js","./observers-c77bfda3.js","./interactive-52dcf836.js","./icon-1a289254.js","./loader-632408c9.js"],import.meta.url),Fe(()=>import("./calcite-scrim-99bf204f.js"),["./calcite-scrim-99bf204f.js","./scrim-41440f97.js","./dom-5b7af1bf.js","./loader-632408c9.js","./guid-e49c4e43.js"],import.meta.url)])}get activeWorkflow(){return this.viewModel.activeWorkflow}get allowedWorkflows(){return this.viewModel.allowedWorkflows}set allowedWorkflows(e){this.viewModel.allowedWorkflows=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){const n={...v0,...e,snappingControlsElements:{...v0.snappingControlsElements,...e==null?void 0:e.snappingControlsElements}};return q(this._snappingControls)&&(this._snappingControls.visibleElements=n.snappingControlsElements),n}startCreateWorkflowAtFeatureTypeSelection(){return Sp(y0,"startCreateWorkflowAtFeatureTypeSelection","startCreateFeaturesWorkflowAtFeatureTypeSelection"),this.viewModel.startCreateWorkflowAtFeatureTypeSelection()}startCreateFeaturesWorkflowAtFeatureTypeSelection(){return this.viewModel.startCreateFeaturesWorkflowAtFeatureTypeSelection()}startCreateWorkflowAtFeatureCreation(e){return Sp(y0,"startCreateWorkflowAtFeatureCreation","startCreateFeaturesWorkflowAtFeatureCreation"),this.viewModel.startCreateWorkflowAtFeatureCreation(e)}startCreateFeaturesWorkflowAtFeatureCreation(e){return this.viewModel.startCreateFeaturesWorkflowAtFeatureCreation(e)}startCreateWorkflowAtFeatureEdit(e){return Sp(y0,"startCreateWorkflowAtFeatureEdit"),this.viewModel.startCreateWorkflowAtFeatureEdit(e)}startUpdateWorkflowAtFeatureSelection(){return this.viewModel.startUpdateWorkflowAtFeatureSelection()}startUpdateWorkflowAtMultipleFeatureSelection(e){return this.viewModel.startUpdateWorkflowAtMultipleFeatureSelection(e)}startUpdateWorkflowAtFeatureEdit(e){return this.viewModel.startUpdateWorkflowAtFeatureEdit(e)}deleteFeatureFromWorkflow(){return this.viewModel.deleteFeatureFromWorkflow()}cancelWorkflow(e){return this.viewModel.cancelWorkflow(e)}render(){const{_attachments:e,_prompt:n,viewModel:i}=this;if(!i)return M("div",{class:ln.base});const{state:s}=i,o=q(n)?M("calcite-scrim",null,this.renderPrompt(n)):null;return M("div",{class:ln.base},i.syncing||e.submitting?this.renderProgressBar():null,M("calcite-flow",null,this._stateStack.map(r=>this.renderState(r)),this.renderState(s)),o)}renderState(e){switch(e){case"disabled":break;case"ready":return this.renderLanding(e);case"awaiting-feature-creation-info":return this.renderTemplates(e);case"creating-features":case"editing-new-feature":case"editing-existing-feature":return this.renderAttributeEditing(e);case"awaiting-feature-to-update":return this.renderFeatureUpdating(e);case"awaiting-update-feature-candidate":return this.renderFeatureList(e);case"awaiting-feature-to-create":return this.renderFeatureCreation(e);case"adding-attachment":return this.renderAttachmentAdding(e);case"editing-attachment":return this.renderAttachmentEditing(e)}return M("div",null)}isPanelActive(e){return this.viewModel.state===e}renderTemplates(e){const{EditorPanel:n,headingLevel:i,messages:s,messagesCommon:o,_handleBack:r,_snappingControls:a,viewModel:{sketchViewModel:l}}=this;return M(n,{active:this.isPanelActive(e),key:"templates-panel",handleBack:r,heading:s.selectTemplate,headingLevel:i,messages:s,messagesCommon:o,sketchViewModel:l,snappingControls:a},M("div",{class:ln.panelContent},this._featureTemplates.render()))}renderAttributeEditing(e){const{activeWorkflow:n,EditorPanel:i,messages:s,messagesCommon:o,headingLevel:r,_handleBack:a,_snappingControls:l,viewModel:c}=this,{sketchViewModel:u}=c,d=c.featureFormViewModel;if(n.type==="create-features"&&n.pendingFeatures.length<1)return this.renderFeatureCreation(e);const h=n.type==="update"&&!n.data.edits.modified||c.syncing||d.updating,f=n.type==="update"?s.editFeature:s.createFeatures,m=n.type==="update"?o.update:o.create,g=n.type==="create-features"&&n.createFeatureState==="create-new",y=n.type==="update"&&n.data.editableItem.supports.includes("delete"),_=this._shouldShowAttachmentsForWorkflow(n),C=[{label:n.type==="create-features"&&n.numPendingFeatures>1?Si(s.createFeaturesTemplate,{numFeatures:n.numPendingFeatures}):m,type:"primary",disabled:h,clickHandler:this._handleSave,width:y?"half":"full"}];y&&C.push({label:o.delete,type:"tertiary",clickHandler:this._handleDelete,disabled:c.syncing,appearance:"outline",width:"half"});const w=d.inputFields.every(S=>!S.visible)&&!_?this.renderMessage(Si(s.clickToFinishTemplate,{button:m})):M("div",{class:ln.panelContentSection},M("div",{class:ln.panelContentSectionGroup},this._featureForm.render(),_?M("div",{key:"attachments"},M(Is,{level:vu(r)},s.attachments),this._attachments.render()):null));return M(i,{active:this.isPanelActive(e),key:"attribute-editing-panel",heading:f,headingLevel:r,handleBack:a,messages:s,messagesCommon:o,sketchViewModel:u,snappingControls:l},M("div",{class:ln.panelContent},w,g?M("calcite-scrim",null):null),this.renderFooterActions(C))}renderAttachmentAdding(e){const{_attachments:n,EditorPanel:i,_handleBack:s,headingLevel:o,messages:r,messagesCommon:a,_snappingControls:l,viewModel:{sketchViewModel:c}}=this,u=[{label:n.submitting?a.cancel:a.add,disabled:n.submitting||!n.selectedFile,type:"primary",clickHandler:this._handleAttachmentAdd,width:"full"}];return M(i,{active:this.isPanelActive(e),key:"attachment-adding-panel",heading:r.addAttachment,headingLevel:o,handleBack:s,messages:r,messagesCommon:a,sketchViewModel:c,snappingControls:l},M("div",{class:ln.panelContent},n.render()),this.renderFooterActions(u))}renderAttachmentEditing(e){const{_attachments:n,EditorPanel:i,_handleBack:s,headingLevel:o,messages:r,messagesCommon:a,_snappingControls:l,viewModel:{sketchViewModel:c}}=this,u=[{label:a.update,disabled:n.submitting||!n.selectedFile,type:"primary",clickHandler:this._handleAttachmentUpdate,width:"half"},{label:a.delete,disabled:n.submitting,type:"tertiary",clickHandler:this._handleAttachmentDelete,width:"half",appearance:"outline"}];return M(i,{active:this.isPanelActive(e),key:"attachment-editing-panel",heading:r.editAttachment,headingLevel:o,handleBack:s,messages:r,messagesCommon:a,sketchViewModel:c,snappingControls:l},M("div",{class:ln.panelContent},n.render()),this.renderFooterActions(u))}renderFeatureUpdating(e){const{EditorPanel:n,_handleBack:i,headingLevel:s,messages:o,messagesCommon:r,_snappingControls:a,viewModel:{sketchViewModel:l}}=this;return M(n,{active:this.isPanelActive(e),key:"feature-updating-panel",heading:o.selectFeature,headingLevel:s,handleBack:i,messages:o,messagesCommon:r,sketchViewModel:l,snappingControls:a},M("div",{class:ln.panelContent},this.renderMessage(o.selectFeatureToEdit)))}renderMessage(e){return M("div",{class:ln.panelContentMessage},e)}renderFeatureCreation(e){const{EditorPanel:n,_handleBack:i,headingLevel:s,messages:o,messagesCommon:r,_snappingControls:a,viewModel:l}=this,{sketchViewModel:c}=l,u=l.sketchViewModel,d=this._assertActiveCreateWorkflow().data.creationInfo.layer,h=u.canUndo()&&u.createGraphic?u.createGraphic:null,f=this._getSketchingTip(d.geometryType,h);return M(n,{active:this.isPanelActive(e),key:"feature-creation-panel",heading:o.placeFeature,headingLevel:s,handleBack:i,messages:o,messagesCommon:r,sketchViewModel:c,snappingControls:a},M("div",{class:ln.panelContent},this.renderMessage(f)))}renderFooterActions(e){return e.map(({type:n,disabled:i,class:s,...o},r)=>this.renderButton({class:this.classes(ln.controlButton,n==="secondary"?ln.buttonSecondary:n==="tertiary"?ln.buttonTertiary:null,i?ln.buttonDisabled:null,s),disabled:i??!1,key:r,slot:"footer-actions",...o}))}renderPrompt({title:e,message:n,context:i,actions:s}){const o=!!s.secondary,r=M("calcite-button",{appearance:"solid",color:i==="danger"?"red":"blue",width:o?"half":"full",onclick:s.primary.action,key:"prompt-primary-button",afterCreate:UIe},s.primary.label),a=o?M("calcite-button",{appearance:"clear",color:i==="danger"?"red":"blue",width:"half",onclick:s.secondary.action,key:"prompt-secondary-button"},s.secondary.label):null;return M("div",{class:`${ln.promptContainer}--${i}`},M("div",{class:ln.promptHeader},M("calcite-icon",{icon:"exclamation-mark-triangle"}),M(Is,{class:ln.promptHeading,level:this.headingLevel},e)),M("div",{class:ln.promptMessage},n),M("div",{class:ln.promptDivider}),M("div",{class:ln.promptActions},a,r))}renderProgressBar(){return M("div",{class:this.classes(ln.progressBar),key:"progress-bar"})}renderButton(e){const{disabled:n,class:i,key:s,clickHandler:o,label:r,...a}=e;return M("calcite-button",{class:i,disabled:n,key:s,onclick:o,type:"button",...a},r)}renderLanding(e){const{EditorPanel:n,headingLevel:i,messages:s,messagesCommon:o,_snappingControls:r,_featureTemplates:{viewModel:{numberOfFeatureTemplates:a}},viewModel:{canUpdate:l,sketchViewModel:c}}=this,u=!l&&a===0;return M(n,{active:this.isPanelActive(e),key:"landing-panel",heading:s.widgetLabel,headingLevel:i,showBackButton:!1,messages:s,messagesCommon:o,sketchViewModel:c,snappingControls:r},M("div",{class:ln.panelContent},l?M("div",{key:"edit-actions",class:ln.panelContentSection},this.renderUpdateActions()):void 0,a>0?M("div",{key:"create-actions",class:ln.panelContentSection},this.renderCreateActions()):void 0,u?M("div",{key:"no-content",class:ln.panelContentSection},s.noEditableLayers):void 0))}renderUpdateActions(){const{messages:e,messagesCommon:n}=this;return M("div",null,M(Is,{level:vu(this.headingLevel)},e.editFeatures),M("div",{class:ln.updateFeaturesActionButtons},M("calcite-action",{text:n.select,textEnabled:!0,icon:"cursor",alignment:"start",class:ln.updateFeaturesActionButtonsButton,onclick:this._handleEdit})))}renderCreateActions(){const{_featureTemplates:e,headingLevel:n,messages:i}=this;return M("div",null,M(Is,{level:vu(n)},i.createFeatures),M("div",{key:"templates",class:ln.featureTemplatesContainer},e.render()))}renderFeatureList(e){const{EditorPanel:n,_handleBack:i,headingLevel:s,messages:o,messagesCommon:r,messagesTemplates:a,_snappingControls:l,viewModel:{editableItems:c,sketchViewModel:u}}=this,d=this._assertActiveUpdateWorkflow().data.candidates,h=Si(o.multipleFeaturesTemplate,{total:d.length}),f=new Map;let m=0;d.map(_=>({label:this._getLabel(_),id:_.attributes[_.layer.objectIdField],data:_})).filter(_=>{const{label:C,data:w}=_,S=this._filterText.toLowerCase(),{title:E}=w.layer;return this.viewModel.editableItems.find(A=>A.layer===w.layer).supports.includes("update")&&(!S||C.toLowerCase().includes(S)||E.toLowerCase().includes(S))}).forEach(_=>{m++;const C=_.data.layer;f.has(C)?f.get(C).items.push(_):f.set(C,{id:`${C.id}`,label:C.title,items:[_]})});const g=c.filter(({layer:_})=>f.has(_)).map(({layer:_})=>f.get(_)).toArray(),y=m>10||this._filterText.length>0;return M(n,{active:this.isPanelActive(e),key:"feature-list",heading:h,headingLevel:s,handleBack:i,messages:o,messagesCommon:r,sketchViewModel:u,snappingControls:l},M("div",{class:ln.panelContent},M("div",{class:ln.panelContentSection},ZN({id:this.id,enableListScroll:!1,filterEnabled:y,filterText:this._filterText,items:g,messages:{filterPlaceholder:a.filterPlaceholder,noItems:a.noItems,noMatches:a.noMatches},onItemMouseEnter:({data:_})=>this._setCandidateFeature(_),onItemMouseLeave:()=>this._setCandidateFeature(null),onItemSelect:({data:_})=>this._setCandidateFeature(_,!0),onFilterChange:_=>this._filterText=_}))))}EditorPanel(e,...n){const{active:i,handleBack:s,heading:o,headingLevel:r,key:a,messages:l,messagesCommon:c,showBackButton:u,sketchViewModel:d,snappingControls:h}=e,{snappingControls:f,undoRedoButtons:m}=this.visibleElements;return M("calcite-flow-item",{bind:this,key:a,heading:o,headingLevel:r,showBackButton:u??!0,"intl-back":c.back,closable:!1,onCalciteFlowItemScroll:this._closeSnappingPopover,onCalciteFlowItemBackClick:s??null},M("div",{class:ln.panelToolbar},f?[M("calcite-popover",{autoClose:i,afterCreate:this._setSnappingPopover,afterUpdate:this._setSnappingPopover,bind:this,label:l.snappingSettings,heading:l.snappingSettings,referenceElement:this._snappingButton||null,"overlay-positioning":"fixed",placement:"bottom"},M("div",{class:ln.snappingControlsPopover},h.render())),M("calcite-button",{id:`${a}__snappingButton`,afterCreate:this._setSnappingButton,afterUpdate:this._setSnappingButton,bind:this,text:l.snapping,appearance:"transparent",color:"neutral",alignment:"icon-end-space-between","icon-start":"vertex-gps","icon-end":"caret-down",width:"full",class:ln.panelToolbarSnappingButton,onkeydown:g=>{g.key==="Escape"&&this._closeSnappingPopover()}},l.snapping)]:null,m?[M("calcite-button",{key:"undo-button",text:c.undo,appearance:"transparent",color:"neutral",alignment:"center","icon-start":"undo",scale:"l",disabled:!d.canUndo(),onclick:d.undo.bind(d)}),M("calcite-button",{key:"redo-button",text:c.redo,appearance:"transparent",color:"neutral",alignment:"center","icon-start":"redo",scale:"l",disabled:!d.canRedo(),onclick:d.redo.bind(d)})]:null),n)}_closeSnappingPopover(){var e;(e=this._snappingPopover)!=null&&e.open&&this._snappingPopover.toggle()}_setSnappingPopover(e){this._snappingPopover=e}_setSnappingButton(e){this._snappingButton=e,this.scheduleRender()}_getSketchingTip(e,n){const{messages:i}=this;if(e==="point")return i.tips.clickToAddPoint;if(e==="polygon"||e==="polyline"){if(!n)return i.tips.clickToStart;const s=n.geometry,o=e==="polygon"?"rings":"paths",[r]=s[o];return e==="polygon"&&r<4?i.tips.clickToContinue:i.tips.clickToContinueThenDoubleClickToEnd}return i.tips.clickToAddFeature}_getLabel(e){const n=e.layer;if(!n)return null;const{objectIdField:i}=n,{attributes:s}=e,o=j8(n);return o&&s[o]&&`${s[o]}`||Si(this.messages.untitledFeatureTemplate,{id:s[i]})}_handleDelete(){const{messages:e,messagesCommon:n}=this;this._prompt={title:e.deleteWarningTitle,message:e.deleteWarningMessage,context:"danger",actions:{primary:{label:n.delete,action:()=>{this.viewModel.deleteFeatureFromWorkflow(),this._prompt=null}},secondary:{label:e.keepFeature,action:()=>this._prompt=null}}}}_handleSave(){const{featureFormViewModel:e}=this.viewModel;e.submit(),!e.submittable||e.validateContingencyConstraints(e.getValues(),{includeIncompleteViolations:!0}).length>0||this.viewModel.activeWorkflow.commit()}_handleAttachmentAdd(){const{_attachments:e}=this,{activeWorkflow:n}=this.viewModel;n.type==="create-features"?(e.addFile(),n.previous()):e.addAttachment().then(()=>n.previous())}_handleAttachmentUpdate(){const{_attachments:e}=this,{activeWorkflow:n}=this.viewModel;n.type==="create-features"?(e.updateFile(),n.previous()):e.updateAttachment().then(()=>n.previous())}_handleAttachmentDelete(){const{messages:e,messagesCommon:n}=this;this._prompt={title:e.deleteAttachmentWarningTitle,message:e.deleteAttachmentWarningMessage,context:"danger",actions:{primary:{label:n.delete,action:()=>{const{_attachments:i}=this,{activeWorkflow:s}=this.viewModel;s.type==="create-features"?(i.deleteFile(),s.previous(),this._prompt=null):i.deleteAttachment(i.viewModel.activeAttachmentInfo).then(()=>{s.previous(),this._prompt=null})}},secondary:{label:e.keepAttachment,action:()=>this._prompt=null}}}}_handleAdd(){this.viewModel.canCreate}_handleEdit(){this.viewModel.canUpdate&&this.viewModel.startUpdateWorkflowAtFeatureSelection()}_handleDone(){this.viewModel.cancelWorkflow({force:!0})}async _handleBack(e){if(!this.activeWorkflow)return;const n=this.activeWorkflow;if(e==null||e.stopPropagation(),this.viewModel.syncing)return;const i=()=>{n.hasPreviousStep?n.previous({cancelCurrentStep:!0}):this.viewModel.cancelWorkflow({force:!0})};if(n.type==="create"||n.type==="create-features"&&n.numPendingFeatures>0||n.stepId==="editing-existing-feature"&&n.data.edits.modified){const{messages:s}=this,{type:o}=n,r=o==="create"?s.cancelAddWarningMessage:s.cancelEditWarningMessage,a=o==="create"?s.cancelAddTitle:s.cancelEditTitle,l=o==="create"?s.continueAdding:s.continueEditing,c=o==="create"?s.discardFeature:s.discardEdits;return this._prompt={title:a,message:r,context:"danger",actions:{primary:{label:c,action:()=>{this._prompt=null,i()}},secondary:{label:l,action:()=>this._prompt=null}}},void this.scheduleRender()}i()}_assertActiveCreateWorkflow(){const{type:e}=this.viewModel.activeWorkflow;if(e==="create"||e==="create-features")return this.viewModel.activeWorkflow;throw new Error("Expected activeWorkflow to be instance of CreateWorkflow or CreateFeaturesWorkflow")}_assertActiveUpdateWorkflow(){if(this.viewModel.activeWorkflow.type==="update")return this.viewModel.activeWorkflow;throw new Error("Expected activeWorkflow to be an UpdateWorkflow")}_shouldShowAttachmentsForWorkflow(e){const n=e.type==="create-features"&&e.data.creationInfo;let i=!1;if(n){const{layerInfos:s}=this,{layer:o}=n,{data:r}=o.capabilities,a=s&&s.find(l=>l.layer===o);i="supportsAttachment"in r&&r.supportsAttachment&&(!a||a.allowAttachments!==!1)}return i||e.type==="update"&&e.data.editableItem.hasAttachments}};v([b()],Cn.prototype,"_attachments",void 0),v([b({readOnly:!0})],Cn.prototype,"activeWorkflow",null),v([b()],Cn.prototype,"allowedWorkflows",null),v([b()],Cn.prototype,"useDeprecatedCreateWorkflow",void 0),v([b()],Cn.prototype,"headingLevel",void 0),v([b()],Cn.prototype,"iconClass",void 0),v([b()],Cn.prototype,"label",null),v([b()],Cn.prototype,"labelOptions",null),v([b()],Cn.prototype,"layerInfos",null),v([b(),rn("esri/widgets/Editor/t9n/Editor")],Cn.prototype,"messages",void 0),v([b(),rn("esri/t9n/common")],Cn.prototype,"messagesCommon",void 0),v([b(),rn("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],Cn.prototype,"messagesTemplates",void 0),v([b()],Cn.prototype,"snappingOptions",null),v([b()],Cn.prototype,"tooltipOptions",null),v([b()],Cn.prototype,"supportingWidgetDefaults",void 0),v([b()],Cn.prototype,"view",null),v([b(),Sh(["workflow-cancel","workflow-commit"])],Cn.prototype,"viewModel",void 0),v([b()],Cn.prototype,"visibleElements",void 0),v([ii("visibleElements")],Cn.prototype,"castVisibleElements",null),v([Sn()],Cn.prototype,"_handleDelete",null),v([Sn()],Cn.prototype,"_handleAttachmentAdd",null),v([Sn()],Cn.prototype,"_handleAttachmentUpdate",null),v([Sn()],Cn.prototype,"_handleAttachmentDelete",null),v([Sn()],Cn.prototype,"_handleAdd",null),v([Sn()],Cn.prototype,"_handleEdit",null),v([Sn()],Cn.prototype,"_handleDone",null),Cn=v([Ae(P4)],Cn);const qA=Cn;let ql=class extends dt{constructor(e){super(e),this._viewpointHandle=null,this._handles=new si,this.group=null}initialize(){this._handles.add(Dn(()=>{var e;return(e=this.view)==null?void 0:e.ui},"expand",e=>{const{target:n}=e;n&&n!==this&&n.expanded&&n.group&&n.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null,this._handles.destroy(),this._handles=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){const n=!!e;this._set("expanded",n);const i=this.get("view.ui");i&&i.emit("expand",{target:this}),this._viewpointHandleChange(n)}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&ji(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?ji(()=>this.view.stationary,()=>this._viewpointHandle.resume(),{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this._handles.remove(e),this._viewpointHandle=null;const{autoCollapse:n,view:i}=this;if(i&&n){const s=T8(()=>i.type==="3d"?i.camera:i.viewpoint,()=>this._collapse());this._handles.add(s,e),this._viewpointHandle=s}}_collapse(){this.expanded=!1}};v([b({value:!1})],ql.prototype,"autoCollapse",null),v([b({value:!1})],ql.prototype,"expanded",null),v([b()],ql.prototype,"group",void 0),v([b({readOnly:!0})],ql.prototype,"state",null),v([b({value:null})],ql.prototype,"view",null),ql=v([Ae("esri.widgets.Expand.ExpandViewModel")],ql);const R4=ql,yi={base:"esri-expand esri-widget",modeAuto:"esri-expand--auto",modeDrawer:"esri-expand--drawer",modeFloating:"esri-expand--floating",container:"esri-expand__container",containerExpanded:"esri-expand__container--expanded",panel:"esri-expand__panel",button:"esri-widget--button",text:"esri-icon-font-fallback-text",icon:"esri-collapse__icon",iconExpanded:"esri-expand__icon--expanded",iconNumber:"esri-expand__icon-number",iconNumberExpanded:"esri-expand__icon-number--expanded",expandIcon:"esri-icon-expand",collapseIcon:"esri-icon-collapse",content:"esri-expand__content",contentExpanded:"esri-expand__content--expanded",expandMask:"esri-expand__mask",expandMaskExpanded:"esri-expand__mask--expanded"};let li=class extends kn{constructor(e,n){super(e,n),this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expandTooltip="",this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.viewModel=new R4,this._handleKeyDown=i=>{const{closeOnEsc:s,_toggleButtonEl:o,expanded:r}=this;!r||!s||i.target===o||i.key!=="Escape"||(typeof s=="function"?s(i):s)&&(this.expanded=!1,o==null||o.focus())}}get contentId(){return`${this.id}_controls_content`}get expandTitle(){const{expanded:e,messagesCommon:n,collapseTooltip:i,expandTooltip:s}=this;return e?i||n.collapse:s||n.expand}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(e){this.viewModel.autoCollapse=e}get collapseIconClass(){return yi.collapseIcon}set collapseIconClass(e){this._overrideIfSome("collapseIconClass",e)}get expanded(){return this.viewModel.expanded}set expanded(e){this.viewModel.expanded=e}get expandIconClass(){return Pp(this.content)?this.content.iconClass:yi.expandIcon}set expandIconClass(e){this._overrideIfSome("expandIconClass",e)}get group(){return this.viewModel.group}set group(e){this.viewModel.group=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}toggle(){this.viewModel.expanded=!this.viewModel.expanded}render(){const{mode:e}=this,n={[yi.modeAuto]:e==="auto",[yi.modeDrawer]:e==="drawer",[yi.modeFloating]:e==="floating"};return M("div",{class:this.classes(yi.base,n),onkeydown:this._handleKeyDown},this.renderMask(),this.renderContainer())}renderContainer(){const{expanded:e}=this,n={[yi.containerExpanded]:e};return M("div",{class:this.classes(yi.container,n)},this.renderPanel(),this.renderContent())}renderMask(){const{expanded:e}=this,n={[yi.expandMaskExpanded]:e};return M("div",{bind:this,onclick:this._toggle,class:this.classes(yi.expandMask,n)})}renderBadgeNumber(){const{expanded:e,iconNumber:n}=this;return n&&!e?M("span",{key:"expand__icon-number",class:yi.iconNumber},n):null}renderPanelNumber(){const{iconNumber:e,expanded:n}=this;return e&&n?M("span",{key:"expand__expand-icon-number",class:this.classes(yi.iconNumber,yi.iconNumberExpanded)},e):null}renderIcon(){const{collapseIconClass:e,expandIconClass:n,expanded:i}=this,s={[yi.iconExpanded]:i,[e]:i,[n]:!i};return e===n&&(s[e]=!0),M("span",{"aria-hidden":"true",class:this.classes(yi.icon,s)})}renderTitle(){return M("span",{class:yi.text},this.expandTitle)}renderExpandButton(){const{expanded:e,expandTitle:n,contentId:i}=this;return M("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":i,"aria-expanded":e?"true":"false",bind:this,class:yi.button,onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:n},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())}renderPanel(){return M("div",{class:yi.panel},this.renderExpandButton(),this.renderPanelNumber())}renderContent(){const{expanded:e,contentId:n,content:i}=this,s={[yi.contentExpanded]:e},o={id:n,role:"region",class:this.classes(yi.content,s)};return typeof i=="string"?M("div",{key:"content__string",innerHTML:i,...o}):Pp(i)?M("div",{key:"content__widget",...o},i.render()):i instanceof HTMLElement?M("div",{key:"content__html-element",bind:i,afterCreate:this._attachToNode,...o}):YL(i)?M("div",{key:"content__node",bind:i.domNode,afterCreate:this._attachToNode,...o}):null}_toggle(){this.toggle()}_attachToNode(e){const n=this;e.appendChild(n)}_storeToggleButtonEl(e){this._toggleButtonEl=e}};v([b({readOnly:!0})],li.prototype,"contentId",null),v([b({readOnly:!0})],li.prototype,"expandTitle",null),v([b()],li.prototype,"autoCollapse",null),v([b()],li.prototype,"closeOnEsc",void 0),v([b()],li.prototype,"collapseIconClass",null),v([b()],li.prototype,"collapseTooltip",void 0),v([b()],li.prototype,"content",void 0),v([b()],li.prototype,"expanded",null),v([b()],li.prototype,"expandIconClass",null),v([b()],li.prototype,"expandTooltip",void 0),v([b()],li.prototype,"group",null),v([b()],li.prototype,"iconNumber",void 0),v([b()],li.prototype,"label",null),v([b(),rn("esri/widgets/Expand/t9n/Expand")],li.prototype,"messages",void 0),v([b(),rn("esri/t9n/common")],li.prototype,"messagesCommon",void 0),v([b()],li.prototype,"mode",void 0),v([b()],li.prototype,"view",null),v([b({type:R4})],li.prototype,"viewModel",void 0),v([Sn()],li.prototype,"_toggle",null),li=v([Ae("esri.widgets.Expand")],li);const WIe=li;let GIe=class{constructor(e){this.client=e,this._cancelled=!1,this.size=0,this.duration=0}},jIe=class{constructor(e){this.typeWorkerQuota=e,this.tasks=new Array,this.numWorkers=0,this.statistics=new qIe}},qIe=class{constructor(){this.requests=0,this.size=0,this.duration=0,this.speed=0}},KIe=class{constructor(e,n,i,s){this._workerFunc=e,this._callbackFunc=n,this._maxTotalNumWorkers=i,this._totalNumWorkers=0,this._clients=s.map(o=>new jIe(o))}destroy(){this._clients.length=0}hasQuota(e){const n=this._clients[e];return!!n&&(this._totalNumWorkers<this._maxTotalNumWorkers||n.numWorkers+n.tasks.length<n.typeWorkerQuota)}push(e){const n=this._clients[e.client];n&&(this._totalNumWorkers<this._maxTotalNumWorkers?(n.numWorkers++,this._totalNumWorkers++,this._workerFunc(e,(i,s)=>this._taskCallback(i,s))):n.tasks.push(e))}cancel(e){this._taskFinished(e),e._cancelled=!0}_taskFinished(e){const n=this._clients[e.client];this._totalNumWorkers--,n.numWorkers--,n.statistics.requests++,n.statistics.size+=e.size||0,n.statistics.duration+=e.duration||0,n.statistics.speed=n.statistics.duration>0?n.statistics.size/n.statistics.duration:0,CO(n.numWorkers>=0),this._next()}_next(){for(const e of this._clients)if(e&&e.numWorkers<e.typeWorkerQuota&&this._processQueue(e))return;for(const e of this._clients)if(e&&this._processQueue(e))return}_processQueue(e){for(;e.tasks.length>0;)if(this._workerFunc(e.tasks.shift(),(n,i)=>this._taskCallback(n,i)))return e.numWorkers++,this._totalNumWorkers++,!0;return!1}_taskCallback(e,n){e._cancelled||(this._callbackFunc(e,n),this._taskFinished(e))}getStatsForType(e){const n=this._clients[e];return n?{quota:n.typeWorkerQuota,workers:n.numWorkers,queueSize:n.tasks.length,requestStats:n.statistics}:null}get test(){const e=this;return{set workerFunc(n){e._workerFunc=n}}}},b0=class extends dt{constructor(){super(...arguments),this._tasks=new Map,this._onLoadQueue=new Array,this._doneQueue=new Array,this.updating=!1}setup(e,n,i){this._loadQueue=new KIe((s,o)=>this._startLoading(s,o),(s,o)=>this._doneLoadingCB(s,o),e,n),i&&(this._frameTask=i.registerTask(Pb.STREAM_DATA_LOADER,this))}destroy(){this._frameTask=Bi(this._frameTask),this._tasks.forEach(e=>Kr(e.abortController)),this._loadQueue=sn(this._loadQueue),this._onLoadQueue=null,this._doneQueue=null,this._tasks=null}hasDownloadSlots(e){return this._loadQueue.hasQuota(e)}request(e,n,i,s={}){const o=PS();o.__signal=q(s)?s.signal:null;const r=this._createOrUpdateTask(e,n,i,s,o);return $y(s,()=>this._cancelRequest(r,o)),o.promise}_createTask(e,n,i,s,o,r){const a=new QIe(e,n,i,s,o);return this._updateTask(a,r),this._tasks.set(o,a),this._tasks.size===1&&this._set("updating",!0),this._loadQueue.push(a),a}_cancelRequest(e,n){var i;a8(e.resolvers,n),n.reject(Op()),e.resolvers.length===0&&(e.status===Ro.DOWNLOADING&&(e.status=Ro.CANCELLED,this._loadQueue.cancel(e),(i=e.abortController)==null||i.abort(),e.request=null,e.abortController=null),e.status=Ro.CANCELLED,this._tasks.delete(e.key),this._tasks.size===0&&this._set("updating",!1))}_updateTask(e,n){e.resolvers.push(n)}_createOrUpdateTask(e,n,i,s,o){const r=JIe(q(s)&&s.uid||e,n,i),a=this._tasks.get(r);return a?(this._updateTask(a,o),a):this._createTask(e,s,n,i,r,o)}_doneLoadingCB(e,n){this._loadQueue&&(CO(e.status===Ro.DOWNLOADING),e.status=Ro.DOWNLOADED,this._frameTask?this._doneQueue.push({task:e,err:n}):this._doneLoading(e,n))}get running(){return this._doneQueue.length>0||this._onLoadQueue.length>0}runTask(e){for(;!e.done&&this._onLoadQueue.length>0;){const n=this._onLoadQueue.shift();xs(n.task.abortController),n.task.abortController=null,n.callback(n.task),e.madeProgress()}for(;!e.done&&this._doneQueue.length>0;){const n=this._doneQueue.shift();n.task.status!==Ro.DOWNLOADED&&(n.err=n.err||Op()),this._doneLoading(n.task,n.err),e.madeProgress()}}_doneLoading(e,n){if(n&&!gc(n)&&e.numRetries>0)return--e.numRetries,void this._loadQueue.push(e);let i=e.result instanceof HTMLImageElement?0:e.resolvers.length;for(const s of e.resolvers)if(n)gc(n)?s.reject(n):s.reject(new Ue("stream-data-loader:request-error",`Failed to request resource at '${e.url}'. ${n}`,{url:e.url,error:n}));else{--i;const o=i<=0?e.result:hr(e.result);s.resolve(o)}this._tasks.delete(e.key),this._tasks.size===0&&this._set("updating",!1)}_startLoading(e,n){if(e.status===Ro.CANCELLED)return!1;let i,s;switch(e.startTime=performance.now(),e.status=Ro.DOWNLOADING,e.docType){case"binary":s="array-buffer",i=0;break;case"image":s="image";break;case"image+type":s="array-buffer";break;default:s="json"}e.abortController=new AbortController;const o=e.abortController.signal;e.request=go(e.url,{...e.options,responseType:s,timeout:i,signal:o});let r=()=>{};const a=c=>{e.duration=performance.now()-e.startTime,e.size=c instanceof ArrayBuffer?c.byteLength:e.size||0,e.result=c,this._frameTask?this._onLoadQueue.push({callback:n,task:e}):(e.abortController=null,n(e))},l=c=>{e.status===Ro.DOWNLOADING&&n(e,c),r()};return e.docType!=="image+type"?(e.request.then(c=>a(c.data),l),!0):(e.request.then(c=>{const u=c.data,d=ZIe(u);if(s="image",e.size=u.byteLength,d==="unknown")return e.request=go(e.url,{responseType:s,timeout:i,signal:o}),void e.request.then(m=>a(m.data),l);const h=new Blob([u],{type:d}),f=window.URL.createObjectURL(h);r=()=>window.URL.revokeObjectURL(f),e.request=go(f,{responseType:s,timeout:i,signal:o}),e.request.then(m=>a(new XIe(m.data,d,r)),l)},l),!0)}get test(){return{loadQueue:this._loadQueue}}};v([b({readOnly:!0})],b0.prototype,"updating",void 0),b0=v([Ae("esri.views.3d.support.StreamDataLoader")],b0);const YIe={numRetries:0};function ZIe(t){if(t.byteLength<2)return"unknown";const e=new Uint8Array(t,0,t.byteLength);return e[0]===137&&e[1]===80?"image/png":e[0]===71&&e[1]===73?"image/gif":e[0]===66&&e[1]===77?"image/bmp":e[0]===255&&e[1]===216?"image/jpeg":"unknown"}let XIe=class{constructor(e,n,i){this.image=e,this.type=n,this.release=i}get isOpaque(){return this.type==="image/jpeg"}},QIe=class extends GIe{constructor(e,n,i,s,o){super(s),this.url=e,this.options=n,this.docType=i,this.key=o,this.result=null,this.status=Ro.QUEUED,this.request=null,this.abortController=null,this.resolvers=new Array,this.startTime=0,this.numRetries=YIe.numRetries}};function JIe(t,e,n){return`${t}:${e}:${n}`}var Ro;(function(t){t[t.QUEUED=1]="QUEUED",t[t.DOWNLOADING=2]="DOWNLOADING",t[t.DOWNLOADED=3]="DOWNLOADED",t[t.CANCELLED=4]="CANCELLED"})(Ro||(Ro={}));var KA,YA,qr,ZA,XA,QA,JA;(function(t){t[t.INNER=0]="INNER",t[t.OUTER=1]="OUTER"})(KA||(KA={})),function(t){t[t.REGULAR=0]="REGULAR",t[t.HAS_NORTH_POLE=1]="HAS_NORTH_POLE",t[t.HAS_SOUTH_POLE=2]="HAS_SOUTH_POLE",t[t.HAS_BOTH_POLES=3]="HAS_BOTH_POLES"}(YA||(YA={})),function(t){t[t.NORTH=0]="NORTH",t[t.NORTH_EAST=1]="NORTH_EAST",t[t.EAST=2]="EAST",t[t.SOUTH_EAST=3]="SOUTH_EAST",t[t.SOUTH=4]="SOUTH",t[t.SOUTH_WEST=5]="SOUTH_WEST",t[t.WEST=6]="WEST",t[t.NORTH_WEST=7]="NORTH_WEST"}(qr||(qr={})),function(t){t[t.OFF=0]="OFF",t[t.ON=1]="ON"}(ZA||(ZA={})),function(t){t[t.Color=0]="Color",t[t.ColorNoRasterImage=1]="ColorNoRasterImage",t[t.Highlight=2]="Highlight",t[t.Water=3]="Water",t[t.Occluded=4]="Occluded",t[t.ObjectAndLayerIdColor=5]="ObjectAndLayerIdColor"}(XA||(XA={})),function(t){t[t.FADING=0]="FADING",t[t.IMMEDIATE=1]="IMMEDIATE",t[t.UNFADED=2]="UNFADED"}(QA||(QA={})),function(t){t[t.INSIDE=0]="INSIDE",t[t.INTERSECTS=1]="INTERSECTS",t[t.OUTSIDE=2]="OUTSIDE"}(JA||(JA={}));const exe=12;let ni=class{constructor(e){const n=ni.checkUnsupported(e);if(q(n))throw n;const i=zt(e);this.spatialReference=i.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=DS(this.spatialReference)||UL(this.spatialReference)||WL(this.spatialReference),this.origin=[i.origin.x,i.origin.y],this.pixelSize=i.size[0],this.dpi=i.dpi;const s=i.lods.reduce((c,u,d)=>(u.level<c.min&&(c.min=u.level,c.minIndex=d),c.max=Math.max(c.max,u.level),c),{min:1/0,minIndex:0,max:-1/0}),o=i.lods[s.minIndex],r=2**o.level;let a=o.resolution*r,l=o.scale*r;this.levels=new Array(s.max+1);for(let c=0;c<this.levels.length;c++)this.levels[c]={resolution:a,scale:l,tileSize:[a*i.size[0],a*i.size[1]]},a/=2,l/=2}clone(){return new ni(this.toTileInfo())}toTileInfo(){return new wf({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map((e,n)=>({level:n,scale:e.scale,resolution:e.resolution}))})}getExtent(e,n,i,s){const o=this.levels[e],r=o.tileSize[0],a=o.tileSize[1];s[0]=this.origin[0]+i*r,s[2]=this.origin[0]+(i+1)*r,s[3]=this.origin[1]-n*a,s[1]=this.origin[1]-(n+1)*a}convertExtentToRadians(e,n){this._isWebMercator?(n[0]=nI(e[0]),n[1]=iI(e[1]),n[2]=nI(e[2]),n[3]=iI(e[3])):this._isGCS&&(n[0]=Qh(e[0]),n[1]=Qh(e[1]),n[2]=Qh(e[2]),n[3]=Qh(e[3]))}getExtentGeometry(e,n,i,s=new ol){return this.getExtent(e,n,i,Mr),s.spatialReference=this.spatialReference,s.xmin=Mr[0],s.ymin=Mr[1],s.xmax=Mr[2],s.ymax=Mr[3],s.zmin=void 0,s.zmax=void 0,s}ensureMaxLod(e){if(e==null)return!1;let n=!1;for(;this.levels.length<=e;){const i=this.levels[this.levels.length-1],s=i.resolution/2;this.levels.push({resolution:s,scale:i.scale/2,tileSize:[s*this.pixelSize,s*this.pixelSize]}),n=!0}return n}capMaxLod(e){this.levels.length>e+1&&(this.levels.length=e+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(e){return this.levels[0].scale/2**e}levelAtScale(e){const n=this.levels[0].scale;return e>=n?0:Math.log(n/e)*Math.LOG2E}resolutionAtLevel(e){return this.levels[0].resolution/2**e}compatibleWith(e){if(!(e instanceof ni)){if(ni.checkUnsupported(e))return!1;e=new ni(e)}if(!e.spatialReference.equals(this.spatialReference)||e.pixelSize!==this.pixelSize)return!1;const n=Math.min(this.levels.length,e.levels.length)-1,i=this.levels[n].resolution;let s=.5*i;return!Yr(e.origin[0],this.origin[0],s)||!Yr(e.origin[1],this.origin[1],s)?!1:(s=.5*i/2**n/this.pixelSize*exe,Yr(i,e.levels[n].resolution,s))}rootTilesInExtent(e,n=null,i=1/0){const s=new Array,o=this.levels[0].tileSize;if(ke(e)||o[0]===0||o[1]===0)return s;ni.computeRowColExtent(e,o,this.origin,Mr);let r=Mr[1],a=Mr[3],l=Mr[0],c=Mr[2];const u=c-l,d=a-r;if(u*d>i){const h=Math.floor(Math.sqrt(i));d>h&&(r=r+Math.floor(.5*d)-Math.floor(.5*h),a=r+h),u>h&&(l=l+Math.floor(.5*u)-Math.floor(.5*h),c=l+h)}for(let h=r;h<a;h++)for(let f=l;f<c;f++)s.push([0,h,f]);return q(n)&&(n[0]=this.origin[0]+l*o[0],n[1]=this.origin[1]-a*o[1],n[2]=this.origin[0]+c*o[0],n[3]=this.origin[1]-r*o[1]),s}static computeRowColExtent(e,n,i,s){const o=.001*(e[2]-e[0]+(e[3]-e[1]));s[0]=Math.max(0,Math.floor((e[0]+o-i[0])/n[0])),s[2]=Math.max(0,Math.ceil((e[2]-o-i[0])/n[0])),s[1]=Math.max(0,Math.floor((i[1]-e[3]+o)/n[1])),s[3]=Math.max(0,Math.ceil((i[1]-e[1]-o)/n[1]))}static isPowerOfTwo(e){const n=e.lods,i=n[0].resolution*2**n[0].level;return!n.some(s=>!C8(s.resolution,i/2**s.level))}static hasGapInLevels(e){const n=e.lods.map(i=>i.level);n.sort((i,s)=>i-s);for(let i=1;i<n.length;i++)if(n[i]!==n[0]+i)return!0;return!1}static tileSizeSupported(e){const n=e.size[1];return n===e.size[0]&&(n&n-1)==0&&n>=128&&n<=512}static hasOriginPerLODs(e){const n=e.origin;return e.lods.some(i=>i.origin!=null&&(i.origin[0]!==n.x||i.origin[1]!==n.y))}static getMissingTileInfoError(){return new Ue("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(e){return ke(e)?RT():e.lods.length<1?new Ue("tilingscheme:generic","Tiling scheme must have at least one level"):ni.isPowerOfTwo(e)?ni.hasGapInLevels(e)?new Ue("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):ni.tileSizeSupported(e)?ni.hasOriginPerLODs(e)?new Ue("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new Ue("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new Ue("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(e,n){const i=e[2]-e[0],s=e[3]-e[1],o=Vy(n),r=1.2*Math.max(i,s),a=256,l=96,c=.0254,u=new ni(new wf({size:[a,a],origin:{x:e[0]-.5*(r-i),y:e[3]+.5*(r-s)},lods:[{level:0,resolution:r/a,scale:1/(a/l*c/(r*o))}],spatialReference:n}));return u.ensureMaxLod(20),u}static makeWebMercatorAuxiliarySphere(e){const n=new ni(ni.WebMercatorAuxiliarySphereTileInfo);return n.ensureMaxLod(e),n}static makeGCSWithTileSize(e,n=256,i=16){const s=256/n,o=new ni(new wf({size:[n,n],origin:{x:-180,y:90,spatialReference:e},spatialReference:e,lods:[{level:0,resolution:.703125*s,scale:295497598570834e-6*s}]}));return o.ensureMaxLod(i),o}get test(){return{isWebMercator:this._isWebMercator,isGCS:this._isGCS}}};function RT(){return new Ue("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}ni.WebMercatorAuxiliarySphereTileInfo=new wf({size:[256,256],origin:{x:-20037508342787e-6,y:20037508342787e-6,spatialReference:yc.WebMercator},spatialReference:yc.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:591657527591555e-6}]}),ni.WebMercatorAuxiliarySphere=ni.makeWebMercatorAuxiliarySphere(19);const Mr=Np(),eL=64;S8(E8/10);const txe=Np();ni.WebMercatorAuxiliarySphere.getExtent(0,0,0,txe);Np([-180,-90,180,90]);const vd=ht(),nxe=ht(),_a=ht(),wa=ht();function ixe(t,e,n=0){const i=t.extent;if(ke(i))return!1;if(n===0)return tz(i,e);const s=Math.min(i[2]-i[0],i[3]-i[1]);return nz(i,e,n*s)}function hv(t,e,n,i){sc(vd,n),vd[i]=e[i];const s=dp(vd,vd,e),o=dp(nxe,t,e),r=Hi(o,s),a=Hi(s,s);let l;l=r<=0?e:a<=r?n:du(vd,e,Vb(s,s,r/a));const c=dp(vd,t,l);return Math.PI/2-Math.atan(c[2]/Math.sqrt(c[0]*c[0]+c[1]*c[1]))}function sxe(t,e,n){const i=t.extent;if(ke(i))return 0;_a[0]=i[0],_a[1]=i[1],_a[2]=n,wa[0]=i[2],wa[1]=i[3],wa[2]=n;let s=1/0,o=1/0;return e[0]<_a[0]?s=hv(e,_a,wa,0):e[0]>wa[0]&&(s=hv(e,wa,_a,0)),e[1]<_a[1]?o=hv(e,_a,wa,1):e[1]>wa[1]&&(o=hv(e,wa,_a,1)),Math.min(s,o)}function oxe(t,e,n){if(ke(t))return RT();if(t.spatialReference.isGeographic&&!DS(t.spatialReference))return new Ue("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const i=ni.checkUnsupported(t);if(q(i))return i;if(ke(n))return new Ue("tilingscheme:extent-not-exist","The layer does not provide a layer extent.");const s=rxe(t,n);if(s)return s;const o=t.spatialReference;return q(e)&&!(o.equals(e)||e.isWGS84&&o.isWebMercator)?new Ue("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null}function rxe(t,e){const n=t.lods,i=n[0].resolution*2**n[0].level,s=[i*t.size[0],i*t.size[1]],o=[t.origin.x,t.origin.y],r=iz(e),a=Np();ni.computeRowColExtent(r,s,o,a);const l=(a[2]-a[0])*(a[3]-a[1]);if(l>eL){const c=n[0].scale*2**n[0].level;let u=Math.max((r[3]-r[1])/t.size[1],(r[2]-r[0])/t.size[0])*c/i;const d=Math.floor(Math.log(u)/Math.log(10));return u=Math.ceil(u/10**d)*10**d,new Ue("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(c).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+u.toLocaleString()+".",{level0Scale:c,suggestedLevel0Scale:u,requiredNumRootTiles:l,allowedNumRootTiles:eL})}return null}const axe=Object.freeze(Object.defineProperty({__proto__:null,isInsideExtent:ixe,tiltToExtentEdge:sxe,checkIfTileInfoSupportedForViewSR:oxe},Symbol.toStringTag,{value:"Module"}));function lxe(){return!0}function cxe(){return 0}function uxe(t,e){if(ke(t))return RT();const n=t.lods.length-1,i=t.spatialReference,s=DS(i)||UL(i)||WL(i);if(i.isWebMercator){if(!ni.makeWebMercatorAuxiliarySphere(n).compatibleWith(t))return new Ue("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!s)return new Ue("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!ni.makeGCSWithTileSize(t.spatialReference,t.size[0],n).compatibleWith(t))return t.spatialReference.isWGS84?new Ue("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new Ue("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return q(e)&&!t.spatialReference.equals(e)?new Ue("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene"):void 0}const dxe=Object.freeze(Object.defineProperty({__proto__:null,isInsideExtent:lxe,tiltToExtentEdge:cxe,checkIfTileInfoSupportedForViewSR:uxe},Symbol.toStringTag,{value:"Module"})),pxe={[mr.Global]:dxe,[mr.Local]:axe};function fS(t,e,n,i){return pxe[i].checkIfTileInfoSupportedForViewSR(t,n,e)}function hxe(t,e,n){const i=JB(t);if(q(i)){if(!Ht.isCollection(i))return{tileInfo:i.tileInfo,fullExtent:i.fullExtent};{const s=i.find(o=>fS(o.tileInfo,o.fullExtent,e,n)==null);if(s)return{tileInfo:s.tileInfo,fullExtent:s.fullExtent}}}return{tileInfo:null,fullExtent:null}}qr.NORTH,qr.EAST,qr.SOUTH,qr.WEST;qr.NORTH_EAST,qr.SOUTH_EAST,qr.SOUTH_WEST,qr.NORTH_WEST;function fxe(t,e){return t!=null&&(e==null||(e===mr.Local?!t.isGeographic||t.isWGS84||t.wkid===xh.CGCS2000:t.isWebMercator||t.isWGS84||t.wkid===xh.CGCS2000||t.wkid===xh.GCSMARS2000||t.wkid===xh.GCSMARS2000_SPHERE||t.wkid===xh.GCSMOON2000))}async function mxe(t,e={}){await vxe(t,e),xs(e)}async function gxe(t,e={}){const{basemap:n,view:i}=t;if(xs(e),"spatialReferenceLocked"in i&&!i.spatialReferenceLocked||(await n.load(e),xs(e),n.baseLayers.length===0))return;const s=n.baseLayers.getItemAt(0);if(!ez(s))return;if(n.spatialReference){if(i.spatialReference.equals(n.spatialReference))return;tL()}await s.load(e),xs(e);const o=(("supportedSpatialReferences"in s?s.supportedSpatialReferences:null)||["tileInfo"in s?s.tileInfo.spatialReference:null]).filter(Boolean);o.length!==0&&o.every(r=>!i.spatialReference.equals(r))&&tL()}function tL(){throw new Ue("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}async function vxe(t,e){const{basemap:n,view:i}=t;if(await n.load(e),n.baseLayers.length===0)return;const s=n.baseLayers.concat(n.referenceLayers).toArray().filter(r=>!MI(r)).map(r=>new Ue("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:r,operationalLayerType:r.operationalLayerType||"unknown"}));if(s.length)throw s[0];const o=n.baseLayers.getItemAt(0);if(MI(o)){try{await o.load(e)}catch(r){const a="basemap-compatibility:unknown-error",l="Unknown basemap compatibility error",{name:c=a,message:u=l,details:d}=r;throw new Ue(c,u,d)}yxe(o,i)}}function yxe(t,e){const n=e.state.viewingMode;if(!n)return;let i,s;if((t==null?void 0:t.type)==="wmts"){const l=hxe(t,e.spatialReference,n);if(ke(l.tileInfo))throw new Ue("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");i=l.tileInfo,s=l.fullExtent}else i=t.tileInfo,s=t.fullExtent;if(ke(i))return;if(!fxe(i.spatialReference,n))throw new Ue(`basemapgalleryitem:spatial-reference-unsupported-${vI(n)}`,`Basemap spatial reference is unsupported in ${vI(n)} mode`);const o=i.spatialReference.isGeographic,r=(t==null?void 0:t.type)==="vector-tile"?i.getOrCreateCompatible(256,o?1:2):null;if(n===mr.Global){let l=fS(i,s,null,n);if(l&&(t==null?void 0:t.type)==="vector-tile"&&q(s)&&r&&!fS(r,s,null,n)&&(l=null),l){const c=i.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new Ue(`basemapgalleryitem:tiling-scheme-unsupported-${c}-global`,"Basemap tiling scheme is unsupported in global mode",{error:l})}}else if(ni.checkUnsupported(i))throw new Ue("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const a=e.get("basemapTerrain.tilingScheme");if(a&&!a.compatibleWith(i)&&((t==null?void 0:t.type)!=="vector-tile"||!r||!a.compatibleWith(r)))throw new Ue("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}let Fr=class extends dh(Li(dt)){constructor(e){super(e),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const e=()=>this.refresh();this.handles.add([ge(()=>{var n;return(n=this.basemap)==null?void 0:n.loadStatus},e),ge(()=>this.compatibilityFunction,e),ge(()=>{var n;return this.view&&"basemapTerrain"in this.view&&((n=this.view.basemapTerrain)==null?void 0:n.tilingScheme)},e),ge(()=>{var n;return(n=this.view)==null?void 0:n.ready},e),ge(()=>{var n;return(n=this.view)==null?void 0:n.spatialReference},e)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return n0e(this.view,this.basemap)}set basemap(e){const n=this._get("basemap");n&&n.cancelLoad(),e&&e.load().catch(()=>{}),this._set("basemap",e)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){var s;this._cancelRefresh(),this._set("state","loading");const e=(s=this.basemap)==null?void 0:s.loadStatus;if(e!=="loaded"&&e!=="failed")return;if(!this.compatibilityFunction)return void(e==="loaded"?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const n=new AbortController,{signal:i}=n;this.compatibilityFunction(this,{signal:i}).then(()=>na(()=>!this._spatialReferenceTask.updating,i)).then(()=>{this._set("state","ready"),this._set("error",null)}).catch(o=>{gc(o)||(this._set("state","error"),this._set("error",o))}),this._refreshController=n}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};v([b({readOnly:!0})],Fr.prototype,"_spatialReferenceTask",null),v([b()],Fr.prototype,"basemap",null),v([b()],Fr.prototype,"compatibilityFunction",void 0),v([b({readOnly:!0})],Fr.prototype,"error",void 0),v([b({readOnly:!0})],Fr.prototype,"spatialReference",null),v([b({readOnly:!0})],Fr.prototype,"state",void 0),v([b()],Fr.prototype,"view",void 0),Fr=v([Ae("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],Fr);const V4=Fr,F4=Ht.ofType(Ap);let vf=class extends dt{constructor(e){super(e),this.basemaps=new F4}get state(){return"ready"}refresh(){}};v([b({type:F4})],vf.prototype,"basemaps",void 0),v([b({readOnly:!0})],vf.prototype,"state",null),vf=v([Ae("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],vf);const D4=vf,N4=Ht.ofType(Ap);let $a=class extends Wu.LoadableMixin(KS(D4)){constructor(e){super(e),this._handles=new si,this.basemaps=new N4,this.filterFunction=null,this.portal=SO.getDefault(),this.query=null,this.updateBasemapsCallback=null}initialize(){this._handles.add([ge(()=>{var e,n;return[this.filterFunction,this.loadStatus,(e=this.portal)==null?void 0:e.basemapGalleryGroupQuery,(n=this.portal)==null?void 0:n.user,this.query,this.updateBasemapsCallback]},()=>this.refresh(),gt)])}destroy(){this._handles.destroy(),this._handles=null,this.filterFunction=null,this.portal=null}get state(){return this.loadStatus==="not-loaded"?"not-loaded":this.loadStatus==="loading"||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),this.notifyChange("state"),Promise.resolve(this)}async refresh(){if(this.state!=="ready")return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,n=new AbortController;this._lastPortalBasemapFetchController=n,this.notifyChange("state");try{const i=await e.fetchBasemaps(this._toQueryString(this.query),n);this._updateBasemaps(i)}catch(i){if(gc(i))throw i;Tt.getLogger(this.declaredClass).warn(new Ue("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:i})),this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&typeof e!="string"?Object.keys(e).map(n=>`${n}:${e[n]}`).join(" AND "):e}_updateBasemaps(e=[]){let n=this.filterFunction?e.filter(this.filterFunction):e;n=this.updateBasemapsCallback?this.updateBasemapsCallback(n):n,this.basemaps.removeAll(),this.basemaps.addMany(n)}};v([b({readOnly:!0,type:N4})],$a.prototype,"basemaps",void 0),v([b()],$a.prototype,"filterFunction",void 0),v([b({type:SO})],$a.prototype,"portal",void 0),v([b()],$a.prototype,"query",void 0),v([b({readOnly:!0})],$a.prototype,"state",null),v([b()],$a.prototype,"updateBasemapsCallback",void 0),$a=v([Ae("esri.widgets.BasemapGallery.support.PortalBasemapsSource")],$a);const wy=$a,B4=Ht.ofType(V4);function bxe(t){return t&&t.declaredClass==="esri.portal.Portal"}function _xe(t){return t&&!(t instanceof wy)&&(!!t.portal||!!t.query)}function wxe(t){return t&&"basemaps"in t&&"state"in t&&"refresh"in t}let Oo=class extends Li(Wu){constructor(e){super(e),this._loadingProjectionEngine=!1,this.items=new B4,this.source=new wy,this.view=null}initialize(){const e=()=>this._recreateItems();this.handles.add([ge(()=>this.state==="ready"?this.compatibilityFunction:null,()=>this._updateItems()),Dn(()=>{var n;return(n=this.source)==null?void 0:n.basemaps},"change",e,{onListenerAdd:e})])}get activeBasemap(){var e,n;return((n=(e=this.view)==null?void 0:e.map)==null?void 0:n.basemap)??null}set activeBasemap(e){var s,o;if(!this.view.map)return;const n=typeof e=="string"?Ap.fromId(e):e;if(!n||!this.view.ready)return this.view.map.basemap=n,void this._clearOverride("activeBasemap");const i=n.spatialReference||((o=(s=this.items)==null?void 0:s.find(r=>this.basemapEquals(n,r.basemap)))==null?void 0:o.spatialReference);if(i&&"spatialReferenceLocked"in this.view&&!this.view.spatialReferenceLocked){const r=this.view.spatialReference;if(q(i)&&!vc(r,i)&&!lh(this.view.spatialReference,i)&&!Gu())return this._override("activeBasemap",n),this._loadingProjectionEngine=!0,void ch().then(()=>{this._get("activeBasemap")===e&&(this.view.map.basemap=e,this.view.spatialReference=i,this._clearOverride("activeBasemap"))},()=>{}).then(()=>{this._loadingProjectionEngine=!1});this.view.map.basemap=n,this._clearOverride("activeBasemap"),q(i)&&!vc(this.view.spatialReference,i)&&(this.view.spatialReference=i)}else this.view.map.basemap=n,this._clearOverride("activeBasemap")}get activeBasemapIndex(){const{state:e,items:n,activeBasemap:i}=this;if(e!=="ready")return-1;const s=n.findIndex(o=>o.basemap===i);return s===-1?n.findIndex(o=>this.basemapEquals(o.basemap,i)):s}get compatibilityFunction(){var e;return((e=this.view)==null?void 0:e.type)==="3d"?mxe:gxe}set compatibilityFunction(e){this._overrideIfSome("compatibilityFunction",e)}castSource(e){return Array.isArray(e)||Ht.isCollection(e)?new D4({basemaps:e}):bxe(e)?new wy({portal:e}):_xe(e)?new wy(e):wxe(e)?e:null}get state(){var e;return(e=this.view)!=null&&e.ready&&this.source?this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,n){return t0e(e,n)}refresh(){this._recreateItems()}load(e){return this.addResolvingPromise(Wu.isLoadable(this.source)?this.source.load(e):null),Promise.resolve(this)}_recreateItems(){var s;const e=(s=this.source)==null?void 0:s.basemaps,{view:n,compatibilityFunction:i}=this;this.items.removeAll().forEach(o=>o.destroy()),e&&this.items.addMany(e.map(o=>new V4({basemap:o,compatibilityFunction:i,view:n})))}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};v([b()],Oo.prototype,"_loadingProjectionEngine",void 0),v([b()],Oo.prototype,"activeBasemap",null),v([b({readOnly:!0})],Oo.prototype,"activeBasemapIndex",null),v([b()],Oo.prototype,"compatibilityFunction",null),v([b({readOnly:!0,type:B4})],Oo.prototype,"items",void 0),v([b()],Oo.prototype,"source",void 0),v([ii("source")],Oo.prototype,"castSource",null),v([b({readOnly:!0})],Oo.prototype,"state",null),v([b()],Oo.prototype,"view",void 0),Oo=v([Ae("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],Oo);const Cxe=Oo,io={base:"esri-basemap-gallery esri-widget esri-widget--panel-height-only",sourceLoading:"esri-basemap-gallery--source-loading",loader:"esri-basemap-gallery__loader",item:"esri-basemap-gallery__item",itemContainer:"esri-basemap-gallery__item-container",itemTitle:"esri-basemap-gallery__item-title",itemThumbnail:"esri-basemap-gallery__item-thumbnail",selectedItem:"esri-basemap-gallery__item--selected",itemError:"esri-basemap-gallery__item--error",emptyMessage:"esri-widget__content--empty",widgetIcon:"esri-icon-basemap",disabled:"esri-disabled",loaderAnimation:"esri-widget__loader-animation"};let co=class extends kn{constructor(e,n){super(e,n),this._handles=new si,this._focusBasemapItemEnabled=!1,this.disabled=!1,this.headingLevel=2,this.iconClass=io.widgetIcon,this.messages=null,this.viewModel=new Cxe}initialize(){const e=this._handles;this.addHandles([Dn(()=>this.viewModel.items,"change",n=>{const i="basemap-gallery-item-changes",{added:s,moved:o}=n;e.remove(i),e.add([...s,...o].map(r=>ge(()=>r.state,()=>this.scheduleRender())),i),this.scheduleRender()}),ji(()=>this.source,()=>this.viewModel.load(),{initial:!0,once:!0})])}destroy(){this._handles.destroy()}loadDependencies(){return Fe(()=>import("./calcite-scrim-99bf204f.js"),["./calcite-scrim-99bf204f.js","./scrim-41440f97.js","./dom-5b7af1bf.js","./loader-632408c9.js","./guid-e49c4e43.js"],import.meta.url)}get activeBasemap(){return this.viewModel.activeBasemap}set activeBasemap(e){this.viewModel.activeBasemap=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get source(){return this.viewModel.source}set source(e){this.viewModel.source=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.source.state==="loading",n=this.disabled||this.viewModel.state==="disabled",i=this.viewModel.items.map((a,l)=>this._renderBasemapGalleryItem(a,l)).toArray(),s={[io.sourceLoading]:e,[io.disabled]:n},o=e?M("div",{class:io.loader,key:"esri-basemap-gallery__loader"}):null,r=e?null:i.length>0?M("ul",{bind:this,"aria-disabled":this.disabled,"aria-label":this.label,class:io.itemContainer,key:"esri-basemap-gallery__item-container",onkeydown:this._handleKeyDown,role:"radiogroup"},i):M("div",{class:io.emptyMessage,key:"esri-basemap-gallery__empty-message"},M(Is,{level:this.headingLevel},this.messages.noBasemaps));return M("div",{class:this.classes(io.base,s)},o,r)}_getRoundRobinIndex(e,n){return(e+n)%n}_handleKeyDown(e){const{key:n}=e;if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(n))return;e.preventDefault();const{items:i,activeBasemapIndex:s}=this.viewModel,o=n==="ArrowUp"||n==="ArrowLeft"?this._getRoundRobinIndex(Math.max(s-1,-1),i.length):this._getRoundRobinIndex(s+1,i.length),r=i.getItemAt(o);(r==null?void 0:r.state)==="ready"&&(this.viewModel.activeBasemap=r.basemap),this._focusBasemapItemEnabled=!0}_focusBasemapItem(e){this._focusBasemapItemEnabled&&e.tabIndex===0&&(e.focus(),this._focusBasemapItemEnabled=!1)}_handleClick(e){const n=e.currentTarget["data-item"];n.state==="ready"&&(this.viewModel.activeBasemap=n.basemap)}_renderBasemapGalleryItem(e,n){var g,y;const i=e.basemap.thumbnailUrl||Ab("esri/themes/base/images/basemap-toggle-64.svg"),s=e.basemap.title,o=(g=e.basemap.portalItem)==null?void 0:g.snippet,r=((y=e.error)==null?void 0:y.message)||o||s,{viewModel:{state:a,activeBasemapIndex:l}}=this,c=this.disabled||a==="disabled",u=l===n,d=u||l===-1&&n===0?0:-1,h=a==="loading",f={[io.selectedItem]:u,[io.itemError]:e.state==="error"},m=`basemapgallery-item-${e.uid}`;return M("li",{"aria-checked":u.toString(),"aria-disabled":c.toString(),"aria-labelledby":m,bind:this,class:this.classes(io.item,f),"data-item":e,onkeydown:this._handleClick,onclick:this._handleClick,role:"radio",tabIndex:d,afterUpdate:this._focusBasemapItem,title:r},M("img",{alt:"",class:io.itemThumbnail,src:i}),M("div",{id:m,class:io.itemTitle},s),e.state==="loading"||u&&h?M("calcite-scrim",null,M("span",{"aria-hidden":"true",role:"presentation",class:io.loaderAnimation})):null)}};v([b()],co.prototype,"activeBasemap",null),v([b()],co.prototype,"disabled",void 0),v([b()],co.prototype,"headingLevel",void 0),v([b()],co.prototype,"iconClass",void 0),v([b()],co.prototype,"label",null),v([b(),rn("esri/widgets/BasemapGallery/t9n/BasemapGallery")],co.prototype,"messages",void 0),v([b()],co.prototype,"source",null),v([b()],co.prototype,"view",null),v([b()],co.prototype,"viewModel",void 0),v([Sn()],co.prototype,"_handleClick",null),co=v([Ae("esri.widgets.BasemapGallery")],co);const Sxe=co;let Aa=class extends lT(Ii.EventedAccessor){constructor(e){super(e),this._initialViewpoint=null,this._goingHomeController=null,this.go=this.go.bind(this)}destroy(){this._cancelGo(),this.view=null}get state(){return this.get("view.ready")?this._goingHomeController?"going-home":"ready":"disabled"}set view(e){this._initialViewpoint=null,this._set("view",e),e&&e.when().then(()=>{this.view===e&&(this._initialViewpoint=e.viewpoint.clone(),this.notifyChange("viewpoint"))})}get viewpoint(){return this._get("viewpoint")||this._initialViewpoint}set viewpoint(e){this._set("viewpoint",e)}async go(){if(!this.get("view.ready"))throw new Ue("home:disabled-state","Cannot go when disabled.");this._cancelGo(),this.emit("go");const e=new AbortController;this._goingHomeController=e;try{await this.view.when(),await this.callGoTo({target:this.viewpoint,options:{signal:e.signal}})}catch{}this._goingHomeController=null}cancelGo(){this._cancelGo()}_cancelGo(){const{_goingHomeController:e}=this;e&&e.abort(),this._goingHomeController=null}};v([b()],Aa.prototype,"_goingHomeController",void 0),v([b({readOnly:!0})],Aa.prototype,"state",null),v([b()],Aa.prototype,"view",null),v([b({type:dr})],Aa.prototype,"viewpoint",null),v([b()],Aa.prototype,"go",null),v([b()],Aa.prototype,"cancelGo",null),Aa=v([Ae("esri.widgets.Home.HomeViewModel")],Aa);const z4=Aa,yd={base:"esri-home esri-widget--button esri-widget",esriIcon:"esri-icon",loadingIcon:"esri-icon-loading-indicator",rotatingIcon:"esri-rotating",widgetIcon:"esri-icon-home",disabled:"esri-disabled"};let uo=class extends kn{constructor(e,n){super(e,n),this.iconClass=yd.widgetIcon,this.messages=null,this.messagesCommon=null,this.viewModel=new z4}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get viewpoint(){return this.viewModel.viewpoint}set viewpoint(e){this.viewModel.viewpoint=e}cancelGo(){this.viewModel.cancelGo()}go(){return this.viewModel.go()}render(){var o;const e=(o=this.viewModel)==null?void 0:o.state,{messagesCommon:n,messages:i}=this,s={[yd.disabled]:e==="disabled"};return M("div",{bind:this,class:this.classes(yd.base,s),role:"button",tabIndex:0,onclick:this._go,onkeydown:this._go,"aria-label":i.widgetLabel,title:e==="going-home"?n.cancel:i.title},this.renderIcon())}renderIcon(){var i;const e=(i=this.viewModel)==null?void 0:i.state,n={[yd.esriIcon]:!0,[this.iconClass]:e!=="going-home",[yd.loadingIcon]:e==="going-home",[yd.rotatingIcon]:e==="going-home"};return M("span",{"aria-hidden":"true",class:this.classes(n)})}_go(){const{viewModel:e}=this;e.state==="going-home"?e.cancelGo():e.go()}};v([b()],uo.prototype,"goToOverride",null),v([b()],uo.prototype,"iconClass",void 0),v([b()],uo.prototype,"label",null),v([b(),rn("esri/widgets/Home/t9n/Home")],uo.prototype,"messages",void 0),v([b(),rn("esri/t9n/common")],uo.prototype,"messagesCommon",void 0),v([b()],uo.prototype,"uiStrings",void 0),v([b()],uo.prototype,"view",null),v([b({type:z4}),Sh("go")],uo.prototype,"viewModel",void 0),v([b()],uo.prototype,"viewpoint",null),v([Sn()],uo.prototype,"_go",null),uo=v([Ae("esri.widgets.Home")],uo);const Exe=uo;function H4(t){return ke(t)||t.type==="simple"||t.type==="unique-value"||t.type==="class-breaks"||t.type==="dictionary"||t.type==="heatmap"}function yDe(t,e){if(ke(t))return null;if(!H4(t))return new Ue("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${t.type||t.declaredClass}'`,{renderer:t});switch(t.type){case"simple":return kxe(t);case"unique-value":return Txe(t,e);case"class-breaks":return Ixe(t);case"dictionary":case"heatmap":return null}return null}function VT(t,e){if(!e)return null;let n;if(n=Array.isArray(e)?e:[e],n.length>0){const i=n.map(o=>o.details.symbol.type||o.details.symbol.declaredClass).filter(o=>!!o);i.sort();const s=[];return i.forEach((o,r)=>{r!==0&&o===i[r-1]||s.push(o)}),new Ue("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${s.join(", ")}) which are not supported in 3D`,{renderer:t,symbolErrors:n})}return null}function kxe(t){return VT(t,Fp(t.symbol).error)}function Txe(t,e){var o;const n={...ZB,...e},i=(o=t.uniqueValueInfos)==null?void 0:o.map(r=>Fp(r.symbol,n).error).filter(q),s=Fp(t.defaultSymbol,n);return s.error&&(i==null||i.unshift(s.error)),VT(t,i)}function Ixe(t){const e=t.classBreakInfos.map(i=>Fp(i.symbol).error).filter(q),n=Fp(t.defaultSymbol);return n.error&&e.unshift(n.error),VT(t,e)}const xxe=(t,e)=>{const n=t.featuresTilingScheme.getClosestInfoForScale(t.scale).level;return e!=null&&e.levels?e.levels[n]:null};function Mxe(t,e){if(!t||!("visualVariables"in t)||!t.visualVariables)return null;const n=t.visualVariables.find(s=>s.type==="size"),i=xxe(e,n);return i?new KB({field:n.field,minSize:i[2].size,minDataValue:i[2].value,maxSize:i[3].size,maxDataValue:i[3].value}):null}const Su=Ti.size,Cy=Ti.maxSize,FT=Ti.maxOutlineSize,nL=Ti.lineWidth,mS=Ti.tallSymbolWidth;function op(t){const e=t.outline,n=q(t.material)?t.material.color:null,i=q(n)?n.toHex():null;if(ke(e)||"pattern"in e&&q(e.pattern)&&e.pattern.type==="style"&&e.pattern.style==="none")return t.type==="fill"&&i==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const s=is(e.size)||0;return{color:"rgba("+(q(e.color)?e.color.toRgba():"255,255,255,1")+")",width:Math.min(s,FT),style:"pattern"in e&&q(e.pattern)&&e.pattern.type==="style"?cO(e.pattern.style):null,join:"butt",cap:"patternCap"in e?e.patternCap:"butt"}}function $xe(t,e){const n=e&&e.resource,i=n&&n.href;if(t.thumbnail&&t.thumbnail.url)return Promise.resolve(t.thumbnail.url);if(i&&e.type!=="object")return Promise.resolve(sB(t,e));const s=Ab("esri/images/Legend/legend3dsymboldefault.png");return t.styleOrigin&&(t.styleOrigin.styleName||t.styleOrigin.styleUrl)?lz(t.styleOrigin,{portal:t.styleOrigin.portal},"webRef").catch(o=>o).then(o=>{var r;return((r=o==null?void 0:o.thumbnail)==null?void 0:r.url)||s}):Promise.resolve(s)}function _0(t,e=1){const n=t.a,i=US(t),s=i.h,o=i.s/e,r=100-(100-i.v)/e,{r:a,g:l,b:c}=hO({h:s,s:o,v:r});return[a,l,c,n]}function bb(t){return t.type==="water"?ke(t.color)?null:t.color:ke(t.material)||ke(t.material.color)?null:t.material.color}function vn(t,e=0){const n=bb(t);if(!n){if(t.type==="fill")return null;const s=nB.r,o=fc(s,e);return[o,o,o,100]}const i=n.toRgba();for(let s=0;s<3;s++)i[s]=fc(i[s],e);return i}async function U4(t,e){const n=t.style;return n==="none"?null:{type:"pattern",x:0,y:0,src:await iB(Ab(`esri/symbols/patterns/${n}.png`),e.toCss(!0)),width:5,height:5}}function iL(t){return t.outline?op(t):{color:"rgba(0, 0, 0, 1)",width:1.5}}function W4(t,e){const n=bb(t);if(!n)return null;let i="rgba(";return i+=fc(n.r,e)+",",i+=fc(n.g,e)+",",i+=fc(n.b,e)+",",i+n.a+");"}function gS(t,e){const n=W4(t,e);return n?"pattern"in t&&q(t.pattern)&&t.pattern.type==="style"&&t.pattern.style==="none"?null:{color:n,width:Math.min(t.size?is(t.size):.75,FT),style:"pattern"in t&&q(t.pattern)&&t.pattern.type==="style"?cO(t.pattern.style):null,cap:"cap"in t?t.cap:null,join:"join"in t?t.join==="miter"?is(2):t.join:null}:{}}function fv(t,e,n){const i=n!=null?.75*n:0;return{type:"linear",x1:i?.25*i:0,y1:i?.5*i:0,x2:i||4,y2:i?.5*i:4,colors:[{color:t,offset:0},{color:e,offset:1}]}}function Axe(t){const e=t.depth,n=t.height,i=t.width;return i!==0&&e!==0&&n!==0&&i===e&&i!=null&&n!=null&&i<n}function Lxe(t,e,n){const i=[];if(!t)return i;switch(t.type){case"icon":{const r=e,a=e;switch(t.resource&&t.resource.primitive||lB){case"circle":i.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:vn(t,0),stroke:op(t)});break;case"square":i.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[0,0]},{command:"L",values:[r,0]},{command:"L",values:[r,a]},{command:"Z",values:[]}]},fill:vn(t,0),stroke:op(t)});break;case"triangle":i.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[.5*r,0]},{command:"L",values:[r,a]},{command:"Z",values:[]}]},fill:vn(t,0),stroke:op(t)});break;case"cross":i.push({shape:{type:"path",path:[{command:"M",values:[.5*r,0]},{command:"L",values:[.5*r,a]},{command:"M",values:[0,.5*a]},{command:"L",values:[r,.5*a]}]},stroke:iL(t)});break;case"x":i.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[r,a]},{command:"M",values:[r,0]},{command:"L",values:[0,a]}]},stroke:iL(t)});break;case"kite":i.push({shape:{type:"path",path:[{command:"M",values:[0,.5*a]},{command:"L",values:[.5*r,0]},{command:"L",values:[r,.5*a]},{command:"L",values:[.5*r,a]},{command:"Z",values:[]}]},fill:vn(t,0),stroke:op(t)})}break}case"object":switch(t.resource&&t.resource.primitive||aB){case"cone":{const s=fv(vn(t,0),vn(t,-.6),n?mS:e),o=uCe(e,n);i.push({shape:o[0],fill:s}),i.push({shape:o[1],fill:s});break}case"inverted-cone":{const s=vn(t,0),o=fv(s,vn(t,-.6),e),r=dCe(e);i.push({shape:r[0],fill:o}),i.push({shape:r[1],fill:s});break}case"cube":{const s=lCe(e,n);i.push({shape:s[0],fill:vn(t,0)}),i.push({shape:s[1],fill:vn(t,-.3)}),i.push({shape:s[2],fill:vn(t,-.5)});break}case"cylinder":{const s=fv(vn(t,0),vn(t,-.6),n?mS:e),o=cCe(e,n);i.push({shape:o[0],fill:s}),i.push({shape:o[1],fill:s}),i.push({shape:o[2],fill:vn(t,0)});break}case"diamond":{const s=pCe(e);i.push({shape:s[0],fill:vn(t,-.3)}),i.push({shape:s[1],fill:vn(t,0)}),i.push({shape:s[2],fill:vn(t,-.3)}),i.push({shape:s[3],fill:vn(t,-.7)});break}case"sphere":{const s=fv(vn(t,0),vn(t,-.6));s.x1=0,s.y1=0,s.x2=.25*e,s.y2=.25*e,i.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:s});break}case"tetrahedron":{const s=hCe(e);i.push({shape:s[0],fill:vn(t,-.3)}),i.push({shape:s[1],fill:vn(t,0)}),i.push({shape:s[2],fill:vn(t,-.6)});break}}break}return i}function z_(t){const e=typeof(t==null?void 0:t.size)=="number"?t==null?void 0:t.size:null;return e?is(e):null}function Oxe(t){return t.type==="icon"?"multiply":"tint"}function Pxe(t,e){const n=z_(e),i=e!=null&&e.maxSize?is(e.maxSize):null,s=(e==null?void 0:e.disableUpsampling)??!1,o=t.symbolLayers,r=[];let a=0,l=0;const c=o.getItemAt(o.length-1);let u;return c&&c.type==="icon"&&(u=c.size&&is(c.size)),o.forEach(d=>{var m;if(d.type!=="icon"&&d.type!=="object")return;const h=d.type==="icon"?d.size&&is(d.size):0,f=n||h?Math.ceil(Math.min(n||h,i||Cy)):Su;if(d&&d.resource&&d.resource.href){const g=$xe(t,d).then(y=>{const _=d.get("material.color"),C=Oxe(d);return ACe(y,f,_,C,s)}).then(y=>{const _=y.width,C=y.height;return a=Math.max(a,_),l=Math.max(l,C),[{shape:{type:"image",x:0,y:0,width:_,height:C,src:y.url},fill:null,stroke:null}]});r.push(g)}else{let g=f;d.type==="icon"&&u&&n&&(g=f*(h/u));const y=(e==null?void 0:e.symbolConfig)==="tall"||((m=e==null?void 0:e.symbolConfig)==null?void 0:m.isTall)||d.type==="object"&&Axe(d);a=Math.max(a,y?mS:g),l=Math.max(l,g),r.push(Promise.resolve(Lxe(d,g,y)))}}),Ni(r).then(d=>{const h=[];return d.forEach(f=>{f.value?h.push(f.value):f.error&&Tt.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",f.error)}),vg(h,[a,l],{node:e&&e.node,scale:!1,opacity:e&&e.opacity})})}function Rxe(t,e){const n=t.symbolLayers,i=[],s=Lb(t),o=z_(e),r=(e&&e.maxSize?is(e.maxSize):null)||FT;let a,l=0,c=0;return n.forEach((u,d)=>{if(!u||u.type!=="line"&&u.type!=="path")return;const h=[];switch(u.type){case"line":{const f=gS(u,0);if(ke(f))break;const m=f&&f.width||0;d===0&&(a=m);const g=Math.min(o||m,r),y=d===0?g:o?g*(m/a):g,_=y>nL/2?2*y:nL;c=Math.max(c,y),l=Math.max(l,_),f.width=y,h.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[l,.5*c]}]},stroke:f});break}case"path":{const f=Math.min(o||Su,r),m=vn(u,0),g=vn(u,-.2),y=W4(u,-.4),_=y?{color:y,width:1}:{};if(u.profile==="quad"){const C=u.width,w=u.height,S=oCe(C&&w?C/w:1,w===0,C===0),E={..._,join:"bevel"};h.push({shape:S[0],fill:g,stroke:E}),h.push({shape:S[1],fill:g,stroke:E}),h.push({shape:S[2],fill:m,stroke:E})}else h.push({shape:AC.pathSymbol3DLayer[0],fill:g,stroke:_}),h.push({shape:AC.pathSymbol3DLayer[1],fill:m,stroke:_});c=Math.max(c,f),l=c}}i.push(h)}),Promise.resolve(vg(i,[l,c],{node:e&&e.node,scale:s,opacity:e&&e.opacity}))}async function Vxe(t,e){const n=t.type==="mesh-3d",i=t.symbolLayers,s=z_(e),o=e&&e.maxSize?is(e.maxSize):null,r=s||Su,a=[];let l=0,c=0,u=!1;for(let d=0;d<i.length;d++){const h=i.getItemAt(d),f=[];if(n&&h.type!=="fill")continue;const m=AC.fill[0];switch(h.type){case"fill":{const g=op(h),y=Math.min(r,o||Cy);l=Math.max(l,y),c=Math.max(c,y),u=!0;let _=vn(h,0);const C="pattern"in h?h.pattern:null,w=bb(h);!n&&q(C)&&C.type==="style"&&C.style!=="solid"&&w&&(_=await U4(C,w)),f.push({shape:m,fill:_,stroke:g});break}case"line":{const g=gS(h,0);if(ke(g))break;const y={stroke:g,shape:m};l=Math.max(l,Su),c=Math.max(c,Su),f.push(y);break}case"extrude":{const g={join:"round",width:1,...gS(h,-.4)},y=vn(h,0),_=vn(h,-.2),C=Math.min(r,o||Cy),w=rCe(C);g.width=1,f.push({shape:w[0],fill:_,stroke:g}),f.push({shape:w[1],fill:_,stroke:g}),f.push({shape:w[2],fill:y,stroke:g});const S=Su,E=.7*Su+.5*C;l=Math.max(l,S),c=Math.max(c,E);break}case"water":{const g=$b(bb(h)),y=_0(g),_=_0(g,2),C=_0(g,3),w=aCe();u=!0,f.push({shape:w[0],fill:y}),f.push({shape:w[1],fill:_}),f.push({shape:w[2],fill:C});const S=Math.min(r,o||Cy);l=Math.max(l,S),c=Math.max(c,S);break}}a.push(f)}return vg(a,[l,c],{node:e&&e.node,scale:u,opacity:e&&e.opacity})}function Fxe(t,e){if(t.symbolLayers.length===0)return Promise.reject(new Ue("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(t.type){case"point-3d":return Pxe(t,e);case"line-3d":return Rxe(t,e);case"polygon-3d":case"mesh-3d":return Vxe(t,e)}return Promise.reject(new Ue("symbolPreview: swatchInfo3D","symbol not supported."))}const Dxe=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:U4,getSizeFromOptions:z_,getSymbolLayerFill:vn,previewSymbol3D:Fxe},Symbol.toStringTag,{value:"Module"})),sL={HH:315,HL:45,LL:135,LH:225},Nxe={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function Bxe(t){if(!t)return;const{type:e}=t;if(e.includes("3d"))return vn(t.symbolLayers.getItemAt(0));if(e==="simple-line"){const n=B0(t);return n&&n.color}if(t.type==="simple-marker"&&(t.style==="x"||t.style==="cross")){const n=B0(t);return n&&n.color}return oB(t)}function zxe(t,e){const n=e.HH.label,i=e.LL.label,s=e.HL.label,o=e.LH.label;switch(t){case"HH":default:return{top:n,bottom:i,left:s,right:o};case"HL":return{top:s,bottom:o,left:i,right:n};case"LL":return{top:i,bottom:n,left:o,right:s};case"LH":return{top:o,bottom:s,left:n,right:i}}}function Hxe(t){const{focus:e,infos:n,numClasses:i}=t,s=Nxe[i],o={};n.forEach(a=>{o[a.value]={label:a.label,fill:Bxe(a.symbol)}});const r=[];for(let a=0;a<i;a++){const l=[];for(let c=0;c<i;c++){const u=o[s[a][c]];l.push(u.fill)}r.push(l)}return{type:"relationship-ramp",numClasses:i,focus:e,colors:r,labels:zxe(e,o),rotation:G4(e)}}function G4(t){let e=sL[t];return t&&e==null&&(e=sL.HH),e||0}const vS=30,yS=12,j4=[255,255,255],q4=[200,200,200],rp=[128,128,128],Uxe=20,Wxe=5;function Gxe(t){return t.declaredClass==="esri.symbols.SimpleMarkerSymbol"}function jxe(t){return t.declaredClass==="esri.symbols.PictureMarkerSymbol"}function qxe(t){return t.declaredClass==="esri.symbols.SimpleLineSymbol"}function Kxe(t){return t.declaredClass==="esri.symbols.TextSymbol"}function Yxe(t,e){const n=t.length-1;return t.map((i,s)=>P3(i,s,n,e))}async function Zxe(t,e,n,i,s,o,r){const a=e.legendOptions,l=a&&a.customValues,c=r||await Jxe(t,n),u=!!c,d=!!l,h=e.minSize!=null&&e.maxSize!=null,f=e.stops&&e.stops.length>1,m=!!e.target;if(!u||!d&&!(h||f&&!m))return;const g=Lb(c);let y=null,_=null,C=null;_=g&&!f?ub([e.minDataValue,e.maxDataValue]):l||await tMe(e,c,i,s);const w=t==null?void 0:t.authoringInfo,S=(w==null?void 0:w.type)==="univariate-color-size",E=S&&(w==null?void 0:w.univariateTheme)==="above-and-below";if(!_&&f&&(_=e.stops.map(L=>L.value),y=e.stops.some(L=>!!L.label),t.type==="flow"&&(_=ub(_)),y&&(C=e.stops.map(L=>L.label))),g&&(_==null?void 0:_.length)>2&&!E&&(_=[_[0],_[_.length-1]]),!_)return null;S&&(_==null?void 0:_.length)!==5&&(_=Z4({minSize:_[0],maxSize:_[_.length-1]}));const k=g?Xxe(t,_):null,A=rB(c),$=y?null:Yxe(_,o);return(await Promise.all(_.map(async(L,O)=>{const B=g?k[O]:await Bd(e,c,L,i,s);return{value:L,symbol:sMe(E&&t.type==="class-breaks"?Qxe(t,O):c,B),label:y?C[O]:$[O],size:B,outlineSize:A}}))).reverse()}function Xxe(t,e){const n=t==null?void 0:t.authoringInfo,i=(n==null?void 0:n.type)==="univariate-color-size";let s=[yS,vS];if(i){const o=e[0],r=e[e.length-1],a=yS,l=vS;s=e.map(c=>a+(c-o)/(r-o)*(l-a))}return i&&(n==null?void 0:n.univariateTheme)==="below"&&s.reverse(),s}function Qxe(t,e){const n=t.classBreakInfos,i=n.length,s=i<2||!(e>=2)?n[0].symbol.clone():n[i-1].symbol.clone();return t.visualVariables.some(o=>o.type==="color")&&(s.type.includes("3d")?K4(s):Y4(s)),s}async function Jxe(t,e){var s;if(t.type==="flow")return R3(t,e);if(t.type==="pie-chart")return new lr({color:null,outline:(s=t.outline)!=null&&s.width?t.outline:new em});let n=null,i=null;if(t.type==="simple")n=t.symbol;else if(t.type==="class-breaks"){const o=t.classBreakInfos;n=o&&o[0]&&o[0].symbol,i=o.length>1}else if(t.type==="unique-value"){const o=t.uniqueValueInfos;n=o&&o[0]&&o[0].symbol,i=o.length>1}return!n||eMe(n)?null:(n=n.clone(),(e||i)&&(n.type.includes("3d")?K4(n):Y4(n)),n)}function eMe(t){return t?dO(t)?!!t.symbolLayers&&t.symbolLayers.some(e=>e&&e.type==="fill"):t.type.includes("fill"):!1}function K4(t){t.type==="line-3d"?t.symbolLayers.forEach(e=>{e.material={color:rp}}):t.symbolLayers.forEach(e=>{e.type!=="icon"||e.resource&&e.resource.href?e.material={color:q4}:(e.material={color:j4},e.outline={color:rp,size:1.5})})}function Y4(t){var n,i;const e=Gm();t.type==="cim"?uO(t,new cn(q4)):t.type.includes("line")?t.color=rp:(t.color=e?rp:j4,t.type==="simple-marker"&&(t.outline?((i=(n=t.outline)==null?void 0:n.color)==null?void 0:i.toHex())==="#ffffff"&&(t.outline.color=rp):t.outline={color:rp,width:1.5}))}async function tMe(t,e,n,i){const s=(await Fe(()=>import("./UniqueValueRenderer-73d567ad.js").then(a=>a.v),["./UniqueValueRenderer-73d567ad.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./enumeration-61a13175.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./locale-30120714.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./Clonable-9b34e760.js","./LegendOptions-2e7b3d70.js","./reactiveUtils-5869e41a.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./number-2ab8ca0d.js","./Identifiable-093f90a8.js","./jsonUtils-c6684c52.js","./compilerUtils-fefa73ae.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js"],import.meta.url)).getSizeRangeAtScale(t,n,i),o=s&&Z4(s);if(!s&&!o)return;let r=o.map(a=>nMe(a,t,s));r=ub(r);for(let a=1;a<r.length-1;a++){const l=await iMe(t,e,r[a],r[a-1],n,i);l&&(r[a]=l[0],o[a]=l[1])}return r}function Z4(t){const e=t.minSize,n=t.maxSize,i=Wxe,s=(n-e)/(i-1),o=[];for(let r=0;r<i;r++)o.push(e+s*r);return o}function nMe(t,e,n){const i=n.minSize,s=n.maxSize,o=e.minDataValue,r=e.maxDataValue;let a=null;return t<=i?a=o:t>=s?a=r:a=(t-i)/(s-i)*(r-o)+o,a}async function iMe(t,e,n,i,s,o){const r=await Bd(t,e,n,s,o),a=await Bd(t,e,i,s,o),l=cb(n),c=l.fractional,u=Uxe;let d=l.integer,h=null,f=null;n>0&&n<1&&(h=10**c,d=cb(n*=h).integer);for(let m=d-1;m>=0;m--){const g=10**m;let y=Math.floor(n/g)*g,_=Math.ceil(n/g)*g;h!=null&&(y/=h,_/=h);let C=(y+_)/2;[,C]=ub([y,C,_],{indexes:[1]});const w=await Bd(t,e,y,s,o),S=await Bd(t,e,_,s,o),E=await Bd(t,e,C,s,o),k=oy(r,w,a,null),A=oy(r,S,a,null),$=oy(r,E,a,null);let L=k.previous<=u,O=A.previous<=u;if(L&&O&&(k.previous<=A.previous?(L=!0,O=!1):(O=!0,L=!1)),L?f=[y,w]:O?f=[_,S]:$.previous<=u&&(f=[C,E]),f)break}return f}async function Bd(t,e,n,i,s){const{getSize:o}=await Fe(()=>import("./UniqueValueRenderer-73d567ad.js").then(r=>r.v),["./UniqueValueRenderer-73d567ad.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./enumeration-61a13175.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./locale-30120714.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./Clonable-9b34e760.js","./LegendOptions-2e7b3d70.js","./reactiveUtils-5869e41a.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./number-2ab8ca0d.js","./Identifiable-093f90a8.js","./jsonUtils-c6684c52.js","./compilerUtils-fefa73ae.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js"],import.meta.url);return o(t,n,{scale:i,view:s,shape:e.type==="simple-marker"?e.style:null})}function sMe(t,e){const n=t.clone();if(dO(n))Lb(n)||n.symbolLayers.forEach(i=>{i.type!=="fill"&&(i.size=e)});else if(Gxe(n))n.size=e;else if(jxe(n)){const i=n.width,s=n.height;n.height=e,n.width=e*(i/s)}else qxe(n)?n.width=e:Kxe(n)&&n.font&&(n.font.size=e);return n}function oMe(t){const n=Math.floor(Math.log10(Math.abs(t)))+1,i=n<4||n>6?4:n,s=1e6,o=Math.abs(t)>=s?"compact":"standard";return rl(t,{notation:o,minimumSignificantDigits:2,maximumSignificantDigits:i})}const rMe="https://utility.arcgis.com/sharing/tools/legend",aMe="esri.layers.ImageryLayer",lMe="esri.layers.ImageryTileLayer",cMe="esri.layers.WCSLayer",mv=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,uMe=new sz({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),oL={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},gv=new lr({size:6,outline:{color:[128,128,128,.5],width:.5}}),dMe=new tm({style:"solid"});function bS(t){return t.type==="flow"}function X4(t){return t.type==="vector-field"}function Q4(t){return t.type==="raster-colormap"}function J4(t){return t.type==="raster-stretch"}function e5(t){return t.type==="raster-shaded-relief"}function zd(t){return t.declaredClass==="esri.renderers.SimpleRenderer"}function Hd(t){return t.declaredClass==="esri.renderers.ClassBreaksRenderer"}function Sy(t){return t.declaredClass==="esri.renderers.UniqueValueRenderer"}function t5(t){return t.declaredClass==="esri.renderers.HeatmapRenderer"}function pMe(t){return DT(t)||NT(t)||BT(t)||hMe(t)}function hMe(t){return t.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function DT(t){return t.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function NT(t){return t.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function BT(t){return t.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function n5(t){return t.declaredClass==="esri.renderers.DotDensityRenderer"}function i5(t){return t.declaredClass==="esri.renderers.PieChartRenderer"}function fMe(t,e){return zd(t)||Hd(t)||Sy(t)||t5(t)||n5(t)||i5(t)?e.type==="2d"||H4(t):J4(t)||Q4(t)||e5(t)||DT(t)||NT(t)||BT(t)||X4(t)||bS(t)}function mMe(t){return t.declaredClass==="esri.layers.BuildingSceneLayer"}function rL(t){return t.declaredClass==="esri.layers.SubtypeGroupLayer"}function gMe(t){return t.declaredClass==="esri.layers.VoxelLayer"}function vMe(t){return t.declaredClass==="esri.layers.WMSLayer"}function yMe(t){return t.declaredClass==="esri.layers.WMTSLayer"}function aL(t){return t.declaredClass==="esri.layers.MapImageLayer"}function bMe(t){return t.declaredClass==="esri.layers.TileLayer"}function _Me(t){return t.declaredClass==="esri.layers.FeatureLayer"}function bd(t){return t.declaredClass===aMe}function vv(t){return t.declaredClass===lMe}function wMe(t){return t.declaredClass===cMe}function CMe(t){return t.type==="stretch-ramp"}function SMe(t){var e;return((e="authoringInfo"in t&&(t==null?void 0:t.authoringInfo))==null?void 0:e.type)==="univariate-color-size"}function EMe(t){const e="authoringInfo"in t&&(t==null?void 0:t.authoringInfo);return(e==null?void 0:e.type)==="univariate-color-size"&&(e==null?void 0:e.univariateTheme)==="above-and-below"}const kMe=new lr({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let _d={},bi=class extends dt{constructor(t){super(t),this._handles=new si,this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this.children=new Ht,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const t=()=>this.notifyChange("ready");this._handles.add([Dn(()=>this.children,"change",e=>{const{added:n,removed:i}=e,s=this._handles;n.forEach(o=>{const r=`activeLayerInfo-ready-watcher-${o.layer.uid}`;s.add(ge(()=>o.ready,t,gt),r)}),i.forEach(o=>s.remove(o.layer.uid)),t()})]),this.keepCacheOnDestroy||(_d={})}destroy(){this._handles.destroy(),this._handles=null,this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(_d=null)}get effectList(){const t=this.layer;let e=null;return"effect"in t&&t.effect&&(e=new oz,e.effect=t.effect,e.endTransitions(),e.scale=this.scale),e}get opacity(){var s;const t=this.layer.opacity,e=(s=this.parent)==null?void 0:s.opacity,n=this.layer.parent,i=n&&"uid"in n?this._getParentLayerOpacity(n):null;return e!=null?e*t:i!=null?i*t:t}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view&&this.view.scale}get isScaleDriven(){const t=this.layer;if(t===null)return!1;if("effect"in t&&t.effect&&Array.isArray(t.effect))return!0;if("featureReduction"in t&&t.featureReduction){if(t.featureReduction.type==="cluster")return!0;if(t.featureReduction.type==="binning"&&"renderer"in t.featureReduction&&t.featureReduction.renderer)return this._isRendererScaleDriven(t.featureReduction.renderer)}return"renderer"in t&&t.renderer?this._isRendererScaleDriven(t.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(t){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange("ready");const e=Array.from(t,n=>{if(_Me(n))return this._getRendererLegendElements(n.renderer,{title:n.title});if(n.featureSet&&n.featureSet.features.length){const i=n.layerDefinition,s=i&&i.drawingInfo,o=s&&uB(s.renderer),r=uMe.read(i.geometryType);return o?this._getRendererLegendElements(o,{title:n.name,geometryType:r}):(Tt.getLogger(this.declaredClass).warn("drawingInfo not available!"),null)}return null});try{const n=[];await Ni(e).then(i=>{i.forEach(({value:s})=>s&&n.push(...s))}),this.legendElements=n,this.notifyChange("ready")}catch(n){Tt.getLogger(this.declaredClass).warn("error while building legend for layer!",n)}}async buildLegendElementsForRenderer(t){try{const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getRendererLegendElements(t):[],this.notifyChange("ready")}catch(e){Tt.getLogger(this.declaredClass).warn("error while building legend for layer!",e)}}async buildLegendElementsForFeatureReduction(t){try{const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getLegendElementsForFeatureReduction(t):[],this.notifyChange("ready")}catch(e){Tt.getLogger(this.declaredClass).warn("error while building legend for layer!",e)}}async buildLegendElementsForTools(){var e,n;const t=this.layer;if(gMe(t))this._constructLegendElementsForVoxellayer();else if(yMe(t))this._constructLegendElementsForWMTSlayer();else if(vMe(t))await this._constructLegendElementsForWMSSublayers();else if(mMe(t))await this._constructLegendElementsForBuildingSceneLayer();else if(aL(t)||bMe(t)||rL(t))await this._constructLegendElementsForSublayers();else{this._handles.remove("imageryLayers-watcher");let i="default";bd(t)&&(i=(((e=t==null?void 0:t.renderingRule)==null?void 0:e.functionName)||"default")+"_"+((n=t.bandIds)!=null&&n.length?t.bandIds.join(""):"###")),await this._getLegendLayers(`${t.uid}-${i}`).then(async s=>{this.legendElements=[],this.notifyChange("ready");const o=s.map(async r=>{if(bd(t)||vv(t)){const l=ge(()=>["renderingRule"in t&&t.renderingRule,t.bandIds],()=>Mb(async()=>{_d.default=null,t.renderer?await this.buildLegendElementsForRenderer(t.renderer):await this.buildLegendElementsForTools()})());this._handles.add(l,"imageryLayers-watcher")}const a=this._generateSymbolTableElementForLegendLayer(r);a&&a.infos.length&&(bd(t)&&(a.title=t.title),this.legendElements.push(a)),this.notifyChange("ready")});await Ni(o)}).catch(s=>{Tt.getLogger(this.declaredClass).warn("Request to server for legend has failed!",s)})}}async _isLayerInCurrentView(){const t=this.layer,e=this.layerView,n=e&&"createQuery"in e&&"queryFeatureCount"in e;if(!n&&!(e&&"createQuery"in t&&"queryFeatureCount"in t))return!0;await na(()=>!e.updating);const i=n?"createQuery"in e&&e.createQuery():"createQuery"in t&&t.createQuery();return i.geometry=this.view.extent,(n?"queryFeatureCount"in e&&await e.queryFeatureCount(i):"queryFeatureCount"in t&&await t.queryFeatureCount(i))!==0}_getParentLayerOpacity(t){let e=1;const n=t.parent;return n&&"uid"in n&&(e=this._getParentLayerOpacity(n)),t.opacity*e}_isGroupActive(){const t=this.children;return!!t.length&&t.some(e=>e.ready)}_isRendererScaleDriven(t){if(t.type==="dot-density")return!0;const e="valueExpression"in t&&t.valueExpression;if(mv.test(e))return!0;const n="visualVariables"in t&&t.visualVariables;return!!n&&n.some(i=>this._isScaleDrivenSizeVariable(i))}_isScaleDrivenSizeVariable(t){if(t&&t.type!=="size")return!1;const e=t,n=e.minSize,i=e.maxSize;return typeof n=="object"&&n?this._isScaleDrivenSizeVariable(n):typeof i=="object"&&i?this._isScaleDrivenSizeVariable(i):!!e.expression||mv.test(e.valueExpression)}_isLayerScaleDriven(t){if("minScale"in t&&t.minScale>0||"maxScale"in t&&t.maxScale>0)return!0;if("sublayers"in t&&t.sublayers)return t.sublayers.some(n=>this._isLayerScaleDriven(n));const e=t.parent;if(t.loaded===!1&&e&&aL(e)&&"source"in t&&t.source&&t.source.type==="map-layer"){for(const n of e.sourceJSON.layers)if(n.id===t.source.mapLayerId&&(n.minScale>0||n.maxScale>0))return!0}return!1}async _constructLegendElementsForVoxellayer(){var o;this.legendElements=[],this._handles.remove("voxel-style-watcher"),this._handles.remove("voxel-current-variable");const t=this.layer;this._handles.add(ge(()=>t.currentVariableId,()=>this._constructLegendElementsForVoxellayer()),"voxel-current-variable"),this._handles.add(ge(()=>t.getVariableStyles(),()=>this._constructLegendElementsForVoxellayer()),"voxel-style-watcher");const e=zt(t.getVariableStyle(null)),n=[];if(e){if((o=e.uniqueValues)!=null&&o.length){const r=[];e.uniqueValues.forEach(a=>{a.enabled&&r.push({label:a.label||`${a.value}`,value:a.value,symbol:new tm({color:a.color,outline:null})})}),r.length&&n.push({type:"symbol-table",title:e.label,infos:r})}else if(e.transferFunction){const{colorStops:r,stretchRange:a}=e.transferFunction,l=r.toArray().reverse(),c=a.map((d,h)=>`${h===0?L3:O3} ${oMe(d)}`).reverse(),u=l.map(d=>({color:d.color,value:null,label:null}));u[0].label=c[0],u[u.length-1].label=c[1],n.push({type:"color-ramp",title:e.label,infos:u,preview:Yc(l.map(d=>d.color))})}}const i=t.opacity,s=n.reduce((r,a)=>r.concat(this._getAllInfos(a)),[]).filter(r=>!!(r!=null&&r.symbol)).map(r=>this._getSymbolPreview(r,i));await Ni(s),this.legendElements=n,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this._handles.remove("wmts-activeLayer-watcher");const t=this.layer.activeLayer;if(this._handles.add(ge(()=>{const{layer:e}=this;return e&&"activeLayer"in e&&e.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher"),t.styleId&&t.styles){let e=null;t.styles.some(n=>t.styleId===n.id&&(e=n.legendUrl,!0)),e&&(this.legendElements=[{type:"symbol-table",title:t.title,infos:[{src:e,opacity:this.opacity}]}])}this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this._handles.remove("wms-sublayers-watcher");const t=this.layer;let e=null;(t.customParameters||t.customLayerParameters)&&(e={...t.customParameters,...t.customLayerParameters}),this._handles.add(ge(()=>{const{layer:n}=this;return n&&"sublayers"in n&&n.sublayers},()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(t.sublayers,e),this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(t,e){const n=[];this._handles.add(t.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");const i=t.toArray();for(const s of i){const o=ge(()=>[s.title,s.visible,s.legendEnabled],()=>this._constructLegendElementsForWMSSublayers());if(this._handles.add(o,"wms-sublayers-watcher"),!this.respectLayerVisibility||s.visible&&s.legendEnabled){const r=await this._generateSymbolTableElementForWMSSublayer(s,e);r&&r.infos.length&&n.unshift(r)}}return n}async _generateSymbolTableElementForWMSSublayer(t,e){if(!t.legendUrl&&t.sublayers){const n=(await this._generateLegendElementsForWMSSublayers(t.sublayers,e)).filter(i=>i);return{type:"symbol-table",title:t.title,infos:n}}return this._generateSymbolTableElementForLegendUrl(t,e)}async _generateSymbolTableElementForLegendUrl(t,e){var r;let n=t.legendUrl;if(!n)return;const i={type:"symbol-table",title:t.title||t.name||t.id&&t.id+"",infos:[]};e&&(n=v8(n,e));let s=null;const o=(r=t.layer)==null?void 0:r.opacity;try{s=(await go(n,{responseType:"image"})).data,s&&(s.style.opacity=o)}catch{}return i.infos.push({src:n,preview:s,opacity:o}),i}_getLegendLayers(t,e){const n=_d&&_d[t];return n?Promise.resolve(n):this._legendRequest(e).then(i=>{const s=i.layers;return _d[t]=s,s})}_legendRequest(t){const e=this.layer;let n={f:"json",dynamicLayers:t};if(bd(e)){const s=e.exportImageServiceParameters.renderingRule;if(s&&(n.renderingRule=JSON.stringify(s.rasterFunctionDefinition||s.toJSON())),e.bandIds&&(n.bandIds=e.bandIds.join()),e.raster||e.viewId||e.customParameters){const{raster:o,viewId:r,customParameters:a}=e;n={raster:o,viewId:r,...n,...a}}}let i=e.url.replace(/(\/)+$/,"");if("version"in e&&e.version>=10.01){const s=i.indexOf("?");s>-1?i=i.substring(0,s)+"/legend"+i.substring(s):i+="/legend"}else{const s=i.toLowerCase().indexOf("/rest/"),o=i.substring(0,s)+i.substring(s+5,i.length);i=rMe+"?soapUrl="+encodeURI(o)+"&returnbytes=true"}return go(i,{query:n}).then(s=>s.data)}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this._handles.remove("sublayers-watcher");const t=this.layer;this._handles.add(ge(()=>t.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(t.sublayers,this.opacity),this.notifyChange("ready")}catch(e){Tt.getLogger(this.declaredClass).warn("Request to server for legend has failed!",e)}}async _generateLegendElementsForBuildingSublayers(t,e){let n=[];this._handles.add(t.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");const i=t.toArray();for(const s of i){const o=ge(()=>["renderer"in s&&s.renderer,s.opacity,s.title,s.visible],()=>this._constructLegendElementsForBuildingSceneLayer());if(this._handles.add(o,"sublayers-watcher"),!this.respectLayerVisibility||s.visible){const r=s&&s.opacity!=null?s.opacity:null,a=r!=null?r*e:e;if(s.type==="building-group"){const l={type:"symbol-table",title:s.title,infos:[]},c=await this._generateLegendElementsForBuildingSublayers(s.sublayers,a);l.infos.push(...c),n=[l,...n]}else s.renderer&&(n=[...await this._getRendererLegendElements(s.renderer,{title:s.title,opacity:a,sublayer:s}),...n])}}return n.filter(s=>!!s&&(!("infos"in s)||s.infos.length>0))}async _constructLegendElementsForSublayers(){this.legendElements=[],this._handles.remove("sublayers-watcher");const t=this.layer;this._handles.add(ge(()=>t.sublayers,()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(t.sublayers,this.opacity),this.notifyChange("ready")}catch(e){Tt.getLogger(this.declaredClass).warn("Request to server for legend has failed!",e)}}async _generateLegendElementsForSublayers(t,e,n){const i=this.layer;let s=[];this._handles.add(t.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");let o=t.toArray();!n&&this.sublayerIds&&this.sublayerIds.length&&(o=this.sublayerIds.map(r=>i.findSublayerById(r)).filter(Boolean));for(const r of o){const a=ge(()=>[r.renderer,r.opacity,r.title,r.visible,r.legendEnabled],()=>this._constructLegendElementsForSublayers());if(this._handles.add(a,"sublayers-watcher"),!this.respectLayerVisibility||r.visible&&r.legendEnabled&&this._isSublayerInScale(r)){const l=r&&r.opacity!=null?r.opacity:null,c=l!=null?l*e:e,u=!!rL(i)||r.originIdOf("renderer")>Ih.SERVICE;if(r.renderer&&!r.sublayers&&u)await r.load(),s=[...await this._getRendererLegendElements(r.renderer,{title:r.title,opacity:c,sublayer:r}),...s];else{const d=await this._generateSymbolTableElementForSublayer(r,c,n);d&&s.unshift(d)}}}return s.filter(r=>!!r&&(!("infos"in r)||r.infos.length>0))}async _generateSymbolTableElementForSublayer(t,e,n){if(!n){n=new Map;const s=this.layer,o=t.source;let r=null;if(!(!o||o.type==="map-layer"&&o.mapLayerId===t.id&&(!o.gdbVersion||o.gdbVersion===("gdbVersion"in s&&s.gdbVersion)))||t.originIdOf("renderer")>Ih.SERVICE||t.originIdOf("labelingInfo")>Ih.SERVICE||t.originIdOf("labelsVisible")>Ih.SERVICE){const l=new az({layer:this.layer});r=l.hasDynamicLayers?l.dynamicLayers:null,l.destroy()}const a=r||`${s.uid}-default`;(await this._getLegendLayers(a,r)).forEach(l=>n.set(l.layerId,l))}const i=n.get(t.id);if((!i||i!=null&&i.subLayerIds&&i.defaultVisibility)&&t.sublayers){const s=await this._generateLegendElementsForSublayers(t.sublayers,e,n);return{type:"symbol-table",title:t.title,infos:s}}return this._generateSymbolTableElementForLegendLayer(i,t,e)}_generateSymbolTableElementForLegendLayer(t,e,n){var a;if(!t||!t.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(t,e))return null;const i=e==null?void 0:e.renderer;let s=(e==null?void 0:e.title)||t.layerName;if(i&&(!e||(e==null?void 0:e.originIdOf("renderer"))>Ih.SERVICE)){const l=(e==null?void 0:e.title)||this._getRendererTitle(i,e);l&&(s&&typeof l!="string"&&"title"in l&&(l.title=s),s=l)}const o={type:"symbol-table",title:s,legendType:t.legendType?t.legendType:null,infos:[]},r=e?this._sanitizeLegendForSublayer(t.legend.slice(),e):t.legend;return((a=t.legendGroups)==null?void 0:a.length)>0?t.legendGroups.forEach(l=>{var u;const c={type:"symbol-table",title:l.heading,legendType:t.legendType?t.legendType:null,infos:this._generateSymbolTableElementInfosForLegendLayer(r.filter(d=>d.groupId===l.id),t.layerId,n)};((u=c.infos)==null?void 0:u.length)>0&&o.infos.push(c)}):o.infos=this._generateSymbolTableElementInfosForLegendLayer(r,t.layerId,n),o.infos.length>0?o:null}_generateSymbolTableElementInfosForLegendLayer(t,e,n){return t.map(i=>{let s=i.url;if(i.imageData&&i.imageData.length>0)s=`data:image/png;base64,${i.imageData}`;else{if(s.indexOf("http")===0)return null;s=y8(`${this.layer.url}/${e}/images/${s}`)}return{label:i.label,src:s,opacity:n??this.opacity,width:i.width,height:i.height}}).filter(i=>!!i)}_isSublayerInScale(t){const e=t.minScale||0,n=t.maxScale||0;return!(e>0&&e<this.scale||n>this.scale)}_isLegendLayerInScale(t,e){const n=e||this.layer;let i=null,s=null,o=!0;return!n.minScale&&n.minScale!==0||!n.maxScale&&n.maxScale!==0?(t.minScale===0&&n.tileInfo&&(i=n.tileInfo.lods[0].scale),t.maxScale===0&&n.tileInfo&&(s=n.tileInfo.lods[n.tileInfo.lods.length-1].scale)):(i=Math.min(n.minScale,t.minScale)||n.minScale||t.minScale,s=Math.max(n.maxScale,t.maxScale)),(i>0&&i<this.scale||s>this.scale)&&(o=!1),o}_sanitizeLegendForSublayer(t,e){if("version"in this.layer&&this.layer.version<10.1||t.length===0)return t;const n=e.renderer,i=t.some(r=>r.values);let s=null,o=null;return i&&t.some((r,a)=>(r.values||(s=a,o=r,o.label||(o.label="others")),o!=null)),n?n.type==="unique-value"?o&&(t.splice(s,1),t.push(o)):n.type==="class-breaks"&&(o&&t.splice(s,1),t.reverse(),o&&t.push(o)):o&&(t.splice(s,1),t.push(o)),t}async _getRendererLegendElements(t,e={}){if(!fMe(t,this.view))return Tt.getLogger(this.declaredClass).warn(`Renderer of type '${t.type}' not supported!`),[];if(pMe(t))return this._constructPointCloudRendererLegendElements(t,e);if(n5(t))return this._constructDotDensityRendererLegendElements(t);const n=await this._loadRenderer(t);return i5(n)?this._constructPieChartRendererLegendElements(n):this._constructRendererLegendElements(n,e)}async _getLegendElementsForFeatureReduction(t){let e=null;return t.type==="binning"?e=t.renderer:t.type==="cluster"&&(e=this._getClusterRenderer(t)),e?this._getRendererLegendElements(e):[]}_getPointCloudRendererTitle(t){return t.legendOptions&&t.legendOptions.title||t.field}_constructPointCloudRendererLegendElements(t,e={}){const n=e.title,i=[];let s=null,o=null;if(DT(t))s={type:"symbol-table",title:n||this._getPointCloudRendererTitle(t),infos:[]},t.colorClassBreakInfos.forEach(a=>{s.infos.unshift({label:a.label||a.minValue+" - "+a.maxValue,value:[a.minValue,a.maxValue],symbol:this._getAppliedCloneSymbol(gv,a.color)})});else if(NT(t)){const a=t.stops;let l=null;if(a.length&&(a.length===1&&(l=a[0].color),!l)){const u=a[0].value,d=a[a.length-1].value;u!=null&&d!=null&&(l=F3(u+(d-u)/2,a))}s={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(gv,l||gv.color)}]};const c=y1e(t.stops);o={type:"color-ramp",title:n||this._getPointCloudRendererTitle(t),infos:c,preview:Yc(c.map(u=>u.color))}}else BT(t)&&(s={type:"symbol-table",title:n||this._getPointCloudRendererTitle(t),infos:[]},t.colorUniqueValueInfos.forEach(a=>{s.infos.push({label:a.label||a.values.join(", "),value:a.values.join(", "),symbol:this._getAppliedCloneSymbol(gv,a.color)})}));s&&s.infos.length&&i.push(s),o&&o.infos.length&&i.push(o);const r=i.reduce((a,l)=>a.concat(l.infos),[]).filter(a=>!!a.symbol).map(a=>this._getSymbolPreview(a,this.opacity,{symbolConfig:{applyColorModulation:!!t.colorModulation}}));return Ni(r).then(()=>i)}_getElementInfoForDotDensity(t,e){var h;const{backgroundColor:n,outline:i,dotSize:s}=t,o=(h=this.effectList)==null?void 0:h.effects.map(f=>f.toJSON()),r=rz(o),a=s+"-"+e+"-"+n+"-"+(i&&JSON.stringify(i.toJSON()))+"-"+r,l=this._dotDensityUrlCache,c=l.has(a)?l.get(a):LCe(t,e);l.set(a,c);const u={shape:{type:"image",x:0,y:0,width:c.width,height:c.height,src:c.src},fill:null,stroke:null,offset:[0,0]},d=vg([[u]],[c.width,c.height],{effectView:this.effectList});return{opacity:1,src:c.src,preview:d,width:c.width,height:c.height}}_constructDotDensityRendererLegendElements(t){const e=t.calculateDotValue(this.view.scale),n=t.legendOptions&&t.legendOptions.unit,i={type:"symbol-table",title:{value:e&&Math.round(e),unit:n||""},infos:[]};return t.attributes.forEach(s=>{const o=this._getElementInfoForDotDensity(t,s.color);o.label=s.label||s.valueExpressionTitle||s.field,i.infos.push(o)}),Promise.resolve([i])}async _constructPieChartRendererLegendElements(t){var l,c,u,d;const e=this.layer.opacity,n=[],i="Others",s=t.outline;t.attributes.forEach(h=>{const f=new lr({color:h.color,outline:s}),m=h.label||h.valueExpressionTitle||h.field;n.push({label:m,symbol:f})});const o=n.length?[...n]:[];if((l=t.othersCategory)!=null&&l.color&&((c=t.othersCategory)==null?void 0:c.threshold)!==0){const h=new lr({color:t.othersCategory.color,outline:s});n.push({label:t.othersCategory.label||i,symbol:h})}if((u=t.defaultColor)!=null&&u.a){const h=new lr({color:t.defaultColor,outline:s});n.push({label:t.defaultLabel,symbol:h})}const r=await this._getVisualVariableLegendElements(t,this.layer)||[];if(n.length){r.unshift({type:"symbol-table",title:null,infos:n});const h=o.filter(m=>m.label!==i).map(m=>m.symbol.color).filter(Boolean),f=OCe(h,{holePercentage:t.holePercentage,backgroundColor:(d=t.backgroundFillSymbol)==null?void 0:d.color,effectList:this.effectList,outline:s});r.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(t,this.layer),infos:n,preview:f})}const a=r.reduce((h,f)=>h.concat(this._getAllInfos(f)),[]).filter(h=>!!(h!=null&&h.symbol)&&!(h!=null&&h.preview)).map(h=>this._getSymbolPreview(h,e,{effectList:this.effectList}));return await Ni(a),r}async _constructRendererLegendElements(t,e={}){const{title:n,sublayer:i}=e,s=i||this.layer;this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const o=await this._getVisualVariableLegendElements(t,s)||[],r={type:"symbol-table",title:n||this._getRendererTitle(t,s),infos:[]};let a=null,l=!1;const c=new Set;if(bS(t)&&!this._hasSizeRamp){const g=await R3(t);r.infos.push({label:null,symbol:g})}else if(SMe(t)){let g=n;const y=EMe(t)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",_=o.findIndex(k=>k.type==="color-ramp"),C=_!==-1?o.splice(_,1)[0]:null,w=o.findIndex(k=>k.type==="size-ramp"),S=w!==-1?o.splice(w,1)[0]:null,E=[];C&&(g=C.title,E.push(C)),S&&(g=S.title,E.push(S)),E.length>0&&o.push({type:y,title:g,infos:E})}else if(t5(t)){const g=D3(t);o.push({type:"heatmap-ramp",title:n||this._getRendererTitle(t,s),infos:g,preview:Yc(g.map(y=>y.color),{effectList:this.effectList})})}else if(Sy(t)){const g=t&&t.authoringInfo;if(g&&g.type==="relationship"){const{focus:y,numClasses:_,field1:C,field2:w}=g;if(_&&C&&w){const S=[C,w];let E=G4(y)||0;for(const A of S){const{field:$,normalizationField:L,label:O}=A,B=O||{field:this._getFieldAlias($,s),normField:L&&this._getFieldAlias(L,s)},V=kMe.clone();V.angle=E,r.infos.push({label:B,symbol:V}),c.add(V),E+=90}const k=Hxe({focus:y,numClasses:_,infos:t.uniqueValueInfos});o.unshift(k)}}else if(bd(this.layer)||vv(this.layer))t.uniqueValueInfos.forEach(y=>{y.symbol&&r.infos.push({label:y.label||y.value,value:y.value,symbol:y.symbol})});else{const{field:y,field2:_,field3:C,fieldDelimiter:w,valueExpression:S}=t,E=!(!y&&!S||!_&&!C),k=[];if(t.uniqueValueGroups.forEach(A=>{const $={type:"symbol-table",title:A.heading,infos:[]};A.classes.forEach(L=>{const{symbol:O,values:B}=L;if(O){const V=[],P=[];for(const W of B){const{value:R,value2:D,value3:N}=W,K=[],ie=[];(y||S)&&(K.push(R),ie.push(this._getDomainName(y,R,s))),_&&(K.push(D),ie.push(this._getDomainName(_,D,s))),C&&(K.push(N),ie.push(this._getDomainName(C,N,s))),V.push(E?K.join(w||""):K[0]),P.push(ie.join(" - "))}const z=V.join(", ");let U=L.label;if(!U){const W=P.filter(Boolean);U=W.length?W.join(", "):z}$.infos.push({label:U,value:z,symbol:O})}}),$.infos.length&&k.push($)}),k.length){const A=k[0];k.length===1&&"title"in A&&!A.title?r.infos.push(...A.infos):r.infos.push(...k)}}t.defaultSymbol&&(r.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),l=!0)}else if(Hd(t))a=this._isUnclassedRenderer(t),(!a||!this._hasSizeRamp)&&(t.classBreakInfos.forEach(g=>{g.symbol&&r.infos.unshift({label:g.label||(a?null:g.minValue+" - "+g.maxValue),value:[g.minValue,g.maxValue],symbol:g.symbol})}),a&&(r.title=null),this._updateInfosforClassedSizeRenderer(t,r.infos)),t.defaultSymbol&&!a&&(r.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),l=!0);else if(J4(t))if(vv(this.layer)||wMe(this.layer)){const g=this._constructTileImageryStretchRendererElements(t);CMe(g)?o.push(g):r.infos=g}else{const g=this.layer;let y,_;t.statistics&&t.statistics.length&&(y=t.statistics[0].min!=null?t.statistics[0].min:t.statistics[0][0],_=t.statistics[0].max!=null?t.statistics[0].max:t.statistics[0][1]);let C=[];const w=zt(g.renderingRule?await g.generateRasterInfo(g.renderingRule):g.serviceRasterInfo),S=w.keyProperties.BandProperties,E=oL[g.rasterInfo.pixelType.toLowerCase()];w.bandCount===1||g.bandIds&&g.bandIds.length===1?(y=y??(w.statistics?w.statistics[g.bandIds[0]].min:E[0]),_=_??(w.statistics?w.statistics[g.bandIds[0]].max:E[1]),y||_?o.push(this._getStretchLegendElements(t,{min:y,max:_})):this._getServerSideLegend()):w.bandCount>=3?S&&S.length>=w.bandCount?g.bandIds&&g.bandIds.length===3?(C=g.bandIds.map(k=>S[k].BandName),r.infos=this._createSymbolTableElementMultiBand(C)):g.format==="lerc"?(C=[0,1,2].map(k=>S[k].BandName),r.infos=this._createSymbolTableElementMultiBand(C)):this._getServerSideLegend():g.format==="lerc"?(C=["band1","band2","band3"],r.infos=this._createSymbolTableElementMultiBand(C)):this._getServerSideLegend():this._getServerSideLegend()}else if(Q4(t))t.colormapInfos.forEach(g=>{r.infos.push({label:g.label,value:g.value,symbol:this._getAppliedCloneSymbol(dMe,g.color)})});else if(zd(t)){let g=t.symbol;switch(e.geometryType){case"point":g="pointSymbol"in s&&s.pointSymbol;break;case"polyline":g="lineSymbol"in s&&s.lineSymbol;break;case"polygon":g="polygonSymbol"in s&&s.polygonSymbol}const y=this._hasClusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;t.symbol&&y&&r.infos.push({label:t.label,symbol:g})}else if(X4(t)){t.outputUnit&&(this.title="("+t.toJSON().outputUnit+")"),r.title=t.attributeField;const g=t.getClassBreakInfos();g!=null&&g.length?g.forEach(y=>{r.infos.push({label:y.minValue+" - "+y.maxValue,symbol:y.symbol})}):r.infos.push({label:t.attributeField,symbol:t.getDefaultSymbol()})}else e5(t)&&o.push(this._getStretchLegendElements(t,{min:0,max:255}));const u=t.defaultSymbol;!u||l||zd(t)||a&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||o.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:u}]}),r.infos.length&&o.unshift(r);const d=e.opacity==null?this.opacity:e.opacity,h=this._isTallSymbol("visualVariables"in t&&t.visualVariables),f=bd(this.layer)||vv(this.layer),m=o.reduce((g,y)=>g.concat(this._getAllInfos(y)),[]).filter(g=>!!(g!=null&&g.symbol)).map(g=>this._getSymbolPreview(g,d,{isDefault:g.symbol===u,applyScaleDrivenSize:!c.has(g.symbol),symbolConfig:{isTall:h,isSquareFill:f},effectList:c.has(g.symbol)?null:this.effectList}));return t=null,await Ni(m),o}_getServerSideLegend(){setTimeout(()=>this.buildLegendElementsForTools(),0)}_getAllInfos(t){const e=t==null?void 0:t.infos;return e?e.reduce((n,i)=>n.concat(this._getAllInfos(i)),[]):[t]}_constructTileImageryStretchRendererElements(t){var u,d;const e=this.layer,n=e.rasterInfo,i=n.bandCount||t.statistics.length;let s,o,r=[];const a=n.keyProperties&&n.keyProperties.BandProperties,l=(u=t==null?void 0:t.statistics)!=null&&u.length?t.statistics:n==null?void 0:n.statistics;if(l)s=l[0].min!==void 0?l[0].min:l[0][0],o=l[0].max||l[0][1];else{const h=oL[e.rasterInfo.pixelType.toLowerCase()];s=h[0],o=h[1]}if(e.hasStandardTime()&&(s=e.getStandardTimeValue(s),o=e.getStandardTimeValue(o)),n.bandCount===1||((d=e.bandIds)==null?void 0:d.length)===1)return this._getStretchLegendElements(t,{min:s,max:o});function c(h){var m;const f=((m=e==null?void 0:e.bandIds)!=null&&m.length?e.bandIds:Array.from(Array(Math.min(n.bandCount,3)).keys())).map(g=>h&&h[g]&&h[g].BandName||"band"+(g+1));return f.length<3?f.push(f[1]):f.length>3&&f.splice(3),f}return r=a&&a.length>=i?c(a):c(),this._createSymbolTableElementMultiBand(r)}_getStretchLegendElements(t,e){const n=t.colorRamp,i=_1e(n,e);return{type:"stretch-ramp",title:"",infos:i,preview:Yc(i.map(s=>s.color))}}_getClusterSymbol(){var i;const t=this.layer,e="featureReduction"in t&&t.featureReduction,n=e&&"symbol"in e&&e.renderer;return n&&((i=n==null?void 0:n.authoringInfo)==null?void 0:i.isAutoGenerated)!==!0?null:e&&"symbol"in e&&e.symbol}async _getSizeLegendElement(t,e,n,i){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(e):t,infos:await Zxe(n,e,await IC(n),this.scale,this.view.type,i,this._hasClusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(t){const e=[],n=["red","green","blue"];return t.forEach((i,s)=>{e.push({label:{colorName:n[s],bandName:i},src:m1e[s],opacity:this.opacity??1})}),e}_updateInfosforClassedSizeRenderer(t,e){const n=t.authoringInfo&&t.authoringInfo.type==="class-breaks-size",i=t.classBreakInfos.some(s=>Lb(s.symbol));if(n&&i){const s=vS,o=yS,r=t.classBreakInfos.length,a=(s-o)/(r>1?r-1:r);e.forEach((l,c)=>{l.size=s-a*c})}}_isTallSymbol(t){let e=!1,n=!1;if(t)for(let i=0;i<t.length&&(!e||!n);i++){const s=t[i];s.type==="size"&&(s.axis==="height"&&(e=!0),s.axis==="width-and-depth"&&(n=!0))}return e&&n}async _getSymbolPreview(t,e,n){let i=!(n!=null&&n.isDefault)&&t.size==null&&this._hasSizeRamp?Ru(Ti.size):t.size;if(this._scaleDrivenSizeVariable&&(n!=null&&n.applyScaleDrivenSize)){const{getSize:s}=await Fe(()=>import("./UniqueValueRenderer-73d567ad.js").then(o=>o.v),["./UniqueValueRenderer-73d567ad.js","./cast-a534ae90.js","./typedArrayUtil-d9bc5fbd.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./symbols-9fcb6cc2.js","./CIMSymbol-72a9d286.js","./enumeration-61a13175.js","./jsonMap-190c5593.js","./Extent-a1a1de42.js","./fieldUtils-b2df74c4.js","./preload-helper-41c905a7.js","./arcadeOnDemand-a976a73c.js","./geometry-eec1b371.js","./Polyline-b571c705.js","./typeUtils-cd52dc20.js","./Symbol-8266348e.js","./Color-af6e0c66.js","./colorUtils-639f4d25.js","./mathUtils-57aba1ea.js","./vec3-1863987c.js","./vec3f64-6cd30318.js","./common-c186b691.js","./vec4-46a9b36d.js","./screenUtils-90993e16.js","./opacityUtils-1333f803.js","./symbolLayerUtils3D-c8c40895.js","./aaBoundingBox-4a83dbbc.js","./aaBoundingRect-b340cf8c.js","./request-24011425.js","./persistableUrlUtils-d0777bec.js","./Collection-7c37b74e.js","./Evented-cbf5f368.js","./SimpleObservable-8e532943.js","./collectionUtils-0365f48b.js","./Portal-c6e03126.js","./Loadable-46524a7e.js","./Promise-368b703a.js","./locale-30120714.js","./PortalGroup-d495847c.js","./PortalUser-1016c43c.js","./Clonable-9b34e760.js","./LegendOptions-2e7b3d70.js","./reactiveUtils-5869e41a.js","./diffUtils-8a8cb5bc.js","./colorRamps-8d7efc14.js","./sizeVariableUtils-d4870b0d.js","./Graphic-6c08e65d.js","./PopupTemplate-f97bb051.js","./number-2ab8ca0d.js","./Identifiable-093f90a8.js","./jsonUtils-c6684c52.js","./compilerUtils-fefa73ae.js","./lengthUtils-92fed992.js","./unitUtils-dd6fb8ee.js","./jsonUtils-8c02ff16.js","./styleUtils-391927cf.js"],import.meta.url);i=s(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:t.symbol.type==="simple-marker"?t.symbol.style:null})}return aT(t.symbol,{size:i,opacity:e,scale:!1,symbolConfig:n==null?void 0:n.symbolConfig,effectView:n==null?void 0:n.effectList}).then(s=>(t.preview=s,t)).catch(()=>(t.preview=null,t))}_getClusterRenderer(t){var s,o;this._hasClusterSizeVariable=!1;const e="renderer"in this.layer&&this.layer.renderer,n=((s=t.renderer)==null?void 0:s.clone())||(e==null?void 0:e.clone()),i=zt(Mxe(this.layerView._effectiveRenderer,this.view));if(i&&"visualVariables"in n&&!((o=n.visualVariables)==null?void 0:o.some(a=>a.type==="size"&&a.target!=="outline"&&!mv.test(a.valueExpression)))){if("clusterMinSize"in t&&"clusterMaxSize"in t){const{clusterMinSize:l,clusterMaxSize:c}=t;i.legendOptions=new YB({showLegend:l!==c})}const a=n.visualVariables||[];n.visualVariables=a.concat([i]),this._hasClusterSizeVariable=!0}return n}async _loadRenderer(t){const e=[],n=t.clone(),i=await IC(n);if(Hd(n)||Sy(n)){const s=(n.classBreakInfos||n.uniqueValueInfos).map(o=>this._fetchSymbol(o.symbol,i).then(r=>{o.symbol=r}).catch(()=>{o.symbol=null}));Array.prototype.push.apply(e,s)}return e.push(this._fetchSymbol(n.symbol||n.defaultSymbol,n.defaultSymbol?null:i).then(s=>{this._applySymbolToRenderer(n,s,zd(n))}).catch(()=>{this._applySymbolToRenderer(n,null,zd(n))})),Ni(e).then(()=>n)}_applySymbolToRenderer(t,e,n){n?t.symbol=e:t.defaultSymbol=e}async _fetchSymbol(t,e){if(!t)throw new Error;if(t.type==="web-style"){const n=this._webStyleSymbolCache;try{const i=await(this.view.type==="2d"?t.fetchCIMSymbol({cache:n}):t.fetchSymbol({cache:n}));return this._getAppliedCloneSymbol(i,e)}catch{throw Tt.getLogger(this.declaredClass).warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(t,e)}_getAppliedCloneSymbol(t,e){if(!t||!e)return t;const n=t.clone(),i=e&&e.toRgba();return n.type.includes("3d")?this._applyColorTo3dSymbol(n,i):n.type==="cim"?uO(n,e):n.color&&(n.color=new cn(i||n.color)),n}_applyColorTo3dSymbol(t,e){e&&t.symbolLayers.forEach(n=>{n&&(n.material||(n.material={}),n.material.color=new cn(e))})}async _getVisualVariableLegendElements(t,e){if(!("visualVariables"in t)||!t.visualVariables||t.type==="vector-field")return null;const n=t.visualVariables,i=[],s=[],o=[];for(const u of n)u.type==="color"?i.push(u):u.type==="size"?s.push(u):u.type==="opacity"&&o.push(u);const r=[...i,...s,...o];let a,l;if(i.length===0&&Hd(t)&&t.classBreakInfos&&t.classBreakInfos.length===1){const u=t.classBreakInfos[0];a=u&&u.symbol}if(i.length===0&&zd(t)&&(a=t.symbol),a)if(a.type.includes("3d")){const u=a.symbolLayers.getItemAt(0);u.type==="water"?q(u.color)&&(l=u.color):q(u.material)&&q(u.material.color)&&(l=u.material.color)}else a.url||(l=a.color);const c=this.effectList;return(await Promise.all(r.map(async u=>{if(!u.legendOptions||u.legendOptions.showLegend!==!1){const d=bS(t)?u.field:this._getRampTitle(u,e);let h=null;const f="getField"in e&&e.getField&&e.getField(u.field),m=f&&N0(f);if(u.type==="color"){const g=await xC(u,null,m);h={type:"color-ramp",title:d,infos:g,preview:Yc(g.map(y=>y.color),{effectList:c})},this._hasColorRamp||(this._hasColorRamp=!(h.infos==null||!h.infos.length))}else if(u.type==="size"&&u.target!=="outline")mv.test(u.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=u):(h=await this._getSizeLegendElement(d,u,t,m),this._hasSizeRamp||(this._hasSizeRamp=!(h.infos==null||!h.infos.length)));else if(u.type==="opacity"){const g=await xC(u,l,m);h={type:"opacity-ramp",title:d,infos:g,preview:Yc(g.map(y=>y.color),{effectList:c})},this._hasOpacityRamp||(this._hasOpacityRamp=!(h.infos==null||!h.infos.length))}return h&&h.infos?h:null}}))).filter(u=>!!u)}_getDomainName(t,e,n){if(t&&typeof t!="function"){const i="getField"in n&&n.getField&&n.getField(t),s=i&&"getFieldDomain"in n&&n.getFieldDomain?n.getFieldDomain(i.name):null;return s&&s.type==="coded-value"?s.getName(e):null}return null}_getClusterTitle(t){const e=this.layer,n=t.field;if("featureReduction"in e&&e.featureReduction&&e.featureReduction.type==="cluster"){const i=e.featureReduction,s="popupTemplate"in i&&i.popupTemplate,o=s&&s.fieldInfos;if(o){for(const r of o)if(r.fieldName===n)return n==="cluster_count"?r.label||{showCount:!0}:r.label}}return{showCount:!0}}_getRampTitle(t,e){let n=t.field,i=t.normalizationField,s=!1,o=!1,r=!1,a=null;n=typeof n=="function"?null:n,i=typeof i=="function"?null:i;const l=t.legendOptions&&t.legendOptions.title;if(l!=null)a=l;else if(t.valueExpressionTitle)a=t.valueExpressionTitle;else{if("renderer"in e&&e.renderer&&"authoringInfo"in e.renderer&&e.renderer.authoringInfo&&e.renderer.authoringInfo.visualVariables){const c=e.renderer.authoringInfo.visualVariables;for(let u=0;u<c.length;u++){const d=c[u];if(d.type==="color"){if(d.style==="ratio"){s=!0;break}if(d.style==="percent"){o=!0;break}if(d.style==="percent-of-total"){r=!0;break}}}}a={field:n&&this._getFieldAlias(n,e),normField:i&&this._getFieldAlias(i,e),ratio:s,ratioPercent:o,ratioPercentTotal:r}}return a}_getRendererTitle(t,e){const n=t;if(n.legendOptions&&n.legendOptions.title)return n.legendOptions.title;if(n.valueExpressionTitle)return n.valueExpressionTitle;let i=n.field,s=null,o=null;if(Hd(n)&&(s=n.normalizationField,o=n.normalizationType==="percent-of-total"),i=typeof i=="function"?null:i,s=typeof s=="function"?null:s,Sy(n)){const{field2:a,field3:l,fieldDelimiter:c}=n;let u=i&&this._getFieldAlias(i,e);return a&&(u=`<${u}>${c}<${this._getFieldAlias(a,e)}>`,l&&(u=`${u}${c}<${this._getFieldAlias(l,e)}>`)),u}let r=null;return(i||s)&&(r={field:i&&this._getFieldAlias(i,e),normField:s&&this._getFieldAlias(s,e),normByPct:o}),r}_getFieldAlias(t,e){const n="popupTemplate"in e&&e.popupTemplate,i=n&&n.fieldInfos;let s=null;i&&i.some(u=>t===u.fieldName&&(s=u,!0));let o=null;"getField"in e&&e.getField?o=e.getField(t):"fieldsIndex"in e&&e.fieldsIndex&&(o=e.fieldsIndex.get(t));let r=null;const a="featureReduction"in e&&e.featureReduction;a&&(!s&&"popupTemplate"in a&&a.popupTemplate&&a.popupTemplate.fieldInfos&&a.popupTemplate.fieldInfos.some(u=>{var d;return(t==null?void 0:t.toLowerCase())===((d=u.fieldName)==null?void 0:d.toLowerCase())&&(s=u,!0)}),"fields"in a&&a.fields&&(r=a.fields.find(u=>{var d;return((d=u.name)==null?void 0:d.toLowerCase())===(t==null?void 0:t.toLowerCase())})));const l=s||o||r;let c=null;return l&&(c=(s==null?void 0:s.label)||(o==null?void 0:o.alias)||(r==null?void 0:r.alias)||"name"in l&&l.name||"fieldName"in l&&l.fieldName),c}_isUnclassedRenderer(t){const e=t.visualVariables;let n=!1;return Hd(t)&&t.classBreakInfos&&t.classBreakInfos.length===1&&e&&(n=t.field?e.some(i=>!(!i||t.field!==i.field||(t.normalizationField||i.normalizationField)&&t.normalizationField!==i.normalizationField)):!!e.length),n}};v([b()],bi.prototype,"children",void 0),v([b({readOnly:!0})],bi.prototype,"effectList",null),v([b()],bi.prototype,"layerView",void 0),v([b()],bi.prototype,"layer",void 0),v([b()],bi.prototype,"legendElements",void 0),v([b({readOnly:!0})],bi.prototype,"opacity",null),v([b()],bi.prototype,"parent",void 0),v([b({readOnly:!0,dependsOn:[]})],bi.prototype,"ready",null),v([b()],bi.prototype,"hideLayersNotInCurrentView",void 0),v([b()],bi.prototype,"keepCacheOnDestroy",void 0),v([b()],bi.prototype,"respectLayerVisibility",void 0),v([b({readOnly:!0})],bi.prototype,"scale",null),v([b()],bi.prototype,"sublayerIds",void 0),v([b({readOnly:!0})],bi.prototype,"isScaleDriven",null),v([b()],bi.prototype,"title",void 0),v([b({readOnly:!0,dependsOn:["ready"],value:0})],bi.prototype,"version",null),v([b()],bi.prototype,"view",void 0),bi=v([Ae("esri.widgets.Legend.support.ActiveLayerInfo")],bi);const s5=bi,Hc={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},o5=Ht.ofType(s5),TMe=["esri.layers.BuildingSceneLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.SubtypeGroupLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer"],r5="view.basemapView.baseLayerViews",a5="view.groundView.layerViews",l5="view.basemapView.referenceLayerViews",IMe=[r5,a5,"view.layerViews",l5];let Po=class extends dt{constructor(e){super(e),this._handles=new si,this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new Ht,this.activeLayerInfos=new o5,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this._handles.add(ge(()=>this.view,()=>this._viewHandles(),gt),Hc.view),this._handles.add(pO(()=>this._refresh()))}destroy(){this._destroyViewActiveLayerInfos(),this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}_viewHandles(){this._handles.remove(Hc.state),this.view&&this._handles.add(ge(()=>this.state,()=>this._stateHandles(),gt),Hc.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this._handles.remove([Hc.allLayerViews,Hc.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this._handles.remove(e);const n=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],n&&n.parent&&n.parent.children.remove(n)}_watchPropertiesAndAllLayerViews(){const{allLayerViews:e}=this.view;e.length&&this._refresh(),this._handles.add(e.on("change",n=>this._allLayerViewsChangeHandle(n)),Hc.allLayerViews),this._handles.add(ge(()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible],()=>this._propertiesChangeHandle()),Hc.legendProperties)}_allLayerViewsChangeHandle(e){e.removed.forEach(n=>this._destroyViewActiveLayerInfo(n.uid)),this._refresh()}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(e){if(e.length<2)return;const n=[];e.forEach(s=>{if(!s.parent){const o=s.layer.parent,r=o&&"uid"in o&&this._layerViewByLayerId[o.uid],a=r&&this._activeLayerInfosByLayerViewId[r.uid];a&&e.includes(a)&&(n.push(s),s.parent=a,a.children.add(s),this._sortActiveLayerInfos(a.children))}}),e.removeMany(n);const i={};this.view.allLayerViews.forEach((s,o)=>i[s.layer.uid]=o),e.sort((s,o)=>{const r=i[s.layer.uid]||0;return(i[o.layer.uid]||0)-r})}_generateLayerViews(){const e=[];return IMe.filter(this._filterLayerViews,this).map(this.get,this).filter(n=>n!=null).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const n=!this.basemapLegendVisible&&(e===r5||e===l5),i=!this.groundLegendVisible&&e===a5;return!n&&!i}_collectLayerViews(e,n){const i=s=>(s&&s.forEach(o=>{n.push(o),i(o[e])}),n);return i}_filterLayerViewsByLayerInfos(e){const n=this.layerInfos;return!n||!n.length||n.some(i=>this._hasLayerInfo(i,e))}_hasLayerInfo(e,n){const i=this._isLayerUIDMatching(e.layer,n.layer.uid);return i&&(this._layerInfosByLayerViewId[n.uid]=e),i}_isLayerUIDMatching(e,n){return e&&(e.uid===n||this._hasLayerUID(e.layers,n))}_hasLayerUID(e,n){return e&&e.some(i=>this._isLayerUIDMatching(i,n))}_isLayerViewSupported(e){return!!TMe.includes(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this._handles.remove(e.uid),this._handles.add(ge(()=>{var n;return[e.legendEnabled,(n=e.layer)==null?void 0:n.legendEnabled]},()=>this._layerActiveHandle(e)),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this._handles.remove(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){return!this.respectLayerVisibility||e.legendEnabled&&e.get("layer.legendEnabled")}_buildActiveLayerInfo(e){var a;const n=e.layer,i=e.uid,s=this._layerInfosByLayerViewId[i];let o=this._activeLayerInfosByLayerViewId[i];if(!o){const l=s&&s.title!==void 0&&s.layer.uid===n.uid;o=new s5({layer:n,layerView:e,title:l?s.title:n.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:s&&s.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[i]=o}const r=n.parent&&"uid"in n.parent&&this._layerViewByLayerId[(a=n.parent)==null?void 0:a.uid];if(o.parent=this._activeLayerInfosByLayerViewId[r==null?void 0:r.uid],!this._handles.has(i)){const l=[ge(()=>n.title,c=>this._titleHandle(c,o)),ge(()=>[n.opacity,"renderer"in n&&n.renderer,"pointSymbol"in n&&n.pointSymbol,"lineSymbol"in n&&n.lineSymbol,"polygonSymbol"in n&&n.polygonSymbol],()=>this._constructLegendElements(o)),ji(()=>{var c;return((c=this.view)==null?void 0:c.stationary)===!0},()=>this._scaleHandle(o),gt),ge(()=>e._effectiveRenderer,()=>this._constructLegendElements(o)),ge(()=>"effect"in n&&n.effect,()=>this._constructLegendElements(o))];if(this.respectLayerVisibility){const c=ge(()=>e.legendEnabled,d=>this._legendEnabledHandle(d,o)),u=ge(()=>n.legendEnabled,d=>this._legendEnabledHandle(d,o));l.push(c,u)}this._handles.add(l,i)}o.isScaleDriven||this._constructLegendElements(o),this._addActiveLayerInfo(o)}_titleHandle(e,n){n.title=e,this._constructLegendElements(n)}_legendEnabledHandle(e,n){e?this._addActiveLayerInfo(n):this._removeActiveLayerInfo(n)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){var s;const{layerView:n,layer:i}=e;if(this._isLayerActive(n)&&!this.activeLayerInfos.includes(e)){const o=e.parent;if(o)o.children.includes(e)||o.children.push(e),this._sortActiveLayerInfos(o.children);else{const r=(s=this.layerInfos)==null?void 0:s.some(a=>a.layer.uid===i.uid);i.parent&&"uid"in i.parent&&!r?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const r=[];this._activeLayerInfosWithNoParent.forEach(a=>{const l=a.layer.parent,c=l&&"uid"in l&&this._layerViewByLayerId[l==null?void 0:l.uid],u=this._activeLayerInfosByLayerViewId[c==null?void 0:c.uid];u&&(r.push(a),a.parent=u)}),r.length&&(this._activeLayerInfosWithNoParent.removeMany(r),r.forEach(a=>this._addActiveLayerInfo(a)))}}}_removeActiveLayerInfo(e){const n=e.parent;n?n.children.remove(e):this.activeLayerInfos.remove(e)}_constructLegendElements(e){const n=e.layer;"featureCollections"in n&&n.featureCollections?e.buildLegendElementsForFeatureCollections(n.featureCollections):"featureReduction"in n&&n.featureReduction&&"renderer"in n.featureReduction&&(n.featureReduction.type==="binning"||n.featureReduction.type==="cluster")?e.buildLegendElementsForFeatureReduction(n.featureReduction):"renderer"in n&&n.renderer&&!("sublayers"in n)?e.buildLegendElementsForRenderer(n.renderer):"url"in n&&n.url?e.buildLegendElementsForTools():e.children.forEach(i=>this._constructLegendElements(i))}};v([b({type:o5})],Po.prototype,"activeLayerInfos",void 0),v([b()],Po.prototype,"basemapLegendVisible",void 0),v([b()],Po.prototype,"groundLegendVisible",void 0),v([b()],Po.prototype,"hideLayersNotInCurrentView",void 0),v([b()],Po.prototype,"keepCacheOnDestroy",void 0),v([b()],Po.prototype,"respectLayerVisibility",void 0),v([b()],Po.prototype,"layerInfos",void 0),v([b({readOnly:!0})],Po.prototype,"state",null),v([b()],Po.prototype,"view",void 0),Po=v([Ae("esri.widgets.Legend.LegendViewModel")],Po);const xMe=Po,MMe="http://www.w3.org/2000/svg",Tn={diamondContainer:"esri-relationship-ramp--diamond__container",diamondLeftCol:"esri-relationship-ramp--diamond__left-column",diamondRightCol:"esri-relationship-ramp--diamond__right-column",diamondMidCol:"esri-relationship-ramp--diamond__middle-column",diamondMidColLabel:"esri-relationship-ramp--diamond__middle-column--label",diamondMidColRamp:"esri-relationship-ramp--diamond__middle-column--ramp",squareTable:"esri-relationship-ramp--square__table",squareTableRow:"esri-relationship-ramp--square__table-row",squareTableCell:"esri-relationship-ramp--square__table-cell",squareTableLabel:"esri-relationship-ramp--square__table-label",squareTableLabelLeftBottom:"esri-relationship-ramp--square__table-label--left-bottom",squareTableLabelRightBottom:"esri-relationship-ramp--square__table-label--right-bottom",squareTableLabelLeftTop:"esri-relationship-ramp--square__table-label--left-top",squareTableLabelRightTop:"esri-relationship-ramp--square__table-label--right-top"};function c5(t,e,n,i){const{focus:s,labels:o}=t,r=!!s,a=$Me(t,e,n,i),l={justifyContent:"center"},c=yo();return r?M("div",{class:Tn.diamondContainer,styles:l},M("div",{class:Tn.diamondLeftCol},c?o.right:o.left),M("div",{class:Tn.diamondMidCol},M("div",{class:Tn.diamondMidColLabel},o.top),a,M("div",{class:Tn.diamondMidColLabel},o.bottom)),M("div",{class:Tn.diamondRightCol},c?o.left:o.right)):M("div",{class:Tn.squareTable},M("div",{class:Tn.squareTableRow},M("div",{class:Kd(Tn.squareTableCell,Tn.squareTableLabel,Tn.squareTableLabelRightBottom)},c?o.top:o.left),M("div",{class:Tn.squareTableCell}),M("div",{class:Kd(Tn.squareTableCell,Tn.squareTableLabel,Tn.squareTableLabelLeftBottom)},c?o.left:o.top)),M("div",{class:Tn.squareTableRow},M("div",{class:Tn.squareTableCell}),a,M("div",{class:Tn.squareTableCell})),M("div",{class:Tn.squareTableRow},M("div",{class:Kd(Tn.squareTableCell,Tn.squareTableLabel,Tn.squareTableLabelRightTop)},c?o.right:o.bottom),M("div",{class:Tn.squareTableCell}),M("div",{class:Kd(Tn.squareTableCell,Tn.squareTableLabel,Tn.squareTableLabelLeftTop)},c?o.bottom:o.right)))}function lL(t,e,n){const i=`${n}_arrowStart`,s=`${n}_arrowEnd`,o=t==="left",r={markerStart:null,markerEnd:null};switch(e){case"HL":o?r.markerStart=`url(#${s})`:r.markerEnd=`url(#${i})`;break;case"LL":r.markerStart=`url(#${s})`;break;case"LH":o?r.markerEnd=`url(#${i})`:r.markerStart=`url(#${s})`;break;default:r.markerEnd=`url(#${i})`}return r}function $Me(t,e,n,i,s=60){const{focus:o,numClasses:r,colors:a,rotation:l}=t,c=!!o,u=Math.sqrt(s**2+s**2)+(c?0:5),d=[],h=[],f=[],m=(s||75)/r;for(let O=0;O<r;O++){const B=O*m;for(let V=0;V<r;V++){const P=V*m,z=oT(a[O][V]),U=rT(null),W={type:"rect",x:P,y:B,width:m,height:m};d.push(K3(z)),h.push(sT(W,z.fill,U,null)),f.push(Y3(W))}}const g=10,y=15,_=15,C=10;let w=null;c||(w="margin: -15px -15px -18px -15px");const S=lL("left",o,e),E=lL("right",o,e),k=Z3(f),A=LC(k,u,u,0,!1,l,!1),$=LC(k,u,u,0,!1,c?-45:null,!1),L={filter:Jf(i),opacity:n==null?null:`${n}`};return M("div",{styles:L,class:c?Tn.diamondMidColRamp:Tn.squareTableCell},M("svg",{xmlns:MMe,width:u,height:u,style:w},M("defs",null,M("marker",{id:`${e}_arrowStart`,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},M("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),M("marker",{id:`${e}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},M("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),d),M("g",{transform:A},h),M("g",{transform:$},M("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":S.markerStart,"marker-end":S.markerEnd,x1:-g,y1:s-y,x2:-g,y2:y}),M("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":E.markerStart,"marker-end":E.markerEnd,x1:_,y1:s+C,x2:s-_,y2:s+C}))))}const AMe=Py(),u5=10,zT=20,H_=10,HT=20,UT={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function LMe(t="vertical"){const e="stroke:rgb(200, 200, 200);stroke-width:1";return t==="vertical"?M("svg",{height:"4",width:"10"},M("line",{x1:"0",y1:"2",x2:"10",y2:"2",style:e})):M("svg",{height:"10",width:"10"},M("line",{x1:"5",y1:"0",x2:"5",y2:"10",style:e}))}function OMe(t,e="vertical"){const n=document.createElement("div");return n.style.height=`${zT}px`,n.className=UT.univariateAboveAndBelowSymbol,t!=null&&(n.style.opacity=t.toString()),AMe.append(n,LMe.bind(null,e)),n}function d5(t,e,n="vertical",i){t.infos.forEach((s,o)=>{if(i&&o===2)s.preview=OMe(e,n);else{const r=is(s.size)+(n==="horizontal"?HT:H_),a=s.preview.tagName.toLowerCase()==="div",l=a?s.preview:document.createElement("div");l.className=UT.univariateAboveAndBelowSymbol,n==="horizontal"?l.style.width=`${r}px`:l.style.height=`${r}px`,a||l.appendChild(s.preview),s.preview=l}})}function _b(t,e="classic"){const n=t.infos;return e==="classic"?(is(n[0].size)+H_)/2:(is(n[0].size)-is(n[n.length-1].size))/2}function kp(t,e){if(!t)return null;const n=t.infos.map(s=>s.color),i=Yc(e.type==="full"?n:e.type==="above"?n.slice(0,3):n.slice(2,5),{width:e.width,height:e.height,align:e.rampAlignment,effectList:e.effectList});return i.className=UT.colorRamp,e.opacity!=null&&(i.style.opacity=e.opacity.toString()),i}function _S(t,e,n,i="vertical"){let s=0;const o=t.infos,r=Math.floor(o.length/2),a=e==="full"||e==="above"?0:r,l=e==="full"||e==="below"?o.length-1:r;for(let c=a;c<=l;c++)n&&c===r?s+=i==="horizontal"?u5:zT:s+=is(o[c].size)+(i==="horizontal"?HT:H_);return Math.round(s)}function Tp(t,e,n,i="vertical"){const s=_S(t,e,n,i),o=t.infos,r=Math.floor(o.length/2),a=e==="full"||e==="above"?0:r,l=e==="full"||e==="below"?o.length-1:r,c=e==="full"?o[a].size+o[l].size:e==="above"?o[a].size:o[l].size,u=n?i==="vertical"?zT:u5:0,d=i==="vertical"?H_*(e==="full"?2:1):HT*(e==="full"?2:1);return Math.round(s-(is(c)/2+u/2+d/2))}function p5(t,e,n="vertical"){const i=t.infos;let s=i.find(({type:r})=>r==="size-ramp"),o=i.find(({type:r})=>r==="color-ramp");return s&&(s={...s},s.infos=[...s.infos],d5(s,e,n,!0)),o&&(o={...o},o.infos=[...o.infos]),n==="horizontal"&&(s==null||s.infos.reverse(),o==null||o.infos.reverse()),{sizeRampElement:s,colorRampElement:o}}function h5(t,e="vertical"){const n=t.infos;let i=n.find(({type:o})=>o==="size-ramp"),s=n.find(({type:o})=>o==="color-ramp");return i&&(i={...i},i.infos=[...i.infos],d5(i,null,e,!1)),s&&(s={...s},s.infos=[...s.infos]),e==="horizontal"&&(i==null||i.infos.reverse(),s==null||s.infos.reverse()),{sizeRampElement:i,colorRampElement:s}}function PMe(t,e){return e}function Mi(t){const e=this;t.appendChild(e)}function Ip(t,e,n){if(!e)return;if(typeof e=="string"||typeof e=="number")return e;if("value"in e||"unit"in e)return Si(t.dotValue,e);if("colorName"in e||"bandName"in e)return t[e.colorName]+": "+(t[e.bandName]||e.bandName);if("showCount"in e)return e.showCount?t.clusterCountTitle:null;let i=null;return PMe(e,n)?i=e.ratioPercentTotal?"showRatioPercentTotal":e.ratioPercent?"showRatioPercent":e.ratio?"showRatio":e.normField?"showNormField":e.field?"showField":null:f5(e,n)&&(i=e.normField?"showNormField":e.normByPct?"showNormPct":e.field?"showField":null),i?Si(i==="showField"?"{field}":t[i],{field:e.field,normField:e.normField}):null}function f5(t,e){return!e}function m5(t,e){return!!(e&&e==="Stretched"&&t.version>=10.3&&t.declaredClass==="esri.layers.ImageryLayer")}const _t={activated:"esri-legend--card__carousel-indicator--activated",base:"esri-legend--card",stacked:"esri-legend--stacked",carouselTitle:"esri-legend--card__carousel-title",indicator:"esri-legend--card__carousel-indicator",intervalSeparator:"esri-legend--card__interval-separator",imageryLayerStretchedImage:"esri-legend--card__imagery-layer-image--stretched",imageLabel:"esri-legend--card__image-label",layerCaption:"esri-legend--card__layer-caption",labelElement:"esri-legend--card__label-element",layerRow:"esri-legend--card__layer-row",labelCell:"esri-legend--card__label-cell",message:"esri-legend--card__message",rampLabel:"esri-legend--card__ramp-label",section:"esri-legend--card__section",relationshipSection:"esri-legend--card__relationship-section",serviceCaptionText:"esri-legend--card__service-caption-text",serviceContent:"esri-legend--card__service-content",service:"esri-legend--card__service",groupLayer:"esri-legend--card__group-layer",groupLayerChild:"esri-legend--card__group-layer-child",symbol:"esri-legend--card__symbol",sizeRampRow:"esri-legend--card__size-ramp-row",symbolRow:"esri-legend--card__symbol-row",symbolCell:"esri-legend--card__symbol-cell",indicatorContainer:"esri-legend--card__carousel-indicator-container",intervalSeparatorsContainer:"esri-legend--card__interval-separators-container",relationshipLabelContainer:"esri-legend--card__relationship-label-container",labelContainer:"esri-legend--card__label-container",serviceCaptionContainer:"esri-legend--card__service-caption-container",symbolContainer:"esri-legend--card__symbol-container",sizeRampContainer:"esri-legend--card__size-ramp-container",sizeRampPreview:"esri-legend--card__size-ramp-preview",pieChartRampPreview:"esri-legend--card__pie-chart-ramp-preview",rampContainer:"esri-legend__ramps",sizeRampHorizontal:"esri-legend__size-ramp--horizontal",rampLabelsContainer:"esri-legend__ramp-labels",layerInfo:"esri-legend__layer-cell esri-legend__layer-cell--info",univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card",hidden:"esri-hidden"},RMe=25,VMe=25,FMe=768,DMe=100;var zf;(function(t){t.Auto="auto",t.Stack="stack",t.SideBySide="side-by-side"})(zf||(zf={}));const NMe="#ddd",wd=window.devicePixelRatio;function BMe(t){if(t){if(t.type.includes("3d")){const e=t.symbolLayers&&t.symbolLayers.length;if(!e)return;const n=t.symbolLayers.getItemAt(e-1),i=n.resource&&n.resource.primitive;return i==="circle"||i==="cross"||i==="kite"||i==="sphere"||i==="cube"||i==="diamond"}{const e=t.style;return e==="circle"||e==="diamond"||e==="cross"}}}function zMe(t){if(t){if(t.type.includes("3d")){const e=t.symbolLayers&&t.symbolLayers.length;if(!e)return;const n=t.symbolLayers.getItemAt(e-1).get("resource.primitive");return n==="triangle"||n==="cone"||n==="tetrahedron"}return t.style==="triangle"}}let tr=class extends kn{constructor(e,n){super(e,n),this._handles=new si,this._hasIndicators=!1,this._selectedSectionName=null,this._sectionNames=[],this._sectionMap=new Map,this.activeLayerInfos=null,this.headingLevel=3,this.layout=zf.Stack,this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}initialize(){this.addHandles(ge(()=>this.activeLayerInfos,e=>{this._handles.removeAll(),this._watchForSectionChanges(e)}))}destroy(){this._handles.destroy(),this._handles=null}render(){this._hasIndicators=this.layout===zf.Auto&&this.view.container.clientWidth<=FMe||this.layout===zf.Stack;const e=this.activeLayerInfos,n=e&&e.toArray().map(l=>this._renderLegendForLayer(l)).filter(l=>!!l);this._hasIndicators?this._selectedSectionName&&this._sectionNames.includes(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const i=this._sectionNames.length,s=this._sectionNames.map((l,c)=>{const u=Si(this.messagesCommon.pagination.pageText,{index:c+1,total:i});return M("div",{key:l,role:"tab",id:l,"aria-label":u,"aria-controls":`${l}-panel`,"aria-selected":(this._selectedSectionName===l).toString(),tabIndex:this._selectedSectionName===l?0:-1,title:u,onclick:this._selectSection,onkeydown:this._focusSection,bind:this,class:this.classes(_t.indicator,{[_t.activated]:this._selectedSectionName===l}),"data-section-name":l})}),o=this._hasIndicators&&i>1?M("div",{class:_t.indicatorContainer,key:"carousel-navigation",role:"tablist"},s):null,r=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):n&&n.length?n:null,a={[_t.stacked]:this._hasIndicators};return M("div",{class:this.classes(_t.base,a)},r||M("div",{class:_t.message},this.messages.noLegend),o)}_selectSection(e){const n=e.target.getAttribute("data-section-name");n&&(this._selectedSectionName=n)}_focusSection(e){switch(e.key){case"ArrowLeft":case"ArrowRight":this._switchSectionOnArrowPress(e);break;case"Enter":case" ":this._selectSection(e)}}_switchSectionOnArrowPress(e){const n=e.key,i=n==="ArrowLeft"?-1:1,s=e.target.getAttribute("data-section-name"),o=this._sectionNames.indexOf(s),r=this._sectionNames;let a=null;o!==-1&&(r[o+i]?a=document.getElementById(r[o+i]):n==="ArrowLeft"?a=document.getElementById(r[r.length-1]):n==="ArrowRight"&&(a=document.getElementById(r[0])),a&&a.focus())}_watchForSectionChanges(e){if(this._generateSectionNames(),e){e.forEach(i=>{const s=`activeLayerInfo-${i.layer.uid}-version-change`;this._handles.remove(s),this._watchForSectionChanges(i.children),this._handles.add(ge(()=>i.version,()=>this._generateSectionNames()),s)});const n="activeLayerInfos-collection-change";this._handles.remove(n),this._handles.add(e.on("change",()=>this._watchForSectionChanges(e)),n)}}_generateSectionNames(){this._sectionNames.length=0,this._selectedSectionName=null,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)}_getSectionName(e,n,i){return`${this.id}${e.uid}-type-${n.type}-${i}`}_generateSectionNamesForActiveLayerInfo(e){e.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),e.legendElements&&e.legendElements.forEach((n,i)=>{this._sectionNames.push(this._getSectionName(e.layer,n,i))})}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const n=e.children.map(i=>this._renderLegendForLayer(i)).toArray();return M("div",{key:e.layer.uid,class:this.classes(_t.service,_t.groupLayer)},M("div",{class:_t.serviceCaptionContainer},e.title),n)}{const n=e.legendElements;if(n&&!n.length)return null;const i=n.some(r=>r.type==="relationship-ramp"),s=n.map((r,a)=>this._renderLegendForElement(r,e,a,i)).filter(r=>!!r);if(!s.length)return null;const o={[_t.groupLayerChild]:!!e.parent};return M("div",{key:e.layer.uid,class:this.classes(_t.service,o)},M("div",{class:_t.serviceCaptionContainer},M("div",{class:_t.serviceCaptionText},e.title)),M("div",{class:_t.serviceContent},s))}}_renderLegendForElement(e,n,i,s=!1,o=!1){const r=e.type==="color-ramp",a=e.type==="opacity-ramp",l=e.type==="size-ramp",c=n.layer;let u=null;if(typeof e.title=="string")u=e.title;else if(e.title){const y=e.title,_=Ip(this.messages,y,r||a);u=y.title?`${y.title} (${_})`:_}const d=this._getSectionName(c,e,i),h=this._hasIndicators&&!o?M("div",null,M(Is,{level:this.headingLevel,class:_t.carouselTitle},n.title),M(Is,{level:vu(this.headingLevel),class:_t.layerCaption},u)):u?M(Is,{level:this.headingLevel,class:_t.layerCaption},u):null,f=n.effectList;let m=null;if(e.type==="symbol-table"){const y=e.infos.map((_,C)=>this._renderLegendForElementInfo(_,n,e.legendType,C)).filter(_=>!!_);if(y.length){const _=y[0].properties.classes&&y[0].properties.classes[_t.symbolRow],C={[_t.labelContainer]:!_&&!s,[_t.relationshipLabelContainer]:s};m=M("div",{class:this.classes(C)},y)}}else e.type==="color-ramp"||e.type==="opacity-ramp"||e.type==="heatmap-ramp"?m=this._renderLegendForRamp(e,c.opacity,f):l?m=this._renderSizeRamp(e,c.opacity):e.type==="pie-chart-ramp"?m=this._renderPieChartRamp(e):e.type==="relationship-ramp"?m=c5(e,this.id,c.opacity,f):e.type==="univariate-above-and-below-ramp"?m=this._renderUnivariateAboveAndBelowRamp(e,c.opacity,f):e.type==="univariate-color-size-ramp"&&(m=this._renderUnivariateColorSizeRamp(e,c.opacity,f));if(!m)return null;const g=M("div",{key:d,class:_t.section,id:`${d}-panel`,role:"tabpanel","aria-labelledby":d,tabIndex:0},[h,m]);return o||this._sectionMap.set(d,g),g}_renderPieChartRamp(e){return M("div",{class:_t.pieChartRampPreview,bind:e.preview,afterCreate:Mi})}_renderUnivariateAboveAndBelowRamp(e,n,i){const{sizeRampElement:s,colorRampElement:o}=p5(e,n,"horizontal");if(!s)return null;const r=_S(s,"full",!0,"horizontal"),a=Tp(s,"above",!0,"horizontal"),l=Tp(s,"below",!0,"horizontal"),c=12,u=kp(o,{width:a,height:c,rampAlignment:"horizontal",opacity:n,type:"above",effectList:i}),d=kp(o,{width:l,height:c,rampAlignment:"horizontal",opacity:n,type:"below",effectList:i}),h=_b(s,"card"),f=s.infos.map(S=>S.label),m=f.length-1,g=f.map((S,E)=>E===0||E===m?M("div",{key:E},S):null),y={display:"flex",flexDirection:"column"},_={display:"flex",flexDirection:"row"},C={marginTop:"3px",display:"flex"};yo(this.container)?C.marginRight=`${h}px`:C.marginLeft=`${h}px`;const w={width:`${r}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return M("div",{class:_t.layerRow,key:"size-ramp-preview",styles:y},M("div",{class:this.classes(_t.symbolContainer,_t.sizeRampHorizontal),styles:_},s.infos.map((S,E)=>M("div",{key:E,class:_t.symbol,bind:S.preview,afterCreate:Mi}))),u?M("div",{class:_t.univariateAboveAndBelowColorRamp,styles:C,key:"color-ramp-preview"},M("div",{bind:u,afterCreate:Mi}),M("div",{bind:d,afterCreate:Mi})):null,M("div",{class:_t.layerInfo},M("div",{class:_t.rampLabelsContainer,styles:w},g)))}_renderUnivariateColorSizeRamp(e,n,i){const{sizeRampElement:s,colorRampElement:o}=h5(e,"horizontal");if(!s)return null;const r=_S(s,"full",!1,"horizontal"),a=Tp(s,"full",!1,"horizontal"),l=kp(o,{width:a,height:12,rampAlignment:"horizontal",opacity:n,type:"full",effectList:i}),c=_b(s,"card"),u=s.infos.length-1,d=s.infos.map((y,_)=>_===0||_===u?M("div",{key:_},y.label):null),h={display:"flex",flexDirection:"column"},f={display:"flex",flexDirection:"row"},m={marginTop:"3px",display:"flex"};yo(this.container)?m.marginRight=`${c}px`:m.marginLeft=`${c}px`;const g={width:`${r}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return M("div",{class:_t.layerRow,key:"size-ramp-preview",styles:h},M("div",{class:this.classes(_t.symbolContainer,_t.sizeRampHorizontal),styles:f},s.infos.map((y,_)=>M("div",{key:_,class:_t.symbol,bind:y.preview,afterCreate:Mi}))),M("div",{class:_t.univariateAboveAndBelowColorRamp,styles:m,key:"color-ramp-preview"},M("div",{bind:l,afterCreate:Mi})),M("div",{class:_t.layerInfo},M("div",{class:_t.rampLabelsContainer,styles:g},d)))}_renderLegendForElementInfo(e,n,i,s){var a;const o=n.layer;if(e.type)return this._renderLegendForElement(e,n,s,!1,!0);const r=m5(o,i);if(e.preview){if(!e.symbol||!e.symbol.type.includes("simple-fill")){if(!e.label)return M("div",{key:s,bind:e.preview,afterCreate:Mi});const E={[_t.symbolCell]:this._hasIndicators};return M("div",{key:s,class:this.classes(_t.layerRow,{[_t.symbolRow]:this._hasIndicators})},M("div",{class:this.classes(E),bind:e.preview,afterCreate:Mi}),M("div",{class:this.classes(_t.imageLabel,{[_t.labelCell]:this._hasIndicators})},Ip(this.messages,e.label,!1)||""))}let l=255,c=255,u=255,d=0,h=255,f=255,m=255,g=0;const y=e.symbol.color&&e.symbol.color.a,_=e.symbol.outline&&e.symbol.outline.color&&e.symbol.outline.color.a;y&&(l=e.symbol.color.r,c=e.symbol.color.g,u=e.symbol.color.b,d=e.symbol.color.a*o.opacity),_&&(h=e.symbol.outline.color.r,f=e.symbol.outline.color.g,m=e.symbol.outline.color.b,g=e.symbol.outline.color.a*o.opacity);const C=((a=e.symbol.color)==null?void 0:a.isBright)??!0,w=C?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)",S={background:y?`rgba(${l}, ${c}, ${u}, ${d})`:"none",color:C?"black":"white",textShadow:`-1px -1px 0 ${w},
                                              1px -1px 0 ${w},
                                              -1px 1px 0 ${w},
                                              1px 1px 0 ${w}`,border:_?`1px solid rgba(${h}, ${f}, ${m}, ${g})`:"none",filter:Jf(n.effectList)};return M("div",{key:s,class:_t.layerRow},M("div",{class:_t.labelElement,styles:S}," ",e.label," "))}if(e.src){const l=this._renderImage(e,o,r);return M("div",{key:s,class:_t.layerRow},l,M("div",{class:_t.imageLabel},e.label||""))}}_renderImage(e,n,i){const{label:s,src:o,opacity:r}=e,a={[_t.imageryLayerStretchedImage]:i,[_t.symbol]:!i},l={opacity:`${r??n.opacity}`};return M("img",{alt:Ip(this.messages,s,!1),src:o,border:0,width:e.width,height:e.height,class:this.classes(a),styles:l})}_renderSizeRampLines(e){const n=e.infos,i=n[0],s=n[n.length-1],o=i.symbol,r=this._hasIndicators,a=is(i.size+i.outlineSize)*wd,l=is(s.size+s.outlineSize)*wd,c=r?a:a+50*wd,u=r?a/2+50*wd:a,d=zMe(o),h=BMe(o),f=document.createElement("canvas");f.width=c,f.height=u,f.style.width=f.width/wd+"px",f.style.height=f.height/wd+"px";const m=f.getContext("2d");if(r){m.beginPath();const g=0,y=0,_=c/2-l/2,C=u;m.moveTo(g,y),m.lineTo(_,C);const w=c,S=0,E=c/2+l/2,k=u;m.moveTo(w,S),m.lineTo(E,k)}else{m.beginPath();const g=0,y=u/2-l/2,_=c,C=0;m.moveTo(g,y),m.lineTo(_,C);const w=0,S=u/2+l/2,E=c,k=u;m.moveTo(w,S),m.lineTo(E,k)}return m.strokeStyle=NMe,m.stroke(),M("div",{bind:f,afterCreate:Mi,styles:r?{display:"flex",marginTop:`-${d?0:h?a/2:0}px`,marginBottom:`-${d?l:h?l/2:0}px`}:{display:"flex",marginRight:`-${d?0:h?a/2:0}px`,marginLeft:`-${d?0:h?l/2:0}px`}})}_renderSizeRamp(e,n){const i=e.infos,s=i[0].label,o=i[i.length-1].label;let r=i[0].preview,a=i[i.length-1].preview;const l=this._hasIndicators,c={"flex-direction":l?"column":"row-reverse"};r&&(r=r.cloneNode(!0),r.style.display="flex"),a&&(a=a.cloneNode(!0),a.style.display="flex");const u={opacity:n!=null?`${n}`:""};return M("div",{class:this.classes(_t.layerRow,{[_t.sizeRampRow]:l})},M("div",{class:_t.rampLabel},l?s:o),M("div",{class:_t.sizeRampContainer,styles:c},M("div",{bind:r,afterCreate:Mi,class:_t.sizeRampPreview,styles:u}),this._renderSizeRampLines(e),M("div",{bind:a,afterCreate:Mi,class:_t.sizeRampContainer,styles:u})),M("div",{class:_t.rampLabel},l?o:s))}_renderLegendForRamp(e,n,i){const s=e.infos,o=e.type==="heatmap-ramp",r=s.length-1,a=VMe,l=r>2&&!o?RMe*r:DMe,c=l+20,u=10,d=s.slice(0).reverse();d.forEach((k,A)=>{k.offset=o?k.ratio:A/r});const h=d.length-1,f=d.length%2!=0&&d[d.length/2|0],m=f&&M("div",{class:_t.intervalSeparatorsContainer},M("div",{class:_t.intervalSeparator},"|"),M("div",{class:_t.rampLabel},f.label)),g=s[s.length-1].label,y=s[0].label,_=[[{shape:{type:"path",path:`M0 ${a/2} L${u} 0 L${u} ${a} Z`},fill:d[0].color,stroke:{width:0}},{shape:{type:"rect",x:u,y:0,width:l,height:a},fill:{type:"linear",x1:u,y1:0,x2:l+u,y2:0,colors:d},stroke:{width:0}},{shape:{type:"path",path:`M${l+u} 0 L${c} ${a/2} L${l+u} ${a} Z`},fill:d[h].color,stroke:{width:0}}]],C=X3(_,c,a),{messages:w}=this,S={filter:Jf(i),opacity:n==null?null:`${n}`},E={justifyContent:"center"};return M("div",{class:_t.layerRow,styles:E},M("div",{class:_t.rampLabel},o?w[g]:g),M("div",{class:_t.symbolContainer},M("div",{styles:S},C),m),M("div",{class:_t.rampLabel},o?w[y]:y))}};v([b()],tr.prototype,"activeLayerInfos",void 0),v([b()],tr.prototype,"headingLevel",void 0),v([b()],tr.prototype,"layout",void 0),v([b(),rn("esri/widgets/Legend/t9n/Legend")],tr.prototype,"messages",void 0),v([b(),rn("esri/t9n/common")],tr.prototype,"messagesCommon",void 0),v([b({readOnly:!0})],tr.prototype,"type",void 0),v([b()],tr.prototype,"view",void 0),v([Sn()],tr.prototype,"_selectSection",null),tr=v([Ae("esri.widgets.Legend.styles.Card")],tr);const w0=tr,Lt={service:"esri-legend__service",label:"esri-legend__service-label",layer:"esri-legend__layer",groupLayer:"esri-legend__group-layer",groupLayerChild:"esri-legend__group-layer-child",layerTable:"esri-legend__layer-table",layerTableSizeRamp:"esri-legend__layer-table--size-ramp",layerChildTable:"esri-legend__layer-child-table",layerCaption:"esri-legend__layer-caption",layerBody:"esri-legend__layer-body",layerRow:"esri-legend__layer-row",layerCell:"esri-legend__layer-cell",layerInfo:"esri-legend__layer-cell esri-legend__layer-cell--info",imageryLayerStretchedImage:"esri-legend__imagery-layer-image--stretched",imageryLayerCellStretched:"esri-legend__imagery-layer-cell--stretched",imageryLayerInfoStretched:"esri-legend__imagery-layer-info--stretched",symbolContainer:"esri-legend__layer-cell esri-legend__layer-cell--symbols",symbol:"esri-legend__symbol",rampContainer:"esri-legend__ramps",sizeRamp:"esri-legend__size-ramp",colorRamp:"esri-legend__color-ramp",opacityRamp:"esri-legend__opacity-ramp",borderlessRamp:"esri-legend__borderless-ramp",rampTick:"esri-legend__ramp-tick",rampFirstTick:"esri-legend__ramp-tick-first",rampLastTick:"esri-legend__ramp-tick-last",rampLabelsContainer:"esri-legend__ramp-labels",rampLabel:"esri-legend__ramp-label",univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label",message:"esri-legend__message",header:"esri-widget__heading",hidden:"esri-hidden"},HMe="esri-legend__",UMe=24,cL={display:"flex",alignItems:"flex-start"},C0={marginLeft:"3px"},Cd={display:"table-cell",verticalAlign:"middle"};let cu=class extends kn{constructor(e,n){super(e,n),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const e=this.activeLayerInfos,n=e&&e.toArray().map(i=>this._renderLegendForLayer(i)).filter(i=>!!i);return M("div",null,n&&n.length?n:M("div",{class:Lt.message},this.messages.noLegend))}_renderLegendForLayer(e){if(!e.ready)return null;const n=!!e.children.length,i=`${HMe}${e.layer.uid}-version-${e.version}`,s=e.title?Is({level:this.headingLevel,class:this.classes(Lt.header,Lt.label)},e.title):null;if(n){const o=e.children.map(r=>this._renderLegendForLayer(r)).toArray();return M("div",{key:i,class:this.classes(Lt.service,Lt.groupLayer)},s,o)}{const o=e.legendElements;if(o&&!o.length)return null;const r=o.map(l=>this._renderLegendForElement(l,e.layer,e.effectList)).filter(l=>!!l);if(!r.length)return null;const a={[Lt.groupLayerChild]:!!e.parent};return M("div",{key:i,class:this.classes(Lt.service,a),tabIndex:0},s,M("div",{class:Lt.layer},r))}}_renderLegendForElement(e,n,i,s){const o=e.type==="color-ramp",r=e.type==="opacity-ramp",a=e.type==="size-ramp";let l=null;if(e.type==="symbol-table"||a){const m=e.infos.map(g=>this._renderLegendForElementInfo(g,n,i,a,e.legendType)).filter(g=>!!g);m.length&&(l=M("div",{class:Lt.layerBody},m))}else e.type==="color-ramp"||e.type==="opacity-ramp"||e.type==="heatmap-ramp"||e.type==="stretch-ramp"?l=this._renderLegendForRamp(e,n.opacity):e.type==="relationship-ramp"?l=c5(e,this.id,n.opacity,i):e.type==="pie-chart-ramp"?l=this._renderPieChartRamp(e):e.type==="univariate-above-and-below-ramp"?l=this._renderUnivariateAboveAndBelowRamp(e,n.opacity,i):e.type==="univariate-color-size-ramp"&&(l=this._renderUnivariateColorSizeRamp(e,n.opacity,i));if(!l)return null;const c=e.title;let u=null;if(typeof c=="string")u=c;else if(c){const m=Ip(this.messages,c,o||r);u=f5(c,o||r)&&c.title?`${c.title} (${m})`:m}const d=s?Lt.layerChildTable:Lt.layerTable,h=u?M("div",{class:Lt.layerCaption},u):null,f={[Lt.layerTableSizeRamp]:a||!s};return M("div",{class:this.classes(d,f)},h,l)}_renderPieChartRamp(e){return M("div",{bind:e.preview,afterCreate:Mi})}_renderUnivariateAboveAndBelowRamp(e,n,i){const{sizeRampElement:s,colorRampElement:o}=p5(e,n);if(!s)return null;const r=Tp(s,"above",!0),a=Tp(s,"below",!0),l=12,c=kp(o,{width:l,height:r,rampAlignment:"vertical",opacity:n,type:"above",effectList:i}),u=kp(o,{width:l,height:a,rampAlignment:"vertical",opacity:n,type:"below",effectList:i}),d=_b(s),h=s.infos.map(E=>E.label),f=h.map((E,k)=>k===0?M("div",{key:k,class:E?c?Lt.univariateAboveAndBelowLabel:Lt.rampLabel:null},E):k===2?M("div",null):null),m=h.length-1,g=Math.floor(h.length/2),y=h.map((E,k)=>k===g||k===m?M("div",{key:k,class:E?c?Lt.univariateAboveAndBelowLabel:Lt.rampLabel:null},E):null),_={display:"table-cell",verticalAlign:"middle"},C={marginTop:`${d}px`},w={height:`${r}px`},S={height:`${a}px`};return M("div",{key:"univariate-above-and-below-ramp-preview",styles:cL},M("div",{class:Lt.layerBody},s.infos.map((E,k)=>M("div",{class:this.classes(Lt.layerRow,Lt.sizeRamp)},M("div",{class:Lt.symbol,styles:_,bind:E.preview,afterCreate:Mi}),c||k%2!=0?null:M("div",{class:Lt.layerInfo},h[k])))),c?M("div",{styles:C,key:"color-ramp-preview"},M("div",{styles:C0},M("div",{styles:Cd},M("div",{class:Lt.rampContainer,bind:c,afterCreate:Mi})),M("div",{styles:Cd},M("div",{class:Lt.rampLabelsContainer,styles:w},f))),M("div",{styles:C0},M("div",{styles:Cd},M("div",{class:Lt.rampContainer,bind:u,afterCreate:Mi})),M("div",{styles:Cd},M("div",{class:Lt.rampLabelsContainer,styles:S},y)))):null)}_renderUnivariateColorSizeRamp(e,n,i){const{sizeRampElement:s,colorRampElement:o}=h5(e);if(!s)return null;const r=_b(s),a=12,l=Tp(s,"full",!1),c=kp(o,{width:a,height:l,rampAlignment:"vertical",opacity:n,type:"full",effectList:i}),u=s.infos.length-1,d=s.infos.map((g,y)=>y===0||y===u?M("div",{key:y,class:g.label?o?Lt.univariateAboveAndBelowLabel:Lt.rampLabel:null},g.label):null),h={display:"table-cell",verticalAlign:"middle"},f={marginTop:`${r}px`},m={height:`${l}px`};return M("div",{key:"univariate-above-and-below-ramp-preview",styles:cL},M("div",{class:Lt.layerBody},s.infos.map(g=>M("div",{class:this.classes(Lt.layerRow,Lt.sizeRamp)},M("div",{class:Lt.symbol,styles:h,bind:g.preview,afterCreate:Mi})))),M("div",{styles:f,key:"color-ramp-preview"},M("div",{styles:C0},M("div",{styles:Cd},M("div",{class:Lt.rampContainer,bind:c,afterCreate:Mi})),M("div",{styles:Cd},M("div",{class:Lt.rampLabelsContainer,styles:m},d)))))}_renderLegendForRamp(e,n){const i=e.infos,s=e.type==="opacity-ramp",o=e.type==="heatmap-ramp",r=e.type==="stretch-ramp",a=e.preview,l=s?Lt.opacityRamp:"";a.className=`${Lt.colorRamp} ${l}`,n!=null&&(a.style.opacity=n.toString());const c=i.map(h=>M("div",{class:h.label?Lt.rampLabel:null},o?this.messages[h.label]||h.label:r?this._getStretchStopLabel(h):h.label)),u={width:`${UMe}px`},d={height:a.style.height};return M("div",{class:Lt.layerRow},M("div",{class:Lt.symbolContainer,styles:u},M("div",{class:Lt.rampContainer,bind:a,afterCreate:Mi})),M("div",{class:Lt.layerInfo},M("div",{class:Lt.rampLabelsContainer,styles:d},c)))}_getStretchStopLabel(e){return e.label?this.messages[e.label]+": "+(typeof e.value=="string"?e.value:rl(e.value,{style:"decimal",notation:e.value.toString().includes("e")?"scientific":"standard"})):""}_renderLegendForElementInfo(e,n,i,s,o){if(e.type)return this._renderLegendForElement(e,n,i,!0);let r=null;const a=m5(n,o);if(e.preview?r=M("div",{class:Lt.symbol,bind:e.preview,afterCreate:Mi}):e.src&&(r=this._renderImage(e,n,a)),!r)return null;const l={[Lt.imageryLayerInfoStretched]:a},c={[Lt.imageryLayerInfoStretched]:a,[Lt.sizeRamp]:!a&&s};return M("div",{class:Lt.layerRow},M("div",{class:this.classes(Lt.symbolContainer,c)},r),M("div",{class:this.classes(Lt.layerInfo,l)},Ip(this.messages,e.label,!1)||""))}_renderImage(e,n,i){const{label:s,src:o,opacity:r}=e,a={[Lt.imageryLayerStretchedImage]:i,[Lt.symbol]:!i},l={opacity:`${r??n.opacity}`};return M("img",{alt:Ip(this.messages,s,!1),src:o,border:0,width:e.width,height:e.height,class:this.classes(a),styles:l})}};v([b()],cu.prototype,"activeLayerInfos",void 0),v([b()],cu.prototype,"headingLevel",void 0),v([b(),rn("esri/widgets/Legend/t9n/Legend")],cu.prototype,"messages",void 0),v([b({readOnly:!0})],cu.prototype,"type",void 0),cu=v([Ae("esri.widgets.Legend.styles.Classic")],cu);const Sd=cu,yv={base:"esri-legend",widget:"esri-widget",panel:"esri-widget--panel",widgetIcon:"esri-icon-layer-list"};let Vi=class extends kn{constructor(e,n){super(e,n),this._handles=new si,this.headingLevel=3,this.iconClass=yv.widgetIcon,this.messages=null,this.style=new Sd,this.viewModel=new xMe}initialize(){this.addHandles([Dn(()=>this.view,"resize",()=>this.scheduleRender()),Dn(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),ge(()=>this.headingLevel,e=>{const{style:n}=this;n&&(n.headingLevel=e)}),ge(()=>this.style,(e,n)=>{n&&e!==n&&n.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,e.type==="card"&&(e.view=this.view),e.headingLevel=this.headingLevel)},gt)])}destroy(){this._handles=sn(this._handles)}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}castStyle(e){if(e instanceof w0||e instanceof Sd)return e;if(typeof e=="string")return e==="card"?new w0:new Sd;if(e&&typeof e.type=="string"){const n={...e};return delete n.type,new(e.type==="card"?w0:Sd)(n)}return new Sd}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return M("div",{class:this.classes(yv.base,yv.widget,this.style instanceof Sd?yv.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){this._handles.removeAll(),e.forEach(n=>this._renderOnActiveLayerInfoChange(n)),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const n=ge(()=>e.version,()=>this.scheduleRender());this._handles.add(n,`version_${e.layer.uid}`);const i=Dn(()=>e.children,"change",()=>e.children.forEach(s=>this._renderOnActiveLayerInfoChange(s)),gt);this._handles.add(i,`children_${e.layer.uid}`),e.children.forEach(s=>this._renderOnActiveLayerInfoChange(s))}};v([b()],Vi.prototype,"activeLayerInfos",null),v([b()],Vi.prototype,"basemapLegendVisible",null),v([b()],Vi.prototype,"groundLegendVisible",null),v([b()],Vi.prototype,"headingLevel",void 0),v([b()],Vi.prototype,"hideLayersNotInCurrentView",null),v([b()],Vi.prototype,"keepCacheOnDestroy",null),v([b()],Vi.prototype,"respectLayerVisibility",null),v([b()],Vi.prototype,"iconClass",void 0),v([b()],Vi.prototype,"label",null),v([b()],Vi.prototype,"layerInfos",null),v([b(),rn("esri/widgets/Legend/t9n/Legend")],Vi.prototype,"messages",void 0),v([b()],Vi.prototype,"style",void 0),v([ii("style")],Vi.prototype,"castStyle",null),v([b()],Vi.prototype,"view",null),v([b()],Vi.prototype,"viewModel",void 0),Vi=v([Ae("esri.widgets.Legend")],Vi);const g5=Vi,WMe=Object.freeze(Object.defineProperty({__proto__:null,default:g5},Symbol.toStringTag,{value:"Module"}));function GMe(t){const{wkid:e}=t;if(ic[e]!=null)return ic.values[ic[e]];const{wkt:n}=t,i=n.lastIndexOf(",")+1,s=n.lastIndexOf("]]");return parseFloat(n.substring(i,s))}function uL(t,e){return t&&t.includes(e)}function dL(t,e){const{x:n,y:i}=t==="decimal-degrees"?HL(e,!0):e;return[n,i]}function pL({state:{paddedViewState:t},spatialReference:e,width:n}){return e.isWrappable&&t.worldScreenWidth<n}let Ud=class extends dt{constructor(e){super(e),this.scaleComputedFrom=hi(),this.view=null}get state(){return this.get("view.ready")&&this.get("view.type")==="2d"?"ready":"disabled"}getScaleBarProperties(e,n){if(this.state==="disabled"||isNaN(e)||!n)return null;const i=this._getDistanceInKm(this.view,this.scaleComputedFrom);if(ke(i))return null;if(n==="metric")return this._getScaleBarProps(e,i,"metric");const s=i/1.609;return this._getScaleBarProps(e,s,"non-metric")}_getLocationUnit(){const e=this.get("view.spatialReference"),{isWebMercator:n,wkid:i,wkt:s}=e;return n||uL(s,"WGS_1984_Web_Mercator")?"decimal-degrees":ic[i]!=null||uL(s,"PROJCS")?"linear-unit":"unknown"}_getDistanceInKm(e,n){const{state:i,spatialReference:s}=e,o=this._getLocationUnit();if(o==="linear-unit")return i.extent.width*GMe(s)/1e3;const[r,a]=this._getScaleMeasuringPoints(e,n),l=o==="decimal-degrees"||s.isGeographic&&!P_(s)?yc.WGS84:s,c=new up({paths:[[dL(o,r),dL(o,a)]],spatialReference:l}),u=hB(c,10);let d;try{[d]=TTe([u],"kilometers")}catch{return null}return d}_getScaleMeasuringPoints(e,n){const{width:i,height:s,position:o,spatialReference:r}=e;if(pL(e)){const{valid:u}=VS(r);return[new Kt(u[0],0,r),new Kt(u[1],0,r)]}let a=n.y-o[1];a>s?a=s:a<0&&(a=0);const l=hi(0,a),c=hi(i,a);return[e.toMap(l),e.toMap(c)]}_getScaleBarProps(e,n,i){const{view:s}=this;let o=e*n/(pL(s)?s.state.paddedViewState.worldScreenWidth:s.width),r=i==="metric"?"km":"mi";o<.1&&(r==="mi"?(o*=5280,r="ft"):r==="km"&&(o*=1e3,r="m"));let a=0;for(;o>=1;)o/=10,a++;const l=this._getConstraints(o);if(!l)return null;const{min:c,max:u}=l,d=u/o>=o/c?c:u;return{length:e*(d/o),value:10**a*d,unit:r}}_getConstraints(e){return e>.5?{min:.5,max:1}:e>.3?{min:.3,max:.5}:e>.2?{min:.2,max:.3}:e>.15?{min:.15,max:.2}:e>=.1?{min:.15,max:.1}:void 0}};v([b()],Ud.prototype,"scaleComputedFrom",void 0),v([b({readOnly:!0})],Ud.prototype,"state",null),v([b()],Ud.prototype,"view",void 0),Ud=v([Ae("esri.widgets.Scalebar.ScaleBarViewModel")],Ud);const jMe=Ud,Jn={base:"esri-scale-bar esri-widget",labelContainer:"esri-scale-bar__label-container",rulerLabelContainer:"esri-scale-bar__label-container--ruler",lineLabelContainer:"esri-scale-bar__label-container--line",topLabelContainer:"esri-scale-bar__label-container--top",bottomLabelContainer:"esri-scale-bar__label-container--bottom",label:"esri-scale-bar__label",line:"esri-scale-bar__line",topLine:"esri-scale-bar__line--top",bottomLine:"esri-scale-bar__line--bottom",ruler:"esri-scale-bar__ruler",rulerBlock:"esri-scale-bar__ruler-block",barContainer:"esri-scale-bar__bar-container",rulerBarContainer:"esri-scale-bar__bar-container--ruler",lineBarContainer:"esri-scale-bar__bar-container--line",disabled:"esri-disabled"};function bv(t){return 2*t}let nr=class extends kn{constructor(t,e){super(t,e),this.messages=null,this.unit="non-metric",this.viewModel=new jMe}initialize(){this.addHandles([ge(()=>{const{view:t}=this;return[t==null?void 0:t.stationary,t==null?void 0:t.center,t==null?void 0:t.scale,t==null?void 0:t.zoom]},([t])=>{t&&this.scheduleRender()})])}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set style(t){const e=this.unit==="dual"?"line":t;this._set("style",e)}castStyle(t){return t==="line"?t:"ruler"}castUnit(t){return t==="metric"||t==="dual"?t:"non-metric"}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t=this.get("viewModel.state")==="disabled",e={[Jn.disabled]:t};let n,i;if(!t){const{unit:s,style:o}=this,r=s==="metric"||s==="dual",a=50;if(s==="non-metric"||s==="dual"){const l=this.viewModel.getScaleBarProperties(a,"non-metric");l&&(i=o==="ruler"?this._renderRuler(l):this._renderLine(l,"bottom"))}if(r){const l=this.viewModel.getScaleBarProperties(a,"metric");l&&(n=o==="ruler"?this._renderRuler(l):this._renderLine(l,"top"))}}return M("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes(Jn.base,e)},n,i)}_renderRuler(t){const e=bv(Math.round(t.length)),{messages:n}=this,i=n[t.unit]||n.unknownUnit,s=`${bv(t.value)} ${i}`;return M("div",{class:this.classes(Jn.barContainer,Jn.rulerBarContainer),key:"esri-scale-bar__ruler"},M("div",{class:Jn.ruler,styles:{width:`${e}px`}},M("div",{class:Jn.rulerBlock}),M("div",{class:Jn.rulerBlock}),M("div",{class:Jn.rulerBlock}),M("div",{class:Jn.rulerBlock})),M("div",{class:this.classes(Jn.labelContainer,Jn.rulerLabelContainer)},M("div",{class:Jn.label},"0"),M("div",{class:Jn.label},s)))}_renderLine(t,e){const{messages:n}=this,i=n[t.unit]||n.unknownUnit,s=`${bv(t.value)} ${i}`,o={[Jn.topLabelContainer]:e==="top",[Jn.bottomLabelContainer]:e==="bottom"},r=M("div",{class:this.classes(Jn.labelContainer,Jn.lineLabelContainer,o),key:"esri-scale-bar__label"},M("div",{class:Jn.label},s)),a={[Jn.topLine]:e==="top",[Jn.bottomLine]:e==="bottom"},l=bv(Math.round(t.length)),c=M("div",{class:this.classes(Jn.line,a),key:"esri-scale-bar__line",styles:{width:`${l}px`}});return M("div",{class:this.classes(Jn.barContainer,Jn.lineBarContainer),key:"esri-scale-bar__line-container"},[c,r])}_handleRootCreateOrUpdate(t){const e=this.viewModel;if(!e)return;const n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,s=n.top+window.pageYOffset,o=hi(i,s);(o.x!==e.scaleComputedFrom.x||o.y!==e.scaleComputedFrom.y)&&(e.scaleComputedFrom=o)}};v([b()],nr.prototype,"label",null),v([b(),rn("esri/widgets/ScaleBar/t9n/ScaleBar")],nr.prototype,"messages",void 0),v([b()],nr.prototype,"style",null),v([ii("style")],nr.prototype,"castStyle",null),v([b()],nr.prototype,"unit",void 0),v([ii("unit")],nr.prototype,"castUnit",null),v([b()],nr.prototype,"view",null),v([b()],nr.prototype,"viewModel",void 0),nr=v([Ae("esri.widgets.ScaleBar")],nr);const qMe=nr;/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function hL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function ca(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hL(Object(n),!0).forEach(function(i){KMe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hL(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ey(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ey=function(e){return typeof e}:Ey=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ey(t)}function KMe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nl(){return nl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},nl.apply(this,arguments)}function YMe(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,o;for(o=0;o<i.length;o++)s=i[o],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function ZMe(t,e){if(t==null)return{};var n=YMe(t,e),i,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)i=o[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var XMe="1.15.0";function ja(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var gl=ja(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),_g=ja(/Edge/i),fL=ja(/firefox/i),Hf=ja(/safari/i)&&!ja(/chrome/i)&&!ja(/android/i),v5=ja(/iP(ad|od|hone)/i),y5=ja(/chrome/i)&&ja(/android/i),b5={capture:!1,passive:!1};function fn(t,e,n){t.addEventListener(e,n,!gl&&b5)}function dn(t,e,n){t.removeEventListener(e,n,!gl&&b5)}function wb(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function QMe(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Nr(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&wb(t,e):wb(t,e))||i&&t===n)return t;if(t===n)break}while(t=QMe(t))}return null}var mL=/\s+/g;function po(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(mL," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(mL," ")}}function Ft(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function xp(t,e){var n="";if(typeof t=="string")n=t;else do{var i=Ft(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(n)}function _5(t,e,n){if(t){var i=t.getElementsByTagName(e),s=0,o=i.length;if(n)for(;s<o;s++)n(i[s],s);return i}return[]}function Jr(){var t=document.scrollingElement;return t||document.documentElement}function $i(t,e,n,i,s){if(!(!t.getBoundingClientRect&&t!==window)){var o,r,a,l,c,u,d;if(t!==window&&t.parentNode&&t!==Jr()?(o=t.getBoundingClientRect(),r=o.top,a=o.left,l=o.bottom,c=o.right,u=o.height,d=o.width):(r=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(s=s||t.parentNode,!gl))do if(s&&s.getBoundingClientRect&&(Ft(s,"transform")!=="none"||n&&Ft(s,"position")!=="static")){var h=s.getBoundingClientRect();r-=h.top+parseInt(Ft(s,"border-top-width")),a-=h.left+parseInt(Ft(s,"border-left-width")),l=r+o.height,c=a+o.width;break}while(s=s.parentNode);if(i&&t!==window){var f=xp(s||t),m=f&&f.a,g=f&&f.d;f&&(r/=g,a/=m,d/=m,u/=g,l=r+u,c=a+d)}return{top:r,left:a,bottom:l,right:c,width:d,height:u}}}function gL(t,e,n){for(var i=ac(t,!0),s=$i(t)[e];i;){var o=$i(i)[n],r=void 0;if(n==="top"||n==="left"?r=s>=o:r=s<=o,!r)return i;if(i===Jr())break;i=ac(i,!1)}return!1}function oh(t,e,n,i){for(var s=0,o=0,r=t.children;o<r.length;){if(r[o].style.display!=="none"&&r[o]!==Dt.ghost&&(i||r[o]!==Dt.dragged)&&Nr(r[o],n.draggable,t,!1)){if(s===e)return r[o];s++}o++}return null}function WT(t,e){for(var n=t.lastElementChild;n&&(n===Dt.ghost||Ft(n,"display")==="none"||e&&!wb(n,e));)n=n.previousElementSibling;return n||null}function Vo(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Dt.clone&&(!e||wb(t,e))&&n++;return n}function vL(t){var e=0,n=0,i=Jr();if(t)do{var s=xp(t),o=s.a,r=s.d;e+=t.scrollLeft*o,n+=t.scrollTop*r}while(t!==i&&(t=t.parentNode));return[e,n]}function JMe(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return-1}function ac(t,e){if(!t||!t.getBoundingClientRect)return Jr();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var s=Ft(n);if(n.clientWidth<n.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Jr();if(i||e)return n;i=!0}}while(n=n.parentNode);return Jr()}function e$e(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function S0(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Uf;function w5(t,e){return function(){if(!Uf){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),Uf=setTimeout(function(){Uf=void 0},e)}}}function t$e(){clearTimeout(Uf),Uf=void 0}function C5(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function S5(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var vo="Sortable"+new Date().getTime();function n$e(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(s){if(!(Ft(s,"display")==="none"||s===Dt.ghost)){t.push({target:s,rect:$i(s)});var o=ca({},t[t.length-1].rect);if(s.thisAnimationDuration){var r=xp(s,!0);r&&(o.top-=r.f,o.left-=r.e)}s.fromRect=o}})}},addAnimationState:function(i){t.push(i)},removeAnimationState:function(i){t.splice(JMe(t,{target:i}),1)},animateAll:function(i){var s=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var o=!1,r=0;t.forEach(function(a){var l=0,c=a.target,u=c.fromRect,d=$i(c),h=c.prevFromRect,f=c.prevToRect,m=a.rect,g=xp(c,!0);g&&(d.top-=g.f,d.left-=g.e),c.toRect=d,c.thisAnimationDuration&&S0(h,d)&&!S0(u,d)&&(m.top-d.top)/(m.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(l=s$e(m,h,f,s.options)),S0(d,u)||(c.prevFromRect=u,c.prevToRect=d,l||(l=s.options.animation),s.animate(c,m,d,l)),l&&(o=!0,r=Math.max(r,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),o?e=setTimeout(function(){typeof i=="function"&&i()},r):typeof i=="function"&&i(),t=[]},animate:function(i,s,o,r){if(r){Ft(i,"transition",""),Ft(i,"transform","");var a=xp(this.el),l=a&&a.a,c=a&&a.d,u=(s.left-o.left)/(l||1),d=(s.top-o.top)/(c||1);i.animatingX=!!u,i.animatingY=!!d,Ft(i,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=i$e(i),Ft(i,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),Ft(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){Ft(i,"transition",""),Ft(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},r)}}}}function i$e(t){return t.offsetWidth}function s$e(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var Ed=[],E0={initializeByDefault:!0},wg={mount:function(e){for(var n in E0)E0.hasOwnProperty(n)&&!(n in e)&&(e[n]=E0[n]);Ed.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ed.push(e)},pluginEvent:function(e,n,i){var s=this;this.eventCanceled=!1,i.cancel=function(){s.eventCanceled=!0};var o=e+"Global";Ed.forEach(function(r){n[r.pluginName]&&(n[r.pluginName][o]&&n[r.pluginName][o](ca({sortable:n},i)),n.options[r.pluginName]&&n[r.pluginName][e]&&n[r.pluginName][e](ca({sortable:n},i)))})},initializePlugins:function(e,n,i,s){Ed.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,nl(i,c.defaults)}});for(var o in e.options)if(e.options.hasOwnProperty(o)){var r=this.modifyOption(e,o,e.options[o]);typeof r<"u"&&(e.options[o]=r)}},getEventProperties:function(e,n){var i={};return Ed.forEach(function(s){typeof s.eventProperties=="function"&&nl(i,s.eventProperties.call(n[s.pluginName],e))}),i},modifyOption:function(e,n,i){var s;return Ed.forEach(function(o){e[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(s=o.optionListeners[n].call(e[o.pluginName],i))}),s}};function o$e(t){var e=t.sortable,n=t.rootEl,i=t.name,s=t.targetEl,o=t.cloneEl,r=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,h=t.originalEvent,f=t.putSortable,m=t.extraEventProperties;if(e=e||n&&n[vo],!!e){var g,y=e.options,_="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!gl&&!_g?g=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(i,!0,!0)),g.to=r||n,g.from=a||n,g.item=s||n,g.clone=o,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=u,g.newDraggableIndex=d,g.originalEvent=h,g.pullMode=f?f.lastPutMode:void 0;var C=ca(ca({},m),wg.getEventProperties(i,e));for(var w in C)g[w]=C[w];n&&n.dispatchEvent(g),y[_]&&y[_].call(e,g)}}var r$e=["evt"],zs=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.evt,o=ZMe(i,r$e);wg.pluginEvent.bind(Dt)(e,n,ca({dragEl:tt,parentEl:ci,ghostEl:qt,rootEl:qn,nextEl:uu,lastDownEl:ky,cloneEl:ti,cloneHidden:nc,dragStarted:yf,putSortable:Xi,activeSortable:Dt.active,originalEvent:s,oldIndex:ap,oldDraggableIndex:Wf,newIndex:fo,newDraggableIndex:Ql,hideGhostForTarget:I5,unhideGhostForTarget:x5,cloneNowHidden:function(){nc=!0},cloneNowShown:function(){nc=!1},dispatchSortableEvent:function(a){Es({sortable:n,name:a,originalEvent:s})}},o))};function Es(t){o$e(ca({putSortable:Xi,cloneEl:ti,targetEl:tt,rootEl:qn,oldIndex:ap,oldDraggableIndex:Wf,newIndex:fo,newDraggableIndex:Ql},t))}var tt,ci,qt,qn,uu,ky,ti,nc,ap,fo,Wf,Ql,_v,Xi,Wd=!1,Cb=!1,Sb=[],Uc,Qo,k0,T0,yL,bL,yf,kd,Gf,jf=!1,wv=!1,Ty,rs,I0=[],wS=!1,Eb=[],U_=typeof document<"u",Cv=v5,_L=_g||gl?"cssFloat":"float",a$e=U_&&!y5&&!v5&&"draggable"in document.createElement("div"),E5=function(){if(U_){if(gl)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),k5=function(e,n){var i=Ft(e),s=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=oh(e,0,n),r=oh(e,1,n),a=o&&Ft(o),l=r&&Ft(r),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+$i(o).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+$i(r).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&a.float!=="none"){var d=a.float==="left"?"left":"right";return r&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return o&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=s&&i[_L]==="none"||r&&i[_L]==="none"&&c+u>s)?"vertical":"horizontal"},l$e=function(e,n,i){var s=i?e.left:e.top,o=i?e.right:e.bottom,r=i?e.width:e.height,a=i?n.left:n.top,l=i?n.right:n.bottom,c=i?n.width:n.height;return s===a||o===l||s+r/2===a+c/2},c$e=function(e,n){var i;return Sb.some(function(s){var o=s[vo].options.emptyInsertThreshold;if(!(!o||WT(s))){var r=$i(s),a=e>=r.left-o&&e<=r.right+o,l=n>=r.top-o&&n<=r.bottom+o;if(a&&l)return i=s}}),i},T5=function(e){function n(o,r){return function(a,l,c,u){var d=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(o==null&&(r||d))return!0;if(o==null||o===!1)return!1;if(r&&o==="clone")return o;if(typeof o=="function")return n(o(a,l,c,u),r)(a,l,c,u);var h=(r?a:l).options.group.name;return o===!0||typeof o=="string"&&o===h||o.join&&o.indexOf(h)>-1}}var i={},s=e.group;(!s||Ey(s)!="object")&&(s={name:s}),i.name=s.name,i.checkPull=n(s.pull,!0),i.checkPut=n(s.put),i.revertClone=s.revertClone,e.group=i},I5=function(){!E5&&qt&&Ft(qt,"display","none")},x5=function(){!E5&&qt&&Ft(qt,"display","")};U_&&!y5&&document.addEventListener("click",function(t){if(Cb)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Cb=!1,!1},!0);var Wc=function(e){if(tt){e=e.touches?e.touches[0]:e;var n=c$e(e.clientX,e.clientY);if(n){var i={};for(var s in e)e.hasOwnProperty(s)&&(i[s]=e[s]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[vo]._onDragOver(i)}}},u$e=function(e){tt&&tt.parentNode[vo]._isOutsideThisEl(e.target)};function Dt(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=nl({},e),t[vo]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return k5(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,a){r.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Dt.supportPointer!==!1&&"PointerEvent"in window&&!Hf,emptyInsertThreshold:5};wg.initializePlugins(this,t,n);for(var i in n)!(i in e)&&(e[i]=n[i]);T5(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:a$e,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?fn(t,"pointerdown",this._onTapStart):(fn(t,"mousedown",this._onTapStart),fn(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(fn(t,"dragover",this),fn(t,"dragenter",this)),Sb.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),nl(this,n$e())}Dt.prototype={constructor:Dt,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(kd=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,tt):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,s=this.options,o=s.preventOnFilter,r=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=s.filter;if(y$e(i),!tt&&!(/mousedown|pointerdown/.test(r)&&e.button!==0||s.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Hf&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Nr(l,s.draggable,i,!1),!(l&&l.animated)&&ky!==l)){if(ap=Vo(l),Wf=Vo(l,s.draggable),typeof u=="function"){if(u.call(this,e,l,this)){Es({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:i,fromEl:i}),zs("filter",n,{evt:e}),o&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=Nr(c,d.trim(),i,!1),d)return Es({sortable:n,rootEl:d,name:"filter",targetEl:l,fromEl:i,toEl:i}),zs("filter",n,{evt:e}),!0}),u)){o&&e.cancelable&&e.preventDefault();return}s.handle&&!Nr(c,s.handle,i,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,i){var s=this,o=s.el,r=s.options,a=o.ownerDocument,l;if(i&&!tt&&i.parentNode===o){var c=$i(i);if(qn=o,tt=i,ci=tt.parentNode,uu=tt.nextSibling,ky=i,_v=r.group,Dt.dragged=tt,Uc={target:tt,clientX:(n||e).clientX,clientY:(n||e).clientY},yL=Uc.clientX-c.left,bL=Uc.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,tt.style["will-change"]="all",l=function(){if(zs("delayEnded",s,{evt:e}),Dt.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!fL&&s.nativeDraggable&&(tt.draggable=!0),s._triggerDragStart(e,n),Es({sortable:s,name:"choose",originalEvent:e}),po(tt,r.chosenClass,!0)},r.ignore.split(",").forEach(function(u){_5(tt,u.trim(),x0)}),fn(a,"dragover",Wc),fn(a,"mousemove",Wc),fn(a,"touchmove",Wc),fn(a,"mouseup",s._onDrop),fn(a,"touchend",s._onDrop),fn(a,"touchcancel",s._onDrop),fL&&this.nativeDraggable&&(this.options.touchStartThreshold=4,tt.draggable=!0),zs("delayStart",this,{evt:e}),r.delay&&(!r.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(_g||gl))){if(Dt.eventCanceled){this._onDrop();return}fn(a,"mouseup",s._disableDelayedDrag),fn(a,"touchend",s._disableDelayedDrag),fn(a,"touchcancel",s._disableDelayedDrag),fn(a,"mousemove",s._delayedDragTouchMoveHandler),fn(a,"touchmove",s._delayedDragTouchMoveHandler),r.supportPointer&&fn(a,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,r.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){tt&&x0(tt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;dn(e,"mouseup",this._disableDelayedDrag),dn(e,"touchend",this._disableDelayedDrag),dn(e,"touchcancel",this._disableDelayedDrag),dn(e,"mousemove",this._delayedDragTouchMoveHandler),dn(e,"touchmove",this._delayedDragTouchMoveHandler),dn(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?fn(document,"pointermove",this._onTouchMove):n?fn(document,"touchmove",this._onTouchMove):fn(document,"mousemove",this._onTouchMove):(fn(tt,"dragend",this),fn(qn,"dragstart",this._onDragStart));try{document.selection?Iy(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Wd=!1,qn&&tt){zs("dragStarted",this,{evt:n}),this.nativeDraggable&&fn(document,"dragover",u$e);var i=this.options;!e&&po(tt,i.dragClass,!1),po(tt,i.ghostClass,!0),Dt.active=this,e&&this._appendGhost(),Es({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Qo){this._lastX=Qo.clientX,this._lastY=Qo.clientY,I5();for(var e=document.elementFromPoint(Qo.clientX,Qo.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Qo.clientX,Qo.clientY),e!==n);)n=e;if(tt.parentNode[vo]._isOutsideThisEl(e),n)do{if(n[vo]){var i=void 0;if(i=n[vo]._onDragOver({clientX:Qo.clientX,clientY:Qo.clientY,target:e,rootEl:n}),i&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);x5()}},_onTouchMove:function(e){if(Uc){var n=this.options,i=n.fallbackTolerance,s=n.fallbackOffset,o=e.touches?e.touches[0]:e,r=qt&&xp(qt,!0),a=qt&&r&&r.a,l=qt&&r&&r.d,c=Cv&&rs&&vL(rs),u=(o.clientX-Uc.clientX+s.x)/(a||1)+(c?c[0]-I0[0]:0)/(a||1),d=(o.clientY-Uc.clientY+s.y)/(l||1)+(c?c[1]-I0[1]:0)/(l||1);if(!Dt.active&&!Wd){if(i&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(qt){r?(r.e+=u-(k0||0),r.f+=d-(T0||0)):r={a:1,b:0,c:0,d:1,e:u,f:d};var h="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");Ft(qt,"webkitTransform",h),Ft(qt,"mozTransform",h),Ft(qt,"msTransform",h),Ft(qt,"transform",h),k0=u,T0=d,Qo=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!qt){var e=this.options.fallbackOnBody?document.body:qn,n=$i(tt,!0,Cv,!0,e),i=this.options;if(Cv){for(rs=e;Ft(rs,"position")==="static"&&Ft(rs,"transform")==="none"&&rs!==document;)rs=rs.parentNode;rs!==document.body&&rs!==document.documentElement?(rs===document&&(rs=Jr()),n.top+=rs.scrollTop,n.left+=rs.scrollLeft):rs=Jr(),I0=vL(rs)}qt=tt.cloneNode(!0),po(qt,i.ghostClass,!1),po(qt,i.fallbackClass,!0),po(qt,i.dragClass,!0),Ft(qt,"transition",""),Ft(qt,"transform",""),Ft(qt,"box-sizing","border-box"),Ft(qt,"margin",0),Ft(qt,"top",n.top),Ft(qt,"left",n.left),Ft(qt,"width",n.width),Ft(qt,"height",n.height),Ft(qt,"opacity","0.8"),Ft(qt,"position",Cv?"absolute":"fixed"),Ft(qt,"zIndex","100000"),Ft(qt,"pointerEvents","none"),Dt.ghost=qt,e.appendChild(qt),Ft(qt,"transform-origin",yL/parseInt(qt.style.width)*100+"% "+bL/parseInt(qt.style.height)*100+"%")}},_onDragStart:function(e,n){var i=this,s=e.dataTransfer,o=i.options;if(zs("dragStart",this,{evt:e}),Dt.eventCanceled){this._onDrop();return}zs("setupClone",this),Dt.eventCanceled||(ti=S5(tt),ti.removeAttribute("id"),ti.draggable=!1,ti.style["will-change"]="",this._hideClone(),po(ti,this.options.chosenClass,!1),Dt.clone=ti),i.cloneId=Iy(function(){zs("clone",i),!Dt.eventCanceled&&(i.options.removeCloneOnHide||qn.insertBefore(ti,tt),i._hideClone(),Es({sortable:i,name:"clone"}))}),!n&&po(tt,o.dragClass,!0),n?(Cb=!0,i._loopId=setInterval(i._emulateDragOver,50)):(dn(document,"mouseup",i._onDrop),dn(document,"touchend",i._onDrop),dn(document,"touchcancel",i._onDrop),s&&(s.effectAllowed="move",o.setData&&o.setData.call(i,s,tt)),fn(document,"drop",i),Ft(tt,"transform","translateZ(0)")),Wd=!0,i._dragStartId=Iy(i._dragStarted.bind(i,n,e)),fn(document,"selectstart",i),yf=!0,Hf&&Ft(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,i=e.target,s,o,r,a=this.options,l=a.group,c=Dt.active,u=_v===l,d=a.sort,h=Xi||c,f,m=this,g=!1;if(wS)return;function y(D,N){zs(D,m,ca({evt:e,isOwner:u,axis:f?"vertical":"horizontal",revert:r,dragRect:s,targetRect:o,canSort:d,fromSortable:h,target:i,completed:C,onMove:function(ie,Y){return Sv(qn,n,tt,s,ie,$i(ie),e,Y)},changed:w},N))}function _(){y("dragOverAnimationCapture"),m.captureAnimationState(),m!==h&&h.captureAnimationState()}function C(D){return y("dragOverCompleted",{insertion:D}),D&&(u?c._hideClone():c._showClone(m),m!==h&&(po(tt,Xi?Xi.options.ghostClass:c.options.ghostClass,!1),po(tt,a.ghostClass,!0)),Xi!==m&&m!==Dt.active?Xi=m:m===Dt.active&&Xi&&(Xi=null),h===m&&(m._ignoreWhileAnimating=i),m.animateAll(function(){y("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(i===tt&&!tt.animated||i===n&&!i.animated)&&(kd=null),!a.dragoverBubble&&!e.rootEl&&i!==document&&(tt.parentNode[vo]._isOutsideThisEl(e.target),!D&&Wc(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function w(){fo=Vo(tt),Ql=Vo(tt,a.draggable),Es({sortable:m,name:"change",toEl:n,newIndex:fo,newDraggableIndex:Ql,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=Nr(i,a.draggable,n,!0),y("dragOver"),Dt.eventCanceled)return g;if(tt.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||m._ignoreWhileAnimating===i)return C(!1);if(Cb=!1,c&&!a.disabled&&(u?d||(r=ci!==qn):Xi===this||(this.lastPutMode=_v.checkPull(this,c,tt,e))&&l.checkPut(this,c,tt,e))){if(f=this._getDirection(e,i)==="vertical",s=$i(tt),y("dragOverValid"),Dt.eventCanceled)return g;if(r)return ci=qn,_(),this._hideClone(),y("revert"),Dt.eventCanceled||(uu?qn.insertBefore(tt,uu):qn.appendChild(tt)),C(!0);var S=WT(n,a.draggable);if(!S||f$e(e,f,this)&&!S.animated){if(S===tt)return C(!1);if(S&&n===e.target&&(i=S),i&&(o=$i(i)),Sv(qn,n,tt,s,i,o,e,!!i)!==!1)return _(),S&&S.nextSibling?n.insertBefore(tt,S.nextSibling):n.appendChild(tt),ci=n,w(),C(!0)}else if(S&&h$e(e,f,this)){var E=oh(n,0,a,!0);if(E===tt)return C(!1);if(i=E,o=$i(i),Sv(qn,n,tt,s,i,o,e,!1)!==!1)return _(),n.insertBefore(tt,E),ci=n,w(),C(!0)}else if(i.parentNode===n){o=$i(i);var k=0,A,$=tt.parentNode!==n,L=!l$e(tt.animated&&tt.toRect||s,i.animated&&i.toRect||o,f),O=f?"top":"left",B=gL(i,"top","top")||gL(tt,"top","top"),V=B?B.scrollTop:void 0;kd!==i&&(A=o[O],jf=!1,wv=!L&&a.invertSwap||$),k=m$e(e,i,o,f,L?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,wv,kd===i);var P;if(k!==0){var z=Vo(tt);do z-=k,P=ci.children[z];while(P&&(Ft(P,"display")==="none"||P===qt))}if(k===0||P===i)return C(!1);kd=i,Gf=k;var U=i.nextElementSibling,W=!1;W=k===1;var R=Sv(qn,n,tt,s,i,o,e,W);if(R!==!1)return(R===1||R===-1)&&(W=R===1),wS=!0,setTimeout(p$e,30),_(),W&&!U?n.appendChild(tt):i.parentNode.insertBefore(tt,W?U:i),B&&C5(B,0,V-B.scrollTop),ci=tt.parentNode,A!==void 0&&!wv&&(Ty=Math.abs(A-$i(i)[O])),w(),C(!0)}if(n.contains(tt))return C(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){dn(document,"mousemove",this._onTouchMove),dn(document,"touchmove",this._onTouchMove),dn(document,"pointermove",this._onTouchMove),dn(document,"dragover",Wc),dn(document,"mousemove",Wc),dn(document,"touchmove",Wc)},_offUpEvents:function(){var e=this.el.ownerDocument;dn(e,"mouseup",this._onDrop),dn(e,"touchend",this._onDrop),dn(e,"pointerup",this._onDrop),dn(e,"touchcancel",this._onDrop),dn(document,"selectstart",this)},_onDrop:function(e){var n=this.el,i=this.options;if(fo=Vo(tt),Ql=Vo(tt,i.draggable),zs("drop",this,{evt:e}),ci=tt&&tt.parentNode,fo=Vo(tt),Ql=Vo(tt,i.draggable),Dt.eventCanceled){this._nulling();return}Wd=!1,wv=!1,jf=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),CS(this.cloneId),CS(this._dragStartId),this.nativeDraggable&&(dn(document,"drop",this),dn(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Hf&&Ft(document.body,"user-select",""),Ft(tt,"transform",""),e&&(yf&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),qt&&qt.parentNode&&qt.parentNode.removeChild(qt),(qn===ci||Xi&&Xi.lastPutMode!=="clone")&&ti&&ti.parentNode&&ti.parentNode.removeChild(ti),tt&&(this.nativeDraggable&&dn(tt,"dragend",this),x0(tt),tt.style["will-change"]="",yf&&!Wd&&po(tt,Xi?Xi.options.ghostClass:this.options.ghostClass,!1),po(tt,this.options.chosenClass,!1),Es({sortable:this,name:"unchoose",toEl:ci,newIndex:null,newDraggableIndex:null,originalEvent:e}),qn!==ci?(fo>=0&&(Es({rootEl:ci,name:"add",toEl:ci,fromEl:qn,originalEvent:e}),Es({sortable:this,name:"remove",toEl:ci,originalEvent:e}),Es({rootEl:ci,name:"sort",toEl:ci,fromEl:qn,originalEvent:e}),Es({sortable:this,name:"sort",toEl:ci,originalEvent:e})),Xi&&Xi.save()):fo!==ap&&fo>=0&&(Es({sortable:this,name:"update",toEl:ci,originalEvent:e}),Es({sortable:this,name:"sort",toEl:ci,originalEvent:e})),Dt.active&&((fo==null||fo===-1)&&(fo=ap,Ql=Wf),Es({sortable:this,name:"end",toEl:ci,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){zs("nulling",this),qn=tt=ci=qt=uu=ti=ky=nc=Uc=Qo=yf=fo=Ql=ap=Wf=kd=Gf=Xi=_v=Dt.dragged=Dt.ghost=Dt.clone=Dt.active=null,Eb.forEach(function(e){e.checked=!0}),Eb.length=k0=T0=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":tt&&(this._onDragOver(e),d$e(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,i=this.el.children,s=0,o=i.length,r=this.options;s<o;s++)n=i[s],Nr(n,r.draggable,this.el,!1)&&e.push(n.getAttribute(r.dataIdAttr)||v$e(n));return e},sort:function(e,n){var i={},s=this.el;this.toArray().forEach(function(o,r){var a=s.children[r];Nr(a,this.options.draggable,s,!1)&&(i[o]=a)},this),n&&this.captureAnimationState(),e.forEach(function(o){i[o]&&(s.removeChild(i[o]),s.appendChild(i[o]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Nr(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var i=this.options;if(n===void 0)return i[e];var s=wg.modifyOption(this,e,n);typeof s<"u"?i[e]=s:i[e]=n,e==="group"&&T5(i)},destroy:function(){zs("destroy",this);var e=this.el;e[vo]=null,dn(e,"mousedown",this._onTapStart),dn(e,"touchstart",this._onTapStart),dn(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(dn(e,"dragover",this),dn(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Sb.splice(Sb.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!nc){if(zs("hideClone",this),Dt.eventCanceled)return;Ft(ti,"display","none"),this.options.removeCloneOnHide&&ti.parentNode&&ti.parentNode.removeChild(ti),nc=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(nc){if(zs("showClone",this),Dt.eventCanceled)return;tt.parentNode==qn&&!this.options.group.revertClone?qn.insertBefore(ti,tt):uu?qn.insertBefore(ti,uu):qn.appendChild(ti),this.options.group.revertClone&&this.animate(tt,ti),Ft(ti,"display",""),nc=!1}}};function d$e(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Sv(t,e,n,i,s,o,r,a){var l,c=t[vo],u=c.options.onMove,d;return window.CustomEvent&&!gl&&!_g?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=s||e,l.relatedRect=o||$i(e),l.willInsertAfter=a,l.originalEvent=r,t.dispatchEvent(l),u&&(d=u.call(c,l,r)),d}function x0(t){t.draggable=!1}function p$e(){wS=!1}function h$e(t,e,n){var i=$i(oh(n.el,0,n.options,!0)),s=10;return e?t.clientX<i.left-s||t.clientY<i.top&&t.clientX<i.right:t.clientY<i.top-s||t.clientY<i.bottom&&t.clientX<i.left}function f$e(t,e,n){var i=$i(WT(n.el,n.options.draggable)),s=10;return e?t.clientX>i.right+s||t.clientX<=i.right&&t.clientY>i.bottom&&t.clientX>=i.left:t.clientX>i.right&&t.clientY>i.top||t.clientX<=i.right&&t.clientY>i.bottom+s}function m$e(t,e,n,i,s,o,r,a){var l=i?t.clientY:t.clientX,c=i?n.height:n.width,u=i?n.top:n.left,d=i?n.bottom:n.right,h=!1;if(!r){if(a&&Ty<c*s){if(!jf&&(Gf===1?l>u+c*o/2:l<d-c*o/2)&&(jf=!0),jf)h=!0;else if(Gf===1?l<u+Ty:l>d-Ty)return-Gf}else if(l>u+c*(1-s)/2&&l<d-c*(1-s)/2)return g$e(e)}return h=h||r,h&&(l<u+c*o/2||l>d-c*o/2)?l>u+c/2?1:-1:0}function g$e(t){return Vo(tt)<Vo(t)?1:-1}function v$e(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function y$e(t){Eb.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&Eb.push(i)}}function Iy(t){return setTimeout(t,0)}function CS(t){return clearTimeout(t)}U_&&fn(document,"touchmove",function(t){(Dt.active||Wd)&&t.cancelable&&t.preventDefault()});Dt.utils={on:fn,off:dn,css:Ft,find:_5,is:function(e,n){return!!Nr(e,n,e,!1)},extend:e$e,throttle:w5,closest:Nr,toggleClass:po,clone:S5,index:Vo,nextTick:Iy,cancelNextTick:CS,detectDirection:k5,getChild:oh};Dt.get=function(t){return t[vo]};Dt.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(Dt.utils=ca(ca({},Dt.utils),i.utils)),wg.mount(i)})};Dt.create=function(t,e){return new Dt(t,e)};Dt.version=XMe;var wi=[],bf,SS,ES=!1,M0,$0,kb,_f;function b$e(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?fn(document,"dragover",this._handleAutoScroll):this.options.supportPointer?fn(document,"pointermove",this._handleFallbackAutoScroll):i.touches?fn(document,"touchmove",this._handleFallbackAutoScroll):fn(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?dn(document,"dragover",this._handleAutoScroll):(dn(document,"pointermove",this._handleFallbackAutoScroll),dn(document,"touchmove",this._handleFallbackAutoScroll),dn(document,"mousemove",this._handleFallbackAutoScroll)),wL(),xy(),t$e()},nulling:function(){kb=SS=bf=ES=_f=M0=$0=null,wi.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var s=this,o=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(o,r);if(kb=n,i||this.options.forceAutoScrollFallback||_g||gl||Hf){A0(n,this.options,a,i);var l=ac(a,!0);ES&&(!_f||o!==M0||r!==$0)&&(_f&&wL(),_f=setInterval(function(){var c=ac(document.elementFromPoint(o,r),!0);c!==l&&(l=c,xy()),A0(n,s.options,c,i)},10),M0=o,$0=r)}else{if(!this.options.bubbleScroll||ac(a,!0)===Jr()){xy();return}A0(n,this.options,ac(a,!1),!1)}}},nl(t,{pluginName:"scroll",initializeByDefault:!0})}function xy(){wi.forEach(function(t){clearInterval(t.pid)}),wi=[]}function wL(){clearInterval(_f)}var A0=w5(function(t,e,n,i){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,r=e.scrollSensitivity,a=e.scrollSpeed,l=Jr(),c=!1,u;SS!==n&&(SS=n,xy(),bf=e.scroll,u=e.scrollFn,bf===!0&&(bf=ac(n,!0)));var d=0,h=bf;do{var f=h,m=$i(f),g=m.top,y=m.bottom,_=m.left,C=m.right,w=m.width,S=m.height,E=void 0,k=void 0,A=f.scrollWidth,$=f.scrollHeight,L=Ft(f),O=f.scrollLeft,B=f.scrollTop;f===l?(E=w<A&&(L.overflowX==="auto"||L.overflowX==="scroll"||L.overflowX==="visible"),k=S<$&&(L.overflowY==="auto"||L.overflowY==="scroll"||L.overflowY==="visible")):(E=w<A&&(L.overflowX==="auto"||L.overflowX==="scroll"),k=S<$&&(L.overflowY==="auto"||L.overflowY==="scroll"));var V=E&&(Math.abs(C-s)<=r&&O+w<A)-(Math.abs(_-s)<=r&&!!O),P=k&&(Math.abs(y-o)<=r&&B+S<$)-(Math.abs(g-o)<=r&&!!B);if(!wi[d])for(var z=0;z<=d;z++)wi[z]||(wi[z]={});(wi[d].vx!=V||wi[d].vy!=P||wi[d].el!==f)&&(wi[d].el=f,wi[d].vx=V,wi[d].vy=P,clearInterval(wi[d].pid),(V!=0||P!=0)&&(c=!0,wi[d].pid=setInterval(function(){i&&this.layer===0&&Dt.active._onTouchMove(kb);var U=wi[this.layer].vy?wi[this.layer].vy*a:0,W=wi[this.layer].vx?wi[this.layer].vx*a:0;typeof u=="function"&&u.call(Dt.dragged.parentNode[vo],W,U,t,kb,wi[this.layer].el)!=="continue"||C5(wi[this.layer].el,W,U)}.bind({layer:d}),24))),d++}while(e.bubbleScroll&&h!==l&&(h=ac(h,!1)));ES=c}},30),M5=function(e){var n=e.originalEvent,i=e.putSortable,s=e.dragEl,o=e.activeSortable,r=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=i||o;a();var u=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(r("spill"),this.onSpill({dragEl:s,putSortable:i}))}};function GT(){}GT.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var s=oh(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(n,s):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:M5};nl(GT,{pluginName:"revertOnSpill"});function jT(){}jT.prototype={onSpill:function(e){var n=e.dragEl,i=e.putSortable,s=i||this.sortable;s.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),s.animateAll()},drop:M5};nl(jT,{pluginName:"removeOnSpill"});Dt.mount(new b$e);Dt.mount(jT,GT);function CL(t,e,n){t.splice(n,0,t.splice(e,1)[0])}const _$e="esri-layerlist-new-ui",w$e=Ht.ofType(B_),SL="data-sort-filter",EL="data-layer-uid",C$e="layerUid",lt={base:"esri-layer-list esri-widget esri-widget--panel",newUI:"esri-layer-list--new-ui",noItems:"esri-layer-list__no-items",list:"esri-layer-list__list",listRoot:"esri-layer-list__list--root",listExclusive:"esri-layer-list__list--exclusive",listInherited:"esri-layer-list__list--inherited",listIndependent:"esri-layer-list__list--independent",item:"esri-layer-list__item",itemContent:"esri-layer-list__item-content",itemMessage:"esri-layer-list__item--has-message",itemInvisible:"esri-layer-list__item--invisible",itemInvisibleAtScale:"esri-layer-list__item--invisible-at-scale",itemChildren:"esri-layer-list__item--has-children",itemSelectable:"esri-layer-list__item--selectable",itemContainer:"esri-layer-list__item-container",actionsMenu:"esri-layer-list__item-actions-menu",actionsMenuItem:"esri-layer-list__item-actions-menu-item",actionsMenuItemActive:"esri-layer-list__item-actions-menu-item--active",actions:"esri-layer-list__item-actions",actionsList:"esri-layer-list__item-actions-list",action:"esri-layer-list__item-action",actionIcon:"esri-layer-list__item-action-icon",actionImage:"esri-layer-list__item-action-image",actionTitle:"esri-layer-list__item-action-title",actionToggle:"esri-layer-list__action-toggle",actionToggleOn:"esri-layer-list__action-toggle--on",label:"esri-layer-list__item-label",message:"esri-layer-list__item-message",title:"esri-layer-list__item-title",statusIndicator:"esri-layer-list__status-indicator",publishing:"esri-layer-list__publishing",updating:"esri-layer-list__updating",connectionStatus:"esri-layer-list__connection-status",connectionStatusConnected:"esri-layer-list__connection-status--connected",toggleVisible:"esri-layer-list__item-toggle",toggleVisibleIcon:"esri-layer-list__item-toggle-icon",toggleIcon:"esri-layer-list__item-toggle-icon",radioIcon:"esri-layer-list__item-radio-icon",childToggle:"esri-layer-list__child-toggle",childToggleOpen:"esri-layer-list__child-toggle--open",childOpened:"esri-layer-list__child-toggle-icon--opened",childClosed:"esri-layer-list__child-toggle-icon--closed",childClosed_RTL:"esri-layer-list__child-toggle-icon--closed-rtl",sortableChosen:"esri-layer-list--chosen",disabled:"esri-disabled",disabledElement:"esri-disabled-element",hidden:"esri-hidden",rotating:"esri-rotating",iconEllipses:"esri-icon-handle-horizontal",iconVisible:"esri-icon-visible",iconInvisible:"esri-icon-non-visible",iconRadioSelected:"esri-icon-radio-checked",iconRadioUnselected:"esri-icon-radio-unchecked",iconNoticeTriangle:"esri-icon-notice-triangle",iconChildrenOpen:"esri-icon-down-arrow",iconDownArrow:"esri-icon-down-arrow",iconRightArrow:"esri-icon-right-triangle-arrow",iconLeftArrow:"esri-icon-left-triangle-arrow",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",widgetIcon:"esri-icon-layers"},L0={actions:"actions",actionSection:"action-section",items:"items"},Zh={exclusive:"exclusive",inherited:"inherited",independent:"independent"};function $5(t){const{actionsOpen:e,children:n}=t;e&&(t.actionsOpen=!1),n.forEach(i=>$5(i))}const O0="root",kL={statusIndicators:!0,errors:!1};let zn=class extends kn{constructor(e,n){super(e,n),this._handles=new si,this._sortableNodes=new Map,this._sortableMap=new Map,this._focusSortUid=null,this._newUI=Ts(_$e),this._tooltipReferenceMap=new Map,this.visibleItems=null,this.iconClass=lt.widgetIcon,this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.messages=null,this.messagesCommon=null,this.multipleSelectionEnabled=!1,this.selectionEnabled=!1,this.selectedItems=new w$e,this.viewModel=new OT,this.visibleElements={...kL},this._onSortableSort=({to:i,from:s,item:o,newIndex:r})=>{s&&i&&(s===i?this._sortLayers(this._sortableMap.get(s.dataset.group)):this._moveLayerFromChildList({to:i,from:s,item:o,newIndex:r}))},this._sortableCanSort=(i,s)=>!(!i.el.dataset.group||!s.el.dataset.group),this._sortableCanPull=(i,s,o)=>{const{listItemCanGiveFunction:r}=this,a={selected:o["data-item"],from:s.el["data-item"],to:i.el["data-item"]};return!this._sortableCanSort(i,s)||typeof r!="function"||r.call(null,a)},this._sortableCanPut=(i,s,o)=>{const{listItemCanReceiveFunction:r}=this,a={selected:o["data-item"],from:s.el["data-item"],to:i.el["data-item"]};return!this._sortableCanSort(i,s)||typeof r!="function"||r.call(null,a)},this._onSortableEnd=({oldIndex:i,from:s,to:o,item:r})=>{s!==o&&s.insertBefore(r,s.children[i])}}initialize(){const e=this.operationalItems;this._setVisibleItems(e),this.addHandles([Dn(()=>this.operationalItems,"change",()=>this._itemsChanged(e)),ge(()=>this.visibleElements,()=>this._itemsChanged(e)),ge(()=>this.selectionEnabled,()=>this._toggleAllSorting(),gt)])}loadDependencies(){return Promise.all([Fe(()=>import("./calcite-icon-5dd27db1.js"),["./calcite-icon-5dd27db1.js","./icon-1a289254.js","./dom-5b7af1bf.js","./observers-c77bfda3.js"],import.meta.url),Fe(()=>import("./calcite-tooltip-2c1ea5a7.js"),["./calcite-tooltip-2c1ea5a7.js","./tooltip-87951009.js","./dom-5b7af1bf.js","./guid-e49c4e43.js","./floating-ui-bda1a599.js","./preload-helper-41c905a7.js"],import.meta.url)])}destroy(){this._destroySortables(),this._tooltipReferenceMap.clear(),this._handles.destroy(),this._handles=null}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(e){this.viewModel.operationalItems=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...kL,...e}}triggerAction(e,n){return this.viewModel.triggerAction(e,n)}render(){var a;const{visibleItems:e,_newUI:n}=this,i=(a=this.viewModel)==null?void 0:a.state,s={[lt.newUI]:n,[lt.hidden]:i==="loading",[lt.disabled]:i==="disabled"},o=this.renderItemTooltips(),r=this.renderItems();return M("div",{class:this.classes(lt.base,s)},e!=null&&e.length?[o,r]:this.renderNoItems())}renderItemTooltip(e){const{_tooltipReferenceMap:n,messages:i}=this;return e?M("calcite-tooltip",{label:i.layerIncompatible,referenceElement:n.get(e.uid)},i.layerIncompatibleTooltip):null}renderItemTooltipNodes(e){const{incompatible:n,children:i}=e;return[n?this.renderItemTooltip(e):null,...n?[]:i==null?void 0:i.toArray().map(s=>this.renderItemTooltipNodes(s))]}renderItemTooltips(){return this.visibleItems.toArray().map(e=>this.renderItemTooltipNodes(e))}renderNoItems(){return M("div",{class:lt.noItems},this.messages.noItemsToDisplay)}renderItems(){const{visibleItems:e,selectionEnabled:n,messages:i}=this;return M("ul",{"aria-label":i.widgetLabel,role:n?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":O0,bind:this,class:this.classes(lt.list,lt.listRoot,lt.listIndependent)},e==null?void 0:e.map(s=>this.renderItem(s,null)).toArray())}renderActionsMenuIcon(e,n){const{messagesCommon:i}=this,s={[lt.actionsMenuItemActive]:e.actionsOpen};return M("div",{key:"actions-menu-toggle","data-item":e,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes(lt.actionsMenuItem,s),tabindex:"0",role:"button","aria-controls":n,"aria-label":i.options,title:i.options},M("span",{"aria-hidden":"true",class:lt.iconEllipses}))}renderActionsMenu(e,n,i,s){const{panel:o}=e,r=o&&o.visible?this.renderPanelButton(o):null,a=i===1&&this._getSingleActionButton(n),l=a?this.renderAction({item:e,action:a,singleAction:!0}):null,c=!a&&i?this.renderActionsMenuIcon(e,s):null;return c||r||a?M("div",{key:"actions-menu",class:lt.actionsMenu},r,l,c):null}renderChildList(e,n){var d;const{selectionEnabled:i}=this,{visibilityMode:s,children:o}=e,r=this._hasChildren(e),a=!r&&i&&((d=e.layer)==null?void 0:d.type)==="group",{exclusive:l,inherited:c}=Zh,u={[lt.listExclusive]:s===l,[lt.listInherited]:s===c,[lt.listIndependent]:s!==c&&s!==l};return r||a?M("ul",{bind:this,key:"list-items",id:n,"data-group":e.uid,"data-item":e,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes(lt.list,u),"aria-expanded":e.open?"true":"false",role:i?"listbox":s===l?"radiogroup":"group",hidden:!e.open&&!a||null},o==null?void 0:o.map(h=>this.renderItem(h,e)).toArray()):null}renderChildrenToggle(e,n){const{messagesCommon:i}=this,s=this._hasChildren(e),o={[lt.childToggleOpen]:e.open},r=e.open?i.collapse:i.expand;return s?M("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":e,key:"toggle-children",class:this.classes(lt.childToggle,o),tabindex:"0",role:"button","aria-controls":n,"aria-label":r,title:r},M("span",{"aria-hidden":"true",class:this.classes(lt.childClosed,lt.iconRightArrow)}),M("span",{"aria-hidden":"true",class:this.classes(lt.childOpened,lt.iconDownArrow)}),M("span",{"aria-hidden":"true",class:this.classes(lt.childClosed_RTL,lt.iconLeftArrow)})):null}renderItemMessage(e){return e.error?M("div",{key:"esri-layer-list__error",class:lt.message,role:"alert"},M("span",{"aria-hidden":"true",class:lt.iconNoticeTriangle}),this.messages.layerError):e.incompatible?M("div",{key:"esri-layer-list__incompatible",class:lt.message,role:"alert"},M("span",{bind:this,tabIndex:0,"aria-hidden":"true",class:lt.iconNoticeTriangle,afterCreate:n=>this._setTooltipReference(n,e)}),this.messages.layerIncompatible):null}renderItemContent(e,n,i){const{id:s}=this,o=`${s}_${e.uid}`,r=`${o}_actions`,a=`${o}__list`,{panel:l}=e,c=this._filterActions(e.actionsSections),u=this._countActions(c);return[M("div",{key:"list-item-container",class:lt.itemContainer},this.renderChildrenToggle(e,a),this.renderLabel(e,n,i),this.renderActionsMenu(e,c,u,r)),this.renderItemMessage(e),u?this.renderActionsSections(e,c,r):null,l&&l.open&&!l.disabled?l.render():null,this.renderChildList(e,a)]}renderItem(e,n){var d;const{_newUI:i,id:s,selectionEnabled:o,selectedItems:r}=this,a=`${`${s}_${e.uid}`}__title`,l=this._hasMessage(e),c=this._hasChildren(e),u={[lt.itemChildren]:c,[lt.itemMessage]:!!l,[lt.itemInvisible]:i&&!e.visible,[lt.itemInvisibleAtScale]:!e.visibleAtCurrentScale,[lt.itemSelectable]:o};if(o){const h={[EL]:(d=e.layer)==null?void 0:d.uid,[SL]:(!e.sortable).toString()};return M("li",{key:`item-with-selection-${e.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(lt.item,u),"aria-labelledby":a,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":e,"data-group":n?n.uid:O0,tabIndex:0,"aria-selected":m0(e,r)?"true":"false",role:"option",...h},this.renderItemContent(e,n,a))}return M("li",{key:`item-no-selection-${e.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(lt.item,u),"aria-labelledby":a},this.renderItemContent(e,n,a))}renderConnectionIcon(e){const{connectionStatus:n}=e;return q(n)?M("calcite-icon",{icon:n==="connected"?"check-circle":"offline",scale:"s"}):null}renderItemStatus(e,n){const{visibleElements:i}=this;if(!i.statusIndicators)return null;const{connectionStatus:s,publishing:o,updating:r}=e,a=r&&!n,l=!!s;return M("span",{class:this.classes({[lt.statusIndicator]:!0,[lt.publishing]:o,[lt.updating]:a,[lt.connectionStatus]:l,[lt.connectionStatusConnected]:l&&s==="connected"}),key:"layer-item-status"},this.renderConnectionIcon(e))}renderItemTitle(e,n){const{messages:i}=this;if(!e)return null;const s=e.title||i.untitledLayer,o=e.visibleAtCurrentScale?s:`${s} (${i.layerInvisibleAtScale})`;return M("span",{key:"layer-title-container",id:n,title:o,"aria-label":o,class:lt.title},s)}renderItemToggleIcon(e,n){const{_newUI:i}=this,{exclusive:s}=Zh,o=n&&n.visibilityMode,r={[lt.toggleVisibleIcon]:i,[lt.toggleIcon]:i&&o!==s,[lt.radioIcon]:i&&o===s,[lt.iconRadioSelected]:o===s&&e.visible,[lt.iconRadioUnselected]:o===s&&!e.visible,[lt.iconVisible]:o!==s&&e.visible,[lt.iconInvisible]:o!==s&&!e.visible};return M("span",{key:"item-toggle-icon",class:this.classes(r),"aria-hidden":"true"})}renderItemToggle(e,n,i){const{selectionEnabled:s,messages:o}=this,{exclusive:r}=Zh,a=n&&n.visibilityMode,l=a===r?"radio":"switch";return M("span",s?{key:"item-toggle-selection-enabled",class:lt.toggleVisible,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":a,tabIndex:0,title:e.visible?o.hideLayer:o.showLayer,"aria-checked":e.visible?"true":"false",role:l,"aria-labelledby":i}:{key:"item-toggle",class:lt.toggleVisible},this.renderItemToggleIcon(e,n))}renderLabel(e,n,i){const{selectionEnabled:s,_newUI:o,messages:r}=this,{inherited:a,exclusive:l}=Zh,c=n==null?void 0:n.visibilityMode,u=c===l?"radio":"switch",d=o?[this.renderItemTitle(e,i),this.renderItemStatus(e,n),this.renderItemToggle(e,n,i)]:[this.renderItemToggle(e,n,i),this.renderItemTitle(e,i),this.renderItemStatus(e,n)],h=M("div",s?{key:`item-label-no-selection-${e.uid}`,class:lt.label}:{key:`item-label-with-selection-${e.uid}`,class:lt.label,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":c,tabIndex:0,"aria-checked":e.visible?"true":"false",title:e.visible?r.hideLayer:r.showLayer,role:u,"aria-labelledby":i},d);return c===a||e.error?M("div",{key:`item-label-container-${e.uid}`,class:lt.label},this.renderItemTitle(e,i),this.renderItemStatus(e,n)):h}renderPanelButton(e){const{className:n,open:i,title:s,image:o}=e,r=o||n?n:lt.iconDefaultAction,a=this._getIconImageStyles(e),l={[lt.actionsMenuItemActive]:i},c={[lt.actionImage]:!!a["background-image"],[lt.disabledElement]:e.disabled};return r&&(c[r]=!!r),M("div",{"aria-disabled":e.disabled.toString(),key:`panel-${e.uid}`,bind:this,"data-panel":e,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes(lt.actionsMenuItem,l),role:"button",tabindex:e.disabled?null:0,title:s,"aria-label":s},M("span",{class:this.classes(c),styles:a}))}renderActionsSections(e,n,i){const s=n.toArray().map((o,r)=>M("ul",{key:`${e}-action-section-${r}`,class:lt.actionsList},this.renderActionSection(e,o)));return M("div",{role:"group","aria-expanded":e.actionsOpen?"true":"false",key:"actions-section",id:i,class:lt.actions,hidden:!e.actionsOpen||null},s)}renderActionSection(e,n){return(n&&n.toArray()).map(i=>this.renderAction({item:e,action:i}))}renderActionIcon(e){const{active:n,className:i}=e,s=this._getIconImageStyles(e),o=e.type!=="button"||e.image||i?i:lt.iconDefaultAction,r={[lt.actionImage]:!n&&!!s["background-image"],[lt.iconLoading]:n,[lt.rotating]:n};return o&&!n&&(r[o]=!0),M("span",{key:"action-icon","aria-hidden":"true",class:this.classes(lt.actionIcon,r),styles:s})}renderActionTitle(e,n){return n?null:M("span",{key:"action-title",class:lt.actionTitle},e)}renderAction(e){const{item:n,action:i,singleAction:s}=e,{active:o,disabled:r,title:a}=i,l={[lt.actionsMenuItem]:s&&i.type==="button",[lt.action]:o||!s&&i.type!=="toggle",[lt.actionToggle]:!o&&i.type==="toggle",[lt.actionToggleOn]:!o&&i.type==="toggle"&&i.value,[lt.disabledElement]:r},c=[this.renderActionIcon(i),this.renderActionTitle(a,s)];return s?M("div",{bind:this,"data-item":n,"data-action":i,role:"button",key:`single-action-${i.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:l,tabindex:"0",title:a,"aria-label":a},c):M("li",{bind:this,"data-item":n,"data-action":i,key:`action-${i.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:l,tabindex:"0",role:"button",title:a,"aria-label":a},c)}_setTooltipReference(e,n){this._tooltipReferenceMap.set(n.uid,e),this.scheduleRender()}_hasMessage(e){return!!e.error||e.incompatible}_hasChildren(e){return!!e.children.length&&!this._hasMessage(e)}_sortNodeRemoved(e){const{_sortableMap:n}=this,i=e.dataset.group,s=n.get(i);s&&s.destroy(),n.delete(i)}_destroySortables(){const{_sortableMap:e,_sortableNodes:n}=this;e.forEach(i=>i&&i.destroy()),e.clear(),n.clear()}_moveLayerFromChildList({to:e,from:n,item:i,newIndex:s}){const o=i["data-item"],r=e["data-item"],a=n["data-item"];this.viewModel.moveListItem(o,a,r,s)}_sortLayers(e){var s,o;if(!e)return;const n=e.el["data-item"],i=e.toArray();n?MIe(n,i):$4((o=(s=this.view)==null?void 0:s.map)==null?void 0:o.layers,i)}_toggleSorting(e,n){const{_sortableMap:i,selectionEnabled:s}=this,o=i.get(n),r=e["data-item"],a=(n===O0||r.childrenSortable&&IIe(r))&&s;if(o)o.option("disabled",!a);else if(a){const l=Dt.create(e,{dataIdAttr:EL,group:{name:n,pull:this._sortableCanPull,put:this._sortableCanPut},filter:`[${SL}="true"]`,fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!a,chosenClass:lt.sortableChosen});i.set(n,l)}}_toggleAllSorting(){this._sortableNodes.forEach((e,n)=>this._toggleSorting(e,n))}_sortNodeCreated(e){const n=e.dataset.group;n&&(this._sortableNodes.set(n,e),this._toggleSorting(e,n))}_setVisibleItems(e){this.visibleItems=e==null?void 0:e.filter(n=>!n.hidden&&(this.visibleElements.errors||!n.error))}_getSingleActionButton(e){return e.reduce(n=>n).filter(n=>n&&n.type==="button").getItemAt(0)}_focusListItem(e){var i;const{_focusSortUid:n}=this;!e||!n||((i=e["data-item"].layer)==null?void 0:i.uid)===n&&(e.focus(),this._focusSortUid=null)}_watchActionSectionChanges(e,n){const i=L0.actionSection+n;this._handles.add(e.on("change",this.scheduleRender.bind(this)),i),e.forEach(s=>this._renderOnActionChanges(s,n))}_renderOnActionChanges(e,n){const i=L0.actions+n;e.type!=="toggle"?e.type!=="slider"?this._handles.add(ge(()=>[e==null?void 0:e.className,e==null?void 0:e.image,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible],()=>this.scheduleRender(),gt),i):this._handles.add(ge(()=>[e==null?void 0:e.className,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible,e==null?void 0:e.value,e==null?void 0:e.displayValueEnabled,e==null?void 0:e.max,e==null?void 0:e.min,e==null?void 0:e.step],()=>this.scheduleRender(),gt),i):this._handles.add(ge(()=>[e==null?void 0:e.className,e==null?void 0:e.image,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible,e==null?void 0:e.value],()=>this.scheduleRender(),gt),i)}_renderOnItemChanges(e){const n=e.uid,i=L0.items+n;this._handles.add([ge(()=>{var s,o,r;return[e==null?void 0:e.actionsOpen,e==null?void 0:e.visible,e==null?void 0:e.open,e==null?void 0:e.updating,e==null?void 0:e.connectionStatus,e==null?void 0:e.publishing,e==null?void 0:e.title,e==null?void 0:e.visibleAtCurrentScale,e==null?void 0:e.error,e==null?void 0:e.visibilityMode,e==null?void 0:e.panel,(s=e==null?void 0:e.panel)==null?void 0:s.title,(o=e==null?void 0:e.panel)==null?void 0:o.content,(r=e==null?void 0:e.panel)==null?void 0:r.className,e==null?void 0:e.sortable,e==null?void 0:e.childrenSortable]},()=>this.scheduleRender(),us),ge(()=>[e==null?void 0:e.hidden,e==null?void 0:e.error],()=>this._setVisibleItems(this.operationalItems)),e.actionsSections.on("change",()=>this.scheduleRender()),e.children.on("change",()=>this.scheduleRender())],i),e.children.forEach(s=>this._renderOnItemChanges(s)),e.actionsSections.forEach(s=>this._watchActionSectionChanges(s,n))}_itemsChanged(e){this._handles.removeAll(),e.forEach(n=>this._renderOnItemChanges(n)),this._tooltipReferenceMap.clear(),this._setVisibleItems(e),this.scheduleRender()}_filterActions(e){return e.map(n=>n.filter(i=>i.visible))}_countActions(e){return e.reduce((n,i)=>n+i.length,0)}_getIconImageStyles(e){const n=e.declaredClass==="esri.widgets.LayerList.ListItemPanel"||e.declaredClass==="esri.support.Action.ActionButton"||e.declaredClass==="esri.support.Action.ActionToggle"?e.image:null;return{"background-image":n?`url("${n}")`:null}}_selectionKeydown(e){var m,g,y,_;const n=["ArrowDown","ArrowUp"],i=ec(e);if(!n.includes(i))return void this._toggleSelection(e);e.stopPropagation();const s=e.currentTarget,o=s["data-item"],{_sortableMap:r,selectedItems:a}=this,l=s.dataset.group,c=r.get(l);if(!c)return;const u=m0(o,a),d=c.toArray(),h=e.target,f=d.indexOf(h.dataset[C$e]);if(f!==-1){if(i==="ArrowDown"){const C=f+1;if(C>=d.length)return;u?(CL(d,f,C),c.sort(d),this._sortLayers(c),this._focusSortUid=(m=o.layer)==null?void 0:m.uid):(this._focusSortUid=(g=o.layer)==null?void 0:g.uid,this.scheduleRender())}if(i==="ArrowUp"){const C=f-1;if(C<=-1)return;u?(CL(d,f,C),c.sort(d),this._sortLayers(c),this._focusSortUid=(y=o.layer)==null?void 0:y.uid):(this._focusSortUid=(_=o.layer)==null?void 0:_.uid,this.scheduleRender())}}}_toggleActionsOpen(e){const n=e.currentTarget["data-item"],{actionsOpen:i}=n,s=!i;s&&this.operationalItems.forEach(o=>$5(o)),n.actionsOpen=s,e.stopPropagation()}_triggerPanel(e){const n=e.currentTarget["data-panel"];e.stopPropagation(),n&&!n.disabled&&(n.open=!n.open)}_triggerAction(e){const n=e.currentTarget,i=n["data-action"],s=n["data-item"];i.type==="toggle"&&(i.value=!i.value),this.triggerAction(i,s),e.stopPropagation()}_toggleVisibility(e){const n=e.currentTarget,i=n.getAttribute("data-parent-visibility"),s=n["data-item"];i===Zh.exclusive&&s.visible||(s.visible=!s.visible),e.stopPropagation()}_toggleChildrenClick(e){const n=e.currentTarget["data-item"];n.open=!n.open,e.stopPropagation()}_toggleSelection(e){var a,l;e.stopPropagation();const{multipleSelectionEnabled:n,selectedItems:i}=this,s=e.currentTarget["data-item"],o=m0(s,i),{length:r}=i;if(!n)return r&&!(o&&r===1)?(i.removeAll(),void i.add(s)):void(o?(a=i.remove)==null?void 0:a.call(i,o):i.add(s));o?(l=i.remove)==null||l.call(i,o):i.add(s)}};v([b()],zn.prototype,"visibleItems",void 0),v([b()],zn.prototype,"iconClass",void 0),v([b()],zn.prototype,"label",null),v([b()],zn.prototype,"listItemCanGiveFunction",void 0),v([b()],zn.prototype,"listItemCanReceiveFunction",void 0),v([b()],zn.prototype,"listItemCreatedFunction",null),v([b(),rn("esri/widgets/LayerList/t9n/LayerList")],zn.prototype,"messages",void 0),v([b(),rn("esri/t9n/common")],zn.prototype,"messagesCommon",void 0),v([b()],zn.prototype,"multipleSelectionEnabled",void 0),v([b()],zn.prototype,"operationalItems",null),v([b()],zn.prototype,"selectionEnabled",void 0),v([b()],zn.prototype,"selectedItems",void 0),v([b()],zn.prototype,"view",null),v([Sh("trigger-action"),b({type:OT})],zn.prototype,"viewModel",void 0),v([b()],zn.prototype,"visibleElements",void 0),v([ii("visibleElements")],zn.prototype,"castVisibleElements",null),v([Sn()],zn.prototype,"_toggleActionsOpen",null),v([Sn()],zn.prototype,"_triggerPanel",null),v([Sn()],zn.prototype,"_triggerAction",null),v([Sn()],zn.prototype,"_toggleVisibility",null),v([Sn()],zn.prototype,"_toggleChildrenClick",null),v([Sn()],zn.prototype,"_toggleSelection",null),zn=v([Ae("esri.widgets.LayerList")],zn);const S$e=zn;function kS(t,e){return t===e||q(t)&&q(e)&&vc(t.spatialReference,e.spatialReference)&&t.x===e.x&&t.y===e.y&&t.z===e.z&&t.m===e.m}const Zn={main:new cn([255,127,0]),selected:new cn([255,255,255]),outline:new cn([0,0,0,.5]),selectedOutline:new cn([255,255,255]),hoverOutline:new cn([255,255,255]),secondary:new cn([255,255,255]),secondaryOutline:new cn([100,100,100]),transparent:new cn([0,0,0,0])};function Th(t,e){if(e)for(const n in e)t[n]=e[n]}let qf=class{constructor(e){this.size=8,this.hoverSize=10,this.color=Zn.main,this.hoverColor=Zn.main,this.outlineColor=Zn.outline,this.hoverOutlineColor=Zn.hoverOutline,Th(this,e)}};class E$e{constructor(e){this.color=Zn.secondary,this.hoverColor=Zn.main,Th(this,e)}}let k$e=class{constructor(e){this.color=Zn.transparent,this.hoverColor=Zn.transparent,this.outlineColor=Zn.main,this.hoverOutlineColor=Zn.main,this.stagedColor=Zn.transparent,this.stagedOutlineColor=Zn.secondary,Th(this,e)}},T$e=class{constructor(e){this.vertex=new qf,this.midpoint=new qf({color:Zn.secondary,outlineColor:Zn.secondaryOutline,size:6}),this.selected=new qf({color:Zn.selected,hoverColor:Zn.selected,hoverOutlineColor:Zn.hoverOutline}),Th(this,e)}},I$e=class{constructor(e){this.center=new qf({color:Zn.secondaryOutline}),this.fill=new k$e,this.line=new E$e,this.vertex=new qf({color:Zn.selected,outlineColor:Zn.main,hoverColor:Zn.selected,hoverOutlineColor:Zn.secondaryOutline}),Th(this,e)}},x$e=class{constructor(e){this.reshapeGraphics=new T$e,this.transformGraphics=new I$e,Th(this,e)}};const $De=new x$e;let A5=class extends bg{constructor(e,n,i){super(n,i),this.point=e}equals(e){return e instanceof A5&&fs(this.point,e.point)}},M$e=class{draw(e,n){const i=this._getUniqueHints(e),s=[];for(const o of i)o instanceof $T&&s.push(this.visualizeIntersectionPoint(o,n)),o instanceof _r&&s.push(this.visualizeLine(o,n)),o instanceof xT&&s.push(this.visualizeParallelSign(o,n)),o instanceof D_&&s.push(this.visualizeRightAngleQuad(o,n)),o instanceof A5&&s.push(this.visualizePoint(o,n));return AS(s)}_getUniqueHints(e){const n=[];for(const i of e){let s=!0;for(const o of n)if(i.equals(o)){s=!1;break}s&&n.push(i)}return n}},$$e=class extends M$e{constructor(e){super(),this._graphicsLayer=e}visualizeIntersectionPoint(e,n){return this._visualizeSnappingIndicator(new Kt({x:e.intersectionPoint[0],y:e.intersectionPoint[1],spatialReference:n.coordinateHelper.spatialReference}),L$e)}visualizePoint(e,n){return this._visualizeSnappingIndicator(new Kt({x:e.point[0],y:e.point[1],spatialReference:n.coordinateHelper.spatialReference}),O$e)}visualizeLine(e,n){return this._visualizeSnappingIndicator(new up({paths:[[e.lineStart,e.lineEnd]],spatialReference:n.coordinateHelper.spatialReference}),P$e)}visualizeParallelSign(e,n){return this._visualizeSnappingIndicator(new up({paths:[[e.lineStart,e.lineEnd]],spatialReference:n.coordinateHelper.spatialReference}),R$e)}visualizeRightAngleQuad(e,n){return this._visualizeSnappingIndicator(new up({paths:[[e.previousVertex,e.centerVertex,e.nextVertex]],spatialReference:n.coordinateHelper.spatialReference}),D$e(e))}_visualizeSnappingIndicator(e,n){const i=new Ls({geometry:e,symbol:n});return this._graphicsLayer.add(i),lc(()=>{this._graphicsLayer.remove(i)})}};const rh=Zn.main.toArray(),A$e=[...Zn.main.toRgb(),100],L$e=new lr({outline:new em({width:1.5,color:rh}),size:15,color:[0,0,0,0]}),O$e=new lr({outline:{width:.5,color:[0,0,0,1]},size:10,color:rh}),P$e=new nE({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:cz.Butt,joinStyle:uz.Round,miterLimit:10,width:Ru(ko.lineHintWidthTarget),color:rh}]}}}),R$e=new nE({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:rh}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:rh}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),L5=t=>new nE({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:Ru(ko.rightAngleHintSize),rotation:t,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:Ru(ko.rightAngleHintOutlineSize),color:rh},{type:"CIMSolidFill",enable:!0,color:A$e}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),V$e=L5(45),F$e=L5(225),D$e=(()=>{const t=Jt(),e=Jt(),n=ht();return i=>(di(t,i.centerVertex,i.previousVertex),di(e,i.nextVertex,i.previousVertex),yO(n,t,e),n[2]<0?V$e:F$e)})();var Ci;(function(t){t[t.Z=0]="Z",t[t.M=1]="M"})(Ci||(Ci={}));let N$e=class{constructor(e){this.spatialReference=e}createVector(){return this._tag(Jt())}pointToVector(e){return this._tag(Cf(e.x,e.y))}arrayToVector(e){return this._tag(Cf(e[0],e[1]))}vectorToArray(e){return[e[0],e[1]]}pointToArray(e){return[e.x,e.y]}vectorToPoint(e,n=new Kt){return n.x=e[0],n.y=e[1],n.z=void 0,n.m=void 0,n.spatialReference=this.spatialReference,n}arrayToPoint(e,n=new Kt){return n.x=e[0],n.y=e[1],n.z=void 0,n.m=void 0,n.spatialReference=this.spatialReference,n}vectorToDehydratedPoint(e,n={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){return n.x=e[0],n.y=e[1],n.z=void 0,n.m=void 0,n.hasZ=!1,n.hasM=!1,n.spatialReference=this.spatialReference,n}lerp(e,n,i,s){return XS(s,e,n,i)}addDelta(e,n,i){e[0]+=n,e[1]+=i}distance(e,n){return Qm(e,n)}getZ(e,n){return n}hasZ(){return!1}getM(e,n){return n}hasM(){return!1}clone(e){return this._tag(TB(e))}copy(e,n){return im(n,e)}fromXYZ(e){return this._tag(Cf(e[0],e[1]))}toXYZ(e,n=ht()){return ia(n,e[0],e[1],0)}equals(e,n){return _O(e,n)}_tag(e){return e}},TL=class{constructor(e,n){this._valueType=e,this.spatialReference=n}createVector(){return this._tag(ht())}pointToVector(e){return this._tag(wo(e.x,e.y,this._valueType===Ci.Z?e.z:e.m))}arrayToVector(e){return this._tag(wo(e[0],e[1],e[2]||0))}vectorToArray(e){return[e[0],e[1],e[2]]}pointToArray(e){return this._valueType===Ci.Z?[e.x,e.y,e.z]:[e.x,e.y,e.m]}vectorToPoint(e,n=new Kt){return n.x=e[0],n.y=e[1],n.z=this._valueType===Ci.Z?e[2]:void 0,n.m=this._valueType===Ci.M?e[2]:void 0,n.spatialReference=this.spatialReference,n}arrayToPoint(e,n=new Kt){return n.x=e[0],n.y=e[1],n.z=this._valueType===Ci.Z?e[2]:void 0,n.m=this._valueType===Ci.M?e[2]:void 0,n.spatialReference=this.spatialReference,n}vectorToDehydratedPoint(e,n={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){const i=this._valueType===Ci.Z,s=this._valueType===Ci.M;return n.x=e[0],n.y=e[1],n.z=i?e[2]:void 0,n.m=s?e[2]:void 0,n.hasZ=i,n.hasM=s,n.spatialReference=this.spatialReference,n}lerp(e,n,i,s){return PB(s,e,n,i)}addDelta(e,n,i,s){e[0]+=n,e[1]+=i,this._valueType===Ci.Z&&(e[2]+=s)}distance(e,n){return this._valueType===Ci.Z?QS(e,n):Qm(e,n)}getZ(e,n){return this._valueType===Ci.Z?e[2]:n}hasZ(){return this._valueType===Ci.Z}getM(e,n){return this._valueType===Ci.M?e[2]:n}hasM(){return this._valueType===Ci.M}clone(e){return this._tag(QB(e))}copy(e,n){return sc(n,e)}fromXYZ(e,n=0,i=0){return this._tag(wo(e[0],e[1],this._valueType===Ci.Z?e.length>2?e[2]:n:i))}toXYZ(e,n=ht()){return ia(n,e[0],e[1],this._valueType===Ci.Z?e[2]:0)}equals(e,n){return q0(e,n)}_tag(e){return e}},B$e=class{constructor(e){this.spatialReference=e}createVector(){return this._tag(fz())}pointToVector(e){return this._tag(Z_(e.x,e.y,e.z,e.m))}arrayToVector(e){return this._tag(Z_(e[0],e[1],e[2]||0,e[3]||0))}vectorToArray(e){return[e[0],e[1],e[2],e[3]]}pointToArray(e){return[e.x,e.y,e.z,e.m]}vectorToPoint(e,n=new Kt){return n.x=e[0],n.y=e[1],n.z=e[2],n.m=e[3],n.spatialReference=this.spatialReference,n}arrayToPoint(e,n=new Kt){return n.x=e[0],n.y=e[1],n.z=e[2],n.m=e[3],n.spatialReference=this.spatialReference,n}vectorToDehydratedPoint(e,n={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){return n.x=e[0],n.y=e[1],n.z=e[2],n.m=e[3],n.hasZ=!0,n.hasM=!0,n.spatialReference=this.spatialReference,n}lerp(e,n,i,s){return dz(s,e,n,i)}addDelta(e,n,i,s){e[0]+=n,e[1]+=i,e[2]+=s}distance(e,n){return QS(e,n)}getZ(e){return e[2]}hasZ(){return!0}getM(e){return e[3]}hasM(){return!0}clone(e){return this._tag(mz(e))}copy(e,n){return pz(n,e)}fromXYZ(e,n=0,i=0){return this._tag(Z_(e[0],e[1],e.length>2?e[2]:n,i))}toXYZ(e,n=ht()){return ia(n,e[0],e[1],e[2])}equals(e,n){return hz(e,n)}_tag(e){return e}};function qT(t,e,n){return t&&e?new B$e(n):e?new TL(Ci.M,n):t?new TL(Ci.Z,n):new N$e(n)}function z$e(t,e){if(!e.supported)return;let n=1/0,i=-1/0;const s=e.upperBoundX-e.lowerBoundX;t.forEach(r=>{let a=r.pos[0];for(;a<e.lowerBoundX;)a+=s;for(;a>e.upperBoundX;)a-=s;n=Math.min(n,a),i=Math.max(i,a),r.pos[0]=a});const o=i-n;s-o<o&&t.forEach(r=>{r.pos[0]<0&&(r.pos[0]+=s)})}function H$e(t,e){const n=VS(t);return e===mr.Global&&n?{supported:!0,lowerBoundX:n.valid[0],upperBoundX:n.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}let Kf=class{constructor(e){this.component=e,this.leftEdge=null,this.rightEdge=null,this.type="vertex",this.index=null}get pos(){return this._pos}set pos(e){this._pos=e,this.component.unnormalizeVertexPositions()}},qa=class{constructor(e,n,i){this.component=e,this.leftVertex=n,this.rightVertex=i,this.type="edge",n.rightEdge=this,i.leftEdge=this}},Mp=class{constructor(e,n){this._spatialReference=e,this._viewingMode=n,this.vertices=[],this.edges=[]}unnormalizeVertexPositions(){this.vertices.length<=1||z$e(this.vertices,H$e(this._spatialReference,this._viewingMode))}updateVertexIndex(e,n){if(this.vertices.length===0)return;const i=this.vertices[0];let s=null,o=e,r=n;do s=o,s.index=r++,o=s.rightEdge?s.rightEdge.rightVertex:null;while(o!=null&&o!==i);s.leftEdge&&s!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(s),this.vertices.length-1)}getFirstVertex(){return this.vertices.length===0?null:this.vertices[0]}getLastVertex(){return this.vertices.length===0?null:this.vertices[this.vertices.length-1]}isClosed(){return this.vertices.length>2&&this.vertices[0].leftEdge!==null}swapVertices(e,n){const i=this.vertices[e];this.vertices[e]=this.vertices[n],this.vertices[n]=i}iterateVertices(e){if(this.vertices.length===0)return;const n=this.vertices[0];let i=n;do e(i,i.index),i=q(i.rightEdge)?i.rightEdge.rightVertex:null;while(i!==n&&i!=null)}},Cg=class extends Ii{constructor(e,n){super(),this.type=e,this.coordinateHelper=n,this._geometry=null,this._dirty=!0,this.components=[]}get geometry(){if(this._dirty){switch(this.type){case"point":this._geometry=this._toPoint();break;case"polyline":this._geometry=this._toPolyline();break;case"polygon":this._geometry=this._toPolygon()}this._dirty=!1}return this._geometry}get spatialReference(){return this.coordinateHelper.spatialReference}notifyChanges(e){this._dirty=!0,this.emit("change",e)}_toPoint(){return this.components.length===0||this.components[0].vertices.length===0?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)}_toPolyline(){const e=[],n=this.coordinateHelper.vectorToArray;for(const i of this.components){if(i.vertices.length<1)continue;const s=[];let o=i.vertices.find(a=>a.leftEdge==null);const r=o;do s.push(n(o.pos)),o=o.rightEdge?o.rightEdge.rightVertex:null;while(o&&o!==r);e.push(s)}return new up({paths:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}_toPolygon(){const e=[],n=this.coordinateHelper.vectorToArray;for(const i of this.components){if(i.vertices.length<1)continue;const s=[],o=i.vertices[0];let r=o;const a=r;do s.push(n(r.pos)),r=q(r.rightEdge)?r.rightEdge.rightVertex:null;while(r&&r!==a);i.isClosed()&&s.push(n(o.pos)),e.push(s)}return new cp({rings:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}static fromGeometry(e,n){const i=e.spatialReference,s=qT(e.hasZ,e.hasM,i),o=new Cg(e.type,s);switch(e.type){case"polygon":{const r=e.rings;for(let a=0;a<r.length;++a){const l=r[a],c=new Mp(i,n),u=l.length>2&&Ly(l[0],l[l.length-1]),d=u?l.length-1:l.length;for(let f=0;f<d;++f){const m=s.arrayToVector(l[f]),g=new Kf(c);c.vertices.push(g),g.pos=m,g.index=f}const h=c.vertices.length-1;for(let f=0;f<h;++f){const m=c.vertices[f],g=c.vertices[f+1],y=new qa(c,m,g);c.edges.push(y)}if(u){const f=new qa(c,c.vertices[c.vertices.length-1],c.vertices[0]);c.edges.push(f)}o.components.push(c)}break}case"polyline":for(const r of e.paths){const a=new Mp(i,n),l=r.length;for(let u=0;u<l;++u){const d=s.arrayToVector(r[u]),h=new Kf(a);a.vertices.push(h),h.pos=d,h.index=u}const c=a.vertices.length-1;for(let u=0;u<c;++u){const d=a.vertices[u],h=a.vertices[u+1],f=new qa(a,d,h);a.edges.push(f)}o.components.push(a)}break;case"point":{const r=new Mp(i,n),a=new Kf(r);a.index=0,a.pos=s.pointToVector(e),r.vertices.push(a),o.components.push(r);break}}return o}};var Ra;(function(t){t[t.NEW_STEP=0]="NEW_STEP",t[t.ACCUMULATE_STEPS=1]="ACCUMULATE_STEPS"})(Ra||(Ra={}));let U$e=class{constructor(e,n,i){this._editGeometry=e,this._component=n,this._pos=i,this._addedVertex=null,this._originalEdge=null,this._left=null,this._right=null}apply(){let e="redo";ke(this._addedVertex)&&(e="apply",this._addedVertex=new Kf(this._component));const n=this._component.getLastVertex();if(ke(n))this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._addedVertex.index=0;else{let i=null;n.rightEdge&&(this._originalEdge=n.rightEdge,i=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1)),this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,ke(this._left)&&(this._left=new qa(this._component,n,this._addedVertex)),this._component.edges.push(this._left),n.rightEdge=this._left,q(this._originalEdge)&&q(i)&&(ke(this._right)&&(this._right=new qa(this._component,this._addedVertex,i)),this._component.edges.push(this._right),i.leftEdge=this._right),this._component.updateVertexIndex(this._addedVertex,n.index+1)}this._editGeometry.notifyChanges({operation:e,addedVertices:[this._addedVertex]})}undo(){ke(this._addedVertex)||(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),q(this._left)&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=null),q(this._right)&&(this._component.edges.splice(this._component.edges.indexOf(this._right),1),this._right.rightVertex.leftEdge=null),q(this._originalEdge)&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),q(this._left)?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this._addedVertex]}))}accumulate(){return!1}},O5=class{constructor(e,n,i){this._editGeometry=e,this._vertices=n,this.operation=i,this._undone=!1}apply(){this._vertices.forEach(e=>this.operation.apply(e)),this._editGeometry.components.forEach(e=>e.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:this._undone?"redo":"apply",updatedVertices:this._vertices})}undo(){this._vertices.forEach(e=>this.operation.undo(e)),this._editGeometry.notifyChanges({operation:"undo",updatedVertices:this._vertices}),this._undone=!0}canAccumulate(e){if(this._undone||e._vertices.length!==this._vertices.length)return!1;for(let n=0;n<e._vertices.length;++n)if(e._vertices[n]!==this._vertices[n])return!1;return this.operation.canAccumulate(e.operation)}accumulate(e){return!!(e instanceof O5&&this.canAccumulate(e))&&(this._vertices.forEach(n=>this.operation.accumulate(n,e.operation)),this.operation.accumulateParams(e.operation),this._editGeometry.components.forEach(n=>n.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:"apply",updatedVertices:this._vertices}),!0)}};var ea;(function(t){t[t.CUMULATIVE=0]="CUMULATIVE",t[t.REPLACE=1]="REPLACE"})(ea||(ea={}));let W$e=class{constructor(e,n,i=0){this._editGeometry=e,this._vertices=n,this._minNumberOfVertices=i,this.removedVertices=null}apply(){let e="redo";if(this.removedVertices==null){const n=this.removedVertices=[];this._vertices.forEach(i=>{const s=this._removeVertex(i);q(s)&&n.push(s)}),e="apply"}else this.removedVertices.forEach(n=>{this._removeVertex(n.removedVertex)});this._editGeometry.notifyChanges({operation:e,removedVertices:this._vertices})}undo(){var e;(e=this.removedVertices)==null||e.forEach(n=>{this._undoRemoveVertex(n)}),this._editGeometry.notifyChanges({operation:"undo",addedVertices:this._vertices})}accumulate(){return!1}_removeVertex(e){const n=e.component;if(n.vertices.length<=this._minNumberOfVertices)return null;const i={removedVertex:e,createdEdge:null},s=e.leftEdge,o=e.rightEdge;return n.vertices.splice(n.vertices.indexOf(e),1),s&&(n.edges.splice(n.edges.indexOf(s),1),s.leftVertex.rightEdge=null),o&&(n.edges.splice(n.edges.indexOf(o),1),o.rightVertex.leftEdge=null),e.index===0&&o&&this._vertices.length>0&&n.swapVertices(n.vertices.indexOf(o.rightVertex),0),s&&o&&(i.createdEdge=new qa(n,s.leftVertex,o.rightVertex),n.edges.push(i.createdEdge)),o&&n.updateVertexIndex(o.rightVertex,o.rightVertex.index-1),i}_undoRemoveVertex(e){const n=e.removedVertex,i=e.removedVertex.component,s=n.leftEdge,o=n.rightEdge;e.createdEdge&&i.edges.splice(i.edges.indexOf(e.createdEdge),1),i.vertices.push(n),s&&(i.edges.push(s),s.leftVertex.rightEdge=s),o&&(i.edges.push(o),o.rightVertex.leftEdge=o),i.updateVertexIndex(n,n.index)}},G$e=class{constructor(e,n,i){this._editGeometry=e,this._edge=n,this._t=i,this.createdVertex=null,this._left=null,this._right=null}apply(){let e="redo";const n=this._edge,i=n.component,s=n.leftVertex,o=n.rightVertex;i.edges.splice(i.edges.indexOf(n),1),ke(this.createdVertex)&&(e="apply",this.createdVertex=new Kf(n.component)),i.vertices.push(this.createdVertex),this.createdVertex.pos=this._editGeometry.coordinateHelper.lerp(n.leftVertex.pos,n.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector()),ke(this._left)&&(this._left=new qa(i,s,this.createdVertex)),this._left.leftVertex.leftEdge?i.edges.push(this._left):i.edges.unshift(this._left),s.rightEdge=this._left,ke(this._right)&&(this._right=new qa(i,this.createdVertex,o)),i.edges.push(this._right),o.leftEdge=this._right,i.updateVertexIndex(this.createdVertex,s.index+1),this._editGeometry.notifyChanges({operation:e,addedVertices:[this.createdVertex]})}undo(){if(ke(this.createdVertex)||ke(this._left)||ke(this._right))return null;const e=this._edge,n=e.component,i=this.createdVertex.leftEdge,s=this.createdVertex.rightEdge,o=i==null?void 0:i.leftVertex,r=s==null?void 0:s.rightVertex;n.vertices.splice(n.vertices.indexOf(this.createdVertex),1),n.edges.splice(n.edges.indexOf(this._left),1),n.edges.splice(n.edges.indexOf(this._right),1),this._edge.leftVertex.leftEdge?n.edges.push(this._edge):n.edges.unshift(this._edge),o&&(o.rightEdge=e),r&&(r.leftEdge=e),o&&n.updateVertexIndex(o,o.index),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})}accumulate(){return!1}},P5=class{constructor(e,n,i){this._editGeometry=e,this._vertex=n,this._pos=i}apply(){const e=ke(this._originalPosition);e&&(this._originalPosition=this._vertex.pos),this._apply(e?"apply":"redo")}undo(){this._vertex.pos=zt(this._originalPosition),this._editGeometry.notifyChanges({operation:"undo",updatedVertices:[this._vertex]})}accumulate(e){return e instanceof P5&&e._vertex===this._vertex&&(this._pos=e._pos,this._apply("apply"),!0)}_apply(e){this._vertex.pos=this._pos,this._editGeometry.components.forEach(n=>n.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:e,updatedVertices:[this._vertex]})}},j$e=class{constructor(e,n){this._editGeometry=e,this._component=n,this._createdEdge=null}apply(){let e="redo";if(ke(this._createdEdge)){e="apply";const n=this._component.getFirstVertex(),i=this._component.getLastVertex();if(this._component.isClosed()||this._component.vertices.length<3||ke(n)||ke(i))return;this._createdEdge=new qa(this._component,i,n)}this._createdEdge.leftVertex.rightEdge=this._createdEdge,this._createdEdge.rightVertex.leftEdge=this._createdEdge,this._component.edges.push(this._createdEdge),this._editGeometry.notifyChanges({operation:e})}undo(){ke(this._createdEdge)||(V0(this._component.edges,this._createdEdge),this._createdEdge.leftVertex.rightEdge=null,this._createdEdge.rightVertex.leftEdge=null,this._editGeometry.notifyChanges({operation:"undo"}))}accumulate(){return!1}},R5=class{constructor(e,n,i,s){this._helper=e,this.dx=n,this.dy=i,this.dz=s}_move(e,n,i,s){this._helper.addDelta(e.pos,n,i,s)}apply(e){this._move(e,this.dx,this.dy,this.dz)}undo(e){this._move(e,-this.dx,-this.dy,-this.dz)}canAccumulate(e){return e instanceof R5}accumulate(e,n){this._move(e,n.dx,n.dy,n.dz)}accumulateParams(e){this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz}},TS=class{constructor(e,n,i,s=0,o=Yf.IMMEDIATE){this._helper=e,this._planeType=n,this._edge=i,this.distance=s,this._plane=$I(),this._offsetPlane=$I(),this._minDistance=-1/0,this._maxDistance=1/0,this._selectedArrow=1,o===Yf.IMMEDIATE&&this._initialize()}get plane(){return this._plane}get requiresSplitEdgeLeft(){return!this._left.isOriginalDirection}get requiresSplitEdgeRight(){return!this._right.isOriginalDirection}get edgeDirection(){return this._edgeDirection}_initialize(){this._initializeNeighbors(),this._initializePlane(),this._initializeDistanceConstraints()}_initializeNeighbors(){var o,r,a,l;const e=this._toXYZ(this._edge.leftVertex.pos),n=this._toXYZ((r=(o=this._edge.leftVertex.leftEdge)==null?void 0:o.leftVertex)==null?void 0:r.pos),i=this._toXYZ(this._edge.rightVertex.pos),s=this._toXYZ((l=(a=this._edge.rightVertex.rightEdge)==null?void 0:a.rightVertex)==null?void 0:l.pos);this._edgeDirection=SI(ht(),e,i),this._left=this._computeNeighbor(e,n,this._edgeDirection),this._right=this._computeNeighbor(i,s,this._edgeDirection)}_toXYZ(e){return q(e)?this._helper.toXYZ(e):null}_pointToXYZ(e){return this._toXYZ(this._helper.pointToVector(e))}_computeNeighbor(e,n,i){if(ke(n))return{start:e,end:n,direction:wo(-i[1],i[0],0),isOriginalDirection:!0};const s=SI(ht(),e,n),o=!this._passesBisectingAngleThreshold(s,i);return{start:e,end:n,direction:o?this._bisectVectorsPerpendicular(i,s):s,isOriginalDirection:!o}}_passesBisectingAngleThreshold(e,n){const i=Math.abs(bz(n,e));return i>=IL&&i<=Math.PI-IL}_bisectVectorsPerpendicular(e,n){const i=Hi(e,n)<0?e:EI(ht(),e),s=Math.abs(Hi(i,n));if(!(s<xL||s>1-xL))return this._bisectDirection(i,n);const o=uc(ht(),i,[0,0,1]);return Jh(o,o)}_bisectDirection(e,n){const i=du(ht(),e,n);return Jh(i,i)}_initializePlane(){const e=this._computeNormalDirection(this._left),n=this._computeNormalDirection(this._right);Hi(e,n)<0&&EI(n,n),gz(this._left.start,this._bisectDirection(e,n),this._plane)}_computeNormalDirection(e){const n=uc(ht(),e.direction,this._edgeDirection);Jh(n,n);const i=uc(ht(),this._edgeDirection,n);return this._planeType===IS.XY&&(i[2]=0),Jh(i,i)}_initializeDistanceConstraints(){q(this._left.end)&&!this.requiresSplitEdgeLeft&&this._updateDistanceConstraint(Tg(this._plane,this._left.end)),q(this._right.end)&&!this.requiresSplitEdgeRight&&this._updateDistanceConstraint(Tg(this._plane,this._right.end)),this._updateIntersectDistanceConstraint(this._plane)}_updateDistanceConstraint(e){e<=0&&(this._minDistance=Math.max(this._minDistance,e)),e>=0&&(this._maxDistance=Math.min(this._maxDistance,e))}_updateIntersectDistanceConstraint(e){const n=Q_(e),i=this._edgeDirection,s=du(ht(),this._left.start,this._left.direction),o=du(ht(),this._right.start,this._right.direction),r=this._pointInBasis2D(Jt(),n,i,this._left.start),a=this._pointInBasis2D(Jt(),n,i,s),l=this._pointInBasis2D(Jt(),n,i,this._right.start),c=this._pointInBasis2D(Jt(),n,i,o),[u]=PTe({start:a,end:r,type:Xn.LINE},{start:c,end:l,type:Xn.LINE});if(!u)return;const d=di(Jt(),r,a);W0(d,d);const h=di(Jt(),u,a),f=Ic(d,h),m=du(ht(),s,Vb(ht(),this._left.direction,-f)),g=Tg(e,m);this._updateDistanceConstraint(g)}_pointInBasis2D(e,n,i,s){return e[0]=AI(n,s),e[1]=AI(i,s),e}_offset(e,n){Number.isFinite(this._minDistance)&&(n=Math.max(this._minDistance,n)),Number.isFinite(this._maxDistance)&&(n=Math.min(this._maxDistance,n)),X_(this._offsetPlane,this._plane),this._offsetPlane[3]-=n;const i=(o,r,a)=>q(r)&&yz(this._offsetPlane,o,du(ht(),o,r),a),s=ht();(e===this._edge.leftVertex?i(this._left.start,this._left.direction,s):i(this._right.start,this._right.direction,s))&&this._helper.copy(this._helper.fromXYZ(s,void 0,this._helper.getM(e.pos)),e.pos)}selectArrowFromStartPoint(e){this._selectedArrow=vz(this.plane,this._pointToXYZ(e))?1:-1}get selectedArrow(){return this._selectedArrow}signedDistanceToPoint(e){return Tg(this.plane,this._pointToXYZ(e))}apply(e){this._offset(e,this.distance)}undo(e){this._offset(e,0)}canAccumulate(e){return e instanceof TS&&this._edge.leftVertex.index===e._edge.leftVertex.index&&this._edge.rightVertex.index===e._edge.rightVertex.index&&this._edge.component===e._edge.component&&this._maybeEqualsVec3(this._left.direction,e._left.direction)&&this._maybeEqualsVec3(this._right.direction,e._right.direction)&&q0(Q_(this._plane),Q_(e._plane))}accumulate(e,n){const i=this._plane[3]-n._plane[3]+n.distance;this._offset(e,i)}accumulateParams(e){const n=e.distance-e._plane[3];this.distance=n+this._plane[3]}clone(){const e=new TS(this._helper,this._planeType,this._edge,this.distance,Yf.DEFERRED);return X_(e._plane,this._plane),X_(e._offsetPlane,this._offsetPlane),e._maxDistance=this._maxDistance,e._minDistance=this._minDistance,e._left=this._cloneNeighbor(this._left),e._right=this._cloneNeighbor(this._right),e._edgeDirection=sc(ht(),this._edgeDirection),e}_maybeEqualsVec3(e,n){return ke(e)&&ke(n)||q(e)&&q(n)&&q0(e,n)}_cloneNeighbor({start:e,end:n,direction:i,isOriginalDirection:s}){return{start:sc(ht(),e),end:q(n)?sc(ht(),n):null,direction:sc(ht(),i),isOriginalDirection:s}}};const IL=Qh(15),xL=.001;var IS,Yf;(function(t){t[t.XYZ=0]="XYZ",t[t.XY=1]="XY"})(IS||(IS={})),function(t){t[t.IMMEDIATE=0]="IMMEDIATE",t[t.DEFERRED=1]="DEFERRED"}(Yf||(Yf={}));let V5=class{constructor(e,n,i=ea.CUMULATIVE){this.origin=e,this.angle=n,this._accumulationType=i}_rotate(e,n){EB(e.pos,e.pos,this.origin,n)}apply(e){this._rotate(e,this.angle)}undo(e){this._rotate(e,-this.angle)}canAccumulate(e){return e instanceof V5&&Ly(this.origin,e.origin)}accumulate(e,n){const i=n._accumulationType===ea.REPLACE;this._rotate(e,i?n.angle-this.angle:n.angle)}accumulateParams(e){const n=e._accumulationType===ea.REPLACE;this.angle=n?e.angle:this.angle+e.angle}},F5=class{constructor(e,n,i,s,o=ea.CUMULATIVE){this.origin=e,this.axis1=n,this.factor1=i,this.factor2=s,this._accumulationType=o,this.axis2=Cf(n[1],-n[0])}_scale(e,n,i){bI(e.pos,e.pos,this.origin,this.axis1,n),bI(e.pos,e.pos,this.origin,this.axis2,i)}apply(e){this._scale(e,this.factor1,this.factor2)}undo(e){this._scale(e,1/this.factor1,1/this.factor2)}canAccumulate(e){return e instanceof F5&&Ly(this.origin,e.origin)&&Ly(this.axis1,e.axis1)}accumulate(e,n){n._accumulationType===ea.REPLACE?this._scale(e,n.factor1/this.factor1,n.factor2/this.factor2):this._scale(e,n.factor1,n.factor2)}accumulateParams(e){const n=e._accumulationType===ea.REPLACE;this.factor1=n?e.factor1:this.factor1*e.factor1,this.factor2=n?e.factor2:this.factor2*e.factor2}},q$e=class{constructor(){this._operations=[],this._closed=!1}close(){this._closed=!0}apply(){for(const e of this._operations)e.apply()}undo(){for(let e=this._operations.length-1;e>=0;e--)this._operations[e].undo()}accumulate(e){if(this._closed)return!1;const n=this._operations.length?this._operations[this._operations.length-1]:null;return n&&n.accumulate(e)||(this._operations.push(e),e.apply()),!0}},W_=class extends Ii{constructor(e){super(),this.data=e,this._undoStack=[],this._redoStack=[],this._listener=this.data.on("change",n=>{n.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:n.addedVertices,operation:n.operation}),n.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:n.removedVertices,operation:n.operation}),n.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:n.updatedVertices,operation:n.operation})})}destroy(){this._listener.remove()}splitEdge(e,n){return this._apply(new G$e(this.data,e,n))}updateVertices(e,n,i=Ra.ACCUMULATE_STEPS){return this._apply(new O5(this.data,e,n),i)}moveVertices(e,n,i,s,o=Ra.ACCUMULATE_STEPS){return this.updateVertices(e,new R5(this.data.coordinateHelper,n,i,s),o)}scaleVertices(e,n,i,s,o,r=Ra.ACCUMULATE_STEPS,a=ea.CUMULATIVE){return this.updateVertices(e,new F5(n,i,s,o,a),r)}rotateVertices(e,n,i,s=Ra.ACCUMULATE_STEPS,o=ea.CUMULATIVE){return this.updateVertices(e,new V5(n,i,o),s)}removeVertices(e){return this._apply(new W$e(this.data,e,this._minNumVerticesPerType))}appendVertex(e){return this.data.components.length===0?null:this._apply(new U$e(this.data,this.data.components[0],e))}setVertexPosition(e,n){return this._apply(new P5(this.data,e,n))}offsetEdge(e,n,i,s=Ra.ACCUMULATE_STEPS){return this.updateVertices([n.leftVertex,n.rightVertex],new TS(this.data.coordinateHelper,e,n,i),s)}closeComponent(e){return this.data.components.includes(e)?this._apply(new j$e(this.data,e)):null}canRemoveVertex(){return this.data.components[0].vertices.length>this._minNumVerticesPerType}createUndoGroup(){const e=new q$e;return this._apply(e),{remove:()=>e.close()}}undo(){if(this._undoStack.length>0){const e=this._undoStack.pop();return e.undo(),this._redoStack.push(e),e}return null}redo(){if(this._redoStack.length>0){const e=this._redoStack.pop();return e.apply(),this._undoStack.push(e),e}return null}get canUndo(){return this._undoStack.length>0}get canRedo(){return this._redoStack.length>0}get lastOperation(){return this._undoStack.length>0?this._undoStack[this._undoStack.length-1]:null}get _minNumVerticesPerType(){switch(this.data.type){case"point":return 1;case"polyline":return 2;case"polygon":return 3;default:return 0}}_apply(e,n=Ra.ACCUMULATE_STEPS){return n!==Ra.NEW_STEP&&!ke(this.lastOperation)&&this.lastOperation.accumulate(e)||(e.apply(),this._undoStack.push(e),this._redoStack=[]),e}static fromGeometry(e,n){return new W_(Cg.fromGeometry(e,n))}},Tb=class{constructor(e){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.editGeometryOperations=e.editGeometryOperations,this.elevationInfo=e.elevationInfo,this.pointer=e.pointer,this.vertexHandle=e.vertexHandle,this.excludeFeature=e.excludeFeature,this.visualizer=e.visualizer,this.selfSnappingZ=e.selfSnappingZ}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}},Jl=class extends dt{constructor(e){super(e),this.constrainResult=n=>n,this._snapPoints=null,this._abortController=null,this._stagedPoint=null,this._snap=Mb(async(n,i,s,o)=>{const r=await this._frameTask.schedule(()=>i.snap({...n,context:s,signal:o}),o);r.valid&&await this._frameTask.schedule(()=>{this.stagedPoint=r.apply(),n!==this._snapPoints&&q(this._snapPoints)&&(this.stagedPoint=i.update({...this._snapPoints,context:s}))},o)})}get stagedPoint(){return this._stagedPoint}set stagedPoint(e){this._stagedPoint=this.constrainResult(e)}initialize(){var n,i;const e=this.view.type==="3d"?(i=(n=this.view)==null?void 0:n.resourceController)==null?void 0:i.scheduler:null;this._frameTask=q(e)?e.registerTask(Pb.SNAPPING):qS}destroy(){this._abortController=Kr(this._abortController),this._frameTask=Bi(this._frameTask)}async snap(e,n,i){const{point:s,scenePoint:o}=e;return this.stagedPoint=n.update({point:s,scenePoint:o,context:i}),this._snapPoints=e,ke(this._abortController)&&(this._abortController=new AbortController),this._snap(e,n,i,this._abortController.signal)}abort(){this._abortController=Kr(this._abortController)}};v([b({constructOnly:!0})],Jl.prototype,"view",void 0),v([b()],Jl.prototype,"stagedPoint",null),v([b()],Jl.prototype,"constrainResult",void 0),v([b()],Jl.prototype,"_stagedPoint",void 0),Jl=v([Ae("esri.views.interactive.snapping.SnappingOperation")],Jl);var xS;let ks=xS=class extends Ii.EventedAccessor{constructor(t){super(t),this._hasZ=null,this._cursorScreenPoint=null,this._activePointerId=null,this._stagedVertexUnsnapped=null,this._lastVertexUnsnapped=null,this._handles=new si,this._viewHandlesKey="view-handles",this._undoRedoHandlesKey="undo-redo-handles",this._drawToolHandlesKey="draw-tool",this._nativeEventHistory={undoStack:[],redoStack:[]},this.interactiveUndoDisabled=!1,this.history=[],this.redoHistory=[],this.snapToScene=!1,this.view=null,this.elevationInfo=null,this.defaultZ=0,this._coordinateHelper=qT(t.hasZ,!1,t.view.spatialReference),this._snappingManager=t.snappingManager,this._editGeometryOperations=new W_(new Cg(t.editGeometryType??"polygon",this._coordinateHelper)),this._snappingGraphicsLayer=new YS({id:xS.SNAPPING_GRAPHICS_LAYER_ID,listMode:"hide",internal:!0}),this._snappingContext=new Tb({editGeometryOperations:this._editGeometryOperations,elevationInfo:{mode:"on-the-ground",offset:0},pointer:"mouse",visualizer:new $$e(this._snappingGraphicsLayer)}),this._activeComponent=new Mp(t.view.spatialReference,mr.Local),this._editGeometryOperations.data.components.push(this._activeComponent)}normalizeCtorArgs(t){const e={...t};return delete e.editGeometryType,e}initialize(){this._snappingOperation=new Jl({view:this.view}),this.view.type==="2d"&&this.view.map.layers.add(this._snappingGraphicsLayer)}destroy(){this._handles.destroy(),this.view.map.layers.remove(this._snappingGraphicsLayer),this._snappingGraphicsLayer.destroy(),q(this._snappingManager)&&this._snappingManager.doneSnapping(),this._snappingOperation=sn(this._snappingOperation),this._editGeometryOperations.destroy()}get _committedVertices(){return this._editGeometryOperations.data.components[0].vertices.map(t=>t.pos)}get vertices(){return q(this._stagedVertex)?[...this._committedVertices,this._coordinateHelper.pointToArray(this._stagedVertex)]:this._committedVertices}get hasZ(){return q(this._hasZ)?this._hasZ:this.view.type==="3d"}set hasZ(t){this._hasZ=t,this.notifyChange("hasZ")}get _stagedVertex(){return this._snappingOperation.stagedPoint}set _stagedVertex(t){this._snappingOperation.stagedPoint=hr(t)}canUndo(){return this._editGeometryOperations.canUndo}canRedo(){return this._editGeometryOperations.canRedo}undo(){this.canUndo&&this._editGeometryOperations.undo()}redo(){this.canRedo&&this._editGeometryOperations.redo()}getCoordsFromScreenPoint(t){const e=this.screenToMap(t);return ke(e)?null:e.hasZ?[e.x,e.y,e.z]:[e.x,e.y]}getCoordsAndPointFromScreenPoint(t){const e=this.screenToMap(t);return ke(e)?null:e.hasZ?{vertex:[e.x,e.y,e.z],mapPoint:e}:{vertex:[e.x,e.y],mapPoint:e}}screenToMap(t){let e=null;if(this.view.type==="3d")if(this.hasZ){const n=Xf(this.elevationInfo,K$e);e=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Qf(t.x,t.y),n,this._getGeometryZValue())}else{const n=Xf(this.elevationInfo,Y$e);e=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Qf(t.x,t.y),n,0),q(e)&&(e.z=void 0)}else e=this.view.toMap(t),q(e)&&(e.z=this.hasZ?this._getGeometryZValue():void 0);return e}_pushCursorVertex(t,e){const n=Fb(t[0],t[1],null,this.view.spatialReference);this._stagedVertexUnsnapped=n;const i=this._snappingManager;if(ke(i))return this._stagedVertex=n,void e();cc(this._snappingOperation.snap({point:n},i,this._snappingContext)).then(()=>{e()})}_popCursorVertex(){this._stagedVertexUnsnapped=null,this._stagedVertex=null}_getGeometryZValue(){return this.defaultZ}_abortSnapping(){this._snappingOperation.abort()}_isDuplicateOfLastVertex(t){const e=this._editGeometryOperations.data.components[0].getLastVertex();if(q(e)&&t[0]===e[0]&&t[1]===e[1])return!0;const{x:n,y:i}=this._coordinateHelper.vectorToDehydratedPoint(t);return!(!q(this._lastVertexUnsnapped)||n!==this._lastVertexUnsnapped.x||i!==this._lastVertexUnsnapped.y)}_shouldHandlePointerEvent(t){return this._isPrimaryPointerAction(t)&&(ke(this._activePointerId)||this._activePointerId===t.pointerId)}_vertexAddHandler(t){const e=q(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);q(e)&&this._addVertex(e,t.native)}_drawCompleteHandler(t){this._completeDrawing(t.native)}_isPrimaryPointerAction(t){return t.pointerType!=="mouse"||t.button===0}};ks.SNAPPING_GRAPHICS_LAYER_ID="DrawAction-snapping-graphics-layer",v([b({readOnly:!0})],ks.prototype,"vertices",null),v([b({type:Boolean,nonNullable:!0})],ks.prototype,"interactiveUndoDisabled",void 0),v([b({readOnly:!0})],ks.prototype,"history",void 0),v([b({readOnly:!0})],ks.prototype,"redoHistory",void 0),v([b()],ks.prototype,"snapToScene",void 0),v([b()],ks.prototype,"view",void 0),v([b()],ks.prototype,"elevationInfo",void 0),v([b({nonNullable:!0})],ks.prototype,"defaultZ",void 0),v([b()],ks.prototype,"hasZ",null),v([b()],ks.prototype,"_snappingOperation",void 0),v([b()],ks.prototype,"_stagedVertex",null),ks=xS=v([Ae("esri.views.draw.DrawAction")],ks);const K$e={mode:"absolute-height",offset:0},Y$e={mode:"on-the-ground",offset:0},Sg=ks;class ta{constructor(e,n,i,s){this.view=e,this.native=n,this.vertexIndex=i,this.vertices=s,this.defaultPrevented=!1,this.type="vertex-add"}preventDefault(){this.defaultPrevented=!0}}let KT=class{constructor(e,n,i,s){this.view=e,this.native=n,this.vertexIndex=i,this.vertices=s,this.defaultPrevented=!1,this.type="vertex-remove"}preventDefault(){this.defaultPrevented=!0}},il=class{constructor(e,n,i,s,o=null){this.view=e,this.native=n,this.vertexIndex=i,this.vertices=s,this.mapPoint=o,this.coordinates=null,this.defaultPrevented=!1,this.type="cursor-update",this.coordinates=s.length===1?s[0]:null}preventDefault(){this.defaultPrevented=!0}},sl=class{constructor(e,n){this.native=e,this.vertices=n,this.coordinates=null,this.defaultPrevented=!1,this.type="draw-complete",this.coordinates=n.length===1?n[0]:null}preventDefault(){this.defaultPrevented=!0}},MS=class extends Sg{constructor(e){super(e),this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1}initialize(){this._addViewHandles(),this._addUndoRedoHandles()}destroy(){this._removeViewHandles(),this._removeUndoRedoHandles(),this.emit("destroy")}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){this._completeDrawing()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",e=>{e.stopPropagation()},nt.TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=In(e),e.pointerType==="touch"&&this._updateCursor(e.native))},nt.TOOL),this.view.on("pointer-move",e=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._abortSnapping(),this._cursorScreenPoint=In(e),e.pointerType!=="touch"&&this._updateCursor(e.native)},nt.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._addVertexOnPointerUp=!1)},nt.TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp)this._vertexAddHandler(e);else{const n=e.pointerType==="touch";this._updateCursor(e.native,n)}},nt.TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},nt.TOOL),this.view.on("double-click",e=>{e.stopPropagation(),this._drawCompleteHandler(e)},nt.TOOL),this.view.on("double-click",["Control"],e=>{e.stopPropagation(),this._drawCompleteHandler(e)},nt.TOOL),this.view.on("key-down",e=>{const{key:n,repeat:i}=e;n===Mt.vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):n!==Mt.complete||i?n!==Mt.undo||this.interactiveUndoDisabled||i?n!==Mt.redo||this.interactiveUndoDisabled||i?n!==Mt.pan||i||e.stopPropagation():(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))},nt.TOOL),this.view.on("key-up",e=>{e.key===Mt.pan&&e.stopPropagation()},nt.TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",e=>{if(this.notifyChange("vertices"),e.operation==="undo"){const n=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(n);const i=[...this._committedVertices];q(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new KT(this.view,n,e.vertices[0].index,i))}}),this._editGeometryOperations.on("vertex-add",e=>{if(this.notifyChange("vertices"),e.operation==="apply"){const n=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],i=this._committedVertices.length-1,s=new ta(this.view,n,i,this.vertices);this.emit("vertex-add",s),s.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if(e.operation==="redo"){const n=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(n);const i=[...this._committedVertices];q(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new ta(this.view,n,e.vertices[0].index,i))}})],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addVertex(e,n){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const s=n||new Event("placeholder");this._nativeEventHistory.undoStack.push(s)}_updateCursor(e,n=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);q(i)&&!n&&this._pushCursorVertex(i.vertex,()=>this.emit("cursor-update",new il(this.view,e,this._activeComponent.vertices.length,this.vertices,q(this._stagedVertex)?new Kt(this._stagedVertex):null)))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._abortSnapping(),q(this._snappingManager)&&this._snappingManager.doneSnapping(),this.vertices.length<1)return;const n=new sl(e,this.vertices);this.emit("draw-complete",n),n.defaultPrevented||this._removeViewHandles()}};MS=v([Ae("esri.views.draw.MultipointDrawAction")],MS);const D5=["freehand","hybrid","click"],G_="click";let Z$e=class{constructor({grabbableForEvent:e}){this.events=new Ii,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=e}intersectionDistance(e,n){return 0}attach(){}detach(){}};function X$e(t){return"declaredClass"in t}function ML(t){return"declaredClass"in t}function Q$e(t){return"declaredClass"in t}function r3e(t,e){if(!t)return null;if(Q$e(t))return t;const n=new Ls({layer:e,sourceLayer:e});return n.visible=t.visible,n.symbol=hr(t.symbol),n.attributes=hr(t.attributes),n.geometry=J$e(t.geometry),n}function J$e(t){return ke(t)?null:X$e(t)?t:F0(e2e(t))}function e2e(t){const{wkid:e,wkt:n,latestWkid:i}=t.spatialReference,s={wkid:e,wkt:n,latestWkid:i};switch(t.type){case"point":{const{x:o,y:r,z:a,m:l}=t;return{x:o,y:r,z:a,m:l,spatialReference:s}}case"polygon":{const{rings:o,hasZ:r,hasM:a}=t;return{rings:$L(o),hasZ:r,hasM:a,spatialReference:s}}case"polyline":{const{paths:o,hasZ:r,hasM:a}=t;return{paths:$L(o),hasZ:r,hasM:a,spatialReference:s}}case"extent":{const{xmin:o,xmax:r,ymin:a,ymax:l,zmin:c,zmax:u,mmin:d,mmax:h,hasZ:f,hasM:m}=t;return{xmin:o,xmax:r,ymin:a,ymax:l,zmin:c,zmax:u,mmin:d,mmax:h,hasZ:f,hasM:m,spatialReference:s}}case"multipoint":{const{points:o,hasZ:r,hasM:a}=t;return{points:B5(o)?N5(o):o,hasZ:r,hasM:a,spatialReference:s}}default:return}}function $L(t){return t2e(t)?t.map(e=>N5(e)):t}function N5(t){return t.map(e=>l8(e))}function t2e(t){for(const e of t)if(e.length!==0)return B5(e);return!1}function B5(t){return t.length&&(c8(t[0])||u8(t[0]))}function YT(t,e){if(!t)return null;let n;if(ML(t)){if(e==null)return t.clone();if(ML(e))return e.copy(t)}return e!=null?(n=e,n.x=t.x,n.y=t.y,n.spatialReference=t.spatialReference,t.hasZ?(n.z=t.z,n.hasZ=t.hasZ):(n.z=null,n.hasZ=!1),t.hasM?(n.m=t.m,n.hasM=!0):(n.m=null,n.hasM=!1)):(n=Fb(t.x,t.y,t.z,t.spatialReference),t.hasM&&(n.m=t.m,n.hasM=!0)),n}function n2e(t){const{wkid:e,wkt:n,latestWkid:i}=t,s={wkid:e,wkt:n,latestWkid:i};return yc.fromJSON(s)}function lp(t,e,n,i){if(i==null||t.hasZ||(i=void 0),t.type==="point")return t.x+=e,t.y+=n,t.hasZ&&i!=null&&(t.z+=i),t;if(t.type==="multipoint"){const r=t.points;for(let a=0;a<r.length;a++)r[a]=AL(r[a],e,n,i);return t}if(t.type==="extent")return t.xmin+=e,t.xmax+=e,t.ymin+=n,t.ymax+=n,i!=null&&(t.zmin+=i,t.zmax+=i),t;const s=Rp(t),o=t.type==="polyline"?t.paths:t.rings;for(let r=0;r<s.length;r++){const a=s[r];for(let l=0;l<a.length;l++)a[l]=AL(a[l],e,n,i)}return"paths"in t?t.paths=o:t.rings=o,t}function a3e(t,e,n,i,s){const o=t.clone(),r=i.resolution;if(o.type==="point"){if(s)lp(o,e*r,-n*r);else{const a=i.state.transform,l=i.state.inverseTransform,c=a[0]*o.x+a[2]*o.y+a[4],u=a[1]*o.x+a[3]*o.y+a[5];o.x=l[0]*(c+e)+l[2]*(u+n)+l[4],o.y=l[1]*(c+e)+l[3]*(u+n)+l[5]}return o}if(o.type==="multipoint"){if(s)lp(o,e*r,-n*r);else{const a=o.points,l=i.state.transform,c=i.state.inverseTransform;for(let u=0;u<a.length;u++){const d=a[u],h=l[0]*d[0]+l[2]*d[1]+l[4],f=l[1]*d[0]+l[3]*d[1]+l[5],m=c[0]*(h+e)+c[2]*(f+n)+c[4],g=c[1]*(h+e)+c[3]*(f+n)+c[5];a[u]=Km(d,m,g,void 0)}}return o}if(o.type==="extent"){if(s)lp(o,e*r,-n*r);else{const a=i.state.transform,l=i.state.inverseTransform,c=a[0]*o.xmin+a[2]*o.ymin+a[4],u=a[1]*o.xmin+a[3]*o.ymin+a[5],d=a[0]*o.xmax+a[2]*o.ymax+a[4],h=a[1]*o.xmax+a[3]*o.ymax+a[5];o.xmin=l[0]*(c+e)+l[2]*(u+n)+l[4],o.ymin=l[1]*(c+e)+l[3]*(u+n)+l[5],o.xmax=l[0]*(d+e)+l[2]*(h+n)+l[4],o.ymax=l[1]*(d+e)+l[3]*(h+n)+l[5]}return o}if(s)lp(o,e*r,-n*r);else{const a=Rp(o),l=o.type==="polyline"?o.paths:o.rings,c=i.state.transform,u=i.state.inverseTransform;for(let d=0;d<a.length;d++){const h=a[d];for(let f=0;f<h.length;f++){const m=h[f],g=c[0]*m[0]+c[2]*m[1]+c[4],y=c[1]*m[0]+c[3]*m[1]+c[5],_=u[0]*(g+e)+u[2]*(y+n)+u[4],C=u[1]*(g+e)+u[3]*(y+n)+u[5];h[f]=Km(m,_,C,void 0)}}"paths"in o?o.paths=l:o.rings=l}return o}function l3e(t,e,n,i){if(t.type==="point"){const{x:m,y:g}=t,y=i?i[0]:m,_=i?i[1]:g,C=t.clone(),w=(m-y)*e+y,S=(g-_)*n+_;return C.x=w,C.y=S,C}if(t.type==="multipoint"){const m=Rp(t),g=Np(),[y,_,C,w]=hI(g,[m]),S=i?i[0]:(y+C)/2,E=i?i[1]:(w+_)/2,k=t.clone(),A=k.points;for(let $=0;$<A.length;$++){const L=A[$],[O,B]=L,V=(O-S)*e+S,P=(B-E)*n+E;A[$]=Km(L,V,P,void 0)}return k}if(t.type==="extent"){const{xmin:m,xmax:g,ymin:y,ymax:_}=t,C=i?i[0]:(m+g)/2,w=i?i[1]:(_+y)/2,S=t.clone();if(S.xmin=(m-C)*e+C,S.ymax=(_-w)*n+w,S.xmax=(g-C)*e+C,S.ymin=(y-w)*n+w,S.xmin>S.xmax){const E=S.xmin,k=S.xmax;S.xmin=k,S.xmax=E}if(S.ymin>S.ymax){const E=S.ymin,k=S.ymax;S.ymin=k,S.ymax=E}return S}const s=Rp(t),o=Np(),[r,a,l,c]=hI(o,s),u=i?i[0]:(r+l)/2,d=i?i[1]:(c+a)/2,h=t.clone(),f=h.type==="polyline"?h.paths:h.rings;for(let m=0;m<s.length;m++){const g=s[m];for(let y=0;y<g.length;y++){const _=g[y],[C,w]=_,S=(C-u)*e+u,E=(w-d)*n+d;f[m][y]=Km(_,S,E,void 0)}}return"paths"in h?h.paths=f:h.rings=f,h}function c3e(t,e,n,i,s,o){const r=Math.sqrt((n-t)*(n-t)+(i-e)*(i-e));return Math.sqrt((s-t)*(s-t)+(o-e)*(o-e))/r}function u3e(t,e,n){const i=Math.atan2(e.y-n.y,e.x-n.x)-Math.atan2(t.y-n.y,t.x-n.x),s=Math.atan2(Math.sin(i),Math.cos(i));return qL(s)}function AL(t,e,n,i){return Km(t,t[0]+e,t[1]+n,t[2]!=null&&i!=null?t[2]+i:void 0)}function Km(t,e,n,i){const s=[e,n];return t.length>2&&s.push(i??t[2]),t.length>3&&s.push(t[3]),s}function i2e(t,e){let n=null,i=null;return s=>{if(s.action==="cancel")return void(q(i)&&(i.execute({action:"cancel"}),n=null,i=null));const o={action:s.action,screenStart:s.start,screenEnd:s.screenPoint};s.action==="start"&&ke(n)&&(n=new ah,i=new ah,e(t,n,i,s.pointerType,o)),q(n)&&n.execute(o),s.action==="end"&&q(n)&&(n=null,i=null)}}function P0(t,e){return t.events.on("drag",i2e(t,e))}function d3e(t,e){const n=[t.x,t.y,t.z],i=e,s=[Math.cos(i),Math.sin(i)],o=Math.sqrt(s[0]*s[0]+s[1]*s[1]);if(o===0)return null;s[0]/=o,s[1]/=o;const r=a=>{const l=(a.x-n[0])*s[0]+(a.y-n[1])*s[1];a.x=n[0]+l*s[0],a.y=n[1]+l*s[1]};return a=>(r(a.mapStart),r(a.mapEnd),{...a,axis:s})}function s2e(t,e){let n=null;return i=>{if(i.action==="start"&&(n=o2e(t,i.mapStart.spatialReference,e)),ke(n))return null;const s=i.mapEnd.x-i.mapStart.x,o=i.mapEnd.y-i.mapStart.y,r=i.mapEnd.z-i.mapStart.z;return n.move(s,o,r),{...i,translationX:s,translationY:o,translationZ:r}}}function z5(t,e){return ke(t)?null:t.spatialReference.equals(e)?t.clone():fr(t,e)}function o2e(t,e,n){const i=t.geometry,s=n2e(e);if(ke(i))return null;if(i.type==="mesh")return r2e(t,i,s,n);const o=z5(i,s),r=i.spatialReference;return ke(o)?null:{move:(a,l,c)=>{const u=lp(o.clone(),a,l,c);u.spatialReference.equals(r)?t.geometry=u:t.geometry=fr(u,r)}}}function r2e(t,e,n,i){if(q(e.transform))return a2e(t,e,e.transform,n);if(!e.spatialReference.equals(n))return null;let s=0,o=0,r=0;return{move:(a,l,c)=>{const u=a-s,d=l-o,h=c-r;if(u||d||h){const f=new Kt(e.origin.x+u,e.origin.y+d,e.origin.z+h,e.origin.spatialReference);e.centerAt(f,{geographic:i===mr.Global}),t.notifyGeometryChanged(),s=a,o=l,r=c}}}}function a2e(t,e,n,i){const s=z5(n.getOriginPoint(e.spatialReference),i),o=e.spatialReference;return ke(s)?null:{move:(r,a,l)=>{const c=lp(s.clone(),r,a,l);if(c.spatialReference.equals(o))n.origin=wo(c.x,c.y,c.z);else{const u=fr(c,o);q(u)&&(n.origin=wo(u.x,u.y,u.z))}t.notifyMeshTransformChanged(),t.notifyGeometryChanged()}}}function p3e(t,e){const n=t.map(i=>zt(s2e(i,e))).filter(i=>q(i));return i=>{const s=i.mapEnd.x-i.mapStart.x,o=i.mapEnd.y-i.mapStart.y,r=i.mapEnd.z-i.mapStart.z;return n.forEach(a=>a(i)),{...i,translationX:s,translationY:o,translationZ:r}}}function l2e(t,e){const n=new Map;for(const i of e)n.set(i,hr(t[i]));return i=>(n.forEach((s,o)=>{t[o]=s}),i)}function c2e(t){return q(t.geometry)&&t.geometry.type==="mesh"?u2e(t,t.geometry):l2e(t,["geometry"])}function u2e(t,e){const n=q(e.transform)?e.transform.clone():null,i=e.vertexAttributes.clonePositional();return s=>(e.transform=n,e.vertexAttributes=i,t.notifyGeometryChanged(),s)}function h3e(t){const e=t.map(n=>zt(c2e(n))).filter(n=>q(n));return n=>(e.forEach(i=>i(n)),n)}function f3e(){let t=0,e=0,n=0;return i=>{i.action==="start"&&(t=i.mapStart.x,e=i.mapStart.y,n=i.mapStart.z);const s=i.mapEnd.x-t,o=i.mapEnd.y-e,r=i.mapEnd.z-n;return t=i.mapEnd.x,e=i.mapEnd.y,n=i.mapEnd.z,{...i,mapDeltaX:s,mapDeltaY:o,mapDeltaZ:r,mapDeltaSpatialReference:i.mapStart.spatialReference}}}function m3e(){let t=0,e=0;return n=>{n.action==="start"&&(t=n.screenStart.x,e=n.screenStart.y);const i=n.screenEnd.x-t,s=n.screenEnd.y-e;return t=n.screenEnd.x,e=n.screenEnd.y,{...n,screenDeltaX:i,screenDeltaY:s}}}function g3e(t,e){let n=null,i=0,s=0;return o=>{if(o.action==="start"&&(n=t.toScreen(e),n.x<0||n.x>t.width||n.y<0||n.y>t.height?n=null:(i=o.screenStart.x-n.x,s=o.screenStart.y-n.y)),n==null)return null;const r=bc(o.screenEnd.x-i,0,t.width),a=bc(o.screenEnd.y-s,0,t.height),l=hi(r,a);return o.screenStart=n,o.screenEnd=l,o}}class ah{constructor(){this.execute=()=>{}}next(e,n=new ah){return q(e)&&(this.execute=i=>{const s=e(i);q(s)&&n.execute(s)}),n}}function d2e(t,e,n=[]){if(t.type==="2d")return s=>s;let i=null;return s=>{s.action==="start"&&(i=t.toMap(s.screenStart,{exclude:n}),q(i)&&(i.z=K0(i,t,e)));const o=t.toMap(s.screenEnd,{exclude:n});q(o)&&(o.z=K0(o,t,e));const r=q(i)&&q(o)?{sceneStart:i,sceneEnd:o}:null;return{...s,scenePoints:r}}}class p2e{constructor(){this.next=new ah}createSnapDragEventPipelineStep({predicate:e=()=>!0,cancel:n,snappingManager:i,snappingContext:s,updatingHandles:o,useZ:r=!0}){if(ke(i))return m=>m;let a=null,l=null;const c=()=>{a=Kr(a),i.doneSnapping(),q(l)&&l.frameTask.remove(),l=null};n.next(m=>(c(),m)),this.next=new ah;const u=this._createSnapFunction(i,r);let d=null,h=null,f=null;return m=>{if(!e(m))return m;if(m.action==="start"){const g=this._createFrameTask(i.view);if(l=this._createSnappingInfo(s,m,g),l.context.selfSnappingZ=null,!r&&q(m.info)){const y=this._extractSelfSnappingZ(s.coordinateHelper,m.info.handle.component);q(y)&&(l.context.selfSnappingZ={value:y,elevationInfo:s.elevationInfo})}}if(q(l)){const{context:g,originalScenePos:y,originalPos:_}=l,{mapEnd:C,mapStart:w,action:S,scenePoints:E}=m,k=this._updatePosition(_,this._computeMapDelta(C,w)),A=this._computeMapDelta(w,_),$={...m,action:"update"},L=l.context,O=this._updateScenePosition(y,E),B=i.update({point:k,scenePoint:O,context:g});if(f=B,this._applySnappedUpdate(C,B,A,r),d=k,h=O,S!=="end"){const{frameTask:V}=l;ke(a)&&(a=new AbortController),o.addPromise(cc(u({frameTask:V,event:$,context:L,point:k,scenePoint:O,delta:A,lastPos:d,lastScenePos:h,lastUpdate:f},a.signal)))}}return m.action==="end"&&c(),m}}_createSnapFunction(e,n){return Mb(async({frameTask:i,point:s,scenePoint:o,context:r,event:a,delta:l,lastPos:c,lastScenePos:u,lastUpdate:d},h)=>{const f=await i.schedule(()=>e.snap({point:s,scenePoint:o,context:r,signal:h}),h);if(f.valid){let m=await i.schedule(()=>f.apply(),h);s!==c&&q(c)&&(m=e.update({point:c,scenePoint:u,context:r})),kS(m,d)||(this._applySnappedUpdate(a.mapEnd,m,l,n),this.next.execute(a))}})}_createFrameTask(e){return e.type==="3d"?e.resourceController.scheduler.registerTask(Pb.SNAPPING):qS}_createSnappingInfo(e,n,i){return{context:new Tb({editGeometryOperations:e.editGeometryOperations,elevationInfo:e.elevationInfo,pointer:e.pointer,vertexHandle:q(n.info)?n.info.handle:null,excludeFeature:e.excludeFeature,visualizer:e.visualizer}),originalPos:q(n.snapOrigin)?e.coordinateHelper.vectorToDehydratedPoint(n.snapOrigin):n.mapStart,originalScenePos:q(n.scenePoints)?n.scenePoints.sceneStart:null,frameTask:i}}_updatePosition(e,[n,i,s]){const o=YT(e);return o.x+=n,o.y+=i,o.hasZ&&(o.z+=s),o}_updateScenePosition(e,n){return ke(e)||ke(n)?null:this._updatePosition(e,this._computeMapDelta(n.sceneEnd,n.sceneStart))}_computeMapDelta(e,n){const i=e.hasZ&&n.hasZ?e.z-n.z:0;return[e.x-n.x,e.y-n.y,i]}_applySnappedUpdate(e,n,[i,s,o],r){e.x=n.x+i,e.y=n.y+s,r&&e.hasZ&&n.hasZ&&(e.z=n.z+o)}_extractSelfSnappingZ(e,n){if(!e.hasZ())return null;const i=n.vertices;let s=null;for(const o of i){const r=e.getZ(o.pos);if(q(s)&&Math.abs(r-s)>1e-6)return null;ke(s)&&(s=r)}return s}}let Hn=class extends Ii.EventedMixin(Zm){constructor(t){super(t),this._createOperationCompleted=!1,this._pointerDownStates=new Set,this._snappingPipeline=new p2e,this.isDraped=!0,this.labelOptions=new R_,this.tooltipOptions=new V_,this.snapToSceneEnabled=null,this.lastVertex=null,ke(t.elevationInfo)&&(this.elevationInfo=wO(t.hasZ))}initialize(){const{geometryType:t,view:e}=this,{spatialReference:n}=e,i="viewingMode"in e.state?e.state.viewingMode:mr.Local,s=t==="segment"||t==="multipoint"?"polyline":t;this.coordinateHelper=qT(this.hasZ,this.hasM,n),this._editGeometryOperations=new W_(new Cg(s,this.coordinateHelper)),this._snappingOperation=new Jl({view:e,constrainResult:r=>ke(r)?r:this._getEffectiveDrawSurface().constrainZ(r)}),this.handles.add(ge(()=>this.stagedVertex,r=>{ke(r)||this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(r)}],operation:"apply",type:"vertex-update"})},{sync:!0,equals:(r,a)=>d8(r,a,kS)})),this._activeComponent=new Mp(n,i),this._editGeometryOperations.data.components.push(this._activeComponent);const o=this.segmentLabels;q(o)&&(o.context={view:e,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.handles.add([ge(()=>this.labelOptions.enabled,r=>{o.visible=r},us),this.on("cursor-update",()=>{const r=this.stagedVertex;o.stagedVertex=q(r)?this.coordinateHelper.pointToVector(r):null})])),this.handles.add(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],r=>{const a=r.vertices.map(d=>({componentIndex:0,vertexIndex:d.index,coordinates:this.coordinateHelper.vectorToArray(d.pos)})),l=a.map(d=>d.coordinates);switch(r.type){case"vertex-add":this.emit(r.type,{...r,added:l,vertices:a});break;case"vertex-update":this.emit(r.type,{...r,updated:l,vertices:a});break;case"vertex-remove":this.emit(r.type,{...r,removed:l,vertices:a})}const c=this._activeComponent.getLastVertex(),u=q(c)?this.coordinateHelper.vectorToDehydratedPoint(c.pos):null;(ke(u)||ke(this.lastVertex)||!kS(this.lastVertex,u))&&(this.lastVertex=u)})),this._manipulator=new Z$e({grabbableForEvent:r=>this.drawingMode!=="click"||r.pointerType==="touch"&&this._snappingEnabled&&this._pointerDownStates.size===1}),this.manipulators.add(this._manipulator),this._manipulator.grabbable=t!=="point",this.handles.add([this._createManipulatorDragPipeline(this._manipulator),this._manipulator.events.on("immediate-click",r=>this._onImmediateClick(r)),this._manipulator.events.on("immediate-double-click",r=>this._onImmediateDoubleClick(r))])}destroy(){sn(this.segmentLabels),sn(this._snappingOperation),this._editGeometryOperations=sn(this._editGeometryOperations)}get _snappingEnabled(){return q(this.snappingManager)&&this.snappingManager.options.effectiveEnabled}get _requiresScenePoint(){const t=this._getEffectiveDrawSurface();return this.view.type==="3d"&&this.drawSurface!==t}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map(t=>this.coordinateHelper.vectorToArray(t.pos))}set drawingMode(t){this._set("drawingMode",t??G_)}get interactive(){return this._manipulator.interactive}set interactive(t){this._manipulator.interactive=t}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get numVertices(){return q(this.stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}get stagedVertex(){return this._snappingOperation.stagedPoint}set stagedVertex(t){this._snappingOperation.stagedPoint=hr(t)}get updating(){return this.updatingHandles.updating}get vertices(){const t=this.committedVertices;return q(this.stagedVertex)&&t.push(this.coordinateHelper.pointToArray(this.stagedVertex)),t}cancel(){this.complete({aborted:!0})}commitStagedVertex(){if(this._snappingOperation.abort(),q(this.stagedVertex)){const{stagedVertex:t}=this;this.stagedVertex=null,this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(t))}}complete(t){const e=t&&t.aborted||!1;this._snappingOperation.abort(),q(this.snappingManager)&&this.snappingManager.doneSnapping(),this.geometryType==="segment"||this.geometryType==="point"?this.commitStagedVertex():this.stagedVertex=null;const n=this.geometryType==="multipoint"&&this.numVertices===0||this.geometryType==="polyline"&&this.numVertices<2||this.geometryType==="polygon"&&this.numVertices<3;this._createOperationCompleted=!n,(this.isCompleted||e)&&this.emit("complete",{vertices:this.vertices.map((i,s)=>({componentIndex:0,vertexIndex:s,coordinates:i})),aborted:e,type:"complete"})}onInputEvent(t){switch(t.type){case"pointer-down":this._pointerDownStates.add(t.pointerId);break;case"pointer-up":this._pointerDownStates.delete(t.pointerId)}switch(t.type){case"pointer-move":return this._onPointerMove(t);case"hold":return this._onHold(t)}}redo(){this._editGeometryOperations.redo()}undo(){q(this.snappingManager)&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_closeOnClickVertexIndex(t){const e=this._activeComponent;if(this.geometryType==="polygon"&&e.vertices.length>2){if(this._vertexWithinPointerDistance(e.vertices[0].pos,t))return 0;if(this._vertexWithinPointerDistance(e.vertices[e.vertices.length-1].pos,t))return e.vertices.length-1}return null}_createManipulatorDragPipeline(t){switch(zt(this.drawingMode)){case"click":return this._createManipulatorDragPipelineClick(t);case"freehand":return this._createManipulatorDragPipelineFreehand(t);case"hybrid":return this._createManipulatorDragPipelineHybrid(t)}}_createManipulatorDragPipelineClick(t){return P0(t,(e,n,i,s)=>{const o=s==="touch"&&this._snappingEnabled;!this.isCompleted&&o&&(i=i.next(r=>(o&&q(this.snappingManager)&&this.snappingManager.doneSnapping(),r)),n.next(this._screenToMapDragEventStep()).next(r=>(r.action==="start"&&(this.stagedVertex=r.mapStart,(this.geometryType==="segment"||o&&this.numVertices===0)&&this.commitStagedVertex()),r)).next(d2e(this.view,this.elevationInfo)).next(this._snappingPipeline.createSnapDragEventPipelineStep({predicate:()=>o,cancel:i,snappingManager:this.snappingManager,snappingContext:new Tb({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:s,visualizer:this.snappingVisualizer}),updatingHandles:this.updatingHandles,useZ:!this._requiresScenePoint}),this._snappingPipeline.next).next(r=>(o&&(this.stagedVertex=r.mapEnd,r.action==="end"&&this.commitStagedVertex()),r)).next(r=>(r.action==="end"&&(this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()),r)))})}_createManipulatorDragPipelineFreehand(t){return P0(t,(e,n)=>{this.isCompleted||n.next(this._screenToMapDragEventStep()).next(i=>(i.action==="start"&&(ke(this.stagedVertex)&&(this.stagedVertex=i.mapStart),this.geometryType==="segment"&&this.commitStagedVertex()),i)).next(i=>{switch(i.action){case"start":case"update":this.stagedVertex=i.mapEnd,this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this.complete()}return i})})}_createManipulatorDragPipelineHybrid(t){return P0(t,(e,n)=>{this.isCompleted||n.next(this._screenToMapDragEventStep()).next(i=>(i.action==="start"&&(ke(this.stagedVertex)&&(this.stagedVertex=i.mapStart),this.commitStagedVertex()),i)).next(i=>{switch(i.action){case"start":case"update":this.stagedVertex=i.mapEnd,this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()}return i})})}get _drawAtFixedElevation(){return(this.geometryType==="segment"||this.geometryType==="polygon")&&this.numCommittedVertices>0}_getEffectiveDrawSurface(){if(ke(this.elevationDrawSurface))return this.drawSurface;if(!this.coordinateHelper.hasZ())return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let t=this.defaultZ,e=!1;return q(this.elevationInfo)&&this.elevationInfo.mode==="absolute-height"&&(e=!0),q(this.snapToSceneEnabled)&&(e=this.snapToSceneEnabled),q(this.elevationInfo)&&this.elevationInfo.mode==="on-the-ground"&&(e=!1),this._drawAtFixedElevation&&(t=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),e=!1),e?this.drawSurface:(this.elevationDrawSurface.defaultZ=t,this.elevationDrawSurface)}_mapToScreen(t){return this._getEffectiveDrawSurface().mapToScreen(t)}_onHold(t){this._snappingOperation.abort(),this.drawingMode==="click"&&t.pointerType==="touch"&&this._snappingEnabled&&(this.stagedVertex=t.mapPoint),t.stopPropagation()}_onImmediateClick(t){if(t.pointerType==="mouse"&&t.button===2||this._manipulator.dragging)return;const e=this._activeComponent,n=this._closeOnClickVertexIndex(t.screenPoint);if(q(n))return t.stopPropagation(),void this.complete();const i=this._screenToMap(t.screenPoint);if(q(i))switch(this.drawingMode){case"freehand":this.geometryType==="point"&&(q(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(i)),this.complete());break;case"click":case"hybrid":this._snappingOperation.abort(),q(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(i)),(this.geometryType==="point"||this.geometryType==="segment"&&e.vertices.length===2||this.geometryType==="segment"&&this.drawingMode==="hybrid"&&e.vertices.length===1)&&this.complete()}t.stopPropagation()}_onImmediateDoubleClick(t){this._manipulator.dragging||this.geometryType==="point"||(this.complete(),t.stopPropagation())}_onPointerMove(t){const e=hi(t.x,t.y),n=this._snappingOperation;if(this._manipulator.dragging||this._pointerDownStates.has(t.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)return void n.abort();t.stopPropagation();const i=this._closeOnClickVertexIndex(e);if(q(i))return this._closeOnVertex(i),void n.abort();const s=this._screenToMap(e),o=this._requiresScenePoint?this.drawSurface.screenToMap(e):null;if(this._manipulator.cursor=q(s)?"crosshair":null,ke(s))return void n.abort();const r=this.snappingManager;if(ke(r))return this.stagedVertex=s,void n.abort();const a=this._drawAtFixedElevation?Ha(this.elevationDrawSurface,({defaultZ:c})=>c):null,l=new Tb({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:t.pointerType,visualizer:this.snappingVisualizer,selfSnappingZ:q(a)?{value:a,elevationInfo:this.elevationInfo}:null});this.updatingHandles.addPromise(cc(n.snap({point:s,scenePoint:o},r,l)))}_closeOnVertex(t){this.stagedVertex=null;const e={componentIndex:0,vertexIndex:t,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[t].pos)};this.emit("cursor-update",{updated:null,vertices:[e],operation:"apply",type:"vertex-update"})}_screenToMap(t){return this._getEffectiveDrawSurface().screenToMap(t)}_screenToMapDragEventStep(){let t=null;return e=>{if(e.action==="start"&&(t=this._screenToMap(e.screenStart)),ke(t))return null;const n=this._screenToMap(e.screenEnd);return q(n)?{...e,mapStart:t,mapEnd:n}:null}}_vertexWithinPointerDistance(t,e){const i=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(t));return!!q(i)&&h2e(i,e,25)}};function h2e(t,e,n){const i=t.x-e.x,s=t.y-e.y;return i*i+s*s<=n}v([b()],Hn.prototype,"_snappingEnabled",null),v([b()],Hn.prototype,"defaultZ",void 0),v([b()],Hn.prototype,"isDraped",void 0),v([b({value:G_})],Hn.prototype,"drawingMode",null),v([b({constructOnly:!0})],Hn.prototype,"elevationDrawSurface",void 0),v([b({constructOnly:!0})],Hn.prototype,"elevationInfo",void 0),v([b({constructOnly:!0,type:R_})],Hn.prototype,"labelOptions",void 0),v([b({constructOnly:!0,type:V_})],Hn.prototype,"tooltipOptions",void 0),v([b({constructOnly:!0})],Hn.prototype,"geometryType",void 0),v([b({constructOnly:!0})],Hn.prototype,"hasM",void 0),v([b({constructOnly:!0})],Hn.prototype,"hasZ",void 0),v([b({constructOnly:!0})],Hn.prototype,"manipulators",void 0),v([b({constructOnly:!0})],Hn.prototype,"drawSurface",void 0),v([b({constructOnly:!0})],Hn.prototype,"segmentLabels",void 0),v([b({constructOnly:!0})],Hn.prototype,"snappingManager",void 0),v([b({constructOnly:!0})],Hn.prototype,"snappingVisualizer",void 0),v([b()],Hn.prototype,"snapToSceneEnabled",void 0),v([b()],Hn.prototype,"_snappingOperation",void 0),v([b()],Hn.prototype,"stagedVertex",null),v([b()],Hn.prototype,"lastVertex",void 0),v([b()],Hn.prototype,"updating",null),v([b({constructOnly:!0})],Hn.prototype,"view",void 0),Hn=v([Ae("esri.views.draw.DrawOperation")],Hn);class f2e{constructor(e,n,i,s=null){this._elevationInfo=e,this.defaultZ=n,this._view=i,this._excludeGraphics=s}screenToMap(e){if(q(this.defaultZ))return this._view.sceneIntersectionHelper.intersectElevationFromScreen(Qf(e.x,e.y),this._elevationInfo,this.defaultZ,this._excludeGraphics);const n=this._view.sceneIntersectionHelper.intersectElevationFromScreen(Qf(e.x,e.y),this._elevationInfo,0,this._excludeGraphics);return q(n)&&(n.z=void 0),n}mapToScreen(e){const n=Fb(e.x,e.y,tE(this._view,e,this._elevationInfo),e.spatialReference);return this._view.toScreen(n)}constrainZ(e){const{defaultZ:n}=this;return q(n)&&e.z!==n&&((e=YT(e)).z=n),e}}class m2e{constructor(e,n,i=[]){this.view=e,this.elevationInfo=n,this.exclude=i}screenToMap(e){const n=this.view.toMap(e,{exclude:this.exclude});return q(n)&&(n.z=K0(n,this.view,this.elevationInfo)),n}mapToScreen(e){let n=e;return q(this.elevationInfo)&&(n=Fb(e.x,e.y,tE(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(n)}constrainZ(e){return e}}class v3e{constructor(e,n=!1,i=0){this.view=e,this.hasZ=n,this.defaultZ=i,this.mapToScreen=s=>e.toScreen(s),this.screenToMap=n?s=>{const o=e.toMap(s);return o.z=i,o}:s=>e.toMap(s)}constrainZ(e){const{defaultZ:n}=this;return this.hasZ&&e.z!==n&&((e=YT(e)).z=n),e}}var Eu;(function(t){t[t.WhenToolEditable=0]="WhenToolEditable",t[t.WhenToolNotEditable=1]="WhenToolNotEditable",t[t.Always=2]="Always"})(Eu||(Eu={}));class g2e{constructor(){this._isToolEditable=!0,this._manipulators=new Ht,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(e){this._isToolEditable=e}get length(){return this._manipulators.length}add(e,n=Eu.WhenToolEditable){this.addMany([e],n)}addMany(e,n=Eu.WhenToolEditable){for(const i of e){const s={manipulator:i,visibilityPredicate:n,attached:!1};this._manipulators.add(s),this._attached&&this._updateManipulatorAttachment(s)}}remove(e){for(let n=0;n<this._manipulators.length;n++)if(this._manipulators.getItemAt(n).manipulator===e){const i=this._manipulators.splice(n,1)[0];this._detachManipulator(i);break}}removeAll(){this._manipulators.forEach(e=>{this._detachManipulator(e)}),this._manipulators.removeAll()}attach(){this._manipulators.forEach(e=>{this._updateManipulatorAttachment(e)}),this._attached=!0}detach(){this._manipulators.forEach(e=>{this._detachManipulator(e)}),this._attached=!1}destroy(){this.detach(),this._manipulators.forEach(({manipulator:e})=>{e.destroy&&e.destroy()}),this._manipulators.destroy(),this._resourceContexts=null}on(e,n){return this._manipulators.on(e,i=>{n(i)})}forEach(e){for(const n of this._manipulators.items)e(n)}some(e){return this._manipulators.items.some(e)}toArray(){const e=[];return this.forEach(n=>e.push(n.manipulator)),e}intersect(e,n){let i=null,s=Number.MAX_VALUE;return this._manipulators.forEach(({manipulator:o,attached:r})=>{if(!r||!o.interactive)return;const a=o.intersectionDistance(e,n);q(a)&&a<s&&(s=a,i=o)}),i}_updateManipulatorAttachment(e){this._isManipulatorItemVisible(e)?this._attachManipulator(e):this._detachManipulator(e)}_attachManipulator(e){e.attached||(e.manipulator.attach&&e.manipulator.attach(this._resourceContexts),e.attached=!0)}_detachManipulator(e){if(!e.attached)return;const n=e.manipulator;n.grabbing=!1,n.dragging=!1,n.hovering=!1,n.selected=!1,n.detach&&n.detach(this._resourceContexts),e.attached=!1}_isManipulatorItemVisible(e){return e.visibilityPredicate===Eu.Always||(this._isToolEditable?e.visibilityPredicate===Eu.WhenToolEditable:e.visibilityPredicate===Eu.WhenToolNotEditable)}}let Yi=class extends dt{constructor(e){super(e),this.manipulators=new g2e,this.automaticManipulatorSelection=!0,this.hasGrabbedManipulators=!1,this.hasHoveredManipulators=!1,this.firstGrabbedManipulator=null,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[Do.MANAGER,!0],[Do.USER,!0]]),this._creationFinishedResolver=PS()}get active(){return this.view!=null&&this.view.activeTool===this}set visible(e){this._get("visible")!==e&&(this._set("visible",e),this._syncVisible())}get editable(){return this.getEditableFlag(Do.USER)}set editable(e){this.setEditableFlag(Do.USER,e)}get updating(){return!1}get cursor(){return null}get hasFocusedManipulators(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){ke(this.view)?Tt.getLogger(this.declaredClass).error("Can't activate tool if view is not defined."):(this.view.focus(),this.onActivate())}deactivate(){this.onDeactivate()}handleInputEvent(e){this.onInputEvent(e)}handleInputEventAfter(e){this.onInputEventAfter(e)}setEditableFlag(e,n){this._editableFlags.set(e,n),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),e===Do.USER&&this.notifyChange("editable"),this.onEditableChange(),this.onManipulatorSelectionChanged()}getEditableFlag(e){return this._editableFlags.get(e)}whenCreated(){return this._creationFinishedResolver.promise}onManipulatorSelectionChanged(){}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(e){}onInputEventAfter(e){}get internallyEditable(){return this.getEditableFlag(Do.USER)&&this.getEditableFlag(Do.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.initialized){if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};v([b({constructOnly:!0})],Yi.prototype,"view",void 0),v([b({readOnly:!0})],Yi.prototype,"active",null),v([b({value:!0})],Yi.prototype,"visible",null),v([b({value:!0})],Yi.prototype,"editable",null),v([b({readOnly:!0})],Yi.prototype,"manipulators",void 0),v([b({readOnly:!0})],Yi.prototype,"updating",null),v([b()],Yi.prototype,"cursor",null),v([b({readOnly:!0})],Yi.prototype,"automaticManipulatorSelection",void 0),v([b()],Yi.prototype,"hasFocusedManipulators",null),v([b()],Yi.prototype,"hasGrabbedManipulators",void 0),v([b()],Yi.prototype,"hasHoveredManipulators",void 0),v([b()],Yi.prototype,"firstGrabbedManipulator",void 0),v([b({readOnly:!0})],Yi.prototype,"created",void 0),v([b({readOnly:!0})],Yi.prototype,"removeIncompleteOnCancel",void 0),Yi=v([Ae("esri.views.interactive.InteractiveToolBase")],Yi);let Qi=class extends Li(Ii.EventedMixin(Yi)){constructor(t){super(t),this.defaultZ=0,this.elevationInfo=null,this.hasZ=!0,this.mode=null,this.snapToScene=null,this.type="draw-3d"}initialize(){const t=this.view,e=wO(this.hasZ,this.elevationInfo);this.drawOperation=new Hn({view:t,manipulators:this.manipulators,geometryType:this.geometryType,drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:t.type==="3d"?new m2e(t,e):null,elevationDrawSurface:t.type==="3d"?new f2e(e,this.defaultZ,t):null,hasM:!1,elevationInfo:e}),this.handles.add([this.drawOperation.on("vertex-add",n=>this.onVertexAdd(n)),this.drawOperation.on("vertex-remove",n=>this.onVertexRemove(n)),this.drawOperation.on("vertex-update",n=>this.onVertexUpdate(n)),this.drawOperation.on("cursor-update",n=>this.onCursorUpdate(n)),this.drawOperation.on("complete",n=>this.onComplete(n))]),this.finishToolCreation()}destroy(){this.drawOperation=sn(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set enabled(t){this.drawOperation.interactive=t,this._set("enabled",t)}get updating(){var t;return((t=this.drawOperation)==null?void 0:t.updating)??!1}completeCreateOperation(){this.drawOperation.complete()}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}getVertexCoords(){return this.drawOperation.vertices}onInputEvent(t){this.drawOperation.onInputEvent(t)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}onComplete(t){this.emit("complete",t)}onCursorUpdate(t){this.emit("cursor-update",t)}onVertexAdd(t){this.emit("vertex-add",t)}onVertexRemove(t){this.emit("vertex-remove",t)}onVertexUpdate(t){this.emit("vertex-update",t)}};v([b({constructOnly:!0,nonNullable:!0})],Qi.prototype,"defaultZ",void 0),v([b()],Qi.prototype,"drawOperation",void 0),v([b({constructOnly:!0})],Qi.prototype,"elevationInfo",void 0),v([b({value:!0})],Qi.prototype,"enabled",null),v([b({constructOnly:!0})],Qi.prototype,"geometryType",void 0),v([b({constructOnly:!0})],Qi.prototype,"hasZ",void 0),v([b({constructOnly:!0})],Qi.prototype,"mode",void 0),v([b()],Qi.prototype,"snapToScene",void 0),v([b({readOnly:!0})],Qi.prototype,"type",void 0),v([b({readOnly:!0})],Qi.prototype,"updating",null),v([b({constructOnly:!0,nonNullable:!0})],Qi.prototype,"view",void 0),Qi=v([Ae("esri.views.draw.DrawTool")],Qi);let $S=class extends Sg{constructor(t){super(t),this._addVertexOnPointerUp=!1}initialize(){this.view.type==="2d"?this._addViewHandles():this._addDrawTool()}destroy(){this.view.type==="2d"?this._removeViewHandles():this._removeDrawTool(),this.emit("destroy")}complete(){this.view.type==="2d"?this._cursorScreenPoint&&this._completeDrawing():this._drawTool.completeCreateOperation()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("pointer-down",t=>{this._shouldHandlePointerEvent(t)&&(this._abortSnapping(),this._activePointerId=t.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=In(t),t.pointerType==="touch"&&this._updateCursor(t.native))},nt.TOOL),this.view.on("pointer-move",t=>{this._abortSnapping(),this._cursorScreenPoint=In(t),t.pointerType!=="touch"&&this._updateCursor(t.native)},nt.TOOL),this.view.on("pointer-drag",t=>{this._shouldHandlePointerEvent(t)&&(this._abortSnapping(),this._addVertexOnPointerUp=!1)},nt.TOOL),this.view.on("pointer-up",t=>{if(this._shouldHandlePointerEvent(t))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp)t.stopPropagation(),this._vertexAddHandler(t);else{const e=t.pointerType==="touch";this._updateCursor(t.native,e)}},nt.TOOL),this.view.on("drag",["Shift"],t=>{t.stopPropagation()},nt.TOOL),this.view.on("key-down",t=>{t.key===Mt.complete&&this._cursorScreenPoint&&(this._abortSnapping(),this._vertexAddHandler(t))},nt.TOOL)],this._viewHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_addDrawTool(){this._drawTool=new Qi({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"point",mode:"click"}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("cursor-update",t=>{t.vertices.length===1&&this.emit("cursor-update",new il(this.view,null,t.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",t=>{this.emit("draw-complete",new sl(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=sn(this._drawTool)}_addVertex(t){const e=this._coordinateHelper.arrayToVector(t);this._isDuplicateOfLastVertex(e)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(e),this.notifyChange("vertices"),this._completeDrawing())}_updateCursor(t,e=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const n=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);q(n)&&!e&&this._pushCursorVertex(n.vertex,()=>this.emit("cursor-update",new il(this.view,t,this._activeComponent.vertices.length,this.vertices,q(this._stagedVertex)?new Kt(this._stagedVertex):null)))}_completeDrawing(t){this._activePointerId=null,this._popCursorVertex(),this._abortSnapping(),q(this._snappingManager)&&this._snappingManager.doneSnapping();const e=new sl(t,this.vertices);this.emit("draw-complete",e),e.defaultPrevented||this._removeViewHandles()}};$S=v([Ae("esri.views.draw.PointDrawAction")],$S);let Gd=class extends Sg{constructor(e){super(e),this._panEnabled=!1,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this.mode=G_}initialize(){this.view.type==="2d"?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool()}destroy(){this.view.type==="2d"?(this._removeViewHandles(),this._removeUndoRedoHandles()):this._removeDrawTool(),this.emit("destroy")}get _dragEnabled(){return this.mode==="freehand"||this.mode==="hybrid"}get _clickEnabled(){return this.mode==="click"||this.mode==="hybrid"}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){this.view.type==="2d"?this._completeDrawing():this._drawTool.completeCreateOperation()}_getGeometryZValue(){return this.hasZ&&this.vertices.length>0?this.vertices[0][2]:this.defaultZ}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",e=>{e.stopPropagation()},nt.TOOL),this.view.on("pointer-down",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._activePointerId=e.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=In(e),e.pointerType==="touch"&&this._updateCursor(e.native))},nt.TOOL),this.view.on("pointer-move",e=>{this._abortSnapping(),this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._cursorScreenPoint=In(e),e.pointerType!=="touch"&&this._updateCursor(e.native)},nt.TOOL),this.view.on("pointer-drag",e=>{this._shouldHandlePointerEvent(e)&&(this._abortSnapping(),this._cursorScreenPoint=In(e),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(e):this._addVertexOnPointerUp=!1)},nt.TOOL),this.view.on("pointer-up",e=>{if(this._shouldHandlePointerEvent(e))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp){if(!this._clickEnabled)return this.vertices.length===1&&this.vertices.pop(),void this._drawCompleteHandler(e);this._vertexAddHandler(e)}else{const n=e.pointerType==="touch";this._updateCursor(e.native,n)}},nt.TOOL),this.view.on("drag",e=>{this._dragEnabled&&q(this._activePointerId)&&!this._panEnabled&&e.stopPropagation()},nt.TOOL),this.view.on("drag",["Shift"],e=>{e.stopPropagation()},nt.TOOL),this.view.on("double-click",e=>{e.stopPropagation(),this._drawCompleteHandler(e)},nt.TOOL),this.view.on("double-click",["Control"],e=>{e.stopPropagation(),this._drawCompleteHandler(e)},nt.TOOL),this.view.on("key-down",e=>{const{key:n,repeat:i}=e;n===Mt.vertexAdd&&!i&&this._cursorScreenPoint?(e.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(e)):n!==Mt.complete||i?n!==Mt.undo||this.interactiveUndoDisabled||i?n!==Mt.redo||this.interactiveUndoDisabled||i?n!==Mt.pan||i||(e.stopPropagation(),this._panEnabled=!0):(e.stopPropagation(),this.redo()):(e.stopPropagation(),this.undo()):(e.stopPropagation(),this._drawCompleteHandler(e))},nt.TOOL),this.view.on("key-up",e=>{e.key===Mt.pan&&(e.stopPropagation(),this._panEnabled=!1)},nt.TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",e=>{if(this.notifyChange("vertices"),e.operation==="undo"){const n=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(n);const i=[...this._committedVertices];q(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new KT(this.view,n,e.vertices[0].index,i))}}),this._editGeometryOperations.on("vertex-add",e=>{if(this.notifyChange("vertices"),e.operation==="apply"){const n=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],i=this._committedVertices.length-1,s=new ta(this.view,n,i,this.vertices);this.emit("vertex-add",s),s.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if(e.operation==="redo"){const n=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(n);const i=[...this._committedVertices];q(this._stagedVertex)&&i.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new ta(this.view,n,e.vertices[0].index,i))}})],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addDrawTool(){this._drawTool=new Qi({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polygon",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._drawTool.on("vertex-add",e=>{e.vertices.length===1&&this.emit("vertex-add",new ta(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("cursor-update",e=>{e.vertices.length===1&&this.emit("cursor-update",new il(this.view,null,e.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",e=>{this.emit("draw-complete",new sl(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=sn(this._drawTool)}_addVertex(e,n){const i=this._coordinateHelper.arrayToVector(e);if(this._isDuplicateOfLastVertex(i))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(i);const s=n||new Event("placeholder");this._nativeEventHistory.undoStack.push(s)}_updateCursor(e,n=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const i=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);q(i)&&!n&&this._pushCursorVertex(i.vertex,()=>this.emit("cursor-update",new il(this.view,e,this._activeComponent.vertices.length,this.vertices,q(this._stagedVertex)?new Kt(this._stagedVertex):null)))}_completeDrawing(e){if(this._activePointerId=null,this._popCursorVertex(),this._committedVertices.length<3)return;this._abortSnapping(),q(this._snappingManager)&&this._snappingManager.doneSnapping();const n=new sl(e,this.vertices);this.emit("draw-complete",n),n.defaultPrevented||this._removeViewHandles()}};v([b()],Gd.prototype,"_dragEnabled",null),v([b()],Gd.prototype,"_clickEnabled",null),v([b({type:D5})],Gd.prototype,"mode",void 0),Gd=v([Ae("esri.views.draw.PolygonDrawAction")],Gd);let jd=class extends Sg{constructor(t){super(t),this._panEnabled=!1,this._popVertexOnPointerMove=!1,this._addVertexOnPointerUp=!1,this.mode=G_}initialize(){this.view.type==="2d"?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool()}destroy(){this.view.type==="2d"?(this._removeViewHandles(),this._removeUndoRedoHandles()):this._removeDrawTool(),this.emit("destroy")}get _clickEnabled(){return this.mode==="click"||this.mode==="hybrid"}get _dragEnabled(){return this.mode==="freehand"||this.mode==="hybrid"}undo(){super.undo(),this.notifyChange("vertices")}redo(){super.redo(),this.notifyChange("vertices")}complete(){this.view.type==="2d"?this._completeDrawing():this._drawTool.completeCreateOperation()}_addViewHandles(){this._removeViewHandles(),this._handles.add([this.view.on("click",t=>{t.stopPropagation()},nt.TOOL),this.view.on("pointer-down",t=>{this._shouldHandlePointerEvent(t)&&!this._panEnabled&&(this._abortSnapping(),this._activePointerId=t.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=In(t),t.pointerType==="touch"&&this._updateCursor(t.native))},nt.TOOL),this.view.on("pointer-move",t=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1),this._abortSnapping(),this._cursorScreenPoint=In(t),t.pointerType!=="touch"&&this._updateCursor(t.native)},nt.TOOL),this.view.on("pointer-drag",t=>{this._shouldHandlePointerEvent(t)&&(this._abortSnapping(),this._cursorScreenPoint=In(t),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(t):this._addVertexOnPointerUp=!1)},nt.TOOL),this.view.on("pointer-up",t=>{if(this._shouldHandlePointerEvent(t))if(this._abortSnapping(),this._activePointerId=null,this._addVertexOnPointerUp){if(!this._clickEnabled)return this.vertices.length===1&&this.vertices.pop(),void this._drawCompleteHandler(t);this._vertexAddHandler(t)}else{const e=t.pointerType==="touch";this._updateCursor(t.native,e)}},nt.TOOL),this.view.on("drag",t=>{this._dragEnabled&&q(this._activePointerId)&&!this._panEnabled&&t.stopPropagation()},nt.TOOL),this.view.on("drag",["Shift"],t=>{t.stopPropagation()},nt.TOOL),this.view.on("double-click",t=>{t.stopPropagation(),this._drawCompleteHandler(t)},nt.TOOL),this.view.on("double-click",["Control"],t=>{t.stopPropagation(),this._drawCompleteHandler(t)},nt.TOOL),this.view.on("key-down",t=>{const{key:e,repeat:n}=t;e===Mt.vertexAdd&&!n&&this._cursorScreenPoint?(t.stopPropagation(),this._abortSnapping(),this._vertexAddHandler(t)):e!==Mt.complete||n?e!==Mt.undo||this.interactiveUndoDisabled||n?e!==Mt.redo||this.interactiveUndoDisabled||n?e!==Mt.pan||n||(t.stopPropagation(),this._panEnabled=!0):(t.stopPropagation(),this.redo()):(t.stopPropagation(),this.undo()):(t.stopPropagation(),this._drawCompleteHandler(t))},nt.TOOL),this.view.on("key-up",t=>{t.key===Mt.pan&&(t.stopPropagation(),this._panEnabled=!1)},nt.TOOL)],this._viewHandlesKey)}_addUndoRedoHandles(){this._removeUndoRedoHandles(),this._handles.add([this._editGeometryOperations.on("vertex-remove",t=>{if(this.notifyChange("vertices"),t.operation==="undo"){const e=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(e);const n=[...this._committedVertices];q(this._stagedVertex)&&n.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("undo",new KT(this.view,e,t.vertices[0].index,n))}}),this._editGeometryOperations.on("vertex-add",t=>{if(this.notifyChange("vertices"),t.operation==="apply"){const e=this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],n=this._committedVertices.length-1,i=new ta(this.view,e,n,this.vertices);this.emit("vertex-add",i),i.defaultPrevented&&(this._popVertexOnPointerMove=!0)}else if(t.operation==="redo"){const e=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(e);const n=[...this._committedVertices];q(this._stagedVertex)&&n.push(this._coordinateHelper.pointToArray(this._stagedVertex)),this.emit("redo",new ta(this.view,e,t.vertices[0].index,n))}})],this._undoRedoHandlesKey)}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_removeUndoRedoHandles(){this._handles.remove(this._undoRedoHandlesKey)}_addDrawTool(){this._drawTool=new Qi({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polyline",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("vertex-add",t=>{t.vertices.length===1&&this.emit("vertex-add",new ta(this.view,null,t.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("cursor-update",t=>{t.vertices.length===1&&this.emit("cursor-update",new il(this.view,null,t.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",t=>{this.emit("draw-complete",new sl(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=sn(this._drawTool)}_addVertex(t,e){const n=this._coordinateHelper.arrayToVector(t);if(this._isDuplicateOfLastVertex(n))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(n);const i=e||new Event("placeholder");this._nativeEventHistory.undoStack.push(i)}_updateCursor(t,e=!1){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const n=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);q(n)&&!e&&this._pushCursorVertex(n.vertex,()=>this.emit("cursor-update",new il(this.view,t,this._activeComponent.vertices.length,this.vertices,q(this._stagedVertex)?new Kt(this._stagedVertex):null)))}_completeDrawing(t){if(this._activePointerId=null,this._popCursorVertex(),this._committedVertices.length<2)return;this._abortSnapping(),q(this._snappingManager)&&this._snappingManager.doneSnapping();const e=new sl(t,this.vertices);this.emit("draw-complete",e),e.defaultPrevented||this._removeViewHandles()}};v([b()],jd.prototype,"_clickEnabled",null),v([b()],jd.prototype,"_dragEnabled",null),v([b({type:D5})],jd.prototype,"mode",void 0),jd=v([Ae("esri.views.draw.PolylineDrawAction")],jd);function Ib(t,e,n=null){return q(n)?[t,e,n]:[t,e]}function H5(t,e,n=null){return q(n)?{x:t,y:e,z:n}:{x:t,y:e}}class U5{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return p8(e.map(n=>this.mapToLocal(n)))}get doUnnormalization(){return!1}}class v2e extends U5{constructor(e,n,i=null){super(n),this._defaultZ=i,this.transform=Qr(),this.transformInv=Qr(),this.transform=fN(e),jS(this.transformInv,this.transform)}makeMapPoint(e,n){return Ib(e,n,this._defaultZ)}mapToLocal(e){return H5(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return Ib(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this._defaultZ)}}class y2e extends U5{constructor(e,n){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=ht(),this.tangentFrameUpWS=ht(),this.tangentFrameRightWS=ht(),this.tangentFrameForwardWS=ht(),this.localFrameRightWS=ht(),this.localFrameUpWS=ht(),this.worldToLocalTransform=LI(),this.localToWorldTransform=LI(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=n,this.defaultZ=n.hasZ?n.z:null;const i=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,J_.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,J_.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,J_.Z,this.tangentFrameForwardWS);const s=ht();Vb(s,this.tangentFrameForwardWS,Hi(i,this.tangentFrameForwardWS)),dp(this.localFrameRightWS,i,s),Jh(this.localFrameRightWS,this.localFrameRightWS),uc(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),_z(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),wz(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return this.view.viewingMode==="global"}makeMapPoint(e,n){return Ib(e,n,this.defaultZ)}mapToLocal(e){const n=ht();this.view.renderCoordsHelper.toRenderCoords(new Kt({x:e[0],y:e[1],spatialReference:this.spatialReference}),n),kI(n,n,this.worldToLocalTransform);const i=this.view.renderCoordsHelper.fromRenderCoords(n,this.view.spatialReference);return q(i)?H5(i.x/this.scale,i.y/this.scale):null}localToMap(e){const n=ht();this.view.renderCoordsHelper.toRenderCoords(new Kt({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),n),kI(n,n,this.localToWorldTransform);const i=this.view.renderCoordsHelper.fromRenderCoords(n,this.view.spatialReference);return q(i)?Ib(i.x,i.y,this.defaultZ):null}}function b2e(t,e){if(t.type==="2d")return new v2e(t.state.transform,t.spatialReference,e.length>2?e[2]:null);if(t.type==="3d"){const n=e.length>2?new Kt({x:e[0],y:e[1],z:e[2],spatialReference:t.spatialReference}):new Kt({x:e[0],y:e[1],spatialReference:t.spatialReference});return new y2e(t,n)}return null}const _2e=["freehand","click"];let My=class extends Sg{constructor(t){super(t),this._isDragging=!1,this._panEnabled=!1,this._addVertexOnPointerUp=!1,this.viewAlignedCoordinateSystem=null,this.mode="freehand"}initialize(){this.view.type==="2d"?this._addViewHandles():this._addDrawTool()}destroy(){this.view.type==="2d"?this._removeViewHandles():this._removeDrawTool(),this.emit("destroy")}complete(){this.view.type==="2d"?this._completeDrawing():this._drawTool.completeCreateOperation()}_getGeometryZValue(){return this.hasZ&&this.vertices.length>0?this.vertices[0][2]:this.defaultZ}_addViewHandles(){this._removeViewHandles(),this.mode==="click"?this._handles.add(this._getClickModeViewHandles(),this._viewHandlesKey):this._handles.add(this._getDragModeViewHandles(),this._viewHandlesKey)}_getDragModeViewHandles(){return[this.view.on("immediate-click",t=>{if(t.stopPropagation(),t.mapPoint&&!this._panEnabled){const e=this.getCoordsFromScreenPoint(In(t));q(e)&&(this._vertexAddHandler(t),this._drawCompleteHandler(t))}},nt.TOOL),this.view.on("pointer-down",t=>{this._shouldHandlePointerEvent(t)&&(this._abortSnapping(),this._panEnabled||(this._resetGeometry(),this._addVertexOnPointerUp=!0,this._cursorScreenPoint=In(t),this._activePointerId=t.pointerId,this._vertexAddHandler(t),this._isDragging=!1,t.pointerType==="touch"&&this._updateCursor(t.native)))},nt.TOOL),this.view.on("pointer-move",t=>{this._abortSnapping(),ke(this._activePointerId)&&t.pointerType!=="touch"&&(this._cursorScreenPoint=In(t),this._updateCursor(t.native))},nt.TOOL),this.view.on("pointer-drag",t=>{this._shouldHandlePointerEvent(t)&&(this._abortSnapping(),this._isDragging=!0,this._cursorScreenPoint=In(t),this._updateCursor(t.native))},nt.TOOL),this.view.on("pointer-up",t=>{this._shouldHandlePointerEvent(t)&&this._addVertexOnPointerUp&&(this._abortSnapping(),this._activePointerId=null,this._isDragging&&this._vertexAddHandler(t),this._committedVertices.length===2&&this._drawCompleteHandler(t),this._isDragging=!1)},nt.TOOL),this.view.on("key-down",t=>{t.key===Mt.complete&&this._cursorScreenPoint?(this._abortSnapping(),this._vertexAddHandler(t),this._drawCompleteHandler(t)):t.key===Mt.pan&&(this._panEnabled=!0)},nt.TOOL),this.view.on("key-up",t=>{t.key===Mt.pan&&(this._panEnabled=!1)},nt.TOOL),this.view.on("drag",t=>{q(this._activePointerId)&&t.stopPropagation()},nt.TOOL),this.view.on("drag",["Shift"],t=>{t.stopPropagation()},nt.TOOL)]}_getClickModeViewHandles(){return[this.view.on("pointer-down",t=>{this._abortSnapping(),this._cursorScreenPoint=In(t),this._activePointerId=t.pointerId,this._isDragging=!1,t.pointerType==="touch"&&this._updateCursor(t.native)},nt.TOOL),this.view.on("pointer-move",t=>{this._abortSnapping(),this._cursorScreenPoint=In(t),ke(this._activePointerId)&&t.pointerType!=="touch"&&this._updateCursor(t.native)},nt.TOOL),this.view.on("pointer-drag",t=>{this._shouldHandlePointerEvent(t)&&(this._abortSnapping(),this._isDragging=!0)},nt.TOOL),this.view.on("pointer-up",t=>{this._shouldHandlePointerEvent(t)&&(this._abortSnapping(),this._activePointerId=null,t.stopPropagation(),this._isDragging||this._vertexAddHandler(t),this.vertices.length!==2||this._isDragging||this._drawCompleteHandler(t),this._isDragging=!1)},nt.TOOL),this.view.on("key-down",t=>{t.key===Mt.vertexAdd&&this._cursorScreenPoint&&(this._vertexAddHandler(t),this.vertices.length===2&&this._drawCompleteHandler(t)),t.key===Mt.complete&&this._cursorScreenPoint&&this.vertices.length===2&&(this._vertexAddHandler(t),this._drawCompleteHandler(t))},nt.TOOL)]}_removeViewHandles(){this._handles.remove(this._viewHandlesKey)}_addDrawTool(){this._drawTool=new Qi({view:this.view,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"segment",mode:this.mode}),this.view.addAndActivateTool(this._drawTool),this._handles.add([this._drawTool.on("vertex-add",t=>{t.vertices.length===1&&this.emit("vertex-add",new ta(this.view,null,t.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("cursor-update",t=>{t.vertices.length===1&&this.emit("cursor-update",new il(this.view,null,t.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))}),this._drawTool.on("complete",t=>{this.emit("draw-complete",new sl(null,this._drawTool.getVertexCoords())),this._removeDrawTool()})],this._drawToolHandlesKey)}_removeDrawTool(){this._handles.remove(this._drawToolHandlesKey),this.view.tools.remove(this._drawTool),this._drawTool=sn(this._drawTool)}_addVertex(t,e){const n=this._coordinateHelper.arrayToVector(t);if(this._isDuplicateOfLastVertex(n))return;this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometryOperations.appendVertex(n),this._committedVertices.length===1&&(this.viewAlignedCoordinateSystem=b2e(this.view,this._committedVertices[0]));const i=this._committedVertices.length-1,s=new ta(this.view,e,i,this.vertices);this.emit("vertex-add",s)}_updateCursor(t){if(this._popCursorVertex(),!this._cursorScreenPoint)return;const e=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);q(e)&&this._pushCursorVertex(e.vertex,()=>this.emit("cursor-update",new il(this.view,t,this._activeComponent.vertices.length,this.vertices,q(this._stagedVertex)?new Kt(this._stagedVertex):null)))}_completeDrawing(t){if(this._activePointerId=null,this._popCursorVertex(),this._cursorScreenPoint=null,this._isDragging=!1,this._abortSnapping(),q(this._snappingManager)&&this._snappingManager.doneSnapping(),this.vertices.length<1)return;const e=new sl(t,this.vertices);this.emit("draw-complete",e),e.defaultPrevented||this._removeViewHandles()}_resetGeometry(){this._editGeometryOperations.destroy(),this._editGeometryOperations=new W_(new Cg("polygon",this._coordinateHelper)),this._activeComponent=new Mp(this._coordinateHelper.spatialReference,mr.Local),this._editGeometryOperations.data.components.push(this._activeComponent)}};v([b({type:_2e})],My.prototype,"mode",void 0),My=v([Ae("esri/views/2d/engine/markup/SegmentDrawAction")],My);let qd=class extends dt{constructor(){super(...arguments),this.activeAction=null,this.type="draw",this.view=null}destroy(){this.activeAction&&(this.activeAction.destroy(),this.activeAction=null)}create(t,e){this.reset();const n={view:this.view,...e};switch(t){case"point":n.editGeometryType="point",this.activeAction=new $S(n);break;case"polyline":n.editGeometryType="polyline",this.activeAction=new jd(n);break;case"multipoint":n.editGeometryType="polygon",this.activeAction=new MS(n);break;case"polygon":n.editGeometryType="polygon",this.activeAction=new Gd(n);break;case"rectangle":case"circle":case"ellipse":case"triangle":n.editGeometryType="polygon",this.activeAction=new My(n)}return this.activeAction}complete(){this.activeAction&&this.activeAction.complete(),this.activeAction=null}reset(){this.activeAction&&this.activeAction.destroy(),this.activeAction=null}};v([b()],qd.prototype,"activeAction",void 0),v([b({readOnly:!0})],qd.prototype,"type",void 0),v([b()],qd.prototype,"view",void 0),qd=v([Ae("esri.views.draw.Draw")],qd);const LL=qd;const W5=(t,e)=>{const n=t.__vccOpts||t;for(const[i,s]of e)n[i]=s;return n},kr=t=>(_H("data-v-dd93f7dd"),t=t(),wH(),t),w2e=kr(()=>G("img",{id:"title",src:Ywe},null,-1)),C2e={id:"navigation"},S2e={class:"img"},E2e={t:"1672747217814",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6475",width:"19",height:"19",style:{display:"block",margin:"auto",position:"relative",top:"3px"}},k2e=kr(()=>G("path",{d:"M273.0752 1024H204.8v-204.8H0V0h819.2v204.8h204.8v819.2H273.0752zM750.9504 204.8V68.2752H68.2752v682.6752H204.8V204.8h546.1248z",fill:"#000000","p-id":"6476"},null,-1)),T2e=[k2e],I2e=kr(()=>G("div",{class:"txt",id:"basemap_txt"},"底图",-1)),x2e=kr(()=>G("div",null,[G("div",{class:"img"},[G("svg",{t:"1672747256047",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7481",width:"25",height:"25"},[G("path",{d:"M512 78.769231l433.230769 315.076923-433.230769 315.076923L78.769231 393.846154 512 78.769231z m352 492.307692L945.230769 630.153846 512 945.230769 78.769231 630.153846l81.230769-59.076923L512 827.076923l352-256z",fill:"#000000","p-id":"7482"})])]),G("div",{class:"txt",id:"layer_txt"},"图层")],-1)),M2e=[x2e],$2e=kr(()=>G("div",null,[G("div",{class:"img"},[G("svg",{t:"1675064009467",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3147",width:"25",height:"25"},[G("path",{d:"M862.709333 116.042667a32 32 0 1 1 45.248 45.248L455.445333 613.813333a32 32 0 1 1-45.258666-45.258666L862.709333 116.053333zM853.333333 448a32 32 0 0 1 64 0v352c0 64.8-52.533333 117.333333-117.333333 117.333333H224c-64.8 0-117.333333-52.533333-117.333333-117.333333V224c0-64.8 52.533333-117.333333 117.333333-117.333333h341.333333a32 32 0 0 1 0 64H224a53.333333 53.333333 0 0 0-53.333333 53.333333v576a53.333333 53.333333 0 0 0 53.333333 53.333333h576a53.333333 53.333333 0 0 0 53.333333-53.333333V448z",fill:"#000000","p-id":"3148"})])]),G("div",{class:"txt",id:"editor_txt"},"编辑")],-1)),A2e=[$2e],L2e=kr(()=>G("div",null,[G("div",{class:"img"},[G("svg",{t:"1675085099435",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3002",width:"23",height:"23"},[G("path",{d:"M1014.4 971L731.1 687.7c28.4-32.8 51.3-69.6 68.2-109.7C821 526.6 832 472.1 832 416s-11-110.6-32.7-161.9c-21-49.5-50.9-94-89.1-132.2-38.2-38.3-82.7-68.2-132.3-89.2C526.6 11 472.1 0 416 0S305.4 11 254.1 32.7c-49.5 21-94 50.9-132.2 89.1-38.3 38.2-68.2 82.7-89.2 132.3C11 305.4 0 359.9 0 416s11 110.6 32.7 161.9c21 49.5 50.9 94 89.1 132.2 38.2 38.2 82.7 68.2 132.2 89.1C305.4 821 359.9 832 416 832s110.6-11 161.9-32.7c40.5-17.1 77.7-40.4 110.8-69.1L972 1013.4c11.7 11.7 30.8 11.7 42.4 0 11.7-11.7 11.7-30.8 0-42.4zM416 772c-95.1 0-184.5-37-251.7-104.3C97 600.5 60 511.1 60 416s37-184.5 104.3-251.7C231.5 97 320.9 60 416 60s184.5 37 251.7 104.3C735 231.5 772 320.9 772 416s-37 184.5-104.3 251.7C600.5 735 511.1 772 416 772z",fill:"#000000","p-id":"3003"})])]),G("div",{class:"txt",id:"query_txt"},"查询")],-1)),O2e=[L2e],P2e={id:"query"},R2e=kr(()=>G("div",null,[G("div",{class:"img"},[G("svg",{t:"1675085997837",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"14050",width:"20",height:"20"},[G("path",{d:"M594.8 671.7l120.3 46.9-100.7 80.7z",fill:"#000000","p-id":"14051"}),G("path",{d:"M591.2 859l-36.4-237.2 223.6 87.1L591.2 859z m43.7-137.3l2.8 18 14.2-11.4-17-6.6z",fill:"#000000","p-id":"14052"}),G("path",{d:"M810.6 934.7c-8.2 0-16.4-3.1-22.6-9.4L606.7 744.1c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L833.2 880c12.5 12.5 12.5 32.8 0 45.3-6.3 6.3-14.4 9.4-22.6 9.4z",fill:"#000000","p-id":"14053"}),G("path",{d:"M512.3 905.2H285.9L58.7 511.8l227.2-393.4h454.3l227.1 393.4-105.5 182.7c-8.8 15.3-28.4 20.5-43.7 11.7-15.3-8.8-20.5-28.4-11.7-43.7l87-150.7-190.2-329.4H322.8L132.6 511.8l190.2 329.4h189.5c17.7 0 32 14.3 32 32s-14.3 32-32 32z",fill:"#000000","p-id":"14054"})])]),G("div",{class:"txt",id:"polygon_txt"},"划线")],-1)),V2e=[R2e],F2e=kr(()=>G("div",null,[G("div",{class:"img"},[G("svg",{t:"1675087123756",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"15313",width:"20",height:"20"},[G("path",{d:"M864 896H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h704a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zM192 832h640V192H192v640z","p-id":"15314",fill:"#000000"})])]),G("div",{class:"txt",id:"rectangle_txt"},"框选")],-1)),D2e=[F2e],N2e=kr(()=>G("div",null,[G("div",{class:"img"},[G("svg",{t:"1675087218193",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2575",width:"20",height:"20"},[G("path",{d:"M850.538343 895.516744c-11.494799 0-22.988574-4.386914-31.763424-13.161764L141.103692 204.669426c-17.548678-17.534352-17.548678-45.992497 0-63.525825 17.548678-17.548678 45.977147-17.548678 63.525825 0l677.671227 677.685553c17.548678 17.534352 17.548678 45.992497 0 63.525825C873.526917 891.128807 862.032118 895.516744 850.538343 895.516744z",fill:"#000000","p-id":"2576"}),G("path",{d:"M172.867116 895.516744c-11.494799 0-22.988574-4.386914-31.763424-13.161764-17.548678-17.534352-17.548678-45.992497 0-63.525825l677.671227-677.685553c17.548678-17.548678 45.977147-17.548678 63.525825 0 17.548678 17.534352 17.548678 45.992497 0 63.525825L204.629517 882.354979C195.85569 891.128807 184.360891 895.516744 172.867116 895.516744z",fill:"#000000","p-id":"2577"})])]),G("div",{class:"txt"},"取消")],-1)),B2e=[N2e],z2e=kr(()=>G("div",null,[G("div",{class:"img"},[G("svg",{t:"1675087346310",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4981",width:"20",height:"20"},[G("path",{d:"M384.119471 821.116243c-11.918447 0-23.837918-4.527107-32.936133-13.573133L77.629032 535.332405c-18.196431-18.107403-18.196431-47.456848 0-65.557088 18.196431-18.107403 47.674812-18.10024 65.871243-0.007163l240.619196 239.436254 495.173776-492.739331c18.196431-18.107403 47.674812-18.107403 65.871243 0 18.196431 18.10024 18.196431 47.449685 0 65.557088L417.055604 807.535947C407.956366 816.589137 396.037918 821.116243 384.119471 821.116243z","p-id":"4982",fill:"#000000"})])]),G("div",{class:"txt"},"查询")],-1)),H2e=[z2e],U2e=kr(()=>G("div",{id:"view",class:"cc"},null,-1)),W2e={id:"basemapGallery"},G2e=r6('<div id="compass" data-v-dd93f7dd></div><div id="zoom" data-v-dd93f7dd></div><div id="home" data-v-dd93f7dd></div><div id="legend" data-v-dd93f7dd></div><div id="scaleBar" data-v-dd93f7dd></div>',5),j2e={id:"layerList"},q2e={id:"popupTemplate_editor"},K2e={id:"editor"},Y2e={__name:"Home",setup(t){P6(k=>({"2815c761":p(n).basemap,"00dbe147":p(n).layer,"0ed19437":p(n).editor,"012b24be":p(n).query,"24373bb0":p(n).polygon,"281ece65":p(n).rectangle}));let e=Yt({basemap:!1,layer:!1,editor:!1,popupTemplate_editor:!1,query:!1}),n=Yt({basemap:"black",layer:"black",editor:"black",query:"black",polygon:"black",rectangle:"black"});function i(){e.basemap==!1?(e.basemap=!0,n.basemap="#0079c1",oo({message:"底图切换功能已打开",type:"success",duration:1200})):(e.basemap=!1,n.basemap="black",oo({message:"底图切换功能已关闭",type:"success",duration:1200}))}function s(){e.layer==!1?(e.layer=!0,n.layer="#0079c1",oo({message:"图层管理功能已打开",type:"success",duration:1200})):(e.layer=!1,n.layer="black",oo({message:"图层管理功能已关闭",type:"success",duration:1200}))}function o(){e.editor==!1&&e.popupTemplate_editor==!0?oo({message:"已存在弹窗编辑功能",type:"error",duration:1200}):e.editor==!1&&e.popupTemplate_editor==!1?(e.editor=!0,n.editor="#0079c1",oo({message:"编辑功能已打开",type:"success",duration:1200})):(e.editor=!1,n.editor="black",oo({message:"编辑功能已关闭",type:"success",duration:1200}))}function r(){e.query==!1?(e.query=!0,n.query="#0079c1",oo({message:"空间查询功能已打开",type:"success",duration:1200})):(e.query=!1,n.query="black",oo({message:"空间查询功能已关闭",type:"success",duration:1200}))}const a=new gke({zoom:11,center:[111.99,37.02]}),l=new m3({basemap:"arcgis-topographic"});let c=new Dr({url:"https://services7.arcgis.com/fiKGTLSbzNPulLL9/arcgis/rest/services/jiexiu_states/FeatureServer/0",outFields:["*"],renderer:{type:"simple",symbol:{type:"picture-marker",url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAAB09JREFUeF7tnVnIdlMUx38fcaEMRVFIyYUhigtDlHm+MI9lnkLIlDlDZCZSZjJkzljmsYgQIhkiLshQUqYiouXbr+/1fN/7nLP22fs8ez/nv27em7XWWfu//mfttYfzvPOQDBqBeYMevQaPCDBwEogAIsDAERj48FUBRICBIzDw4asCiAADR2Dgw1cFEAEGjcBuwCNDRmDIFeA64FjgF2A74PUhEmGIBFgZeB5YcyTh5wIXDI0EQyPAgcAdY5L8KrBjqAqD4MKQCGCJNwK0kV2Ax9so1q4zBAJYqbeSb6XfI9YjHOcxqFF32glgTZ4lMlY+CVPCF7EOSrebZgI8DNgyL4UcDtyawlFpPqaRABsCzwHLJAb7PmC/xD4n7m7aCHA6cHFGVH8IU8JbGZ/Rq+tpIcDSgJX8bZzo3Rb0D3XaGdEuddoUqT4NBNgWeAbc19usnFtZN9kXuNeZoReAvYAfnXZFqddOgIuAM52IvhO2fq2cz5blgWeBDZz+dgaedNoUo14rAVYBHgI2ciJ5CXBGg431EFbiPXIlcIrHoBTdGgmwR0i+B8O/wlv/YkujrUI1WLylvqm9H6aETx02E1etjQDXRuzOPQ3Y1u4fTrSXBB4DdnDaHdxw3uB0l1e9FgKsAzwArO2E42TgKqfNqPpJgJV4j9wJGBH+9hhNQrcGAtgSzbsL9y2wE/BuIlDXD43eSg5/34Qp4TWHTe+qJRNgsZB4e5M8cpfj1M/j13TtzT7AaXQqcIXTpjf1UgmwCXA/sKoTCTvuNQLkFCOAEcEjT4Up4XuPUR+6JRLgxIh5+wNgd+CzPkAD1gg7j+s6nvcnsGdoLB1meVVLIsByoeRbIj1iTZ41e5MQaw6tSfTIZcBpHoOcuqUQwJZati27rHOwuxbwRtkS81Fn3G+HKeFDp11y9RIIYJcxz3OOzDZ09ge+c9rlUl8RuAewDSSPHAHc4jFIrTtJAqwG3AzYYY5HzgbsDKBEOQu40BmYnUgeA/zutEuiPikC7B1O32yp11bs8GYfwE7hSpatwwrGDpfaypfAIcDLbQ1S6U2CANa0WafvEesPDgN+8xhNUHep0NDaMbNH7GQz54WWhWLpkwDrATcCG3sQAU4A7AygRjkeuMYZ+BPA0cDXTrso9b4IYM3OTc4IPwYOAt502pWmbncU7ZuE0S+RxsX5a5gSHsw9mNwEWAK4PpRvz1iMLEd5DCrQtep3pDPOqyP2GVyPyEmAzYAbADvJ84gd/tzuMahI1xq9mXuIbcN+I0wJ77U18OjlIoDdjrncEwhgp2Y2VXzktKtNfa2w/N3UGbgtFa2aJpXUBFghBGl73h6p9kqVZ5AjunZC6N3CvjtUA/ukPYmkJIBdjrSSb/f12srPgJV8u983RLEXxaYEu9beVj4PJLCPXzpLKgLYd/XnOKOxq9z2ydVXTrtpU7cXxraDt3cOLMnvGXQlwOrhrfdu557vHOxQ1C2pHrH7jtYbRH+82oUAW4STuNTf4HkAkC78FC69Rm0jdyXAS8pAEQhsGXuOIAIUkb/OQYgAnSGs24EIUHf+OkcvAnSGsG4HIkDd+esc/cQIYEvBUbHPoeZqLsetc7vsDYzza8ujVyIh3hxY1Bhn3OWK2evXxtj7MtCLqV38bCKA93KoxWAJGrccNWDsDYkR8zuOALFvXi4s3GPssgz0PizXoEUAbyZm6YsA48FTBehArlFTVYAFiOTCwp0uVQBVADdpYg1ysV49QGxGIn5arcOj/v38S6uA+QjmwsKdH00BmgLcpIk1yMV6TQGxGdEU0IicloGNELVXUAXQMlBNYOBArpeh/esYNNUEqgl0kybWIBfr1QTGZkRNYCNyagIbIWqvoAqgJlBNoJrAuSuG3YLRhZD5+MRi0b4eaxXQCiv1AK1gaqekHkA9gHoA9QDqAQyBXNWwXS2epaWdQO0EukkTa5CL9doJjM2IdgIbkdMqoBGi9gqqAFoFaBWgVYBWAVoFzMGB2O1PNYHtp+GFNLUM1DKwA318pmoC1QSqCZzWJnCuY9yZH4uY+dv0ZZCvpizQHsoPRIziGXN8/j+MU/UATRsmsYmV3dwIdPnhi/+8igD1UkwEqDd3SSIXAZLAWK8TEaDe3CWJXARIAmO9TkSAenOXJPKqCNB5vZoEskU7SbUSyhFi0/5G7O8f9r4MjP1BxRyg1uIz5yGXCFABC0SACpKUM0QRICe6FfgWASpIUs4QRYCc6FbgWwSoIEk5QxQBcqJbgW8RoIIk5QxRBMiJbgW+RYAKkpQzRBEgJ7oV+J46AlSAeXEh5vpnWL2fBRSH7BQEVNVx8BTgXdwQRIDiUtJvQCJAv3gX9zQRoLiU9BuQCNAv3sU9TQQoLiX9BlQcAfodvp5mCBRzKVTpqBSBkq9EVwppXWGLAHXlK3m0IkBySOtyKALUla/k0YoAySGty6EIUFe+kkcrAiSHtC6HIkBd+UoerQiQHNK6HIoAdeUrebQiQHJI63L4Dwc4DJ9iodP3AAAAAElFTkSuQmCC",width:"15px",height:"15px"}},title:"行政点"}),u=new Dr({url:"https://services7.arcgis.com/fiKGTLSbzNPulLL9/arcgis/rest/services/jiexiu_point/FeatureServer/0",outFields:["*"],renderer:{type:"simple",symbol:{type:"simple-marker",size:6,color:"black",outline:{width:.5,color:"white"}}},title:"其他点"}),d=new Dr({url:"https://services7.arcgis.com/fiKGTLSbzNPulLL9/arcgis/rest/services/jiexiu_road/FeatureServer/0",outFields:["*"],renderer:{type:"simple",symbol:{type:"simple-line"}},title:"公路"}),h=new Dr({url:"https://services7.arcgis.com/fiKGTLSbzNPulLL9/arcgis/rest/services/jiexiu_railways/FeatureServer/0",outFields:["*"],renderer:{type:"simple",symbol:{type:"simple-line",style:"long-dash-dot-dot",width:"2px"}},title:"铁路"}),f=new Dr({url:"https://services7.arcgis.com/fiKGTLSbzNPulLL9/arcgis/rest/services/jiexiu_waterways/FeatureServer/0",outFields:["*"],renderer:{type:"simple",symbol:{type:"simple-line",color:"#00b6ff"}},title:"水路"}),m=new Dr({url:"https://services7.arcgis.com/fiKGTLSbzNPulLL9/arcgis/rest/services/jiexiu_artificial/FeatureServer/0",outFields:["*"],renderer:{type:"simple",symbol:{type:"simple-fill",color:"#708090"}},title:"人工用地"}),g=new Dr({url:"https://services7.arcgis.com/fiKGTLSbzNPulLL9/arcgis/rest/services/jiexiu_natural/FeatureServer/0",outFields:["*"],renderer:{type:"simple",symbol:{type:"simple-fill",color:"green"}},title:"自然用地"}),y=new Dr({url:"https://services7.arcgis.com/fiKGTLSbzNPulLL9/arcgis/rest/services/jiexiu_range/FeatureServer/0",renderer:{type:"simple",symbol:{type:"simple-fill",color:"transparent",outline:{color:"red",width:1}}},title:"区划界限"});ft(()=>{R0.apiKey="AAPK9fadeb203a6d4200b1fe3e6d8ca044caWPf-vFMCLk6mjVT2nRaISumIykxGCy0lxhpXfijjCAHqU31gNAr-h-X-Sh75bhxf",a.container="view",a.map=l;let k=new J8({title:"地物信息",content:[{type:"fields",fieldInfos:[{fieldName:"name",label:"名称"},{fieldName:"type",label:"类型"}]}],actions:[{title:"编辑要素",id:"edit-this",className:"esri-icon-edit"}]});a.popup.dockOptions={buttonEnabled:!1},c.popupTemplate=k,u.popupTemplate=k,d.popupTemplate=k,h.popupTemplate=k,f.popupTemplate=k,m.popupTemplate=k,g.popupTemplate=k,l.addMany([y,g,m,f,h,d,u,c]);const A=new qA({view:a,visibleElements:{snappingControls:!1},container:"popupTemplate_editor",layerInfos:[{formTemplate:{elements:[{type:"field",fieldName:"name",label:"名称"},{type:"field",fieldName:"type",label:"类型"}]}}]});function $(){e.editor==!0?oo({message:"已存在编辑功能",type:"error",duration:1200}):(e.popupTemplate_editor=!0,oo({message:"编辑窗口已打开",type:"sucess",duration:1200}),A.activeWorkFlow||(a.popup.visible=!1,A.startUpdateWorkflowAtFeatureEdit(a.popup.selectedFeature),a.ui.add(A))),ji(()=>A.viewModel.state==="ready",()=>{e.popupTemplate_editor=!1,a.ui.remove(A),setTimeout(()=>{a.popup.visible=!0},3e3)})}a.popup.on("trigger-action",P=>{P.action.id==="edit-this"&&$()});let L;a.popup.watch("visible",P=>{A.viewModel.state==="editing-existing-feature"?a.popup.close():L=a.popup.features});function O(){e.popupTemplate_editor==!1,a.ui.remove(A),L.forEach(P=>{P.popupTemplate=k}),L&&(setTimeout(()=>{a.popup.open({fetchFeatures:!0,shouldFocus:!0,features:L})},3e3),oo({message:"修改成功 信息同步中......",type:"success",duration:3e3})),A.viewModel.cancelWorkflow()}c.on("apply-edits",()=>{O()}),u.on("apply-edits",()=>{O()}),d.on("apply-edits",()=>{O()}),h.on("apply-edits",()=>{O()}),f.on("apply-edits",()=>{O()}),m.on("apply-edits",()=>{O()}),g.on("apply-edits",()=>{O()}),a.ui.components=["attribution"],new Sxe({view:a,container:"basemapGallery"}),new PN({view:a,container:"compass"}),new FN({view:a,container:"zoom"}),new Exe({view:a,container:"home"});const B=new g5({view:a,layerInfos:[{layer:y},{layer:c},{layer:u},{layer:d},{layer:h},{layer:f},{layer:m},{layer:g}],container:document.createElement("div")});B.style={type:"card",layout:"side-by-side"};const V=new WIe({expandIconClass:"esri-icon-right",collapseIconClass:"esri-icon-left",view:a,content:B,container:"legend",expandTooltip:"图例",expanded:!0});a.ui.add(V),new qMe({view:a,container:"scaleBar"}),new S$e({view:a,container:"layerList"}),new qA({view:a,container:"editor",layerInfos:[{formTemplate:{elements:[{type:"field",fieldName:"name",label:"名称"},{type:"field",fieldName:"type",label:"类型"}]}}]})});let _;function C(){n.polygon="#0079c1",n.rectangle="black";const k=new LL({view:a});a.graphics.removeAll(),k.create("polygon").on(["vertex-add","vertex-remove","cursor-update","redo","undo","draw-complete"],$);function $(L){let B={type:"polygon",rings:L.vertices,spatialReference:a.spatialReference};a.graphics.removeAll();let V=new Ls({geometry:B,symbol:{type:"simple-fill",style:"solid",outline:{color:"black",width:1}}});_=V.geometry,a.graphics.add(V)}}function w(){n.rectangle="#0079c1",n.polygon="black";const k=new LL({view:a});a.graphics.removeAll(),k.create("rectangle",{mode:"click"}).on(["vertex-add","cursor-update","draw-complete"],$);function $(L){a.graphics.removeAll();let O=L.vertices;if(O.length<2)return;let V={type:"polygon",rings:[[O[0],[O[1][0],O[0][1]],O[1],[O[0][0],O[1][1]]]],spatialReference:a.spatialReference},P={type:"simple-fill",style:"solid",outline:{color:"black",width:1}},z=new Ls({geometry:V,symbol:P});_=z.geometry,a.graphics.add(z)}}function S(){a.graphics.removeAll(),_="",n.polygon="black",n.rectangle="black"}function E(){a.graphics.removeAll(),n.polygon="black",n.rectangle="black",k(_);async function k($){let L=new kv({returnGeometry:!0,outFields:["name","type"],geometry:$,outSpatialReference:a.SpatialReference,spatialRelationship:"intersects"}),O=await c.queryFeatures(L),B=await u.queryFeatures(L);A(O,B)}function A($,L){let O="";O="查询到"+$.features.length+"个政府点为";let B="";$.features.forEach(z=>{B=B+z.attributes.name}),O=O+B;let V="",P="";V="查询到"+L.features.length+"个普通点为",L.features.forEach(z=>{P=P+z.attributes.name}),V=V+B,p3.success({title:"查询成功",message:O+"         "+V,position:"top-left",offset:74}),_=""}}return(k,A)=>(I(),H(Ye,null,[w2e,G("div",C2e,[G("div",{class:"item",onClick:i},[G("div",null,[G("div",S2e,[(I(),H("svg",E2e,T2e))]),I2e])]),G("div",{class:"item",onClick:s},M2e),G("div",{class:"item",onClick:o},A2e),G("div",{class:"item",onClick:r},O2e)]),ct(G("div",P2e,[G("div",{class:"item",id:"item1",onClick:C},V2e),G("div",{class:"item",id:"item1",onClick:w},D2e),G("div",{class:"item",id:"item1",onClick:S},B2e),G("div",{class:"item",id:"item1",onClick:E},H2e)],512),[[Vt,p(e).query]]),U2e,ct(G("div",W2e,null,512),[[Vt,p(e).basemap]]),G2e,ct(G("div",j2e,null,512),[[Vt,p(e).layer]]),ct(G("div",q2e,null,512),[[Vt,p(e).popupTemplate_editor]]),ct(G("div",K2e,null,512),[[Vt,p(e).editor]])],64))}},Z2e=W5(Y2e,[["__scopeId","data-v-dd93f7dd"]]),X2e={components:{Home:Z2e}};function Q2e(t,e,n,i,s,o){const r=pt("Home");return I(),ce(r)}const J2e=W5(X2e,[["render",Q2e]]),G5=LP(J2e);G5.use(Kwe);G5.mount("#app");export{OSe as $,NPe as A,FPe as B,Hn as C,$Pe as D,P_ as E,OPe as F,_N as G,l4 as H,TTe as I,a4 as J,XVe as K,ZTe as L,DPe as M,M$e as N,ko as O,nt as P,zA as Q,BRe as R,$_ as S,IFe as T,br as U,Wi as V,ou as W,m2e as X,f2e as Y,zPe as Z,Z2 as _,Cp as a,lFe as a$,YT as a0,n2e as a1,Y2 as a2,J$e as a3,ah as a4,s2e as a5,c2e as a6,P0 as a7,g3e as a8,d3e as a9,ESe as aA,VRe as aB,RCe as aC,r3e as aD,H4 as aE,yDe as aF,yRe as aG,eFe as aH,OC as aI,FA as aJ,In as aK,a3e as aL,$De as aM,l3e as aN,c3e as aO,u3e as aP,Mt as aQ,Ti as aR,AC as aS,aRe as aT,vg as aU,C4 as aV,UTe as aW,_r as aX,YTe as aY,zTe as aZ,A5 as a_,m3e as aa,f3e as ab,p2e as ac,STe as ad,mn as ae,p3e as af,h3e as ag,Tb as ah,W_ as ai,IS as aj,TS as ak,Ra as al,d2e as am,K2 as an,JVe as ao,ov as ap,O5 as aq,R5 as ar,V5 as as,F5 as at,ea as au,X$e as av,XA as aw,KA as ax,Zwe as ay,qVe as az,NRe as b,aFe as b0,ST as b1,e4 as c,HSe as d,xN as e,v3e as f,$$e as g,H5 as h,xTe as i,Yi as j,R_ as k,V_ as l,hVe as m,bN as n,b2e as o,WSe as p,Ch as q,E_ as r,JN as s,PPe as t,dr as u,RPe as v,BPe as w,APe as x,LPe as y,VPe as z};
