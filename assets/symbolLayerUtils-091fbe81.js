import{_ as h}from"./preload-helper-41c905a7.js";import{U as d}from"./request-24011425.js";import{a as n}from"./Error-57322e92.js";import{e as b}from"./ItemCache-bf1028d4.js";import{r as a,f as w}from"./typedArrayUtil-d9bc5fbd.js";import{F as v,a as z}from"./aaBoundingBox-4a83dbbc.js";import{t as _,c as g}from"./symbolLayerUtils3D-c8c40895.js";import"./string-480f3e3f.js";import"./promiseUtils-32d9c228.js";import"./MemCache-1d2f56ee.js";import"./cast-a534ae90.js";import"./ensureType-25b8cc06.js";import"./nextTick-3ee5a785.js";import"./Extent-a1a1de42.js";import"./aaBoundingRect-b340cf8c.js";import"./mathUtils-57aba1ea.js";import"./vec3-1863987c.js";import"./vec3f64-6cd30318.js";import"./common-c186b691.js";import"./vec4-46a9b36d.js";let s=c();function c(){return new b(50)}function M(){s=c()}function N(r,e){if(r.type==="icon")return p(r,e);if(r.type==="object")return f(r,e);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function Q(r,e){if(r.type==="icon")return j(r,e);if(r.type==="object")return B(r,e);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function p(r,e){var t,i;if((t=r.resource)!=null&&t.href)return L(r.resource.href).then(o=>[o.width,o.height]);if((i=r.resource)!=null&&i.primitive)return a(e)?[e,e]:[256,256];throw new n("symbol3d:invalid-symbol-layer","symbol layers of type Icon must have either an href or a primitive resource")}function j(r,e){return p(r,e).then(t=>{if(r.size==null)return t;const i=t[0]/t[1];return i>1?[r.size,r.size/i]:[r.size*i,r.size]})}function L(r){return d(r,{responseType:"image"}).then(e=>e.data)}function f(r,e){return S(r,e).then(t=>v(t))}async function B(r,e){const t=await f(r,e);return _(t,r)}async function S(r,e){var i;if(!r.isPrimitive){const o=w((i=r.resource)==null?void 0:i.href),u=s.get(o);if(u!==void 0)return u;const y=await h(()=>import("./objectResourceUtils-02c07fd0.js").then(l=>l.o),["./objectResourceUtils-02c07fd0.js","./devEnvironmentUtils-5002a058.js","./typedArrayUtil-d9bc5fbd.js","./mat3-9a8d9db7.js","./common-c186b691.js","./quatf64-c94bd656.js","./mat4-7dde83b1.js","./vec3f64-6cd30318.js","./mat4f64-fbeb2cd1.js","./vec3-1863987c.js","./aaBoundingBox-4a83dbbc.js","./Extent-a1a1de42.js","./cast-a534ae90.js","./string-480f3e3f.js","./Error-57322e92.js","./ensureType-25b8cc06.js","./nextTick-3ee5a785.js","./promiseUtils-32d9c228.js","./aaBoundingRect-b340cf8c.js","./mathUtils-57aba1ea.js","./vec4-46a9b36d.js","./BufferView-478024d2.js","./vec2-ab9f47bf.js","./vec33-ec7b196f.js","./DefaultMaterial_COLOR_GAMMA-ccf18a3a.js","./types-e1c0a5bf.js","./request-24011425.js","./preload-helper-41c905a7.js","./asyncUtils-087555fc.js","./enums-64ab819c.js","./Version-b16872d5.js","./quat-ec16a584.js","./compilerUtils-fefa73ae.js","./Indices-d9b791ce.js","./mat3f32-d3d088e8.js","./vec2f32-461e65a9.js","./byteSizeEstimations-90c5a50d.js","./requestImageUtils-d2d7b1fb.js","./OrderIndependentTransparency-68bd812c.js","./SSAOHelper-dbb21920.js","./Util-289ce3b5.js","./vec2f64-30dc1443.js","./vec4f64-939de194.js","./triangle-8cd02c5d.js","./sphere-622880b9.js","./lineSegment-c6f0b9d1.js","./VertexAttribute-9c5c630d.js","./ScreenSpacePass-6db805f2.js","./Evented-cbf5f368.js","./SSAO.glsl-3068f7bf.js","./assets-cd44347b.js","./Texture-411ca148.js","./context-util-d4c193b5.js","./VertexArrayObject-3630ef4f.js","./mat4f32-77b3d8ac.js","./ViewingMode-915d19cb.js","./vec3f32-4322908d.js","./SSAOBlur.glsl-ea338452.js","./VertexElementDescriptor-2925c6af.js","./InterleavedLayout-b5930508.js","./symbolColorUtils-dd198128.js"],import.meta.url),m=await y.fetch(o,{disableTextures:!0});return s.put(o,m.referenceBoundingBox),m.referenceBoundingBox}let t=null;if(r.resource&&r.resource.primitive&&(t=z(g(r.resource.primitive)),a(e)))for(let o=0;o<t.length;o++)t[o]*=e;return t?Promise.resolve(t):Promise.reject(new n("symbol:invalid-resource","The symbol does not have a valid resource"))}export{M as clearBoundingBoxCache,p as computeIconLayerResourceSize,N as computeLayerResourceSize,Q as computeLayerSize,f as computeObjectLayerResourceSize};
