import{c as Se,t as nt,I as ot,J as st,e as b,y as w,s as at,n as lt}from"./cast-a534ae90.js";import"./intl-7d39a8c0.js";import{n as ft}from"./Evented-cbf5f368.js";import{x as ct,b as ue,e as dt,r as ut,E as pt}from"./promiseUtils-32d9c228.js";import{y as gt}from"./string-480f3e3f.js";import{s as _e}from"./Error-57322e92.js";import{s as pe}from"./typedArrayUtil-d9bc5fbd.js";import{m as ht}from"./Promise-368b703a.js";import{l as ge,f as mt,h as vt}from"./reactiveUtils-5869e41a.js";import{n as yt}from"./uuid-73213768.js";import{d as bt,a as wt,s as At}from"./dom-5b7af1bf.js";import{a as xt}from"./assets-cd44347b.js";import{Q as $t}from"./request-24011425.js";import{s as kt}from"./locale-30120714.js";import{u as Tt}from"./messages-28bf3b89.js";import{t as he}from"./ensureType-25b8cc06.js";function Et(e){return typeof e=="string"?document.getElementById(e):e??null}function Ai(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function xi(e,r){const t=r.parentNode;t&&t.insertBefore(e,r)}function $i(e,r){for(;;){const t=e.firstChild;if(!t)break;r.appendChild(t)}}/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var St=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var r=Object.getPrototypeOf(e);if(r===null)return!0;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r},L={exports:{}},m={},B={exports:{}},N={};function Le(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function _t(e,r,t){}function Lt(e,r,t){}var Ct=/javascript\s*\:/img;function Nt(e,r){return Ct.test(r)?"":r}N.whiteList=Le();N.getDefaultWhiteList=Le;N.onAttr=_t;N.onIgnoreAttr=Lt;N.safeAttrValue=Nt;var It={indexOf:function(e,r){var t,i;if(Array.prototype.indexOf)return e.indexOf(r);for(t=0,i=e.length;t<i;t++)if(e[t]===r)return t;return-1},forEach:function(e,r,t){var i,n;if(Array.prototype.forEach)return e.forEach(r,t);for(i=0,n=e.length;i<n;i++)r.call(t,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},z=It;function Ot(e,r){e=z.trimRight(e),e[e.length-1]!==";"&&(e+=";");var t=e.length,i=!1,n=0,o=0,a="";function l(){if(!i){var u=z.trim(e.slice(n,o)),f=u.indexOf(":");if(f!==-1){var d=z.trim(u.slice(0,f)),p=z.trim(u.slice(f+1));if(d){var h=r(n,a.length,d,p,u);h&&(a+=h+"; ")}}}n=o+1}for(;o<t;o++){var s=e[o];if(s==="/"&&e[o+1]==="*"){var c=e.indexOf("*/",o+2);if(c===-1)break;o=c+1,n=o+1,i=!1}else s==="("?i=!0:s===")"?i=!1:s===";"?i||l():s===`
`&&l()}return z.trim(a)}var Pt=Ot,U=N,Rt=Pt;function me(e){return e==null}function Ft(e){var r={};for(var t in e)r[t]=e[t];return r}function Ce(e){e=Ft(e||{}),e.whiteList=e.whiteList||U.whiteList,e.onAttr=e.onAttr||U.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||U.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||U.safeAttrValue,this.options=e}Ce.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var r=this,t=r.options,i=t.whiteList,n=t.onAttr,o=t.onIgnoreAttr,a=t.safeAttrValue,l=Rt(e,function(s,c,u,f,d){var p=i[u],h=!1;if(p===!0?h=p:typeof p=="function"?h=p(f):p instanceof RegExp&&(h=p.test(f)),h!==!0&&(h=!1),f=a(u,f),!!f){var g={position:c,sourcePosition:s,source:d,isWhite:h};if(h){var v=n(u,f,g);return me(v)?u+":"+f:v}else{var v=o(u,f,g);if(!me(v))return v}}});return l};var Vt=Ce;(function(e,r){var t=N,i=Vt;function n(a,l){var s=new i(l);return s.process(a)}r=e.exports=n,r.FilterCSS=i;for(var o in t)r[o]=t[o]})(B,B.exports);var se={indexOf:function(e,r){var t,i;if(Array.prototype.indexOf)return e.indexOf(r);for(t=0,i=e.length;t<i;t++)if(e[t]===r)return t;return-1},forEach:function(e,r,t){var i,n;if(Array.prototype.forEach)return e.forEach(r,t);for(i=0,n=e.length;i<n;i++)r.call(t,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var r=/\s|\n|\t/,t=r.exec(e);return t?t.index:-1}},zt=B.exports.FilterCSS,Ht=B.exports.getDefaultWhiteList,X=se;function Ne(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Ie=new zt;function Bt(e,r,t){}function jt(e,r,t){}function Dt(e,r,t){}function Ut(e,r,t){}function Oe(e){return e.replace(Mt,"&lt;").replace(Gt,"&gt;")}function Wt(e,r,t,i){if(t=He(t),r==="href"||r==="src"){if(t=X.trim(t),t==="#")return"#";if(!(t.substr(0,7)==="http://"||t.substr(0,8)==="https://"||t.substr(0,7)==="mailto:"||t.substr(0,4)==="tel:"||t.substr(0,11)==="data:image/"||t.substr(0,6)==="ftp://"||t.substr(0,2)==="./"||t.substr(0,3)==="../"||t[0]==="#"||t[0]==="/"))return""}else if(r==="background"){if(W.lastIndex=0,W.test(t))return""}else if(r==="style"){if(ve.lastIndex=0,ve.test(t)||(ye.lastIndex=0,ye.test(t)&&(W.lastIndex=0,W.test(t))))return"";i!==!1&&(i=i||Ie,t=i.process(t))}return t=Be(t),t}var Mt=/</g,Gt=/>/g,Xt=/"/g,qt=/&quot;/g,Qt=/&#([a-zA-Z0-9]*);?/gim,Zt=/&colon;?/gim,Jt=/&newline;?/gim,W=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,ve=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,ye=/u\s*r\s*l\s*\(.*/gi;function Pe(e){return e.replace(Xt,"&quot;")}function Re(e){return e.replace(qt,'"')}function Fe(e){return e.replace(Qt,function(t,i){return i[0]==="x"||i[0]==="X"?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))})}function Ve(e){return e.replace(Zt,":").replace(Jt," ")}function ze(e){for(var r="",t=0,i=e.length;t<i;t++)r+=e.charCodeAt(t)<32?" ":e.charAt(t);return X.trim(r)}function He(e){return e=Re(e),e=Fe(e),e=Ve(e),e=ze(e),e}function Be(e){return e=Pe(e),e=Oe(e),e}function Yt(){return""}function Kt(e,r){typeof r!="function"&&(r=function(){});var t=!Array.isArray(e);function i(a){return t?!0:X.indexOf(e,a)!==-1}var n=[],o=!1;return{onIgnoreTag:function(a,l,s){if(i(a))if(s.isClosing){var c="[/removed]",u=s.position+c.length;return n.push([o!==!1?o:s.position,u]),o=!1,c}else return o||(o=s.position),"[removed]";else return r(a,l,s)},remove:function(a){var l="",s=0;return X.forEach(n,function(c){l+=a.slice(s,c[0]),s=c[1]}),l+=a.slice(s),l}}}function er(e){for(var r="",t=0;t<e.length;){var i=e.indexOf("<!--",t);if(i===-1){r+=e.slice(t);break}r+=e.slice(t,i);var n=e.indexOf("-->",i);if(n===-1)break;t=n+3}return r}function tr(e){var r=e.split("");return r=r.filter(function(t){var i=t.charCodeAt(0);return i===127?!1:i<=31?i===10||i===13:!0}),r.join("")}m.whiteList=Ne();m.getDefaultWhiteList=Ne;m.onTag=Bt;m.onIgnoreTag=jt;m.onTagAttr=Dt;m.onIgnoreTagAttr=Ut;m.safeAttrValue=Wt;m.escapeHtml=Oe;m.escapeQuote=Pe;m.unescapeQuote=Re;m.escapeHtmlEntities=Fe;m.escapeDangerHtml5Entities=Ve;m.clearNonPrintableCharacter=ze;m.friendlyAttrValue=He;m.escapeAttrValue=Be;m.onIgnoreTagStripAll=Yt;m.StripTagBody=Kt;m.stripCommentTag=er;m.stripBlankChar=tr;m.cssFilter=Ie;m.getDefaultCSSWhiteList=Ht;var Z={},E=se;function rr(e){var r=E.spaceIndex(e),t;return r===-1?t=e.slice(1,-1):t=e.slice(1,r+1),t=E.trim(t).toLowerCase(),t.slice(0,1)==="/"&&(t=t.slice(1)),t.slice(-1)==="/"&&(t=t.slice(0,-1)),t}function ir(e){return e.slice(0,2)==="</"}function nr(e,r,t){var i="",n=0,o=!1,a=!1,l=0,s=e.length,c="",u="";e:for(l=0;l<s;l++){var f=e.charAt(l);if(o===!1){if(f==="<"){o=l;continue}}else if(a===!1){if(f==="<"){i+=t(e.slice(n,l)),o=l,n=l;continue}if(f===">"){i+=t(e.slice(n,o)),u=e.slice(o,l+1),c=rr(u),i+=r(o,i.length,c,u,ir(u)),n=l+1,o=!1;continue}if(f==='"'||f==="'")for(var d=1,p=e.charAt(l-d);p.trim()===""||p==="=";){if(p==="="){a=f;continue e}p=e.charAt(l-++d)}}else if(f===a){a=!1;continue}}return n<e.length&&(i+=t(e.substr(n))),i}var or=/[^a-zA-Z0-9\\_:.-]/gim;function sr(e,r){var t=0,i=0,n=[],o=!1,a=e.length;function l(d,p){if(d=E.trim(d),d=d.replace(or,"").toLowerCase(),!(d.length<1)){var h=r(d,p||"");h&&n.push(h)}}for(var s=0;s<a;s++){var c=e.charAt(s),u,f;if(o===!1&&c==="="){o=e.slice(t,s),t=s+1,i=e.charAt(t)==='"'||e.charAt(t)==="'"?t:lr(e,s+1);continue}if(o!==!1&&s===i){if(f=e.indexOf(c,s+1),f===-1)break;u=E.trim(e.slice(i+1,f)),l(o,u),o=!1,s=f,t=s+1;continue}if(/\s|\n|\t/.test(c))if(e=e.replace(/\s|\n|\t/g," "),o===!1)if(f=ar(e,s),f===-1){u=E.trim(e.slice(t,s)),l(u),o=!1,t=s+1;continue}else{s=f-1;continue}else if(f=fr(e,s-1),f===-1){u=E.trim(e.slice(t,s)),u=be(u),l(o,u),o=!1,t=s+1;continue}else continue}return t<e.length&&(o===!1?l(e.slice(t)):l(o,be(E.trim(e.slice(t))))),E.trim(n.join(" "))}function ar(e,r){for(;r<e.length;r++){var t=e[r];if(t!==" ")return t==="="?r:-1}}function lr(e,r){for(;r<e.length;r++){var t=e[r];if(t!==" ")return t==="'"||t==='"'?r:-1}}function fr(e,r){for(;r>0;r--){var t=e[r];if(t!==" ")return t==="="?r:-1}}function cr(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function be(e){return cr(e)?e.substr(1,e.length-2):e}Z.parseTag=nr;Z.parseAttr=sr;var dr=B.exports.FilterCSS,x=m,je=Z,ur=je.parseTag,pr=je.parseAttr,G=se;function M(e){return e==null}function gr(e){var r=G.spaceIndex(e);if(r===-1)return{html:"",closing:e[e.length-2]==="/"};e=G.trim(e.slice(r+1,-1));var t=e[e.length-1]==="/";return t&&(e=G.trim(e.slice(0,-1))),{html:e,closing:t}}function hr(e){var r={};for(var t in e)r[t]=e[t];return r}function mr(e){var r={};for(var t in e)Array.isArray(e[t])?r[t.toLowerCase()]=e[t].map(function(i){return i.toLowerCase()}):r[t.toLowerCase()]=e[t];return r}function De(e){e=hr(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=x.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=mr(e.whiteList||e.allowList):e.whiteList=x.whiteList,e.onTag=e.onTag||x.onTag,e.onTagAttr=e.onTagAttr||x.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||x.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||x.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||x.safeAttrValue,e.escapeHtml=e.escapeHtml||x.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new dr(e.css))}De.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var r=this,t=r.options,i=t.whiteList,n=t.onTag,o=t.onIgnoreTag,a=t.onTagAttr,l=t.onIgnoreTagAttr,s=t.safeAttrValue,c=t.escapeHtml,u=r.cssFilter;t.stripBlankChar&&(e=x.stripBlankChar(e)),t.allowCommentTag||(e=x.stripCommentTag(e));var f=!1;t.stripIgnoreTagBody&&(f=x.StripTagBody(t.stripIgnoreTagBody,o),o=f.onIgnoreTag);var d=ur(e,function(p,h,g,v,j){var F={sourcePosition:p,position:h,isClosing:j,isWhite:Object.prototype.hasOwnProperty.call(i,g)},I=n(g,v,F);if(!M(I))return I;if(F.isWhite){if(F.isClosing)return"</"+g+">";var K=gr(v),ce=i[g],$=pr(K.html,function(A,k){var V=G.indexOf(ce,A)!==-1,T=a(g,A,k,V);return M(T)?V?(k=s(g,A,k,u),k?A+'="'+k+'"':A):(T=l(g,A,k,V),M(T)?void 0:T):T});return v="<"+g,$&&(v+=" "+$),K.closing&&(v+=" /"),v+=">",v}else return I=o(g,v,F),M(I)?c(v):I},c);return f&&(d=f.remove(d)),d};var vr=De;(function(e,r){var t=m,i=Z,n=vr;function o(l,s){var c=new n(s);return c.process(l)}r=e.exports=o,r.filterXSS=o,r.FilterXSS=n,function(){for(var l in t)r[l]=t[l];for(var s in i)r[s]=i[s]}();function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=e.exports)})(L,L.exports);var yr=function(){function e(r,t){var i=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(o,a,l,s){return o==="a"&&a==="href"||(o==="img"||o==="source")&&a==="src"?i.sanitizeUrl(l):L.exports.safeAttrValue(o,a,l,s)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;r&&!t?n=r:r&&t?(n=Object.create(this.arcgisFilterOptions),Object.keys(r).forEach(function(o){o==="whiteList"?n.whiteList=i._extendObjectOfArrays([i.arcgisWhiteList,r.whiteList||{}]):n[o]=r[o]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList),this.xssFilterOptions=n,this._xssFilter=new L.exports.FilterXSS(n)}return e.prototype.sanitize=function(r,t){switch(t===void 0&&(t={}),typeof r){case"number":return isNaN(r)||!isFinite(r)?null:r;case"boolean":return r;case"string":return this._xssFilter.process(r);case"object":return this._iterateOverObject(r,t);default:return t.allowUndefined&&typeof r>"u"?void 0:null}},e.prototype.sanitizeUrl=function(r,t){var i=(t??{}).isProtocolRequired,n=i===void 0?!0:i,o=this._trim(r.substring(0,r.indexOf(":"))),a=r==="/",l=/^#/.test(r),s=o&&this.allowedProtocols.indexOf(o.toLowerCase())>-1;return a||l||s?L.exports.escapeAttrValue(r):!o&&!n?L.exports.escapeAttrValue("https://".concat(r)):""},e.prototype.sanitizeHTMLAttribute=function(r,t,i,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(r,t,i,n):L.exports.safeAttrValue(r,t,i,n)},e.prototype.validate=function(r,t){t===void 0&&(t={});var i=this.sanitize(r,t);return{isValid:r===i,sanitized:i}},e.prototype.encodeHTML=function(r){var t=this;return String(r).replace(/[&<>"'\/]/g,function(i){return t._entityMap[i]})},e.prototype.encodeAttrValue=function(r){var t=/^[a-zA-Z0-9]$/;return String(r).replace(/[\x00-\xFF]/g,function(i,n){return t.test(i)?i:"&#x".concat(Number(r.charCodeAt(n)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(r){var t={};return r.forEach(function(i){Object.keys(i).forEach(function(n){Array.isArray(i[n])&&Array.isArray(t[n])?t[n]=t[n].concat(i[n]):t[n]=i[n]})}),t},e.prototype._iterateOverObject=function(r,t){var i=this;t===void 0&&(t={});try{var n=!1,o=void 0;if(Array.isArray(r))o=r.reduce(function(l,s){var c=i.validate(s,t);return c.isValid?l.concat([s]):(n=!0,l.concat([c.sanitized]))},[]);else if(St(r)){var a=Object.keys(r);o=a.reduce(function(l,s){var c=r[s],u=i.validate(c,t);return u.isValid?l[s]=c:(n=!0,l[s]=u.sanitized),l},{})}else return t.allowUndefined&&typeof r>"u"?void 0:null;return n?o:r}catch{return null}},e.prototype._trim=function(r){return String.prototype.trim?r.trim():r.replace(/(^\s*)|(\s*$)/g,"")},e}();const J=new Map;function Ue(){J.clear()}function br(e){return J.get(e)}function wr(e,r){J.set(e,r)}function ee(e){J.delete(e)}var C,R,Ar=function(e){if("WebkitTransition"in e.style)C="webkitTransitionEnd",R="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");C="transitionend",R="animationend"}},We=function(e){C||Ar(e)},xr=function(e,r){return r===void 0&&(r=e+"-active"),function(t){We(t);var i=!1,n=function(o){i||(i=!0,t.removeEventListener(C,n),t.removeEventListener(R,n),t.classList.remove(e),t.classList.remove(r))};t.classList.add(e),t.addEventListener(C,n),t.addEventListener(R,n),requestAnimationFrame(function(){t.classList.add(r)})}},$r=function(e,r){return r===void 0&&(r=e+"-active"),function(t,i){We(t);var n=!1,o=function(a){n||(n=!0,t.removeEventListener(C,o),t.removeEventListener(R,o),i())};t.classList.add(e),t.addEventListener(C,o),t.addEventListener(R,o),requestAnimationFrame(function(){t.classList.add(r)})}};const kr=_e.getLogger("esri.widgets.support.widgetUtils");function Tr(e){const r=he.acquire();for(let i=0;i<arguments.length;i++){const n=arguments[i],o=typeof n;if(o==="string")r.push(n);else if(Array.isArray(n))r.push.apply(r,n);else if(o==="object")for(const a in n)n[a]&&r.push(a)}const t=r.join(" ");return he.release(r),t}(()=>{const e=new Map,r=new ResizeObserver(t=>{var i;Ue();for(const n of t)(i=e.get(n.target))==null||i(n)});return(t,i,n)=>(e.has(t)&&kr.error("Already observing element",t),e.set(t,i),r.observe(t,n),Se(()=>{r.unobserve(t),e.delete(t)}))})();function ki(e){const r=e==null?void 0:e.closest("[dir]");return r!==null&&r instanceof HTMLElement&&r.dir==="rtl"||document.dir==="rtl"}function Ti(e){const r="data-node-ref";this[e.getAttribute(r)]=null}function Ei(e){const r="data-node-ref";this[e.getAttribute(r)]=e}function Si(e,r){return(e==="enter"?xr:$r)(r)}const Er=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],Sr=Er.reduce((e,r)=>(e[r]=[],e),{}),_r=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],Me=new yr({whiteList:Sr,onTagAttr:(e,r,t)=>{const i=`${r}="${t}"`;if(_r.includes(r))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function _i(e){return e==="Enter"||e===" "}const Ge="http://www.w3.org/",Y=`${Ge}2000/svg`,Xe=`${Ge}1999/xlink`;let q,we=[],ae=(e,r)=>{let t={};return Object.keys(e).forEach(i=>{t[i]=e[i]}),r&&Object.keys(r).forEach(i=>{t[i]=r[i]}),t},le=(e,r)=>e.vnodeSelector===r.vnodeSelector&&(e.properties&&r.properties?e.properties.key===r.properties.key&&e.properties.bind===r.properties.bind:!e.properties&&!r.properties),qe=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},Lr=(e,r,t)=>{if(r.vnodeSelector!==""){for(let i=t;i<e.length;i++)if(le(e[i],r))return i}return-1},te=(e,r,t,i)=>{let n=e[r];if(n.vnodeSelector==="")return;let o=n.properties;if(!(o&&(o.key===void 0?o.bind:o.key))){for(let a=0;a<e.length;a++)if(a!==r){let l=e[a];if(le(l,n))throw new Error(`${t.vnodeSelector} had a ${n.vnodeSelector} child ${i==="added"?i:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},Cr=e=>{if(e.properties){let r=e.properties.enterAnimation;r&&r(e.domNode,e.properties)}},ie=[],ne=!1,Qe=e=>{(e.children||[]).forEach(Qe),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},Ae=()=>{ne=!1,ie.forEach(Qe),ie.length=0},xe=e=>{ie.push(e),ne||(ne=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(Ae,{timeout:16}):setTimeout(Ae,16))},$e=e=>{let r=e.domNode;if(e.properties){let t=e.properties.exitAnimation;if(t)return r.style.pointerEvents="none",void t(r,()=>{r.parentNode&&(r.parentNode.removeChild(r),xe(e))},e.properties)}r.parentNode&&(r.parentNode.removeChild(r),xe(e))},Nr=(e,r,t)=>{if(!r)return;let i=t.eventHandlerInterceptor,n=Object.keys(r),o=n.length;for(let a=0;a<o;a++){let l=n[a],s=r[l];if(l==="className")throw new Error('Property "className" is not supported, use "class".');if(l==="class")oe(e,s,!0);else if(l==="classes"){let c=Object.keys(s),u=c.length;for(let f=0;f<u;f++){let d=c[f];s[d]&&e.classList.add(d)}}else if(l==="styles"){let c=Object.keys(s),u=c.length;for(let f=0;f<u;f++){let d=c[f],p=s[d];p&&(qe(p),t.styleApplyer(e,d,p))}}else if(l!=="key"&&s!=null){let c=typeof s;c==="function"?(l.lastIndexOf("on",0)===0&&(i&&(s=i(l,s,e,r)),l==="oninput"&&function(){let u=s;s=function(f){u.apply(this,[f]),f.target["oninput-value"]=f.target.value}}()),e[l]=s):t.namespace===Y?l==="href"?e.setAttributeNS(Xe,l,s):e.setAttribute(l,s):c==="string"&&l!=="value"?l==="innerHTML"?e[l]=Me.sanitize(s):e.setAttribute(l,s):e[l]=s}}},Ir=(e,r,t)=>{if(r)for(let i of r)P(i,e,void 0,t)},Ze=(e,r,t)=>{Ir(e,r.children,t),r.text&&(e.textContent=r.text),Nr(e,r.properties,t),r.properties&&r.properties.afterCreate&&r.properties.afterCreate.apply(r.properties.bind||r.properties,[e,t,r.vnodeSelector,r.properties,r.children])},P=(e,r,t,i)=>{let n,o=0,a=e.vnodeSelector,l=r.ownerDocument;if(a==="")n=e.domNode=l.createTextNode(e.text),t!==void 0?r.insertBefore(n,t):r.appendChild(n);else{for(let s=0;s<=a.length;++s){let c=a.charAt(s);if(s===a.length||c==="."||c==="#"){let u=a.charAt(o-1),f=a.slice(o,s);u==="."?n.classList.add(f):u==="#"?n.id=f:(f==="svg"&&(i=ae(i,{namespace:Y})),i.namespace!==void 0?n=e.domNode=l.createElementNS(i.namespace,f):(n=e.domNode=e.domNode||l.createElement(f),f==="input"&&e.properties&&e.properties.type!==void 0&&n.setAttribute("type",e.properties.type)),t!==void 0?r.insertBefore(n,t):n.parentNode!==r&&r.appendChild(n)),o=s+1}}Ze(n,e,i)}},oe=(e,r,t)=>{r&&r.split(" ").forEach(i=>{i&&e.classList.toggle(i,t)})},Or=(e,r,t,i)=>{if(!t)return;let n=!1,o=Object.keys(t),a=o.length;for(let l=0;l<a;l++){let s=o[l],c=t[s],u=r[s];if(s==="class")u!==c&&(oe(e,u,!1),oe(e,c,!0));else if(s==="classes"){let f=e.classList,d=Object.keys(c),p=d.length;for(let h=0;h<p;h++){let g=d[h],v=!!c[g];v!==!!u[g]&&(n=!0,v?f.add(g):f.remove(g))}}else if(s==="styles"){let f=Object.keys(c),d=f.length;for(let p=0;p<d;p++){let h=f[p],g=c[h];g!==u[h]&&(n=!0,g?(qe(g),i.styleApplyer(e,h,g)):i.styleApplyer(e,h,""))}}else if(c||typeof u!="string"||(c=""),s==="value"){let f=e[s];f!==c&&(e["oninput-value"]?f===e["oninput-value"]:c!==u)&&(e[s]=c,e["oninput-value"]=void 0),c!==u&&(n=!0)}else if(c!==u){let f=typeof c;f==="function"&&i.eventHandlerInterceptor||(i.namespace===Y?s==="href"?e.setAttributeNS(Xe,s,c):e.setAttribute(s,c):f==="string"?s==="innerHTML"?e[s]=Me.sanitize(c):s==="role"&&c===""?e.removeAttribute(s):e.setAttribute(s,c):e[s]!==c&&(e[s]=c),n=!0)}}return n},Pr=(e,r,t,i,n)=>{if(t===i)return!1;i=i||we;let o,a=(t=t||we).length,l=i.length,s=0,c=0,u=!1;for(;c<l;){let f=s<a?t[s]:void 0,d=i[c];if(f!==void 0&&le(f,d))u=q(f,d,n)||u,s++;else{let p=Lr(t,d,s+1);if(p>=0){for(o=s;o<p;o++)$e(t[o]),te(t,o,e,"removed");u=q(t[p],d,n)||u,s=p+1}else P(d,r,s<a?t[s].domNode:void 0,n),Cr(d),te(i,c,e,"added")}c++}if(a>s)for(o=s;o<a;o++)$e(t[o]),te(t,o,e,"removed");return u};q=(e,r,t)=>{let i=e.domNode,n=!1;if(e===r)return!1;let o=!1;if(r.vnodeSelector===""){if(r.text!==e.text){let a=i.ownerDocument.createTextNode(r.text);return i.parentNode.replaceChild(a,i),r.domNode=a,n=!0,n}r.domNode=i}else r.vnodeSelector.lastIndexOf("svg",0)===0&&(t=ae(t,{namespace:Y})),e.text!==r.text&&(o=!0,r.text===void 0?i.removeChild(i.firstChild):i.textContent=r.text),r.domNode=i,o=Pr(r,i,e.children,r.children,t)||o,o=Or(i,e.properties,r.properties,t)||o,r.properties&&r.properties.afterUpdate&&r.properties.afterUpdate.apply(r.properties.bind||r.properties,[i,t,r.vnodeSelector,r.properties,r.children]);return o&&r.properties&&r.properties.updateAnimation&&r.properties.updateAnimation(i,r.properties,e.properties),n};let H=(e,r)=>({getLastRender:()=>e,update:t=>{if(e.vnodeSelector!==t.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let i=e;e=t,q(i,t,r)},domNode:e.domNode});const Rr={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,r,t)=>{r.charAt(0)==="-"?e.style.setProperty(r,t):e.style[r]=t}};let O=e=>ae(Rr,e),S={create:(e,r)=>(r=O(r),P(e,document.createElement("div"),void 0,r),H(e,r)),append:(e,r,t)=>(t=O(t),P(r,e,void 0,t),H(r,t)),insertBefore:(e,r,t)=>(t=O(t),P(r,e.parentNode,e,t),H(r,t)),merge:(e,r,t)=>(t=O(t),r.domNode=e,Ze(e,r,t),H(r,t)),replace:(e,r,t)=>(t=O(t),P(r,e.parentNode,e,t),e.parentNode.removeChild(e),H(r,t))},Je,Fr=(e,r)=>{let t=[];for(;e&&e!==r;)t.push(e),e=e.parentNode;return t};Je=Array.prototype.find?(e,r)=>e.find(r):(e,r)=>e.filter(r)[0];let Vr=(e,r)=>{let t=e;return r.forEach(i=>{t=t&&t.children?Je(t.children,n=>n.domNode===i):void 0}),t},zr=(e,r,t)=>{let i=function(n){t("domEvent",n);let o=r(),a=Fr(n.currentTarget,o.domNode);a.reverse();let l,s=Vr(o.getLastRender(),a);return e.scheduleRender(),s&&(l=s.properties[`on${n.type}`].apply(s.properties.bind||this,arguments)),t("domEventProcessed",n),l};return(n,o,a,l)=>i},Li=e=>{let r,t,i=O(e),n=i.performanceLogger,o=!0,a=!1,l=[],s=[],c=(f,d,p)=>{let h,g=()=>h;i.eventHandlerInterceptor=zr(r,g,n),h=f(d,p(),i),l.push(h),s.push(p)},u=()=>{if(t=void 0,o){o=!1,n("renderStart",void 0);for(let f=0;f<l.length;f++){let d=s[f]();n("rendered",void 0),l[f].update(d),n("patched",void 0)}n("renderDone",void 0),o=!0}};return r={renderNow:u,scheduleRender:()=>{t||a||(t=requestAnimationFrame(u))},stop:()=>{t&&(cancelAnimationFrame(t),t=void 0),a=!0},resume:()=>{a=!1,o=!0,r.scheduleRender()},append:(f,d)=>{c(S.append,f,d)},insertBefore:(f,d)=>{c(S.insertBefore,f,d)},merge:(f,d)=>{c(S.merge,f,d)},replace:(f,d)=>{c(S.replace,f,d)},detach:f=>{for(let d=0;d<s.length;d++)if(s[d]===f)return s.splice(d,1),l.splice(d,1)[0];throw new Error("renderFunction was not found")}},r};const Hr={handleInterceptedEvent:(e,r,t,i)=>(e.scheduleRender(),r.properties[`on${i.type}`].apply(r.properties.bind||t,[i]))},Br={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,r,t)=>{e.style[r]=t}},jr=e=>({...Br,...e}),Dr=(e,r)=>{const t=[];for(;e&&e!==r;)t.push(e),e=e.parentNode;return t},Ur=(e,r)=>e.find(r),ke=(e,r,t=!1)=>{let i=e;return r.forEach((n,o)=>{const a=i!=null&&i.children?Ur(i.children,l=>l.domNode===n):void 0;t&&!a&&o!==r.length-1||(i=a)}),i},Wr=e=>{let r;const t={...Hr,...e},i=jr(t),n=i.performanceLogger;let o,a=!0,l=!1;const s=[],c=[],u=(d,p,h)=>{var j;let g;i.eventHandlerInterceptor=(F,I,K,ce)=>function($){let A;n("domEvent",$);const k=Dr($.currentTarget,g.domNode),V=k.some(_=>{var D;return customElements.get((D=_==null?void 0:_.tagName)==null?void 0:D.toLowerCase())});if($.eventPhase===Event.CAPTURING_PHASE||!V)k.reverse(),A=ke(g.getLastRender(),k);else{const _=$.composedPath(),D=_.slice(_.indexOf($.currentTarget),_.indexOf(g.domNode)).filter(de=>de.getRootNode()===de.ownerDocument).reverse();A=ke(g.getLastRender(),D,!0)}let T;return A&&(T=t.handleInterceptedEvent(r,A,this,$)),n("domEventProcessed",$),T},(j=t.postProcessProjectionOptions)==null||j.call(t,i);const v=h();g=d(p,v,i),s.push(g),c.push(h),t.afterFirstVNodeRendered&&t.afterFirstVNodeRendered(g,v)};let f=()=>{if(o=void 0,a){a=!1,n("renderStart",void 0);for(let d=0;d<s.length;d++){const p=c[d]();n("rendered",void 0),s[d].update(p),n("patched",void 0)}n("renderDone",void 0),a=!0}};return t.modifyDoRenderImplementation&&(f=t.modifyDoRenderImplementation(f,s,c)),r={renderNow:f,scheduleRender:()=>{o||l||(o=requestAnimationFrame(f))},stop:()=>{o&&(cancelAnimationFrame(o),o=void 0),l=!0},resume:()=>{l=!1,a=!0,r.scheduleRender()},append:(d,p)=>{u(S.append,d,p)},insertBefore:(d,p)=>{u(S.insertBefore,d,p)},merge:(d,p)=>{u(S.merge,d,p)},replace:(d,p)=>{u(S.replace,d,p)},detach:d=>{for(let p=0;p<c.length;p++)if(c[p]===d)return c.splice(p,1),s.splice(p,1)[0];throw new Error("renderFunction was not found")}},r};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.0-beta.97
 */function Te(){const{classList:e}=document.body,r=window.matchMedia("(prefers-color-scheme: dark)").matches,t=()=>e.contains(bt)||e.contains(wt)&&r?"dark":"light",i=a=>document.body.dispatchEvent(new CustomEvent("calciteThemeChange",{bubbles:!0,detail:{theme:a}})),n=a=>{o!==a&&i(a),o=a};let o=t();i(o),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",a=>n(a.matches?"dark":"light")),new MutationObserver(()=>n(t())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function Mr(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?Te():document.addEventListener("DOMContentLoaded",()=>Te(),{once:!0}))}const Gr=Mr;Gr();let Ye;function Xr(){At($t(xt(Ye)))}Ye="components/assets";const Ke=Symbol("widget"),qr=[],Qr={},Q=new WeakMap;function et(e,r){let t=r.children;if(t&&t.length)for(let n=0;n<t.length;++n)t[n]=et(e,t[n]);else t=qr;const i=r.vnodeSelector;if(fe(i)){const n=r.properties||Qr,o=n.key||i;return{vnodeSelector:"div",properties:{key:o,afterCreate:Zr,afterUpdate:Jr,afterRemoved:tt,parentWidget:e,widgetConstructor:i,widgetProperties:{...n,key:o,children:t}},children:void 0,text:void 0,domNode:null}}return r}function Zr(e,r,t,{parentWidget:i,widgetConstructor:n,widgetProperties:o}){var l;const a=new n(o);a.container=e,Q.set(e,a),(l=a.afterCreate)==null||l.call(a,a,e),i._internalHandles.add(Se(()=>tt(e)))}function Jr(e,r,t,{widgetProperties:i}){var o;const n=Q.get(e);n&&(n.set(i),(o=n.afterUpdate)==null||o.call(n,n,e))}function tt(e){const r=Q.get(e);r&&(r.destroy(),Q.delete(e))}function fe(e){return typeof e=="function"&&e[Ke]}const Ee=new Set;function Yr(e){Ee.add(e),e.finally(()=>Ee.delete(e))}const Kr="esri.widgets.Widget";let ei=0;const ti={widgetIcon:"esri-icon-checkbox-unchecked"};function rt(e,r){for(const t in r)e[t]!=null&&(typeof e[t]=="object"&&typeof r[t]=="object"?rt(e[t],r==null?void 0:r[t]):e[t]=r[t]);return e}const ri=Wr({postProcessProjectionOptions(e){const r=e.eventHandlerInterceptor,t=/capture$/i;e.eventHandlerInterceptor=(i,n,o,a)=>{const l=r==null?void 0:r(i,n,o,a),s=t.test(i);if(!((i=i.replace(t,"")).toLowerCase()in o)||s){const c=i[2].toLowerCase()+i.slice(3),u=p=>l==null?void 0:l.call(o,p);o.addEventListener(c,u,s);const f=()=>o.removeEventListener(c,u,s),d=a.afterRemoved;a.afterRemoved=p=>{d==null||d(p),f()}}return l}},handleInterceptedEvent(e,r,t,i){const{eventPhase:n,type:o}=i,a=n===Event.CAPTURING_PHASE;let l=`on${o}${a?"capture":""}`;const s=r.properties;(s&&l in s||(l=`on${o[0].toUpperCase()}${o.slice(1)}${a?"Capture":""}`,s&&l in s))&&(Ue(),e.scheduleRender(),s[l].call(s.bind||t,i))}});let re=!1,y=class extends ht(ft.EventedAccessor){constructor(e,r){super(e,r),this._attached=!1,this._internalHandles=new nt,this._projector=ri,this._readyForTrueRender=!1,this.iconClass=ti.widgetIcon,this.key=this,this._loadLocale=ct(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const o=await pt(this._messageBundleProps.map(async({bundlePath:a,propertyName:l})=>{let s=await Tt(a);this.uiStrings&&Object.keys(this.uiStrings)&&(s=rt(gt(s),this.uiStrings)),this[l]=s}));for(const a of o)a.error&&_e.getLogger(this.declaredClass).error("widget-intl:locale-error",this.declaredClass,a.error)}await this.loadLocale()}),Xr();const t="esri-widget-uid-"+yt(),i=this.render.bind(this);this._trackingTarget=new ot(()=>this.scheduleRender());const n=()=>{var u;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:t,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0};const o=i();let{properties:a}=o;a||(o.properties=a={});let{key:l,styles:s}=a;l||(a.key=t),s||(a.styles=s={}),s.display||(s.display="");let c=0;return(u=o.children)==null||u.forEach(f=>{if(fe(f.vnodeSelector))return;let{properties:d}=f;d||(f.properties=d={}),d.key||(d.key=`${this.id}--${c++}`)}),et(this,o)};this.render=()=>{if(re)return n();let o=br(this)??null;if(o)return o;this._trackingTarget.clear(),re=!0;try{o=st(this._trackingTarget,n)}catch(a){throw console.error(a),a}finally{re=!1}return o&&wr(this,o),o},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),Yr(this._resourcesFetch)}normalizeCtorArgs(e,r){const t={...e};return r&&(t.container=r),t}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(ue)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(pe(this._trackingTarget),pe(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,ee(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return Et(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+ei++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get test(){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(ee(this),this._projector.scheduleRender())}classes(...e){return Tr.apply(this,e)}renderNow(){ee(this),this._projector.renderNow()}_postInitialize(){var r;if(this.destroyed)return;this.scheduleRender(),(r=this._delegatedEventNames)!=null&&r.length&&this._internalHandles.add(ge(()=>this.viewModel,(t,i)=>{i&&this._internalHandles.remove("delegated-events"),t&&dt(t)&&this._internalHandles.add(this._delegatedEventNames.map(n=>ut(t,n,o=>{this.emit(n,o)})),"delegated-events")},vt)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(ue),this.scheduleRender()};this._internalHandles.add([kt(e),ge(()=>this.uiStrings,e),mt(()=>this.container,t=>{this.destroyed||this._attach(t)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var r;this._attached&&(this._projector.detach(this.render),this._attached=!1),(r=e==null?void 0:e.parentNode)==null||r.removeChild(e)}};y[Ke]=!0,b([w()],y.prototype,"_readyForTrueRender",void 0),b([w({value:null})],y.prototype,"container",null),b([at("container")],y.prototype,"castContainer",null),b([w()],y.prototype,"domNode",null),b([w()],y.prototype,"iconClass",void 0),b([w()],y.prototype,"id",null),b([w()],y.prototype,"label",null),b([w()],y.prototype,"renderable",null),b([w()],y.prototype,"uiStrings",void 0),b([w()],y.prototype,"viewModel",void 0),b([w({value:!0})],y.prototype,"visible",null),b([w()],y.prototype,"key",void 0),b([w()],y.prototype,"children",void 0),b([w()],y.prototype,"afterCreate",void 0),b([w()],y.prototype,"afterUpdate",void 0),b([w()],y.prototype,"afterRemoved",void 0),y=b([lt(Kr)],y);const Ci=y;function Ni(e){return(r,t)=>{r.hasOwnProperty("_messageBundleProps")||(r._messageBundleProps=r._messageBundleProps?r._messageBundleProps.slice():[]),r._messageBundleProps.push({bundlePath:e,propertyName:t})}}var ii=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},it=function(e,r){for(var t=0,i=e.length;t<i;t++){var n=e[t];Array.isArray(n)?it(n,r):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=ii(n)),r.push(n))}},ni=function(e,r){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];if(t.length===1&&typeof t[0]=="string")return{vnodeSelector:e,properties:r||void 0,children:void 0,text:t[0],domNode:null};var n=[];return it(t,n),{vnodeSelector:e,properties:r||void 0,children:n,text:void 0,domNode:null}};function Ii(e,r,...t){return typeof e!="function"||fe(e)?ni(e,r,...t):e(r,...t)}function Oi(e){return e&&typeof e.render=="function"}function Pi(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}export{Ci as M,Oi as a,Et as b,Ai as c,Ni as e,ki as f,Ti as h,Li as i,_i as k,Ii as n,xi as o,Tr as p,$i as r,Pi as t,Ei as v,Si as w};
