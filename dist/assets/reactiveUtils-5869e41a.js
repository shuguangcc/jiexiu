import{e as $,r as d,p as j,a as p,v as w}from"./promiseUtils-32d9c228.js";import{P as L,r as q,c as x}from"./cast-a534ae90.js";import{h as m}from"./typedArrayUtil-d9bc5fbd.js";import"./string-480f3e3f.js";import"./Error-57322e92.js";function v(e,o,r={}){return a(e,o,r,y)}function B(e,o,r={}){return a(e,o,r,P)}function a(e,o,r={},n){let i=null;const u=r.once?(t,l)=>{n(t)&&(m(i),o(t,l))}:(t,l)=>{n(t)&&o(t,l)};if(i=L(e,u,r.sync,r.equals),r.initial){const t=e();u(t,t)}return i}function C(e,o,r,n={}){let i=null,u=null,t=null;function l(){var c;i&&u&&(u.remove(),(c=n.onListenerRemove)==null||c.call(n,i),i=null,u=null)}function f(c){n.once&&n.once&&m(t),r(c)}const h=v(e,(c,R)=>{var s;l(),$(c)&&(i=c,u=d(c,o,f),(s=n.onListenerAdd)==null||s.call(n,c))},{sync:n.sync,initial:!0});return t=x(()=>{h.remove(),l()}),t}function D(e,o){return A(e,P,o)}function A(e,o,r){if(j(r))return Promise.reject(p());const n=e();if(o!=null&&o(n))return Promise.resolve(n);let i=null;function u(){i=m(i)}return new Promise((t,l)=>{i=q([w(r,()=>{u(),l(p())}),a(e,f=>{u(),t(f)},{sync:!1,once:!0},o??y)])})}function y(e){return!0}function P(e){return!!e}function E(e,o,r={}){let n=!1;const i=v(e,(u,t)=>{n||o(u,t)},r);return{remove(){i.remove()},pause(){n=!0},resume(){n=!1}}}const F={sync:!0},G={initial:!0},H={sync:!0,initial:!0};export{E as P,F as U,C as a,B as f,G as h,D as j,v as l,H as w};
