import{_ as h}from"./preload-helper-101896b7.js";import{U as d}from"./request-f17a8ddb.js";import{a as n}from"./Error-57322e92.js";import{e as b}from"./ItemCache-bf1028d4.js";import{r as m,f as w}from"./typedArrayUtil-d9bc5fbd.js";import{F as v,a as z}from"./aaBoundingBox-4a83dbbc.js";import{t as _,c as g}from"./symbolLayerUtils3D-c8c40895.js";import"./string-480f3e3f.js";import"./promiseUtils-32d9c228.js";import"./MemCache-1d2f56ee.js";import"./cast-a534ae90.js";import"./ensureType-25b8cc06.js";import"./nextTick-3ee5a785.js";import"./Extent-a1a1de42.js";import"./aaBoundingRect-b340cf8c.js";import"./mathUtils-57aba1ea.js";import"./vec3-1863987c.js";import"./vec3f64-6cd30318.js";import"./common-c186b691.js";import"./vec4-46a9b36d.js";let s=a();function a(){return new b(50)}function M(){s=a()}function N(r,e){if(r.type==="icon")return p(r,e);if(r.type==="object")return f(r,e);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function Q(r,e){if(r.type==="icon")return j(r,e);if(r.type==="object")return B(r,e);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function p(r,e){var o,i;if((o=r.resource)!=null&&o.href)return L(r.resource.href).then(t=>[t.width,t.height]);if((i=r.resource)!=null&&i.primitive)return m(e)?[e,e]:[256,256];throw new n("symbol3d:invalid-symbol-layer","symbol layers of type Icon must have either an href or a primitive resource")}function j(r,e){return p(r,e).then(o=>{if(r.size==null)return o;const i=o[0]/o[1];return i>1?[r.size,r.size/i]:[r.size*i,r.size]})}function L(r){return d(r,{responseType:"image"}).then(e=>e.data)}function f(r,e){return S(r,e).then(o=>v(o))}async function B(r,e){const o=await f(r,e);return _(o,r)}async function S(r,e){var i;if(!r.isPrimitive){const t=w((i=r.resource)==null?void 0:i.href),u=s.get(t);if(u!==void 0)return u;const y=await h(()=>import("./objectResourceUtils-19f4db34.js").then(l=>l.o),["assets/objectResourceUtils-19f4db34.js","assets/devEnvironmentUtils-5002a058.js","assets/typedArrayUtil-d9bc5fbd.js","assets/mat3-9a8d9db7.js","assets/common-c186b691.js","assets/quatf64-c94bd656.js","assets/mat4-7dde83b1.js","assets/vec3f64-6cd30318.js","assets/mat4f64-fbeb2cd1.js","assets/vec3-1863987c.js","assets/aaBoundingBox-4a83dbbc.js","assets/Extent-a1a1de42.js","assets/cast-a534ae90.js","assets/string-480f3e3f.js","assets/Error-57322e92.js","assets/ensureType-25b8cc06.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-32d9c228.js","assets/aaBoundingRect-b340cf8c.js","assets/mathUtils-57aba1ea.js","assets/vec4-46a9b36d.js","assets/BufferView-478024d2.js","assets/vec2-ab9f47bf.js","assets/vec33-ec7b196f.js","assets/DefaultMaterial_COLOR_GAMMA-a5019594.js","assets/types-e1c0a5bf.js","assets/request-f17a8ddb.js","assets/preload-helper-101896b7.js","assets/asyncUtils-087555fc.js","assets/enums-64ab819c.js","assets/Version-b16872d5.js","assets/quat-ec16a584.js","assets/compilerUtils-fefa73ae.js","assets/Indices-d9b791ce.js","assets/mat3f32-d3d088e8.js","assets/vec2f32-461e65a9.js","assets/byteSizeEstimations-90c5a50d.js","assets/requestImageUtils-f656eddc.js","assets/OrderIndependentTransparency-68bd812c.js","assets/SSAOHelper-868f5969.js","assets/Util-289ce3b5.js","assets/vec2f64-30dc1443.js","assets/vec4f64-939de194.js","assets/triangle-8cd02c5d.js","assets/sphere-622880b9.js","assets/lineSegment-c6f0b9d1.js","assets/VertexAttribute-9c5c630d.js","assets/ScreenSpacePass-6db805f2.js","assets/Evented-cbf5f368.js","assets/SSAO.glsl-3068f7bf.js","assets/assets-a5ce5e1a.js","assets/Texture-411ca148.js","assets/context-util-d4c193b5.js","assets/VertexArrayObject-3630ef4f.js","assets/mat4f32-77b3d8ac.js","assets/ViewingMode-915d19cb.js","assets/vec3f32-4322908d.js","assets/SSAOBlur.glsl-ea338452.js","assets/VertexElementDescriptor-2925c6af.js","assets/InterleavedLayout-b5930508.js","assets/symbolColorUtils-dd198128.js"]),c=await y.fetch(t,{disableTextures:!0});return s.put(t,c.referenceBoundingBox),c.referenceBoundingBox}let o=null;if(r.resource&&r.resource.primitive&&(o=z(g(r.resource.primitive)),m(e)))for(let t=0;t<o.length;t++)o[t]*=e;return o?Promise.resolve(o):Promise.reject(new n("symbol:invalid-resource","The symbol does not have a valid resource"))}export{M as clearBoundingBoxCache,p as computeIconLayerResourceSize,N as computeLayerResourceSize,Q as computeLayerSize,f as computeObjectLayerResourceSize};
