import{t as c,r as u,i as f}from"./typedArrayUtil-d9bc5fbd.js";import{r as m}from"./ElevationInfo-88554f24.js";function v(e){return e?x:P}function b(e,t){return c(t)||!t.mode?v(e).mode:t.mode}function E(e,t){return u(t)?t:v(e)}function g(e,t){return b(!!u(e)&&e.hasZ,t)}function $(e,t){return E(!!u(e)&&e.hasZ,t)}function p(e){const t=d(e);return g(e.geometry,t)}function w(e){const t=d(e),n=g(e.geometry,t);return{mode:n,offset:u(t)&&n!=="on-the-ground"?f(t.offset,0)*m(f(t.unit,"meters")):0}}function R(e){if(p(e)==="on-the-ground")return!1;const t=d(e),n=u(t)&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!n||n==="0")}function d(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function j(e,t,n){if(c(n)||!n.mode)return;const o=e.hasZ?e.z:0,r=u(n.offset)?n.offset:0;switch(n.mode){case"absolute-height":return o-r;case"on-the-ground":return 0;case"relative-to-ground":return o-(f(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"ground"),0)+r);case"relative-to-scene":return o-(f(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"scene"),0)+r)}}function k(e,t,n,o=null){return h(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,n,o)}function q(e,t,n,o,r=null){return h(e,t[0],t[1],t.length>2?t[2]:0,n,o,r)}function h(e,t,n,o,r,a,s=null){if(c(a))return;const i=u(s)?s.mode:"absolute-height";if(i==="on-the-ground")return 0;const{absoluteZ:l}=Z(t,n,o,r,e,a);return y(l,t,n,o,r,e,s,i)}function Z(e,t,n,o,r,a){const s=u(a.offset)?a.offset:0;switch(a.mode){case"absolute-height":return{absoluteZ:n+s,elevation:0};case"on-the-ground":{const i=f(r.elevationProvider.getElevation(e,t,0,o,"ground"),0);return{absoluteZ:i,elevation:i}}case"relative-to-ground":{const i=f(r.elevationProvider.getElevation(e,t,n,o,"ground"),0);return{absoluteZ:n+i+s,elevation:i}}case"relative-to-scene":{const i=f(r.elevationProvider.getElevation(e,t,n,o,"scene"),0);return{absoluteZ:n+i+s,elevation:i}}}}function y(e,t,n,o,r,a,s,i){const l=u(s)&&u(s.offset)?s.offset:0;switch(i){case"absolute-height":return e-l;case"relative-to-ground":return e-(f(a.elevationProvider.getElevation(t,n,o,r,"ground"),0)+l);case"relative-to-scene":return e-(f(a.elevationProvider.getElevation(t,n,o,r,"scene"),0)+l)}}function A(e,t){if(c(t))return!1;const{mode:n}=t;return u(n)&&(e==="scene"&&n==="relative-to-scene"||e==="ground"&&n!=="absolute-height")}const x={mode:"absolute-height",offset:0},P={mode:"on-the-ground",offset:null};function B(e,t){return e===t||u(e)&&u(t)&&e.mode===t.mode&&e.offset===t.offset}export{x as E,$ as a,R as c,j as d,w as f,k as g,q as h,g as i,p as l,E as s,b as u,B as x,A as y};
